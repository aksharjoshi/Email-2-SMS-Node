var Theme={ComboBox:{Light:"scrollbar-2-theme fields-set-1",ModernLight:"scrollbar-2-theme fields-set-3"}};
/*!
 * jQuery JavaScript Library v1.8.1
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2012 jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: Thu Aug 30 2012 17:17:22 GMT-0400 (Eastern Daylight Time)
 */
(function(a3,aC){var w,ag,o=a3.document,aJ=a3.location,d=a3.navigator,bh=a3.jQuery,I=a3.$,an=Array.prototype.push,a5=Array.prototype.slice,aL=Array.prototype.indexOf,z=Object.prototype.toString,V=Object.prototype.hasOwnProperty,aP=String.prototype.trim,bH=function(b0,b1){return new bH.fn.init(b0,b1,w)},by=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,ab=/\S/,aW=/\s+/,C=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,bp=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,a=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,bg=/^[\],:{}\s]*$/,bj=/(?:^|:|,)(?:\s*\[)+/g,bE=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,a1=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,bQ=/^-ms-/,aV=/-([\da-z])/gi,N=function(b0,b1){return(b1+"").toUpperCase()},aG=function(){if(o.addEventListener){o.removeEventListener("DOMContentLoaded",aG,false);bH.ready()}else{if(o.readyState==="complete"){o.detachEvent("onreadystatechange",aG);bH.ready()}}},aa={};bH.fn=bH.prototype={constructor:bH,init:function(b0,b4,b3){var b2,b5,b1,b6;if(!b0){return this}if(b0.nodeType){this.context=this[0]=b0;this.length=1;return this}if(typeof b0==="string"){if(b0.charAt(0)==="<"&&b0.charAt(b0.length-1)===">"&&b0.length>=3){b2=[null,b0,null]}else{b2=bp.exec(b0)}if(b2&&(b2[1]||!b4)){if(b2[1]){b4=b4 instanceof bH?b4[0]:b4;b6=(b4&&b4.nodeType?b4.ownerDocument||b4:o);b0=bH.parseHTML(b2[1],b6,true);if(a.test(b2[1])&&bH.isPlainObject(b4)){this.attr.call(b0,b4,true)}return bH.merge(this,b0)}else{b5=o.getElementById(b2[2]);if(b5&&b5.parentNode){if(b5.id!==b2[2]){return b3.find(b0)}this.length=1;this[0]=b5}this.context=o;this.selector=b0;return this}}else{if(!b4||b4.jquery){return(b4||b3).find(b0)}else{return this.constructor(b4).find(b0)}}}else{if(bH.isFunction(b0)){return b3.ready(b0)}}if(b0.selector!==aC){this.selector=b0.selector;this.context=b0.context}return bH.makeArray(b0,this)},selector:"",jquery:"1.8.1",length:0,size:function(){return this.length},toArray:function(){return a5.call(this)},get:function(b0){return b0==null?this.toArray():(b0<0?this[this.length+b0]:this[b0])},pushStack:function(b1,b3,b0){var b2=bH.merge(this.constructor(),b1);b2.prevObject=this;b2.context=this.context;if(b3==="find"){b2.selector=this.selector+(this.selector?" ":"")+b0}else{if(b3){b2.selector=this.selector+"."+b3+"("+b0+")"}}return b2},each:function(b1,b0){return bH.each(this,b1,b0)},ready:function(b0){bH.ready.promise().done(b0);return this},eq:function(b0){b0=+b0;return b0===-1?this.slice(b0):this.slice(b0,b0+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(a5.apply(this,arguments),"slice",a5.call(arguments).join(","))},map:function(b0){return this.pushStack(bH.map(this,function(b2,b1){return b0.call(b2,b1,b2)}))},end:function(){return this.prevObject||this.constructor(null)},push:an,sort:[].sort,splice:[].splice};bH.fn.init.prototype=bH.fn;bH.extend=bH.fn.extend=function(){var b9,b2,b0,b1,b6,b7,b5=arguments[0]||{},b4=1,b3=arguments.length,b8=false;if(typeof b5==="boolean"){b8=b5;b5=arguments[1]||{};b4=2}if(typeof b5!=="object"&&!bH.isFunction(b5)){b5={}}if(b3===b4){b5=this;--b4}for(;b4<b3;b4++){if((b9=arguments[b4])!=null){for(b2 in b9){b0=b5[b2];b1=b9[b2];if(b5===b1){continue}if(b8&&b1&&(bH.isPlainObject(b1)||(b6=bH.isArray(b1)))){if(b6){b6=false;b7=b0&&bH.isArray(b0)?b0:[]}else{b7=b0&&bH.isPlainObject(b0)?b0:{}}b5[b2]=bH.extend(b8,b7,b1)}else{if(b1!==aC){b5[b2]=b1}}}}}return b5};bH.extend({noConflict:function(b0){if(a3.$===bH){a3.$=I}if(b0&&a3.jQuery===bH){a3.jQuery=bh}return bH},isReady:false,readyWait:1,holdReady:function(b0){if(b0){bH.readyWait++}else{bH.ready(true)}},ready:function(b0){if(b0===true?--bH.readyWait:bH.isReady){return}if(!o.body){return setTimeout(bH.ready,1)}bH.isReady=true;if(b0!==true&&--bH.readyWait>0){return}ag.resolveWith(o,[bH]);if(bH.fn.trigger){bH(o).trigger("ready").off("ready")}},isFunction:function(b0){return bH.type(b0)==="function"},isArray:Array.isArray||function(b0){return bH.type(b0)==="array"},isWindow:function(b0){return b0!=null&&b0==b0.window},isNumeric:function(b0){return !isNaN(parseFloat(b0))&&isFinite(b0)},type:function(b0){return b0==null?String(b0):aa[z.call(b0)]||"object"},isPlainObject:function(b2){if(!b2||bH.type(b2)!=="object"||b2.nodeType||bH.isWindow(b2)){return false}try{if(b2.constructor&&!V.call(b2,"constructor")&&!V.call(b2.constructor.prototype,"isPrototypeOf")){return false}}catch(b1){return false}var b0;for(b0 in b2){}return b0===aC||V.call(b2,b0)},isEmptyObject:function(b1){var b0;for(b0 in b1){return false}return true},error:function(b0){throw new Error(b0)},parseHTML:function(b3,b2,b0){var b1;if(!b3||typeof b3!=="string"){return null}if(typeof b2==="boolean"){b0=b2;b2=0}b2=b2||o;if((b1=a.exec(b3))){return[b2.createElement(b1[1])]}b1=bH.buildFragment([b3],b2,b0?null:[]);return bH.merge([],(b1.cacheable?bH.clone(b1.fragment):b1.fragment).childNodes)},parseJSON:function(b0){if(!b0||typeof b0!=="string"){return null}b0=bH.trim(b0);if(a3.JSON&&a3.JSON.parse){return a3.JSON.parse(b0)}if(bg.test(b0.replace(bE,"@").replace(a1,"]").replace(bj,""))){return(new Function("return "+b0))()}bH.error("Invalid JSON: "+b0)},parseXML:function(b2){var b0,b1;if(!b2||typeof b2!=="string"){return null}try{if(a3.DOMParser){b1=new DOMParser();b0=b1.parseFromString(b2,"text/xml")}else{b0=new ActiveXObject("Microsoft.XMLDOM");b0.async="false";b0.loadXML(b2)}}catch(b3){b0=aC}if(!b0||!b0.documentElement||b0.getElementsByTagName("parsererror").length){bH.error("Invalid XML: "+b2)}return b0},noop:function(){},globalEval:function(b0){if(b0&&ab.test(b0)){(a3.execScript||function(b1){a3["eval"].call(a3,b1)})(b0)}},camelCase:function(b0){return b0.replace(bQ,"ms-").replace(aV,N)},nodeName:function(b1,b0){return b1.nodeName&&b1.nodeName.toUpperCase()===b0.toUpperCase()},each:function(b5,b6,b2){var b1;var b3=0;var b0=!Z(b5);var b4=b5.length;if(b2){if(b0){for(b1 in b5){if(b6.apply(b5[b1],b2)===false){break}}}else{for(;b3<b4;){if(b6.apply(b5[b3++],b2)===false){break}}}}else{if(b0){for(b1 in b5){if(b6.call(b5[b1],b1,b5[b1])===false){break}}}else{for(;b3<b4;){if(b6.call(b5[b3],b3,b5[b3++])===false){break}}}}return b5},trim:aP&&!aP.call("\uFEFF\xA0")?function(b0){return b0==null?"":aP.call(b0)}:function(b0){return b0==null?"":b0.toString().replace(C,"")},makeArray:function(b0,b2){var b3,b1=b2||[];if(b0!=null){b3=bH.type(b0);if(b0.length==null||b3==="string"||b3==="function"||b3==="regexp"||bH.isWindow(b0)){an.call(b1,b0)}else{bH.merge(b1,b0)}}return b1},inArray:function(b3,b1,b2){var b0;if(b1){if(aL){return aL.call(b1,b3,b2)}b0=b1.length;b2=b2?b2<0?Math.max(0,b0+b2):b2:0;for(;b2<b0;b2++){if(b2 in b1&&b1[b2]===b3){return b2}}}return -1},getIndexOfElementInArray:function(b4,b1,b2){var b0;b2=b2?b2:$.defaultEqualityComparer;if(b1){b0=b1.length;for(var b3=0;b3<b0;b3++){if(b2(b1[b3],b4)){return b3}}}return -1},merge:function(b4,b2){var b0=b2.length,b3=b4.length,b1=0;if(typeof b0==="number"){for(;b1<b0;b1++){b4[b3++]=b2[b1]}}else{while(b2[b1]!==aC){b4[b3++]=b2[b1++]}}b4.length=b3;return b4},grep:function(b1,b6,b0){var b5,b2=[],b3=0,b4=b1.length;b0=!!b0;for(;b3<b4;b3++){b5=!!b6(b1[b3],b3);if(b0!==b5){b2.push(b1[b3])}}return b2},map:function(b0,b7,b8){var b5,b6,b4=[],b2=0,b1=b0.length,b3=b0 instanceof bH||b1!==aC&&typeof b1==="number"&&((b1>0&&b0[0]&&b0[b1-1])||b1===0||bH.isArray(b0));if(b3){for(;b2<b1;b2++){b5=b7(b0[b2],b2,b8);if(b5!=null){b4[b4.length]=b5}}}else{for(b6 in b0){b5=b7(b0[b6],b6,b8);if(b5!=null){b4[b4.length]=b5}}}return b4.concat.apply([],b4)},guid:1,proxy:function(b4,b3){var b2,b0,b1;if(typeof b3==="string"){b2=b4[b3];b3=b4;b4=b2}if(!bH.isFunction(b4)){return aC}b0=a5.call(arguments,2);b1=function(){return b4.apply(b3,b0.concat(a5.call(arguments)))};b1.guid=b4.guid=b4.guid||b1.guid||bH.guid++;return b1},access:function(b0,b6,b9,b7,b4,ca,b8){var b2,b5=b9==null,b3=0,b1=b0.length;if(b9&&typeof b9==="object"){for(b3 in b9){bH.access(b0,b6,b3,b9[b3],1,ca,b7)}b4=1}else{if(b7!==aC){b2=b8===aC&&bH.isFunction(b7);if(b5){if(b2){b2=b6;b6=function(cc,cb,cd){return b2.call(bH(cc),cd)}}else{b6.call(b0,b7);b6=null}}if(b6){for(;b3<b1;b3++){b6(b0[b3],b9,b2?b7.call(b0[b3],b3,b6(b0[b3],b9)):b7,b8)}}b4=1}}return b4?b0:b5?b6.call(b0):b1?b6(b0[0],b9):ca},now:function(){return(new Date()).getTime()}});bH.ready.promise=function(b3){if(!ag){ag=bH.Deferred();if(o.readyState==="complete"){setTimeout(bH.ready,1)}else{if(o.addEventListener){o.addEventListener("DOMContentLoaded",aG,false);a3.addEventListener("load",bH.ready,false)}else{o.attachEvent("onreadystatechange",aG);a3.attachEvent("onload",bH.ready);var b2=false;try{b2=a3.frameElement==null&&o.documentElement}catch(b1){}if(b2&&b2.doScroll){(function b0(){if(!bH.isReady){try{b2.doScroll("left")}catch(b4){return setTimeout(b0,50)}bH.ready()}})()}}}}return ag.promise(b3)};bH.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(b1,b0){aa["[object "+b0+"]"]=b0.toLowerCase()});w=bH(o);var bV={};function ad(b1){var b0=bV[b1]={};bH.each(b1.split(aW),function(b3,b2){b0[b2]=true});return b0}bH.Callbacks=function(ca){ca=typeof ca==="string"?(bV[ca]||ad(ca)):bH.extend({},ca);var b3,b0,b4,b2,b5,b6,b7=[],b8=!ca.once&&[],b1=function(cb){b3=ca.memory&&cb;b0=true;b6=b2||0;b2=0;b5=b7.length;b4=true;for(;b7&&b6<b5;b6++){if(b7[b6].apply(cb[0],cb[1])===false&&ca.stopOnFalse){b3=false;break}}b4=false;if(b7){if(b8){if(b8.length){b1(b8.shift())}}else{if(b3){b7=[]}else{b9.disable()}}}},b9={add:function(){if(b7){var cc=b7.length;(function cb(cd){bH.each(cd,function(cf,ce){var cg=bH.type(ce);if(cg==="function"&&(!ca.unique||!b9.has(ce))){b7.push(ce)}else{if(ce&&ce.length&&cg!=="string"){cb(ce)}}})})(arguments);if(b4){b5=b7.length}else{if(b3){b2=cc;b1(b3)}}}return this},remove:function(){if(b7){bH.each(arguments,function(cd,cb){var cc;while((cc=bH.inArray(cb,b7,cc))>-1){b7.splice(cc,1);if(b4){if(cc<=b5){b5--}if(cc<=b6){b6--}}}})}return this},has:function(cb){return bH.inArray(cb,b7)>-1},empty:function(){b7=[];return this},disable:function(){b7=b8=b3=aC;return this},disabled:function(){return !b7},lock:function(){b8=aC;if(!b3){b9.disable()}return this},locked:function(){return !b8},fireWith:function(cc,cb){cb=cb||[];cb=[cc,cb.slice?cb.slice():cb];if(b7&&(!b0||b8)){if(b4){b8.push(cb)}else{b1(cb)}}return this},fire:function(){b9.fireWith(this,arguments);return this},fired:function(){return !!b0}};return b9};bH.extend({Deferred:function(b2){var b1=[["resolve","done",bH.Callbacks("once memory"),"resolved"],["reject","fail",bH.Callbacks("once memory"),"rejected"],["notify","progress",bH.Callbacks("memory")]],b3="pending",b4={state:function(){return b3},always:function(){b0.done(arguments).fail(arguments);return this},then:function(){var b5=arguments;return bH.Deferred(function(b6){bH.each(b1,function(b8,b7){var ca=b7[0],b9=b5[b8];b0[b7[1]](bH.isFunction(b9)?function(){var cb=b9.apply(this,arguments);if(cb&&bH.isFunction(cb.promise)){cb.promise().done(b6.resolve).fail(b6.reject).progress(b6.notify)}else{b6[ca+"With"](this===b0?b6:this,[cb])}}:b6[ca])});b5=null}).promise()},promise:function(b5){return typeof b5==="object"?bH.extend(b5,b4):b4}},b0={};b4.pipe=b4.then;bH.each(b1,function(b6,b5){var b8=b5[2],b7=b5[3];b4[b5[1]]=b8.add;if(b7){b8.add(function(){b3=b7},b1[b6^1][2].disable,b1[2][2].lock)}b0[b5[0]]=b8.fire;b0[b5[0]+"With"]=b8.fireWith});b4.promise(b0);if(b2){b2.call(b0,b0)}return b0},when:function(b4){var b2=0,b6=a5.call(arguments),b0=b6.length,b1=b0!==1||(b4&&bH.isFunction(b4.promise))?b0:0,b9=b1===1?b4:bH.Deferred(),b3=function(cb,cc,ca){return function(cd){cc[cb]=this;ca[cb]=arguments.length>1?a5.call(arguments):cd;if(ca===b8){b9.notifyWith(cc,ca)}else{if(!(--b1)){b9.resolveWith(cc,ca)}}}},b8,b5,b7;if(b0>1){b8=new Array(b0);b5=new Array(b0);b7=new Array(b0);for(;b2<b0;b2++){if(b6[b2]&&bH.isFunction(b6[b2].promise)){b6[b2].promise().done(b3(b2,b7,b6)).fail(b9.reject).progress(b3(b2,b5,b8))}else{--b1}}}if(!b1){b9.resolveWith(b7,b6)}return b9.promise()}});bH.support=(function(){var cc,cb,b9,ca,b3,b8,b7,b5,b4,b2,b0,b1=o.createElement("div");b1.setAttribute("className","t");b1.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";cb=b1.getElementsByTagName("*");b9=b1.getElementsByTagName("a")[0];b9.style.cssText="top:1px;float:left;opacity:.5";if(!cb||!cb.length||!b9){return{}}ca=o.createElement("select");b3=ca.appendChild(o.createElement("option"));b8=b1.getElementsByTagName("input")[0];cc={leadingWhitespace:(b1.firstChild.nodeType===3),tbody:!b1.getElementsByTagName("tbody").length,htmlSerialize:!!b1.getElementsByTagName("link").length,style:/top/.test(b9.getAttribute("style")),hrefNormalized:(b9.getAttribute("href")==="/a"),opacity:/^0.5/.test(b9.style.opacity),cssFloat:!!b9.style.cssFloat,checkOn:(b8.value==="on"),optSelected:b3.selected,getSetAttribute:b1.className!=="t",enctype:!!o.createElement("form").enctype,html5Clone:o.createElement("nav").cloneNode(true).outerHTML!=="<:nav></:nav>",boxModel:(o.compatMode==="CSS1Compat"),submitBubbles:true,changeBubbles:true,focusinBubbles:false,deleteExpando:true,noCloneEvent:true,inlineBlockNeedsLayout:false,shrinkWrapBlocks:false,reliableMarginRight:true,boxSizingReliable:true,pixelPosition:false};b8.checked=true;cc.noCloneChecked=b8.cloneNode(true).checked;ca.disabled=true;cc.optDisabled=!b3.disabled;try{delete b1.test}catch(b6){cc.deleteExpando=false}if(!b1.addEventListener&&b1.attachEvent&&b1.fireEvent){b1.attachEvent("onclick",b0=function(){cc.noCloneEvent=false});b1.cloneNode(true).fireEvent("onclick");b1.detachEvent("onclick",b0)}b8=o.createElement("input");b8.value="t";b8.setAttribute("type","radio");cc.radioValue=b8.value==="t";b8.setAttribute("checked","checked");b8.setAttribute("name","t");b1.appendChild(b8);b7=o.createDocumentFragment();b7.appendChild(b1.lastChild);cc.checkClone=b7.cloneNode(true).cloneNode(true).lastChild.checked;cc.appendChecked=b8.checked;b7.removeChild(b8);b7.appendChild(b1);if(b1.attachEvent){for(b4 in {submit:true,change:true,focusin:true}){b5="on"+b4;b2=(b5 in b1);if(!b2){b1.setAttribute(b5,"return;");b2=(typeof b1[b5]==="function")}cc[b4+"Bubbles"]=b2}}bH(function(){var ce,ci,cg,ch,cf="padding:0;margin:0;border:0;display:block;overflow:hidden;",cd=o.getElementsByTagName("body")[0];if(!cd){return}ce=o.createElement("div");ce.style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px";cd.insertBefore(ce,cd.firstChild);ci=o.createElement("div");ce.appendChild(ci);ci.innerHTML="<table><tr><td></td><td>t</td></tr></table>";cg=ci.getElementsByTagName("td");cg[0].style.cssText="padding:0;margin:0;border:0;display:none";b2=(cg[0].offsetHeight===0);cg[0].style.display="";cg[1].style.display="none";cc.reliableHiddenOffsets=b2&&(cg[0].offsetHeight===0);ci.innerHTML="";ci.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;";cc.boxSizing=false;cc.doesNotIncludeMarginInBodyOffset=(cd.offsetTop!==1);if(a3.getComputedStyle){cc.pixelPosition=(a3.getComputedStyle(ci,null)||{}).top!=="1%";cc.boxSizingReliable=(a3.getComputedStyle(ci,null)||{width:"4px"}).width==="4px";ch=o.createElement("div");ch.style.cssText=ci.style.cssText=cf;ch.style.marginRight=ch.style.width="0";ci.style.width="1px";ci.appendChild(ch);cc.reliableMarginRight=!parseFloat((a3.getComputedStyle(ch,null)||{}).marginRight)}if(typeof ci.style.zoom!=="undefined"){ci.innerHTML="";ci.style.cssText=cf+"width:1px;padding:1px;display:inline;zoom:1";cc.inlineBlockNeedsLayout=(ci.offsetWidth===3);ci.style.display="block";ci.style.overflow="visible";ci.innerHTML="<div></div>";ci.firstChild.style.width="5px";cc.shrinkWrapBlocks=(ci.offsetWidth!==3);ce.style.zoom=1}cd.removeChild(ce);ce=ci=cg=ch=null});b7.removeChild(b1);cb=b9=ca=b3=b8=b7=b1=null;return cc})();var bu=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,aM=/([A-Z])/g;bH.extend({cache:{},deletedIds:[],uuid:0,expando:"jQuery"+(bH.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:true,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:true},hasData:function(b0){b0=b0.nodeType?bH.cache[b0[bH.expando]]:b0[bH.expando];return !!b0&&!O(b0)},data:function(b3,b1,b5,b4){if(!bH.acceptData(b3)){return}var b6,b8,b9=bH.expando,b7=typeof b1==="string",ca=b3.nodeType,b0=ca?bH.cache:b3,b2=ca?b3[b9]:b3[b9]&&b9;if((!b2||!b0[b2]||(!b4&&!b0[b2].data))&&b7&&b5===aC){return}if(!b2){if(ca){b3[b9]=b2=bH.deletedIds.pop()||++bH.uuid}else{b2=b9}}if(!b0[b2]){b0[b2]={};if(!ca){b0[b2].toJSON=bH.noop}}if(typeof b1==="object"||typeof b1==="function"){if(b4){b0[b2]=bH.extend(b0[b2],b1)}else{b0[b2].data=bH.extend(b0[b2].data,b1)}}b6=b0[b2];if(!b4){if(!b6.data){b6.data={}}b6=b6.data}if(b5!==aC){b6[bH.camelCase(b1)]=b5}if(b7){b8=b6[b1];if(b8==null){b8=b6[bH.camelCase(b1)]}}else{b8=b6}return b8},removeData:function(b3,b1,b4){if(!bH.acceptData(b3)){return}var b7,b6,b5,b8=b3.nodeType,b0=b8?bH.cache:b3,b2=b8?b3[bH.expando]:bH.expando;if(!b0[b2]){return}if(b1){b7=b4?b0[b2]:b0[b2].data;if(b7){if(!bH.isArray(b1)){if(b1 in b7){b1=[b1]}else{b1=bH.camelCase(b1);if(b1 in b7){b1=[b1]}else{b1=b1.split(" ")}}}for(b6=0,b5=b1.length;b6<b5;b6++){delete b7[b1[b6]]}if(!(b4?O:bH.isEmptyObject)(b7)){return}}}if(!b4){delete b0[b2].data;if(!O(b0[b2])){return}}if(b8){bH.cleanData([b3],true)}else{if(bH.support.deleteExpando||b0!=b0.window){delete b0[b2]}else{b0[b2]=null}}},_data:function(b1,b0,b2){return bH.data(b1,b0,b2,true)},acceptData:function(b1){var b0=b1.nodeName&&bH.noData[b1.nodeName.toLowerCase()];return !b0||b0!==true&&b1.getAttribute("classid")===b0}});bH.fn.extend({data:function(b9,b8){var b4,b1,b7,b0,b3,b2=this[0],b6=0,b5=null;if(b9===aC){if(this.length){b5=bH.data(b2);if(b2.nodeType===1&&!bH._data(b2,"parsedAttrs")){b7=b2.attributes;for(b3=b7.length;b6<b3;b6++){b0=b7[b6].name;if(b0.indexOf("data-")===0){b0=bH.camelCase(b0.substring(5));bw(b2,b0,b5[b0])}}bH._data(b2,"parsedAttrs",true)}}return b5}if(typeof b9==="object"){return this.each(function(){bH.data(this,b9)})}b4=b9.split(".",2);b4[1]=b4[1]?"."+b4[1]:"";b1=b4[1]+"!";return bH.access(this,function(ca){if(ca===aC){b5=this.triggerHandler("getData"+b1,[b4[0]]);if(b5===aC&&b2){b5=bH.data(b2,b9);b5=bw(b2,b9,b5)}return b5===aC&&b4[1]?this.data(b4[0]):b5}b4[1]=ca;this.each(function(){var cb=bH(this);bH.data(this,b9,ca)})},null,b8,arguments.length>1,null,false)},removeData:function(b0){return this.each(function(){bH.removeData(this,b0)})}});function bw(b2,b1,b3){if(b3===aC&&b2.nodeType===1){var b0="data-"+b1.replace(aM,"-$1").toLowerCase();b3=b2.getAttribute(b0);if(typeof b3==="string"){try{b3=b3==="true"?true:b3==="false"?false:b3==="null"?null:+b3+""===b3?+b3:bu.test(b3)?bH.parseJSON(b3):b3}catch(b4){}bH.data(b2,b1,b3)}else{b3=aC}}return b3}function O(b1){var b0;for(b0 in b1){if(b0==="data"&&bH.isEmptyObject(b1[b0])){continue}if(b0!=="toJSON"){return false}}return true}bH.extend({queue:function(b2,b1,b3){var b0;if(b2){b1=(b1||"fx")+"queue";b0=bH._data(b2,b1);if(b3){if(!b0||bH.isArray(b3)){b0=bH._data(b2,b1,bH.makeArray(b3))}else{b0.push(b3)}}return b0||[]}},dequeue:function(b5,b4){b4=b4||"fx";var b1=bH.queue(b5,b4),b6=b1.length,b3=b1.shift(),b0=bH._queueHooks(b5,b4),b2=function(){bH.dequeue(b5,b4)};if(b3==="inprogress"){b3=b1.shift();b6--}if(b3){if(b4==="fx"){b1.unshift("inprogress")}delete b0.stop;b3.call(b5,b2,b0)}if(!b6&&b0){b0.empty.fire()}},_queueHooks:function(b2,b1){var b0=b1+"queueHooks";return bH._data(b2,b0)||bH._data(b2,b0,{empty:bH.Callbacks("once memory").add(function(){bH.removeData(b2,b1+"queue",true);bH.removeData(b2,b0,true)})})}});bH.fn.extend({queue:function(b0,b1){var b2=2;if(typeof b0!=="string"){b1=b0;b0="fx";b2--}if(arguments.length<b2){return bH.queue(this[0],b0)}return b1===aC?this:this.each(function(){var b3=bH.queue(this,b0,b1);bH._queueHooks(this,b0);if(b0==="fx"&&b3[0]!=="inprogress"){bH.dequeue(this,b0)}})},dequeue:function(b0){return this.each(function(){bH.dequeue(this,b0)})},delay:function(b1,b0){b1=bH.fx?bH.fx.speeds[b1]||b1:b1;b0=b0||"fx";return this.queue(b0,function(b3,b2){var b4=setTimeout(b3,b1);b2.stop=function(){clearTimeout(b4)}})},clearQueue:function(b0){return this.queue(b0||"fx",[])},promise:function(b2,b6){var b1,b3=1,b7=bH.Deferred(),b5=this,b0=this.length,b4=function(){if(!(--b3)){b7.resolveWith(b5,[b5])}};if(typeof b2!=="string"){b6=b2;b2=aC}b2=b2||"fx";while(b0--){b1=bH._data(b5[b0],b2+"queueHooks");if(b1&&b1.empty){b3++;b1.empty.add(b4)}}b4();return b7.promise(b6)}});var a8,bW,n,bK=/[\t\r\n]/g,aj=/\r/g,j=/^(?:button|input)$/i,aB=/^(?:button|input|object|select|textarea)$/i,D=/^a(?:rea|)$/i,M=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,bM=bH.support.getSetAttribute;bH.fn.extend({attr:function(b0,b1){return bH.access(this,bH.attr,b0,b1,arguments.length>1)},removeAttr:function(b0){return this.each(function(){bH.removeAttr(this,b0)})},prop:function(b0,b1){return bH.access(this,bH.prop,b0,b1,arguments.length>1)},removeProp:function(b0){b0=bH.propFix[b0]||b0;return this.each(function(){try{this[b0]=aC;delete this[b0]}catch(b1){}})},addClass:function(b4){var b6,b2,b1,b3,b5,b7,b0;if(bH.isFunction(b4)){return this.each(function(b8){bH(this).addClass(b4.call(this,b8,this.className))})}if(b4&&typeof b4==="string"){b6=b4.split(aW);for(b2=0,b1=this.length;b2<b1;b2++){b3=this[b2];if(b3.nodeType===1){if(!b3.className&&b6.length===1){b3.className=b4}else{b5=" "+b3.className+" ";for(b7=0,b0=b6.length;b7<b0;b7++){if(!~b5.indexOf(" "+b6[b7]+" ")){b5+=b6[b7]+" "}}b3.className=bH.trim(b5)}}}}return this},removeClass:function(b6){var b3,b4,b5,b7,b1,b2,b0;if(bH.isFunction(b6)){return this.each(function(b8){bH(this).removeClass(b6.call(this,b8,this.className))})}if((b6&&typeof b6==="string")||b6===aC){b3=(b6||"").split(aW);for(b2=0,b0=this.length;b2<b0;b2++){b5=this[b2];if(b5.nodeType===1&&b5.className){b4=(" "+b5.className+" ").replace(bK," ");for(b7=0,b1=b3.length;b7<b1;b7++){while(b4.indexOf(" "+b3[b7]+" ")>-1){b4=b4.replace(" "+b3[b7]+" "," ")}}b5.className=b6?bH.trim(b4):""}}}return this},toggleClass:function(b3,b1){var b2=typeof b3,b0=typeof b1==="boolean";if(bH.isFunction(b3)){return this.each(function(b4){bH(this).toggleClass(b3.call(this,b4,this.className,b1),b1)})}return this.each(function(){if(b2==="string"){var b6,b5=0,b4=bH(this),b7=b1,b8=b3.split(aW);while((b6=b8[b5++])){b7=b0?b7:!b4.hasClass(b6);b4[b7?"addClass":"removeClass"](b6)}}else{if(b2==="undefined"||b2==="boolean"){if(this.className){bH._data(this,"__className__",this.className)}this.className=this.className||b3===false?"":bH._data(this,"__className__")||""}}})},hasClass:function(b0){var b3=" "+b0+" ",b2=0,b1=this.length;for(;b2<b1;b2++){if(this[b2].nodeType===1&&(" "+this[b2].className+" ").replace(bK," ").indexOf(b3)>-1){return true}}return false},val:function(b3){var b0,b1,b4,b2=this[0];if(!arguments.length){if(b2){b0=bH.valHooks[b2.type]||bH.valHooks[b2.nodeName.toLowerCase()];if(b0&&"get" in b0&&(b1=b0.get(b2,"value"))!==aC){return b1}b1=b2.value;return typeof b1==="string"?b1.replace(aj,""):b1==null?"":b1}return}b4=bH.isFunction(b3);return this.each(function(b6){var b7,b5=bH(this);if(this.nodeType!==1){return}if(b4){b7=b3.call(this,b6,b5.val())}else{b7=b3}if(b7==null){b7=""}else{if(typeof b7==="number"){b7+=""}else{if(bH.isArray(b7)){b7=bH.map(b7,function(b8){return b8==null?"":b8+""})}}}b0=bH.valHooks[this.type]||bH.valHooks[this.nodeName.toLowerCase()];if(!b0||!("set" in b0)||b0.set(this,b7,"value")===aC){this.value=b7}})}});bH.extend({valHooks:{option:{get:function(b0){var b1=b0.attributes.value;return !b1||b1.specified?b0.value:b0.text}},select:{get:function(b0){var b6,b1,b5,b3,b4=b0.selectedIndex,b7=[],b8=b0.options,b2=b0.type==="select-one";if(b4<0){return null}b1=b2?b4:0;b5=b2?b4+1:b8.length;for(;b1<b5;b1++){b3=b8[b1];if(b3.selected&&(bH.support.optDisabled?!b3.disabled:b3.getAttribute("disabled")===null)&&(!b3.parentNode.disabled||!bH.nodeName(b3.parentNode,"optgroup"))){b6=bH(b3).val();if(b2){return b6}b7.push(b6)}}if(b2&&!b7.length&&b8.length){return bH(b8[b4]).val()}return b7},set:function(b1,b2){var b0=bH.makeArray(b2);bH(b1).find("option").each(function(){this.selected=bH.inArray(bH(this).val(),b0)>=0});if(!b0.length){b1.selectedIndex=-1}return b0}}},attrFn:{},attr:function(b6,b3,b7,b5){var b2,b0,b4,b1=b6.nodeType;if(!b6||b1===3||b1===8||b1===2){return}if(b5&&bH.isFunction(bH.fn[b3])){return bH(b6)[b3](b7)}if(typeof b6.getAttribute==="undefined"){return bH.prop(b6,b3,b7)}b4=b1!==1||!bH.isXMLDoc(b6);if(b4){b3=b3.toLowerCase();b0=bH.attrHooks[b3]||(M.test(b3)?bW:a8)}if(b7!==aC){if(b7===null){bH.removeAttr(b6,b3);return}else{if(b0&&"set" in b0&&b4&&(b2=b0.set(b6,b7,b3))!==aC){return b2}else{b6.setAttribute(b3,""+b7);return b7}}}else{if(b0&&"get" in b0&&b4&&(b2=b0.get(b6,b3))!==null){return b2}else{b2=b6.getAttribute(b3);return b2===null?aC:b2}}},removeAttr:function(b3,b5){var b4,b6,b1,b0,b2=0;if(b5&&b3.nodeType===1){b6=b5.split(aW);for(;b2<b6.length;b2++){b1=b6[b2];if(b1){b4=bH.propFix[b1]||b1;b0=M.test(b1);if(!b0){bH.attr(b3,b1,"")}b3.removeAttribute(bM?b1:b4);if(b0&&b4 in b3){b3[b4]=false}}}}},attrHooks:{type:{set:function(b0,b1){if(j.test(b0.nodeName)&&b0.parentNode){bH.error("type property can't be changed")}else{if(!bH.support.radioValue&&b1==="radio"&&bH.nodeName(b0,"input")){var b2=b0.value;b0.setAttribute("type",b1);if(b2){b0.value=b2}return b1}}}},value:{get:function(b1,b0){if(a8&&bH.nodeName(b1,"button")){return a8.get(b1,b0)}return b0 in b1?b1.value:null},set:function(b1,b2,b0){if(a8&&bH.nodeName(b1,"button")){return a8.set(b1,b2,b0)}b1.value=b2}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(b5,b3,b6){var b2,b0,b4,b1=b5.nodeType;if(!b5||b1===3||b1===8||b1===2){return}b4=b1!==1||!bH.isXMLDoc(b5);if(b4){b3=bH.propFix[b3]||b3;b0=bH.propHooks[b3]}if(b6!==aC){if(b0&&"set" in b0&&(b2=b0.set(b5,b6,b3))!==aC){return b2}else{return(b5[b3]=b6)}}else{if(b0&&"get" in b0&&(b2=b0.get(b5,b3))!==null){return b2}else{return b5[b3]}}},propHooks:{tabIndex:{get:function(b1){var b0=b1.getAttributeNode("tabindex");return b0&&b0.specified?parseInt(b0.value,10):aB.test(b1.nodeName)||D.test(b1.nodeName)&&b1.href?0:aC}}}});bW={get:function(b1,b0){var b3,b2=bH.prop(b1,b0);return b2===true||typeof b2!=="boolean"&&(b3=b1.getAttributeNode(b0))&&b3.nodeValue!==false?b0.toLowerCase():aC},set:function(b1,b3,b0){var b2;if(b3===false){bH.removeAttr(b1,b0)}else{b2=bH.propFix[b0]||b0;if(b2 in b1){b1[b2]=true}b1.setAttribute(b0,b0.toLowerCase())}return b0}};if(!bM){n={name:true,id:true,coords:true};a8=bH.valHooks.button={get:function(b2,b1){var b0;b0=b2.getAttributeNode(b1);return b0&&(n[b1]?b0.value!=="":b0.specified)?b0.value:aC},set:function(b2,b3,b1){var b0=b2.getAttributeNode(b1);if(!b0){b0=o.createAttribute(b1);b2.setAttributeNode(b0)}return(b0.value=b3+"")}};bH.each(["width","height"],function(b1,b0){bH.attrHooks[b0]=bH.extend(bH.attrHooks[b0],{set:function(b2,b3){if(b3===""){b2.setAttribute(b0,"auto");return b3}}})});bH.attrHooks.contenteditable={get:a8.get,set:function(b1,b2,b0){if(b2===""){b2="false"}a8.set(b1,b2,b0)}}}if(!bH.support.hrefNormalized){bH.each(["href","src","width","height"],function(b1,b0){bH.attrHooks[b0]=bH.extend(bH.attrHooks[b0],{get:function(b3){var b2=b3.getAttribute(b0,2);return b2===null?aC:b2}})})}if(!bH.support.style){bH.attrHooks.style={get:function(b0){return b0.style.cssText.toLowerCase()||aC},set:function(b0,b1){return(b0.style.cssText=""+b1)}}}if(!bH.support.optSelected){bH.propHooks.selected=bH.extend(bH.propHooks.selected,{get:function(b1){var b0=b1.parentNode;if(b0){b0.selectedIndex;if(b0.parentNode){b0.parentNode.selectedIndex}}return null}})}if(!bH.support.enctype){bH.propFix.enctype="encoding"}if(!bH.support.checkOn){bH.each(["radio","checkbox"],function(){bH.valHooks[this]={get:function(b0){return b0.getAttribute("value")===null?"on":b0.value}}})}bH.each(["radio","checkbox"],function(){bH.valHooks[this]=bH.extend(bH.valHooks[this],{set:function(b0,b1){if(bH.isArray(b1)){return(b0.checked=bH.inArray(bH(b0).val(),b1)>=0)}}})});var bF=/^(?:textarea|input|select)$/i,bs=/^([^\.]*|)(?:\.(.+)|)$/,bb=/(?:^|\s)hover(\.\S+|)\b/,a4=/^key/,bL=/^(?:mouse|contextmenu)|click/,bz=/^(?:focusinfocus|focusoutblur)$/,ar=function(b0){return bH.event.special.hover?b0:b0.replace(bb,"mouseenter$1 mouseleave$1")};bH.event={add:function(b3,b7,ce,b5,b4){var b8,b6,cf,cd,cc,ca,b0,cb,b1,b2,b9;if(b3.nodeType===3||b3.nodeType===8||!b7||!ce||!(b8=bH._data(b3))){return}if(ce.handler){b1=ce;ce=b1.handler;b4=b1.selector}if(!ce.guid){ce.guid=bH.guid++}cf=b8.events;if(!cf){b8.events=cf={}}b6=b8.handle;if(!b6){b8.handle=b6=function(cg){return typeof bH!=="undefined"&&(!cg||bH.event.triggered!==cg.type)?bH.event.dispatch.apply(b6.elem,arguments):aC};b6.elem=b3}b7=bH.trim(ar(b7)).split(" ");for(cd=0;cd<b7.length;cd++){cc=bs.exec(b7[cd])||[];ca=cc[1];b0=(cc[2]||"").split(".").sort();b9=bH.event.special[ca]||{};ca=(b4?b9.delegateType:b9.bindType)||ca;b9=bH.event.special[ca]||{};cb=bH.extend({type:ca,origType:cc[1],data:b5,handler:ce,guid:ce.guid,selector:b4,namespace:b0.join(".")},b1);b2=cf[ca];if(!b2){b2=cf[ca]=[];b2.delegateCount=0;if(!b9.setup||b9.setup.call(b3,b5,b0,b6)===false){if(b3.addEventListener){b3.addEventListener(ca,b6,false)}else{if(b3.attachEvent){b3.attachEvent("on"+ca,b6)}}}}if(b9.add){b9.add.call(b3,cb);if(!cb.handler.guid){cb.handler.guid=ce.guid}}if(b4){b2.splice(b2.delegateCount++,0,cb)}else{b2.push(cb)}bH.event.global[ca]=true}b3=null},global:{},remove:function(b3,b8,ce,b4,b7){var cf,cg,cb,b2,b1,b5,b6,cd,ca,b0,cc,b9=bH.hasData(b3)&&bH._data(b3);if(!b9||!(cd=b9.events)){return}b8=bH.trim(ar(b8||"")).split(" ");for(cf=0;cf<b8.length;cf++){cg=bs.exec(b8[cf])||[];cb=b2=cg[1];b1=cg[2];if(!cb){for(cb in cd){bH.event.remove(b3,cb+b8[cf],ce,b4,true)}continue}ca=bH.event.special[cb]||{};cb=(b4?ca.delegateType:ca.bindType)||cb;b0=cd[cb]||[];b5=b0.length;b1=b1?new RegExp("(^|\\.)"+b1.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):null;for(b6=0;b6<b0.length;b6++){cc=b0[b6];if((b7||b2===cc.origType)&&(!ce||ce.guid===cc.guid)&&(!b1||b1.test(cc.namespace))&&(!b4||b4===cc.selector||b4==="**"&&cc.selector)){b0.splice(b6--,1);if(cc.selector){b0.delegateCount--}if(ca.remove){ca.remove.call(b3,cc)}}}if(b0.length===0&&b5!==b0.length){if(!ca.teardown||ca.teardown.call(b3,b1,b9.handle)===false){bH.removeEvent(b3,cb,b9.handle)}delete cd[cb]}}if(bH.isEmptyObject(cd)){delete b9.handle;bH.removeData(b3,"events",true)}},customEvent:{getData:true,setData:true,changeData:true},trigger:function(b1,b8,b6,cf){if(b6&&(b6.nodeType===3||b6.nodeType===8)){return}var b0,b3,b9,cd,b5,b4,cb,ca,b7,ce,cc=b1.type||b1,b2=[];if(bz.test(cc+bH.event.triggered)){return}if(cc.indexOf("!")>=0){cc=cc.slice(0,-1);b3=true}if(cc.indexOf(".")>=0){b2=cc.split(".");cc=b2.shift();b2.sort()}if((!b6||bH.event.customEvent[cc])&&!bH.event.global[cc]){return}b1=typeof b1==="object"?b1[bH.expando]?b1:new bH.Event(cc,b1):new bH.Event(cc);b1.type=cc;b1.isTrigger=true;b1.exclusive=b3;b1.namespace=b2.join(".");b1.namespace_re=b1.namespace?new RegExp("(^|\\.)"+b2.join("\\.(?:.*\\.|)")+"(\\.|$)"):null;b4=cc.indexOf(":")<0?"on"+cc:"";if(!b6){b0=bH.cache;for(b9 in b0){if(b0[b9].events&&b0[b9].events[cc]){bH.event.trigger(b1,b8,b0[b9].handle.elem,true)}}return}b1.result=aC;if(!b1.target){b1.target=b6}b8=b8!=null?bH.makeArray(b8):[];b8.unshift(b1);cb=bH.event.special[cc]||{};if(cb.trigger&&cb.trigger.apply(b6,b8)===false){return}b7=[[b6,cb.bindType||cc]];if(!cf&&!cb.noBubble&&!bH.isWindow(b6)){ce=cb.delegateType||cc;cd=bz.test(ce+cc)?b6:b6.parentNode;for(b5=b6;cd;cd=cd.parentNode){b7.push([cd,ce]);b5=cd}if(b5===(b6.ownerDocument||o)){b7.push([b5.defaultView||b5.parentWindow||a3,ce])}}for(b9=0;b9<b7.length&&!b1.isPropagationStopped();b9++){cd=b7[b9][0];b1.type=b7[b9][1];ca=(bH._data(cd,"events")||{})[b1.type]&&bH._data(cd,"handle");if(ca){ca.apply(cd,b8)}ca=b4&&cd[b4];if(ca&&bH.acceptData(cd)&&ca.apply(cd,b8)===false){b1.preventDefault()}}b1.type=cc;if(!cf&&!b1.isDefaultPrevented()){if((!cb._default||cb._default.apply(b6.ownerDocument,b8)===false)&&!(cc==="click"&&bH.nodeName(b6,"a"))&&bH.acceptData(b6)){if(b4&&b6[cc]&&((cc!=="focus"&&cc!=="blur")||b1.target.offsetWidth!==0)&&!bH.isWindow(b6)){b5=b6[b4];if(b5){b6[b4]=null}bH.event.triggered=cc;b6[cc]();bH.event.triggered=aC;if(b5){b6[b4]=b5}}}}return b1.result},dispatch:function(b0){b0=bH.event.fix(b0||a3.event);var b7,b6,cg,ca,b9,b1,b8,ce,b3,cf,b4=((bH._data(this,"events")||{})[b0.type]||[]),b5=b4.delegateCount,cc=[].slice.call(arguments),b2=!b0.exclusive&&!b0.namespace,cb=bH.event.special[b0.type]||{},cd=[];cc[0]=b0;b0.delegateTarget=this;if(cb.preDispatch&&cb.preDispatch.call(this,b0)===false){return}if(b5&&!(b0.button&&b0.type==="click")){for(cg=b0.target;cg!=this;cg=cg.parentNode||this){if(cg.disabled!==true||b0.type!=="click"){b9={};b8=[];for(b7=0;b7<b5;b7++){ce=b4[b7];b3=ce.selector;if(b9[b3]===aC){b9[b3]=bH(b3,this).index(cg)>=0}if(b9[b3]){b8.push(ce)}}if(b8.length){cd.push({elem:cg,matches:b8})}}}}if(b4.length>b5){cd.push({elem:this,matches:b4.slice(b5)})}for(b7=0;b7<cd.length&&!b0.isPropagationStopped();b7++){b1=cd[b7];b0.currentTarget=b1.elem;for(b6=0;b6<b1.matches.length&&!b0.isImmediatePropagationStopped();b6++){ce=b1.matches[b6];if(b2||(!b0.namespace&&!ce.namespace)||b0.namespace_re&&b0.namespace_re.test(ce.namespace)){b0.data=ce.data;b0.handleObj=ce;ca=((bH.event.special[ce.origType]||{}).handle||ce.handler).apply(b1.elem,cc);if(ca!==aC){b0.result=ca;if(ca===false){b0.preventDefault();b0.stopPropagation()}}}}}if(cb.postDispatch){cb.postDispatch.call(this,b0)}return b0.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(b1,b0){if(b1.which==null){b1.which=b0.charCode!=null?b0.charCode:b0.keyCode}return b1}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(b3,b2){var b4,b5,b0,b1=b2.button,b6=b2.fromElement;if(b3.pageX==null&&b2.clientX!=null){b4=b3.target.ownerDocument||o;b5=b4.documentElement;b0=b4.body;b3.pageX=b2.clientX+(b5&&b5.scrollLeft||b0&&b0.scrollLeft||0)-(b5&&b5.clientLeft||b0&&b0.clientLeft||0);b3.pageY=b2.clientY+(b5&&b5.scrollTop||b0&&b0.scrollTop||0)-(b5&&b5.clientTop||b0&&b0.clientTop||0)}if(!b3.relatedTarget&&b6){b3.relatedTarget=b6===b3.target?b2.toElement:b6}if(!b3.which&&b1!==aC){b3.which=(b1&1?1:(b1&2?3:(b1&4?2:0)))}return b3}},fix:function(b2){if(b2[bH.expando]){return b2}var b1,b5,b0=b2,b3=bH.event.fixHooks[b2.type]||{},b4=b3.props?this.props.concat(b3.props):this.props;b2=bH.Event(b0);for(b1=b4.length;b1;){b5=b4[--b1];b2[b5]=b0[b5]}if(!b2.target){b2.target=b0.srcElement||o}if(b2.target.nodeType===3){b2.target=b2.target.parentNode}b2.metaKey=!!b2.metaKey;return b3.filter?b3.filter(b2,b0):b2},special:{load:{noBubble:true},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(b2,b1,b0){if(bH.isWindow(this)){this.onbeforeunload=b0}},teardown:function(b1,b0){if(this.onbeforeunload===b0){this.onbeforeunload=null}}}},simulate:function(b1,b3,b2,b0){var b4=bH.extend(new bH.Event(),b2,{type:b1,isSimulated:true,originalEvent:{}});if(b0){bH.event.trigger(b4,null,b3)}else{bH.event.dispatch.call(b3,b4)}if(b4.isDefaultPrevented()){b2.preventDefault()}}};bH.event.handle=bH.event.dispatch;bH.removeEvent=o.removeEventListener?function(b1,b0,b2){if(b1.removeEventListener){b1.removeEventListener(b0,b2,false)}}:function(b2,b1,b3){var b0="on"+b1;if(b2.detachEvent){if(typeof b2[b0]==="undefined"){b2[b0]=null}b2.detachEvent(b0,b3)}};bH.Event=function(b1,b0){if(!(this instanceof bH.Event)){return new bH.Event(b1,b0)}if(b1&&b1.type){this.originalEvent=b1;this.type=b1.type;this.isDefaultPrevented=(b1.defaultPrevented||b1.returnValue===false||b1.getPreventDefault&&b1.getPreventDefault())?R:X}else{this.type=b1}if(b0){bH.extend(this,b0)}this.timeStamp=b1&&b1.timeStamp||bH.now();this[bH.expando]=true};function X(){return false}function R(){return true}bH.Event.prototype={preventDefault:function(){this.isDefaultPrevented=R;var b0=this.originalEvent;if(!b0){return}if(b0.preventDefault){b0.preventDefault()}else{b0.returnValue=false}},stopPropagation:function(){this.isPropagationStopped=R;var b0=this.originalEvent;if(!b0){return}if(b0.stopPropagation){b0.stopPropagation()}b0.cancelBubble=true},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=R;this.stopPropagation()},isDefaultPrevented:X,isPropagationStopped:X,isImmediatePropagationStopped:X};bH.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(b1,b0){bH.event.special[b1]={delegateType:b0,bindType:b0,handle:function(b5){var b3,b7=this,b6=b5.relatedTarget,b4=b5.handleObj,b2=b4.selector;if(!b6||(b6!==b7&&!bH.contains(b7,b6))){b5.type=b4.origType;b3=b4.handler.apply(this,arguments);b5.type=b0}return b3}}});if(!bH.support.submitBubbles){bH.event.special.submit={setup:function(){if(bH.nodeName(this,"form")){return false}bH.event.add(this,"click._submit keypress._submit",function(b2){var b1=b2.target,b0=bH.nodeName(b1,"input")||bH.nodeName(b1,"button")?b1.form:aC;if(b0&&!bH._data(b0,"_submit_attached")){bH.event.add(b0,"submit._submit",function(b3){b3._submit_bubble=true});bH._data(b0,"_submit_attached",true)}})},postDispatch:function(b0){if(b0._submit_bubble){delete b0._submit_bubble;if(this.parentNode&&!b0.isTrigger){bH.event.simulate("submit",this.parentNode,b0,true)}}},teardown:function(){if(bH.nodeName(this,"form")){return false}bH.event.remove(this,"._submit")}}}if(!bH.support.changeBubbles){bH.event.special.change={setup:function(){if(bF.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio"){bH.event.add(this,"propertychange._change",function(b0){if(b0.originalEvent.propertyName==="checked"){this._just_changed=true}});bH.event.add(this,"click._change",function(b0){if(this._just_changed&&!b0.isTrigger){this._just_changed=false}bH.event.simulate("change",this,b0,true)})}return false}bH.event.add(this,"beforeactivate._change",function(b1){var b0=b1.target;if(bF.test(b0.nodeName)&&!bH._data(b0,"_change_attached")){bH.event.add(b0,"change._change",function(b2){if(this.parentNode&&!b2.isSimulated&&!b2.isTrigger){bH.event.simulate("change",this.parentNode,b2,true)}});bH._data(b0,"_change_attached",true)}})},handle:function(b1){var b0=b1.target;if(this!==b0||b1.isSimulated||b1.isTrigger||(b0.type!=="radio"&&b0.type!=="checkbox")){return b1.handleObj.handler.apply(this,arguments)}},teardown:function(){bH.event.remove(this,"._change");return !bF.test(this.nodeName)}}}if(!bH.support.focusinBubbles){bH.each({focus:"focusin",blur:"focusout"},function(b3,b0){var b1=0,b2=function(b4){bH.event.simulate(b0,b4.target,bH.event.fix(b4),true)};bH.event.special[b0]={setup:function(){if(b1++===0){o.addEventListener(b3,b2,true)}},teardown:function(){if(--b1===0){o.removeEventListener(b3,b2,true)}}}})}bH.fn.extend({on:function(b2,b0,b5,b4,b1){var b6,b3;if(typeof b2==="object"){if(typeof b0!=="string"){b5=b5||b0;b0=aC}for(b3 in b2){this.on(b3,b0,b5,b2[b3],b1)}return this}if(b5==null&&b4==null){b4=b0;b5=b0=aC}else{if(b4==null){if(typeof b0==="string"){b4=b5;b5=aC}else{b4=b5;b5=b0;b0=aC}}}if(b4===false){b4=X}else{if(!b4){return this}}if(b1===1){b6=b4;b4=function(b7){bH().off(b7);return b6.apply(this,arguments)};b4.guid=b6.guid||(b6.guid=bH.guid++)}return this.each(function(){bH.event.add(this,b2,b4,b5,b0)})},one:function(b1,b0,b3,b2){return this.on(b1,b0,b3,b2,1)},off:function(b2,b0,b4){var b1,b3;if(b2&&b2.preventDefault&&b2.handleObj){b1=b2.handleObj;bH(b2.delegateTarget).off(b1.namespace?b1.origType+"."+b1.namespace:b1.origType,b1.selector,b1.handler);return this}if(typeof b2==="object"){for(b3 in b2){this.off(b3,b0,b2[b3])}return this}if(b0===false||typeof b0==="function"){b4=b0;b0=aC}if(b4===false){b4=X}return this.each(function(){bH.event.remove(this,b2,b4,b0)})},bind:function(b0,b2,b1){return this.on(b0,null,b2,b1)},unbind:function(b0,b1){return this.off(b0,null,b1)},live:function(b0,b2,b1){bH(this.context).on(b0,this.selector,b2,b1);return this},die:function(b0,b1){bH(this.context).off(b0,this.selector||"**",b1);return this},delegate:function(b0,b1,b3,b2){return this.on(b1,b0,b3,b2)},undelegate:function(b0,b1,b2){return arguments.length==1?this.off(b0,"**"):this.off(b1,b0||"**",b2)},trigger:function(b0,b1){return this.each(function(){bH.event.trigger(b0,b1,this)})},triggerHandler:function(b0,b1){if(this[0]){return bH.event.trigger(b0,b1,this[0],true)}},toggle:function(b3){var b1=arguments,b0=b3.guid||bH.guid++,b2=0,b4=function(b5){var b6=(bH._data(this,"lastToggle"+b3.guid)||0)%b2;bH._data(this,"lastToggle"+b3.guid,b6+1);b5.preventDefault();return b1[b6].apply(this,arguments)||false};b4.guid=b0;while(b2<b1.length){b1[b2++].guid=b0}return this.click(b4)},hover:function(b0,b1){return this.mouseenter(b0).mouseleave(b1||b0)}});bH.each(("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu").split(" "),function(b1,b0){bH.fn[b0]=function(b3,b2){if(b2==null){b2=b3;b3=null}return arguments.length>0?this.on(b0,null,b3,b2):this.trigger(b0)};if(a4.test(b0)){bH.event.fixHooks[b0]=bH.event.keyHooks}if(bL.test(b0)){bH.event.fixHooks[b0]=bH.event.mouseHooks}});
/*!
     * Sizzle CSS Selector Engine
     *  Copyright 2012 jQuery Foundation and other contributors
     *  Released under the MIT license
     *  http://sizzlejs.com/
     */
(function(cN,cg){var co,cS,ca,cF,b1,ck,cw,cd,cf,cc,b9=true,cs="undefined",cV=("sizcache"+Math.random()).replace(".",""),b8=cN.document,cb=b8.documentElement,ce=0,cj=[].slice,cR=[].push,cX=function(c5,c6){c5[cV]=c6||true;return c5},c0=function(){var c5={},c6=[];return cX(function(c7,c8){if(c6.push(c7)>cF.cacheLength){delete c5[c6.shift()]}return(c5[c7]=c8)},c5)},cP=c0(),cQ=c0(),cl=c0(),cv="[\\x20\\t\\r\\n\\f]",ci="(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+",ch=ci.replace("w","w#"),cZ="([*^$|!~]?=)",cK="\\["+cv+"*("+ci+")"+cv+"*(?:"+cZ+cv+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+ch+")|)|)"+cv+"*\\]",c4=":("+ci+")(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:"+cK+")|[^:]|\\\\.)*|.*))\\)|)",cx=":(nth|eq|gt|lt|first|last|even|odd)(?:\\(((?:-\\d)?\\d*)\\)|)(?=[^-]|$)",cT=new RegExp("^"+cv+"+|((?:^|[^\\\\])(?:\\\\.)*)"+cv+"+$","g"),b5=new RegExp("^"+cv+"*,"+cv+"*"),cC=new RegExp("^"+cv+"*([\\x20\\t\\r\\n\\f>+~])"+cv+"*"),cH=new RegExp(c4),cJ=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,cA=/^:not/,cM=/[\x20\t\r\n\f]*[+~]/,cW=/:not\($/,cp=/h\d/i,cI=/input|select|textarea|button/i,cq=/\\(?!\\)/g,cB={ID:new RegExp("^#("+ci+")"),CLASS:new RegExp("^\\.("+ci+")"),NAME:new RegExp("^\\[name=['\"]?("+ci+")['\"]?\\]"),TAG:new RegExp("^("+ci.replace("w","w*")+")"),ATTR:new RegExp("^"+cK),PSEUDO:new RegExp("^"+c4),CHILD:new RegExp("^:(only|nth|last|first)-child(?:\\("+cv+"*(even|odd|(([+-]|)(\\d*)n|)"+cv+"*(?:([+-]|)"+cv+"*(\\d+)|))"+cv+"*\\)|)","i"),POS:new RegExp(cx,"ig"),needsContext:new RegExp("^"+cv+"*[>+~]|"+cx,"i")},cE=function(c5){var c7=b8.createElement("div");try{return c5(c7)}catch(c6){return false}finally{c7=null}},b7=cE(function(c5){c5.appendChild(b8.createComment(""));return !c5.getElementsByTagName("*").length}),cz=cE(function(c5){c5.innerHTML="<a href='#'></a>";return c5.firstChild&&typeof c5.firstChild.getAttribute!==cs&&c5.firstChild.getAttribute("href")==="#"}),cn=cE(function(c6){c6.innerHTML="<select></select>";var c5=typeof c6.lastChild.getAttribute("multiple");return c5!=="boolean"&&c5!=="string"}),cy=cE(function(c5){c5.innerHTML="<div class='hidden e'></div><div class='hidden'></div>";if(!c5.getElementsByClassName||!c5.getElementsByClassName("e").length){return false}c5.lastChild.className="e";return c5.getElementsByClassName("e").length===2}),b0=cE(function(c6){c6.id=cV+0;c6.innerHTML="<a name='"+cV+"'></a><div name='"+cV+"'></div>";cb.insertBefore(c6,cb.firstChild);var c5=b8.getElementsByName&&b8.getElementsByName(cV).length===2+b8.getElementsByName(cV+0).length;ca=!b8.getElementById(cV);cb.removeChild(c6);return c5});try{cj.call(cb.childNodes,0)[0].nodeType}catch(cY){cj=function(c6){var c7,c5=[];for(;(c7=this[c6]);c6++){c5.push(c7)}return c5}}function cL(c8,c5,da,dd){da=da||[];c5=c5||b8;var db,c6,dc,c7,c9=c5.nodeType;if(c9!==1&&c9!==9){return[]}if(!c8||typeof c8!=="string"){return da}dc=ck(c5);if(!dc&&!dd){if((db=cJ.exec(c8))){if((c7=db[1])){if(c9===9){c6=c5.getElementById(c7);if(c6&&c6.parentNode){if(c6.id===c7){da.push(c6);return da}}else{return da}}else{if(c5.ownerDocument&&(c6=c5.ownerDocument.getElementById(c7))&&cw(c5,c6)&&c6.id===c7){da.push(c6);return da}}}else{if(db[2]){cR.apply(da,cj.call(c5.getElementsByTagName(c8),0));return da}else{if((c7=db[3])&&cy&&c5.getElementsByClassName){cR.apply(da,cj.call(c5.getElementsByClassName(c7),0));return da}}}}}return cU(c8,c5,da,dd,dc)}cL.matches=function(c6,c5){return cL(c6,null,null,c5)};cL.matchesSelector=function(c5,c6){return cL(c6,null,null,[c5]).length>0};function cD(c5){return function(c7){var c6=c7.nodeName.toLowerCase();return c6==="input"&&c7.type===c5}}function b4(c5){return function(c7){var c6=c7.nodeName.toLowerCase();return(c6==="input"||c6==="button")&&c7.type===c5}}b1=cL.getText=function(c9){var c8,c6="",c7=0,c5=c9.nodeType;if(c5){if(c5===1||c5===9||c5===11){if(typeof c9.textContent==="string"){return c9.textContent}else{for(c9=c9.firstChild;c9;c9=c9.nextSibling){c6+=b1(c9)}}}else{if(c5===3||c5===4){return c9.nodeValue}}}else{for(;(c8=c9[c7]);c7++){c6+=b1(c8)}}return c6};ck=cL.isXML=function ck(c5){var c6=c5&&(c5.ownerDocument||c5).documentElement;return c6?c6.nodeName!=="HTML":false};cw=cL.contains=cb.contains?function(c6,c5){var c8=c6.nodeType===9?c6.documentElement:c6,c7=c5&&c5.parentNode;return c6===c7||!!(c7&&c7.nodeType===1&&c8.contains&&c8.contains(c7))}:cb.compareDocumentPosition?function(c6,c5){return c5&&!!(c6.compareDocumentPosition(c5)&16)}:function(c6,c5){while((c5=c5.parentNode)){if(c5===c6){return true}}return false};cL.attr=function(c8,c7){var c5,c6=ck(c8);if(!c6){c7=c7.toLowerCase()}if(cF.attrHandle[c7]){return cF.attrHandle[c7](c8)}if(cn||c6){return c8.getAttribute(c7)}c5=c8.getAttributeNode(c7);return c5?typeof c8[c7]==="boolean"?c8[c7]?c7:null:c5.specified?c5.value:null:null};cF=cL.selectors={cacheLength:50,createPseudo:cX,match:cB,order:new RegExp("ID|TAG"+(b0?"|NAME":"")+(cy?"|CLASS":"")),attrHandle:cz?{}:{href:function(c5){return c5.getAttribute("href",2)},type:function(c5){return c5.getAttribute("type")}},find:{ID:ca?function(c8,c7,c6){if(typeof c7.getElementById!==cs&&!c6){var c5=c7.getElementById(c8);return c5&&c5.parentNode?[c5]:[]}}:function(c8,c7,c6){if(typeof c7.getElementById!==cs&&!c6){var c5=c7.getElementById(c8);return c5?c5.id===c8||typeof c5.getAttributeNode!==cs&&c5.getAttributeNode("id").value===c8?[c5]:cg:[]}},TAG:b7?function(c5,c6){if(typeof c6.getElementsByTagName!==cs){return c6.getElementsByTagName(c5)}}:function(c5,c9){var c8=c9.getElementsByTagName(c5);if(c5==="*"){var da,c7=[],c6=0;for(;(da=c8[c6]);c6++){if(da.nodeType===1){c7.push(da)}}return c7}return c8},NAME:function(c5,c6){if(typeof c6.getElementsByName!==cs){return c6.getElementsByName(name)}},CLASS:function(c7,c6,c5){if(typeof c6.getElementsByClassName!==cs&&!c5){return c6.getElementsByClassName(c7)}}},relative:{">":{dir:"parentNode",first:true}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:true},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(c5){c5[1]=c5[1].replace(cq,"");c5[3]=(c5[4]||c5[5]||"").replace(cq,"");if(c5[2]==="~="){c5[3]=" "+c5[3]+" "}return c5.slice(0,4)},CHILD:function(c5){c5[1]=c5[1].toLowerCase();if(c5[1]==="nth"){if(!c5[2]){cL.error(c5[0])}c5[3]=+(c5[3]?c5[4]+(c5[5]||1):2*(c5[2]==="even"||c5[2]==="odd"));c5[4]=+((c5[6]+c5[7])||c5[2]==="odd")}else{if(c5[2]){cL.error(c5[0])}}return c5},PSEUDO:function(c7,c8,c6){var c9,c5;if(cB.CHILD.test(c7[0])){return null}if(c7[3]){c7[2]=c7[3]}else{if((c9=c7[4])){if(cH.test(c9)&&(c5=b2(c9,c8,c6,true))&&(c5=c9.indexOf(")",c9.length-c5)-c9.length)){c9=c9.slice(0,c5);c7[0]=c7[0].slice(0,c5)}c7[2]=c9}}return c7.slice(0,3)}},filter:{ID:ca?function(c5){c5=c5.replace(cq,"");return function(c6){return c6.getAttribute("id")===c5}}:function(c5){c5=c5.replace(cq,"");return function(c7){var c6=typeof c7.getAttributeNode!==cs&&c7.getAttributeNode("id");return c6&&c6.value===c5}},TAG:function(c5){if(c5==="*"){return function(){return true}}c5=c5.replace(cq,"").toLowerCase();return function(c6){return c6.nodeName&&c6.nodeName.toLowerCase()===c5}},CLASS:function(c5){var c6=cP[cV][c5];if(!c6){c6=cP(c5,new RegExp("(^|"+cv+")"+c5+"("+cv+"|$)"))}return function(c7){return c6.test(c7.className||(typeof c7.getAttribute!==cs&&c7.getAttribute("class"))||"")}},ATTR:function(c7,c6,c5){if(!c6){return function(c8){return cL.attr(c8,c7)!=null}}return function(c9){var c8=cL.attr(c9,c7),da=c8+"";if(c8==null){return c6==="!="}switch(c6){case"=":return da===c5;case"!=":return da!==c5;case"^=":return c5&&da.indexOf(c5)===0;case"*=":return c5&&da.indexOf(c5)>-1;case"$=":return c5&&da.substr(da.length-c5.length)===c5;case"~=":return(" "+da+" ").indexOf(c5)>-1;case"|=":return da===c5||da.substr(0,c5.length+1)===c5+"-"}}},CHILD:function(c6,c8,c9,c7){if(c6==="nth"){var c5=ce++;return function(dd){var da,de,dc=0,db=dd;if(c9===1&&c7===0){return true}da=dd.parentNode;if(da&&(da[cV]!==c5||!dd.sizset)){for(db=da.firstChild;db;db=db.nextSibling){if(db.nodeType===1){db.sizset=++dc;if(db===dd){break}}}da[cV]=c5}de=dd.sizset-c7;if(c9===0){return de===0}else{return(de%c9===0&&de/c9>=0)}}}return function(db){var da=db;switch(c6){case"only":case"first":while((da=da.previousSibling)){if(da.nodeType===1){return false}}if(c6==="first"){return true}da=db;case"last":while((da=da.nextSibling)){if(da.nodeType===1){return false}}return true}}},PSEUDO:function(da,c9,c7,c6){var c5,c8=cF.pseudos[da]||cF.pseudos[da.toLowerCase()];if(!c8){cL.error("unsupported pseudo: "+da)}if(!c8[cV]){if(c8.length>1){c5=[da,da,"",c9];return function(db){return c8(db,0,c5)}}return c8}return c8(c9,c7,c6)}},pseudos:{not:cX(function(c5,c7,c6){var c8=cd(c5.replace(cT,"$1"),c7,c6);return function(c9){return !c8(c9)}}),enabled:function(c5){return c5.disabled===false},disabled:function(c5){return c5.disabled===true},checked:function(c5){var c6=c5.nodeName.toLowerCase();return(c6==="input"&&!!c5.checked)||(c6==="option"&&!!c5.selected)},selected:function(c5){if(c5.parentNode){c5.parentNode.selectedIndex}return c5.selected===true},parent:function(c5){return !cF.pseudos.empty(c5)},empty:function(c6){var c5;c6=c6.firstChild;while(c6){if(c6.nodeName>"@"||(c5=c6.nodeType)===3||c5===4){return false}c6=c6.nextSibling}return true},contains:cX(function(c5){return function(c6){return(c6.textContent||c6.innerText||b1(c6)).indexOf(c5)>-1}}),has:cX(function(c5){return function(c6){return cL(c5,c6).length>0}}),header:function(c5){return cp.test(c5.nodeName)},text:function(c7){var c6,c5;return c7.nodeName.toLowerCase()==="input"&&(c6=c7.type)==="text"&&((c5=c7.getAttribute("type"))==null||c5.toLowerCase()===c6)},radio:cD("radio"),checkbox:cD("checkbox"),file:cD("file"),password:cD("password"),image:cD("image"),submit:b4("submit"),reset:b4("reset"),button:function(c6){var c5=c6.nodeName.toLowerCase();return c5==="input"&&c6.type==="button"||c5==="button"},input:function(c5){return cI.test(c5.nodeName)},focus:function(c5){var c6=c5.ownerDocument;return c5===c6.activeElement&&(!c6.hasFocus||c6.hasFocus())&&!!(c5.type||c5.href)},active:function(c5){return c5===c5.ownerDocument.activeElement}},setFilters:{first:function(c7,c6,c5){return c5?c7.slice(1):[c7[0]]},last:function(c8,c7,c6){var c5=c8.pop();return c6?c8:[c5]},even:function(da,c9,c8){var c7=[],c6=c8?1:0,c5=da.length;for(;c6<c5;c6=c6+2){c7.push(da[c6])}return c7},odd:function(da,c9,c8){var c7=[],c6=c8?0:1,c5=da.length;for(;c6<c5;c6=c6+2){c7.push(da[c6])}return c7},lt:function(c7,c6,c5){return c5?c7.slice(+c6):c7.slice(0,+c6)},gt:function(c7,c6,c5){return c5?c7.slice(0,+c6+1):c7.slice(+c6+1)},eq:function(c8,c7,c6){var c5=c8.splice(+c7,1);return c6?c8:c5}}};function b3(c6,c5,c7){if(c6===c5){return c7}var c8=c6.nextSibling;while(c8){if(c8===c5){return -1}c8=c8.nextSibling}return 1}cf=cb.compareDocumentPosition?function(c6,c5){if(c6===c5){cc=true;return 0}return(!c6.compareDocumentPosition||!c5.compareDocumentPosition?c6.compareDocumentPosition:c6.compareDocumentPosition(c5)&4)?-1:1}:function(dd,dc){if(dd===dc){cc=true;return 0}else{if(dd.sourceIndex&&dc.sourceIndex){return dd.sourceIndex-dc.sourceIndex}}var da,c6,c7=[],c5=[],c9=dd.parentNode,db=dc.parentNode,de=c9;if(c9===db){return b3(dd,dc)}else{if(!c9){return -1}else{if(!db){return 1}}}while(de){c7.unshift(de);de=de.parentNode}de=db;while(de){c5.unshift(de);de=de.parentNode}da=c7.length;c6=c5.length;for(var c8=0;c8<da&&c8<c6;c8++){if(c7[c8]!==c5[c8]){return b3(c7[c8],c5[c8])}}return c8===da?b3(dd,c5[c8],-1):b3(c7[c8],dc,1)};[0,0].sort(cf);b9=!cc;cL.uniqueSort=function(c6){var c7,c5=1;cc=b9;c6.sort(cf);if(cc){for(;(c7=c6[c5]);c5++){if(c7===c6[c5-1]){c6.splice(c5--,1)}}}return c6};cL.error=function(c5){throw new Error("Syntax error, unrecognized expression: "+c5)};function b2(dc,c6,de,dl){var c7,df,dh,di,dg,c9,dk,dd,c5,c8,db=!de&&c6!==b8,dj=(db?"<s>":"")+dc.replace(cT,"$1<s>"),da=cQ[cV][dj];if(da){return dl?0:cj.call(da,0)}dg=dc;c9=[];dd=0;c5=cF.preFilter;c8=cF.filter;while(dg){if(!c7||(df=b5.exec(dg))){if(df){dg=dg.slice(df[0].length);dh.selector=dk}c9.push(dh=[]);dk="";if(db){dg=" "+dg}}c7=false;if((df=cC.exec(dg))){dk+=df[0];dg=dg.slice(df[0].length);c7=dh.push({part:df.pop().replace(cT," "),string:df[0],captures:df})}for(di in c8){if((df=cB[di].exec(dg))&&(!c5[di]||(df=c5[di](df,c6,de)))){dk+=df[0];dg=dg.slice(df[0].length);c7=dh.push({part:di,string:df.shift(),captures:df})}}if(!c7){break}}if(dk){dh.selector=dk}return dl?dg.length:dg?cL.error(dc):cj.call(cQ(dj,c9),0)}function ct(da,c9,c8,c6){var c5=c9.dir,c7=ce++;if(!da){da=function(db){return db===c8}}return c9.first?function(db){while((db=db[c5])){if(db.nodeType===1){return da(db)&&db}}}:c6?function(db){while((db=db[c5])){if(db.nodeType===1){if(da(db)){return db}}}}:function(dc){var db,dd=c7+"."+co,de=dd+"."+cS;while((dc=dc[c5])){if(dc.nodeType===1){if((db=dc[cV])===de){return dc.sizset}else{if(typeof db==="string"&&db.indexOf(dd)===0){if(dc.sizset){return dc}}else{dc[cV]=de;if(da(dc)){dc.sizset=true;return dc}dc.sizset=false}}}}}}function cr(c5,c6){return c5?function(c8){var c7=c6(c8);return c7&&c5(c7===true?c8:c7)}:c6}function cu(da,c8,c5){var c7,c9,c6=0;for(;(c7=da[c6]);c6++){if(cF.relative[c7.part]){c9=ct(c9,cF.relative[c7.part],c8,c5)}else{c9=cr(c9,cF.filter[c7.part].apply(null,c7.captures.concat(c8,c5)))}}return c9}function b6(c5){return function(c7){var c8,c6=0;for(;(c8=c5[c6]);c6++){if(c8(c7)){return true}}return false}}cd=cL.compile=function(c6,c9,c7){var db,c8,c5,da=cl[cV][c6];if(da&&da.context===c9){return da}db=b2(c6,c9,c7);for(c8=0,c5=db.length;c8<c5;c8++){db[c8]=cu(db[c8],c9,c7)}da=cl(c6,b6(db));da.context=c9;da.runs=da.dirruns=0;return da};function cm(c6,da,c9,c7){var c8=0,c5=da.length;for(;c8<c5;c8++){cL(c6,da[c8],c9,c7)}}function cG(c5,c7,db,dc,c6,da){var c8,c9=cF.setFilters[c7.toLowerCase()];if(!c9){cL.error(c7)}if(c5||!(c8=c6)){cm(c5||"*",dc,(c8=[]),c6)}return c8.length>0?c9(c8,db,da):[]}function cO(dp,c5,dh,c7){var dd,di,dj,dg,da,dk,c9,df,db,de,dn,dq,c6,dl=0,dm=dp.length,c8=cB.POS,dc=new RegExp("^"+c8.source+"(?!"+cv+")","i"),dr=function(){var dt=1,ds=arguments.length-2;for(;dt<ds;dt++){if(arguments[dt]===cg){db[dt]=cg}}};for(;dl<dm;dl++){dd=dp[dl];di="";df=c7;for(dj=0,dg=dd.length;dj<dg;dj++){da=dd[dj];dk=da.string;if(da.part==="PSEUDO"){c8.exec("");c9=0;while((db=c8.exec(dk))){de=true;dn=c8.lastIndex=db.index+db[0].length;if(dn>c9){di+=dk.slice(c9,db.index);c9=dn;dq=[c5];if(cC.test(di)){if(df){dq=df}df=c7}if((c6=cW.test(di))){di=di.slice(0,-5).replace(cC,"$&*");c9++}if(db.length>1){db[0].replace(dc,dr)}df=cG(di,db[1],db[2],dq,df,c6)}di=""}}if(!de){di+=dk}de=false}if(di){if(cC.test(di)){cm(di,df||[c5],dh,c7)}else{cL(di,c5,dh,c7?c7.concat(df):df)}}else{cR.apply(dh,df)}}return dm===1?dh:cL.uniqueSort(dh)}function cU(db,c6,dd,dg,df){db=db.replace(cT,"$1");var c5,dh,c9,c8,dc,dj,da,c7,dk,di,de=b2(db,c6,df),dl=c6.nodeType;if(cB.POS.test(db)){return cO(de,c6,dd,dg)}if(dg){c5=cj.call(dg,0)}else{if(de.length===1){if((dj=cj.call(de[0],0)).length>2&&(da=dj[0]).part==="ID"&&dl===9&&!df&&cF.relative[dj[1].part]){c6=cF.find.ID(da.captures[0].replace(cq,""),c6,df)[0];if(!c6){return dd}db=db.slice(dj.shift().string.length)}dk=((de=cM.exec(dj[0].string))&&!de.index&&c6.parentNode)||c6;c7="";for(dc=dj.length-1;dc>=0;dc--){da=dj[dc];di=da.part;c7=da.string+c7;if(cF.relative[di]){break}if(cF.order.test(di)){c5=cF.find[di](da.captures[0].replace(cq,""),dk,df);if(c5==null){continue}else{db=db.slice(0,db.length-c7.length)+c7.replace(cB[di],"");if(!db){cR.apply(dd,cj.call(c5,0))}break}}}}}if(db){dh=cd(db,c6,df);co=dh.dirruns++;if(c5==null){c5=cF.find.TAG("*",(cM.test(db)&&c6.parentNode)||c6)}for(dc=0;(c8=c5[dc]);dc++){cS=dh.runs++;if(dh(c8)){dd.push(c8)}}}return dd}if(b8.querySelectorAll){(function(){var da,db=cU,c9=/'|\\/g,c7=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,c6=[],c5=[":active"],c8=cb.matchesSelector||cb.mozMatchesSelector||cb.webkitMatchesSelector||cb.oMatchesSelector||cb.msMatchesSelector;cE(function(dc){dc.innerHTML="<select><option selected=''></option></select>";if(!dc.querySelectorAll("[selected]").length){c6.push("\\["+cv+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)")}if(!dc.querySelectorAll(":checked").length){c6.push(":checked")}});cE(function(dc){dc.innerHTML="<p test=''></p>";if(dc.querySelectorAll("[test^='']").length){c6.push("[*^$]="+cv+"*(?:\"\"|'')")}dc.innerHTML="<input type='hidden'/>";if(!dc.querySelectorAll(":enabled").length){c6.push(":enabled",":disabled")}});c6=c6.length&&new RegExp(c6.join("|"));cU=function(di,dd,dj,dm,dl){if(!dm&&!dl&&(!c6||!c6.test(di))){if(dd.nodeType===9){try{cR.apply(dj,cj.call(dd.querySelectorAll(di),0));return dj}catch(dh){}}else{if(dd.nodeType===1&&dd.nodeName.toLowerCase()!=="object"){var dg,dk,dn,df=dd.getAttribute("id"),dc=df||cV,de=cM.test(di)&&dd.parentNode||dd;if(df){dc=dc.replace(c9,"\\$&")}else{dd.setAttribute("id",dc)}dg=b2(di,dd,dl);dc="[id='"+dc+"']";for(dk=0,dn=dg.length;dk<dn;dk++){dg[dk]=dc+dg[dk].selector}try{cR.apply(dj,cj.call(de.querySelectorAll(dg.join(",")),0));return dj}catch(dh){}finally{if(!df){dd.removeAttribute("id")}}}}}return db(di,dd,dj,dm,dl)};if(c8){cE(function(dd){da=c8.call(dd,"div");try{c8.call(dd,"[test!='']:sizzle");c5.push(cB.PSEUDO.source,cB.POS.source,"!=")}catch(dc){}});c5=new RegExp(c5.join("|"));cL.matchesSelector=function(dd,df){df=df.replace(c7,"='$1']");if(!ck(dd)&&!c5.test(df)&&(!c6||!c6.test(df))){try{var dc=c8.call(dd,df);if(dc||da||dd.document&&dd.document.nodeType!==11){return dc}}catch(de){}}return cL(df,null,null,[dd]).length>0}}})()}cF.setFilters.nth=cF.setFilters.eq;cF.filters=cF.pseudos;cL.attr=bH.attr;bH.find=cL;bH.expr=cL.selectors;bH.expr[":"]=bH.expr.pseudos;bH.unique=cL.uniqueSort;bH.text=cL.getText;bH.isXMLDoc=cL.isXML;bH.contains=cL.contains})(a3);var ah=/Until$/,br=/^(?:parents|prev(?:Until|All))/,am=/^.[^:#\[\.,]*$/,y=bH.expr.match.needsContext,bv={children:true,contents:true,next:true,prev:true};bH.fn.extend({find:function(b0){var b4,b1,b6,b7,b5,b3,b2=this;if(typeof b0!=="string"){return bH(b0).filter(function(){for(b4=0,b1=b2.length;b4<b1;b4++){if(bH.contains(b2[b4],this)){return true}}})}b3=this.pushStack("","find",b0);for(b4=0,b1=this.length;b4<b1;b4++){b6=b3.length;bH.find(b0,this[b4],b3);if(b4>0){for(b7=b6;b7<b3.length;b7++){for(b5=0;b5<b6;b5++){if(b3[b5]===b3[b7]){b3.splice(b7--,1);break}}}}}return b3},has:function(b3){var b2,b1=bH(b3,this),b0=b1.length;return this.filter(function(){for(b2=0;b2<b0;b2++){if(bH.contains(this,b1[b2])){return true}}})},not:function(b0){return this.pushStack(aN(this,b0,false),"not",b0)},filter:function(b0){return this.pushStack(aN(this,b0,true),"filter",b0)},is:function(b0){return !!b0&&(typeof b0==="string"?y.test(b0)?bH(b0,this.context).index(this[0])>=0:bH.filter(b0,this).length>0:this.filter(b0).length>0)},closest:function(b4,b3){var b5,b2=0,b0=this.length,b1=[],b6=y.test(b4)||typeof b4!=="string"?bH(b4,b3||this.context):0;for(;b2<b0;b2++){b5=this[b2];while(b5&&b5.ownerDocument&&b5!==b3&&b5.nodeType!==11){if(b6?b6.index(b5)>-1:bH.find.matchesSelector(b5,b4)){b1.push(b5);break}b5=b5.parentNode}}b1=b1.length>1?bH.unique(b1):b1;return this.pushStack(b1,"closest",b4)},index:function(b0){if(!b0){return(this[0]&&this[0].parentNode)?this.prevAll().length:-1}if(typeof b0==="string"){return bH.inArray(this[0],bH(b0))}return bH.inArray(b0.jquery?b0[0]:b0,this)},add:function(b0,b1){var b3=typeof b0==="string"?bH(b0,b1):bH.makeArray(b0&&b0.nodeType?[b0]:b0),b2=bH.merge(this.get(),b3);return this.pushStack(aS(b3[0])||aS(b2[0])?b2:bH.unique(b2))},addBack:function(b0){return this.add(b0==null?this.prevObject:this.prevObject.filter(b0))}});bH.fn.andSelf=bH.fn.addBack;function aS(b0){return !b0||!b0.parentNode||b0.parentNode.nodeType===11}function aZ(b1,b0){do{b1=b1[b0]}while(b1&&b1.nodeType!==1);return b1}bH.each({parent:function(b1){var b0=b1.parentNode;return b0&&b0.nodeType!==11?b0:null},parents:function(b0){return bH.dir(b0,"parentNode")},parentsUntil:function(b1,b0,b2){return bH.dir(b1,"parentNode",b2)},next:function(b0){return aZ(b0,"nextSibling")},prev:function(b0){return aZ(b0,"previousSibling")},nextAll:function(b0){return bH.dir(b0,"nextSibling")},prevAll:function(b0){return bH.dir(b0,"previousSibling")},nextUntil:function(b1,b0,b2){return bH.dir(b1,"nextSibling",b2)},prevUntil:function(b1,b0,b2){return bH.dir(b1,"previousSibling",b2)},siblings:function(b0){return bH.sibling((b0.parentNode||{}).firstChild,b0)},children:function(b0){return bH.sibling(b0.firstChild)},contents:function(b0){return bH.nodeName(b0,"iframe")?b0.contentDocument||b0.contentWindow.document:bH.merge([],b0.childNodes)}},function(b0,b1){bH.fn[b0]=function(b4,b2){var b3=bH.map(this,b1,b4);if(!ah.test(b0)){b2=b4}if(b2&&typeof b2==="string"){b3=bH.filter(b2,b3)}b3=this.length>1&&!bv[b0]?bH.unique(b3):b3;if(this.length>1&&br.test(b0)){b3=b3.reverse()}return this.pushStack(b3,b0,a5.call(arguments).join(","))}});bH.extend({filter:function(b2,b0,b1){if(b1){b2=":not("+b2+")"}return b0.length===1?bH.find.matchesSelector(b0[0],b2)?[b0[0]]:[]:bH.find.matches(b2,b0)},dir:function(b2,b1,b4){var b0=[],b3=b2[b1];while(b3&&b3.nodeType!==9&&(b4===aC||b3.nodeType!==1||!bH(b3).is(b4))){if(b3.nodeType===1){b0.push(b3)}b3=b3[b1]}return b0},sibling:function(b2,b1){var b0=[];for(;b2;b2=b2.nextSibling){if(b2.nodeType===1&&b2!==b1){b0.push(b2)}}return b0}});function aN(b3,b2,b0){b2=b2||0;if(bH.isFunction(b2)){return bH.grep(b3,function(b5,b4){var b6=!!b2.call(b5,b4,b5);return b6===b0})}else{if(b2.nodeType){return bH.grep(b3,function(b5,b4){return(b5===b2)===b0})}else{if(typeof b2==="string"){var b1=bH.grep(b3,function(b4){return b4.nodeType===1});if(am.test(b2)){return bH.filter(b2,b1,!b0)}else{b2=bH.filter(b2,b1)}}}}return bH.grep(b3,function(b5,b4){return(bH.inArray(b5,b2)>=0)===b0})}function A(b0){var b2=c.split("|"),b1=b0.createDocumentFragment();if(b1.createElement){while(b2.length){b1.createElement(b2.pop())}}return b1}var c="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",aw=/ jQuery\d+="(?:null|\d+)"/g,bZ=/^\s+/,az=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,p=/<([\w:]+)/,bU=/<tbody/i,J=/<|&#?\w+;/,ak=/<(?:script|style|link)/i,aq=/<(?:script|object|embed|option|style)/i,K=new RegExp("<(?:"+c+")[\\s/>]","i"),aF=/^(?:checkbox|radio)$/,bS=/checked\s*(?:[^=]|=\s*.checked.)/i,bx=/\/(java|ecma)script/i,aI=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,T={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},aR=A(o),l=aR.appendChild(o.createElement("div"));T.optgroup=T.option;T.tbody=T.tfoot=T.colgroup=T.caption=T.thead;T.th=T.td;if(!bH.support.htmlSerialize){T._default=[1,"X<div>","</div>"]}bH.fn.extend({text:function(b0){return bH.access(this,function(b1){return b1===aC?bH.text(this):this.empty().append((this[0]&&this[0].ownerDocument||o).createTextNode(b1))},null,b0,arguments.length)},wrapAll:function(b0){if(bH.isFunction(b0)){return this.each(function(b2){bH(this).wrapAll(b0.call(this,b2))})}if(this[0]){var b1=bH(b0,this[0].ownerDocument).eq(0).clone(true);if(this[0].parentNode){b1.insertBefore(this[0])}b1.map(function(){var b2=this;while(b2.firstChild&&b2.firstChild.nodeType===1){b2=b2.firstChild}return b2}).append(this)}return this},wrapInner:function(b0){if(bH.isFunction(b0)){return this.each(function(b1){bH(this).wrapInner(b0.call(this,b1))})}return this.each(function(){var b1=bH(this),b2=b1.contents();if(b2.length){b2.wrapAll(b0)}else{b1.append(b0)}})},wrap:function(b0){var b1=bH.isFunction(b0);return this.each(function(b2){bH(this).wrapAll(b1?b0.call(this,b2):b0)})},unwrap:function(){return this.parent().each(function(){if(!bH.nodeName(this,"body")){bH(this).replaceWith(this.childNodes)}}).end()},append:function(){return this.domManip(arguments,true,function(b0){if(this.nodeType===1||this.nodeType===11){this.appendChild(b0)}})},prepend:function(){return this.domManip(arguments,true,function(b0){if(this.nodeType===1||this.nodeType===11){this.insertBefore(b0,this.firstChild)}})},before:function(){if(!aS(this[0])){return this.domManip(arguments,false,function(b1){this.parentNode.insertBefore(b1,this)})}if(arguments.length){var b0=bH.clean(arguments);return this.pushStack(bH.merge(b0,this),"before",this.selector)}},after:function(){if(!aS(this[0])){return this.domManip(arguments,false,function(b1){this.parentNode.insertBefore(b1,this.nextSibling)})}if(arguments.length){var b0=bH.clean(arguments);return this.pushStack(bH.merge(this,b0),"after",this.selector)}},remove:function(b0,b3){var b2,b1=0;for(;(b2=this[b1])!=null;b1++){if(!b0||bH.filter(b0,[b2]).length){if(!b3&&b2.nodeType===1){bH.cleanData(b2.getElementsByTagName("*"));bH.cleanData([b2])}if(b2.parentNode){b2.parentNode.removeChild(b2)}}}return this},empty:function(){var b1,b0=0;for(;(b1=this[b0])!=null;b0++){if(b1.nodeType===1){bH.cleanData(b1.getElementsByTagName("*"))}while(b1.firstChild){b1.removeChild(b1.firstChild)}}return this},clone:function(b1,b0){b1=b1==null?false:b1;b0=b0==null?b1:b0;return this.map(function(){return bH.clone(this,b1,b0)})},html:function(b0){return bH.access(this,function(b4){var b3=this[0]||{},b2=0,b1=this.length;if(b4===aC){return b3.nodeType===1?b3.innerHTML.replace(aw,""):aC}if(typeof b4==="string"&&!ak.test(b4)&&(bH.support.htmlSerialize||!K.test(b4))&&(bH.support.leadingWhitespace||!bZ.test(b4))&&!T[(p.exec(b4)||["",""])[1].toLowerCase()]){b4=b4.replace(az,"<$1></$2>");try{for(;b2<b1;b2++){b3=this[b2]||{};if(b3.nodeType===1){bH.cleanData(b3.getElementsByTagName("*"));b3.innerHTML=b4}}b3=0}catch(b5){}}if(b3){this.empty().append(b4)}},null,b0,arguments.length)},replaceWith:function(b0){if(!aS(this[0])){if(bH.isFunction(b0)){return this.each(function(b3){var b2=bH(this),b1=b2.html();b2.replaceWith(b0.call(this,b3,b1))})}if(typeof b0!=="string"){b0=bH(b0).detach()}return this.each(function(){var b2=this.nextSibling,b1=this.parentNode;bH(this).remove();if(b2){bH(b2).before(b0)}else{bH(b1).append(b0)}})}return this.length?this.pushStack(bH(bH.isFunction(b0)?b0():b0),"replaceWith",b0):this},detach:function(b0){return this.remove(b0,true)},domManip:function(b6,ca,b9){b6=[].concat.apply([],b6);var b2,b4,b5,b8,b3=0,b7=b6[0],b1=[],b0=this.length;if(!bH.support.checkClone&&b0>1&&typeof b7==="string"&&bS.test(b7)){return this.each(function(){bH(this).domManip(b6,ca,b9)})}if(bH.isFunction(b7)){return this.each(function(cc){var cb=bH(this);b6[0]=b7.call(this,cc,ca?cb.html():aC);cb.domManip(b6,ca,b9)})}if(this[0]){b2=bH.buildFragment(b6,this,b1);b5=b2.fragment;b4=b5.firstChild;if(b5.childNodes.length===1){b5=b4}if(b4){ca=ca&&bH.nodeName(b4,"tr");for(b8=b2.cacheable||b0-1;b3<b0;b3++){b9.call(ca&&bH.nodeName(this[b3],"table")?x(this[b3],"tbody"):this[b3],b3===b8?b5:bH.clone(b5,true,true))}}b5=b4=null;if(b1.length){bH.each(b1,function(cb,cc){if(cc.src){if(bH.ajax){bH.ajax({url:cc.src,type:"GET",dataType:"script",async:false,global:false,"throws":true})}else{bH.error("no ajax")}}else{bH.globalEval((cc.text||cc.textContent||cc.innerHTML||"").replace(aI,""))}if(cc.parentNode){cc.parentNode.removeChild(cc)}})}}return this}});function x(b1,b0){return b1.getElementsByTagName(b0)[0]||b1.appendChild(b1.ownerDocument.createElement(b0))}function ap(b7,b1){if(b1.nodeType!==1||!bH.hasData(b7)){return}var b4,b3,b0,b6=bH._data(b7),b5=bH._data(b1,b6),b2=b6.events;if(b2){delete b5.handle;b5.events={};for(b4 in b2){for(b3=0,b0=b2[b4].length;b3<b0;b3++){bH.event.add(b1,b4,b2[b4][b3])}}}if(b5.data){b5.data=bH.extend({},b5.data)}}function F(b1,b0){var b2;if(b0.nodeType!==1){return}if(b0.clearAttributes){b0.clearAttributes()}if(b0.mergeAttributes){b0.mergeAttributes(b1)}b2=b0.nodeName.toLowerCase();if(b2==="object"){if(b0.parentNode){b0.outerHTML=b1.outerHTML}if(bH.support.html5Clone&&(b1.innerHTML&&!bH.trim(b0.innerHTML))){b0.innerHTML=b1.innerHTML}}else{if(b2==="input"&&aF.test(b1.type)){b0.defaultChecked=b0.checked=b1.checked;if(b0.value!==b1.value){b0.value=b1.value}}else{if(b2==="option"){b0.selected=b1.defaultSelected}else{if(b2==="input"||b2==="textarea"){b0.defaultValue=b1.defaultValue}else{if(b2==="script"&&b0.text!==b1.text){b0.text=b1.text}}}}}b0.removeAttribute(bH.expando)}bH.buildFragment=function(b3,b4,b1){var b2,b0,b5,b6=b3[0];b4=b4||o;b4=!b4.nodeType&&b4[0]||b4;b4=b4.ownerDocument||b4;if(b3.length===1&&typeof b6==="string"&&b6.length<512&&b4===o&&b6.charAt(0)==="<"&&!aq.test(b6)&&(bH.support.checkClone||!bS.test(b6))&&(bH.support.html5Clone||!K.test(b6))){b0=true;b2=bH.fragments[b6];b5=b2!==aC}if(!b2){b2=b4.createDocumentFragment();bH.clean(b3,b4,b2,b1);if(b0){bH.fragments[b6]=b5&&b2}}return{fragment:b2,cacheable:b0}};bH.fragments={};bH.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(b0,b1){bH.fn[b0]=function(b2){var b4,b6=0,b5=[],b8=bH(b2),b3=b8.length,b7=this.length===1&&this[0].parentNode;if((b7==null||b7&&b7.nodeType===11&&b7.childNodes.length===1)&&b3===1){b8[b1](this[0]);return this}else{for(;b6<b3;b6++){b4=(b6>0?this.clone(true):this).get();bH(b8[b6])[b1](b4);b5=b5.concat(b4)}return this.pushStack(b5,b0,b8.selector)}}});function m(b0){if(typeof b0.getElementsByTagName!=="undefined"){return b0.getElementsByTagName("*")}else{if(typeof b0.querySelectorAll!=="undefined"){return b0.querySelectorAll("*")}else{return[]}}}function bT(b0){if(aF.test(b0.type)){b0.defaultChecked=b0.checked}}bH.extend({clone:function(b4,b6,b2){var b0,b1,b3,b5;if(bH.support.html5Clone||bH.isXMLDoc(b4)||!K.test("<"+b4.nodeName+">")){b5=b4.cloneNode(true)}else{l.innerHTML=b4.outerHTML;l.removeChild(b5=l.firstChild)}if((!bH.support.noCloneEvent||!bH.support.noCloneChecked)&&(b4.nodeType===1||b4.nodeType===11)&&!bH.isXMLDoc(b4)){F(b4,b5);b0=m(b4);b1=m(b5);for(b3=0;b0[b3];++b3){if(b1[b3]){F(b0[b3],b1[b3])}}}if(b6){ap(b4,b5);if(b2){b0=m(b4);b1=m(b5);for(b3=0;b0[b3];++b3){ap(b0[b3],b1[b3])}}}b0=b1=null;return b5},clean:function(cd,b2,b0,b3){var ca,b9,cc,ch,b6,cg,b7,b4,b1,cb,cf,b8,b5=b2===o&&aR,ce=[];if(!b2||typeof b2.createDocumentFragment==="undefined"){b2=o}for(ca=0;(cc=cd[ca])!=null;ca++){if(typeof cc==="number"){cc+=""}if(!cc){continue}if(typeof cc==="string"){if(!J.test(cc)){cc=b2.createTextNode(cc)}else{b5=b5||A(b2);b7=b2.createElement("div");b5.appendChild(b7);cc=cc.replace(az,"<$1></$2>");ch=(p.exec(cc)||["",""])[1].toLowerCase();b6=T[ch]||T._default;cg=b6[0];b7.innerHTML=b6[1]+cc+b6[2];while(cg--){b7=b7.lastChild}if(!bH.support.tbody){b4=bU.test(cc);b1=ch==="table"&&!b4?b7.firstChild&&b7.firstChild.childNodes:b6[1]==="<table>"&&!b4?b7.childNodes:[];for(b9=b1.length-1;b9>=0;--b9){if(bH.nodeName(b1[b9],"tbody")&&!b1[b9].childNodes.length){b1[b9].parentNode.removeChild(b1[b9])}}}if(!bH.support.leadingWhitespace&&bZ.test(cc)){b7.insertBefore(b2.createTextNode(bZ.exec(cc)[0]),b7.firstChild)}cc=b7.childNodes;b7.parentNode.removeChild(b7)}}if(cc.nodeType){ce.push(cc)}else{bH.merge(ce,cc)}}if(b7){cc=b7=b5=null}if(!bH.support.appendChecked){for(ca=0;(cc=ce[ca])!=null;ca++){if(bH.nodeName(cc,"input")){bT(cc)}else{if(typeof cc.getElementsByTagName!=="undefined"){bH.grep(cc.getElementsByTagName("input"),bT)}}}}if(b0){cf=function(ci){if(!ci.type||bx.test(ci.type)){return b3?b3.push(ci.parentNode?ci.parentNode.removeChild(ci):ci):b0.appendChild(ci)}};for(ca=0;(cc=ce[ca])!=null;ca++){if(!(bH.nodeName(cc,"script")&&cf(cc))){b0.appendChild(cc);if(typeof cc.getElementsByTagName!=="undefined"){b8=bH.grep(bH.merge([],cc.getElementsByTagName("script")),cf);ce.splice.apply(ce,[ca+1,0].concat(b8));ca+=b8.length}}}}return ce},cleanData:function(b1,b9){var b4,b2,b3,b8,b5=0,ca=bH.expando,b0=bH.cache,b6=bH.support.deleteExpando,b7=bH.event.special;for(;(b3=b1[b5])!=null;b5++){if(b9||bH.acceptData(b3)){b2=b3[ca];b4=b2&&b0[b2];if(b4){if(b4.events){for(b8 in b4.events){if(b7[b8]){bH.event.remove(b3,b8)}else{bH.removeEvent(b3,b8,b4.handle)}}}if(b0[b2]){delete b0[b2];if(b6){delete b3[ca]}else{if(b3.removeAttribute){b3.removeAttribute(ca)}else{b3[ca]=null}}bH.deletedIds.push(b2)}}}}}});(function(){var b0,b1;bH.uaMatch=function(b3){b3=b3.toLowerCase();var b2=/(chrome)[ \/]([\w.]+)/.exec(b3)||/(webkit)[ \/]([\w.]+)/.exec(b3)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(b3)||/(msie) ([\w.]+)/.exec(b3)||b3.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(b3)||[];return{browser:b2[1]||"",version:b2[2]||"0"}};b0=bH.uaMatch(d.userAgent);b1={};if(b0.browser){b1[b0.browser]=true;b1.version=b0.version}if(b1.chrome){b1.webkit=true}else{if(b1.webkit){b1.safari=true}}bH.browser=b1;bH.sub=function(){function b2(b5,b6){return new b2.fn.init(b5,b6)}bH.extend(true,b2,this);b2.superclass=this;b2.fn=b2.prototype=this();b2.fn.constructor=b2;b2.sub=this.sub;b2.fn.init=function b4(b5,b6){if(b6&&b6 instanceof bH&&!(b6 instanceof b2)){b6=b2(b6)}return bH.fn.init.call(this,b5,b6,b3)};b2.fn.init.prototype=b2.fn;var b3=b2(o);return b2}})();var E,aA,aX,bf=/alpha\([^)]*\)/i,aT=/opacity=([^)]*)/,bl=/^(top|right|bottom|left)$/,G=/^(none|table(?!-c[ea]).+)/,a0=/^margin/,a9=new RegExp("^("+by+")(.*)$","i"),W=new RegExp("^("+by+")(?!px)[a-z%]+$","i"),S=new RegExp("^([-+])=("+by+")","i"),bi={},ba={position:"absolute",visibility:"hidden",display:"block"},bB={letterSpacing:0,fontWeight:400},bR=["Top","Right","Bottom","Left"],at=["Webkit","O","Moz","ms"],aK=bH.fn.toggle;function b(b3,b1){if(b1 in b3){return b1}var b4=b1.charAt(0).toUpperCase()+b1.slice(1),b0=b1,b2=at.length;while(b2--){b1=at[b2]+b4;if(b1 in b3){return b1}}return b0}function Q(b1,b0){b1=b0||b1;return bH.css(b1,"display")==="none"||!bH.contains(b1.ownerDocument,b1)}function s(b5,b0){var b4,b6,b1=[],b2=0,b3=b5.length;for(;b2<b3;b2++){b4=b5[b2];if(!b4.style){continue}b1[b2]=bH._data(b4,"olddisplay");if(b0){if(!b1[b2]&&b4.style.display==="none"){b4.style.display=""}if(b4.style.display===""&&Q(b4)){b1[b2]=bH._data(b4,"olddisplay",bD(b4.nodeName))}}else{b6=E(b4,"display");if(!b1[b2]&&b6!=="none"){bH._data(b4,"olddisplay",b6)}}}for(b2=0;b2<b3;b2++){b4=b5[b2];if(!b4.style){continue}if(!b0||b4.style.display==="none"||b4.style.display===""){b4.style.display=b0?b1[b2]||"":"none"}}return b5}bH.fn.extend({css:function(b0,b1){return bH.access(this,function(b3,b2,b4){return b4!==aC?bH.style(b3,b2,b4):bH.css(b3,b2)},b0,b1,arguments.length>1)},show:function(){return s(this,true)},hide:function(){return s(this)},toggle:function(b2,b1){var b0=typeof b2==="boolean";if(bH.isFunction(b2)&&bH.isFunction(b1)){return aK.apply(this,arguments)}return this.each(function(){if(b0?b2:Q(this)){bH(this).show()}else{bH(this).hide()}})}});bH.extend({cssHooks:{opacity:{get:function(b2,b1){if(b1){var b0=E(b2,"opacity");return b0===""?"1":b0}}}},cssNumber:{fillOpacity:true,fontWeight:true,lineHeight:true,opacity:true,orphans:true,widows:true,zIndex:true,zoom:true},cssProps:{"float":bH.support.cssFloat?"cssFloat":"styleFloat"},style:function(b2,b1,b8,b3){if(!b2||b2.nodeType===3||b2.nodeType===8||!b2.style){return}var b6,b7,b9,b4=bH.camelCase(b1),b0=b2.style;b1=bH.cssProps[b4]||(bH.cssProps[b4]=b(b0,b4));b9=bH.cssHooks[b1]||bH.cssHooks[b4];if(b8!==aC){b7=typeof b8;if(b7==="string"&&(b6=S.exec(b8))){b8=(b6[1]+1)*b6[2]+parseFloat(bH.css(b2,b1));b7="number"}if(b8==null||b7==="number"&&isNaN(b8)){return}if(b7==="number"&&!bH.cssNumber[b4]){b8+="px"}if(!b9||!("set" in b9)||(b8=b9.set(b2,b8,b3))!==aC){try{b0[b1]=b8}catch(b5){}}}else{if(b9&&"get" in b9&&(b6=b9.get(b2,false,b3))!==aC){return b6}return b0[b1]}},css:function(b6,b4,b5,b1){var b7,b3,b0,b2=bH.camelCase(b4);b4=bH.cssProps[b2]||(bH.cssProps[b2]=b(b6.style,b2));b0=bH.cssHooks[b4]||bH.cssHooks[b2];if(b0&&"get" in b0){b7=b0.get(b6,true,b1)}if(b7===aC){b7=E(b6,b4)}if(b7==="normal"&&b4 in bB){b7=bB[b4]}if(b5||b1!==aC){b3=parseFloat(b7);return b5||bH.isNumeric(b3)?b3||0:b7}return b7},swap:function(b4,b3,b5){var b2,b1,b0={};for(b1 in b3){b0[b1]=b4.style[b1];b4.style[b1]=b3[b1]}b2=b5.call(b4);for(b1 in b3){b4.style[b1]=b0[b1]}return b2}});if(a3.getComputedStyle){E=function(b7,b1){var b0,b4,b3,b6,b5=a3.getComputedStyle(b7,null),b2=b7.style;if(b5){b0=b5[b1];if(b0===""&&!bH.contains(b7.ownerDocument,b7)){b0=bH.style(b7,b1)}if(W.test(b0)&&a0.test(b1)){b4=b2.width;b3=b2.minWidth;b6=b2.maxWidth;b2.minWidth=b2.maxWidth=b2.width=b0;b0=b5.width;b2.width=b4;b2.minWidth=b3;b2.maxWidth=b6}}return b0}}else{if(o.documentElement.currentStyle){E=function(b4,b2){var b5,b0,b1=b4.currentStyle&&b4.currentStyle[b2],b3=b4.style;if(b1==null&&b3&&b3[b2]){b1=b3[b2]}if(W.test(b1)&&!bl.test(b2)){b5=b3.left;b0=b4.runtimeStyle&&b4.runtimeStyle.left;if(b0){b4.runtimeStyle.left=b4.currentStyle.left}b3.left=b2==="fontSize"?"1em":b1;b1=b3.pixelLeft+"px";b3.left=b5;if(b0){b4.runtimeStyle.left=b0}}return b1===""?"auto":b1}}}function aH(b0,b2,b3){var b1=a9.exec(b2);return b1?Math.max(0,b1[1]-(b3||0))+(b1[2]||"px"):b2}function au(b3,b1,b0,b5){var b2=b0===(b5?"border":"content")?4:b1==="width"?1:0,b4=0;for(;b2<4;b2+=2){if(b0==="margin"){b4+=bH.css(b3,b0+bR[b2],true)}if(b5){if(b0==="content"){b4-=parseFloat(E(b3,"padding"+bR[b2]))||0}if(b0!=="margin"){b4-=parseFloat(E(b3,"border"+bR[b2]+"Width"))||0}}else{b4+=parseFloat(E(b3,"padding"+bR[b2]))||0;if(b0!=="padding"){b4+=parseFloat(E(b3,"border"+bR[b2]+"Width"))||0}}}return b4}function u(b3,b1,b0){var b4=b1==="width"?b3.offsetWidth:b3.offsetHeight,b2=true,b5=bH.support.boxSizing&&bH.css(b3,"boxSizing")==="border-box";if(b4<=0||b4==null){b4=E(b3,b1);if(b4<0||b4==null){b4=b3.style[b1]}if(W.test(b4)){return b4}b2=b5&&(bH.support.boxSizingReliable||b4===b3.style[b1]);b4=parseFloat(b4)||0}return(b4+au(b3,b1,b0||(b5?"border":"content"),b2))+"px"}function bD(b2){if(bi[b2]){return bi[b2]}var b0=bH("<"+b2+">").appendTo(o.body),b1=b0.css("display");b0.remove();if(b1==="none"||b1===""){aA=o.body.appendChild(aA||bH.extend(o.createElement("iframe"),{frameBorder:0,width:0,height:0}));if(!aX||!aA.createElement){aX=(aA.contentWindow||aA.contentDocument).document;aX.write("<!doctype html><html><body>");aX.close()}b0=aX.body.appendChild(aX.createElement(b2));b1=E(b0,"display");o.body.removeChild(aA)}bi[b2]=b1;return b1}bH.each(["height","width"],function(b1,b0){bH.cssHooks[b0]={get:function(b4,b3,b2){if(b3){if(b4.offsetWidth===0&&G.test(E(b4,"display"))){return bH.swap(b4,ba,function(){return u(b4,b0,b2)})}else{return u(b4,b0,b2)}}},set:function(b3,b4,b2){return aH(b3,b4,b2?au(b3,b0,b2,bH.support.boxSizing&&bH.css(b3,"boxSizing")==="border-box"):0)}}});if(!bH.support.opacity){bH.cssHooks.opacity={get:function(b1,b0){return aT.test((b0&&b1.currentStyle?b1.currentStyle.filter:b1.style.filter)||"")?(0.01*parseFloat(RegExp.$1))+"":b0?"1":""},set:function(b4,b5){var b3=b4.style,b1=b4.currentStyle,b0=bH.isNumeric(b5)?"alpha(opacity="+b5*100+")":"",b2=b1&&b1.filter||b3.filter||"";b3.zoom=1;if(b5>=1&&bH.trim(b2.replace(bf,""))===""&&b3.removeAttribute){b3.removeAttribute("filter");if(b1&&!b1.filter){return}}b3.filter=bf.test(b2)?b2.replace(bf,b0):b2+" "+b0}}}bH(function(){if(!bH.support.reliableMarginRight){bH.cssHooks.marginRight={get:function(b1,b0){return bH.swap(b1,{display:"inline-block"},function(){if(b0){return E(b1,"marginRight")}})}}}if(!bH.support.pixelPosition&&bH.fn.position){bH.each(["top","left"],function(b0,b1){bH.cssHooks[b1]={get:function(b4,b3){if(b3){var b2=E(b4,b1);return W.test(b2)?bH(b4).position()[b1]+"px":b2}}}})}});if(bH.expr&&bH.expr.filters){bH.expr.filters.hidden=function(b0){return(b0.offsetWidth===0&&b0.offsetHeight===0)||(!bH.support.reliableHiddenOffsets&&((b0.style&&b0.style.display)||E(b0,"display"))==="none")};bH.expr.filters.visible=function(b0){return !bH.expr.filters.hidden(b0)}}bH.each({margin:"",padding:"",border:"Width"},function(b0,b1){bH.cssHooks[b0+b1]={expand:function(b4){var b3,b5=typeof b4==="string"?b4.split(" "):[b4],b2={};for(b3=0;b3<4;b3++){b2[b0+bR[b3]+b1]=b5[b3]||b5[b3-2]||b5[0]}return b2}};if(!a0.test(b0)){bH.cssHooks[b0+b1].set=aH}});var bt=/%20/g,aQ=/\[\]$/,U=/\r?\n/g,bA=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,aE=/^(?:select|textarea)/i;bH.fn.extend({serialize:function(){return bH.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?bH.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||aE.test(this.nodeName)||bA.test(this.type))}).map(function(b0,b1){var b2=bH(this).val();return b2==null?null:bH.isArray(b2)?bH.map(b2,function(b4,b3){return{name:b1.name,value:b4.replace(U,"\r\n")}}):{name:b1.name,value:b2.replace(U,"\r\n")}}).get()}});bH.param=function(b0,b2){var b3,b1=[],b4=function(b5,b6){b6=bH.isFunction(b6)?b6():(b6==null?"":b6);b1[b1.length]=encodeURIComponent(b5)+"="+encodeURIComponent(b6)};if(b2===aC){b2=bH.ajaxSettings&&bH.ajaxSettings.traditional}if(bH.isArray(b0)||(b0.jquery&&!bH.isPlainObject(b0))){bH.each(b0,function(){b4(this.name,this.value)})}else{for(b3 in b0){k(b3,b0[b3],b2,b4)}}return b1.join("&").replace(bt,"+")};function k(b2,b4,b1,b3){var b0;if(bH.isArray(b4)){bH.each(b4,function(b6,b5){if(b1||aQ.test(b2)){b3(b2,b5)}else{k(b2+"["+(typeof b5==="object"?b6:"")+"]",b5,b1,b3)}})}else{if(!b1&&bH.type(b4)==="object"){for(b0 in b4){k(b2+"["+b0+"]",b4[b0],b1,b3)}}else{b3(b2,b4)}}}var Y,bY,ao=/#.*$/,ae=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,B=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,r=/^(?:GET|HEAD)$/,aD=/^\/\//,bO=/\?/,g=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,P=/([?&])_=[^&]*/,aU=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,bX=bH.fn.load,v={},a7={},aY=["*/"]+["*"];try{Y=aJ.href}catch(be){Y=o.createElement("a");Y.href="";Y=Y.href}bY=aU.exec(Y.toLowerCase())||[];function bJ(b0){return function(b4,b6){if(typeof b4!=="string"){b6=b4;b4="*"}var b1,b7,b8,b3=b4.toLowerCase().split(aW),b2=0,b5=b3.length;if(bH.isFunction(b6)){for(;b2<b5;b2++){b1=b3[b2];b8=/^\+/.test(b1);if(b8){b1=b1.substr(1)||"*"}b7=b0[b1]=b0[b1]||[];b7[b8?"unshift":"push"](b6)}}}}function q(b1,ca,b5,b8,b7,b3){b7=b7||ca.dataTypes[0];b3=b3||{};b3[b7]=true;var b9,b6=b1[b7],b2=0,b0=b6?b6.length:0,b4=(b1===v);for(;b2<b0&&(b4||!b9);b2++){b9=b6[b2](ca,b5,b8);if(typeof b9==="string"){if(!b4||b3[b9]){b9=aC}else{ca.dataTypes.unshift(b9);b9=q(b1,ca,b5,b8,b9,b3)}}}if((b4||!b9)&&!b3["*"]){b9=q(b1,ca,b5,b8,"*",b3)}return b9}function t(b2,b3){var b1,b0,b4=bH.ajaxSettings.flatOptions||{};for(b1 in b3){if(b3[b1]!==aC){(b4[b1]?b2:(b0||(b0={})))[b1]=b3[b1]}}if(b0){bH.extend(true,b2,b0)}}bH.fn.load=function(b3,b6,b7){if(typeof b3!=="string"&&bX){return bX.apply(this,arguments)}if(!this.length){return this}var b0,b4,b2,b1=this,b5=b3.indexOf(" ");if(b5>=0){b0=b3.slice(b5,b3.length);b3=b3.slice(0,b5)}if(bH.isFunction(b6)){b7=b6;b6=aC}else{if(b6&&typeof b6==="object"){b4="POST"}}bH.ajax({url:b3,type:b4,dataType:"html",data:b6,complete:function(b9,b8){if(b7){b1.each(b7,b2||[b9.responseText,b8,b9])}}}).done(function(b8){b2=arguments;b1.html(b0?bH("<div>").append(b8.replace(g,"")).find(b0):b8)});return this};bH.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(b0,b1){bH.fn[b1]=function(b2){return this.on(b1,b2)}});bH.each(["get","post"],function(b0,b1){bH[b1]=function(b2,b4,b5,b3){if(bH.isFunction(b4)){b3=b3||b5;b5=b4;b4=aC}return bH.ajax({type:b1,url:b2,data:b4,success:b5,dataType:b3})}});bH.extend({getScript:function(b0,b1){return bH.get(b0,aC,b1,"script")},getJSON:function(b0,b1,b2){return bH.get(b0,b1,b2,"json")},ajaxSetup:function(b1,b0){if(b0){t(b1,bH.ajaxSettings)}else{b0=b1;b1=bH.ajaxSettings}t(b1,b0);return b1},ajaxSettings:{url:Y,isLocal:B.test(bY[1]),global:true,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:true,async:true,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":aY},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a3.String,"text html":true,"text json":bH.parseJSON,"text xml":bH.parseXML},flatOptions:{context:true,url:true}},ajaxPrefilter:bJ(v),ajaxTransport:bJ(a7),ajax:function(b5,b2){if(typeof b5==="object"){b2=b5;b5=aC}b2=b2||{};var b8,cm,b3,ch,ca,ce,b1,cg,b9=bH.ajaxSetup({},b2),co=b9.context||b9,cc=co!==b9&&(co.nodeType||co instanceof bH)?bH(co):bH.event,cn=bH.Deferred(),cj=bH.Callbacks("once memory"),b6=b9.statusCode||{},cd={},ck={},b4=0,b7="canceled",cf={readyState:0,setRequestHeader:function(cq,cr){if(!b4){var cp=cq.toLowerCase();cq=ck[cp]=ck[cp]||cq;cd[cq]=cr}return this},getAllResponseHeaders:function(){return b4===2?cm:null},getResponseHeader:function(cq){var cp;if(b4===2){if(!b3){b3={};while((cp=ae.exec(cm))){b3[cp[1].toLowerCase()]=cp[2]}}cp=b3[cq.toLowerCase()]}return cp===aC?null:cp},overrideMimeType:function(cp){if(!b4){b9.mimeType=cp}return this},abort:function(cp){cp=cp||b7;if(ch){ch.abort(cp)}cb(0,cp);return this}};function cb(cu,cq,cv,cs){var cp,cy,cw,ct,cx,cr=cq;if(b4===2){return}b4=2;if(ca){clearTimeout(ca)}ch=aC;cm=cs||"";cf.readyState=cu>0?4:0;if(cv){ct=h(b9,cf,cv)}if(cu>=200&&cu<300||cu===304){if(b9.ifModified){cx=cf.getResponseHeader("Last-Modified");if(cx){bH.lastModified[b8]=cx}cx=cf.getResponseHeader("Etag");if(cx){bH.etag[b8]=cx}}if(cu===304){cr="notmodified";cp=true}else{cp=af(b9,ct);cr=cp.state;cy=cp.data;cw=cp.error;cp=!cw}}else{cw=cr;if(!cr||cu){cr="error";if(cu<0){cu=0}}}cf.status=cu;cf.statusText=""+(cq||cr);if(cp){cn.resolveWith(co,[cy,cr,cf])}else{cn.rejectWith(co,[cf,cr,cw])}cf.statusCode(b6);b6=aC;if(b1){cc.trigger("ajax"+(cp?"Success":"Error"),[cf,b9,cp?cy:cw])}cj.fireWith(co,[cf,cr]);if(b1){cc.trigger("ajaxComplete",[cf,b9]);if(!(--bH.active)){bH.event.trigger("ajaxStop")}}}cn.promise(cf);cf.success=cf.done;cf.error=cf.fail;cf.complete=cj.add;cf.statusCode=function(cq){if(cq){var cp;if(b4<2){for(cp in cq){b6[cp]=[b6[cp],cq[cp]]}}else{cp=cq[cf.status];cf.always(cp)}}return this};b9.url=((b5||b9.url)+"").replace(ao,"").replace(aD,bY[1]+"//");b9.dataTypes=bH.trim(b9.dataType||"*").toLowerCase().split(aW);if(b9.crossDomain==null){ce=aU.exec(b9.url.toLowerCase());b9.crossDomain=!!(ce&&(ce[1]!=bY[1]||ce[2]!=bY[2]||(ce[3]||(ce[1]==="http:"?80:443))!=(bY[3]||(bY[1]==="http:"?80:443))))}if(b9.data&&b9.processData&&typeof b9.data!=="string"){b9.data=bH.param(b9.data,b9.traditional)}q(v,b9,b2,cf);if(b4===2){return cf}b1=b9.global;b9.type=b9.type.toUpperCase();b9.hasContent=!r.test(b9.type);if(b1&&bH.active++===0){bH.event.trigger("ajaxStart")}if(!b9.hasContent){if(b9.data){b9.url+=(bO.test(b9.url)?"&":"?")+b9.data;delete b9.data}b8=b9.url;if(b9.cache===false){var b0=bH.now(),cl=b9.url.replace(P,"$1_="+b0);b9.url=cl+((cl===b9.url)?(bO.test(b9.url)?"&":"?")+"_="+b0:"")}}if(b9.data&&b9.hasContent&&b9.contentType!==false||b2.contentType){cf.setRequestHeader("Content-Type",b9.contentType)}if(b9.ifModified){b8=b8||b9.url;if(bH.lastModified[b8]){cf.setRequestHeader("If-Modified-Since",bH.lastModified[b8])}if(bH.etag[b8]){cf.setRequestHeader("If-None-Match",bH.etag[b8])}}cf.setRequestHeader("Accept",b9.dataTypes[0]&&b9.accepts[b9.dataTypes[0]]?b9.accepts[b9.dataTypes[0]]+(b9.dataTypes[0]!=="*"?", "+aY+"; q=0.01":""):b9.accepts["*"]);for(cg in b9.headers){cf.setRequestHeader(cg,b9.headers[cg])}if(b9.beforeSend&&(b9.beforeSend.call(co,cf,b9)===false||b4===2)){return cf.abort()}b7="abort";for(cg in {success:1,error:1,complete:1}){cf[cg](b9[cg])}ch=q(a7,b9,b2,cf);if(!ch){cb(-1,"No Transport")}else{cf.readyState=1;if(b1){cc.trigger("ajaxSend",[cf,b9])}if(b9.async&&b9.timeout>0){ca=setTimeout(function(){cf.abort("timeout")},b9.timeout)}try{b4=1;ch.send(cd,cb)}catch(ci){if(b4<2){cb(-1,ci)}else{throw ci}}}return cf},active:0,lastModified:{},etag:{}});function h(b9,b8,b5){var b4,b6,b3,b0,b1=b9.contents,b7=b9.dataTypes,b2=b9.responseFields;for(b6 in b2){if(b6 in b5){b8[b2[b6]]=b5[b6]}}while(b7[0]==="*"){b7.shift();if(b4===aC){b4=b9.mimeType||b8.getResponseHeader("content-type")}}if(b4){for(b6 in b1){if(b1[b6]&&b1[b6].test(b4)){b7.unshift(b6);break}}}if(b7[0] in b5){b3=b7[0]}else{for(b6 in b5){if(!b7[0]||b9.converters[b6+" "+b7[0]]){b3=b6;break}if(!b0){b0=b6}}b3=b3||b0}if(b3){if(b3!==b7[0]){b7.unshift(b3)}return b5[b3]}}function af(ca,b2){var b8,b0,b6,b4,b7=ca.dataTypes.slice(),b1=b7[0],b9={},b3=0;if(ca.dataFilter){b2=ca.dataFilter(b2,ca.dataType)}if(b7[1]){for(b8 in ca.converters){b9[b8.toLowerCase()]=ca.converters[b8]}}for(;(b6=b7[++b3]);){if(b6!=="*"){if(b1!=="*"&&b1!==b6){b8=b9[b1+" "+b6]||b9["* "+b6];if(!b8){for(b0 in b9){b4=b0.split(" ");if(b4[1]===b6){b8=b9[b1+" "+b4[0]]||b9["* "+b4[0]];if(b8){if(b8===true){b8=b9[b0]}else{if(b9[b0]!==true){b6=b4[0];b7.splice(b3--,0,b6)}}break}}}}if(b8!==true){if(b8&&ca["throws"]){b2=b8(b2)}else{try{b2=b8(b2)}catch(b5){return{state:"parsererror",error:b8?b5:"No conversion from "+b1+" to "+b6}}}}}b1=b6}}return{state:"success",data:b2}}var bq=[],ax=/\?/,a6=/(=)\?(?=&|$)|\?\?/,bm=bH.now();bH.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var b0=bq.pop()||(bH.expando+"_"+(bm++));this[b0]=true;return b0}});bH.ajaxPrefilter("json jsonp",function(ca,b5,b9){var b8,b0,b7,b3=ca.data,b1=ca.url,b2=ca.jsonp!==false,b6=b2&&a6.test(b1),b4=b2&&!b6&&typeof b3==="string"&&!(ca.contentType||"").indexOf("application/x-www-form-urlencoded")&&a6.test(b3);if(ca.dataTypes[0]==="jsonp"||b6||b4){b8=ca.jsonpCallback=bH.isFunction(ca.jsonpCallback)?ca.jsonpCallback():ca.jsonpCallback;b0=a3[b8];if(b6){ca.url=b1.replace(a6,"$1"+b8)}else{if(b4){ca.data=b3.replace(a6,"$1"+b8)}else{if(b2){ca.url+=(ax.test(b1)?"&":"?")+ca.jsonp+"="+b8}}}ca.converters["script json"]=function(){if(!b7){bH.error(b8+" was not called")}return b7[0]};ca.dataTypes[0]="json";a3[b8]=function(){b7=arguments};b9.always(function(){a3[b8]=b0;if(ca[b8]){ca.jsonpCallback=b5.jsonpCallback;bq.push(b8)}if(b7&&bH.isFunction(b0)){b0(b7[0])}b7=b0=aC});return"script"}});bH.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(b0){bH.globalEval(b0);return b0}}});bH.ajaxPrefilter("script",function(b0){if(b0.cache===aC){b0.cache=false}if(b0.crossDomain){b0.type="GET";b0.global=false}});bH.ajaxTransport("script",function(b2){if(b2.crossDomain){var b0,b1=o.head||o.getElementsByTagName("head")[0]||o.documentElement;return{send:function(b3,b4){b0=o.createElement("script");b0.async="async";if(b2.scriptCharset){b0.charset=b2.scriptCharset}b0.src=b2.url;b0.onload=b0.onreadystatechange=function(b6,b5){if(b5||!b0.readyState||/loaded|complete/.test(b0.readyState)){b0.onload=b0.onreadystatechange=null;if(b1&&b0.parentNode){b1.removeChild(b0)}b0=aC;if(!b5){b4(200,"success")}}};b1.insertBefore(b0,b1.firstChild)},abort:function(){if(b0){b0.onload(0,1)}}}}});var ai,aO=a3.ActiveXObject?function(){for(var b0 in ai){ai[b0](0,1)}}:false,av=0;function bC(){try{return new a3.XMLHttpRequest()}catch(b0){}}function bc(){try{return new a3.ActiveXObject("Microsoft.XMLHTTP")}catch(b0){}}bH.ajaxSettings.xhr=a3.ActiveXObject?function(){return !this.isLocal&&bC()||bc()}:bC;(function(b0){bH.extend(bH.support,{ajax:!!b0,cors:!!b0&&("withCredentials" in b0)})})(bH.ajaxSettings.xhr());if(bH.support.ajax){bH.ajaxTransport(function(b0){if(!b0.crossDomain||bH.support.cors){var b1;return{send:function(b7,b2){var b5,b4,b6=b0.xhr();if(b0.username){b6.open(b0.type,b0.url,b0.async,b0.username,b0.password)}else{b6.open(b0.type,b0.url,b0.async)}if(b0.xhrFields){for(b4 in b0.xhrFields){b6[b4]=b0.xhrFields[b4]}}if(b0.mimeType&&b6.overrideMimeType){b6.overrideMimeType(b0.mimeType)}if(!b0.crossDomain&&!b7["X-Requested-With"]){b7["X-Requested-With"]="XMLHttpRequest"}try{for(b4 in b7){b6.setRequestHeader(b4,b7[b4])}}catch(b3){}b6.send((b0.hasContent&&b0.data)||null);b1=function(cg,ca){var cb,b9,b8,ce,cd;try{if(b1&&(ca||b6.readyState===4)){b1=aC;if(b5){b6.onreadystatechange=bH.noop;if(aO){delete ai[b5]}}if(ca){if(b6.readyState!==4){b6.abort()}}else{cb=b6.status;b8=b6.getAllResponseHeaders();ce={};cd=b6.responseXML;if(cd&&cd.documentElement){ce.xml=cd}try{ce.text=b6.responseText}catch(cg){}try{b9=b6.statusText}catch(cf){b9=""}if(!cb&&b0.isLocal&&!b0.crossDomain){cb=ce.text?200:404}else{if(cb===1223){cb=204}}}}}catch(cc){if(!ca){b2(-1,cc)}}if(ce){b2(cb,b9,ce,b8)}};if(!b0.async){b1()}else{if(b6.readyState===4){setTimeout(b1,0)}else{b5=++av;if(aO){if(!ai){ai={};bH(a3).unload(aO)}ai[b5]=b1}b6.onreadystatechange=b1}}},abort:function(){if(b1){b1(0,1)}}}}})}var L,ac,bP=/^(?:toggle|show|hide)$/,bI=new RegExp("^(?:([-+])=|)("+by+")([a-z%]*)$","i"),bN=/queueHooks$/,ay=[i],a2={"*":[function(b1,b7){var b4,b8,b0,b9=this.createTween(b1,b7),b5=bI.exec(b7),b6=b9.cur(),b2=+b6||0,b3=1;if(b5){b4=+b5[2];b8=b5[3]||(bH.cssNumber[b1]?"":"px");if(b8!=="px"&&b2){b2=bH.css(b9.elem,b1,true)||b4||1;do{b0=b3=b3||".5";b2=b2/b3;bH.style(b9.elem,b1,b2+b8);b3=b9.cur()/b6}while(b3!==1&&b3!==b0)}b9.unit=b8;b9.start=b2;b9.end=b5[1]?b2+(b5[1]+1)*b4:b4}return b9}]};function bk(){setTimeout(function(){L=aC},0);return(L=bH.now())}function bd(b1,b0){bH.each(b0,function(b6,b4){var b5=(a2[b6]||[]).concat(a2["*"]),b2=0,b3=b5.length;for(;b2<b3;b2++){if(b5[b2].call(b1,b6,b4)){return}}})}function f(b2,b6,b9){var ca,b5=0,b0=0,b1=ay.length,b8=bH.Deferred().always(function(){delete b4.elem}),b4=function(){var cf=L||bk(),cc=Math.max(0,b3.startTime+b3.duration-cf),ce=1-(cc/b3.duration||0),cb=0,cd=b3.tweens.length;for(;cb<cd;cb++){b3.tweens[cb].run(ce)}b8.notifyWith(b2,[b3,ce,cc]);if(ce<1&&cd){return cc}else{b8.resolveWith(b2,[b3]);return false}},b3=b8.promise({elem:b2,props:bH.extend({},b6),opts:bH.extend(true,{specialEasing:{}},b9),originalProperties:b6,originalOptions:b9,startTime:L||bk(),duration:b9.duration,tweens:[],createTween:function(ce,cb,cd){var cc=bH.Tween(b2,b3.opts,ce,cb,b3.opts.specialEasing[ce]||b3.opts.easing);b3.tweens.push(cc);return cc},stop:function(cc){var cb=0,cd=cc?b3.tweens.length:0;for(;cb<cd;cb++){b3.tweens[cb].run(1)}if(cc){b8.resolveWith(b2,[b3,cc])}else{b8.rejectWith(b2,[b3,cc])}return this}}),b7=b3.props;al(b7,b3.opts.specialEasing);for(;b5<b1;b5++){ca=ay[b5].call(b3,b2,b7,b3.opts);if(ca){return ca}}bd(b3,b7);if(bH.isFunction(b3.opts.start)){b3.opts.start.call(b2,b3)}bH.fx.timer(bH.extend(b4,{anim:b3,queue:b3.opts.queue,elem:b2}));return b3.progress(b3.opts.progress).done(b3.opts.done,b3.opts.complete).fail(b3.opts.fail).always(b3.opts.always)}function al(b3,b5){var b2,b1,b6,b4,b0;for(b2 in b3){b1=bH.camelCase(b2);b6=b5[b1];b4=b3[b2];if(bH.isArray(b4)){b6=b4[1];b4=b3[b2]=b4[0]}if(b2!==b1){b3[b1]=b4;delete b3[b2]}b0=bH.cssHooks[b1];if(b0&&"expand" in b0){b4=b0.expand(b4);delete b3[b1];for(b2 in b4){if(!(b2 in b3)){b3[b2]=b4[b2];b5[b2]=b6}}}else{b5[b1]=b6}}}bH.Animation=bH.extend(f,{tweener:function(b1,b4){if(bH.isFunction(b1)){b4=b1;b1=["*"]}else{b1=b1.split(" ")}var b3,b0=0,b2=b1.length;for(;b0<b2;b0++){b3=b1[b0];a2[b3]=a2[b3]||[];a2[b3].unshift(b4)}},prefilter:function(b1,b0){if(b0){ay.unshift(b1)}else{ay.push(b1)}}});function i(b4,b9,b0){var b8,b2,cb,b3,cf,ce,cd,cc,b5=this,b1=b4.style,ca={},b7=[],b6=b4.nodeType&&Q(b4);if(!b0.queue){cd=bH._queueHooks(b4,"fx");if(cd.unqueued==null){cd.unqueued=0;cc=cd.empty.fire;cd.empty.fire=function(){if(!cd.unqueued){cc()}}}cd.unqueued++;b5.always(function(){b5.always(function(){cd.unqueued--;if(!bH.queue(b4,"fx").length){cd.empty.fire()}})})}if(b4.nodeType===1&&("height" in b9||"width" in b9)){b0.overflow=[b1.overflow,b1.overflowX,b1.overflowY];if(bH.css(b4,"display")==="inline"&&bH.css(b4,"float")==="none"){if(!bH.support.inlineBlockNeedsLayout||bD(b4.nodeName)==="inline"){b1.display="inline-block"}else{b1.zoom=1}}}if(b0.overflow){b1.overflow="hidden";if(!bH.support.shrinkWrapBlocks){b5.done(function(){b1.overflow=b0.overflow[0];b1.overflowX=b0.overflow[1];b1.overflowY=b0.overflow[2]})}}for(b8 in b9){cb=b9[b8];if(bP.exec(cb)){delete b9[b8];if(cb===(b6?"hide":"show")){continue}b7.push(b8)}}b3=b7.length;if(b3){cf=bH._data(b4,"fxshow")||bH._data(b4,"fxshow",{});if(b6){bH(b4).show()}else{b5.done(function(){bH(b4).hide()})}b5.done(function(){var cg;bH.removeData(b4,"fxshow",true);for(cg in ca){bH.style(b4,cg,ca[cg])}});for(b8=0;b8<b3;b8++){b2=b7[b8];ce=b5.createTween(b2,b6?cf[b2]:0);ca[b2]=cf[b2]||bH.style(b4,b2);if(!(b2 in cf)){cf[b2]=ce.start;if(b6){ce.end=ce.start;ce.start=b2==="width"||b2==="height"?1:0}}}}}function H(b2,b1,b4,b0,b3){return new H.prototype.init(b2,b1,b4,b0,b3)}bH.Tween=H;H.prototype={constructor:H,init:function(b3,b1,b5,b0,b4,b2){this.elem=b3;this.prop=b5;this.easing=b4||"swing";this.options=b1;this.start=this.now=this.cur();this.end=b0;this.unit=b2||(bH.cssNumber[b5]?"":"px")},cur:function(){var b0=H.propHooks[this.prop];return b0&&b0.get?b0.get(this):H.propHooks._default.get(this)},run:function(b2){var b1,b0=H.propHooks[this.prop];if(this.options.duration){this.pos=b1=bH.easing[this.easing](b2,this.options.duration*b2,0,1,this.options.duration)}else{this.pos=b1=b2}this.now=(this.end-this.start)*b1+this.start;if(this.options.step){this.options.step.call(this.elem,this.now,this)}if(b0&&b0.set){b0.set(this)}else{H.propHooks._default.set(this)}return this}};H.prototype.init.prototype=H.prototype;H.propHooks={_default:{get:function(b1){var b0;if(b1.elem[b1.prop]!=null&&(!b1.elem.style||b1.elem.style[b1.prop]==null)){return b1.elem[b1.prop]}b0=bH.css(b1.elem,b1.prop,false,"");return !b0||b0==="auto"?0:b0},set:function(b0){if(bH.fx.step[b0.prop]){bH.fx.step[b0.prop](b0)}else{if(b0.elem.style&&(b0.elem.style[bH.cssProps[b0.prop]]!=null||bH.cssHooks[b0.prop])){bH.style(b0.elem,b0.prop,b0.now+b0.unit)}else{b0.elem[b0.prop]=b0.now}}}}};H.propHooks.scrollTop=H.propHooks.scrollLeft={set:function(b0){if(b0.elem.nodeType&&b0.elem.parentNode){b0.elem[b0.prop]=b0.now}}};bH.each(["toggle","show","hide"],function(b1,b0){var b2=bH.fn[b0];bH.fn[b0]=function(b3,b5,b4){return b3==null||typeof b3==="boolean"||(!b1&&bH.isFunction(b3)&&bH.isFunction(b5))?b2.apply(this,arguments):this.animate(bG(b0,true),b3,b5,b4)}});bH.fn.extend({fadeTo:function(b0,b3,b2,b1){return this.filter(Q).css("opacity",0).show().end().animate({opacity:b3},b0,b2,b1)},animate:function(b6,b3,b5,b4){var b2=bH.isEmptyObject(b6),b0=bH.speed(b3,b5,b4),b1=function(){var b7=f(this,bH.extend({},b6),b0);if(b2){b7.stop(true)}};return b2||b0.queue===false?this.each(b1):this.queue(b0.queue,b1)},stop:function(b2,b1,b0){var b3=function(b4){var b5=b4.stop;delete b4.stop;b5(b0)};if(typeof b2!=="string"){b0=b1;b1=b2;b2=aC}if(b1&&b2!==false){this.queue(b2||"fx",[])}return this.each(function(){var b7=true,b4=b2!=null&&b2+"queueHooks",b6=bH.timers,b5=bH._data(this);if(b4){if(b5[b4]&&b5[b4].stop){b3(b5[b4])}}else{for(b4 in b5){if(b5[b4]&&b5[b4].stop&&bN.test(b4)){b3(b5[b4])}}}for(b4=b6.length;b4--;){if(b6[b4].elem===this&&(b2==null||b6[b4].queue===b2)){b6[b4].anim.stop(b0);b7=false;b6.splice(b4,1)}}if(b7||!b0){bH.dequeue(this,b2)}})}});function bG(b2,b4){var b3,b0={height:b2},b1=0;b4=b4?1:0;for(;b1<4;b1+=2-b4){b3=bR[b1];b0["margin"+b3]=b0["padding"+b3]=b2}if(b4){b0.opacity=b0.width=b2}return b0}bH.each({slideDown:bG("show"),slideUp:bG("hide"),slideToggle:bG("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(b0,b1){bH.fn[b0]=function(b2,b4,b3){return this.animate(b1,b2,b4,b3)}});bH.speed=function(b2,b3,b1){var b0=b2&&typeof b2==="object"?bH.extend({},b2):{complete:b1||!b1&&b3||bH.isFunction(b2)&&b2,duration:b2,easing:b1&&b3||b3&&!bH.isFunction(b3)&&b3};b0.duration=bH.fx.off?0:typeof b0.duration==="number"?b0.duration:b0.duration in bH.fx.speeds?bH.fx.speeds[b0.duration]:bH.fx.speeds._default;if(b0.queue==null||b0.queue===true){b0.queue="fx"}b0.old=b0.complete;b0.complete=function(){if(bH.isFunction(b0.old)){b0.old.call(this)}if(b0.queue){bH.dequeue(this,b0.queue)}};return b0};bH.easing={linear:function(b0){return b0},swing:function(b0){return 0.5-Math.cos(b0*Math.PI)/2}};bH.timers=[];bH.fx=H.prototype.init;bH.fx.tick=function(){var b2,b1=bH.timers,b0=0;for(;b0<b1.length;b0++){b2=b1[b0];if(!b2()&&b1[b0]===b2){b1.splice(b0--,1)}}if(!b1.length){bH.fx.stop()}};bH.fx.timer=function(b0){if(b0()&&bH.timers.push(b0)&&!ac){ac=setInterval(bH.fx.tick,bH.fx.interval)}};bH.fx.interval=13;bH.fx.stop=function(){clearInterval(ac);ac=null};bH.fx.speeds={slow:600,fast:200,_default:400};bH.fx.step={};if(bH.expr&&bH.expr.filters){bH.expr.filters.animated=function(b0){return bH.grep(bH.timers,function(b1){return b0===b1.elem}).length}}var bn=/^(?:body|html)$/i;bH.fn.offset=function(cc){if(arguments.length){return cc===aC?this:this.each(function(cd){bH.offset.setOffset(this,cc,cd)})}var b6,b1,b7,b8,b5,b9,b0,b4,ca,b3,b2=this[0],cb=b2&&b2.ownerDocument;if(!cb){return}if((b7=cb.body)===b2){return bH.offset.bodyOffset(b2)}b1=cb.documentElement;if(!bH.contains(b1,b2)){return{top:0,left:0}}b6=b2.getBoundingClientRect();b8=bo(cb);b5=b1.clientTop||b7.clientTop||0;b9=b1.clientLeft||b7.clientLeft||0;b0=b8.pageYOffset||b1.scrollTop;b4=b8.pageXOffset||b1.scrollLeft;ca=b6.top+b0-b5;b3=b6.left+b4-b9;return{top:ca,left:b3}};bH.offset={bodyOffset:function(b0){var b2=b0.offsetTop,b1=b0.offsetLeft;if(bH.support.doesNotIncludeMarginInBodyOffset){b2+=parseFloat(bH.css(b0,"marginTop"))||0;b1+=parseFloat(bH.css(b0,"marginLeft"))||0}return{top:b2,left:b1}},setOffset:function(b3,cc,b6){var b7=bH.css(b3,"position");if(b7==="static"){b3.style.position="relative"}var b5=bH(b3),b1=b5.offset(),b0=bH.css(b3,"top"),ca=bH.css(b3,"left"),cb=(b7==="absolute"||b7==="fixed")&&bH.inArray("auto",[b0,ca])>-1,b9={},b8={},b2,b4;if(cb){b8=b5.position();b2=b8.top;b4=b8.left}else{b2=parseFloat(b0)||0;b4=parseFloat(ca)||0}if(bH.isFunction(cc)){cc=cc.call(b3,b6,b1)}if(cc.top!=null){b9.top=(cc.top-b1.top)+b2}if(cc.left!=null){b9.left=(cc.left-b1.left)+b4}if("using" in cc){cc.using.call(b3,b9)}else{b5.css(b9)}}};bH.fn.extend({position:function(){if(!this[0]){return}var b2=this[0],b1=this.offsetParent(),b3=this.offset(),b0=bn.test(b1[0].nodeName)?{top:0,left:0}:b1.offset();b3.top-=parseFloat(bH.css(b2,"marginTop"))||0;b3.left-=parseFloat(bH.css(b2,"marginLeft"))||0;b0.top+=parseFloat(bH.css(b1[0],"borderTopWidth"))||0;b0.left+=parseFloat(bH.css(b1[0],"borderLeftWidth"))||0;return{top:b3.top-b0.top,left:b3.left-b0.left}},offsetParent:function(){return this.map(function(){var b0=this.offsetParent||o.body;while(b0&&(!bn.test(b0.nodeName)&&bH.css(b0,"position")==="static")){b0=b0.offsetParent}return b0||o.body})}});bH.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(b2,b1){var b0=/Y/.test(b1);bH.fn[b2]=function(b3){return bH.access(this,function(b4,b7,b6){var b5=bo(b4);if(b6===aC){return b5?(b1 in b5)?b5[b1]:b5.document.documentElement[b7]:b4[b7]}if(b5){b5.scrollTo(!b0?b6:bH(b5).scrollLeft(),b0?b6:bH(b5).scrollTop())}else{b4[b7]=b6}},b2,b3,arguments.length,null)}});function bo(b0){return bH.isWindow(b0)?b0:b0.nodeType===9?b0.defaultView||b0.parentWindow:false}bH.each({Height:"height",Width:"width"},function(b0,b1){bH.each({padding:"inner"+b0,content:b1,"":"outer"+b0},function(b2,b3){bH.fn[b3]=function(b7,b6){var b5=arguments.length&&(b2||typeof b7!=="boolean"),b4=b2||(b7===true||b6===true?"margin":"border");return bH.access(this,function(b9,b8,ca){var cb;if(bH.isWindow(b9)){return b9.document.documentElement["client"+b0]}if(b9.nodeType===9){cb=b9.documentElement;return Math.max(b9.body["scroll"+b0],cb["scroll"+b0],b9.body["offset"+b0],cb["offset"+b0],cb["client"+b0])}return ca===aC?bH.css(b9,b8,ca,b4):bH.style(b9,b8,ca,b4)},b1,b5?b7:aC,b5,null)}})});a3.jQuery=a3.$=bH;if(typeof define==="function"&&define.amd&&define.amd.jQuery){define("jquery",[],function(){return bH})}function Z(b2){if(!("length" in b2)||b2.length===aC){return false}var b1=b2.length;var b0=bH.type(b2);if(b0==="function"||bH.isWindow(b2)){return false}if(b2.nodeType===1&&b1){return true}return b0==="array"||b1===0||typeof b1==="number"&&b1>0&&(b1-1) in b2&&"length" in b2}})(window);(function(a,c,b){if(typeof define==="function"&&define.amd){define(["jquery"],function(d){b(d,a,c);return d.mobile})}else{b(a.jQuery,a,c)}}(this,document,function(c,b,a,d){(function(C,L,k,r){var K="virtualMouseBindings",g="virtualTouchID",f="vmouseover vmousedown vmousemove vmouseup vclick vmouseout vmousecancel".split(" "),B="clientX clientY pageX pageY screenX screenY".split(" "),H=C.event.mouseHooks?C.event.mouseHooks.props:[],D=C.event.props.concat(H),F={},M=0,x=0,w=0,u=false,P=[],m=false,W=false,z="addEventListener" in k,y=C(k),J=1,S=0,h,Q;C.vmouse={moveDistanceThreshold:10,clickDistanceThreshold:10,resetTimerDuration:1500};function v(i){while(i&&typeof i.originalEvent!=="undefined"){i=i.originalEvent}return i}function n(Y,Z){var ah=Y.type,ai,ag,aa,X,ae,ad,ac,ab,af;Y=C.Event(Y);Y.type=Z;ai=Y.originalEvent;ag=C.event.props;if(ah.search(/^(mouse|click)/)>-1){ag=D}if(ai){for(ac=ag.length,X;ac;){X=ag[--ac];Y[X]=ai[X]}}if(ah.search(/mouse(down|up)|click/)>-1&&!Y.which){Y.which=1}if(ah.search(/^touch/)!==-1){aa=v(ai);ah=aa.touches;ae=aa.changedTouches;ad=(ah&&ah.length)?ah[0]:((ae&&ae.length)?ae[0]:r);if(ad){for(ab=0,af=B.length;ab<af;ab++){X=B[ab];Y[X]=ad[X]}}}return Y}function U(Z){var X={},i,Y;while(Z){i=C.data(Z,K);for(Y in i){if(i[Y]){X[Y]=X.hasVirtualBinding=true}}Z=Z.parentNode}return X}function G(Y,X){var i;while(Y){i=C.data(Y,K);if(i&&(!X||i[X])){return Y}Y=Y.parentNode}return null}function O(){W=false}function p(){W=true}function V(){S=0;P.length=0;m=false;p()}function t(){O()}function A(){E();M=setTimeout(function(){M=0;V()},C.vmouse.resetTimerDuration)}function E(){if(M){clearTimeout(M);M=0}}function s(Y,Z,i){var X;if((i&&i[Y])||(!i&&G(Z.target,Y))){X=n(Z,Y);C(Z.target).trigger(X)}return X}function o(X){var Y=C.data(X.target,g),i;if(!m&&(!S||S!==Y)){i=s("v"+X.type,X);if(i){if(i.isDefaultPrevented()){X.preventDefault()}if(i.isPropagationStopped()){X.stopPropagation()}if(i.isImmediatePropagationStopped()){X.stopImmediatePropagation()}}}}function T(Y){var aa=v(Y).touches,Z,i,X;if(aa&&aa.length===1){Z=Y.target;i=U(Z);if(i.hasVirtualBinding){S=J++;C.data(Z,g,S);E();t();u=false;X=v(Y).touches[0];x=X.pageX;w=X.pageY;s("vmouseover",Y,i);s("vmousedown",Y,i)}}}function N(i){if(W){return}if(!u){s("vmousecancel",i,U(i.target))}u=true;A()}function j(aa){if(W){return}var Y=v(aa).touches[0],X=u,Z=C.vmouse.moveDistanceThreshold,i=U(aa.target);u=u||(Math.abs(Y.pageX-x)>Z||Math.abs(Y.pageY-w)>Z);if(u&&!X){s("vmousecancel",aa,i)}s("vmousemove",aa,i);A()}function l(Z){if(W){return}p();var i=U(Z.target),X,Y;s("vmouseup",Z,i);if(!u){X=s("vclick",Z,i);if(X&&X.isDefaultPrevented()){Y=v(Z).changedTouches[0];P.push({touchID:S,x:Y.clientX,y:Y.clientY});m=true}}s("vmouseout",Z,i);u=false;A()}function I(X){var Y=C.data(X,K),i;if(Y){for(i in Y){if(Y[i]){return true}}}return false}function R(){}function q(i){var X=i.substr(1);return{setup:function(){if(!I(this)){C.data(this,K,{})}var Y=C.data(this,K);Y[i]=true;F[i]=(F[i]||0)+1;if(F[i]===1){y.bind(X,o)}C(this).bind(X,R);if(z){F.touchstart=(F.touchstart||0)+1;if(F.touchstart===1){y.bind("touchstart",T).bind("touchend",l).bind("touchmove",j).bind("scroll",N)}}},teardown:function(){--F[i];if(!F[i]){y.unbind(X,o)}if(z){--F.touchstart;if(!F.touchstart){y.unbind("touchstart",T).unbind("touchmove",j).unbind("touchend",l).unbind("scroll",N)}}var Y=C(this),Z=C.data(this,K);if(Z){Z[i]=false}Y.unbind(X,R);if(!I(this)){Y.removeData(K)}}}}for(Q=0;Q<f.length;Q++){C.event.special[f[Q]]=q(f[Q])}if(z){k.addEventListener("click",function(ab){var Y=P.length,ac=ab.target,ae,ad,af,aa,X,Z;if(Y){ae=ab.clientX;ad=ab.clientY;h=C.vmouse.clickDistanceThreshold;af=ac;while(af){for(aa=0;aa<Y;aa++){X=P[aa];Z=0;if((af===ac&&Math.abs(X.x-ae)<h&&Math.abs(X.y-ad)<h)||C.data(af,g)===X.touchID){ab.preventDefault();ab.stopPropagation();return}}af=af.parentNode}}},true)}})(c,b,a);(function(f){f.mobile={}}(c));(function(g,h){var f={touch:"ontouchend" in a};g.mobile.support=g.mobile.support||{};g.extend(g.support,f);g.extend(g.mobile.support,f)}(c));(function(i,n,f){var g=i(a),j=i.mobile.support.touch,k="touchmove scroll",o=j?"touchstart":"mousedown",m=j?"touchend":"mouseup",h=j?"touchmove":"mousemove";i.each(("touchstart touchmove touchend tap taphold swipe swipeleft swiperight scrollstart scrollstop").split(" "),function(q,p){i.fn[p]=function(r){return r?this.bind(p,r):this.trigger(p)};if(i.attrFn){i.attrFn[p]=true}});function l(t,q,s,p){var r=s.type;s.type=q;if(p){i.event.trigger(s,f,t)}else{i.event.dispatch.call(t,s)}s.type=r}i.event.special.scrollstart={enabled:true,setup:function(){var p=this,s=i(p),r,t;function q(u,v){r=v;l(p,r?"scrollstart":"scrollstop",u)}s.bind(k,function(u){if(!i.event.special.scrollstart.enabled){return}if(!r){q(u,true)}clearTimeout(t);t=setTimeout(function(){q(u,false)},50)})},teardown:function(){i(this).unbind(k)}};i.event.special.tap={tapholdThreshold:750,emitTapOnTaphold:true,setup:function(){var p=this,r=i(p),q=false;r.bind("vmousedown",function(u){q=false;if(u.which&&u.which!==1){return false}var t=u.target,x;function s(){clearTimeout(x)}function w(){s();r.unbind("vclick",v).unbind("vmouseup",s);g.unbind("vmousecancel",w)}function v(y){w();if(!q&&t===y.target){l(p,"tap",y)}else{if(q){y.preventDefault()}}}r.bind("vmouseup",s).bind("vclick",v);g.bind("vmousecancel",w);x=setTimeout(function(){if(!i.event.special.tap.emitTapOnTaphold){q=true}l(p,"taphold",i.Event("taphold",{target:t}))},i.event.special.tap.tapholdThreshold)})},teardown:function(){i(this).unbind("vmousedown").unbind("vclick").unbind("vmouseup");g.unbind("vmousecancel")}};i.event.special.swipe={scrollSupressionThreshold:30,durationThreshold:1000,horizontalDistanceThreshold:30,verticalDistanceThreshold:30,getLocation:function(s){var r=n.pageXOffset,q=n.pageYOffset,p=s.clientX,t=s.clientY;if(s.pageY===0&&Math.floor(t)>Math.floor(s.pageY)||s.pageX===0&&Math.floor(p)>Math.floor(s.pageX)){p=p-r;t=t-q}else{if(t<(s.pageY-q)||p<(s.pageX-r)){p=s.pageX-r;t=s.pageY-q}}return{x:p,y:t}},start:function(q){var r=q.originalEvent.touches?q.originalEvent.touches[0]:q,p=i.event.special.swipe.getLocation(r);return{time:(new Date()).getTime(),coords:[p.x,p.y],origin:i(q.target)}},stop:function(q){var r=q.originalEvent.touches?q.originalEvent.touches[0]:q,p=i.event.special.swipe.getLocation(r);return{time:(new Date()).getTime(),coords:[p.x,p.y]}},handleSwipe:function(t,q,p,r){if(q.time-t.time<i.event.special.swipe.durationThreshold&&Math.abs(t.coords[0]-q.coords[0])>i.event.special.swipe.horizontalDistanceThreshold&&Math.abs(t.coords[1]-q.coords[1])<i.event.special.swipe.verticalDistanceThreshold){var s=t.coords[0]>q.coords[0]?"swipeleft":"swiperight";l(p,"swipe",i.Event("swipe",{target:r,swipestart:t,swipestop:q}),true);l(p,s,i.Event(s,{target:r,swipestart:t,swipestop:q}),true);return true}return false},eventInProgress:false,setup:function(){var r,p=this,s=i(p),q={};r=i.data(this,"mobile-events");if(!r){r={length:0};i.data(this,"mobile-events",r)}r.length++;r.swipe=q;q.start=function(v){if(i.event.special.swipe.eventInProgress){return}i.event.special.swipe.eventInProgress=true;var t,x=i.event.special.swipe.start(v),u=v.target,w=false;q.move=function(y){if(!x||y.isDefaultPrevented()){return}t=i.event.special.swipe.stop(y);if(!w){w=i.event.special.swipe.handleSwipe(x,t,p,u);if(w){i.event.special.swipe.eventInProgress=false}}if(Math.abs(x.coords[0]-t.coords[0])>i.event.special.swipe.scrollSupressionThreshold){y.preventDefault()}};q.stop=function(){w=true;i.event.special.swipe.eventInProgress=false;g.off(h,q.move);q.move=null};g.on(h,q.move).one(m,q.stop)};s.on(o,q.start)},teardown:function(){var q,p;q=i.data(this,"mobile-events");if(q){p=q.swipe;delete q.swipe;q.length--;if(q.length===0){i.removeData(this,"mobile-events")}}if(p){if(p.start){i(this).off(o,p.start)}if(p.move){g.off(h,p.move)}if(p.stop){g.off(m,p.stop)}}}};i.each({scrollstop:"scrollstart",taphold:"tap",swipeleft:"swipe.left",swiperight:"swipe.right"},function(q,p){i.event.special[q]={setup:function(){i(this).bind(p,i.noop)},teardown:function(){i(this).unbind(p)}}})})(c,this)}));var ErrorHandler=new function(){var d=this;var b;var a=true;function c(f){if(!f._errorWrapped){f._errorWrapped=function(){if(a){try{return f.apply(this,arguments)}catch(g){d.notifyError(g)}}else{return f.apply(this,arguments)}}}return f._errorWrapped}this.enableWrappedError=function(){a=true};this.disableWrappedError=function(){a=false};this.isEnabled=function(){return a};this.wrapWithNotify=function(f){if(f){return c(f)}return f};this.setErrorCallback=function(f){b=f};this.setErrorCallback=function(f){b=f};this.activateWindowErrorNotifier=function(f,g){window.onerror=function(l,k,h,j,i){if(f&&!f.apply(this,arguments)){if(g){g(l,k,h,j,i)}return}d.notifyError(i||l)}};this.notifyError=function(f){if(b){b(f)}else{console.error(f)}}}();(function(l,n){var h="3.7.0";var d=l.html5||{};var i=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i;var c=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i;var r;var j="_html5shiv";var a=0;var p={};var f;(function(){try{var u=n.createElement("a");u.innerHTML="<xyz></xyz>";r=("hidden" in u);f=u.childNodes.length==1||(function(){(n.createElement)("a");var w=n.createDocumentFragment();return(typeof w.cloneNode=="undefined"||typeof w.createDocumentFragment=="undefined"||typeof w.createElement=="undefined")}())}catch(v){r=true;f=true}}());function g(u,w){var x=u.createElement("p"),v=u.getElementsByTagName("head")[0]||u.documentElement;x.innerHTML="x<style>"+w+"</style>";return v.insertBefore(x.lastChild,v.firstChild)}function m(){var u=k.elements;return typeof u=="string"?u.split(" "):u}function q(u){var v=p[u[j]];if(!v){v={};a++;u[j]=a;p[a]=v}return v}function o(x,u,w){if(!u){u=n}if(f){return u.createElement(x)}if(!w){w=q(u)}var v;if(w.cache[x]){v=w.cache[x].cloneNode()}else{if(c.test(x)){v=(w.cache[x]=w.createElem(x)).cloneNode()}else{v=w.createElem(x)}}return v.canHaveChildren&&!i.test(x)&&!v.tagUrn?w.frag.appendChild(v):v}function s(w,y){if(!w){w=n}if(f){return w.createDocumentFragment()}y=y||q(w);var z=y.frag.cloneNode(),x=0,v=m(),u=v.length;for(;x<u;x++){z.createElement(v[x])}return z}function t(u,v){if(!v.cache){v.cache={};v.createElem=u.createElement;v.createFrag=u.createDocumentFragment;v.frag=v.createFrag()}u.createElement=function(w){if(!k.shivMethods){return v.createElem(w)}return o(w,u,v)};u.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+m().join().replace(/[\w\-]+/g,function(w){v.createElem(w);v.frag.createElement(w);return'c("'+w+'")'})+");return n}")(k,v.frag)}function b(u){if(!u){u=n}var v=q(u);if(k.shivCSS&&!r&&!v.hasCSS){v.hasCSS=!!g(u,"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}")}if(!f){t(u,v)}return u}var k={elements:d.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video",version:h,shivCSS:(d.shivCSS!==false),supportsUnknownElements:f,shivMethods:(d.shivMethods!==false),type:"default",shivDocument:b,createElement:o,createDocumentFragment:s};l.html5=k;b(n)}(this,document));if(typeof JSON==="undefined"){var JSON={};(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==="string"){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}())}(function(){window.SimpleEventBinding=function(a,b){this.bindingName=a;this.event=b};(function(b,a){a.unbind=function(){this.event.unbind(this.bindingName)};a.addToCollection=function(c){c.add(this)}})(SimpleEventBinding,SimpleEventBinding.prototype)})();(function(){var b=0;var a=1;window.SimpleEventObj=function(d,c){b++;this.id=b;this.controllerType=SimpleEvent;this.callbacks={};this.options=c;this.defaultEventSource=d;this.wasFired=false};(function(d,c){c.bind=function(h,f){var g=this;if(f===undefined){f=a;a++}return g.namedBind(f,h)};c.bindAndExecute=function(h,g){var f=this.bind(h,g);h();return f};c.one=function(h){var g=this;var f=g.bind(function(){g.unbind(f);h.apply(this,arguments)});return f};c.bindUntil=function(h,i){var g=this;var f=g.bind(i);SimpleEvent.one(h,function(){f.unbind()});return f};c.namedBind=function(g,i){var h=this;var f=this.options;g=""+g;if(f&&f.setUp&&$.isEmptyObject(h.callbacks)){f.setUp()}h.callbacks[g]=i;return new SimpleEventBinding(g,h)};c.hasNameBinding=function(f){var g=this;return !!g.callbacks[f]};c.fire=function(f){this.fireWithArgs(f,$.restArguments(arguments,1))};c.fireWithArgs=function(f,m){var i=this;var o=i.options;var j=i.callbacks;if(!$.isEmptyObject(j)){f=$.valueOrDefault(f,i.defaultEventSource);if(o){var n=o.beforeFireEvent;if(n){n()}}var l=$.quickExtend({},j);for(var h in l){if(j[h]){var k=l[h].apply(f,m);if(k===true||k===SimpleEvent.Unbind){i.unbind(h)}}}if(o){var g=o.afterFireEvent;if(g){g()}}}i.wasFired=true};c.unbind=function(h){var i=this;var f=this.options;if(h!==undefined){if(typeof h==="object"){h.unbind()}else{var g=i.callbacks;if(g[h]){delete g[h];if(f&&f.tearUp&&$.isEmptyObject(g)){f.tearUp()}}}}}})(SimpleEventObj,SimpleEventObj.prototype)})();var SimpleEvent=new function(){this.Unbind={};this.create=function(b,a){return new SimpleEventObj(b,a)};this.createNamedEvents=function(b){var a={defaultEventSource:b,eventsMap:{},callbacksMap:{},fire:function(c,g){var f=a.eventsMap[c];if(f!==undefined){var d=$.restArguments(arguments,1);g=$.valueOrDefault(g,a.defaultEventSource);f.fire.apply(f,d)}},bind:function(c,i,f){var g=a.eventsMap[c];if(g===undefined){g=SimpleEvent.create();a.eventsMap[c]=g}var h=g.bind(i,f);f=h.bindingName;a.callbacksMap[h.bindingName]=g;var d={bindingName:f,unbind:function(){a.unbind(f)}};return d},one:function(c,f){var d=a.bind(c,function(){f();d.unbind()})},unbind:function(d){if(d&&d.bindingName){d=d.bindingName}var c=a.callbacksMap[d];if(c!==undefined){c.unbind(d);delete a.callbacksMap[d]}},bindAndExecute:function(c,g,f){var d=a.bind(c,g,f);g();return d}};return a};this.createEventListenersGroup=function(){var b=[];var a={};a=$.extend(a,{add:function(c){b.push(c)},clear:function(){a.deactivateAll();b=[]},activateAll:function(){for(var c=0;c<b.length;c++){b[c].activate()}},activateAndExecuteAll:function(){for(var c=0;c<b.length;c++){b[c].activateAndExecute()}},deactivateAll:function(){for(var c=0;c<b.length;c++){b[c].deactivate()}},disposeAll:function(){for(var c=0;c<b.length;c++){b[c].dispose()}}});return a};this.createEventBinding=function(f,g){var b;var d;var a={};f=$.makeArray(f);var c=false;$.extend(a,{setEventSource:function(i,h){a.removeCurrentSource();if(i){d=i;b=SimpleEvent.createEventListener($.map(f,function(j){if($.isFunction(j)){return j(i)}else{return i[j]}}),g);if(c){b.activate();if(h){g()}}}return a},getEventSource:function(){return d},removeCurrentSource:function(){if(b){b.deactivate()}b=undefined;d=undefined},activate:function(){c=true;if(b){b.activate()}},activateAndExecute:function(){c=true;if(b){b.activate();g()}},deactivate:function(){c=false;if(b){b.deactivate()}}});return a};this.createEventObserver=function(g,h,f){var a={};var d=SimpleEvent.createEventListenersGroup();var c=false;g=$.makeArray(g);$.each(g,function(j,l){var k=l;if(k.controllerType!==SimpleEvent){k=l.event}d.add(SimpleEvent.createEventListener(k,function(){c=true}))});var b=SimpleEvent.createEventListener(g,h,f).activate();$.extend(a,{postponeEvents:function(){b.deactivate();d.activateAll()},unPostponeEvents:function(){d.deactivateAll();b.activate();if(c){h();c=false}},dispose:function(){b.dispose();d.disposeAll()}});return a};this.createEventListener=function(f,g,d){d=$.extend({activationCallback:$.noop,deactivationCallback:$.noop},d);var b={};f=$.makeArray(f);var a=undefined;var c=false;$.extend(b,{activate:function(){if(c){throw new Error("Trying activate a disposed event listener")}if(!a){d.activationCallback();a=SimpleEvent.createBindingsCollection();for(var h=0;h<f.length;h++){var j=f[h];if(j.controllerType===SimpleEvent){a.add(j.bind(g))}else{a.add(j.event.bind(j.name,g))}}}return b},activateAndExecute:function(){if(!a){b.activate();g()}return b},dispose:function(){b.deactivate();c=true},deactivate:function(){if(a){a.unbindAll();a=undefined;d.deactivationCallback()}},toggleActivation:function(i,h){h=$.valueOrDefault(h,false);if(i){if(h){b.activateAndExecute()}else{b.activate()}}else{b.deactivate()}},addToGroup:function(h){h.add(b);return b}});return b};this.createEventListenerBarrier=function(b,d,a){a=$.extend({timeout:400},a);var c;return SimpleEvent.createEventListener(b,function(){if(c){clearTimeout(c)}c=setTimeout(function(){d()},a.timeout)})};this.createEventListenerForBinding=function(d,g,c){var b=SimpleEvent.createEventListener(d,g,c);d=$.makeArray(d);var a=undefined;var f=b.activate;$.extend(b,{activate:function(){if(!a){f()}},activateAndExecute:function(){b.activate()}});return b};this.createBindingsCollection=function(){var b=[];var a={add:function(c){b.push(c)},unbindAll:function(){for(var c=0;c<b.length;c++){b[c].unbind()}b=[]}};return a};this.bind=function(a,k,g){a=$.makeArray(a);var c=[];for(var h=0;h<a.length;h++){var b;var d=a[h];if(d.controllerType===SimpleEvent){b=d.bind(k,g)}else{var f=d.event;var j=d.name;if(!f||!j){throw new Error("Bad event selector.")}b=f.bind(j,k,g)}c.push({bindingID:b,eventSelector:d})}return c};this.waitForAll=function(b,d,a){b=$.makeArray(b);if(b.length===0){d();return}var c={};$.each(b,function(j,m){var h;var l=$.uniqueID();if(m.controllerType===SimpleEvent){h=m.bind(k,a)}else{var f=m.event;var g=m.name;if(!f||!g){throw new Error("Bad event selector.")}h=f.bind(g,k,a)}c[l]=true;function k(){h.unbind();delete c[l];if($.isEmptyObject(c)){d()}}})};this.bindAndExecute=function(b,d,a){var c=SimpleEvent.bind(b,d,a);d();return c};this.afterAllFired=function(a,c){var b={};$.each(a,function(d,f){b[d]=true;f.one(function(){delete b[d];if($.isEmptyObject(b)){c()}})})};this.unbind=function(h){if(!h){return}for(var c=0;c<h.length;c++){var g=h[c];var d=g.bindingID;var f=g.eventSelector;if(f.controllerType===SimpleEvent){f.unbind(d)}else{var a=f.namedEvents;var b=f.eventName;if(!a||!b){throw new Error("Bad event selector.")}a.unbind(d)}}};this.one=function(a,c){var b=SimpleEvent.bind(a,function(){c.apply(this,arguments);SimpleEvent.unbind(b)});return b}}();(function(c){var a=0;var j=0;var b={};var f=[];var g=0;var h=true;var i=undefined;c.identity=function(k){return k};c.toCamelCase=function(l,k){k=(k!==undefined)?k:false;l=l.replace(/-\w/g,function(m){return m[1].toUpperCase()});if(k){l=l.charAt(0).toUpperCase()+l.slice(1)}return l};c.getRootWindow=function(){if(window.parent){return window.parent}else{return window}};c.getRootDocument=function(){var l=document;try{l=c.getRootWindow().document}catch(k){}return c(l)};c.getGlobalEventBindingsTarget=function(){var l=c.getRootDocument();var k=c(document);if(!k.is(l)){k.pushElements(l)}return k};c.fn.onceAny=function(m,n){var k=c(this);var l=c.weakID(".b");m=c.map(c.trim(m).replace(/\s+/g," ").split(" "),function(o){return o+l}).join(" ");k.on(m,function(o){k.off(l);return n(o)});return this};c.repeatWithInterval=function(p,r,s){s=c.extend({stepCallback:c.noop,completeCallback:c.noop,abortCallback:c.noop,finishCallback:c.noop},s);var l=s.stepCallback;var q=s.completeCallback;var n=s.abortCallback;var t=s.finishCallback;var o=p;var m=false;var k=setInterval(function(){o--;l(o);if(o===0){clearInterval(k);q();t();m=true}},r);return{abort:function(){if(!m){clearInterval(k);n();t();m=true}}}};c.performLoop=function(n,m,l){for(var k=n;k<=m;k++){l(k,n,m)}};c.tryParseJSON=function(l){try{return JSON.parse(l)}catch(k){return undefined}};c.activationFunction=function(k){k.activate()};c.noopWithCallback=function(k){k()};c.contextIdentity=function(){return this};c.evaluateDeferrableValue=function(k){if(c.isFunction(k)){return k()}else{return k}};c.oppositeFunction=function(k){return function(){return !k.apply(this,arguments)}};c.undefinedFunction=function(k){return k===undefined};c.undefinedOrNullFunction=function(k){return k===undefined||k===null};c.returnTrue=function(){return true};c.returnFalse=function(){return false};c.returnNull=function(){return null};c.returnUndefined=function(){return undefined};c.returnZero=function(){return 0};c.returnOne=function(){return 1};c.returnTransparent=function(){return"transparent"};c.returnEmptyBorderObject=function(){return{top:0,left:0,bottom:0,right:0}};c.returnEmptyRoundnessObject=function(){return{topLeft:0,bottomLeft:0,topRight:0,bottomRight:0}};c.returnBlackBorderObject=function(){return c.convertValueToObject("Black",["top","left","bottom","right"])};c.returnEmptyString=function(){return""};c.returnEmptyObject=function(){return{}};c.returnEmptyArray=function(){return[]};c.returnValue=function(k){return k};c.returnFixedValue=function(k){return function(){return k}};c.defaultIdFunction=function(k){return k.id};c.defaultIndexFunction=function(k){return k.index};c.defaultNameFunction=function(k){return k.name};c.defaultOffset=function(){return{left:0,top:0}};c.defaultSize=function(){return{width:0,height:0}};c.buildArray=function(m,n){var k=[];for(var l=0;l<m;l++){k.push(n(l))}return k};c.quickArgsProxy=function(l,m,k){return function(){return l.apply(m,k)}};c.quickProxy=function(k,l){return function(){return k.apply(l,arguments)}};c.quickExtend=function(n,m){var k;var l;for(k in m){l=m[k];if(l!==undefined){n[k]=l}}return n};c.getSign=function(l,k){if(l<0){return -1}else{if(l>0){return 1}else{return c.valueOrDefault(k,0)}}};c.parseFontFamilyFromStyleValue=function(l){var k=/^['"]?([^'"]+)['"]?$/i.exec(l);if(k){return k[1]}else{return undefined}};c.readWrite=function(k,l,m){var n=[];c.each(k,function(p,q){var o=l(q);n.push({item:q,result:o})});c.each(n,function(p,o){m(o.item,o.result)})};c.fn.findUsedClasses=function(l){var k=c.map(l,function(n){return"."+n}).join(",");var m={};this.find(k).each(function(){var o=this.className.split(/\s+/);for(var n=0;n<o.length;n++){m[o[n]]=true}});return c.grep(l,function(n){return !!m[n]})};c.fn.findUsedInlineStyles=function(k){var l={};this.find("[style]").each(function(){var m=c(this).prop("style")[c.camelCase(k)];if(!!m){l[""+m]=true}});return c.getKeys(l)};c.fn.onPartHover=function(l,k,m){this.on("mouseenter",l,k).on("mouseleave",l,m)};c.fn.quickHide=function(){return this.addClass("state-hidden")};c.fn.quickShow=function(){return this.removeClass("state-hidden")};c.fn.quickToggle=function(l,m){var k=this;l=c.valueOrCalculate(l,function(){return k.hasClass("state-hidden")});if(l){k.quickShow()}else{k.quickHide()}if(l&&m){m()}return k};c.fn.chooseClass=function(k,l,m){return this.toggleClass(l,k).toggleClass(m,!k)};c.fn.quickDisable=function(){return this.removeClass("state-enabled").addClass("state-disabled")};c.fn.quickEnable=function(){return this.removeClass("state-disabled").addClass("state-enabled")};c.fn.quickToggleEnabled=function(k){if(k){this.quickEnable()}else{this.quickDisable()}return this};c.fn.selectInStructure=function(k){if(this.is(k)){return this}return c(k,this)};c.fn.hasInlineStyle=function(k){return !!this.prop("style")[c.camelCase(k)]};c.fn.getInlineStyleText=function(n){if(this.hasInlineStyle(n)){var l=this[0].style.cssText;var m=new RegExp(n+"\\s*:\\s*([^;]*)\\s*;");var k=m.exec(l);if(k===null){return undefined}else{return c.trim(k[1])}}else{return undefined}};c.fn.caret=function(){var m=c.browser.msie;var k,o,p;if(m){var n=document.selection;if(this[0].tagName.toLowerCase()!="textarea"){var q=this.val();k=n.createRange().duplicate();k.moveEnd("character",q.length);o=(k.text==""?q.length:q.lastIndexOf(k.text));k=n.createRange().duplicate();k.moveStart("character",-q.length);p=k.text.length}else{k=n.createRange();var l=k.duplicate();l.moveToElementText(this[0]);l.setEndPoint("EndToEnd",k);o=l.text.length-k.text.length;p=o+k.text.length}}else{o=this[0].selectionStart;p=this[0].selectionEnd}return{start:o,end:p}};c.normalizeToRange=function(k,m,l){return Math.max(m,Math.min(l,k))};c.isBetween=function(k,m,l){if(k===undefined){return false}return k>=m&&k<=l};c.joinPaths=function(l,k){if(l.lastIndexOf("/")===l.length-1){l=l.substr(0,l.length-1)}if(k.indexOf("/")===0){k=k.substr(1,l.length-1)}return l+"/"+k};c.parseDotNetDate=function(l,o){var n=/-?\d+/;var k=n.exec(l);var l=new Date(parseInt(k[0]));if(o){return c.formatDate(l)}else{return l}};c.assertRange=function(k,m,l){if(k<m||k>l){throw new Error("Value should be in range [{0},{1}]".format(m,l))}};c.formatDate=function(k){return"{0}-{1}-{2} {3}:{4}".format(c.getFixedLengthInteger(k.getDate(),2),c.getFixedLengthInteger(k.getMonth(),2),c.getFixedLengthInteger((""+k.getFullYear()).substring(2),2),c.getFixedLengthInteger(k.getHours(),2),c.getFixedLengthInteger(k.getMinutes(),2))};c.getFixedLengthInteger=function(l,n){var o=""+l;var k=[];for(var m=0;m<n-o.length;m++){k.push("0")}return k.join("")+o};c.wrapMethod=function(l,k){return k(l)};c.hookBeforeMethod=function(l,k){return function(){k.apply(this,arguments);if(l){l.apply(this,arguments)}}};c.hookAfterMethod=function(l,k){return function(){if(l){l.apply(this,arguments)}k.apply(this,arguments)}};c.arrayFuncToJquery=function(k){return function(){return c(k.apply(this,arguments))}};c.getQueryStringParams=function(){return c.parseQueryString(window.location.search.substring(1))};c.generateQueryString=function(k){var l=[];c.each(k,function(m,n){if(n!==undefined){l.push(m+"="+n)}});return l.join("&")};c.parseQueryString=function(l){if(!l){l=""}if(l.charAt(0)==="#"){l=l.substr(1)}if(l.charAt(0)==="!"){l=l.substr(1)}var k={};l.replace(new RegExp("([^?=&]+)(=([^&]*))?","g"),function(n,m,p,o){k[m]=o});return k};c.valueOrDefaultArray=function(m,l){if(m===null||m===undefined){for(var k=0;k<l.length;k++){var n=l[k];if(n!==null&&n!==undefined){return n}}}return m};c.valueOrDefault=function(l,k){if(l===null||l===undefined){return k}return l};c.fieldValueOrDefault=function(n,m,k){var l=undefined;if(n!==undefined){l=n[m]}return c.valueOrDefault(l,k)};c.executeIfValue=function(k,m,l){if(k!==null&&k!==undefined){m(k,l)}};c.valueOrCalculate=function(l,k){if(l===null||l===undefined){return k()}return l};c.isValue=function(k){return k!==null&&k!==undefined};c.NaNOrDefault=function(l,k){if(isNaN(l)){return k}return l};c.restArguments=function(l,k){if(l.length>k){var n=[];for(var m=k;m<l.length;m++){n.push(l[m])}return n}else{return[]}};c.weakID=function(l){l=c.valueOrDefault(l,"weak");var k=b[l];if(k===undefined){k=0}b[l]=k+1;return l+k};c.createWeakIdGenerator=function(){var k=-1;return{next:function(){k++;return"id"+k}}};c.getIndexClasses=function(k,l){var m=[];if(k===0){m.push("first")}else{m.push("not-first")}if(k===l){m.push("last")}else{m.push("not-last")}if(k%2===0){m.push("even")}else{m.push("odd")}return m.join(" ")};c.fn.applyIndexesClasses=function(){var k=this.length-1;return this.each(function(l){c(this).removeClass("first not-first last not-last even odd").addClass(c.getIndexClasses(l,k))})};c.createRange=function(o,n,m){var k=[];for(var l=o;l<=n;l++){k.push(l)}if(m){return c.map(k,m)}return k};c.uniqueID=function(){a++;return c.now()+a};c.fn.assignElementID=function(){var k=c(this).attr("id");if(!k){k=c.uniqueID();c(this).attr("id",k)}return k};c.filterKeys=function(l,k){return c.map(l,function(m){return m[k]})};c.beginInvoke=function(k){window.setTimeout(k,0)};c.fn.hasAncestor=function(k){return c(this).closest(k).length>0};c.fn.findAndSelf=function(k){return this.filter(k).add(this.find(k))};c.fn.onTextInputTriggered=function(k){return this.bind("input change",function(){k()})};c.unite=function(){var n=[];for(var l=0;l<arguments.length;l++){var m=c(arguments[l]);for(var k=0;k<m.length;k++){n.push(m[k])}}return c(n)};c.uniteArrays=function(){var m=[];for(var l=0;l<arguments.length;l++){var n=arguments[l];for(var k=0;k<n.length;k++){m.push(n[k])}}return m};c.quickIntersect=function(n,l){var m=[];var k;var u={};for(var q=0;q<n.length;q++){var o=n[q];for(var p=0;p<o.length;p++){var t;var r=o[p];if(l){t=l(r)}else{t=r}k=u[t];if(k===undefined){k={item:r,count:1};u[t]=k}else{k.count++}}}for(var s in u){k=u[s];if(k.count===n.length){m.push(k.item)}}return m};c.adjustFraction=function(l,n){var k=Math.pow(10,n);var m=Math.pow(10,1);return Math.floor(l*(m*k)/m)/k};c.calculateMeanValue=function(p,o,q,m,l){var n=l-m;var k=(p-o)/(q-o);return(n*k)+m};c.fn.pushElements=function(k,m){if(k===undefined){return this}var n=c(k,m);for(var l=0;l<n.length;l++){this.push(n[l])}return this};c.fn.pushToElementsCollection=function(k){k.pushElements(this);return this};c.fn.splice=[].splice;c.fn.preventBrowserBehaviour=function(k){k=c.valueOrDefault(k,c.returnTrue);var m=this;var l={};var n=true;var o=c.uniqueID();m.bind("mousedown."+o,function(p){var q=p.target;if(n&&!c(q).is("html")&&!c(q).is(":input")&&k(q)){c.preventBrowserBehaviourCallback(p);m.bind("mousemove.preventBrowser",c.preventBrowserBehaviourCallback);c(document).one("mouseup",function(){m.unbind(".preventBrowser")})}});c.extend(l,{toggleEnable:function(p){n=p},clear:function(){m.unbind("mousedown."+o)}});return l};c.preventBrowserBehaviourCallback=function(k){if(k.preventDefault){k.preventDefault()}else{k.returnValue=false}};c.sameElements=function(l,k){if(l===undefined||k===undefined){return l===k}return l[0]===k[0]};c.addAjaxErrorHandler=function(k){if(k===undefined){k=function(m,n,l){return false}}f.push(k)};c.handleAjaxError=function(m,p,k){var n=false;for(var l=0;l<f.length&&!n;l++){var o=f[l];n=o(m,p,function(){k(m)})}if(!n){k(m)}};c.fn.makeUnselectable=function(){if(c.browser.msie||c.browser.opera){this.find(":not(:input)").andSelf().each(function(){this.unselectable="on"})}};c.fn.markLastChild=function(k){c(this).children().last().addClass(k);return this};c.fn.markFirstChild=function(k){c(this).children().first().addClass(k);return this};c.getScreenSize=function(){var l=1024;var k=768;try{l=c.valueOrDefault(screen.availWidth,1024);k=c.valueOrDefault(screen.availHeight,768)}catch(m){}return{width:l,height:k}};c.validateHtmlTag=function(k){if((/^[a-zA-Z][a-zA-Z0-9]*$/.test(k))){return true}return false};c.setAjaxDelay=function(k){g=k};c.toggleAjaxAvailable=function(l,k){h=l;i=k};c.setAjaxOptions=function(l,k){g=l;h=k};c.removeDotNetType=function(k){return function(l){c.each(l,function(m,n){delete n.__type});k(l)}};c.registerDefinitions=function(m,l,k){k=c.valueOrDefault(k,"name");m=c.valueOrDefault(m,{});c.each(l,function(n,o){o=c.extend({},o);o[k]=n;m[n]=o});return m};c.extendDefinitions=function(l,k){l=c.valueOrDefault(l,{});c.each(k,function(m,n){n=c.extend({},n);l[m]=c.extend({},l[m],n)});return l};var d={link:true,meta:true};c.getLocationOrigin=function(){return window.location.protocol+"//"+window.location.host};c.addHtmlCodeToTheHead=function(m){var k=[];var l=document.getElementsByTagName("head")[0];var n=document.createElement("div");var p=document.createElement("div");n.innerHTML=m;var o;while((o=n.firstChild)){if(o.tagName&&d[o.tagName.toLowerCase()]===true){l.appendChild(o);k.push(o)}else{p.appendChild(o)}}return k};c.isJQueryObject=function(k){return k&&k instanceof c};c.isHtmlCodeToTheHeadValid=function(k){var l=document.createElement("div");var n=document.createElement("div");l.innerHTML=k.trim(" ");var m;while((m=l.firstChild)){if((!m.tagName&&/[^\s]/.test(m.textContent))||(m.tagName&&d[m.tagName.toLowerCase()]!==true)){return false}else{n.appendChild(m)}}return true};c.addStyle=function(l){var k=document.createElement("style");k.type="text/css";document.getElementsByTagName("head")[0].appendChild(k);var m=document.createTextNode(l);if(k.styleSheet){k.styleSheet.cssText=m.nodeValue}else{k.innerHTML="";k.appendChild(m)}return c(k)};c.ajaxJason=function(t,k,q,n,s,r){s=c.valueOrDefault(s,c.noop);var u=c.merge([],arguments);var m=this;if(g){var w;var o=window.setTimeout(function(){w=l()},g);return{abort:function(){if(w){w.abort()}else{window.clearTimeout(o)}}}}else{return l()}var v={};function l(){if(!h){s(Exception.create(Exceptions.UnknownError,c.valueOrDefault(i,"Server Not Available")));return{abort:c.noop}}var x=c.ajax({type:"POST",contentType:"application/json; charset=utf-8",url:t+"/"+k,data:JSON.stringify(q),dataType:"json"});v=c.Deferred();x.done(ErrorHandler.wrapWithNotify(function(y){if(c.isPlainObject(y)&&y.__protocol__=="asynchronous"&&y.progress!==100){r(y.progress);v.notify(y.progress);p(y)}else{if(n){var y=(c.isPlainObject(y)&&y.d!==undefined)?y.d:y;n(y);v.resolve(y)}else{v.resolve(y)}}})).fail(ErrorHandler.wrapWithNotify(function(y){var z;try{z=JSON.parse(y.responseText)}catch(A){}if(!z){z=Exception.create(Exceptions.UnknownError,y)}c.handleAjaxError(z,function(){c.ajaxJason.apply(m,u)},s);v.reject(y)}));return v.promise()}function p(x){setTimeout(function(){c.ajax({type:"POST",contentType:"application/json; charset=utf-8",url:"/"+x.services+"/"+x.action,data:JSON.stringify({id:x.id}),dataType:"json",success:ErrorHandler.wrapWithNotify(function(y){r(y.progress);if(y.progress>0&&y.progress<100){v.notify(y.progress);p(y)}else{if(y.progress==100){v.notify(y.progress);setTimeout(function(){n(y);v.resolve(y)},1000)}else{v.reject(y.response);s(y)}}})})},1000)}};c.getFieldOrFunctionValue=function(l,k){if(l&&k){if(c.isFunction(k)){return k(l)}else{return l[k]}}return undefined};c.evaluateWhenFunction=function(k){if(!k){return k}if(c.isFunction(k)){return k.apply(this,c.restArguments(arguments,1))}return k};c.use=function(){var l=arguments.length;if(l>=2){var m=arguments[l-1];for(var k=0;k<l-1;k++){m(arguments[k])}}};c.duplicateArray=function(k){var l=[],m=0,n=k.length;for(;m<n;m++){l.push(k[m])}return l};c.modulo=function(m,l){if(m>=l){return m%l}if(m<0){var k=m%l;return l+k}return m};c.divideNoReminder=function(k,m){var l=k/m;return l>0?Math.floor(l):Math.ceil(l)};c.generateHashURL=function(l,k){var m=[];c.each(k,function(n,o){if(o||o==""){m.push(n+"="+o)}});return l+"#!"+m.join("&")};c.isPrintableChar=function(k){return(k>47&&k<58)||k==32||k==13||(k>64&&k<91)||(k>95&&k<112)||(k>185&&k<193)||(k>218&&k<223)};c.whenResults=function(k){return c.when.apply(this,k)};c.createPolling=function(n,l){l=c.valueOrDefault(l,0);var k={isActive:false};var m=function(){k.timeoutID=setTimeout(function(){n.call(k);if(k.isActive){m()}},k.interval)};return c.extend(k,{setDefaultInterval:function(o){l=c.valueOrDefault(o,0)},start:function(o){k.isActive=true;k.interval=c.valueOrDefault(o,l);m();return k},stop:function(){k.isActive=false;clearTimeout(k.timeoutID);return k},poll:function(){if(k.isActive){n.call(k);clearTimeout(k.timeoutID);m()}}})}})(jQuery);(function(b){var a;b.downloadFile=function(c){if(!a){a=document.createElement("iframe");a.style.display="none";document.body.appendChild(a)}a.src=c}})(jQuery);(function(b){var c=document.createElement("div"),a=c.style;a.cssText="pointer-events:auto";b.support.cssLayerForwarding=(!b.browser.msie||parseInt(b.browser.version)>10)&&a.pointerEvents==="auto";b.support.layerForwarding=b.support.cssLayerForwarding||(document.elementFromPoint!==undefined);b.fn.toggleLayerEventsCatching=function(d){this.toggleClass("catchLayerEvents",d)};b.fn.toggleLayerEventsForwarding=function(g,f){f=b.extend({supportedEvents:["click","mousedown","mouseup"]},f);if(b.support.layerForwarding){if(b.support.cssLayerForwarding){this.toggleClass("forwardLayerEvents",g)}else{var d=this;if(!g){this.unbind(".layerEvents")}else{b.each(f.supportedEvents,function(j,h){d.bind(h+".layerEvents",function(k){if(!b(k.target).hasAncestor(".catchLayerEvents",true)){var l=b.getMouseOffset(k);d.addClass("testLayerForwarding");var i=document.elementFromPoint(l.left,l.top);d.removeClass("testLayerForwarding");b(i).trigger(b.extend({},k,{target:i}));k.stopPropagation()}})})}}}return this}})(jQuery);(function(b){var a;b.downloadFile=function(c){if(!a){a=document.createElement("iframe");a.style.display="none";document.body.appendChild(a)}a.src=c}})(jQuery);var DeferredObject=new function(){this.create=function(a){var b=undefined;var c=false;return{isDeferredObject:true,get:function(){if(c){return b}else{b=a();c=true;return b}}}}}();var Initializer=new function(){this.create=function(b){var a=false;return{execute:function(){if(!a){a=true;b.apply(this,arguments)}}}}}();var CachedObject=new function(){this.create=function(a){var c=undefined;var b={get:function(d){if(c===undefined){c=a()}if(d!==undefined){return c[d]}return c},invalidate:function(){c=undefined}};return b}}();var FlagsObserverStates={AllTrue:1,AllFalse:2,SomeTrue:3,SomeFalse:4,AllTrueNonEmpty:5,AllFalseNonEmpty:6};var ConditionalFlagsTypes={ConditionalPositive:1,ConditionalNegative:2};(function(){window.BasicObservableFlag=function(f,g){this.currentValue=f;d(this,g)};(function(g,f){f.getValue=function(){return this.currentValue};f.setValue=function(h){if(this.currentValue!==h){this.currentValue=h;this.notifyValueChanged(h)}};f.toggle=function(h){if(h===undefined){this.setValue(!this.getValue())}else{this.setValue(h)}};b(f)})(BasicObservableFlag,BasicObservableFlag.prototype);window.ConditionalObservableFlag=function(g,f){this.currentValue=g?true:false;this.conditions={};this.isConditionalPositive=g;d(this,f)};(function(g,f){f.resetConditions=function(h,i){this.conditions={};var j=this.currentValue!==this.isConditionalPositive;this.currentValue=this.isConditionalPositive;if(h&&j){i=$.valueOrDefault(i,"Reset");this.notifyValueChanged(this.isConditionalPositive,i)}};f.getValue=function(){return this.currentValue};f.setValue=function(j,k){var h=this;k=$.valueOrDefault(k,"Default");if(j){if(h.isConditionalPositive){delete h.conditions[k]}else{h.conditions[k]=true}}else{if(!h.isConditionalPositive){delete h.conditions[k]}else{h.conditions[k]=true}}var i;if($.isEmptyObject(h.conditions)){i=h.isConditionalPositive}else{i=!h.isConditionalPositive}if(h.currentValue!==i){h.currentValue=i;h.notifyValueChanged(i,k)}};b(f)})(ConditionalObservableFlag,ConditionalObservableFlag.prototype);window.FlagsObserver=function(f){f=$.extend({stateChangeCallback:$.noop,observedFlags:undefined},f);var g=$.uniqueID();this.options=f;this.observedFlagsInfo=[];this.setFlags={};this.notSetFlags={};this.allSet;this.allNotSet;this.id=g;this.name="FlagsObs"+g,this.valueChangedEvent=SimpleEvent.create();if(f.observedFlags!==undefined){this.setObservedFlags(f.observedFlags)}};(function(g,f){f.setObservedFlags=function(o){var l=this;var m,k,j,n;for(m=0;m<l.observedFlagsInfo.length;m++){k=l.observedFlagsInfo[m];j=k.observableFlag;n=k.bindingID;j.valueChangedEvent.unbind(n)}l.observedFlagsInfo=[];l.setFlags={};l.notSetFlags={};$.each(o,function(q,p){if(p.isTrue()){l.setFlags[p.id]=true}else{l.notSetFlags[p.id]=true}l.observedFlagsInfo.push({observableFlag:p,bindingID:p.valueChangedEvent.bind(function(i){if(i){delete l.notSetFlags[p.id];l.setFlags[p.id]=true}else{delete l.setFlags[p.id];l.notSetFlags[p.id]=true}h(l)})})});h(l)};f.allSet=function(){return this.allSet};f.allTrue=function(){return this.allSet};f.allFalse=function(){return this.allNotSet};f.someTrue=function(){return !this.allNotSet};f.someFalse=function(){return !this.allSet};f.someOfValue=function(i){return i?this.someTrue():this.someFalse()};f.allOfValue=function(i){return i?this.allTrue():this.allFalse()};f.hasSetFlags=function(){return !this.allNotSet};f.allNotSet=function(){return this.allNotSet};f.isValue=function(i){switch(i){case FlagsObserverStates.AllTrue:return this.allTrue();case FlagsObserverStates.AllFalse:return this.allFalse();case FlagsObserverStates.SomeFalse:return this.someFalse();case FlagsObserverStates.SomeTrue:return this.someTrue();case FlagsObserverStates.AllTrueNonEmpty:return this.allTrue()&&this.observedFlagsInfo.length>0;case FlagsObserverStates.AllFalseNonEmpty:return this.allFalse()&&this.observedFlagsInfo.length>0}};f.setValue=function(l,m){var j=this.observedFlagsInfo;for(var k=0;k<j.length;k++){j[k].observableFlag.setValue(l,m)}};c(f,FlagsObserverStates.AllTrue);a(f);function h(i){var j=$.isEmptyObject(i.notSetFlags);var k=$.isEmptyObject(i.setFlags);if(i.allSet!==j||i.allNotSet!==k){i.allNotSet=k;i.allSet=j;i.valueChangedEvent.fire(i);i.options.stateChangeCallback.call(i)}}})(FlagsObserver,FlagsObserver.prototype);function d(f,g){g=$.extend({valueChangeCallback:$.noop},g);var i=$.uniqueID();var h="Flag"+i;f.id=i;f.name=h;f.valueChangedEvent=SimpleEvent.create();f.afterValueChangedEvent=SimpleEvent.create();f.options=g}function b(f){f.notifyValueChanged=function(j,k){var i=this;i.valueChangedEvent.fire(i,j,k);i.options.valueChangeCallback(j,k);i.afterValueChangedEvent.fire(i,j,k)};f.set=g;f.reset=h;f.setTrue=g;f.setFalse=h;f.isTrue=function(){return this.getValue()===true};f.isFalse=function(){return !this.isTrue()};f.isValue=function(i){return this.getValue()===i};f.bindToFlag=function(i,k){k=$.extend({when:true,set:true},k);var j=this;i.valueChangedEvent.bindAndExecute(function(){j.setValue(i.getValue()===k.when?k.set:!k.set,i.id)});return j};f.bindToFlagsObserver=function(k,j){j=$.extend({when:FlagsStates.AllTrue,set:true},j);var i=this;k.valueChangedEvent.bindAndExecute(function(){i.setValue(k.isValue(j.when),k.id)})};f.once=function(i,j){if(this.getValue()===i){j();return{unbind:$.noop}}else{return this.valueChangedEvent.one(j)}};f.onceTrue=function(i){return this.once(true,i)};c(f,true);a(f);function h(){this.setValue.apply(this,$.merge([false],arguments))}function g(){this.setValue.apply(this,$.merge([true],arguments))}}function a(f){f.bindToggleButton=function(k,j){j=$.extend({stateToggledValue:undefined,reason:undefined,valueSettingFunction:undefined,valueWhenToggled:true},j);var h=this;var i=false;k.toggled(function(){if(!i){if(j.valueSettingFunction){j.valueSettingFunction.call(h,k.isToggled(),j.reason)}else{h.setValue(k.isToggled()?j.valueWhenToggled:!j.valueWhenToggled,j.reason)}}});h.valueChangedEvent.bindAndExecute(g);function g(){var l=h.isValue(j.stateToggledValue);i=true;k.toggleToggled(l);i=false}}}function c(f,g){f.unbindElementState=function(j){var h=this;var i=j.data("boundFlags");if(i){var k=i[h.id];if(k!==undefined){k();delete i[h.id]}}};f.bindElementState=function(k,i){i=$.extend({stateToggledValue:g,stateType:StatesTypes.Enabling,className:undefined,stateChangeCallback:$.noop,withBinding:$.activationFunction},i);var h=this;var j=k.data("boundFlags");if(j===undefined){j={};k.data("boundFlags",j)}var l=h.valueChangedEvent.bindAndExecute(function(){var m=h.isValue(i.stateToggledValue);i.stateChangeCallback(m,h.name);if(i.className){k.toggleClass(i.className,m)}else{switch(i.stateType){case StatesTypes.Displaying:k.addDisplayingStates().toggleDisplayed(m,h.name);break;case StatesTypes.Enabling:k.addDisablingStates().toggleEnable(m,h.name);break;case StatesTypes.Visibility:k.addVisibilityStates().toggleVisibility(m,h.name);break}}});j[h.id]=function(){h.valueChangedEvent.unbind(l);switch(i.stateType){case StatesTypes.Displaying:k.addDisplayingStates().toggleDisplayed(true,h.name);break;case StatesTypes.Enabling:k.addDisablingStates().toggleEnable(true,h.name);break;case StatesTypes.Visibility:k.addVisibilityStates().toggleVisibility(true,h.name);break}}}}})();var ObservableFlag=new function(){this.createConditionalPositive=function(a){return new ConditionalObservableFlag(true,a)};this.createConditionalNegative=function(a){return new ConditionalObservableFlag(false,a)};this.createConditional=function(a,b){switch(a){case ConditionalFlagsTypes.ConditionalNegative:return ObservableFlag.createConditionalNegative(b);case ConditionalFlagsTypes.ConditionalPositive:return ObservableFlag.createConditionalPositive(b);default:console.warn("Unknown conditional flag was requested for creation.");return undefined}};this.create=function(a,b){return new BasicObservableFlag(a,b)};this.createFlagsObserver=function(a){return new FlagsObserver(a)}}();(function(a){a.fn.bindStateToFlag=function(b,c){b.bindElementState(a(this),c);return this};a.fn.unbindStateFromFlag=function(b){b.unbindElementState(a(this));return this};a.fn.bindButtonToFlag=function(b,c){b.bindToggleButton(a(this),c);return this};a.fn.bindClassToFlag=function(g,k){k=a.extend({className:undefined,alternativeClass:undefined,when:true,partsSelector:undefined,valueChangeCallback:a.noop},k);var d=k.className;var j=k.alternativeClass;var f=k.when;var b=k.partsSelector;var h=k.valueChangeCallback;var i=a(this);var c=ContextValue.createContextClass({getTarget:function(){if(b){var l=a([]);l.pushElements(i);l.pushElements(a(b,i));return l}else{return i}}});return g.valueChangedEvent.bindAndExecute(function(){if(g.getValue()===f){c.set(d);h(d)}else{c.set(j);h(j)}})}})(jQuery);OperationsQueue=new function(){this.createCancelableQueue=function(c){c=$.extend({startOperationCallback:$.noop,finishOperationCallback:$.noop},c);var a=false;var b={executeOperation:function(h,i,g){var f=d(h,i,g);if(!b.pendingOperation){f.asyncOperation()}else{b.pendingOperation.runWhenFinished(f)}},dispose:function(){a=true}};return b;function d(g,i,f){var h={startCallback:i,errorCallback:f,runWhenFinished:function(j){h.startCallback=j.asyncOperation;h.errorCallback=j.asyncOperation},asyncOperation:function(){b.pendingOperation=h;c.startOperationCallback();g(function(){delete b.pendingOperation;if(!a){h.startCallback.apply(this,arguments);c.finishOperationCallback()}},function(){delete b.pendingOperation;if(!a){h.errorCallback.apply(this,arguments);c.finishOperationCallback()}})}};return h}}}();if(typeof Global==="undefined"){Global={}}Global.AutoSaveTime=120000;Global.IsExplorerMode=$.browser.msie&&parseInt($.browser.version)<9;Global.Directions={Left:{name:"Left"},Right:{name:"Right"},Up:{name:"Up"},Down:{name:"Down"}};Global.AnimationDirections={Left:"left",Right:"right",Up:"up",Down:"down"};Global.MinPropertyZindex=2000;Global.MinExternalAppPropertyZindex=3000;Global.Flags={IsDuringResizing:ObservableFlag.create(false),DisableDataListArrangements:ObservableFlag.create(false)};Global.Events={NavigableTabChanged:SimpleEvent.create(),NavigationFinished:SimpleEvent.create(),BeforeSavingSite:SimpleEvent.create(),LastEventOnInitiailizatGlobal:SimpleEvent.create(),FinishGroupInitialization:SimpleEvent.create(),ElementRemoving:SimpleEvent.create(),ChildElementRemoved:SimpleEvent.create(),ElementsAdded:SimpleEvent.create(),ElementsAdding:SimpleEvent.create(),ContainerChanging:SimpleEvent.create(),ContainerChanged:SimpleEvent.create(),DuplicateFinished:SimpleEvent.create(),DuplicateStarted:SimpleEvent.create(),HieararchyChanged:SimpleEvent.create(),CustomStyleChanged:SimpleEvent.create(),ConnectionAdded:SimpleEvent.create(),ConnectionRemoved:SimpleEvent.create(),ConnectionUpdated:SimpleEvent.create(),ConnectionRemoving:SimpleEvent.create(),ConnectionAdding:SimpleEvent.create(),ElementDraggingStart:SimpleEvent.create(),ElementDraggingStoped:SimpleEvent.create(),ElementResizingStart:SimpleEvent.create(),ElementResizingStop:SimpleEvent.create(),ElementResizingHappend:SimpleEvent.create(),VideoAdded:SimpleEvent.create(),NewVideoAdded:SimpleEvent.create(),BeforePreviewStarted:SimpleEvent.create(),PreviewStarted:SimpleEvent.create(),PreviewFinished:SimpleEvent.create(),SectionSizeChanged:SimpleEvent.create()};Global.Orientation={Vertical:"vertical",Horizontal:"horizontal"};Global.ScrollingBehaviour={NoScrolling:-1,ScrollOffset:0,ScrollItems:1};Global.Priorities={ImportantElementsEndAction:1010,ImportantElementsStartAction:990,ImportantElementsMiddleAction:1000,MediumElementsEndAction:1010,MediumElementsStartAction:990,MediumElementsMiddleAction:1000,RegularElementsEndAction:1010,RegularElementsStartAction:990,RegularElementsMiddleAction:1000,ChangePageAction:2000,OpenPopupAction:3000,ClosePopupAction:3010};Global.SelectionBehaviours={ToggleButton:1,RadioButton:2};Global.LayersGroups={Content:1,Background:2,Decorations:3};Global.Keys={ESC:27,Enter:13,Ctrl:17,Shift:16,Delete:46,Left:37,Up:38,Right:39,Down:40,Plus:107,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118};(function(){a();function a(){var b;for(b=65;b<=90;b++){Global.Keys[String.fromCharCode(b)]=b}for(b=0;b<=9;b++){Global.Keys["NUM"+b]=48+b}}})();if(!window.console){console={}}console.log=console.log||function(){};console.warn=console.warn||function(){};console.error=console.error||function(){};console.info=console.info||function(){};console.assert=console.assert||function(){};if(console.time){console.logAndMeasure=function(a){console.log(a+" (Start)");console.time(a)}}else{console.logAndMeasure=function(){}}console.time=console.time||function(){};console.timeEnd=console.timeEnd||function(){};var AssetsStorageServers={Remote:0,Local:1,AzureBlob:2,Application:3,Amazon:4,Service:5,Google:6};var AssetsCategories={StockImages:1,Textures:2,Icons:3,AdminImages:4,UserFlash:21,UserSound:22,UserDocuments:23,UserImages:100,FacebookImages:5,LinkedImages:6};var AssetsTypes={Image:1,Video:2,Flash:3,Sound:4,Document:5,Font:6,App:7,Site:8};var AssetsScope={User:1,Public:2,Site:3};var AssetsManager=new function(){var c=[120,200];var a=[300,500,800];this.getUserAssetsFolder=function(d,f,g){return Settings.UserStorageUrlsMap[f].format(g)+b(d)+"/"};this.getPublicAssetsFolder=function(d,f){return Settings.WebzaiStorageUrlsMap[f]+b(d)+"/"};this.isImagesAssetsCategory=function(d){switch(d){case AssetsCategories.StockImages:case AssetsCategories.Textures:case AssetsCategories.Icons:case AssetsCategories.AdminImages:case AssetsCategories.UserImages:case AssetsCategories.FacebookImages:case AssetsCategories.LinkedImages:return true;default:return false}};this.isUserAssetsCategory=function(d){switch(d){case AssetsCategories.UserFlash:case AssetsCategories.UserDocuments:case AssetsCategories.UserImages:case AssetsCategories.UserSound:case AssetsCategories.LinkedImages:return true;default:return false}};this.isExternalAssetsCategory=function(d){switch(d){case AssetsCategories.FacebookImages:return true;default:return false}};this.createAssetsCollectionAttributes=function(g){var d=ObservableFlag.createConditionalPositive();var f=ObservableFlag.createConditionalPositive();if(AssetsManager.isExternalAssetsCategory(g)){d.setFalse()}else{if(!AssetsManager.isUserAssetsCategory(g)){d.bindToFlag(WebzaiController.Flags.IsAdmin,{when:true,set:true})}}if(g===AssetsCategories.LinkedImages){f.setFalse()}return{isEditable:d,canMoveAssetsFrom:f}};this.resolveSiteThumbUrl=function(h,f,j){var l=$.valueOrDefault($.getFileExtension(h),".jpg");var k=$.getFileNameWithoutExtension(h);var g=undefined;var o;if(f===SiteType.Mobile){o=c}else{o=a}for(var m=0;m<o.length;m++){var d=o[m];if(d>j.width&&d>j.height){g=d;break}}var n="";if(g!==undefined){n="_"+g}if(k.indexOf("http://")===0){return k+n+l}return Settings.StaticContentUrl+"thumbs/"+k+n+l};this.resolveImageUrlBasedOnLayout=function(d,h,f,g){if(!d||typeof d==="string"){return d}g=$.valueOrCalculate(g,function(){if(d.imageWidth!==undefined&&d.imageHeight!==undefined){return{width:d.imageWidth,height:d.imageHeight}}else{return undefined}});return AssetsManager.resolveImageUrl(d,function(){switch(f){case ImageBoxLayout.Original:case ImageBoxLayout.Tile:case ImageBoxLayout.TileHorizontally:case ImageBoxLayout.TileVertically:return false}if(g){return ImageBoxUtil.calculateImageSizeInLayout(g,f,h)}else{return h}})};this.resolveImageUrl=function(g,f){if(!g||typeof g==="string"){return g}else{if(g.imagePath===undefined){return undefined}else{var d=g.imagePath;if(g.storageServer===AssetsStorageServers.Local&&g.scaledVersions===undefined){g.scaledVersions=[{size:200,suffix:"_200"},{size:400,suffix:"_400"},{size:600,suffix:"_600"},{size:800,suffix:"_800"},{size:1000,suffix:"_1000"}]}if(f&&g.scaledVersions){if($.isFunction(f)){f=f()}if(f){var i=$.grep(g.scaledVersions,function(k){return k.size>=Math.max(f.width,f.height)});if(i.length>0){var j=$.minItem(i,function(k){return k.size});var h=$.splitFileName(d);d=h.fileName+j.suffix+h.extension}}}return AssetsManager.resolveAssetUrl({storageServer:$.valueOrDefault(g.storageServer,AssetsStorageServers.Remote),ownerID:g.ownerID,fileName:d,assetType:AssetsTypes.Image,title:g.title})}}};this.resolveImageThumbUrl=function(d){if(!d||typeof d==="string"){return d}else{if(d.thumbPath===undefined){return AssetsManager.resolveImageUrl(d)}else{return AssetsManager.resolveAssetUrl({storageServer:d.storageServer,ownerID:d.ownerID,fileName:d.thumbPath,assetType:AssetsTypes.Image,title:d.title})}}};this.getImageInfoForSaving=function(d){d=$.extractKeys(d,["id","imagePath","thumbPath","ownerID","storageServer","preferedLayout","scaledVersions","imageWidth","imageHeight"]);if(d.thumbPath===d.imagePath){d.thumbPath=undefined}return d};this.resolveFontUrl=function(d){return AssetsManager.resolveAssetUrl({storageServer:d.storageServer,ownerID:d.ownerID,assetType:AssetsTypes.Font,fileName:d.fileNamePrefix})};this.resolveAssetUrl=function(f){var g="";var h=f.fileName;if(f.storageServer===AssetsStorageServers.Amazon){var d=b(f.assetType);d=$.capitalizeFirstLetter(d);g="http://s3.amazonaws.com/Webzai_"+d+"/"}else{if(f.storageServer===AssetsStorageServers.Service){g=Settings.ServiceAddress+b(f.assetType)+"/"}else{if(f.storageServer!==AssetsStorageServers.Remote){g=AssetsManager.getAssetsFolder(f.ownerID,f.storageServer,f.assetType);h=$.map(h.split("/"),function(i){return encodeURIComponent(i)}).join("/")}}}return PathUtils.combinePaths(g,h)};this.getAssetsFolder=function(g,f,d){if(g!==null){return AssetsManager.getUserAssetsFolder(d,f,g)}else{return AssetsManager.getPublicAssetsFolder(d,f)}};this.createApplicationAsset=function(d,f){if(d===AssetsTypes.Image){return{imagePath:f,ownerID:null,storageServer:AssetsStorageServers.Application}}else{return{assetType:d,fileName:f,ownerID:null,storageServer:AssetsStorageServers.Application}}};function b(d){switch(d){case AssetsTypes.Image:return"images";case AssetsTypes.Video:return"video";case AssetsTypes.Flash:return"flash";case AssetsTypes.Sound:return"sound";case AssetsTypes.Document:return"documents";case AssetsTypes.Font:return"fonts";case AssetsTypes.App:return"apps";case AssetsTypes.Site:return"sites";default:return""}}}();var DesignerIconsFolder="/images/designer-icons/";var TemplatesIconsFolder=DesignerIconsFolder+"templates-icons/";var DesignerIcons={DefaultTemplate:"/images/designer-icons/default-template-icon.png",Delete:"/images/designer-icons/delete.png",Add:"/images/designer-icons/add.png",Select:"/images/designer-icons/select.png",Settings:"/images/designer-icons/settings.png",Flash:"/images/designer-icons/flash.png",App:"/images/designer-icons/app.png",DummyImage:"/images/designer-icons/dummy-image.png"};var TemplatesIcons={Rectangle:TemplatesIconsFolder+"rectangle.png",HorizontalLine:TemplatesIconsFolder+"horizontal-line.png",VerticalLine:TemplatesIconsFolder+"vertical-line.png",Ellipse:TemplatesIconsFolder+"ellipse.png",Triangle:TemplatesIconsFolder+"triangle.png",Box:TemplatesIconsFolder+"box.png",Tabs:TemplatesIconsFolder+"tabs.png",LikeButton:TemplatesIconsFolder+"facebook-like.png",GooglePlus:TemplatesIconsFolder+"google-plus.png",Tweet:TemplatesIconsFolder+"tweet.png",GoogleMap:TemplatesIconsFolder+"google.png",MenuLine:TemplatesIconsFolder+"menu-line.png",MenuColumn:TemplatesIconsFolder+"menu-column.png",MenuGrid:TemplatesIconsFolder+"menu-grid.png",MenuCircle:TemplatesIconsFolder+"menu-circle.png",GalleryLine:TemplatesIconsFolder+"gallery-line.png",GalleryColumn:TemplatesIconsFolder+"gallery-column.png",GalleryGrid:TemplatesIconsFolder+"gallery-grid.png",GalleryCircle:TemplatesIconsFolder+"gallery-circle.png",GalleryPagesLine:TemplatesIconsFolder+"gallery-pages-line.png",GalleryPagesColumn:TemplatesIconsFolder+"gallery-pages-column.png",GalleryPagesGrid:TemplatesIconsFolder+"gallery-pages-grid.png",GalleryPagesCircle:TemplatesIconsFolder+"gallery-pages-circle.png",Title:TemplatesIconsFolder+"title.png",Heading:TemplatesIconsFolder+"heading.png",Text:TemplatesIconsFolder+"text.png",Paragraph:TemplatesIconsFolder+"paragraph.png",EmptyForm:TemplatesIconsFolder+"empty-form.png"};SelectionArea={beginUpdateBatch:$.noop,endUpdateBatch:$.noop};DesignerManager={getDefaultImage:$.noop,getDefaultIcon:$.noop,DefaultTexts:{description:""},VideosIds:["1"]};var OperationsManager={beginAtomicBatch:$.noop,endAtomicBatch:$.noop,disable:$.noop,disableBatch:$.noop,endDisableBatch:$.noop,disableUndo:$.noop,enableUndo:$.noop,isInUndoRedoState:$.returnFalse,finishPrevBatch:$.noop,setPropertyChangeListener:$.noop};var NamingManager={allocateName:$.noop};var SelectionManager={disable:$.noop,enable:$.noop,enableSelecting:$.noop,disableSelecting:$.noop};var CommandsManager={UpdateBatch:{start:$.noop,finish:$.noop}};var Viewer=new function(){var b;this.initialize=function(){var h;if(Global.IsNewStructure){h=d()}else{h=JSON.parse(GroupStructure)}if(Global.IsMobileView){OrderManager.beginReorderingBatch();Global.Flags.DisableDataListArrangements.setValue(true);PageManager.Events.AfterPageChanged.one(function(){MobileVersionViewManager.initialize();MobileVersionViewManager.Flags.IsInMobileContext.setTrue();MobileVersionViewManager.convertToMobile();OrderManager.endReorderingBatch()})}SocialLinksManager.initialize();EditorManager.initialize();ContentPushingManager.initialize();AppsManager.initialize();ElementsModel.initialize();StructureLoadingManager.initialize();SiteManager.initialize(SiteInformation);FontsManager.initialize(h.fonts);MasterPagesManager.initialize(h.masterPages);PageManager.initialize(h.pagesStructure);SiteManager.setSiteSettings(h.siteSettings);StatesGroupsManager.initialize();ThemeColorsManager.initialize();ThemeFontsManager.initialize(false);TextStyleManager.initialize();UrlManager.initialize(PageData.defaultAjaxPageID);ListsManager.initialize(h.listsInformation);var g=UrlManager.getPageIdByFragment();var j=MasterPagesManager.getMasterPageIDByPage(g);var i=SiteFilesMap["page-"+g];var f=SiteFilesMap["master-"+j];$(document).ready(function(){var k=$("body").addClass("preview-mode site-viewer");if(Global.IsMobile){k.addClass("mobile")}else{k.addClass("pc")}if(Global.IsMobileClient){k.addClass("mobile-client")}else{k.addClass("pc-client")}if(Global.IsThumbMode){k.addClass("thumb-mode")}if(!window.IsSnapshot){a(h)}c()})};function c(){$.callRootFunction("onViewerReady");if(Global.IsMobileClient){$("body").removeClass("state-loading-mobile-viewer");$("#mobile-loading-screen").remove()}}function d(){var g;if(typeof SiteStructure==="string"){g=JSON.parse(SiteStructure)}else{g=SiteStructure}var f=(typeof DBSiteMetaData==="undefined")?{}:DBSiteMetaData;g=$.extend({masterPages:undefined,listsInformation:{}},g,f.siteStructureInformation);g.pagesStructure=$.extend({pagesData:undefined,pagesHierarchies:undefined},g.pagesStructure,f.pagesStructureInformation);g.pagesStructure.pages=g.pagesStructure.pages?g.pagesStructure.pages:{};$.extend(g.pagesStructure.pages,PagesStructures);$.each(PagesStructures,function(h,i){if(typeof i==="string"){g.pagesStructure.pages[h]=JSON.parse(i)}else{g.pagesStructure.pages[h]=i}});$.each(MasterPagesStructures,function(h,i){if(typeof i==="string"){$.extend(g.masterPages[h],JSON.parse(i))}else{$.extend(g.masterPages[h],i)}});return g}function a(g){b=$.extend({themes:undefined,pagesStructure:undefined,dataSources:undefined,masterPages:undefined},g);var f=$("#body-element");f.empty();Global.OffsetAncestor=$('<div id="offset-anchor"></div>').appendTo(f);DataSourcesManager.initialize();PageManager.initializeMinPageHeightRule();LimitationsManager.initialize();ViewManager.initialize();PropertiesManager.initialize();PositionManager.initialize();ThemesManager.initialize(b.themes);PageManager.constructPagesHierarchy(b.pagesStructure);OrderManager.initialize();InstancePoolingManager.initialize();SiteViewportManager.initialize();FontIconsManager.initialize();PositionManager.enableMouseOver();PrivacyPolicyBar.initialize();NavigationManager.initialize();Global.Events.FinishGroupInitialization.fire();f.scroll(function(){PositionManager.invalidatePositioningRootOffset()});Global.Events.LastEventOnInitiailizatGlobal.fire()}}();
/*!
 * jQuery UI Effects 1.8.22
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Effects/
 */
jQuery.effects||(function(h,d){h.effects={};h.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","borderColor","color","outlineColor"],function(n,m){h.fx.step[m]=function(o){if(!o.colorInit){o.start=l(o.elem,m);o.end=h.color.parse(o.end);o.colorInit=true}if(i()){o.elem.style[m]="rgba("+Math.max(Math.min(parseInt((o.pos*(o.end[0]-o.start[0]))+o.start[0],10),255),0)+","+Math.max(Math.min(parseInt((o.pos*(o.end[1]-o.start[1]))+o.start[1],10),255),0)+","+Math.max(Math.min(parseInt((o.pos*(o.end[2]-o.start[2]))+o.start[2],10),255),0)+","+Math.max(Math.min(parseFloat((o.pos*(o.end[3]-o.start[3]))+o.start[3]),1),0)+")"}else{o.elem.style[m]="rgb("+Math.max(Math.min(parseInt((o.pos*(o.end[0]-o.start[0]))+o.start[0],10),255),0)+","+Math.max(Math.min(parseInt((o.pos*(o.end[1]-o.start[1]))+o.start[1],10),255),0)+","+Math.max(Math.min(parseInt((o.pos*(o.end[2]-o.start[2]))+o.start[2],10),255),0)+")"}}});function l(o,m){var n;do{n=(h.curCSS||h.css)(o,m);if(n!=""&&n!="transparent"||h.nodeName(o,"body")){break}m="backgroundColor"}while(o=o.parentNode);return h.color.parse(n)}function i(){if(h.support.rgba===d){var p=document.getElementsByTagName("script")[0];var n=p.style.color;try{p.style.color="rgba(1,5,13,0.44)"}catch(o){}var m=p.style.color!=n;p.style.color=n;h.support.rgba=m}return h.support.rgba}var f=["add","remove","toggle"],b={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};function g(){var p=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,q={},n,o;if(p&&p.length&&p[0]&&p[p[0]]){var m=p.length;while(m--){n=p[m];if(typeof p[n]=="string"){o=n.replace(/\-(\w)/g,function(r,s){return s.toUpperCase()});q[o]=p[n]}}}else{for(n in p){if(typeof p[n]==="string"){q[n]=p[n]}}}return q}function a(n){var m,o;for(m in n){o=n[m];if(o==null||h.isFunction(o)||m in b||(/scrollbar/).test(m)||(!(/color/i).test(m)&&isNaN(parseFloat(o)))){delete n[m]}}return n}function j(m,o){var p={_:0},n;for(n in o){if(m[n]!=o[n]){p[n]=o[n]}}return p}h.effects.animateClass=function(m,n,p,o){if(h.isFunction(p)){o=p;p=null}return this.queue(function(){var t=h(this),q=t.attr("style")||" ",u=a(g.call(this)),s,r=t.attr("class")||"";h.each(f,function(v,w){if(m[w]){t[w+"Class"](m[w])}});s=a(g.call(this));t.attr("class",r);t.animate(j(u,s),{queue:false,duration:n,easing:p,complete:function(){h.each(f,function(v,w){if(m[w]){t[w+"Class"](m[w])}});if(typeof t.attr("style")=="object"){t.attr("style").cssText="";t.attr("style").cssText=q}else{t.attr("style",q)}if(o){o.apply(this,arguments)}h.dequeue(this)}})})};h.fn.extend({_addClass:h.fn.addClass,addClass:function(n,m,p,o){return m?h.effects.animateClass.apply(this,[{add:n},m,p,o]):this._addClass(n)},_removeClass:h.fn.removeClass,removeClass:function(n,m,p,o){return m?h.effects.animateClass.apply(this,[{remove:n},m,p,o]):this._removeClass(n)},_toggleClass:h.fn.toggleClass,toggleClass:function(o,m,n,q,p){if(typeof m=="boolean"||m===d){if(!n){return this._toggleClass(o,m)}else{return h.effects.animateClass.apply(this,[(m?{add:o}:{remove:o}),n,q,p])}}else{return h.effects.animateClass.apply(this,[{toggle:o},m,n,q])}},switchClass:function(m,o,n,q,p){return h.effects.animateClass.apply(this,[{add:o,remove:m},n,q,p])}});h.extend(h.effects,{version:"1.8.22",save:function(n,o){for(var m=0;m<o.length;m++){if(o[m]!==null){n.data("ec.storage."+o[m],n[0].style[o[m]])}}},restore:function(n,o){for(var m=0;m<o.length;m++){if(o[m]!==null){n.css(o[m],n.data("ec.storage."+o[m]))}}},setMode:function(m,n){if(n=="toggle"){n=m.is(":hidden")?"show":"hide"}return n},getBaseline:function(n,o){var p,m;switch(n[0]){case"top":p=0;break;case"middle":p=0.5;break;case"bottom":p=1;break;default:p=n[0]/o.height}switch(n[1]){case"left":m=0;break;case"center":m=0.5;break;case"right":m=1;break;default:m=n[1]/o.width}return{x:m,y:p}},createWrapper:function(m){if(m.parent().is(".ui-effects-wrapper")){return m.parent()}var n={width:m.outerWidth(true),height:m.outerHeight(true),"float":m.css("float")},q=h("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),p=document.activeElement;try{p.id}catch(o){p=document.body}m.wrap(q);if(m[0]===p||h.contains(m[0],p)){h(p).focus()}q=m.parent();if(m.css("position")=="static"){q.css({position:"relative"});m.css({position:"relative"})}else{h.extend(n,{position:m.css("position"),zIndex:m.css("z-index")});h.each(["top","left","bottom","right"],function(r,s){n[s]=m.css(s);if(isNaN(parseInt(n[s],10))){n[s]="auto"}});m.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})}return q.css(n).show()},removeWrapper:function(m){var n,o=document.activeElement;if(m.parent().is(".ui-effects-wrapper")){n=m.parent().replaceWith(m);if(m[0]===o||h.contains(m[0],o)){h(o).focus()}return n}return m},setTransition:function(n,p,m,o){o=o||{};h.each(p,function(r,q){var s=n.cssUnit(q);if(s[0]>0){o[q]=s[0]*m+s[1]}});return o}});function c(n,m,o,p){if(typeof n=="object"){p=m;o=null;m=n;n=m.effect}if(h.isFunction(m)){p=m;o=null;m={}}if(typeof m=="number"||h.fx.speeds[m]){p=o;o=m;m={}}if(h.isFunction(o)){p=o;o=null}m=m||{};o=o||m.duration;o=h.fx.off?0:typeof o=="number"?o:o in h.fx.speeds?h.fx.speeds[o]:h.fx.speeds._default;p=p||m.complete;return[n,m,o,p]}function k(m){if(!m||typeof m==="number"||h.fx.speeds[m]){return true}if(typeof m==="string"&&!h.effects[m]){return true}return false}h.fn.extend({effect:function(p,o,r,t){var n=c.apply(this,arguments),q={options:n[1],duration:n[2],callback:n[3]},s=q.options.mode,m=h.effects[p];if(h.fx.off||!m){if(s){return this[s](q.duration,q.callback)}else{return this.each(function(){if(q.callback){q.callback.call(this)}})}}return m.call(this,q)},_show:h.fn.show,show:function(n){if(k(n)){return this._show.apply(this,arguments)}else{var m=c.apply(this,arguments);m[1].mode="show";return this.effect.apply(this,m)}},_hide:h.fn.hide,hide:function(n){if(k(n)){return this._hide.apply(this,arguments)}else{var m=c.apply(this,arguments);m[1].mode="hide";return this.effect.apply(this,m)}},__toggle:h.fn.toggle,toggle:function(n){if(k(n)||typeof n==="boolean"||h.isFunction(n)){return this.__toggle.apply(this,arguments)}else{var m=c.apply(this,arguments);m[1].mode="toggle";return this.effect.apply(this,m)}},cssUnit:function(m){var n=this.css(m),o=[];h.each(["em","px","%","pt"],function(p,q){if(n.indexOf(q)>0){o=[parseFloat(n),q]}});return o}});h.easing.jswing=h.easing.swing;h.extend(h.easing,{def:"easeOutQuad",swing:function(n,o,m,q,p){return h.easing[h.easing.def](n,o,m,q,p)},easeInQuad:function(n,o,m,q,p){return q*(o/=p)*o+m},easeOutQuad:function(n,o,m,q,p){return -q*(o/=p)*(o-2)+m},easeInOutQuad:function(n,o,m,q,p){if((o/=p/2)<1){return q/2*o*o+m}return -q/2*((--o)*(o-2)-1)+m},easeInCubic:function(n,o,m,q,p){return q*(o/=p)*o*o+m},easeOutCubic:function(n,o,m,q,p){return q*((o=o/p-1)*o*o+1)+m},easeInOutCubic:function(n,o,m,q,p){if((o/=p/2)<1){return q/2*o*o*o+m}return q/2*((o-=2)*o*o+2)+m},easeInQuart:function(n,o,m,q,p){return q*(o/=p)*o*o*o+m},easeOutQuart:function(n,o,m,q,p){return -q*((o=o/p-1)*o*o*o-1)+m},easeInOutQuart:function(n,o,m,q,p){if((o/=p/2)<1){return q/2*o*o*o*o+m}return -q/2*((o-=2)*o*o*o-2)+m},easeInQuint:function(n,o,m,q,p){return q*(o/=p)*o*o*o*o+m},easeOutQuint:function(n,o,m,q,p){return q*((o=o/p-1)*o*o*o*o+1)+m},easeInOutQuint:function(n,o,m,q,p){if((o/=p/2)<1){return q/2*o*o*o*o*o+m}return q/2*((o-=2)*o*o*o*o+2)+m},easeInSine:function(n,o,m,q,p){return -q*Math.cos(o/p*(Math.PI/2))+q+m},easeOutSine:function(n,o,m,q,p){return q*Math.sin(o/p*(Math.PI/2))+m},easeInOutSine:function(n,o,m,q,p){return -q/2*(Math.cos(Math.PI*o/p)-1)+m},easeInExpo:function(n,o,m,q,p){return(o==0)?m:q*Math.pow(2,10*(o/p-1))+m},easeOutExpo:function(n,o,m,q,p){return(o==p)?m+q:q*(-Math.pow(2,-10*o/p)+1)+m},easeInOutExpo:function(n,o,m,q,p){if(o==0){return m}if(o==p){return m+q}if((o/=p/2)<1){return q/2*Math.pow(2,10*(o-1))+m}return q/2*(-Math.pow(2,-10*--o)+2)+m},easeInCirc:function(n,o,m,q,p){return -q*(Math.sqrt(1-(o/=p)*o)-1)+m},easeOutCirc:function(n,o,m,q,p){return q*Math.sqrt(1-(o=o/p-1)*o)+m},easeInOutCirc:function(n,o,m,q,p){if((o/=p/2)<1){return -q/2*(Math.sqrt(1-o*o)-1)+m}return q/2*(Math.sqrt(1-(o-=2)*o)+1)+m},easeInElastic:function(n,q,m,w,v){var r=1.70158;var u=0;var o=w;if(q==0){return m}if((q/=v)==1){return m+w}if(!u){u=v*0.3}if(o<Math.abs(w)){o=w;var r=u/4}else{var r=u/(2*Math.PI)*Math.asin(w/o)}return -(o*Math.pow(2,10*(q-=1))*Math.sin((q*v-r)*(2*Math.PI)/u))+m},easeOutElastic:function(n,q,m,w,v){var r=1.70158;var u=0;var o=w;if(q==0){return m}if((q/=v)==1){return m+w}if(!u){u=v*0.3}if(o<Math.abs(w)){o=w;var r=u/4}else{var r=u/(2*Math.PI)*Math.asin(w/o)}return o*Math.pow(2,-10*q)*Math.sin((q*v-r)*(2*Math.PI)/u)+w+m},easeInOutElastic:function(n,q,m,w,v){var r=1.70158;var u=0;var o=w;if(q==0){return m}if((q/=v/2)==2){return m+w}if(!u){u=v*(0.3*1.5)}if(o<Math.abs(w)){o=w;var r=u/4}else{var r=u/(2*Math.PI)*Math.asin(w/o)}if(q<1){return -0.5*(o*Math.pow(2,10*(q-=1))*Math.sin((q*v-r)*(2*Math.PI)/u))+m}return o*Math.pow(2,-10*(q-=1))*Math.sin((q*v-r)*(2*Math.PI)/u)*0.5+w+m},easeInBack:function(n,o,m,r,q,p){if(p==d){p=1.70158}return r*(o/=q)*o*((p+1)*o-p)+m},easeOutBack:function(n,o,m,r,q,p){if(p==d){p=1.70158}return r*((o=o/q-1)*o*((p+1)*o+p)+1)+m},easeInOutBack:function(n,o,m,r,q,p){if(p==d){p=1.70158}if((o/=q/2)<1){return r/2*(o*o*(((p*=(1.525))+1)*o-p))+m}return r/2*((o-=2)*o*(((p*=(1.525))+1)*o+p)+2)+m},easeInBounce:function(n,o,m,q,p){return q-h.easing.easeOutBounce(n,p-o,0,q,p)+m},easeOutBounce:function(n,o,m,q,p){if((o/=p)<(1/2.75)){return q*(7.5625*o*o)+m}else{if(o<(2/2.75)){return q*(7.5625*(o-=(1.5/2.75))*o+0.75)+m}else{if(o<(2.5/2.75)){return q*(7.5625*(o-=(2.25/2.75))*o+0.9375)+m}else{return q*(7.5625*(o-=(2.625/2.75))*o+0.984375)+m}}}},easeInOutBounce:function(n,o,m,q,p){if(o<p/2){return h.easing.easeInBounce(n,o*2,0,q,p)*0.5+m}return h.easing.easeOutBounce(n,o*2-p,0,q,p)*0.5+q*0.5+m}})})(jQuery);
/*!
 * jQuery UI Effects Drop 1.8.22
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Effects/Drop
 *
 * Depends:
 *	jquery.effects.core.js
 */
(function(a,b){a.effects.drop=function(c){return this.queue(function(){var g=a(this),k=["position","top","bottom","left","right","opacity"];var j=a.effects.setMode(g,c.options.mode||"hide");var l=c.options.direction||"left";a.effects.save(g,k);g.show();var d=a.effects.createWrapper(g);var h=(l=="up"||l=="down")?"top":"left";var m=(l=="up"||l=="left")?"pos":"neg";var f=c.options.distance||(h=="top"?g.outerHeight(true)/2:g.outerWidth(true)/2);if(j=="show"){g.css("opacity",0).css(h,m=="pos"?-f:f)}var i={opacity:j=="show"?1:0};i[h]=(j=="show"?(m=="pos"?"+=":"-="):(m=="pos"?"-=":"+="))+f;g.animate(i,{queue:false,duration:c.duration,easing:c.options.easing,always:function(){if(j=="hide"){g.hide()}a.effects.restore(g,k);a.effects.removeWrapper(g);d.remove();if(c.callback){c.callback.apply(this,arguments)}g.dequeue()}})})}})(jQuery);
/*!
 * jQuery UI Effects Fade 1.8.22
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Effects/Fade
 *
 * Depends:
 *	jquery.effects.core.js
 */
(function(a,b){a.effects.fade=function(c){return this.queue(function(){var d=a(this),f=a.effects.setMode(d,c.options.mode||"hide");d.animate({opacity:f},{queue:false,duration:c.duration,easing:c.options.easing,complete:function(){(c.callback&&c.callback.apply(this,arguments));d.dequeue()}})})}})(jQuery);
/*!
 * jQuery UI Effects Highlight 1.8.22
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Effects/Highlight
 *
 * Depends:
 *	jquery.effects.core.js
 */
(function(a,b){a.effects.highlight=function(c){return this.queue(function(){var f=a(this),d=["backgroundImage","backgroundColor","opacity"],h=a.effects.setMode(f,c.options.mode||"show"),g={backgroundColor:f.css("backgroundColor")};if(h=="hide"){g.opacity=0}a.effects.save(f,d);f.show().css({backgroundImage:"none",backgroundColor:c.options.color||"#ffff99"}).animate(g,{queue:false,duration:c.duration,easing:c.options.easing,complete:function(){(h=="hide"&&f.hide());a.effects.restore(f,d);(h=="show"&&!a.support.opacity&&this.style.removeAttribute("filter"));(c.callback&&c.callback.apply(this,arguments));f.dequeue()}})})}})(jQuery);
/*!
 * jQuery UI Effects Scale 1.8.22
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Effects/Scale
 *
 * Depends:
 *	jquery.effects.core.js
 */
(function(a,b){a.effects.scale=function(c){return this.queue(function(){var i=a(this);var f=a.extend(true,{},c.options);var l=a.effects.setMode(i,c.options.mode||"effect");var j=parseInt(c.options.percent,10)||(parseInt(c.options.percent,10)==0?0:(l=="hide"?0:100));var k=c.options.direction||"both";var d=c.options.origin;if(l!="effect"){f.origin=d||["middle","center"];f.restore=true}var h={height:i.height(),width:i.width()};i.from=c.options.from||(l=="show"?{height:0,width:0}:h);var g={y:k!="horizontal"?(j/100):1,x:k!="vertical"?(j/100):1};i.to={height:h.height*g.y,width:h.width*g.x};if(c.options.fade){if(l=="show"){i.from.opacity=0;i.to.opacity=1}if(l=="hide"){i.from.opacity=1;i.to.opacity=0}}f.from=i.from;f.to=i.to;f.mode=l;i.effect("size",f,c.duration,c.callback);i.dequeue()})};a.effects.size=function(c){return this.queue(function(){var d=a(this),p=["position","top","bottom","left","right","width","height","overflow","opacity"];var o=["position","top","bottom","left","right","overflow","opacity"];var l=["width","height","overflow"];var r=["fontSize"];var m=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"];var h=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"];var i=a.effects.setMode(d,c.options.mode||"effect");var k=c.options.restore||false;var g=c.options.scale||"both";var q=c.options.origin;var f={height:d.height(),width:d.width()};d.from=c.options.from||f;d.to=c.options.to||f;if(q){var j=a.effects.getBaseline(q,f);d.from.top=(f.height-d.from.height)*j.y;d.from.left=(f.width-d.from.width)*j.x;d.to.top=(f.height-d.to.height)*j.y;d.to.left=(f.width-d.to.width)*j.x}var n={from:{y:d.from.height/f.height,x:d.from.width/f.width},to:{y:d.to.height/f.height,x:d.to.width/f.width}};if(g=="box"||g=="both"){if(n.from.y!=n.to.y){p=p.concat(m);d.from=a.effects.setTransition(d,m,n.from.y,d.from);d.to=a.effects.setTransition(d,m,n.to.y,d.to)}if(n.from.x!=n.to.x){p=p.concat(h);d.from=a.effects.setTransition(d,h,n.from.x,d.from);d.to=a.effects.setTransition(d,h,n.to.x,d.to)}}if(g=="content"||g=="both"){if(n.from.y!=n.to.y){p=p.concat(r);d.from=a.effects.setTransition(d,r,n.from.y,d.from);d.to=a.effects.setTransition(d,r,n.to.y,d.to)}}a.effects.save(d,k?p:o);d.show();a.effects.createWrapper(d);d.css("overflow","hidden").css(d.from);if(g=="content"||g=="both"){m=m.concat(["marginTop","marginBottom"]).concat(r);h=h.concat(["marginLeft","marginRight"]);l=p.concat(m).concat(h);d.find("*[width]").each(function(){var t=a(this);if(k){a.effects.save(t,l)}var s={height:t.height(),width:t.width()};t.from={height:s.height*n.from.y,width:s.width*n.from.x};t.to={height:s.height*n.to.y,width:s.width*n.to.x};if(n.from.y!=n.to.y){t.from=a.effects.setTransition(t,m,n.from.y,t.from);t.to=a.effects.setTransition(t,m,n.to.y,t.to)}if(n.from.x!=n.to.x){t.from=a.effects.setTransition(t,h,n.from.x,t.from);t.to=a.effects.setTransition(t,h,n.to.x,t.to)}t.css(t.from);t.animate(t.to,c.duration,c.options.easing,function(){if(k){a.effects.restore(t,l)}})})}d.animate(d.to,{queue:false,duration:c.duration,easing:c.options.easing,complete:function(){if(d.to.opacity===0){d.css("opacity",d.from.opacity)}if(i=="hide"){d.hide()}a.effects.restore(d,k?p:o);a.effects.removeWrapper(d);if(c.callback){c.callback.apply(this,arguments)}d.dequeue()}})})}})(jQuery);
/*!
 * jQuery UI Effects Slide 1.8.22
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Effects/Slide
 *
 * Depends:
 *	jquery.effects.core.js
 */
(function(a,b){a.effects.slide=function(c){return this.queue(function(){var g=a(this),f=["position","top","bottom","left","right"];var k=a.effects.setMode(g,c.options.mode||"show");var j=c.options.direction||"left";a.effects.save(g,f);g.show();a.effects.createWrapper(g).css({overflow:"hidden"});var h=(j=="up"||j=="down")?"top":"left";var d=(j=="up"||j=="left")?"pos":"neg";var l=c.options.distance||(h=="top"?g.outerHeight(true):g.outerWidth(true));if(k=="show"){g.css(h,d=="pos"?(isNaN(l)?"-"+l:-l):l)}var i={};i[h]=(k=="show"?(d=="pos"?"+=":"-="):(d=="pos"?"-=":"+="))+l;g.animate(i,{queue:false,duration:c.duration,easing:c.options.easing,complete:function(){if(k=="hide"){g.hide()}a.effects.restore(g,f);a.effects.removeWrapper(g);if(c.callback){c.callback.apply(this,arguments)}g.dequeue()}})})}})(jQuery);
/*!
 * jQuery UI Effects Transfer 1.8.22
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Effects/Transfer
 *
 * Depends:
 *	jquery.effects.core.js
 */
(function(a,b){a.effects.transfer=function(c){return this.queue(function(){var h=a(this),j=a(c.options.to),g=j.offset(),i={top:g.top,left:g.left,height:j.innerHeight(),width:j.innerWidth()},f=h.offset(),d=a('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(c.options.className).css({top:f.top,left:f.left,height:h.innerHeight(),width:h.innerWidth(),position:"absolute"}).animate(i,c.duration,c.options.easing,function(){d.remove();(c.callback&&c.callback.apply(h[0],arguments));h.dequeue()})})}})(jQuery);WzPublicIcons={name:"public-font-icons",fontClass:"public-icons",icons:{"-18273612831":{code:"e600"},set255:{code:"e601"},set2552:{code:"e602"},set2553:{code:"e603"},set2554:{code:"e604"},"address-book_1":{code:"e605"},"address-book_2":{code:"e606"},"airplane-125161651":{code:"e607"},"airplane-128612983":{code:"e608"},"alarm-clock":{code:"e609"},"alarm-clock-235":{code:"e60a"},"alarm-clock-19284691264":{code:"e60b"},anchor:{code:"e60c"},android:{code:"e60d"},"angle-double-down":{code:"e60e"},"angle-double-left":{code:"e60f"},"angle-double-right":{code:"e610"},"angle-double-up":{code:"e611"},"angle-down":{code:"e612"},"angle-left":{code:"e613"},"angle-right":{code:"e614"},"angle-up":{code:"e615"},"antena-2847239":{code:"e616"},apple:{code:"e617"},archive:{code:"e618"},"arrow-234523":{code:"e619"},"arrow-19824371924":{code:"e61a"},"arrow-chart-192834612":{code:"e61b"},"arrow-chart-1928346127":{code:"e61c"},"arrow-circle-down":{code:"e61d"},"arrow-circle-left":{code:"e61e"},"arrow-circle-o-down":{code:"e61f"},"arrow-circle-o-left":{code:"e620"},"arrow-circle-o-right":{code:"e621"},"arrow-circle-o-up":{code:"e622"},"arrow-circle-right":{code:"e623"},"arrow-circle-up":{code:"e624"},"arrow-down":{code:"e625"},"arrow-left":{code:"e626"},"arrow-right":{code:"e627"},"arrows-87644":{code:"e628"},"arrows-298479283":{code:"e629"},"arrows-2397462394":{code:"e62a"},"arrows-293784623946":{code:"e62b"},"arrows-81978461976491241":{code:"e62c"},"arrow-up":{code:"e62d"},asterisk:{code:"e62e"},automobile:{code:"e62f"},avatar_1:{code:"e630"},avatar_2:{code:"e631"},"axe-hatchet-23423":{code:"e632"},backward:{code:"e633"},ball:{code:"e634"},"ball-2937856":{code:"e635"},ballbath:{code:"e636"},"ball-disc-123512512":{code:"e637"},"bandaid-83274532":{code:"e638"},bank_2:{code:"e639"},"bank-193847129":{code:"e63a"},"basket-1213123":{code:"e63b"},"battery-23525":{code:"e63c"},"battery-21354151":{code:"e63d"},"beach-3245":{code:"e63e"},"beach-chair-9183719283":{code:"e63f"},"bed-0986":{code:"e640"},"bed-9887934879":{code:"e641"},beer:{code:"e642"},behance:{code:"e643"},"behance-square":{code:"e644"},bell:{code:"e645"},bell_1:{code:"e646"},"bell-235":{code:"e647"},"bell-1414":{code:"e648"},"bell-7246":{code:"e649"},"bell-92184y91846":{code:"e64a"},"bell-o":{code:"e64b"},bicycle:{code:"e64c"},bicycle_chain:{code:"e64d"},bicycle_chair:{code:"e64e"},binders:{code:"e64f"},"binders-folders-23423":{code:"e650"},binoculars:{code:"e651"},"binoculars-723645812354":{code:"e652"},"bird-128368976512":{code:"e653"},birds_1:{code:"e654"},birds_2:{code:"e655"},birds_3:{code:"e656"},birds_4:{code:"e657"},birds_5:{code:"e658"},birds_6:{code:"e659"},bitbucket:{code:"e65a"},"boat-2346":{code:"e65b"},"boat-234213414":{code:"e65c"},"boat-sail-128371923":{code:"e65d"},"boat-sea":{code:"e65e"},"boat-sea-1":{code:"e65f"},"boat-sea-1-287345":{code:"e660"},"boat-sea-8273648":{code:"e661"},"boat-ship-21978461289734612879":{code:"e662"},bomb:{code:"e663"},book:{code:"e664"},book_1:{code:"e665"},book_2:{code:"e666"},"book-19283y192":{code:"e667"},"book-162347":{code:"e668"},"book-88267637":{code:"e669"},"book-2837453278":{code:"e66a"},"book-19874612946":{code:"e66b"},bookmark:{code:"e66c"},"bookmark-o":{code:"e66d"},"bridge-1928346":{code:"e66e"},briefcase:{code:"e66f"},briefcase_2:{code:"e670"},bug:{code:"e671"},building:{code:"e672"},building_2:{code:"e673"},"building-2452":{code:"e674"},"building-19843619":{code:"e675"},"building-123819238":{code:"e676"},"building-139846192":{code:"e677"},"building-120387687612":{code:"e678"},"building-o":{code:"e679"},bullhorn:{code:"e67a"},bullseye:{code:"e67b"},"business-12938y1923":{code:"e67c"},"business-2234141":{code:"e67d"},"business-1341241241":{code:"e67e"},cab:{code:"e67f"},calander:{code:"e680"},"calander-2362":{code:"e681"},"calander-21352":{code:"e682"},"calander-2984692":{code:"e683"},"calander-123415151":{code:"e684"},"calander-1923869761":{code:"e685"},"calander-19283619823":{code:"e686"},"calander-21048176491":{code:"e687"},calculator:{code:"e688"},"calculator-187361983":{code:"e689"},"calculator-234876129":{code:"e68a"},"calculator-10982698213":{code:"e68b"},"calculator-1928347198736912":{code:"e68c"},calendar:{code:"e68d"},calendar_1:{code:"e68e"},calendar_2:{code:"e68f"},"calendar-o":{code:"e690"},camera:{code:"e691"},camera_1:{code:"e692"},"camera-37432":{code:"e693"},"camera-235236":{code:"e694"},"camera-25236272":{code:"e695"},"camera-1412414141":{code:"e696"},"camera-1983719873":{code:"e697"},"camera-1093481094710":{code:"e698"},"camera-23904876213946":{code:"e699"},"camera-2948762394867239":{code:"e69a"},"camera-2047231904723984792":{code:"e69b"},"camera-retro":{code:"e69c"},"car-8798792387":{code:"e69d"},"car-87987923876":{code:"e69e"},"car-879782378872387":{code:"e69f"},"car-bus-23512521":{code:"e6a0"},"car-bus-van-1983719031":{code:"e6a1"},"card-28470242":{code:"e6a2"},"card-989823489":{code:"e6a3"},"card-2938467293845":{code:"e6a4"},"card-2398472946792342":{code:"e6a5"},"cart-183yu19381":{code:"e6a6"},"cart-2394862934":{code:"e6a7"},"car-taxi":{code:"e6a8"},"car-taxi-23746239846":{code:"e6a9"},"car-truck-197846129":{code:"e6aa"},"cart-shopping-12984691":{code:"e6ab"},"case-91824y9184791":{code:"e6ac"},"case-19726412":{code:"e6ad"},"case-235235621":{code:"e6ae"},"case-901286978y4":{code:"e6af"},"case-12938719023":{code:"e6b0"},"case-9889348799874":{code:"e6b1"},"case-12394876194619":{code:"e6b2"},"case-018741284791284":{code:"e6b3"},"cell-phone-9187369128":{code:"e6b4"},certificate:{code:"e6b5"},certificate_2:{code:"e6b6"},chain:{code:"e6b7"},"chair-1234123":{code:"e6b8"},"chart-1928371":{code:"e6b9"},"chart-graph-1238691":{code:"e6ba"},"chart-graph-9861298756":{code:"e6bb"},check:{code:"e6bc"},"check-circle":{code:"e6bd"},"check-circle-o":{code:"e6be"},"check-square-o":{code:"e6bf"},"chef-cook-239846":{code:"e6c0"},"chevron-circle-down":{code:"e6c1"},"chevron-circle-left":{code:"e6c2"},"chevron-circle-right":{code:"e6c3"},"chevron-circle-up":{code:"e6c4"},"chevron-down":{code:"e6c5"},"chevron-left":{code:"e6c6"},"chevron-right":{code:"e6c7"},"chevron-up":{code:"e6c8"},chicken1242:{code:"e6c9"},child:{code:"e6ca"},"clip-187451":{code:"e6cb"},"clip-1289746128":{code:"e6cc"},"clip-29384692334":{code:"e6cd"},"clipboard-194381y6397860":{code:"e6ce"},"clipboard-14141241":{code:"e6cf"},"clipboard-19836791":{code:"e6d0"},"clipboard-102869865":{code:"e6d1"},clock_1:{code:"e6d2"},clock_2:{code:"e6d3"},"clock-12974619":{code:"e6d4"},"clock-20387209":{code:"e6d5"},"clock-123879086124":{code:"e6d6"},"clock-912846912641":{code:"e6d7"},"clock-o":{code:"e6d8"},"clock-time-154151":{code:"e6d9"},cloud:{code:"e6da"},"cloud-125":{code:"e6db"},"cloud-219834612":{code:"e6dc"},"cloud-893877347":{code:"e6dd"},"cloud-2198346127":{code:"e6de"},"cloud-237562387562":{code:"e6df"},"cloud-download":{code:"e6e0"},"cloud-download-12412":{code:"e6e1"},"cloud-upload-12412":{code:"e6e2"},"clubs-1273461289":{code:"e6e3"},cny:{code:"e6e4"},codex:{code:"e6e5"},"codex-235":{code:"e6e6"},"codex-2348y2395678293":{code:"e6e7"},"codex-12273417253":{code:"e6e8"},coffee:{code:"e6e9"},"coffee-tea-drink-hot-878723788732":{code:"e6ea"},cog:{code:"e6eb"},cog_1:{code:"e6ec"},comment:{code:"e6ed"},"comment-252":{code:"e6ee"},"comment-28345245":{code:"e6ef"},"comment-215662151":{code:"e6f0"},"comment-89236496234":{code:"e6f1"},"comment-23048721047210":{code:"e6f2"},"comment-o":{code:"e6f3"},comments:{code:"e6f4"},"comments-2362462":{code:"e6f5"},"comments-28375275":{code:"e6f6"},"comments-92186491264":{code:"e6f7"},"comments-2038471086901":{code:"e6f8"},"comments-2038472946792":{code:"e6f9"},"comments-o":{code:"e6fa"},compass:{code:"e6fb"},compass_1:{code:"e6fc"},"compass-12425":{code:"e6fd"},"compass-28645265":{code:"e6fe"},"compass-82345823":{code:"e6ff"},"compass-237861298":{code:"e700"},compress:{code:"e701"},computer_1:{code:"e702"},"computer-1251551651651":{code:"e703"},"computer-1983y12936129":{code:"e704"},"computer-2135421":{code:"e705"},"computer-123816931":{code:"e706"},"computer-12843719834":{code:"e707"},"computer-192387461936":{code:"e708"},"computer-money-19286987512":{code:"e709"},"contact-125235235":{code:"e70a"},"contact-7672354234":{code:"e70b"},"contact-71264817254":{code:"e70c"},"conversation-bubbles_1":{code:"e70d"},copy:{code:"e70e"},"copyrights-8776545":{code:"e70f"},"copyrights-233452517":{code:"e710"},"credit-card":{code:"e711"},"crossed-eye-1241":{code:"e712"},crosshairs:{code:"e713"},"crosshairs-24652":{code:"e714"},cube:{code:"e715"},cubes:{code:"e716"},"cup-128735":{code:"e717"},"currency-19836911":{code:"e718"},"currency-money-dollar19836911":{code:"e719"},cutlery:{code:"e71a"},dashboard:{code:"e71b"},database:{code:"e71c"},desktop:{code:"e71d"},digg:{code:"e71e"},disc:{code:"e71f"},disc_1:{code:"e720"},"disc-23523w":{code:"e721"},"disc-98567":{code:"e722"},"dish-food-2346":{code:"e723"},"disk-13861931":{code:"e724"},"disk-1928367129":{code:"e725"},dollar:{code:"e726"},"dollar-8764":{code:"e727"},download:{code:"e728"},"download-arrow-11297836":{code:"e729"},dribbble:{code:"e72a"},"drill-tools":{code:"e72b"},"drink-1":{code:"e72c"},"drink-cup-234241":{code:"e72d"},"drink-cup-2147512841":{code:"e72e"},dropbox:{code:"e72f"},"earth-globe-15165161":{code:"e730"},"earth-globe-151651618":{code:"e731"},edit:{code:"e732"},"ellipsis-h":{code:"e733"},"ellipsis-v":{code:"e734"},employee_2:{code:"e735"},employees_2:{code:"e736"},envelope:{code:"e737"},envelope_1:{code:"e738"},"envelope-o":{code:"e739"},etsy:{code:"e73a"},euro:{code:"e73b"},"euro-858":{code:"e73c"},"euro-66253427":{code:"e73d"},"exclamation-circle":{code:"e73e"},expand:{code:"e73f"},eye:{code:"e740"},"eye-214":{code:"e741"},"eye-38756387":{code:"e742"},"eye-crossed-23453245":{code:"e743"},"eye-slash":{code:"e744"},facebook:{code:"e745"},"facebook-square":{code:"e746"},"fast-backward":{code:"e747"},"fast-backward-2356235123":{code:"e748"},"fast-backward-23562351234574":{code:"e749"},"fast-forward":{code:"e74a"},"fast-forward-2356235123":{code:"e74b"},"fast-forward-2356235123868":{code:"e74c"},fax:{code:"e74d"},female:{code:"e74e"},file:{code:"e74f"},"file-9978367363":{code:"e750"},"file-997836736367":{code:"e751"},"file-code-o":{code:"e752"},"file-excel-o":{code:"e753"},"file-movie-o":{code:"e754"},"file-o":{code:"e755"},"file-page-2352352352":{code:"e756"},"file-pdf-o":{code:"e757"},"file-photo-o":{code:"e758"},"file-powerpoint-o":{code:"e759"},"files-29846723":{code:"e75a"},"files-274627451":{code:"e75b"},"files-8273564821":{code:"e75c"},"files-9837649586":{code:"e75d"},"file-sound-o":{code:"e75e"},"file-text":{code:"e75f"},"file-text-o":{code:"e760"},"file-word-o":{code:"e761"},"file-zip-o":{code:"e762"},film:{code:"e763"},film_1:{code:"e764"},"film-12423":{code:"e765"},"film-910283710":{code:"e766"},"film-192843612946":{code:"e767"},"film-198736917633":{code:"e768"},"fins-123y129":{code:"e769"},"fins-184619284691":{code:"e76a"},fire:{code:"e76b"},"fire-flame-1297346128273":{code:"e76c"},flag:{code:"e76d"},"flag-14124":{code:"e76e"},"flag-726424652":{code:"e76f"},"flag-18946194691":{code:"e770"},"flag-91276389712653":{code:"e771"},"flag-checkered":{code:"e772"},"flag-o":{code:"e773"},flash:{code:"e774"},flask:{code:"e775"},flickr:{code:"e776"},flip_flop:{code:"e777"},"flip_flop-286354832":{code:"e778"},folder:{code:"e779"},"folder-235":{code:"e77a"},"folder-7647":{code:"e77b"},"folder-23862386":{code:"e77c"},"folder-open":{code:"e77d"},"folders-2414":{code:"e77e"},"folders-198236y192346912":{code:"e77f"},"folders-1928746192":{code:"e780"},"folders-1234124512541":{code:"e781"},"folders-129847198476912":{code:"e782"},"folders-1984712928734912":{code:"e783"},"fork-knife":{code:"e784"},"fork-knife-spoon-187236":{code:"e785"},"fork-spoon-13123123":{code:"e786"},forward:{code:"e787"},"frame-128437194":{code:"e788"},"frown-o":{code:"e789"},"gas-297384y92146y":{code:"e78a"},gbp:{code:"e78b"},gear:{code:"e78c"},"gear-23423":{code:"e78d"},"gear-766474":{code:"e78e"},"gear-298462914":{code:"e78f"},gears:{code:"e790"},"gears-82742":{code:"e791"},"gears-88367636":{code:"e792"},"gears-129387192391":{code:"e793"},gift:{code:"e794"},git:{code:"e795"},github:{code:"e796"},"github-square":{code:"e797"},"git-square":{code:"e798"},gittip:{code:"e799"},glass:{code:"e79a"},"glasses-128371283":{code:"e79b"},"glassess-12983169":{code:"e79c"},globe:{code:"e79d"},globe_1:{code:"e79e"},globe_2:{code:"e79f"},globe_3:{code:"e7a0"},"globe-1927436":{code:"e7a1"},"globe-237562338":{code:"e7a2"},"globe-187721877823":{code:"e7a3"},"globe-98892187978123":{code:"e7a4"},"globe-921649146914619":{code:"e7a5"},"globe-wireframe_1":{code:"e7a6"},"google-plus":{code:"e7a7"},"google-plus-square":{code:"e7a8"},gps_1:{code:"e7a9"},"graph-19823619723":{code:"e7aa"},"graph-129846129846":{code:"e7ab"},"graph-chart-123412341":{code:"e7ac"},"graph-chart-2938476923":{code:"e7ad"},"graph-chart-2938476923767":{code:"e7ae"},group:{code:"e7af"},hair_8:{code:"e7b0"},"hair-14141":{code:"e7b1"},"hair-beard-14912746":{code:"e7b2"},"hair-beard-14912746254":{code:"e7b3"},"hair-dryer-325225":{code:"e7b5"},"Hammer-27352325":{code:"e7b6"},"Hammer-234567898":{code:"e7b7"},"hand-1023871923":{code:"e7b8"},"hand-o-down":{code:"e7b9"},"hand-o-left":{code:"e7ba"},"hand-o-right":{code:"e7bb"},"hand-o-up":{code:"e7bc"},"hands-145141":{code:"e7bd"},handshake:{code:"e7be"},"handshake-1283761923":{code:"e7bf"},"hat-874t2745":{code:"e7c0"},"hat-8328754862":{code:"e7c1"},headphones:{code:"e7c2"},"headphones-123":{code:"e7c3"},"headphones-1283719038":{code:"e7c4"},"headphones-1293461293691":{code:"e7c5"},heart:{code:"e7c6"},heart_1:{code:"e7c7"},"heart-2347":{code:"e7c8"},"heart-2355":{code:"e7c9"},"heart-2374823":{code:"e7ca"},"heart-o":{code:"e7cb"},"hexagon-192741":{code:"e7cc"},home:{code:"e7cd"},"hourglass-287452":{code:"e7ce"},"hourglass-6546546":{code:"e7cf"},house_1:{code:"e7d0"},"house-27432784":{code:"e7d1"},"house-92746184":{code:"e7d2"},"house-123712683":{code:"e7d3"},"house-1948671946":{code:"e7d4"},"house-19286976512":{code:"e7d5"},"house-991028394710":{code:"e7d6"},"house-8293746189412":{code:"e7d7"},html5:{code:"e7d8"},"icecream-2352":{code:"e7d9"},"ice-cream-28347752":{code:"e7da"},info_1:{code:"e7db"},"info-2342":{code:"e7dc"},"info-circle":{code:"e7dd"},"information-234715":{code:"e7de"},instagram:{code:"e7df"},institution:{code:"e7e0"},key:{code:"e7e1"},"key-124124":{code:"e7e2"},"lamp-127361":{code:"e7e3"},laptop:{code:"e7e4"},laptop_2:{code:"e7e5"},leaf:{code:"e7e6"},legal:{code:"e7e7"},"lemon-o":{code:"e7e8"},"life-bouy":{code:"e7e9"},"light-bolb-23542":{code:"e7ea"},"light-bolb-235215":{code:"e7eb"},"light-bolb-2937846":{code:"e7ec"},lightbulb_2:{code:"e7ed"},"lightbulb-o":{code:"e7ee"},"lightning-1978236912":{code:"e7ef"},line_thin_11:{code:"e7f0"},link_1:{code:"e7f1"},"link-21525":{code:"e7f2"},"link-28374525":{code:"e7f3"},"link-1864918264":{code:"e7f4"},linkedin:{code:"e7f5"},"linkedin-square":{code:"e7f6"},"links-9238471948":{code:"e7f7"},linux:{code:"e7f8"},"list-ul":{code:"e7f9"},lock:{code:"e7fa"},"lock-12412":{code:"e7fb"},"lock-8984774":{code:"e7fc"},"lock-198736912":{code:"e7fd"},"lock-92816491264":{code:"e7fe"},"lock-2984692836492":{code:"e7ff"},magic:{code:"e800"},magnet:{code:"e801"},"magnifiying-glass-124134":{code:"e802"},"magnifiying-glass-19487198461924":{code:"e803"},"magnifying-glass_1":{code:"e804"},"magnifying-glass-12487":{code:"e805"},"magnifying-glass-1212341":{code:"e806"},"magnifying-glass-zoom-237864982":{code:"e807"},"mail-1264":{code:"e808"},"mail-23423":{code:"e809"},"mail-8847646":{code:"e80a"},"mail-14512412":{code:"e80b"},"mail-29384762":{code:"e80c"},"mail-298461239":{code:"e80d"},"mail-9233865729":{code:"e80e"},"mail-9999988766":{code:"e80f"},"mail-28374562384":{code:"e810"},"mail-210384792345":{code:"e811"},"mail-29184691246912":{code:"e812"},"mail-forward":{code:"e813"},male:{code:"e814"},"man-23472094":{code:"e815"},"man-238472934":{code:"e816"},"man-835629568":{code:"e817"},"man-2975629756":{code:"e818"},"man-98843877347":{code:"e819"},"man-21984671946912":{code:"e81a"},"man-money-128391283":{code:"e81b"},"man-woman-86576":{code:"e81c"},map_1:{code:"e81d"},"map-marker":{code:"e81e"},"map-marker-214214":{code:"e81f"},"map-marker-2345235":{code:"e820"},"map-marker-21421541":{code:"e821"},marker_1:{code:"e822"},medal_2:{code:"e823"},"medal-prize-reward-83746823":{code:"e824"},"meh-o":{code:"e825"},microphone:{code:"e826"},microphone_1:{code:"e827"},"microphone-1243":{code:"e828"},"microphone-19283691":{code:"e829"},"microphone-19182643916":{code:"e82a"},"microphone-192837198367":{code:"e82b"},microscope_2:{code:"e82c"},minus:{code:"e82d"},"minus-12486129":{code:"e82e"},"minus-circle":{code:"e82f"},"mobile-phone":{code:"e830"},"mobile-phone-12342515":{code:"e831"},"mobile-phone-cell-197361931":{code:"e832"},money:{code:"e833"},"money-1983461":{code:"e834"},"money-123812931":{code:"e835"},"money-1923861923":{code:"e836"},"money-2649234242":{code:"e837"},"money-12387619831":{code:"e838"},"money-18741934691243":{code:"e839"},"money-exchange-64754":{code:"e83a"},"money-phone-12836913":{code:"e83b"},"moon-o":{code:"e83c"},"mortar-board":{code:"e83d"},music:{code:"e83e"},music_1:{code:"e83f"},"music-player-298429":{code:"e840"},"music-player-1398127693123":{code:"e841"},"mute-sound-213847619":{code:"e842"},navicon:{code:"e843"},navigation2:{code:"e844"},"next-prev-9187634912":{code:"e845"},"next-prev-91876349127":{code:"e846"},"no-smoking-877367636773":{code:"e847"},"no-swimming-19283791":{code:"e848"},"note-87":{code:"e849"},"note-2352":{code:"e84a"},"note-8787":{code:"e84b"},"note-9564":{code:"e84c"},"note-986454":{code:"e84d"},"note-book_2":{code:"e84e"},openid:{code:"e84f"},"orange-2374y29":{code:"e850"},"page-1028761993":{code:"e851"},"page-1283649163912":{code:"e852"},"page-1286947874929":{code:"e853"},"page-17346128345612":{code:"e854"},"page-1286947874929346":{code:"e855"},pagelines:{code:"e856"},"pages-2342":{code:"e857"},palette_2:{code:"e858"},"palm-tree":{code:"e859"},"palm-tree-2346923764":{code:"e85a"},paperclip:{code:"e85b"},"pasta-275623":{code:"e85c"},pause:{code:"e85d"},paw:{code:"e85e"},pen_paper:{code:"e85f"},"pen-19836912":{code:"e860"},"pen-91786417924":{code:"e861"},"pen-19837198371903":{code:"e862"},"pen-97127668712768":{code:"e863"},"pen-1097107340912341":{code:"e864"},pencil:{code:"e865"},pencil_2:{code:"e866"},people_1:{code:"e867"},people_2:{code:"e868"},people_3:{code:"e869"},people_4:{code:"e86a"},people_5:{code:"e86b"},people_6:{code:"e86c"},people_8:{code:"e86d"},people_16:{code:"e86e"},people_17:{code:"e86f"},people_18:{code:"e870"},people_19:{code:"e871"},people_20:{code:"e872"},people_21:{code:"e873"},people_22:{code:"e874"},people_23:{code:"e875"},people_24:{code:"e876"},people_25:{code:"e877"},people_26:{code:"e878"},people_27:{code:"e879"},people_28:{code:"e87a"},people_29:{code:"e87b"},people_30:{code:"e87c"},people_31:{code:"e87d"},people_32:{code:"e87e"},people_33:{code:"e87f"},people_34:{code:"e880"},"people-1241515":{code:"e881"},"people-12836912":{code:"e882"},"people-123123123":{code:"e883"},"people-123876129":{code:"e884"},"people-1028679861":{code:"e885"},"people-12938719231":{code:"e886"},"person-23423542":{code:"e887"},"person-28126931":{code:"e888"},"person-123981273":{code:"e889"},"person-231412414":{code:"e88a"},"person-1028369875612":{code:"e88b"},phone:{code:"e88c"},phone_1:{code:"e88d"},"phone-12315":{code:"e88e"},"phone-234214":{code:"e88f"},"phone-192386912312":{code:"e890"},"phone-192836196384":{code:"e891"},"phone-986189776523":{code:"e892"},"phone-78872376876823":{code:"e893"},"phone-book_2":{code:"e894"},"phone-sms-998877":{code:"e895"},"phone-square":{code:"e896"},photo:{code:"e897"},picasa:{code:"e898"},"picture-photo-frame-129873461":{code:"e899"},"pie-chart-1927y193":{code:"e89a"},"pie-chart-2341414124":{code:"e89b"},"piggi-bank-1983619":{code:"e89c"},"piggie-bank-12938169":{code:"e89d"},"pin-1631793":{code:"e89e"},"pin-928376492":{code:"e89f"},"pin-948612941":{code:"e8a0"},pinterest:{code:"e8a1"},"pinterest-square":{code:"e8a2"},plane:{code:"e8a3"},play:{code:"e8a4"},"play-1983712983":{code:"e8a5"},"play-circle-o":{code:"e8a6"},"plug-129834719834":{code:"e8a7"},plumber_1:{code:"e8a8"},plumber_2:{code:"e8a9"},plumber_3:{code:"e8aa"},plumber_5:{code:"e8ab"},plumber_6:{code:"e8ac"},plus:{code:"e8ad"},"plus-12847129":{code:"e8ae"},"plus-circle":{code:"e8af"},"plus-square":{code:"e8b0"},"pool-827346":{code:"e8b1"},power:{code:"e8b2"},"power-1":{code:"e8b3"},"power-23423414":{code:"e8b4"},"power-82735482":{code:"e8b5"},"power-on-off-24525":{code:"e8b6"},"present-1238176931":{code:"e8b7"},"price-tag-4871047019":{code:"e8b8"},"price-tag-21938467129":{code:"e8b9"},print:{code:"e8ba"},"printer-234215":{code:"e8bb"},"printer-12948671294":{code:"e8bc"},"printer-981273461298":{code:"e8bd"},profile_2:{code:"e8be"},"puzzle-piece":{code:"e8bf"},"pyramid-12419":{code:"e8c0"},"question-circle":{code:"e8c1"},"question-mark12414":{code:"e8c2"},"quote-left":{code:"e8c3"},"quote-right":{code:"e8c4"},"rain-124817":{code:"e8c5"},"rain-clouds-10943710":{code:"e8c6"},"recycle-cycle-arrows-8765":{code:"e8c7"},reddit:{code:"e8c8"},"reddit-square":{code:"e8c9"},renren:{code:"e8ca"},"restaurant-menu":{code:"e8cb"},"restriction-not-allowed-883478747":{code:"e8cc"},"reward-prize-19283719":{code:"e8cd"},ringswedding:{code:"e8ce"},"rings-wedding-34567":{code:"e8cf"},rocket:{code:"e8d0"},rss:{code:"e8d1"},"rss-square":{code:"e8d2"},"rzor-234214":{code:"e8d3"},"satellite-875334567":{code:"e8d4"},"scale-1487109":{code:"e8d5"},school_1:{code:"e8d6"},school_2:{code:"e8d7"},school_3:{code:"e8d8"},school_4:{code:"e8d9"},"school_5-microscope":{code:"e8da"},"school_6-light-bolb":{code:"e8db"},"school_7-house":{code:"e8dc"},"school_8-book":{code:"e8dd"},"school_9-computer":{code:"e8de"},"school_10-book":{code:"e8df"},"school_11-bus":{code:"e8e0"},"school_13-paint-pallete":{code:"e8e1"},school_14:{code:"e8e2"},"school_15-scissors":{code:"e8e3"},"school_16-football":{code:"e8e4"},"school_17-apple":{code:"e8e5"},"school_18-board":{code:"e8e6"},"school_19-books":{code:"e8e7"},"school_20-book":{code:"e8e8"},"school_21-calculator":{code:"e8e9"},"school_22-notebook":{code:"e8ea"},"school_23-globe":{code:"e8eb"},"school_24-diploma":{code:"e8ec"},"school_25-ruler":{code:"e8ed"},"school_26-hat-graduation":{code:"e8ee"},"school_27-book-library":{code:"e8ef"},"school_28-book":{code:"e8f0"},"school_29-book":{code:"e8f1"},"school_30-case":{code:"e8f2"},"school_31-book":{code:"e8f3"},"school_112-tablet":{code:"e8f4"},"scissors-1412":{code:"e8f5"},"scissors-1412521":{code:"e8f6"},"scissors-23412342":{code:"e8f9"},"scissors-2364923462":{code:"e8fa"},"scooba-29384623194":{code:"e8fb"},"screen-2533":{code:"e8fc"},"screen-8756235":{code:"e8fd"},"screen-298461941":{code:"e8fe"},"screen-3163971623":{code:"e8ff"},search:{code:"e900"},"search-minus":{code:"e901"},"search-plus":{code:"e902"},send:{code:"e903"},"send-o":{code:"e904"},"share-alt":{code:"e905"},"share-alt-square":{code:"e906"},shield:{code:"e907"},"ship-boat-23525":{code:"e908"},"shop-197836192":{code:"e909"},"shopping-cart":{code:"e90a"},"shopping-cart-1928346129":{code:"e90b"},"shovel-1i7461":{code:"e90c"},"shrimp-seafood":{code:"e90d"},sign:{code:"e90e"},signal:{code:"e90f"},"sign-arrows-25256235":{code:"e910"},"sign-in":{code:"e911"},"sign-post-938346914691":{code:"e912"},sinaweibo:{code:"e913"},sitemap:{code:"e914"},skype:{code:"e915"},slack:{code:"e916"},"smile-o":{code:"e917"},"smoking-254213523523":{code:"e918"},"smoking-cigarette-2421421":{code:"e919"},"smoking-cigarette-24214213":{code:"e91a"},"snorkel-198346193":{code:"e91b"},"snow-clouds-21938476129":{code:"e91c"},soundcloud:{code:"e91d"},"sound-mute":{code:"e91e"},"sound-mute-2374682374":{code:"e91f"},"sound-waves-12381":{code:"e920"},"soup-283745":{code:"e921"},"space-shuttle":{code:"e922"},"spade-23845238645":{code:"e923"},"speaker-1208698075":{code:"e924"},"speaker-1923691236":{code:"e925"},"speech-bubbles_2":{code:"e926"},spoon:{code:"e927"},star:{code:"e928"},"star-o":{code:"e929"},"stars-235235":{code:"e92a"},"stars-129846194":{code:"e92b"},steak:{code:"e92c"},"steak-2645232":{code:"e92d"},stethoscope:{code:"e92e"},stop:{code:"e92f"},"student-123639813":{code:"e930"},stumbleupon:{code:"e931"},suitcase:{code:"e932"},"suit-case-235235235":{code:"e933"},"sun-2736483":{code:"e934"},"sun-8746646":{code:"e935"},"sun-28745254":{code:"e936"},"sun-98189237":{code:"e937"},"sun-clouds-18347y12":{code:"e938"},"sun-o":{code:"e939"},"swimming-19283791":{code:"e93a"},tablet:{code:"e93b"},tablet_2:{code:"e93c"},"tablet-21417451":{code:"e93d"},"tablet-1234812739":{code:"e93e"},"tablet-1827364182973":{code:"e93f"},tag:{code:"e940"},"tag-230472034":{code:"e941"},"tag-2987462468274":{code:"e942"},tags:{code:"e943"},"target-97129874691":{code:"e944"},"target-190286398612":{code:"e945"},team_2:{code:"e946"},tennis:{code:"e947"},tennis_1:{code:"e948"},"tent-273525":{code:"e949"},"tent-8736482":{code:"e94a"},"text-bubble_1":{code:"e94b"},th:{code:"e94c"},"th-large":{code:"e94d"},"th-list":{code:"e94e"},"thumbs-o-down":{code:"e94f"},"thumbs-o-up":{code:"e950"},"thumb-tack":{code:"e951"},ticket:{code:"e952"},"tie-1928376129":{code:"e953"},times:{code:"e954"},"times-circle":{code:"e955"},"times-circle-o":{code:"e956"},"tool-2523523":{code:"e957"},"tool-24141414":{code:"e958"},"toolbox-18276346":{code:"e959"},"Tools_1-screwdriver-wranch":{code:"e95a"},Tools_2:{code:"e95b"},Tools_3:{code:"e95c"},"Tools_4-drill":{code:"e95d"},"Tools_5-paint-brush":{code:"e95e"},"Tools_6-brush-paint":{code:"e95f"},"Tools_7-hammer-23498":{code:"e960"},Tools_8:{code:"e961"},Tools_9:{code:"e962"},"Tools_10-shovel":{code:"e963"},"Tools_11-wranch":{code:"e964"},"Tools_12-screwdriver":{code:"e965"},"Tools_13-scissors":{code:"e966"},"Tools_14-knife":{code:"e967"},"Tools_15-pencil":{code:"e968"},Tools_16:{code:"e969"},Tools_17:{code:"e96a"},Tools_18:{code:"e96b"},"Tools_19-plunger":{code:"e96c"},"Tools_20-leak":{code:"e96d"},"Tools_21-saw":{code:"e96e"},"Tools_22-hose":{code:"e96f"},Tools_23:{code:"e970"},"Tools_24-sink":{code:"e971"},"Tools_25-shower":{code:"e972"},Tools_26:{code:"e973"},"Tools_27-tub-bath":{code:"e974"},"Tools_28-car-van":{code:"e975"},"Tools_30-plunger-toilet":{code:"e976"},"Tools_31-toolbox":{code:"e977"},"Tools_32-plunger":{code:"e978"},Tools_33:{code:"e979"},"Tools_34-screw":{code:"e97a"},"Tools_35-saw":{code:"e97b"},"Tools_36-wranch":{code:"e97c"},"Tools_37-hammer":{code:"e97d"},"Tools_38-hammer":{code:"e97e"},Tools_39:{code:"e97f"},Tools_40:{code:"e980"},Tools_41:{code:"e981"},Tools_42:{code:"e982"},Tools_45:{code:"e983"},tooth_1:{code:"e984"},tooth_2:{code:"e985"},tooth_3:{code:"e986"},tooth_4:{code:"e987"},tooth_5:{code:"e988"},tooth_6:{code:"e989"},tooth_7:{code:"e98a"},tooth_8:{code:"e98b"},tooth_9:{code:"e98c"},tooth_10:{code:"e98d"},tooth_11:{code:"e98e"},tooth_12:{code:"e98f"},tooth_13:{code:"e990"},tooth_14:{code:"e991"},tooth_15:{code:"e992"},tooth_16:{code:"e993"},"trash-bin-12412":{code:"e994"},"trash-bin-25251":{code:"e995"},"trash-bin-8823787349":{code:"e996"},tree:{code:"e997"},"tree-23252352":{code:"e998"},"trees-12412":{code:"e999"},"trees-99887554":{code:"e99a"},tripadvisor:{code:"e99b"},"trolly-764545":{code:"e99c"},trophy:{code:"e99d"},truck:{code:"e99e"},"truck-19872369128":{code:"e99f"},"truck-car-2362":{code:"e9a0"},truphy:{code:"e9a1"},tumblr:{code:"e9a2"},"tumblr-square":{code:"e9a3"},"tv-204585":{code:"e9a4"},"tv-2138474":{code:"e9a5"},twitter:{code:"e9a6"},twitter2:{code:"e9a7"},"twitter-square":{code:"e9a8"},umbrella:{code:"e9a9"},"umbrella-8758":{code:"e9aa"},"umbrella-274621874821":{code:"e9ab"},unlock:{code:"e9ac"},upload:{code:"e9ad"},user:{code:"e9ae"},"user-md":{code:"e9af"},"via--contact-19283671923":{code:"e9b0"},"video-camera":{code:"e9b1"},"video-camera-234986":{code:"e9b2"},"video-camera-3246262":{code:"e9b3"},"video-camera-21412412":{code:"e9b4"},"video-camera-1028371093":{code:"e9b5"},"vimeo-2342":{code:"e9b6"},"vimeo-square":{code:"e9b7"},vine:{code:"e9b8"},vk:{code:"e9b9"},"volume-12312312":{code:"e9ba"},"volume-down":{code:"e9bb"},"volume-off":{code:"e9bc"},"volume-up":{code:"e9bd"},"warning-sign-1927846192":{code:"e9be"},wechat:{code:"e9bf"},weibo:{code:"e9c0"},wheelchair:{code:"e9c1"},"wifi-signal-124514124":{code:"e9c2"},"wifi-signal-1283464192":{code:"e9c3"},windows:{code:"e9c4"},"wine-8377328":{code:"e9c5"},"wine-glass":{code:"e9c6"},"wine-glasses":{code:"e9c7"},"woman-128371209":{code:"e9c8"},"wranch-821451":{code:"e9c9"},"wranch-283748723":{code:"e9ca"},wrench:{code:"e9cb"},wrench_1:{code:"e9cc"},"yen-234":{code:"e9cd"},youtube:{code:"e9ce"},"youtube-square":{code:"e9cf"},"zoom-magnifying-glass":{code:"e9d0"},"zoom-spying-glass-1827358172":{code:"e9d1"}}};var ImageBox=new function(){var t=this;this.Layout={stretched:"stretched",stretchedToFill:"stretchedToFill",fill:"fill",normal:"normal",repeat:"repeat",repeatHorizontally:"repeatHorizontally",repeatVertically:"repeatVertically",custom:"custom"};this.States={NoImage:"no-image",ImageLoading:"image-loading",ImageError:"image-error",ImageShown:"image-shown"};this.isImageBox=function(y){return y.controllerType===t};this.create=function(D,K){K=$.extend({},{image:undefined,useOptimization:true,moveCropping:false,minStretchingSize:false,optimizeSpeed:true},K);var J;if(D!==undefined){J=$(D)}else{J=$("<div class='positioned'></div>")}J.addStatesGroup(ImageBox.States,{groupName:"image-state",defaultState:ImageBox.States.NoImage});J.addClass("image-box-old").toggleClass("optimize-speed",K.optimizeSpeed);var F=$([]);var B=$([]);var C;var I=K.useOptimization&&($.support.backgroundSize!==false);J.toggleClass("background-size-method",I);J.toggleClass("inner-image-method",!I);if(!I){C=$("<span class='image-box-container-wrapper-old absolute-fill'></span>").appendTo(J);F=$("<div class='image-box-image-container-old'></div>").css("visibility","hidden").appendTo(C);B=$("<img class='image-box-image-old'/>").addClass("absolute-fill").appendTo(F)}var z=ObservableFlag.createConditionalPositive({valueChangeCallback:function(L){J.toggleClass("hide-image",!L)}});var A={controllerType:t,$element:J,imageStateChangedEvent:SimpleEvent.create(),imageLoaded:SimpleEvent.create(),useBackgroundSize:I,layoutChangedEvent:SimpleEvent.create(),onLayoutChanged:function(L){A.layoutChangedEvent.bind(L);return A},customLayoutChangedEvent:SimpleEvent.create(),onCustomLayoutChanged:function(L){A.customLayoutChangedEvent.bind(L);return A},postponeLayout:false,$image:B,$imageContainer:F,$imageContainerWrapper:C,showLoadingState:true,options:$.extend({},{imageLoadingClass:"loading-image",imageErrorClass:"image-error"},K),info:{imageUrl:null,imageSize:undefined},loadImage:y,toggleDisplayImage:function(M,L){z.setValue(M,L)},clearImage:function(){H(null)},setImage:H,refreshSize:function(){if(!A.editMode){p(A)}},customLayout:undefined,setCustomLayout:function(L){if(!A.editMode){d(A,L);p(A)}},getCustomLayout:function(){return A.customLayout},toggleLayoutUpdatePostponing:function(L){if(L!==A.postponeLayout){A.postponeLayout=L;if(!L){p(A)}}},layout:ImageBox.Layout.stretched,position:{vertical:VerticalAlignment.Centered,horizontal:HorizontalAlignment.Centered},imageIsLoaded:false,currentLoadedImageUrl:undefined,setLayout:function(L){A.layout=L;if(A.editMode){}else{p(A)}A.layoutChangedEvent.fire(A,L);return A},setPosition:function(L){A.position=$.extend(A.position,L);if(A.editMode){b(A)}else{p(A)}return A},switchToViewMode:function(L){o(A,L)}};J.data("image-box",A);G(ImageBox.States.NoImage);if(K.image){A.setImage(K.image,{startLoading:true})}return A;function E(){return I?A.$element:A.$image}function H(M,L){L=$.extend({startLoading:false,loadCallback:$.noop,deferReplacement:false},L);if(A.info.imageUrl==M){return}A.backgroundImageSet=false;A.info.imageUrl=M;A.imageIsLoaded=false;if(!M){if(A.useBackgroundSize){A.$element.css("backgroundImage","none")}A.$imageContainer.css("visibility","hidden");G(ImageBox.States.NoImage);return}if(M&&L.startLoading){y(L)}}function G(L){if(A.currentState!==L){A.currentState=L;A.imageStateChangedEvent.fire(A,L);A.$element.setState(L,"image-state")}}function y(M){M=$.extend({loadCallback:$.noop,deferReplacement:false},M);if(!A.info.imageUrl){return}if(A.imageIsLoaded){M.loadCallback(A.info);return}if(!M.deferReplacement){v(A)}if(!q(A)){p(A)}else{A.toggleDisplayImage(false,"DimensionsRequired")}G(ImageBox.States.ImageLoading);var L=A.info.imageUrl;ImagesLoader.loadImages(encodeURI(L),{loadCallback:N,errorCallback:O});function O(){G(ImageBox.States.ImageError)}function N(Q){if(M.deferReplacement){v(A)}A.toggleDisplayImage(true,"DimensionsRequired");var P=A.info.imageUrl;if(P!==L&&A.currentLoadedImageUrl===P){return}A.$originalImage=Q.$image;A.info.imageSize=Q.imageSize;A.imageIsLoaded=true;A.currentLoadedImageUrl=L;A.$imageContainer.css("visibility","inherit");G(ImageBox.States.ImageShown);A.imageLoaded.fire();p(A);M.loadCallback(A.info)}}};function v(y){if(y.useBackgroundSize){y.$element.css("backgroundImage","url({0})".format(encodeURI(y.info.imageUrl)))}else{y.$image.attr("src",encodeURI(y.info.imageUrl))}}function q(y){if(y.useBackgroundSize){return(y.options.minStretchingSize!==false)}return true}function p(y){if(y.postponeLayout){return}if(!y.imageIsLoaded&&q(y)){return}if(m(y)){y.$image.hide();if(!y.backgroundImageSet){y.$imageContainer.css({"background-image":"url("+encodeURI(y.info.imageUrl)+")"});y.backgroundImageSet=true}}else{y.$image.show();y.$imageContainer.css({"background-image":"none"});y.backgroundImageSet=false}switch(y.layout){case ImageBox.Layout.repeat:c(y);break;case ImageBox.Layout.repeatHorizontally:u(y);break;case ImageBox.Layout.repeatVertically:h(y);break;case ImageBox.Layout.stretched:a(y);break;case ImageBox.Layout.stretchedToFill:s(y);break;case ImageBox.Layout.fill:x(y);break;case ImageBox.Layout.normal:g(y);break;case ImageBox.Layout.custom:l(y);break}b(y)}function m(y){if(y.useBackgroundSize){return false}return y.layout===ImageBox.Layout.repeat||y.layout===ImageBox.Layout.repeatHorizontally||y.layout===ImageBox.Layout.repeatVertically}function d(z,y){z.customLayout=y;z.customLayoutChangedEvent.fire(z,y)}function n(z){if(z.useBackgroundSize){var A={width:z.$element.innerWidth(),height:z.$element.innerHeight()};var y=z.$element.offset();y.left+=parseFloat(z.$element.css("borderLeftWidth"))+parseFloat(z.$element.css("paddingLeft"))+parseFloat(z.$element.css("marginLeft"));y.top+=parseFloat(z.$element.css("borderTopWidth"))+parseFloat(z.$element.css("paddingTop"))+parseFloat(z.$element.css("marginTop"));return $.getArea(y,A)}else{return z.$imageContainerWrapper.getArea()}}function w(y){if(y.useBackgroundSize){var z=j(y,y.layout);var A=i(y,z);var C=n(y);var B={left:C.left+A.left,top:C.top+A.top};return $.getArea(B,z)}else{return y.$image.getArea()}}function o(A,F){if(A.editMode){A.$element.removeClass("edit-mode");if(F){var C=n(A);var E=A.helper.getArea();var D=E.left-C.left;var z=E.top-C.top;var B=A.helper.elementSize();var y=A.$element.elementSize();d(A,{leftRatio:D/C.width,topRatio:z/C.height,widthRatio:E.width/C.width,heightRatio:E.height/C.height});A.setLayout(ImageBox.Layout.custom)}else{if(A.originalLayout){A.setLayout(A.originalLayout)}}p(A);A.helper.draggable("destroy");A.helper.remove();A.editMode=false}}function r(y){return"{0}px {1}px".format(y.width,y.height)}function f(y){return"{0}px {1}px".format(y.left,y.top)}function i(A,B){var y=A.$element.innerSize();if(A.layout===ImageBox.Layout.custom){var z=A.customLayout;return{left:z.leftRatio*y.width,top:z.topRatio*y.height}}B=$.valueOrDefault(B,j(A));var D;var C;switch(A.position.horizontal){case HorizontalAlignment.Left:D=0;break;case HorizontalAlignment.Right:D=y.width-B.width;break;case HorizontalAlignment.Centered:D=y.width/2-B.width/2;break}switch(A.position.vertical){case VerticalAlignment.Top:C=0;break;case VerticalAlignment.Bottom:C=y.height-B.height;break;case VerticalAlignment.Centered:C=y.height/2-B.height/2;break}return{left:D,top:C}}function j(B,A){A=$.valueOrDefault(A,B.layout);switch(A){case ImageBox.Layout.stretched:return $.stretch(B.info.imageSize,B.$element.elementSize());case ImageBox.Layout.stretchedToFill:return $.stretch(B.info.imageSize,B.$element.elementSize(),true);case ImageBox.Layout.fill:return B.$element.elementSize();case ImageBox.Layout.normal:return B.info.imageSize;case ImageBox.Layout.custom:var z=B.customLayout;var y=B.$element.elementSize();return{width:z.widthRatio*y.width,height:z.heightRatio*y.height}}}function c(y){if(y.useBackgroundSize){y.$element.css({"background-repeat":"repeat",backgroundSize:"auto auto"})}else{y.$imageContainer.clearCentering().css({width:"100%",height:"100%",left:0,top:0,"background-repeat":"repeat"})}}function u(y){if(y.useBackgroundSize){y.$element.css({"background-repeat":"repeat-x",backgroundSize:"auto auto"})}else{y.$imageContainer.elementSize({height:y.info.imageSize.height,width:y.$element.width()+y.info.imageSize.width}).css({"background-repeat":"repeat-x"})}}function h(y){if(y.useBackgroundSize){y.$element.css({"background-repeat":"repeat-y",backgroundSize:"auto auto"})}else{y.$imageContainer.elementSize({width:y.info.imageSize.width,height:y.$element.height()+y.info.imageSize.height}).css({"background-repeat":"repeat-y"})}}function a(y){if(k(y)){if(y.useBackgroundSize){y.$element.css({backgroundSize:"contain","background-repeat":"no-repeat"})}else{var z=j(y);y.$imageContainer.elementSize(z)}}else{g(y)}}function s(y){if(k(y)){if(y.useBackgroundSize){y.$element.css({backgroundSize:"cover","background-repeat":"no-repeat"})}else{var z=j(y);y.$imageContainer.elementSize(z)}}else{g(y)}}function l(A){if(A.customLayout===undefined){g(A)}else{var y=A.$element.elementSize();var z=A.customLayout;var B={width:z.widthRatio*y.width,height:z.heightRatio*y.height};var C={left:z.leftRatio*y.width,top:z.topRatio*y.height};if(A.useBackgroundSize){A.$element.css({backgroundSize:r(B),"background-position":f(C),"background-repeat":"no-repeat"})}else{A.$imageContainer.clearCentering().elementSize(B).css({left:C.left+"px",top:C.top+"px"})}}}function g(y){if(y.useBackgroundSize){y.$element.css({"background-repeat":"no-repeat",backgroundSize:"auto auto"})}else{y.$imageContainer.elementSize(y.info.imageSize)}}function x(y){if(y.useBackgroundSize){y.$element.css({backgroundSize:"100% 100%","background-repeat":"no-repeat"})}else{y.$imageContainer.clearCentering().css({width:"100%",height:"100%",left:0,top:0})}}function b(z){if(z.layout!==ImageBox.Layout.custom&&z.layout!==ImageBox.Layout.repeat&&z.layout!==ImageBox.Layout.fill){var y="{0} {1}".format(z.position.horizontal,z.position.vertical);if(z.useBackgroundSize){z.$element.css({"background-position":y})}else{z.$imageContainer.positionHorizontally(z.position.horizontal).positionVertically(z.position.vertical).css({"background-position":y})}}else{if(z.layout!==ImageBox.Layout.custom){if(z.useBackgroundSize){z.$element.css({"background-position":""})}else{z.$imageContainer.css({"background-position":""})}}}}function k(y){var z=y.options.minStretchingSize;if(z===false){return true}if(z===true){z=y.$element.elementSize()}return(y.info.imageSize.width>z.width||y.info.imageSize.height>z.height)}}();(function(a){a.fn.imageBox=function(c){var b=a(this).data("image-box");if(b===undefined){b=ImageBox.create(this,c)}return b}})(jQuery);(function(a){a.fn.scrollBar=function(b){var c=a(this).data("widget-scrollbar");if(c===undefined){c=d(a(this),b);a(this).data("widget-scrollbar",c)}return c;function d(p,q){q=a.extend({reactToSlideAreaClick:false,scrollDownClass:undefined,scrollUpClass:undefined,scrollBarClass:undefined,showScrollButtons:false,autoHide:true,orientation:"vertical",min:0,max:100,handleMinSize:20,value:0},q);var h=q.showScrollButtons;var n=undefined;var g={id:a.weakID(),$element:p,valueChangedEvent:SimpleEvent.create(),isVisible:ObservableFlag.createConditionalPositive({valueChangeCallback:function(r,s){g.$element.toggleDisplayed(r,s)}}),range:undefined,size:undefined,handleSize:undefined,handleStep:undefined,options:q};p.addClass("scrollbar widget positioned").addDisplayingStates().trackHoveringState().addClass(g.options.scrollBarClass);if(h){g.$scrollUp=a("<div class='scroll-up scroll-button'></div>").css("position","absolute").appendTo(p).makeSimpleButton().addClass(g.options.scrollUpClass).mouseHold(function(){l(g.options.value-1,true)});g.$scrollDown=a("<div class='scroll-down scroll-button'></div>").css("position","absolute").appendTo(p).makeSimpleButton().addClass(g.options.scrollDownClass).mouseHold(function(){l(g.options.value+1,true)})}g.$body=a("<div class='scrollbar-body'></div>").css("position","absolute").appendTo(p);g.$slideArea=a("<div class='slide-area'></div>").css("position","absolute").appendTo(g.$body).trackHoveringState();if(q.reactToSlideAreaClick){g.$slideArea.mousedown(function(s){if(a(s.target).hasAncestor(g.$handle)){return}var r=a.getMouseOffset(s);var t=g.$slideArea.offset();if(g.options.orientation==="vertical"){g.$handle.css("top",r.top-t.top)}else{g.$handle.css("left",r.left-t.left)}k();i()})}g.$handle=a("<div class='scrollbar-handle' style='position: absolute'></div>").makeButton().addDisplayingStates().mousedown(function(r){if(a(r.target).parents().andSelf().hasClass("attached-widget")){return}DraggingBehaviours.Draggable.startDragging({$element:a(this),event:r,onDrag:function(t,s){k(m()?s.position.top:s.position.left)},onStart:function(){p.addClass("state-active");g.isActive=true},onEnd:function(){p.removeClass("state-active");g.isActive=false},behaviourOptions:{axis:m()?"y":"x",containment:"parent"}})}).appendTo(g.$slideArea);o();f();a.extend(g,{setValue:function(s){var r=l(s);if(r){i()}},getValue:function(){return g.options.value},attachWidget:function(t,s,r){t.addClass("attached-widget").appendTo(g.$handle).positionHorizontally(s).positionVertically(r)},connectToScrollable:j,refresh:function(){var r=g.connectedScrollable;if(r){g.updatingScrollBarValue=true;a.extend(g.options,{min:0,max:r.getMaxScrollOffset(g.options.orientation)});l(r.getScrollOffset(g.options.orientation));g.updatingScrollBarValue=false}f()},activateAutoRefresh:function(){var r=g.connectedScrollable;if(r){if(!n){n=StyleListener.create(r.$element,{properties:["scrollHeight"],minInterval:100,callback:function(){g.refresh()}})}n.activate()}},deactivateAutoRefresh:function(){if(n){n.deactivate()}}});return g;function o(){var s=g.options.orientation==="vertical";var t=g.options.showScrollButtons;var r=a([]);r.pushElements(g.$element);if(t){r.pushElements(g.$scrollDown).pushElements(g.$scrollUp)}r.toggleClass("horizontal",!s);r.toggleClass("vertical",s);if(s&&t){g.$body.css({top:g.$scrollUp.outerHeight(),bottom:g.$scrollDown.outerHeight()})}if(!s&&t){g.$body.css({left:g.$scrollUp.outerWidth(),right:g.$scrollDown.outerWidth()})}if(t){g.$scrollUp.css({left:0,right:s?0:"",top:0,bottom:s?"":0});g.$scrollDown.css({left:s?0:"",right:0,top:s?"":0,bottom:0})}}function f(){var r=g.options.orientation==="vertical";g.range=g.options.max-g.options.min;g.isVisible.setValue(!g.options.autoHide||g.range>0);g.$handle.toggleDisplayed(g.range>0);g.size=r?g.$slideArea.height():g.$slideArea.width();g.handleSize=Math.min(Math.max(g.size-g.range,g.options.handleMinSize),g.size);g.handleRange=g.size-g.handleSize;g.handleStep=g.range/g.handleRange;i()}function l(r){r=a.valueOrDefault(r,g.options.value);r=Math.max(Math.min(r,g.options.max),g.options.min);if(g.options.value!==r){g.options.value=r;g.valueChangedEvent.fire();return true}else{return false}}function i(){var r=g.range>0;if(r){var s=g.options.orientation==="vertical";if(s){g.$handle.css({width:""});g.$handle.outerHeight(g.handleSize)}else{g.$handle.css({height:""});g.$handle.outerWidth(g.handleSize)}g.$handle.css({top:s?g.options.value/g.handleStep:"",left:!s?g.options.value/g.handleStep:""})}}function m(){return g.options.orientation==="vertical"}function k(r){if(r===undefined){r=m()?g.$handle.css("top"):g.$handle.css("left")}l(parseFloat(r)*g.handleStep)}function j(r){if(!a.isPlainObject(r)){r=a(r).getScrollableController()}var s=g.connectedScrollable;if(s){s.refreshedEvent.unbind(g.id);s.scrollingEvent.unbind(g.id);g.valueChangedEvent.unbind("scrollableConnection")}g.connectedScrollable=r;SimpleEvent.bind([r.refreshedEvent,r.scrollingEvent],function(){if(!g.isActive){g.refresh()}},g.id);g.valueChangedEvent.bind(function(){if(!g.updatingScrollBarValue){r.scrollToOffset(g.getValue(),false,a.noop,g.options.orientation)}},"scrollableConnection");g.refresh();return g}}}})(jQuery);var TextBoxTypes={Text:1,Integer:2,Float:3,Date:4};(function(a){a.fn.textBox=function(j){j=a.extend({textBoxClass:undefined,labelText:undefined,hideLabelOnFocus:true,textBoxType:TextBoxTypes.Text,allowNegativeNumbers:true,textTransform:a.identity,textChangedCallback:a.noop,validationChangedCallback:a.noop,focusChangedCallback:a.noop,validationFunctions:[],addButtonArea:false,validateEmptyText:false,addValidationClasses:true,addResetButton:false,autoComplete:false,inputPrefix:undefined,isBlock:false,restrictToCharacters:false,restrictToPattern:false,pasteProcessing:false,textProcessing:false,maxChars:undefined,readOnly:false,lowerCaseOnly:false},j);var t={};var J=j.autoComplete;var H=j.textTransform;var I=j.restrictToCharacters;var w=j.restrictToPattern;var D=j.pasteProcessing;var A=j.textProcessing;j.validationFunctions=a.makeArray(j.validationFunctions);var C=j.labelText!==undefined;var k=a(this).addClass("text-box-input");k.wrap("<span class='text-box'></span>");var o=k.parent().addClass(j.textBoxClass).addDisablingStates().toggleEnable(true);k.wrap("<span class='text-box-input-wrapper'></span>");var n=k.parent();if(J){J=a.extend({appendTo:o,values:[]},J)}if(j.isBlock){o.addClass("block")}if(j.lowerCaseOnly){k.addClass("lower-case")}if(j.maxChars){k.attr("maxLength",j.maxChars)}if(j.readOnly){k.attr("readOnly",true)}var d;if(j.addResetButton){var l=a("<span class='right-block text-box-buttons'></span>").appendTo(o);a("<span class='height-normalizer'></span>").appendTo(l);d=a("<span class='reset-text-box-button vertically-centered'></span>").appendTo(l).makeSimpleButton().addDisplayingStates().buttonClick(function(){t.clear()});o.addClass("with-reset-button")}var E;if(j.addButtonArea){E=a("<span class='text-box-button-area'></span>").prependTo(o)}var v=a.merge([],j.validationFunctions);if(j.textBoxType===TextBoxTypes.Float){v.push(TextValidation.validateFloat)}var z=undefined;var y=a.merge([],v);var s=k.attr("id");if(!s){s=a.uniqueID();k.attr("id",s)}var B;if(C){B=a("<label class='text-box-label' for='"+s+"'></label>").addVisibilityStates().text(j.labelText).appendTo(o)}if(j.textBoxType===TextBoxTypes.Float||j.textBoxType===TextBoxTypes.Integer){k.makeNumericInput({allowDecimalPoint:j.textBoxType===TextBoxTypes.Float,allowNegativeNumbers:j.allowNegativeNumbers})}else{if(I||w){var i;if(I){i=XRegExp(I)}var x;if(w){x=XRegExp(w)}k.keypress(function(K){var P=K||window.event;var N=P.keyCode||P.which;var L=String.fromCharCode(N);if(N==13||K.charCode!==0){var O=k.caret();var M=k.val();M=M.substring(0,O.start)+L+M.substring(O.end,M.length);if((i&&!i.test(L))||(x&&!x.test(M))){P.returnValue=false;if(P.preventDefault){P.preventDefault()}}}})}}if(D){k.bind("paste",function(K){setTimeout(function(){var L=k.val();k.val(D(L))},0)})}k.onTextInputTriggered(function(){t.textInputTriggeredEvent.fire();g()}).focus(function(){if(C&&j.hideLabelOnFocus){B.toggleVisibility(false,"Focused")}}).blur(function(){if(C&&j.hideLabelOnFocus){B.toggleVisibility(true,"Focused")}});if(!k.is("textarea")){k.keydown(function(K){if(K.which===KeyCodes.Enter){t.enterPressed.fire()}})}var F=ObservableFlag.createConditionalPositive({valueChangeCallback:function(K){if(K){k.removeAttr("disabled")}else{k.attr("disabled","true")}o.toggleEnable(K)}});var m=ObservableFlag.create(false,{valueChangeCallback:function(K){j.focusChangedCallback.call(t,K);t.focusChangedEvent.fire(t,K);if(!K&&t.isNumeric()&&isNaN(u())){t.setValue(p())}}});var c;var b;var r;var h=ObservableObject.create(k.val());a.extend(t,{$element:o,$textInput:k,$textBoxLabel:B,$textBox:o,$textInputWrapper:n,$buttonArea:E,getObservableCurrentText:function(){return h},enterPressed:SimpleEvent.create(),textChangedEvent:SimpleEvent.create(),textInputTriggeredEvent:SimpleEvent.create(),validationChangedEvent:SimpleEvent.create(),focusChangedEvent:SimpleEvent.create(),addLeftDecorator:function(K){if(!b){b=a("<span class='block float-left inline-decorators'><span class='height-normalizer'></span></span>").prependTo(o)}K.appendTo(b);if(!c){c=a("<span class='float-clear'></span>").appendTo(o)}},addRightDecorator:function(K){if(!r){r=a("<span class='block float-right inline-decorators'><span class='height-normalizer'></span></span>").prependTo(o)}K.appendTo(r);if(!c){c=a("<span class='float-clear'></span>").appendTo(o)}},addInputPrefix:function(K){o.addClass("with-input-prefix");a("<label class='text-box-input-prefix inline-block float-left' for='{1}'>{0}</label>".format(K,s)).prependTo(o);if(!c){c=a("<span class='float-clear'></span>").appendTo(o)}},setInputPrefix:function(K){if(o.is(".with-input-prefix")){a(".text-box-input-prefix",o).text(K)}else{t.addInputPrefix(K)}},attachLabel:function(K){a(K).attr("for",s);return t},getText:function(){return H(k.val())},setText:function(K){k.val(K);g(false);return t},clear:function(){t.setText("")},setValue:function(K){if(K===null||K===undefined){t.setText("")}else{if(m.isFalse()||K!==t.getValue()){t.setText(K.toString())}}},getValue:function(){var L=t.getText();var K;switch(j.textBoxType){case TextBoxTypes.Text:case TextBoxTypes.Date:return L;case TextBoxTypes.Integer:K=parseInt(L,10);return isNaN(K)?0:K;case TextBoxTypes.Float:K=parseFloat(L,10);return isNaN(K)?0:K}},enable:function(K){F.setValue(true,K)},disable:function(K){F.setValue(false,K)},toggleEnable:function(K,L){if(K){t.enable(L)}else{t.disable(L)}},focus:function(){k.focus()},blur:function(){k.blur()},isNumeric:function(){return j.textBoxType===TextBoxTypes.Integer||j.textBoxType===TextBoxTypes.Float},isValid:function(){return z},getFailedValidations:function(){return y},addFilteringSupport:function(M,K){K=a.extend({valueSelector:a.identity},K);var L=K.valueSelector;M.setFilter(function(O){var N=a.trim(t.getText()).toLowerCase();if(N===""){return O}return a.grep(O,function(P){return a.trim(L(P.item)).toLowerCase().indexOf(N)>=0})});t.textInputTriggeredEvent.bind(function(){M.refilter()})}});f();G();o.trackFocus({stateChangeCallback:function(K){m.setValue(K==="state-focused")}});if(d){t.textChangedEvent.bindAndExecute(function(){d.toggleDisplayed(t.getText()!=="")})}if(j.inputPrefix){t.addInputPrefix(j.inputPrefix)}return t;function f(){if(!J){return}var L=GenericListPanel.createSelectionListDropPanel({items:J.values,maxHeight:200,selectionCallback:function(O){t.setText(O)}});L.$element.preventBrowserBehaviour();var N=L.itemsList;var M=SimpleEvent.createEventListener(t.textInputTriggeredEvent,function(){N.refilter()});k.mousedown(function(){K()});m.valueChangedEvent.bind(function(){if(m.isFalse()){L.requestDeactivation()}});function K(){L.openAsDropPanel({contextClass:"text-box-auto-complete",appendTo:J.appendTo,relativeTo:o,closeCallback:function(){M.deactivate()},positioningFunction:a.buildPositioningFunction().beforePositioning(function(){a(this).outerWidth(o.outerWidth())}).alignHorizontally(Side.Left,Side.Left).alignVertically(Side.Top,Side.Bottom)});N.setFilter(function(P){var O=a.trim(t.getText()).toLowerCase();return a.grep(P,function(Q){return a.trim(Q.item).toLowerCase().indexOf(O)>=0})});M.activate()}}function u(){var K=t.getText();switch(j.textBoxType){case TextBoxTypes.Text:return K;case TextBoxTypes.Integer:return parseInt(K,10);case TextBoxTypes.Float:return parseFloat(K,10)}}function p(){var K=u();return isNaN(K)?0:K}function g(){var K=k.val();if(A){var L=A(K);if(L!==K){k.val(L);K=L}}if(h.setValue(K)){G();q();if(C){if(k.val()!=""){B.toggleVisibility(false,"Content")}else{B.toggleVisibility(true,"Content")}}}}function q(){var K=k.val();t.textChangedEvent.fire(t,K);j.textChangedCallback.call(t,K)}function G(){var N=z;y=[];var M=t.getText();if(j.validateEmptyText||M!==""){for(var L=0;L<v.length;L++){var K=v[L];if(!K.call(t,M)){y.push(K)}}}z=(y.length===0);if(N!==z){j.validationChangedCallback.call(t,z);t.validationChangedEvent.fire(t,z);if(j.addValidationClasses){o.toggleClass("state-valid",z);o.toggleClass("state-invalid",!z)}}}}})(jQuery);(function(a){a.defaultIdComparer=function(c,b){return c!==undefined&&b!==undefined&&c.id==b.id};a.createArrayEqualityComparer=function(b){return function(d,c){if(d===undefined||c===undefined){return d===c}else{if(d===null||c===null){return d===c}else{if(d.length!==c.length){return false}else{for(var f=0;f<d.length;f++){if(!b(d[f],c[f])){return false}}return true}}}}};a.diffObjectKeys=function(f,d){if(f===d){return{}}if(!d){return a.extend({},f)}var b={};for(var c in d){if(!f||!f.hasOwnProperty(c)||!a.defaultEqualityComparer(f[c],d[c])){b[c]=d[c]}}return b};a.defaultEqualityComparer=function(f,c){var k=typeof f;var g=typeof c;if(k!==g){return false}if(a.isArray(f)){if(f.length!==c.length){return false}for(var j=0;j<f.length;j++){if(!a.defaultEqualityComparer(f[j],c[j])){return false}}return true}else{if(k!=="object"||!a.isPlainObject(f)){return f===c}else{var d=a.getKeys(f);var b=a.getKeys(c);if(d.length!==b.length){return false}for(var j=0;j<d.length;j++){var h=d[j];if(!a.defaultEqualityComparer(f[h],c[h])){return false}}return true}}};a.createFieldsEqualityComparer=function(b,c){return function(f,d){if(f===undefined||d===undefined){return f===d}else{if(f===null||d===null){return f===d}else{for(var g=0;g<b.length;g++){var h=b[g];if(c&&c[h]){if(!c[h](f[h],d[h])){return false}}if(f[h]!==d[h]){return false}}return true}}}};a.referencesEqualityComparer=function(c,b){return c===b};a.nullLastComparer=function(c,b){if(c===null||c===undefined){return 1}else{if(b===null||b===undefined){return -1}else{return c-b}}};a.nullFirstComparer=function(c,b){if(c===null||c===undefined){return -1}else{if(b===null||b===undefined){return 1}else{return c-b}}};a.alphaNumericCompare=function(f,d){var j=f.split(/(\d+)/);var h=d.split(/(\d+)/);var g=Math.min(j.length,h.length);for(var k=0;k<g;k++){if(j[k]!==h[k]){var c=Number(j[k]);var l=Number(h[k]);if((c==j[k])&&(l==h[k])){return c-l}else{return(j[k]>h[k])?1:-1}}}return j.length-h.length};a.createArraySetsEqualityComparer=function(b){b=a.valueOrDefault(b,a.identity);return function(g,f){if(!g||!f){return g===f}else{if(g.length!==f.length){return false}var d;var c={};for(d=0;d<g.length;d++){c[b(g[d])]=true}for(d=0;d<f.length;d++){if(!c[b(f[d])]){return false}}return true}}};a.defaultArrayEqualityComparer=a.createArrayEqualityComparer(a.referencesEqualityComparer);a.defaultArraySetsEqualityComparer=a.createArraySetsEqualityComparer(a.identity)})(jQuery);var EqualityComparers={SizeEqualityComparer:$.createFieldsEqualityComparer(["width","height"])};var Directions={North:"n",NorthEast:"ne",East:"e",SouthEast:"se",South:"s",SouthWest:"sw",West:"w",NorthWest:"nw"};var DirectionsUtil=new function(){this.getDirections=function(){return $.getValues(Directions)};this.getDiagonalDirections=function(){return[Directions.NorthEast,Directions.SouthEast,Directions.SouthWest,Directions.NorthWest]};this.directionToSides=function(a){switch(a){case Directions.North:return[Side.Top];case Directions.NorthEast:return[Side.Top,Side.Right];case Directions.East:return[Side.Right];case Directions.SouthEast:return[Side.Bottom,Side.Right];case Directions.South:return[Side.Bottom];case Directions.SouthWest:return[Side.Bottom,Side.Left];case Directions.West:return[Side.Left];case Directions.NorthWest:return[Side.Top,Side.Left]}};this.isNorth=function(a){return a===Directions.North||a===Directions.NorthEast||a===Directions.NorthWest};this.isSouth=function(a){return a===Directions.South||a===Directions.SouthEast||a===Directions.SouthWest};this.isEast=function(a){return a===Directions.East||a===Directions.SouthEast||a===Directions.NorthEast};this.isWest=function(a){return a===Directions.West||a===Directions.SouthWest||a===Directions.NorthWest};this.isVertical=function(a){return DirectionsUtil.isNorth(a)||DirectionsUtil.isSouth(a)};this.isHorizontal=function(a){return DirectionsUtil.isEast(a)||DirectionsUtil.isWest(a)};this.isAngle=function(a){return a===Directions.NorthEast||a===Directions.NorthWest||a===Directions.SouthEast||a===Directions.SouthWest}}();(function(b){var a;b.downloadFile=function(c){if(!a){a=document.createElement("iframe");a.style.display="none";document.body.appendChild(a)}a.src=c}})(jQuery);var swfobject=function(){var aq="undefined",aD="object",ab="Shockwave Flash",X="ShockwaveFlash.ShockwaveFlash",aE="application/x-shockwave-flash",ac="SWFObjectExprInst",ax="onreadystatechange",af=window,aL=document,aB=navigator,aa=false,Z=[aN],aG=[],ag=[],al=[],aJ,ad,ap,at,ak=false,aU=false,aH,an,aI=true,ah=function(){var a=typeof aL.getElementById!=aq&&typeof aL.getElementsByTagName!=aq&&typeof aL.createElement!=aq,f=aB.userAgent.toLowerCase(),c=aB.platform.toLowerCase(),i=c?/win/.test(c):/win/.test(f),k=c?/mac/.test(c):/mac/.test(f),h=/webkit/.test(f)?parseFloat(f.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,d=!+"\v1",g=[0,0,0],l=null;if(typeof aB.plugins!=aq&&typeof aB.plugins[ab]==aD){l=aB.plugins[ab].description;if(l&&!(typeof aB.mimeTypes!=aq&&aB.mimeTypes[aE]&&!aB.mimeTypes[aE].enabledPlugin)){aa=true;d=false;l=l.replace(/^.*\s+(\S+\s+\S+$)/,"$1");g[0]=parseInt(l.replace(/^(.*)\..*$/,"$1"),10);g[1]=parseInt(l.replace(/^.*\.(.*)\s.*$/,"$1"),10);g[2]=/[a-zA-Z]/.test(l)?parseInt(l.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}}else{if(typeof af.ActiveXObject!=aq){try{var j=new ActiveXObject(X);if(j){l=j.GetVariable("$version");if(l){d=true;l=l.split(" ")[1].split(",");g=[parseInt(l[0],10),parseInt(l[1],10),parseInt(l[2],10)]}}}catch(b){}}}return{w3:a,pv:g,wk:h,ie:d,win:i,mac:k}}(),aK=function(){if(!ah.w3){return}if((typeof aL.readyState!=aq&&aL.readyState=="complete")||(typeof aL.readyState==aq&&(aL.getElementsByTagName("body")[0]||aL.body))){aP()}if(!ak){if(typeof aL.addEventListener!=aq){aL.addEventListener("DOMContentLoaded",aP,false)}if(ah.ie&&ah.win){aL.attachEvent(ax,function(){if(aL.readyState=="complete"){aL.detachEvent(ax,arguments.callee);aP()}});if(af==top){(function(){if(ak){return}try{aL.documentElement.doScroll("left")}catch(a){setTimeout(arguments.callee,0);return}aP()})()}}if(ah.wk){(function(){if(ak){return}if(!/loaded|complete/.test(aL.readyState)){setTimeout(arguments.callee,0);return}aP()})()}aC(aP)}}();function aP(){if(ak){return}try{var b=aL.getElementsByTagName("body")[0].appendChild(ar("span"));b.parentNode.removeChild(b)}catch(a){return}ak=true;var d=Z.length;for(var c=0;c<d;c++){Z[c]()}}function aj(a){if(ak){a()}else{Z[Z.length]=a}}function aC(a){if(typeof af.addEventListener!=aq){af.addEventListener("load",a,false)}else{if(typeof aL.addEventListener!=aq){aL.addEventListener("load",a,false)}else{if(typeof af.attachEvent!=aq){aM(af,"onload",a)}else{if(typeof af.onload=="function"){var b=af.onload;af.onload=function(){b();a()}}else{af.onload=a}}}}}function aN(){if(aa){Y()}else{am()}}function Y(){var d=aL.getElementsByTagName("body")[0];var b=ar(aD);b.setAttribute("type",aE);var a=d.appendChild(b);if(a){var c=0;(function(){if(typeof a.GetVariable!=aq){var f=a.GetVariable("$version");if(f){f=f.split(" ")[1].split(",");ah.pv=[parseInt(f[0],10),parseInt(f[1],10),parseInt(f[2],10)]}}else{if(c<10){c++;setTimeout(arguments.callee,10);return}}d.removeChild(b);a=null;am()})()}else{am()}}function am(){var h=aG.length;if(h>0){for(var i=0;i<h;i++){var c=aG[i].id;var m=aG[i].callbackFn;var a={success:false,id:c};if(ah.pv[0]>0){var j=aS(c);if(j){if(ao(aG[i].swfVersion)&&!(ah.wk&&ah.wk<312)){ay(c,true);if(m){a.success=true;a.ref=av(c);m(a)}}else{if(aG[i].expressInstall&&au()){var f={};f.data=aG[i].expressInstall;f.width=j.getAttribute("width")||"0";f.height=j.getAttribute("height")||"0";if(j.getAttribute("class")){f.styleclass=j.getAttribute("class")}if(j.getAttribute("align")){f.align=j.getAttribute("align")}var g={};var d=j.getElementsByTagName("param");var l=d.length;for(var k=0;k<l;k++){if(d[k].getAttribute("name").toLowerCase()!="movie"){g[d[k].getAttribute("name")]=d[k].getAttribute("value")}}ae(f,g,c,m)}else{aF(j);if(m){m(a)}}}}}else{ay(c,true);if(m){var b=av(c);if(b&&typeof b.SetVariable!=aq){a.success=true;a.ref=b}m(a)}}}}}function av(b){var d=null;var c=aS(b);if(c&&c.nodeName=="OBJECT"){if(typeof c.SetVariable!=aq){d=c}else{var a=c.getElementsByTagName(aD)[0];if(a){d=a}}}return d}function au(){return !aU&&ao("6.0.65")&&(ah.win||ah.mac)&&!(ah.wk&&ah.wk<312)}function ae(g,d,i,f){aU=true;ap=f||null;at={success:false,id:i};var a=aS(i);if(a){if(a.nodeName=="OBJECT"){aJ=aO(a);ad=null}else{aJ=a;ad=i}g.id=ac;if(typeof g.width==aq||(!/%$/.test(g.width)&&parseInt(g.width,10)<310)){g.width="310"}if(typeof g.height==aq||(!/%$/.test(g.height)&&parseInt(g.height,10)<137)){g.height="137"}aL.title=aL.title.slice(0,47)+" - Flash Player Installation";var b=ah.ie&&ah.win?"ActiveX":"PlugIn",c="MMredirectURL="+af.location.toString().replace(/&/g,"%26")+"&MMplayerType="+b+"&MMdoctitle="+aL.title;if(typeof d.flashvars!=aq){d.flashvars+="&"+c}else{d.flashvars=c}if(ah.ie&&ah.win&&a.readyState!=4){var h=ar("div");i+="SWFObjectNew";h.setAttribute("id",i);a.parentNode.insertBefore(h,a);a.style.display="none";(function(){if(a.readyState==4){a.parentNode.removeChild(a)}else{setTimeout(arguments.callee,10)}})()}aA(g,d,i)}}function aF(a){if(ah.ie&&ah.win&&a.readyState!=4){var b=ar("div");a.parentNode.insertBefore(b,a);b.parentNode.replaceChild(aO(a),b);a.style.display="none";(function(){if(a.readyState==4){a.parentNode.removeChild(a)}else{setTimeout(arguments.callee,10)}})()}else{a.parentNode.replaceChild(aO(a),a)}}function aO(b){var d=ar("div");if(ah.win&&ah.ie){d.innerHTML=b.innerHTML}else{var f=b.getElementsByTagName(aD)[0];if(f){var a=f.childNodes;if(a){var g=a.length;for(var c=0;c<g;c++){if(!(a[c].nodeType==1&&a[c].nodeName=="PARAM")&&!(a[c].nodeType==8)){d.appendChild(a[c].cloneNode(true))}}}}}return d}function aA(f,h,c){var d,a=aS(c);if(ah.wk&&ah.wk<312){return d}if(a){if(typeof f.id==aq){f.id=c}if(ah.ie&&ah.win){var g="";for(var j in f){if(f[j]!=Object.prototype[j]){if(j.toLowerCase()=="data"){h.movie=f[j]}else{if(j.toLowerCase()=="styleclass"){g+=' class="'+f[j]+'"'}else{if(j.toLowerCase()!="classid"){g+=" "+j+'="'+f[j]+'"'}}}}}var i="";for(var k in h){if(h[k]!=Object.prototype[k]){i+='<param name="'+k+'" value="'+h[k]+'" />'}}a.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+g+">"+i+"</object>";ag[ag.length]=f.id;d=aS(f.id)}else{var b=ar(aD);b.setAttribute("type",aE);for(var l in f){if(f[l]!=Object.prototype[l]){if(l.toLowerCase()=="styleclass"){b.setAttribute("class",f[l])}else{if(l.toLowerCase()!="classid"){b.setAttribute(l,f[l])}}}}for(var m in h){if(h[m]!=Object.prototype[m]&&m.toLowerCase()!="movie"){aQ(b,m,h[m])}}a.parentNode.replaceChild(b,a);d=b}}return d}function aQ(b,d,c){var a=ar("param");a.setAttribute("name",d);a.setAttribute("value",c);b.appendChild(a)}function aw(a){var b=aS(a);if(b&&b.nodeName=="OBJECT"){if(ah.ie&&ah.win){b.style.display="none";(function(){if(b.readyState==4){aT(a)}else{setTimeout(arguments.callee,10)}})()}else{b.parentNode.removeChild(b)}}}function aT(a){var b=aS(a);if(b){for(var c in b){if(typeof b[c]=="function"){b[c]=null}}b.parentNode.removeChild(b)}}function aS(a){var c=null;try{c=aL.getElementById(a)}catch(b){}return c}function ar(a){return aL.createElement(a)}function aM(a,c,b){a.attachEvent(c,b);al[al.length]=[a,c,b]}function ao(a){var b=ah.pv,c=a.split(".");c[0]=parseInt(c[0],10);c[1]=parseInt(c[1],10)||0;c[2]=parseInt(c[2],10)||0;return(b[0]>c[0]||(b[0]==c[0]&&b[1]>c[1])||(b[0]==c[0]&&b[1]==c[1]&&b[2]>=c[2]))?true:false}function az(b,g,a,c){if(ah.ie&&ah.mac){return}var f=aL.getElementsByTagName("head")[0];if(!f){return}var h=(a&&typeof a=="string")?a:"screen";if(c){aH=null;an=null}if(!aH||an!=h){var d=ar("style");d.setAttribute("type","text/css");d.setAttribute("media",h);aH=f.appendChild(d);if(ah.ie&&ah.win&&typeof aL.styleSheets!=aq&&aL.styleSheets.length>0){aH=aL.styleSheets[aL.styleSheets.length-1]}an=h}if(ah.ie&&ah.win){if(aH&&typeof aH.addRule==aD){aH.addRule(b,g)}}else{if(aH&&typeof aL.createTextNode!=aq){aH.appendChild(aL.createTextNode(b+" {"+g+"}"))}}}function ay(a,c){if(!aI){return}var b=c?"visible":"hidden";if(ak&&aS(a)){aS(a).style.visibility=b}else{az("#"+a,"visibility:"+b)}}function ai(b){var a=/[\\\"<>\.;]/;var c=a.exec(b)!=null;return c&&typeof encodeURIComponent!=aq?encodeURIComponent(b):b}var aR=function(){if(ah.ie&&ah.win){window.attachEvent("onunload",function(){var a=al.length;for(var b=0;b<a;b++){al[b][0].detachEvent(al[b][1],al[b][2])}var d=ag.length;for(var c=0;c<d;c++){aw(ag[c])}for(var f in ah){ah[f]=null}ah=null;for(var g in swfobject){swfobject[g]=null}swfobject=null})}}();return{registerObject:function(a,f,c,b){if(ah.w3&&a&&f){var d={};d.id=a;d.swfVersion=f;d.expressInstall=c;d.callbackFn=b;aG[aG.length]=d;ay(a,false)}else{if(b){b({success:false,id:a})}}},getObjectById:function(a){if(ah.w3){return av(a)}},embedSWF:function(l,f,i,g,c,a,b,j,h,k){var d={success:false,id:f};if(ah.w3&&!(ah.wk&&ah.wk<312)&&l&&f&&i&&g&&c){ay(f,false);aj(function(){i+="";g+="";var r={};if(h&&typeof h===aD){for(var p in h){r[p]=h[p]}}r.data=l;r.width=i;r.height=g;var o={};if(j&&typeof j===aD){for(var q in j){o[q]=j[q]}}if(b&&typeof b===aD){for(var m in b){if(typeof o.flashvars!=aq){o.flashvars+="&"+m+"="+b[m]}else{o.flashvars=m+"="+b[m]}}}if(ao(c)){var n=aA(r,o,f);if(r.id==f){ay(f,true)}d.success=true;d.ref=n}else{if(a&&au()){r.data=a;ae(r,o,f,k);return}else{ay(f,true)}}if(k){k(d)}})}else{if(k){k(d)}}},switchOffAutoHideShow:function(){aI=false},ua:ah,getFlashPlayerVersion:function(){return{major:ah.pv[0],minor:ah.pv[1],release:ah.pv[2]}},hasFlashPlayerVersion:ao,createSWF:function(a,b,c){if(ah.w3){return aA(a,b,c)}else{return undefined}},showExpressInstall:function(b,a,d,c){if(ah.w3&&au()){ae(b,a,d,c)}},removeSWF:function(a){if(ah.w3){aw(a)}},createCSS:function(b,a,c,d){if(ah.w3){az(b,a,c,d)}},addDomLoadEvent:aj,addLoadEvent:aC,getQueryParamValue:function(b){var a=aL.location.search||aL.location.hash;if(a){if(/\?/.test(a)){a=a.split("?")[1]}if(b==null){return ai(a)}var c=a.split("&");for(var d=0;d<c.length;d++){if(c[d].substring(0,c[d].indexOf("="))==b){return ai(c[d].substring((c[d].indexOf("=")+1)))}}}return""},expressInstallCallback:function(){if(aU){var a=aS(ac);if(a&&aJ){a.parentNode.replaceChild(aJ,a);if(ad){ay(ad,true);if(ah.ie&&ah.win){aJ.style.display="block"}}if(ap){ap(at)}}aU=false}}}}();var YoutubePlayerStates={Unstarted:-1,Ended:0,Playing:1,Paused:2,Buffering:3,Cued:5};var YoutubeHelper=new function(){var c=false;var b=false;var a=[];var h;window.onYouTubeIframeAPIReady=function(){b=true;for(var j=0;j<a.length;j++){f(a[j])}a=[]};this.supportsHTML5=function(){if(h===undefined){h=(!!document.createElement("video").canPlayType)}return h};this.createPlayer=function(m,k,l){k=$.extend({videoID:undefined,isHtml5:YoutubeHelper.supportsHTML5()},k);var n=false;var j={options:k,playerReadyEvent:SimpleEvent.create(),isReady:false,$iframe:m,load:function(){if(!n){j.isReady=false;n=true;d();if(b){f(j)}else{a.push(j)}}return j},whenReady:function(o){if(j.isReady){o.call(j.player,j)}else{j.playerReadyEvent.one(function(){o.call(j.player,j)})}},call:function(p){var o=$.merge([],arguments).slice(1);j.whenReady(function(){this[p].apply(this,o)});return j},setOptions:function(p,o){j.options=$.extend({},j.options,p);if(!o){j.reload()}},toggleInitilized:function(o){n=o},isInitilized:function(){return n},reload:function(){var o=j.$iframe.clone().attr("src",g(j.options));j.$iframe.replaceWith(o);j.$iframe=o;if(j.isReady){j.player.destroy()}if(n){n=false;j.load()}},appendTo:function(o){j.$iframe.appendTo(o);return j},detach:function(){j.$iframe.detach();return j}};j.setOptions(k,!l);return j};function d(){if(!c){c=true;i()}}function g(m){m=$.extend({},m);var n=m.videoID;var l=m.isHtml5;delete m.videoID;delete m.isHtml5;var j=document.location;var o=j.protocol;var k=j.port;if(k){k=":"+k}var p=$.generateQueryString($.extend(m,{enablejsapi:1,html5:l?1:undefined,origin:encodeURIComponent(o+"//"+document.domain+k)}));return"https://www.youtube.com/embed/{0}?{1}".format(n,p)}function f(j){j.player=new YT.Player(j.$iframe[0],{events:{onReady:function(k){if((k.target===j.player)&&j.player.getPlayerState!==undefined){j.isReady=true;j.playerReadyEvent.fire()}}}})}function i(){var j=document.createElement("script");j.src="https://www.youtube.com/iframe_api";var k=document.getElementsByTagName("script")[0];k.parentNode.insertBefore(j,k)}};var GoogleMapTypes={Hybrid:"hybrid",Roadmap:"roadmap",Satellite:"satellite",Terrain:"terrain"};var GoogleMapHelper=new function(){var i=false;var b=[];var c=false;var h={};var a;window.onGoogleMapAPIReady=function(){console.log("API READY");c=true;var j=$.merge([],b);b=[];$.each(j,function(k,l){l()})};function f(){if(!i){i=true;var j=document.createElement("script");j.type="text/javascript";j.src="http://maps.googleapis.com/maps/api/js?sensor=true&callback=onGoogleMapAPIReady";document.body.appendChild(j)}}this.Geocoder=DeferredObject.create(function(){var l={};var k={};var m=undefined;var j={};$.extend(j,{withGeocoder:function(n){if(j.geocoder){n(j.geocoder)}else{GoogleMapHelper.useGoogleMapAPI(function(){j.geocoder=new google.maps.Geocoder();n(j.geocoder)})}},geocode:function(o,n,p){n=$.valueOrDefault(n,$.noop);p=$.valueOrDefault(p,$.noop);j.withGeocoder(function(q){q.geocode({address:o},function(s,r){if(r==google.maps.GeocoderStatus.OK){n(s)}else{p()}})})},reverseGeocoding:function(o,n,p){n=$.valueOrDefault(n,$.noop);p=$.valueOrDefault(p,$.noop);o=g(o);var q=l[o.toString()];if(q){n(q)}else{j.withGeocoder(function(r){r.geocode({latLng:o},function(u,t){if(t==google.maps.GeocoderStatus.OK){var s=u[0];if(s){s=s.formatted_address}else{s=o.toString()}l[o.toString()]=s;n(s)}else{p(t)}})})}}});return j});this.latLngToArray=function(j){return[j.lat(),j.lng()]};this.getMapAddress=function(j,k){j=g(j);GoogleMapHelper.Geocoder.get().reverseGeocoding(j,function(l){k(l)},function(){k(j)})};this.setCurrentAddress=function(j){a=j};this.getCurrentAddress=function(){return a};this.buildContentString=function(k,j){var l='<div id="content"><div id="siteNotice"></div>'+'<h1 id="firstHeading" class="firstHeading">{0}</h1>'.format(k)+'<div id="bodyContent">'+j+"</div></div>";return l};this.useGoogleMapAPI=function(j){if(c){j()}else{f();b.push(j)}};this.createMap=function(w,m){m=$.extend({center:[46.578498,2.457275],zoom:8},m);var s={};var r=[];var q=new ObservableCollection({idFunction:function(){return this.name}});var j={};var o=ObservableObject.create(undefined,{equalityComparer:function(z,y){if(z===undefined||y===undefined){return z===y}if(z===null||y===null){return z===y}else{return z.toString()===y.toString()}}});var x=ObservableObject.create();var v=ObservableObject.createNumerical();var u=ObservableObject.create();var n=SimpleEvent.create();GoogleMapHelper.useGoogleMapAPI(function(){var z=new google.maps.Map(w[0],d(m));s.map=z;var y=$.merge([],r);r=[];$.each(y,function(B,A){A(z)});google.maps.event.addListener(z,"center_changed",function(){o.setValue(z.getCenter())});o.setValue(z.getCenter());google.maps.event.addListener(z,"zoom_changed",function(){v.setValue(z.getZoom())});google.maps.event.addListener(z,"maptypeid_changed",function(){u.setValue(z.getMapTypeId())});v.setValue(z.getZoom())});$.extend(s,{$element:w,markers:q,markersChangedEvent:n,currentCenter:o,currentZoom:v,mapTypeId:u,streetViewPositioner:x,withMap:function(y){if(s.map){y(s.map)}else{r.push(y)}},setOptions:function(y){s.withMap(function(z){z.setOptions(d(y))})},setZoom:function(y){s.withMap(function(z){z.setZoom(y)})},setCenter:function(y){s.withMap(function(z){z.setCenter(g(y));GoogleMapHelper.getMapAddress(y,function(A){GoogleMapHelper.setCurrentAddress(A)})})},getCenter:function(y){s.withMap(function(z){y(z.getCenter())})},getMapTypeId:function(y){s.withMap(function(z){y(z.getMapTypeId())})},panTo:function(y){s.withMap(function(z){z.panTo(y)})},updateMarkerPosition:function(y,z){l(y,z)},setMarkerIcon:function(y,z){k(y,z)},addMarker:function(z,y){y=$.valueOrDefault(y,$.noop);t(z,function(A){y(A);if(A){n.fire()}})},removeMarker:function(y){if(typeof y==="string"){y=q.getItem(y)}if(y){y.setMap(null);q.remove(y.name);delete j[y.position.toString()];n.fire()}},clearMarkers:function(){p();n.fire()},getMarkersInfo:function(){var y={};$.each(q.getItems(),function(B,A){var z=A.position;y[B]={name:A.name,title:A.title,icon:A.icon,position:[z.lat(),z.lng()]}});return y},setMarkers:function(z,y){y=$.valueOrDefault(y,$.noop);s.withMap(function(A){p();$.each(z,function(C,B){t(B)});y();n.fire()})},refreshSize:function(){if(s.map){google.maps.event.trigger(s.map,"resize")}}});return s;function p(){$.each(q.getItems(),function(z,y){y.setMap(null)});j={};q.clear()}function k(y,z){if(y){q.updateItem(y.name,{icon:z});n.fire()}}function l(y,z){var A=y.position.toString();GoogleMapHelper.Geocoder.get().reverseGeocoding(z,function(B){y.title=B;n.fire()},function(){y.title=z;n.fire()})}function t(z,y){z=$.extend({position:undefined,name:undefined,title:undefined,customIconUrl:undefined,icon:undefined},z);y=$.valueOrDefault(y,$.noop);s.withMap(function(F){var A=g($.valueOrCalculate(z.position,function(){return F.getCenter()}));var E=A.toString();if(!j[E]){var C=z.name;var G=z.title;var D=z.icon;var B=function(){if(C===undefined){C=$.uniqueID()}var H=new google.maps.Marker({name:C,position:A,map:F,title:G,draggable:false,icon:D});if(Global.IsDesigner){H.draggable=true;google.maps.event.addListener(H,"dragend",function(){var J=H.getPosition();var I=SelectionManager.getSelectedInstance();I.updateMarkerPosition(H,GoogleMapHelper.latLngToArray(J))})}q.put(H);j[E]=H;y(H)};if(G===undefined){GoogleMapHelper.Geocoder.get().reverseGeocoding(A,function(H){G=H;B()},function(){G=A.toString();B()})}else{B()}}else{y(undefined)}})}};function d(k){k=$.extend({},k);if(k){var j=k.center;if($.isArray(j)){k.center=new google.maps.LatLng(j[0],j[1])}}return k}function g(j){if($.isArray(j)){return new google.maps.LatLng(j[0],j[1])}return j}}();var TrackingCategories={Conversion:"Conversion",Editor:"Editor",Usability:"Usability",SiteManagement:"SiteManagement",Blog:"Blog",SiteStatus:"SiteStatus",Mobile:"Mobile",Help:"Help",Errors:"Errors",Commands:"Commands"};var TrackingActions={NotSavedSite:"NotSavedSite",SaveFirstTime:"SaveFirstTime",ResetTemplate:"ResetTemplate",CreateNewSite:"CreateNewSite",Save:"Save",Publish:"Publish",Upgrade:"Upgrade",FinishPreview:"FinishPreview",Preview:"Preview",MobileEditing:"MobileEditing",Help:"Help",PreferencesButton:"PreferencesButton",Undo:"Undo",Redo:"Redo",Stats:"Stats",MobileSettingsPanel:"MobileSettingsPanel",MobileLayoutPanel:"MobileLayoutPanel",Error:"Error",VoodoError:"VoodoError",UnknownError:"UnknownError",CKEDITORError:"CKEDITORError",UpgradeDialogOpened:"UpgradeDialogOpened",Login:"Login",SignUp:"SignUp",CreateBlog:"CreateBlog",ManagePosts:"ManagePosts",CreatePost:"CreatePost",RemoveBlog:"RemoveBlog",SavePost:"SavePost",ChangePostStatus:"ChangePostStatus",EditPostAdvancedOptions:"EditPostAdvancedOptions",WidgetAdded:"WidgetAdded",Add:"Add",Design:"Design",Pages:"Pages",Blog:"Blog",Manage:"Manage",ManageSites:"ManageSites",UploadImage:"UploadImage",UploadFlash:"UploadFlash",UploadDocument:"UploadDocument",isPremium:"isPremium",ChangeFavicon:"ChangeFavicon",DeleteFavicon:"DeleteFavicon",SavedSiteSettings:"SavedSiteSettings",SavedSocialSettings:"SavedSocialSettings"};var EventsTrackingManager=new function(){this.initialize=function(){WebzaiController.UserChangedEvent.bindAndExecute(function(){$.identifyUserWithInspectlet();if(!SiteManager.isExistingSite()){$.triggerTrackingEvent({category:TrackingCategories.SiteStatus,action:TrackingActions.NotSavedSite})}else{$.triggerTrackingEvent({category:TrackingCategories.SiteStatus,action:TrackingActions.SaveFirstTime,tagValue:1})}if(WebzaiController.getCurrentUserName()){$.triggerInspectletEvent({action:"userName",tagValue:WebzaiController.getCurrentUserName()})}$.triggerTrackingEvent({category:TrackingCategories.SiteStatus,action:TrackingActions.isPremium,label:SiteManager.isPremium(),tagValue:SiteManager.isPremium()});if(SiteManager.getSiteID()){$.triggerInspectletEvent({action:"siteId",tagValue:SiteManager.getSiteID()})}})}}();(function(c){c.fn.bindToTrackingEvent=function(f){var d=this;d.bind("click",function(){c.triggerTrackingEvent(f)});return d};c.triggerTrackingEvent=function(d){c.triggerGoogleEvent(d);c.triggerInspectletEvent(d)};c.triggerErrorEvent=function(h){try{var g=new Date();g=g.toUTCString();var i=c.uniqueID();if(b()){ga("send","exception",{exDescription:i+" "+h.action,exFatal:false,appName:h.stackTrace})}if(a()){var f={};f[h.action]="errorId -"+i+": date -"+g+": siteid - "+SiteManager.getSiteID();f.errorDescription="errorId -"+i+":"+h.stackTrace;__insp.push(["tagSession",f])}}catch(d){}};c.fn.bindToGoogleEvent=function(f){f=c.extend({category:window.location.pathname,action:"deafaultAction",label:undefined,value:undefined},f);var d=this;if(b()){d.bind("click",function(){c.triggerGoogleEvent(f)})}return d};c.fn.bindToToInspectletEvent=function(f){var d=this;if(a()&&f){d.bind("click",function(){c.triggerInspectletEvent(f)})}return d};c.triggerGoogleEvent=function(f){f=c.extend({category:window.location.pathname,action:"deafaultAction",label:undefined,value:undefined},f);if(!b()){return}try{ga("send","event",f.category,f.action,f.label,f.value)}catch(d){}};c.triggerPageViewChange=function(d){if(!b()){return}ga("send","pageview",d)};c.triggerInspectletEvent=function(g){if(!a()||!g||!g.action){return}try{var d={};d[g.action]=g.tagValue;__insp.push(["tagSession",d])}catch(f){}};c.identifyUserWithInspectlet=function(){if(!a()){return}try{var f=WebzaiController.getCurrentUserName();if(f){__insp.push(["identify",f])}}catch(d){}};function b(){return !(typeof ga==="undefined"||Settings.DevelopmentMode==="1"||!ga)}function a(){return !(typeof __insp==="undefined"||Settings.DevelopmentMode==="1"||!__insp)}})(jQuery);(function(a){a.fn.scrollToFixed=function(o){var d=a.uniqueID();o=a.extend({fixedClass:"scroll-fixed",unfixedClass:"scroll-unfixed",fixedCallback:a.noop,unfixedCallback:a.noop,distance:0,startPosition:undefined,$scrollablePane:a(window),getScrollingSize:function(){return m.offset().top},getTopPositionWhenFixed:function(){return 0}},o);var j={};var m=this;var l;var g=o.$scrollablePane;var i=o.getScrollingSize;var b=o.getTopPositionWhenFixed;var n=false;var h=ObservableFlag.create(undefined,{valueChangeCallback:function(q){if(!n){n=true;if(o.fixedClass){m.toggleClass(o.fixedClass,q)}if(o.unfixedClass){m.toggleClass(o.unfixedClass,!q)}if(q){o.fixedCallback();if(!o.startPosition){l=m.css("top")}else{l=o.startPosition}var p=a("<div></div>").css("height",m.outerHeight());m.wrap(p);m.css("top",b()+o.distance)}else{o.unfixedCallback();if(l!==undefined){m.unwrap();m.css("top",l);l=undefined}}n=false}}});var k=i();g.bind("scroll."+d,function(){f()});a.extend(j,{$element:m,isFixed:h,unbind:function(){g.unbind("scroll."+d);h.setValue(false)},refresh:function(){k=i()+c();f()},pushTo:function(p){p.push(j);return j}});f();return j;function f(){h.setValue(c()>k-o.distance)}function c(){var p;if(g[0]===window){var q=(document.compatMode&&document.compatMode!="BackCompat")?document.documentElement:document.body;p=document.all?q.scrollTop:window.pageYOffset}else{p=g[0].scrollTop}return p}}})(jQuery);var OperationsBatch=new function(){var d=$.createWeakIdGenerator();var f=0;var a=[];var h={};this.getActiveBatches=function(){return $.grep(a,function(j){return j.isActive()})};this.releaseAll=function(){$.each(a,function(k,j){j.release()})};this.releaseAllActiveBatches=function(){var j=$.sortArray($.getValues(h),function(k){return -k.index});$.each(j,function(l,k){k.controller.release();delete h[k.name]})};this.create=function(l){l=$.extend({name:$.weakID(),batchStartCallback:$.noop,batchFinishCallback:$.noop,runOperationFinishCallback:$.noop,runOperationStartCallback:$.noop,beforeFinishingCallback:$.noop,batchFinishingStartedCallback:$.noop,batchFinishingCompletedCallback:$.noop,measureBatchFinish:false},l);var k=l.name;var m=0;var j={name:k,startedEvent:SimpleEvent.create(),beforeFinishedEvent:SimpleEvent.create(),finishedEvent:SimpleEvent.create(),afterFinishedEvent:SimpleEvent.create(),pendingEvents:{},pendingOperations:{},orderedOperations:[],whenNotActive:function(n){if(!j.isActive()){n()}},executeWithActivation:function(n){j.start();n();j.finish()},begin:function(){j.start()},end:function(){j.finish()},start:function(){if(m===0){c(j);j.startedEvent.fire(j);l.batchStartCallback()}m++},finish:function(){if(m===1){l.beforeFinishingCallback()}m--;if(m===0){var n=j.orderedOperations.length+$.getKeys(j.pendingEvents);l.batchFinishingStartedCallback(n);var o=undefined;if(l.measureBatchFinish!==false){o=typeof l.measureBatchFinish==="string"?l.measureBatchFinish:"Batch Finish";console.logAndMeasure(o)}l.batchFinishCallback();b(j);j.finishedEvent.fire(j);g(j);if(l.measureBatchFinish!==false){console.timeEnd(o)}l.batchFinishingCompletedCallback(n)}},getCounter:function(){return m},release:function(){m=1;j.finish()},isActive:function(){return m>0},fireEvent:function(o,n,p){if(!j.isActive()&&(!p||p())){o.fire(o,n)}else{i(o,[j],p,n)}},whenFinished:function(o,n){j.performOperation(o,n)},performInstanceOperation:function(p,o,n){n=$.valueOrDefault(n,"op"+$.uniqueID()+"_");this.performOperation(p,n+o.id)},performOperation:function(p,n){var o=this;if(j.isActive()){n=$.valueOrDefault(n,"op"+$.uniqueID());if(!j.pendingOperations[n]){j.orderedOperations.push(n)}j.pendingOperations[n]={operation:p,context:o}}else{p.call(o)}},performOperationWhenBatchStart:function(p,n){var o=this;if(!j.isActive()){j.startedEvent.one(function(){j.performOperation(p,n)})}else{j.performOperation(p,n)}},executeOnBatchStart:function(o){var n=this;if(!j.isActive()){j.startedEvent.one(function(){o()})}else{o()}},executeBeforeBatchFinished:function(o){var n=this;if(!j.isActive()){j.beforeFinishedEvent.one(function(){o()})}else{o()}},executeAfterBatchFinished:function(o){var n=this;if(!j.isActive()){j.finishedEvent.one(function(){o()})}else{o()}},hasOperation:function(n){return j.pendingOperations[n]!==undefined},bind:function(o,n){var q=j.startedEvent.bind(o);var p=j.finishedEvent.bind(n);return{unbind:function(){q.unbind();p.unbind()}}}};a.push(j);return j};this.whenAllFinished=function(m,k,l){var j=$.map(m,function(n){if(n.isActive()){return n.finishedEvent}return undefined});SimpleEvent.waitForAll(j,k,l)};this.fireOnBatchesComplete=function(k,l,j){if($.all(k,function(m){return !m.isActive()})){if(!j||j()){l.fire()}}else{i(l,k,j)}};function c(j){h[j.name]={controller:j,index:f};f++}function g(j){delete h[j.name];if($.isEmptyObject(h)){f=0}}function i(o,k,j,q){var p=true;var r={event:o,batches:k,args:q,condition:j};var m=o.id;for(var n=0;n<k.length;n++){var l=k[n];l.pendingEvents[m]=r}}function b(q){var j=q.pendingEvents;var m=[];q.beforeFinishedEvent.fire();for(var o in j){var r=j[o];var n=r.batches;if($.all(n,function(s){return !s.isActive()})){m.push(r);for(var p=0;p<n.length;p++){delete n[p].pendingEvents[o]}}}var k=q.pendingOperations;var l=q.orderedOperations;q.pendingOperations={};q.orderedOperations=[];for(var p=0;p<m.length;p++){var r=m[p];if(!r.condition||r.condition()){r.event.fire(r.event,r.args)}}$.each(l,function(t,s){var u=k[s];if(!u){console.log("Skipping scheduled operation since its missing in the array")}else{u.operation.call(u.context)}})}}();var PathUtils=new function(){this.combinePaths=function(){var a=[];for(var b=0;b<arguments.length;b++){var c=arguments[b];if(c!==undefined){c=$.trimRight(c,"/");if(b>0){c=$.trimLeft(c,"/")}if(c!==""){a.push(c)}}}return a.join("/")}}();(function(a){a.splitFileName=function(c){var b=c.lastIndexOf(".");if(b<0){return{fileName:c,extension:undefined}}return{fileName:c.substr(0,b),extension:c.substr(b)}};a.getFileName=function(b){var c=b.lastIndexOf("\\");if(c>=0){return b.substring(c+1)}return b};a.getFileNameWithoutExtension=function(b){return a.splitFileName(a.getFileName(b)).fileName};a.getFileExtension=function(b){return a.splitFileName(a.getFileName(b)).extension}})(jQuery);var Browser={IE:1,Other:0};var BrowserVersion={IE6:{browser:Browser.IE,version:6},IE7:{browser:Browser.IE,version:7},IE8:{browser:Browser.IE,version:8},IE9:{browser:Browser.IE,version:9},Other:{browser:Browser.Other,version:0}};(function(a){a.extendValueWithDefaultValue=function(c,b){if(a.isPlainObject(c)&&(b===undefined||a.isPlainObject(b))){return a.extend({},b,c)}else{return c!==undefined&&c!==null?c:b}};a.extendIfObject=function(b){if(a.isPlainObject(b)){return a.extend({},b)}else{return b}};a.cloneObject=function(b,c){return c?a.extend(true,{},b):a.extend({},b)};a.convertValueToObject=function(d,b){var f={};for(var c=0;c<b.length;c++){f[b[c]]=d}return f};a.createArrayWithValue=function(d,c){var f=[];for(var b=0;b<c;b++){f[b]=d}return f};a.findAvailableName=function(h,f,g){if(g){f=a.map(f,function(i){return i.toLowerCase()})}var d=a.makeDictionaryFromKeys(f,true);var c=1;var b;do{b=h.format(c);if(g){b=b.toLowerCase()}c++}while(d[b]);return h.format(c-1)};a.fn.setStyleAttr=function(b){if(b){this.attr("style",b)}else{this.removeAttr("style")}};a.fn.htmlOrHide=function(b){if(b===undefined||b===null){a(this).hide()}else{a(this).show().html(b)}return this};a.objectSetIfUndefined=function(k,j,h){var f;if(!(j instanceof Array)){f=k[j];if(f===undefined){var g=h();k[j]=g;return g}else{return f}}else{for(var d=0;d<j.length;d++){var c=j[d];if(d===j.length-1){f=k[c];if(f===undefined){var g=h();k[c]=g;return g}else{return f}}else{var b=k[c];if(b===undefined){b={};k[c]=b}k=b}}}};a.objectSet=function(h,g,f){if(!(g instanceof Array)){h[g]=f}else{for(var d=0;d<g.length;d++){var c=g[d];if(d===g.length-1){h[c]=f}else{var b=h[c];if(b===undefined){b={};h[c]=b}h=b}}}};a.objectSetAndClone=function(j,h,g){var c=a.extend({},j);var b=c;h=a.makeArray(h);for(var f=0;f<h.length;f++){var d=h[f];if(f===h.length-1){b[d]=g}else{b[d]=a.extend({},b[d]);b=b[d]}}return c};a.objectGetAndClone=function(k,j,h){h=a.valueOrDefault(h,a.undefinedFunction);if(h(k)){return undefined}var d=a.extend({},k);var b=d;j=a.makeArray(j);for(var g=0;g<j.length;g++){var f=j[g];var c=b[f];if(h(c)){return undefined}b[f]=a.extend({},c);b=b[f]}return d};a.objectGet=function(h,g,f){f=a.valueOrDefault(f,a.undefinedOrNullFunction);if(f(h)){return undefined}if(!(g instanceof Array)){return h[g]}else{for(var d=0;d<g.length;d++){var c=g[d];if(d===g.length-1){return h[c]}else{var b=h[c];if(f(b)){return undefined}h=b}}}};a.getObjectIfUndefined=function(b){return b?b:{}};a.extendFunction=function(b,c){return function(){var d=a.merge([b],arguments);c.apply(this,d)}};a.extendMissing=function(c,b){a.each(b,function(d,f){if(c[d]===undefined){c[d]=f}});return c};a.extendWithoutUndefined=function(c,b){return a.extend({},c,b)};a.quickUnique=function(b,h){h=a.valueOrDefault(h,a.identity);if(b.length<2){return a.merge([],b)}var d=true;for(g=0;g<b.length;g++){var j=typeof h(b[g]);if(j!=="string"&&j!=="number"&&j!=="boolean"){d=false;break}}if(!d){return a.unique(b)}var c=[];var k=[];var g,f;for(g=0;g<b.length;g++){f="_"+h(b[g]);if(c[f]===undefined){c[f]=true;k.push(b[g])}}return k};a.keyToString=function(b){if((b>=65&&b<=90)||(b>=48&&b<=57)){return String.fromCharCode(b)}switch(b){case Global.Keys.ESC:return"Esc";case Global.Keys.Delete:return"Del"}return""};a.isCtrlPressed=function(b){return b.ctrlKey||b.metaKey};a.isShiftPressed=function(b){return b.shiftKey};a.isKey=function(d,c,h,b,f){if(c!==null&&c!==undefined&&typeof c==="string"){c=c.charCodeAt(0)}var g=false;if(c===null||c===undefined||d.which===c){g=true}if(h===true&&!d.ctrlKey&&!d.metaKey){g=false}else{if(h===false&&(d.ctrlKey||d.metaKey)){g=false}}if(b===true&&!d.shiftKey){g=false}else{if(b===false&&d.shiftKey){g=false}}if(f===true&&!d.altKey){g=false}else{if(f===false&&d.altKey){g=false}}return g};a.getOrInit=function(d,f,b){var c=d[f];if(c===undefined){c=b;d[f]=c}return c};a.getOrCreateArray=function(c,b){return a.getOrInit(c,b,[])};a.getOrCreateMap=function(c,b){return a.getOrInit(c,b,{})};a.getOrInitDeferred=function(d,f,b){var c=d[f];if(c===undefined){c=b();d[f]=c}return c};a.getWindowCenter=function(){return{top:a(document).scrollTop()+a(window).height()/2,left:a(document).scrollLeft()+a(window).width()/2}};a.fn.makeNumericInput=function(b){b=a.extend({allowDecimalPoint:true,allowNegativeNumbers:true},b);var d="[0-9]";if(b.allowNegativeNumbers){d="-|"+d}if(b.allowDecimalPoint){d=d+"|\\."}var c=new RegExp(d);return a(this).keypress(function(f){var h=f||window.event;var g=h.keyCode||h.which;g=String.fromCharCode(g);if(!c.test(g)){h.returnValue=false;if(h.preventDefault){h.preventDefault()}}})};a.getMouseOffset=function(f){var c=0;var g=0;if(!f){f=window.event}if(!f){return undefined}if(f.pageX||f.pageY){c=f.pageX;g=f.pageY}else{if(f.clientX||f.clientY){c=f.clientX+document.body.scrollLeft+document.documentElement.scrollLeft;g=f.clientY+document.body.scrollTop+document.documentElement.scrollTop}else{var b=f.originalEvent;if(!b){b=f}var d=b.changedTouches;if(d&&d[0]){c=d[0].pageX;g=d[0].pageY}}}return{left:c,top:g}};a.extendJqueryUi=function(c,b,d){a.extend(a.ui[c].prototype,(function(g){var f={};f[b]=d;return f})(a.ui[c].prototype[b]))};a.fixColor=function(c){if(c.toLowerCase()==="transparent"){return c}c=c.trim();c=c.trim("#");if(c.length===3){c=c+c}c="#"+c;if(c.length==7){var b=a.Color(c);if(b.space){return b.toCSS()}}return null};String.prototype.trim=function(c){var b=new RegExp("^("+c+")+|("+c+")+$","g");return this.replace(b,"")};a.fn.mouseHold=function(d){var c=100;var b=a(this);a(this).trackHoveringState();if(d&&typeof d=="function"){return this.each(function(){a(this).mousedown(function(g){var i=1;var h=0;var f=this;var j=setInterval(function(){if(b.inState("state-hover")){h++;d.call(f,g,h);i=2}},c);a(document).one("mouseup",function(){clearInterval(j);if(i==1){d.call(this,1)}i=0});return false});a(this).click(function(){return false})})}};a.getUrlVars=function(c){var g=[],f;var b=c.slice(c.indexOf("?")+1).split("&");for(var d=0;d<b.length;d++){f=b[d].split("=");g.push(f[0]);g[f[0]]=f[1]}return g};a.withObject=function(c,b){b(c)};a.withObjects=function(c,b){b.apply(this,a.makeArray(c))};a.browserVersion=function(){if(navigator.appVersion.indexOf("MSIE 6.")!=-1){return BrowserVersion.IE6}if(navigator.appVersion.indexOf("MSIE 7.")!=-1){return BrowserVersion.IE7}if(navigator.appVersion.indexOf("MSIE 8.")!=-1){return BrowserVersion.IE8}if(navigator.appVersion.indexOf("MSIE 9.")!=-1){return BrowserVersion.IE9}return BrowserVersion.Other};(function(){var b;var c;a.escapeHTML=function(d){if(!b){b=document.createElement("div");c=document.createTextNode(d);b.appendChild(c)}c.nodeValue=d;return b.innerHTML}})()})(jQuery);jQuery.extend(jQuery.expr[":"],{focus:function(a){return a==document.activeElement}});var CollectionUtils={};var ArrayUtils={};(function(){ArrayUtils.contains=function(a,b){return $.oneOfValues(a,b)};ArrayUtils.clone=function(a){if(!a){return a}return a.slice(0)};Array.prototype.contains=function(a){return ArrayUtils.contains(a,this)};Array.prototype.clone=function(){return ArrayUtils.clone(this)};Array.prototype.isLastIndex=function(a){return a===this.length-1};Array.prototype.isSingleValue=function(a){if(this.length!==1){return false}if($.isFunction(a)){return a(this[0])}else{return a===this[0]}};Array.prototype.equals=function(a){if(a.length!=this.length){return false}for(var b=0;b<this.length;b++){if(this[b]!=a[b]){return false}}return true};Array.prototype.removeItem=function(b){var a=$.inArray(b,this);if(a>=0){this.splice(a,1);return true}return false};CollectionUtils.connectCollectionObserver=function(b,a){return CollectionObserver.create(CollectionUtils.connectObservableCollection(new ObservableCollection(),b,a),true)};CollectionUtils.isObservableCollection=function(a){return !!(a&&a.isObservableCollection&&a.isObservableCollection())};CollectionUtils.connectObservableCollection=function(b,p,d){d=$.extend({filterFunction:undefined,normalizeItems:undefined,normalizeCollection:$.noop,updateOnConnect:true,onStartUpdating:$.noop,onFinishUpdating:$.noop},d);var m=d.filterFunction;var h=d.normalizeItems;var a=d.updateOnConnect;var s=d.normalizeCollection;var i=d.onStartUpdating;var f=d.onFinishUpdating;if(b.connectionController){throw new Error("Already connected")}var l=b.connectionController={};var c=p.itemsChangedEvent.bind(function(v){var A={};var w;var u;var z;if(m){if(v.addedItems){w=$.grep(v.addedItems,m)}if(v.removedItems){u=v.removedItems.clone()}if(v.updatedItems){var y=FilterUtils.filterItems(v.updatedItems,m,{notPassedIdFunction:p.getIDFunction()});z=y.passed;if(u){$.merge(u,y.notPassed)}else{if(y.notPassed.length>0){u=y.notPassed}}}}else{w=v.addedItems;z=v.updatedItems;u=v.removedItems}if(w){var t=[];$.each(w,function(B,C){t.push($.extend({},C))});A.addedItems=t}if(z){var x=[];$.each(z,function(B,C){x.push($.extend({},C))});A.updatedItems=x}A.removedItems=u;if(h){A=h.call(b,A)}i();b.beginUpdate();if(A.removedItems){b.remove(A.removedItems)}if(A.addedItems){b.put(A.addedItems)}if(A.updatedItems){b.put(A.updatedItems)}s(b);b.endUpdate();f()});$.extend(l,{disconnect:function(){c.unbind()}});if(a){i();b.beginUpdate();var o=p.getItemsValues();if(m){o=$.grep(o,m)}if(h){var j=b.getItems();var g=$.grep(o,function(t){return !j[t.id]});var n=$.grep(o,function(t){return j[t.id]});var q=[];$.each(g,function(t,u){q.push($.extend({},u))});var k=[];$.each(n,function(t,u){k.push($.extend({},u))});var r=h.call(b,{addedItems:q,updatedItems:k});b.put(r.addedItems);b.put(r.updatedItems)}else{b.put(o)}s(b);b.endUpdate();f()}return b};CollectionUtils.disconnectObservableCollection=function(a){if(a.connectionController){a.connectionController.disconnect();delete a.connectionController}a.clear()};CollectionUtils.createSortedArray=function(b){b=$.extend({valueSelector:undefined,comparer:undefined,orderByDesc:false},b);var d=b.valueSelector;var c=b.comparer;var a=b.orderByDesc;var g=true;var f=[];return{addItem:function(h){f.push(h);g=false},getItems:function(){if(!g){if(a){f.orderByDesc(d,c)}else{f.orderBy(d,c)}g=true}return f}}}})();var FilterUtils=new function(){var a={DateFilter:"DateFiler",EqualFilter:"EqualFilter",IntFilter:"IntFilter",ListFilter:"ListFilter"};this.Filters={DateFilter:function(b){return{serverFilters:{fieldName:b.fieldName,type:"between",from:b.from,to:b.to},filterFunction:function(c){var d=c[b.fieldName];return d&&d>b.from&&d<b.to}}},EqualFilter:function(b){return{serverFilters:{fieldName:b.fieldName,type:"eq",value:b.value,isBinded:b.value===undefined?true:undefined},filterFunction:function(c){return b.value===c[b.fieldName]}}},IntFilter:function(b){return{serverFilters:{fieldName:b.fieldName,type:"between",from:b.from,to:b.to},filterFunction:function(c){var d=c[b.fieldName];return d&&d>b.from&&d<b.to}}},ListFilter:function(b){return{serverFilters:{fieldName:b.fieldName,type:"list",values:b.values},filterFunction:function(c){return $.inArray(c[b.fieldName],b.values)>=0}}},NotFilter:function(b){return{serverFilters:{fieldName:b.fieldName,type:"neq",value:b.value,isBinded:b.value===undefined?true:undefined},filterFunction:function(c){return b.value!==c[b.fieldName]}}}};this.filterItems=function(b,g,c){c=$.extend({passedIdFunction:$.identity,notPassedIdFunction:$.identity},c);var f=[];var d=[];b=$.makeArray(b);$.each(b,function(j,k){if(g(k)){var l=c.passedIdFunction.call(k,k);f.push(l)}else{var h=c.notPassedIdFunction.call(k,k);d.push(h)}});return{passed:f,notPassed:d}};this.getFiltersCompositeFunction=function(c,b){b=$.valueOrDefault(b,"filterFunction");var d=$.returnTrue;$.each(c,function(f,g){d=$.wrapMethod(d,function(h){return function(i){return g[b](i)&&h(i)}})});return d}}();var ListUtils=new function(){this.getListNameFromInstance=function(a){return a.getPropertyValue(PropertiesTypes.dataInfo.name).listName};this.getListControllerFromInstance=function(a){return ListsManager.getListByName(ListUtils.getListNameFromInstance(a))};this.getListForCurrentDynamicPage=function(){var a=$.objectGet(PageManager.CurrentPageData.getValue(),"pageListName");return a&&ListsManager.getListByName(a)};this.assertListSaved=function(b,a){b=$.extend({listName:undefined,defaultMode:undefined},b);if(!b.defaultMode&&SiteManager.isExistingSite()&&ListsManager.isListTemplate(b.listName)){ConfirmationDialog.open({header:"Save your site",submissionNotification:"Saving your site...",buttons:ConfirmationPanel.OkCancelButtons,buttonsOptions:[{type:ConfirmationButtonsTypes.OK,title:"Save My Site"}],confirmationMessage:"Just before you can use your blog, you must save your site.<br>Do you want to save your site?",submissionCallback:function(d,c){Commands.SaveSite.action({afterSaveCallback:d})}});return}return a()};this.allowPageDeletion=function(a,b){if(a.masterPageListName!==undefined){ConfirmationDialog.open({buttons:ConfirmationPanel.OkButton,header:"Blog Page Cannot be Deleted",confirmationMessage:"Be Careful! This page is your blog page.<br>In order to delete it you must remove the blog from the blog menu."})}else{b()}};this.navigatePrimaryPostList=function(b,f){var c=b.getNavigatableInstances();if(c.length>1){var a=(b.getCurrentItem().getChildIndex()+f)%c.length;if(a<0){a+=c.length}var d=ListUtils.getListControllerFromInstance(b);UrlManager.navigate(PageManager.getPageFragmentValue(d.getPageLink(a+1).url))}}}();var MathUtils=new function(){this.isPositive=function(a){return $.isNumeric(a)&&+a>0}}();var ExceptionUtils=new function(){this.handleAjaxException=function(a){var b=Exception.getUserDescription(a);if(Global.IsDesigner){NotificationPanel.showErrorNotification(b,{autoHideDelay:1000})}else{console.error("Error: "+b)}}}();(function(g){var d=undefined;g.fn.scrollParent=function(){var h;if((g.browser.msie&&(/(static|relative)/).test(this.css("position")))||(/absolute/).test(this.css("position"))){h=this.parents().filter(function(){return(/(relative|absolute|fixed)/).test(g(this).css("position"))&&(/(auto|scroll|hidden)/).test(g(this).css("overflow")+g(this).css("overflow-x")+g(this).css("overflow-y"))}).eq(0)}else{h=this.parents().filter(function(){return(/(auto|scroll|hidden)/).test(g(this).css("overflow")+g(this).css("overflow-x")+g(this).css("overflow-y"))}).eq(0)}return(/fixed/).test(this.css("position"))||!h.length?g(document):h};g.translateOffset=function(h,i){return{left:h.left+(i.left?i.left:0),top:h.top+(i.top?i.top:0)}};g.translateArea=function(h,i){return g.extendedAreaInfo({left:h.left+g.valueOrDefault(i.left,0),top:h.top+g.valueOrDefault(i.top,0),width:h.width,height:h.height})};g.getOffsetDelta=function(i,h){return{left:i.left-h.left,top:i.top-h.top}};g.resolveAxis=function(i){var h={north:i==="n"||i==="ne"||i==="nw",south:i==="s"||i==="se"||i==="sw",east:i==="e"||i==="se"||i==="ne",west:i==="w"||i==="sw"||i==="nw"};h.horizontal=h.east||h.west;h.vertical=h.north||h.south;return h};g.normalizeToMinSize=function(h,i){return{width:Math.max(h.width,i.width),height:Math.max(h.height,i.height)}};g.calculateWindowSize=function(){if(d===undefined){d=g(window)}return{width:d.width(),height:g.isIOS()?g.getIOSWindowHeight():d.height()}};g.getWindowArea=function(o){o=g.extend({left:0,top:0,right:0,bottom:0},o);var j=g.calculateWindowSize();var l=j.width;var h=j.height;var n=g(document).scrollTop();var m=g(document).scrollLeft();var i=n+h;var k=m+l;return g.extendedAreaInfo({left:m+o.left,top:n+o.top,bottom:i-o.bottom,right:k-o.right})};g.fn.positionInWindow=function(h){h=g.extend({vertically:false,horizontally:false,horizontalPadding:0,verticalPadding:0,horizontalAnchor:"left",verticalAnchor:"top"},h);var i=g.getWindowArea();i.left+=h.horizontalPadding;i.right-=h.horizontalPadding;i.top+=h.horizontalPadding;i.bottom-=h.horizontalPadding;return g(this).positionInArea(i,h)};g.fn.moveToArea=function(l,s){s=g.extend({horizontalAnchor:false,verticalAnchor:false},s);var o=s.horizontalAnchor;var i=s.verticalAnchor;var r=this;var j=r.getArea();var k=0;var n=0;if(j.left<l.left){k=l.left-j.left}else{if(j.left>l.right){k=l.right-j.right}}if(j.top<l.top){n=l.top-j.top}else{if(j.top>l.bottom){n=l.bottom-j.bottom}}var m=parseInt(r.css("left"));var q=parseInt(r.css("right"));var p=parseInt(r.css("top"));var h=parseInt(r.css("bottom"));if(o==="left"){r.css("left",m+k)}else{if(o==="right"){r.css("right",q-k)}}if(i==="top"){r.css("top",p+n)}else{if(i==="bottom"){r.css("bottom",h-n)}}return r};g.fn.positionInArea=function(k,j){j=g.extend({vertically:false,horizontally:false,horizontalAnchor:"left",verticalAnchor:"top"},j);var n=j.horizontalAnchor;var l=j.verticalAnchor;var h=g(this);var i=g.getArea(h.offset(),h.outerSize());var m={};if(j.horizontally){if(i.left<k.left){m.left=k.left}else{if(i.right>k.right){m.right=k.right}}}if(j.vertically){if(i.top<k.top){m.top=k.top}else{if(i.bottom>k.bottom){m.bottom=k.bottom}}}if(!g.isEmptyObject(m)){h.setOffset(m,{horizontalAnchor:n,verticalAnchor:l})}return this};g.fn.positionToFit=function(o,j,s,t){t=g.extend({fallbackPositioning:0,positionInTargetArea:true,functionsOrder:undefined,padding:0},t);var r=g(this);o=g.shrinkArea(o,t.padding);var p=undefined;if(s!==undefined){p=g.getArea(s.offset(),s.outerSize())}if(t.functionsOrder){var q=t.functionsOrder;var m=[];for(var l=0;l<q.length;l++){m.push(j[q[l]])}j=m}var k=false;for(var l=0;l<j.length;l++){j[l].call(r,p);var h=g.getArea(r.offset(),r.outerSize());if(!o||g.containsArea(o,h)){k=true;break}}if(!k&&t.fallbackPositioning!==j.length-1){var n=t.fallbackPositioning;if(g.isFunction(n)){n.call(r,p)}else{j[n].call(r,p)}}if(!k&&t.positionInTargetArea){r.positionInArea(o,{vertically:true,horizontally:true})}return this};g.fn.setOffset=function(k,r){r=g.extend({horizontalAnchor:"left",verticalAnchor:"top"},r);var m=r.horizontalAnchor;var h=r.verticalAnchor;for(var l=0;l<this.length;l++){var o=g(this[l]);var n;var q={left:undefined,top:undefined};var p=undefined;var j={};if(m!=="right"){if(k.left!==undefined){q.left=k.left;j.right=""}else{if(k.right!==undefined){q.left=k.right-o.outerWidth();j.right=""}else{if(k.horizontalCenter!==undefined){q.left=k.horizontalCenter-o.outerWidth()/2;j.right=""}}}}else{if(p===undefined){p=o.offsetParent()}if(k.right!==undefined){j.right=p.right()-k.right;j.left=""}else{if(k.left!==undefined){j.right=p.right()-k.left-o.outerWidth();j.left=""}else{if(k.horizontalCenter!==undefined){j.right=p.right()-k.horizontalCenter-o.outerWidth()/2;j.left=""}}}}if(h!=="bottom"){if(k.top!==undefined){q.top=k.top;j.bottom=""}else{if(k.bottom!==undefined){q.top=k.bottom-o.outerHeight();j.bottom=""}else{if(k.verticalCenter!==undefined){q.top=k.verticalCenter-o.outerHeight()/2;j.bottom=""}}}}else{if(p===undefined){p=o.offsetParent()}if(k.bottom!==undefined){j.bottom=p.bottom()-k.bottom;j.top=""}else{if(k.top!==undefined){j.bottom=p.bottom()-k.top-o.outerHeight();j.top=""}else{if(k.verticalCenter!==undefined){j.bottom=p.bottom()-k.verticalCenter-o.outerHeight()/2;j.top=""}}}}o.offset(q).css(j)}return this};g.fn.setPosition=function(h,i){i=g.extend({width:undefined,height:undefined},i);if(h.left!==undefined){g(this).css("left",h.left)}if(h.top!==undefined){g(this).css("top",h.top)}if(h.right!==undefined){if(h.left!==undefined){g(this).outerWidth(h.right-h.left)}else{f(i,g(this));g(this).css("left",h.right-i.width)}}if(h.bottom!==undefined){if(h.top!==undefined){g(this).outerHeight(h.bottom-h.top)}else{b(i,g(this));g(this).css("top",h.bottom-i.height)}}if(h.horizontalCenter){f(i,g(this));g(this).css("left",h.horizontalCenter-i.width/2)}if(h.verticalCenter){b(i,g(this));g(this).css("top",h.verticalCenter-i.height/2)}return g(this)};function f(i,h){if(i.width===undefined){i.width=h.outerWidth()}}function b(i,h){if(i.height===undefined){i.height=h.outerHeight()}}g.fn.centerInArea=function(j,h){h=g.extend({horizontally:true,vertically:true,calculatedSize:undefined},h);if(h.horizontally){var k=(h.calculatedSize&&h.calculatedSize.width?h.calculatedSize.width:g(this).outerWidth());g(this).css("left",j.left+(j.right-j.left)/2-k/2)}if(h.vertically){var i=(h.calculatedSize&&h.calculatedSize.height?h.calculatedSize.height:g(this).outerHeight());g(this).css("top",j.top+(j.bottom-j.top)/2-i/2)}return g(this)};g.fn.right=function(h){if(h!=undefined){return this.each(function(){g(this).offset({left:h-g(this).outerWidth(),top:g(this).offset().top})})}else{return g(this[0]).offset().left+g(this[0]).outerWidth()}};g.fn.stretch=function(k){var o=g(this).width();var n=g(this).height();var m=k.width/o;var j=k.height/n;var l=Math.min(m,j);var i=Math.floor(o*l);var h=Math.floor(n*l);return g(this).width(i).height(h)};g.stretch=function(k,n,j,i){i=g.extend({stretchWhenSmaller:true,ceilFractions:false},i);if(!i.stretchWhenSmaller&&n.width>=k.width&&n.height>=k.height){return{width:k.width,height:k.height,ratio:1}}var m=n.width/k.width;var h=n.height/k.height;var l;if(j){l=Math.max(m,h)}else{l=Math.min(m,h)}var o=i.ceilFractions?"ceil":"floor";return{width:Math[o](k.width*l),height:Math[o](k.height*l),ratio:l}};g.fn.left=function(h){if(h!=undefined){return this.each(function(){g(this).offset({left:h,top:g(this).offset().top})})}else{return g(this[0]).offset().left}};g.fn.bottom=function(h){if(h!=undefined){return this.each(function(){g(this).offset({left:g(this).offset().left,top:h-g(this).outerHeight()})})}else{return g(this[0]).offset().top+g(this[0]).outerHeight()}};g.fn.top=function(h){if(h!=undefined){return this.each(function(){g(this).offset({left:g(this).offset().left,top:h})})}else{return g(this[0]).offset().top}};g.fn.centerInParent=function(h){h=g.extend({centerHorizontally:true,centerVertically:true,isContentCenter:false},h);g(this).each(function(){var j=g(this).offsetParent();var i=j.getCenter(h.isContentCenter);g(this).center(i,h)})};g.fn.getCenter=function(i){if(i===undefined){i=false}var h=g(this[0]);if(i){var j=g.relativePosition(h.offset(),parseInt(h.css("paddingLeft")),parseInt(h.css("paddingTop")));return g.relativePosition(j,h.width()/2,h.height()/2)}else{return g.relativePosition(g(this[0]).offset(),g(this[0]).outerWidth()/2,g(this[0]).outerHeight()/2)}};g.fn.center=function(l,j){j=g.extend({centerHorizontally:true,centerVertically:true},j);if(l){for(var k=0;k<this.length;k++){var h=g(this[k]);var m={};if(j.centerHorizontally){m.horizontalCenter=l.left}if(j.centerVertically){m.verticalCenter=l.top}h.setOffset(m)}return this}else{return g(this).getCenter()}};g.fn.integerOffset=function(){var h=g(this).offset();return{left:Math.floor(h.left),top:Math.floor(h.top)}};g.getAbsoluteOffset=function(h,i){if(!i){return h}if(!h){return null}return{left:h.left+i.left,top:h.top+i.top}};g.getAbsoluteArea=function(h,i){if(!i){return h}if(!h){return null}return g.extendedAreaInfo({left:h.left+i.left,top:h.top+i.top,right:h.right+i.left,bottom:h.bottom+i.top})};g.relativeOffset=function(h,i){if(!i){return h}if(!h){return null}return{left:h.left-i.left,top:h.top-i.top}};g.relativeArea=function(i,j){if(!j){return i}if(!i){return null}var h={left:i.left-j.left,top:i.top-j.top,right:i.right-j.left,bottom:i.bottom-j.top};h.width=h.right-h.left;h.height=h.bottom-h.top;h.center={left:h.left+h.width/2,top:h.top+h.height/2};return h};g.offsetsEqual=function(i,h){if(!i||!h){return i===h}else{return i.top===h.top&&i.left===h.left}};g.sizesEqual=function(i,h){if(!i||!h){return i===h}else{return i.width===h.width&&i.height===h.height}};g.areasEqual=function(i,h){if(i===undefined||h===undefined){return i===h}if(i===null||h===null){return i===h}else{return(i.left===h.left&&i.top===h.top&&i.right===h.right&&i.bottom===h.bottom)}};g.normalizeToArea=function(i,h){return{left:Math.min(h.right,Math.max(h.left,i.left)),top:Math.min(h.bottom,Math.max(h.top,i.top))}};g.fn.calculateContentOffset=function(){var h=this;var k=parseInt(h.css("border-left-width"));var m=parseInt(h.css("border-top-width"));var i=parseInt(h.css("padding-left"));var j=parseInt(h.css("padding-top"));var l=h.offset();return{left:l.left+k+i,top:l.top+m+j}};g.fn.calculateScrollingPosition=function(s){s=g.extend({calculateLeft:false,calculateTop:false,includeMargin:false,$scrollParent:undefined,scrollParentContentOffset:undefined,scrollParentScrollLeft:undefined,scrollParentScrollTop:undefined},s);var l=s.calculateLeft;var j=s.calculateTop;var p=s.$scrollParent;var h=s.scrollParentContentOffset;var o=s.scrollParentScrollLeft;var k=s.scrollParentScrollTop;var m=s.includeMargin;var r=this;var q=(l&&o===undefined);var n=(j&&k===undefined);if(p===undefined&&(h===undefined||q||n)){p=r.scrollParent()}if(h===undefined){h=p.calculateContentOffset()}if(q){o=p.scrollLeft()}if(n){k=p.scrollTop()}var i=r.offset();if(m){if(l){i.left-=parseInt(r.css("margin-left"))}if(j){i.top-=parseInt(r.css("margin-top"))}}return{left:i.left-h.left+o,top:i.top-h.top+k}};g.fn.getArea=function(h){return g.getArea(g(this).offset(),g(this).elementSize(),h)};g.fn.setArea=function(h){return g(this).offset({left:h.left,top:h.top}).css({width:h.width,height:h.height})};g.fn.getOuterArea=function(h){return g.getArea(g(this).offset(),g(this).outerSize(),h)};g.getRelativeOffset=function(i,h){return{left:i.left-h.left,top:i.top-h.top}};g.getRelativeArea=function(i,h){return g.extendedAreaInfo({left:i.left-h.left,right:i.right-h.left,top:i.top-h.top,bottom:i.bottom-h.top})};g.getArea=function(k,h,j){k=g.extend({top:0,left:0},k);h=g.extend({width:0,height:0},h);if(j){if(isFinite(j)){j={left:j,top:j,right:j,bottom:j}}else{j=g.extend({left:0,top:0,right:0,bottom:0},j)}k.top-=j.top;k.left-=j.left;h.width+=(j.left+j.right);h.height+=(j.top+j.bottom)}var i={left:k.left,top:k.top,right:k.left+h.width,bottom:k.top+h.height};i.width=i.right-i.left;i.height=i.bottom-i.top;i.center={left:i.left+i.width/2,top:i.top+i.height/2};return i};g.expandArea=function(h,i){i=a(i);return g.extendedAreaInfo({left:h.left-i.left,right:h.right+i.right,top:h.top-i.top,bottom:h.bottom+i.bottom})};g.shrinkArea=function(h,i){i=a(i);return g.extendedAreaInfo({left:h.left+i.left,right:h.right-i.right,top:h.top+i.top,bottom:h.bottom-i.bottom})};g.areasOverlap=function(i,h){return g.getAreasOverlap(i,h)!==null};g.getAreasOverlap=function(j,i){if(!j||!i){return null}var h={left:Math.max(j.left,i.left),top:Math.max(j.top,i.top),right:Math.min(j.right,i.right),bottom:Math.min(j.bottom,i.bottom)};if(h.left>h.right||h.top>h.bottom){return null}return h};g.containsArea=function(i,h){return(g.isInsideArea(i,{top:h.top,left:h.left})&&g.isInsideArea(i,{top:h.bottom,left:h.right}))};g.isInsideArea=function(i,h,j){i=g.getAbsoluteArea(i,j);return(i.left<=h.left&&i.right>=h.left&&i.top<=h.top&&i.bottom>=h.top)};g.unionAreas=function(i){var h=g.minValue(i,function(m){return m.left});var l=g.minValue(i,function(m){return m.top});var j=g.maxValue(i,function(m){return m.right});var k=g.maxValue(i,function(m){return m.bottom});return g.extendedAreaInfo({left:h,top:l,right:j,bottom:k})};g.areasIntersects=function(i,h){return g.areasIntersectsHorizontal(i,h)&&g.areasIntersectsVertical(i,h)};g.areasIntersectsHorizontal=function(i,h){if(i.right<h.left||i.left>h.right){return false}return true};g.areasIntersectsVertical=function(i,h){if(i.bottom<h.top||i.top>h.bottom){return false}return true};g.intersectAreas=function(h){var i=g.maxValue(h,function(m){return m.left});var l=g.maxValue(h,function(m){return m.top});var j=g.minValue(h,function(m){return m.right});var k=g.minValue(h,function(m){return m.bottom});return g.extendedAreaInfo({left:i,top:l,right:j,bottom:k})};g.adjustArea=function(k,l){k=g.extend({},k);l=g.makeArray(l);for(var j=0;j<l.length;j++){var h=l[j];switch(h.side){case Side.Top:k.top+=h.value;break;case Side.Bottom:k.bottom+=h.value;break;case Side.Left:k.left+=h.value;break;case Side.Right:k.right+=h.value;break}}return g.extendedAreaInfo(k)};g.calculateAreaInfo=function(h){return g.extendedAreaInfo(g.extend({},h))};g.extendedAreaInfo=function(h){if(!h){return h}if(h.left!==undefined&&h.right!==undefined){h.width=h.right-h.left}else{if(h.right===undefined){h.right=h.width===Infinity?Infinity:h.left+h.width}else{h.left=h.right-h.width}}if(h.top!==undefined&&h.bottom!==undefined){h.height=h.bottom-h.top}else{if(h.bottom===undefined){h.bottom=h.height===Infinity?Infinity:h.top+h.height}else{h.top=h.bottom-h.height}}h.center={left:h.left+h.width/2,top:h.top+h.height/2};return h};g.cloneSize=function(h){if(!h){return h}return{width:h.width,height:h.height}};g.clonePosition=function(h){if(!h){return h}return{top:h.top,left:h.left}};g.getDistance=function(i,h){return Math.sqrt(Math.pow(i.left-h.left,2)+Math.pow(i.top-h.top,2))};g.fn.distance=function(j){var i=g(this[0]).center();var h=g(j).center();return Math.sqrt(Math.pow(i.x-h.x,2)+Math.pow(i.y-h.y,2))};g.fn.elementSize=function(h){if(h!==undefined){return g(this).width(h.width).height(h.height)}else{return{width:g(this[0]).width(),height:g(this[0]).height()}}};g.fn.elementContentSize=function(){return{width:parseFloat(this.css("width")),height:parseFloat(this.css("height"))}};g.fn.innerSize=function(){return{width:g(this[0]).innerWidth(),height:g(this[0]).innerHeight()}};g.fn.outerSize=function(h){if(h!==undefined){return g(this).outerWidth(h.width).outerHeight(h.height)}else{return{width:g(this[0]).outerWidth(),height:g(this[0]).outerHeight()}}};g.fn.positionHorizontally=function(i,j,h){h=g.extend({skipPositionCheck:false},h);if(i===undefined){return g(this)}return g(this).each(function(){g(this).css({left:"",right:"","margin-left":""});if(isFinite(i)){g(this).css({left:i})}else{if(i==HorizontalAlignment.Left){g(this).css({left:0})}else{if(i==HorizontalAlignment.Right){g(this).css({right:0})}else{g(this).makeCentered({horizontally:true,vertically:false,preComputedSize:j,skipPositionCheck:h.skipPositionCheck})}}}})};g.fn.positionVertically=function(h,j,i){i=g.extend({skipPositionCheck:false},i);if(h===undefined){return g(this)}return g(this).each(function(){g(this).css({top:"",bottom:"","margin-top":""});if(isFinite(h)){g(this).css({top:h})}else{if(h==VerticalAlignment.Top){g(this).css({top:0})}else{if(h==VerticalAlignment.Bottom){g(this).css({bottom:0})}else{g(this).makeCentered({horizontally:false,vertically:true,preComputedSize:j,skipPositionCheck:i.skipPositionCheck})}}}})};g.fn.clearCentering=function(){return g(this).css({left:0,top:0,"margin-left":0,"margin-top":0})};g.fn.clearFill=function(){return g(this).css({width:"",height:""})};g.fn.makeFill=function(){return g(this).css({width:"100%",height:"100%",top:0,left:0,position:"absolute"})};g.fn.shiftHalfVertically=function(){return g(this).each(function(){var h=g(this).outerHeight()/2;g(this).css({"margin-top":0-h+"px"})})};g.fn.shiftHalfHorizontally=function(){return g(this).each(function(){var h=g(this).outerWidth()/2;g(this).css({"margin-left":0-h+"px"})})};g.fn.makeCentered=function(h){h=g.extend({horizontally:true,vertically:true,preComputedSize:undefined,skipPositionCheck:false},h);return g(this).each(function(){var j=g(this);var k;var i;if(!h.skipPositionCheck){if(j.css("position")!=="fixed"){j.css({position:"absolute"})}}var l=h.preComputedSize;if(l){k=l.width;i=l.height}else{k=j.outerWidth();i=j.outerHeight()}if(h.horizontally){j.css({left:"50%","margin-left":0-k/2+"px"})}if(h.vertically){j.css({top:"50%","margin-top":0-i/2+"px"})}})};g.fn.makeCenteredVertically=function(h){h=g.extend({bottom:true,top:false,margin:0},h);return g(this).each(function(){g(this).css({position:"absolute"});if(h.top){g(this).css({top:"50%","margin-top":0+h.margin})}else{if(h.bottom){g(this).css({top:"50%","margin-top":0-g(this).outerHeight()-h.margin+"px"})}}})};g.fn.makePositioned=function(){var h=this.css("position");if(h!="absolute"&&h!="fixed"){this.css("position","relative")}return this};g.relativePosition=function(h,j,i){return({left:h.left+j,top:h.top+i})};var c=0;g.calculateInnerBorderRadius=function(i,k,h){var l=Math.max(0,h-i-c);var j=Math.max(0,h-k-c);if(l===j){return l+"px"}else{return"{0}px {1}px".format(l,j)}};g.updateInnerBorderRadius=function(h,j,i){j=g.extend({topLeft:0,topRight:0,bottomLeft:0,bottomRight:0},j);i=g.extend({left:0,right:0,top:0,bottom:0},i);if(h){h.css({borderRadiusTopLeft:g.calculateInnerBorderRadius(i.left,i.top,j.topLeft),borderRadiusTopRight:g.calculateInnerBorderRadius(i.right,i.top,j.topRight),borderRadiusBottomLeft:g.calculateInnerBorderRadius(i.left,i.bottom,j.bottomLeft),borderRadiusBottomRight:g.calculateInnerBorderRadius(i.right,i.bottom,j.bottomRight)})}};g.borderRadiusEqualityComparer=g.createFieldsEqualityComparer(["bottomRight","topRight","topLeft","bottomLeft"]);g.borderWidthEqualityComparer=g.createFieldsEqualityComparer(["top","right","left","bottom"]);function a(h){if(isFinite(h)){return{left:h,top:h,right:h,bottom:h}}else{return g.extend({left:0,top:0,right:0,bottom:0},h)}}})(jQuery);(function(a){a.buildPositioningFunction=function(c){if(c==="window"){c=function(){return a.getWindowArea()}}var o=[];var l=[];var g=[];var m=[];var i;var d;var f;var n=function(p,t,q){var s;if(f){t=f}if(a.isFunction(t)){t=t()}if(a.isJQueryObject(t)){t=t.getOuterArea()}var v=c;if(a.isFunction(v)){v=v()}for(s=0;s<g.length;s++){g[s].call(p,t,v)}k(o,t);k(l,t);var u;var r;if(o.length>0){u=b(p,Orientation.Horizontal,h(o,i),v)}if(l.length>0){r=b(p,Orientation.Vertical,h(l,d),v)}for(s=0;s<m.length;s++){m[s].call(p,q,{horizontalAlignment:u,verticalAlignment:r})}};n.allRelativeTo=function(p){f=p;return n};n.afterPositioning=function(p){a.merge(m,a.makeArray(p));return n};n.beforePositioning=function(p){a.merge(g,a.makeArray(p));return n};n.alignHorizontally=function(q,r,p){p=a.extend({distance:0,relativeTo:undefined,usageCallback:a.noop,mirrorOnOverflow:false,horizontalAnchor:"left"},p);o.push({side:q,alignTo:r,distance:p.distance,usageCallback:p.usageCallback,relativeTo:p.relativeTo,horizontalAnchor:p.horizontalAnchor});if(p.mirrorOnOverflow){o.push({side:j(q),alignTo:j(r),distance:p.distance,relativeTo:p.relativeTo,usageCallback:p.usageCallback,horizontalAnchor:p.horizontalAnchor})}return n};n.alignVertically=function(q,r,p){p=a.extend({distance:0,relativeTo:undefined,usageCallback:a.noop,mirrorOnOverflow:false,verticalAnchor:"top"},p);l.push({side:q,alignTo:r,distance:p.distance,usageCallback:p.usageCallback,relativeTo:p.relativeTo,verticalAnchor:p.verticalAnchor});if(p.mirrorOnOverflow){l.push({side:j(q),alignTo:j(r),distance:p.distance,relativeTo:p.relativeTo,usageCallback:p.usageCallback,verticalAnchor:p.verticalAnchor})}return n};n.preferHorizontally=function(p){i=p;return n};n.preferVertically=function(p){d=p;return n};return n;function j(p){switch(p){case Side.Bottom:return Side.Top;case Side.Top:return Side.Bottom;case Side.Left:return Side.Right;case Side.Right:return Side.Left;default:return p}}function k(p,s){for(var q=0;q<p.length;q++){var t=p[q];var r=t.relativeTo;if(!r){t.relativeArea=s}else{if(a.isFunction(r)){r=r()}if(a.isJQueryObject(r)){r=r.getOuterArea()}t.relativeArea=r}}}function h(p,q){if(q){return a.sortArrayDesc(p,function(s){var r=q(s.side,s.alignTo);if(r===true){return 1}else{if(r===false){return 0}}return r})}return p}function b(x,r,q,t){q=a.merge([],q);if(q.length>1){q.push(q[0])}var w=false;var s;for(var u=0;(u<q.length)&&!w;u++){s=q[u];var p=s.usageCallback;if(r===Orientation.Horizontal){x.alignHorizontally(s.relativeArea,s)}else{x.alignVertically(s.relativeArea,s)}if(!t){w=true;p({$element:x,isPositioned:w,positioningArea:t,relativeArea:s.relativeArea})}else{var v=a.extend({},t);if(r===Orientation.Horizontal){v.top=-Infinity;v.bottom=Infinity}else{v.left=-Infinity;v.right=Infinity}if(a.containsArea(v,x.getOuterArea())){w=true;p({$element:x,isPositioned:w,positioningArea:t,relativeArea:s.relativeArea})}}}if(!w){s.usageCallback({$element:x,isPositioned:w,positioningArea:t,relativeArea:s.relativeArea})}if(t){x.positionInArea(t,{horizontally:r===Orientation.Horizontal,vertically:r===Orientation.Vertical})}return s}};a.fn.alignHorizontally=function(g,l){l=a.extend({side:Side.Left,alignTo:Side.Right,distance:0,horizontalAnchor:"left",verticalAnchor:"top"},l);var j=l.side;var c=l.distance;var i=l.alignTo;var h=l.horizontalAnchor;var b=l.verticalAnchor;var k=this;var d;switch(i){case Side.Left:d=g.left;break;case Side.Right:d=g.right;break;case Side.Center:d=g.center.left;break}var f={};switch(j){case Side.Left:f.left=d+c;break;case Side.Right:f.right=d-c;break;case Side.Center:f.horizontalCenter=d+c;break}k.setOffset(f,{horizontalAnchor:h,verticalAnchor:b});return k};a.fn.alignVertically=function(g,l){l=a.extend({side:Side.Top,alignTo:Side.Bottom,distance:0,horizontalAnchor:"left",verticalAnchor:"top"},l);var j=l.side;var c=l.distance;var i=l.alignTo;var h=l.horizontalAnchor;var b=l.verticalAnchor;var k=this;var d;switch(i){case Side.Top:d=g.top;break;case Side.Bottom:d=g.bottom;break;case Side.Center:d=g.center.top;break}var f={};switch(j){case Side.Top:f.top=d+c;break;case Side.Bottom:f.bottom=d-c;break;case Side.Center:f.verticalCenter=d+c;break}k.setOffset(f,{horizontalAnchor:h,verticalAnchor:b});return k}})(jQuery);var PrimitiveValues={Auto:"auto",Inherit:"inherit"};var RoutingActions={Route:"page",Redirect:"redirect",RedirectPermanent:"permanent",RedirectToPage:"redirect-page",RedirectToPath:"redirect-path",RedirectPermanentToPage:"permanent-page",RedirectPermanentToPath:"permanent-path"};var PredefinedFontSizes=[8,9,10,11,12,14,16,18,20,22,24,26,28,36,48,72];var StudioUsersGroups={All:0,Members:1,Clients:2};var RoutingDestination={HomePage:"home"};var TemplateItemInstanceIdSeperator="-";var CSSUnits={Pixels:"px",Percentages:"percentages",Normal:"normal",Inherit:"inherit"};var ButtonTypes={ActionButton:"actionButton",ToggleButton:"toggleButton"};var BindingType={TwoWay:1,FromTarget:2,FromSource:3};var SliderTypes={PercentageSlider:1,ValuesSlider:2};var ShadowTypes={DropShadow:1,InnerShadow:2,Glow:3,InnerGlow:4};var Alignment={Top:1,Bottom:2,VerticalCenter:3,Left:4,Right:5,HorizontalCenter:6};var HtmlTags={DIV:"DIV",SECTION:"SECTION",NAV:"NAV",ARTICLE:"ARTICLE",ASIDE:"ASIDE",HEADER:"HEADER",FOOTER:"FOOTER",HGROUP:"HGROUP",H1:"H1",H2:"H2",H3:"H3",H4:"H4",H5:"H5",H6:"H6"};var TextTypes={None:{value:"div",title:"Normal"},H1:{value:"H1",title:"Heading 1"},H2:{value:"H2",title:"Heading 2"},H3:{value:"H3",title:"Heading 3"},H4:{value:"H4",title:"Heading 4"},H5:{value:"H5",title:"Heading 5"},H6:{value:"H6",title:"Heading 6"}};var LinkTypes={Web:"Web",Email:"Email",Pages:"Pages",Cell:"Cell",Asset:"Asset",None:"None"};var TextDirection={RightToLeft:1,LeftToRight:2};var VisibilityOptions={Visible:"Visible",Hidden:"Hidden",Default:"Default"};var VerticalAlignment={Top:"top",Centered:"center",Bottom:"bottom",None:"none"};var ElementDisplay={Block:"block",Fixed:"fixed"};var HorizontalAlignment={Left:"left",Centered:"center",Right:"right",None:"none"};var VerticalAlignmentToCss={top:"top",center:"middle",bottom:"bottom",none:"none"};var CssVerticalAlignment={Top:"top",Middle:"middle",Bottom:"bottom",None:"none"};var CssHorizontalAlignment={Left:"left",Center:"center",Right:"right",None:"none"};var Orientation={Vertical:"vertical",Horizontal:"horizontal",Both:"both"};var MouseButton={Left:1,Middle:2,Right:3};var Position={Top:1,Bottom:2,Left:3,Right:4,Center:5};var HorizontalDocking={Left:1,Right:2,Stretched:3,Centered:4,None:5};var VerticalDocking={Top:1,Bottom:2,Stretched:3,Centered:4,None:5};var Side={Top:1,Bottom:2,Left:3,Right:4,Center:5};var Corner={TopLeft:1,TopRight:2,BottomLeft:3,BottomRight:4};var ColorTypes={Solid:1,Gradient:2};var ColorSpace={RGB:1,HSL:2};var ColorSpaceComponent={R:1,G:2,B:3,H:4,S:5,L:6};var DialogBehaviour={None:0,Commit:1,Cancel:2};var CalloutPositions={Below:"below",Above:"above",BelowLeft:"below-left",BelowRight:"below-right",AboveLeft:"above-left",AboveRight:"above-right",Right:"right",Left:"left"};var Speed={None:0,VerySlow:4000,Slow:2400,Normal:1500,Fast:900,VeryFast:400};var FlagsStates={AllTrue:1,AllFalse:2,SomeTrue:3,SomeFalse:4};var StatesTypes={Enabling:0,Displaying:1,Visibility:2,Custom:3};var SavedVersionType={Normal:0,Published:1,AutoSaved:2};var SiteType={WebSite:0,Mobile:1,All:2};var NavigationDirection={Forward:1,Backward:-1};var FormFieldsTypes={Unknown:0,ShortText:1,LongText:2,Email:3,Date:4,Url:5};var ElementsRoot=1;var Resolutions={Width1024:"width-1024",Width1150:"width-1150",Width1680:"width-1680",Mobile:"mobile"};var FacebookFonts={arial:{title:"arial"},"lucida grande":{title:"lucida grande"},"segoe ui":{title:"segoe ui"},tahoma:{title:"tahoma"},"trebuchet ms":{title:"trebuchet ms"},verdana:{title:"verdana"}};var FacebookLayouts={standard:{value:"standard",title:"standard"},"button count":{value:"button_count",title:"Button Count"},"box count":{value:"box_count",title:"Box Count"}};var FacebookSize={standard:{value:"small",title:"Small"},"button count":{value:"large",title:"Large"}};var SelectionBehaviour={RadioButtons:"radio-buttons",ToggleButtons:"toggle-buttons"};var KeyCodes={ESC:27,Enter:13,Ctrl:17,Shift:16,Space:32,Delete:46,Left:37,Up:38,Right:39,Down:40,Insert:45,Tab:9,BackSpace:8,Comma:188};var FormValidators={None:{name:"None",value:FormFieldsTypes.ShortText},Email:{name:"Email",value:FormFieldsTypes.Email},Date:{name:"Date",value:FormFieldsTypes.Date},Url:{name:"Url",value:FormFieldsTypes.Url}};var FontsClassifications={SansSerif:{name:"sanserif",iconClass:"sprite-icon sprite-font-sans-serif",title:"Sans Serif"},Hand:{name:"hand",iconClass:"sprite-icon sprite-font-hand",title:"Hand"},Monospace:{name:"mono",iconClass:"sprite-icon sprite-font-mono",title:"Mono"},Decorative:{name:"decorative",iconClass:"sprite-icon sprite-font-decorative",title:"Decorative"},Blackletter:{name:"blackletter",iconClass:"sprite-icon sprite-font-blackletter",title:"Blackletter"},Serif:{name:"serif",iconClass:"sprite-icon sprite-font-serif",title:"Serif"}};var FontsLanguages={English:{name:"eng",title:"English"},Hebrew:{name:"heb",title:"Hebrew"}};var Brands={Webzai:1,Sitelio:2,WebsiteBuilder:3,Stagey:4,Sitey:5,SiteBuilder:6};var AnimationSpeed={NoAnimation:{title:"No Animation",value:0,iconClass:"font-icon icon-transition-none icon-size-20"},Slow:{title:"Slow",value:800,iconClass:"font-icon icon-transition-slow icon-size-20"},Normal:{title:"Normal",value:400,iconClass:"font-icon icon-transition-normal icon-size-20"},Fast:{title:"Fast",value:200,iconClass:"font-icon icon-transition-fast icon-size-20"}};(function(){a();function a(){var b;for(b=65;b<=90;b++){KeyCodes[String.fromCharCode(b)]=b}for(b=0;b<=9;b++){KeyCodes["NUM"+b]=48+b}for(b=1;b<=12;b++){KeyCodes["F"+b]=111+b}}})();(function(b){var a={};b.unScheduleOperation=function(c){if(c!==undefined){window.clearInterval(c)}};b.scheduleOperation=function(d,c){var f=window.setInterval(function(){d();window.clearInterval(f)},c);return f};b.scheduleNamedOperation=function(d,f,c){a[d]=b.scheduleOperation(f,c)};b.unScheduleNamedOperation=function(c){var d=a[c];if(d!==undefined){b.unScheduleOperation(d);delete a[c]}};b.enqueueOperation=function(f,c,d){b(document).enqueueOperation(f,c,d)};b.fn.enqueueOperation=function(g,d,f){if(b(this).data("enqueued-operations")==undefined){b(this).data("enqueued-operations",[])}var c=b(this).data("enqueued-operations");if(c[g]===undefined){b.beginInvoke(function(){c[g].operation.call(c[g].args);c[g]=undefined})}c[g]={operation:d,args:f}};b.createDelayedFunction=function(d){var c={original:d,delayedCall:null,delayedFunction:function(){c.delayedCall={self:this,arguments:arguments};window.setTimeout(function(){c.invokeDelayed()},0)},invokeDelayed:function(){if(c.delayedCall){var f=c.delayedCall;c.delayedCall=null;c.original.apply(f.self,f.arguments)}}};return c};b.delayEventHandler=function(d){var c=null;return function(g){var f=this;c=g;window.setTimeout(function(){if(c){var h=c;c=null;d.call(f,h)}},0)}}})(jQuery);(function(a){a.fn.getScrollableController=function(){return a(this).data("widget-scrollable")};a.fn.scrollable=function(o){var i=arguments;var m=this;if(typeof o==="string"){switch(o){case"currentItem":return a(this[0]).data("widget-scrollable").getCurrentItem();case"options":if(i.length===1){return a(this[0]).data("widget-scrollable").options}break;case"scrollOffset":return a(this[0]).data("widget-scrollable").getScrollOffset(i[1]);case"maxScrolledItemIndex":return a(this[0]).data("widget-scrollable").getMaxScrolledItemIndex();case"maxScrollOffset":return a(this[0]).data("widget-scrollable").getMaxScrollOffset(i[1])}}var f={mouseMoveScrollingActive:false};var j;var g=true;var k=a(this).data("widget-scrollable");var b=DeferredObject.create(function(){return StyleListener.create(m,{properties:["scrollHeight","scrollWidth","height","width"],minInterval:100,callback:function(){k.refresh()}})});var c=ObservableFlag.create(false,{valueChangeCallback:function(p){var r=b.get();if(p){r.activate();var q=r.checkForChanges();if(!q){k.refresh()}}else{r.deactivate();k.refresh()}}});if(k===undefined){k={id:a.uniqueID(),$element:a(this),isEnabled:true,refreshedEvent:SimpleEvent.create(),scrollingEvent:SimpleEvent.create(),scrollingStartEvent:SimpleEvent.create(),scrollingStopEvent:SimpleEvent.create(),viewportChangedEvent:SimpleEvent.create(),isIFrame:a(this).is("iframe"),scrolledItems:a([]),currentItem:undefined,scrollingAnimations:0,options:a.extend({},{scrollableContainer:a(this),useMouseScrolling:true,scrolledItemsFilter:"*",orientation:"vertical",supportItemsScrolling:false,scrollItems:false,animateScrolling:false,getMaxScrollHeight:undefined,getMaxScrollWidth:undefined,getScrolledContetWidth:undefined,sensitivity:50},o),toggleScrollTracking:function(p){g=p},setOptions:function(p){a.extend(k.options,p);k.refresh()},toggleAutoRefresh:function(p){c.setValue(p);return k},startMouseMoveScrolling:function(p){p=a.extend({cacheScrollableArea:true,sensitivity:50,distance:20,scrollingCallback:a.noop},p);if(f.mouseMoveScrollingActive){return}f.mouseMoveScrollingActive=true;var q=undefined;if(p.cacheScrollableArea){q=k.$element.getArea()}a(document).bind("mousemove.moveScrolling"+k.id,function(r){var s=a.getMouseOffset(r);var t=q;if(!t){t=k.$element.getArea()}switch(k.options.orientation){case Orientation.Vertical:if(s.top-t.top<p.sensitivity){k.$element.scrollTop(k.$element.scrollTop()-p.distance);p.scrollingCallback()}else{if(t.bottom-s.top<p.sensitivity){k.$element.scrollTop(k.$element.scrollTop()+p.distance);p.scrollingCallback()}}break;case Orientation.Horizontal:break}})},stopMouseMoveScrolling:function(){if(!f.mouseMoveScrollingActive){return}f.mouseMoveScrollingActive=false;a(document).unbind("mousemove.moveScrolling"+k.id)},refresh:function(){l();k.refreshedEvent.fire(k);return k},scroll:function(s,q,r,p){if(q===undefined){q=true}if(k.options.scrollItems){if(q){k.scrollItems(s,r)}else{k.scrollToItem(s,r)}}else{if(q){k.scrollToOffset(k.getScrollOffset()+s,r,undefined,p)}else{k.scrollToOffset(s,r,undefined,p)}}},getScrollOffset:function(q){q=a.valueOrDefault(q,k.options.orientation);var p=k.$element;if(p.is("iframe")){p=a(p[0].contentWindow)}if(q==="vertical"){return p.scrollTop()}else{return p.scrollLeft()}},scrollToOffset:function(r,s,u,q){if(s===undefined){s=false}var w=k.$element;var y=false;if(w.is("iframe")){s=false;y=true}var t=a.valueOrDefault(q,k.options.orientation)==="vertical";var p=k.getMaxScrollOffset(q);var v=Math.min(p,r);k.animationTarget=v;k.$element.stop("scrolling",true);if(s){k.scrollingAnimations++;var x=t?{scrollTop:v}:{scrollLeft:v};k.scrollingStartEvent.fire();k.$element.animate(x,{duration:"fast",queue:"scrolling",complete:function(){k.scrollingAnimations--;k.animationTarget=undefined;if(u!==undefined){u()}if(k.scrollingAnimations===0){k.scrollingStopEvent.fire()}k.viewportChangedEvent.fire();k.scrollingEvent.fire()},step:function(){k.viewportChangedEvent.fire()}}).dequeue("scrolling")}else{if(t){if(y){w[0].contentWindow.scrollTo(a(w[0].contentWindow).scrollLeft(),v)}else{w.scrollTop(v)}}else{if(y){w[0].contentWindow.scrollTo(v,a(w[0].contentWindow).scrollTop())}else{w.scrollLeft(v)}}k.viewportChangedEvent.fire();if(u!==undefined){u()}k.scrollingStopEvent.fire()}},canScrollVertically:function(){return k.getMaxScrollOffset(Orientation.Vertical)>0},getMaxScrollOffset:function(p){p=a.valueOrDefault(p,k.options.orientation);if(p==="vertical"){if(k.options.getMaxScrollHeight){return k.options.getMaxScrollHeight()}return k.$element.getMaxScrollHeight()}else{if(k.options.getMaxScrollWidth){return k.options.getMaxScrollWidth()}else{if(k.options.getScrolledContetWidth){return k.options.getScrolledContetWidth()-k.$element.outerWidth()}}return k.$element.getMaxScrollWidth()}},getMaxScrolledItemIndex:function(){var q=k.getMaxScrollOffset();var p=k.scrolledItems.length-1;k.scrolledItems.each(function(){var r=a(this).data("scrollable-item");if(k.options.orientation==="vertical"&&r.position.top>=q){p=r.index;return false}else{if(k.options.orientation==="horizontal"&&r.position.left>=q){p=r.index;return false}}});return p},scrollItems:function(p,t){var r=k.getScrollOffset();if(k.animationTarget!==undefined){r=k.animationTarget}var s=k.getItemAtOffset(r);if(s!==undefined){var q=s.index+p;q=Math.min(k.getMaxScrolledItemIndex(),q);if(q!==s.index){k.scrollToItem(q,t)}}},scrollToItem:function(q,s,r){var p=n(q);if(p!==undefined){if(k.options.orientation==="vertical"){k.scrollToOffset(p.position.top,s,r)}else{k.scrollToOffset(p.position.left,s,r)}k.currentItem=p}},getItemAtOffset:function(p){var q=undefined;k.scrolledItems.each(function(){q=a(this).data("scrollable-item");if((k.options.orientation==="vertical"&&q.position.top>=p)||(k.options.orientation==="horizontal"&&q.position.left>=p)){return false}});return q},disable:function(){if(!k.$element.is("iframe")){k.$element.css({overflow:""})}if(j){j.disable()}k.isEnabled=false},enable:function(){if(!k.$element.is("iframe")){k.$element.css({overflow:"hidden"})}if(j){j.enable()}k.isEnabled=true},bringToViewport:function(s){if(s.parents().filter(m)){var p=m.getArea();var r=s.getOuterArea();var q=k.options.orientation;if(q===Orientation.Vertical){if(r.top<p.top){m.scrollTop(m.scrollTop()+(r.top-p.top))}else{if(r.bottom>p.bottom){m.scrollTop(m.scrollTop()+(r.bottom-p.bottom))}}}}},getCurrentItem:function(){if(k.currentItem!==undefined){return k.currentItem}k.currentItem=k.getItemAtOffset(k.getScrollOffset());return k.currentItem}};if(k.options.scrollItems){k.options.supportItemsScrolling=true}a(this).data("widget-scrollable",k);if(!k.$element.is("iframe")){k.$element.css({overflow:"hidden"});h(k.$element)}else{var d=k.$element[0];if(d.contentWindow.document.body){h(a(d.contentWindow))}else{a(d).load(function(){h(a(d.contentWindow))})}}if(k.options.useMouseScrolling){j=k.options.scrollableContainer.setMouseWheelScrolling(k)}l()}if(a.isPlainObject(o)){a.extend(k.options,o)}else{if(typeof o==="string"){switch(o){case"refresh":k.refresh();break;case"scrollToItem":k.scrollToItem(i[1],i[2],i[3]);break;case"scrollItems":k.scrollItems(i[1],i[2]);break;case"scrollToOffset":k.scrollToOffset(i[1],i[2],i[3],i[4]);break;case"scroll":k.scroll(i[1]);break;case"disable":k.disable();break;case"enable":k.enable();break;case"options":if(i.length>1){a.extend(k.options,i[1])}break}}}return k;function h(p){p.bind("scroll",function(){if(g){k.currentItem=undefined;k.scrollingEvent.fire()}})}function n(p){var q=undefined;if(isFinite(p)&&p<k.scrolledItems.length){q=a(k.scrolledItems[p])}else{q=a(p)}if(q!==undefined){return q.data("scrollable-item")}else{return undefined}}function l(){if(!k.options.supportItemsScrolling){return}var t=false;var s=k.$element.offset();var v=k.$element.scrollTop();var p=k.$element.scrollLeft();var q=[];var u;k.scrolledItems=k.$element.children(k.options.scrolledItemsFilter).each(function(){var x=a(this).offset();var w={left:x.left-s.left+p,top:x.top-s.top+v};var y={$element:a(this),position:w};if(!t){if((k.options.orientation==="vertical"&&w.top>=v)||(k.options.orientation==="horizontal"&&w.left>=p)){k.currentItem=y;t=true}}q.push(y)});for(var r=0;r<q.length;r++){u=q[r];u.index=r;u.$element.data("scrollable-item",u)}}};a.fn.getMaxScrollHeight=function(){if(this.is("iframe")){return a(this[0].contentWindow.document.body)[0].scrollHeight-a(this).height()}else{if(this[0]===document){return this[0].body.scrollHeight-a(window).height()}else{if(this.is("body")){return this[0].scrollHeight-a(window).height()}else{return a(this)[0].scrollHeight-a(this).height()}}}};a.fn.getMaxScrollWidth=function(){if(this.is("iframe")){return a(this[0].contentWindow.document.body)[0].scrollWidth-a(this).height()}else{return a(this).getScrollWidth()-a(this).width()}};a.fn.getScrollWidth=function(){var b=a(this).data("customScrollWidth");if(b!==undefined){return a.evaluateWhenFunction(b)}else{return a(this)[0].scrollWidth}};a.fn.getScrollHeight=function(){return a(this)[0].scrollHeight};a.fn.setCustomScrollWidth=function(b){return a(this).data("customScrollWidth",b)};a.fn.setMoveScrolling=function(g,f){f=a.extend({enableVerticalScrolling:true,enableHorizontalScrolling:true,sensitivity:1},f);var d=this;var h=d.preventBrowserBehaviour();var c=d.data("moveScrolling");if(c){c.clear()}d.bind("mousedown.initmovescrolling touchstart.initmovescrolling",function(j){var i=a.getMouseOffset(j);var l=g.getScrollOffset(Orientation.Vertical);var k=g.getScrollOffset(Orientation.Horizontal);a(document).bind("mousemove.movescrolling touchmove.movescrolling",function(o){var p=a.getMouseOffset(o);var n=p.left-i.left;var m=p.top-i.top;if(f.enableHorizontalScrolling){g.scrollToOffset(k-n*f.sensitivity,false,undefined,Orientation.Horizontal)}if(f.enableVerticalScrolling){g.scrollToOffset(l-m*f.sensitivity,false,undefined,Orientation.Vertical)}}).one("mouseup.movescrolling touchend.movescrolling",function(){a(document).unbind(".movescrolling")})});var b={clear:function(){d.unbind(".initmovescrolling");a(document).unbind(".movescrolling");h.clear()}};d.data("moveScrolling",b);return b};a.fn.setMouseWheelScrolling=function(g){var c=a(this);var b={};var h=g;var f=false;a.extend(b,{setTarget:function(i){h=i},disable:function(){if(f){f=false;c.unbind("mousewheel.scrolling")}},enable:function(){if(!f){f=true;c.bind("mousewheel.scrolling",function(k,m,j,i){var l=h.options.orientation==="vertical";if((l&&a(k.target).closest(".vertically-scrollable").length>0)||(a(k.target).closest(".horizontally-scrollable").length>0)){return}return d(k,m)})}},toggleEnable:function(i){if(i){b.enable()}else{b.disable()}}});b.enable();return b;function d(i,k){if(!h){return}var j=(h.options.orientation==="vertical"&&h.$element.getMaxScrollHeight()>0)||(h.options.orientation==="horizontal"&&h.$element.getMaxScrollWidth()>0);if(j){if(h.options.scrollItems){h.scroll(k<0?1:-1,true,h.options.animateScrolling)}else{h.scroll(0-k*h.options.sensitivity,true,h.options.animateScrolling)}i.preventDefault();i.returnValue=false;return false}return undefined}}})(jQuery);(function(){String.prototype.format=function(){var a=arguments;if(a.length===1&&$.isPlainObject(a[0])){var c=this;var d=a[0];for(var b in d){c=c.replace(new RegExp("{"+b+"}","g"),$.valueOrDefault(d[b],""))}return c}else{return this.replace(/{(\d+)}/g,function(f,g){return typeof a[g]!="undefined"?a[g]:f})}}})();(function(a){a.isEmptyOrWhitespace=function(b){if(!b){return true}return a.trim(b)===""};a.removeTags=function(c,b){b=a.makeArray(b);if(b.length===0){return c}return c.replace(new RegExp("<[//]{0,1}("+b.join("|")+")[^><]*>","gi"),"")};a.toTitleCase=function(b){return b.replace(/\w\S*/g,function(c){return c.charAt(0).toUpperCase()+c.substr(1).toLowerCase()})};a.capitalizeFirstLetter=function(b){return b.replace(/^./,function(c){return c.toUpperCase()})};a.repeatStr=function(d,c){if(c<1){return""}var b="";while(c>0){if(c&1){b+=d}c>>=1,d+=d}return b};a.trimLeft=function(b,c){if(c===undefined){c="\\s"}return b.replace(new RegExp("^["+c+"]+"),"")};a.trimRight=function(b,c){if(c===undefined){c="\\s"}return b.replace(new RegExp("["+c+"]+$"),"")};a.trimPattern=function(b,d){if(d===undefined){d="\\s"}var c=new XRegExp("^("+d+")+|("+d+")+$","g");return b.replace(c,"")};a.trimPrefix=function(h,f,c,b){c=a.valueOrDefault(c,false);var g=b?a.trim(h):h;var d=g.substring(0,f.length);if(d===f||(c&&d.toLowerCase()===f.toLowerCase())){return g.substring(f.length)}return h};a.trimSuffix=function(d,c){var b=d.substring(d.length-c.length);if(b===c){return d.substring(0,d.length-c.length)}return d};a.getPrefix=function(c,b){var d=c.indexOf(b);if(d<0){return c}return c.substring(0,d)};a.substringFrom=function(d,c){var b=d.indexOf(c);if(b<0){return""}return d.substring(b)};a.substringAfter=function(d,c){var b=d.indexOf(c);if(b<0){return""}return d.substring(b+c.length)};a.substringAfterLast=function(d,c){var b=d.lastIndexOf(c);if(b<0){return""}return d.substring(b+c.length)};a.dictionaryToString=function(g,c,f){f=a.valueOrDefault(f," ");var h=new StringBuilder(f);for(var b in g){var d=g[b];h.append(c,b,d)}return h.toString()};a.fn.formatHtml=function(c){for(var d=0;d<this.length;d++){var b=a(this[d]);b.html(b.html().format(c))}return this}})(jQuery);function StringBuilder(c,b){b=$.extend({indentationString:false},b);var a=b.indentationString;var h=this;var g=0;var f=[];var d=c!==undefined?c:"";this.conditionalAppend=function(k,j,i){if(k){h.append(j)}else{if(i){h.append(i)}}return h};this.append=function(i){if(i!==undefined){if(arguments.length>1){f.push(i.format.apply(i,$.restArguments(arguments,1)))}else{f.push(i)}}return h};this.appendLine=function(i){if(g){h.append($.repeatStr(a,g))}return h.append.apply(h,arguments).append("\n")};this.appendTo=function(i){i.append(h)};this.toString=function(){return f.join(d)};this.increaseIndentation=function(){if(a){g++}return h};this.decreaseIndentation=function(){if(a){g=Math.max(0,g-1)}return h}}(function(b){b.fn.copyTextStyle=function(c){var d={"font-size":c.css("font-size"),"font-family":c.css("font-family"),"font-weight":c.css("font-weight"),"white-space":c.css("white-space"),"word-spacing":c.css("word-spacing"),"line-height":c.css("line-height")};return b(this).css(d)};b.fn.measureText=function(i,f){if(f===undefined){f=true}var d={width:f?b(this).css("width"):"auto","font-size":b(this).css("font-size"),"font-family":b(this).css("font-family"),"font-weight":b(this).css("font-weight"),"white-space":b(this).css("white-space"),"word-spacing":b(this).css("word-spacing"),"word-wrap":b(this).css("word-wrap"),"line-height":b(this).css("line-height"),position:"absolute"};var h=b("<div></div>").css(d).html(i).appendTo(b(this).parent()).wrapText();var c=h.height();var g=h.width();h.remove();return{height:c,width:g}};b.fn.trimText=function(k,d){d=b.extend({formattingFunction:function(i){return i}},d);var c=b(this).height();var j=a(this).css({height:c,overflow:"hidden"});j.html(d.formattingFunction(k));if(j[0].scrollHeight<=c){b(this).html(d.formattingFunction(k))}else{j.html("");var g="";var h="";for(var f=0;f<k.length&&j[0].scrollHeight<=c;f++){g=h;h+=k[f];j.html(d.formattingFunction(h+"..."))}b(this).html(d.formattingFunction(g+"..."))}j.remove();return b(this)};b.fn.wrapText=function(){return b(this).css("word-wrap","break-word");function c(){var g=b(this).width();var h=b(this).css("position");if(h!="absolute"){b(this).css("position","relative")}b(this).wrapInner("<div style='position: absolute;'></div>");var k=b(this).children();if(k.width()>g){var j=k.text();var f="";for(var d=0;d<j.length;d++){f+=j.charAt(d);k.html(f);if(k.width()>g){f=f.substr(0,f.length-2)+"<br/>"+j.charAt(d)}}b(this).html(f)}else{b(this).html(k.html())}return b(this).css("position",h)}};b.fn.selectRange=function(f,c){if(b.isPlainObject(arguments[0])){var d=b.extend({},arguments[0]);f=d.start;c=d.end}return this.each(function(){if(this.setSelectionRange){this.focus();this.setSelectionRange(f,c)}else{if(this.createTextRange){var g=this.createTextRange();g.collapse(true);g.moveEnd("character",c);g.moveStart("character",f);g.select()}}})};b.fn.getSelectionRange=function(){var g=this[0];if(g.setSelectionRange){return{start:g.selectionStart,end:g.selectionEnd}}else{g.focus();var d=document.selection.createRange();var f=d.text.length;d.moveStart("character",-g.value.length);var i=d.text.length;var h=i-f;var c=h+f;return{start:h,end:c}}};function a(d){var c={width:b(d).css("width"),"font-size":b(d).css("font-size"),"font-family":b(d).css("font-family"),"font-weight":b(d).css("font-weight"),"white-space":b(d).css("white-space"),position:"absolute"};return b("<div></div>").css(c).appendTo("body").wrapText()}})(jQuery);
/*! Build-0.6: color.core.js color.rgb.js color.huebased.js color.hsv.js color.hsl.js color.object.js color.parse.js color.related.js color.palette.css3.js color.css.js */
/*!
 * jQuery Colour 0.6
 *
 * Copyright (c) 2009 Adaptavist.com
 * Dual licensed under the MIT (MIT-LICENSE.txt)
 * and GPL (GPL-LICENSE.txt) licenses.
 *
 * Author: Mark Gibson (jollytoad at gmail dot com)
 *
 * http://www.adaptavist.com/display/jQuery/Colour+Library
 */
(jQuery.color||(function(a){a.color={isEqual:function(b,d){if(b.length!==d.length){return false}var c=b.length;while(c--){if(b[c]!==d[c]){return false}}return true},fix:function(b,d){var c=d.length;while(c--){if(typeof b[c]==="number"){switch(d.charAt(c)){case"i":b[c]=Math.round(b[c]);break;case"o":b[c]=Math.min(255,Math.max(0,Math.round(b[c])));break;case"1":b[c]=Math.min(1,Math.max(0,b[c]));break}}}return b},self:function(b){return b},alpha:function(b){return b===undefined?1:b},palette:{},fns:[]}})(jQuery));(jQuery.color&&(function(a){a.color.RGB={fix:function(b){b=a.color.fix(b,"ooo1");return b},toRGB:a.color.self,toHEX:function(b){return"#"+(16777216+b[0]*65536+b[1]*256+b[2]).toString(16).slice(-6)},toCSS:function(b,c){if(!c&&a.color.alpha(b[3])===0){return"transparent"}if(a.color.alpha(b[3])<1){return"rgba("+b.join(",")+")"}return"rgb("+Array.prototype.slice.call(b,0,3).join(",")+")"},red:function(b){return b[0]},green:function(b){return b[1]},blue:function(b){return b[2]},alpha:function(b){return a.color.alpha(b[3])}};a.color.RGB.toString=a.color.RGB.toHEX;a.color.fns.push("RGB.toRGB","RGB.toHEX","RGB.toCSS","RGB.red","RGB.green","RGB.blue","RGB.alpha")})(jQuery));(jQuery.color&&(function(a){a.color.HueBased={fix:function(b){b[0]=(b[0]+1)%1;return a.color.fix(b,"1111")},complementary:function(c,b){return[(c[0]+0.5+(b||0))%1,c[1],c[2],c[3]]},analogous:function(c,b){return[(c[0]+1+(b||0))%1,c[1],c[2],c[3]]},hue:function(b){return b[0]},alpha:function(b){return a.color.alpha(b[3])}}})(jQuery));(jQuery.color&&(function(a){a.color.HSV=a.extend({toHSV:a.color.self,toRGB:function(d){var i=d[0]*6,g=Math.floor(i),h=i-g,m=d[1],k=d[2]*255,j=d[3],c=Math.round(k*(1-m)),b=Math.round(k*(1-h*m)),l=Math.round(k*(1-(1-h)*m));k=Math.round(k);switch(g%6){case 0:return[k,l,c,j];case 1:return[b,k,c,j];case 2:return[c,k,l,j];case 3:return[c,b,k,j];case 4:return[l,c,k,j];case 5:return[k,c,b,j]}},saturationV:function(b){return b[1]},value:function(b){return b[2]}},a.color.HueBased);a.color.RGB.toHSV=function(h){var k=h[0]/255,j=h[1]/255,f=h[2]/255,i=Math.min(k,j,f),c=Math.max(k,j,f),l=c-i;return[l===0?0:(j===c?(f-k)/l/6+(1/3):f===c?(k-j)/l/6+(2/3):(j-f)/l/6+1)%1,l===0?0:l/c,c,h[3]]};a.color.fns.push("HSV.toHSV","HSV.toRGB","RGB.toHSV","HSV.complementary","HSV.analogous","HSV.hue","HSV.saturationV","HSV.value","HSV.alpha")})(jQuery));(jQuery.color&&(function(a){a.color.HSL=a.extend({toHSL:a.color.self,toRGB:function(d){var g=d[0],f=d[1],b=d[2],i=b<0.5?b*(1+f):b+f-(b*f),j=2*b-i;function k(c){var h=c<0?c+1:c>1?c-1:c;return h<1/6?j+(i-j)*6*h:h<1/2?i:h<2/3?j+(i-j)*6*(2/3-h):j}return[Math.round(255*k(g+1/3)),Math.round(255*k(g)),Math.round(255*k(g-1/3)),d[3]]},saturationL:function(b){return b[1]},lightness:function(b){return b[2]}},a.color.HueBased);a.color.RGB.toHSL=function(h){var k=h[0]/255,j=h[1]/255,f=h[2]/255,i=Math.min(k,j,f),c=Math.max(k,j,f),m=c-i,l=c+i;return[m===0?0:(j===c?(f-k)/m/6+(1/3):f===c?(k-j)/m/6+(2/3):(j-f)/m/6+1)%1,m===0?0:l>1?m/(2-c-i):m/l,l/2,h[3]]};a.color.fns.push("HSL.toHSL","HSL.toRGB","RGB.toHSL","HSL.complementary","HSL.analogous","HSL.hue","HSL.saturationL","HSL.lightness","HSL.alpha")})(jQuery));(jQuery.color&&jQuery.Color||(function(a){a.Color=function(g,k,h){if(typeof this==="function"){return new a.Color(g,k,h)}if(typeof g==="string"&&a.color.parse){if(!h){h=g}g=a.color.parse(g)}if(g&&g.length){var j;j=this.length=g.length;while(j--){this[j]=g[j]}}if(g){this.space=k||g.space||"RGB";this.name=h||g.name}};function c(g,m){var j=a.Color.isInstance(g)&&g.space!==this.space?this.to(g.space):new a.Color(this),l=j.length,k=false;while(l--){if(typeof g[l]==="number"){var h=m?j[l]+g[l]:g[l];if(h!==j[l]){j[l]=h;k=true}}}return k?j.setName():this}a.Color.fn=a.Color.prototype={color:"0.6",util:function(){return a.color[this.space]},setAlpha:function(g){if(this.length<4){this.push(1)}if(g!==undefined){this[3]=g}return this},getAlpha:function(){if(this[3]===undefined){return 1}return this[3]},to:function(g){return this["to"+g]()},fix:function(){return this.util().fix(this)},modify:function(g){return c.call(this,g)},adjust:function(g){return c.call(this,g,true)},setName:function(g){this.name=g;return this},toString:function(){if(!this.space){return""}var g=this.util();return g.hasOwnProperty("toString")?g.toString(this):this.to("RGB").toString()},join:[].join,push:[].push};a.Color.isInstance=function(g){return g&&typeof g==="object"&&g.color===a.Color.fn.color&&g.space};a.Color.fnspace={};function f(h,i,j,k,g){return function(){var m=[h];Array.prototype.push.apply(m,arguments);var l=j.apply(i,m);return a.isArray(l)?new a.Color(l,k,g?h.name:undefined):l}}function d(h,i){var g=/^to/.test(i)?i.substring(2):false;return function(){var l=this,k=l.util();if(!k[i]){l=l.to(a.Color.fnspace[i]);k=l.util()}var m=f(l,k,k[i],g||l.space,!!g),j=m.apply(l,arguments);if(g){this[i]=function(){return j};if(a.Color.isInstance(j)){l=this;j["to"+this.space]=function(){return l}}}else{this[i]=m}return j}}function b(){var h=this.split("."),g=h[1],i=h[0];if(!a.Color.fnspace[g]&&g!=="to"+i){a.Color.fnspace[g]=i}if(!a.Color.fn[g]){a.Color.fn[g]=d(this,g)}}a.each(a.color.fns,b);a.color.fns.push=function(){a.each(arguments,b);return Array.prototype.push.apply(this,arguments)}})(jQuery));(jQuery.color&&(function(a){a.extend(a.color,{parse:function(c){var b;if(typeof c==="string"){if((b=/^\s*rgb(a)?\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*(?:,\s*([0-9]+(?:\.[0-9]+)?)\s*)?\)\s*$/.exec(c))&&!b[1]===!b[5]){return[parseInt(b[2],10),parseInt(b[3],10),parseInt(b[4],10),b[5]?parseFloat(b[5]):1]}if((b=/^\s*rgb(a)?\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*(?:,\s*([0-9]+(?:\.[0-9]+)?)\s*)?\)\s*$/.exec(c))&&!b[1]===!b[5]){return[parseFloat(b[2])*255/100,parseFloat(b[3])*255/100,parseFloat(b[4])*255/100,b[5]?parseFloat(b[5]):1]}if((b=/^\s*#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})\s*$/.exec(c))){return[parseInt(b[1],16),parseInt(b[2],16),parseInt(b[3],16),1]}if((b=/^\s*#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])\s*$/.exec(c))){return[parseInt(b[1]+b[1],16),parseInt(b[2]+b[2],16),parseInt(b[3]+b[3],16),1]}if((b=/^\s*hsl(a)?\(\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*(?:,\s*([0-9]+(?:\.[0-9]+)?)\s*)?\)\s*$/.exec(c))&&!b[1]===!b[5]){return[parseInt(b[2],10)/360,parseFloat(b[3])/100,parseFloat(b[4])/100,b[5]?parseFloat(b[5]):1]}return a.color.named(c)}if(c&&(c.length===3||c.length===4)){if(c.length===3){c.push(1)}return c}},named:function(c){var b;c=a.trim(c.toLowerCase());if(c==="transparent"){return[0,0,0,0]}a.each(a.color.palette,function(f,d){if(d[c]){b=a.merge([],d[c]);b.push(1);return false}});return b}})})(jQuery));(jQuery.Color&&(function(a){a.Color.fn.related=function(d){var b=a.Color.fn.related.i18n,c=d||a.Color.fn.related.offset,f=Math.round(c*360)+b.deg;return{"anal-":this.analogous(-c).setName(b.anal+" -"+f),anal0:this.analogous().setName(b.orig),"anal+":this.analogous(c).setName(b.anal+" +"+f),"comp-":this.complementary(-c).setName(b.split+" -"+f),comp0:this.complementary().setName(b.comp),"comp+":this.complementary(c).setName(b.split+" +"+f),"triad-":this.analogous(-1/3).setName(b.triad+" -120"+b.deg),triad0:this.analogous().setName(b.orig),"triad+":this.analogous(1/3).setName(b.triad+" +120"+b.deg)}};a.Color.fn.related.offset=30/360;a.Color.fn.related.i18n={deg:"",anal:"Analogous",orig:"Original",split:"Split Complementary",comp:"Complementary",triad:"Triadic"}})(jQuery));(jQuery.color&&(function(a){a.color.palette.css3={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}})(jQuery));(function(a){a.fn.cssColor=function(b){return a.Color(this.css(b))};a.Color.fn.applyCSS=function(b,c){a(b).css(c,this.toCSS());return this}})(jQuery);var Effects=new function(){var b=["b","i","big","small","tt","abbr","acronym","cite","code","dfn","em","kbd","strong","samp","var","u","a","bdo","br","img","map","object","q","script","span","sub","sup","button","input","label","select","textarea"];var l={};function f(n,m){var o=$.valueOrDefault(m.stop,$.noop);$.extend(m,{stop:function(){o();n.removeData("effect-controller")}});n.data("effect-controller",m);return m}function c(m){var n=m.data("effect-controller");if(n){n.stop()}}this.shake=function(A,C){c(A);C=$.extend({direction:"left",times:1,distance:20,easing:"linear",duration:200,complete:undefined},C);var n=C.distance;var t=C.duration;var x=C.easing;var z=C.direction;var o=C.times;var p=C.complete;var q=(z=="up"||z=="down")?"top":"left";var B=(z=="up"||z=="left")?"pos":"neg";var w=$.weakID("queue");var m=$([]);var y=[];A.each(function(){var D=j($(this));m.pushElements(D.$element);y.push(D)});var v=false;for(var u=0;u<o+1;u++){var s={};if(u%2===0){s[q]=(B=="pos"?"-=":"+=")+(u===0||u===o?n:n*2)}else{s[q]=(B=="pos"?"+=":"-=")+(u===o?n:n*2)}m.animate(s,{duration:t,easing:x,queue:w})}m.queue(w,r).dequeue(w);return f(A,{stop:function(){m.stop(w,true,true);r()}});function r(){if(!v){v=true;m=$([]);$.each(y,function(D,E){E.remove()});if(p){p()}}}};this.slideIn=function(m,n){if(!n){n={}}n.mode="show";m.each(function(){i($(this),n)})};this.slideOut=function(m,n){if(!n){n={}}n.mode="hide";m.each(function(){i($(this),n)})};function i(m,n){n=$.extend({mode:"show",direction:"left",easing:"linear",complete:$.noop},n);m.queue(function(){var p=m,u=["position","top","bottom","left","right"];var s=n.mode;var v=n.direction;$.effects.save(p,u);p.quickShow();var t=$.effects.createWrapper(p).css({overflow:"hidden"});var q=(v=="up"||v=="down")?"top":"left";var w=(v=="up"||v=="left")?"pos":"neg";var o=n.distance||(q=="top"?p.outerHeight(true):p.outerWidth(true));if(s=="show"){p.css(q,w=="pos"?(isNaN(o)?"-"+o:-o):o)}var r={};r[q]=(s=="show"?(w=="pos"?"+=":"-="):(w=="pos"?"-=":"+="))+o;p.animate(r,{queue:false,duration:n.duration,easing:n.easing,always:function(){if(s=="hide"){p.quickHide()}$.effects.restore(p,u);$.effects.removeWrapper(p);t.remove();if(n.complete){n.complete.apply(this,arguments)}p.dequeue()}})})}this.flyIn=function(m,n){if(!n){n={}}m.each(function(){a($(this),n)})};this.flyOut=function(m,n){if(!n){n={}}m.each(function(){k($(this),n)})};function a(u,y){y=$.extend({effect:"show",enableCssTransition:false,easing:"linear",duration:200,complete:undefined,flyDirection:{vertical:Global.AnimationDirections.Up,horizontal:Global.AnimationDirections.Left}},y);var n=y.complete;var w=y.effect;var t=y.flyDirection;u.quickShow();var m=$.getWindowArea();var q=u.offset();var x=u.elementSize();var p={marginTop:0,marginLeft:0};var s;if(Global.IsDesigner){s=0}else{var v=(document.compatMode&&document.compatMode!="BackCompat")?document.documentElement:document.body;s=document.all?v.scrollTop:window.pageYOffset}if(t.vertical==="top"){p.marginTop=-q.top-x.height}if(t.vertical==="bottom"){p.marginTop=(m.bottom+s-q.top>0)?m.bottom+s-q.top:m.bottom}if(t.horizontal==="left"){p.marginLeft=-q.left-x.width}if(t.horizontal==="right"){p.marginLeft=m.right-q.left}u.stopCssAnimation();u.css(p);var r=false;p={marginTop:0,marginLeft:0};u.cssAnimate(p,{enableCssTransition:y.enableCssTransition,duration:y.duration,complete:function(){o()}});function o(){if(!r){r=true;if(n){n()}}}}function k(t,w){w=$.extend({effect:"show",enableCssTransition:false,easing:"linear",duration:200,flyDirection:{vertical:Global.AnimationDirections.Up,horizontal:Global.AnimationDirections.Left},complete:undefined},w);var n=w.complete;var u=w.effect;var s=w.flyDirection;t.quickShow();t.css({marginTop:0,marginLeft:0});var m=$.getWindowArea();var q=t.offset();var v=t.elementSize();var p={marginTop:0,marginLeft:0};if(s.vertical==="top"){p.marginTop=-q.top-v.height}if(s.vertical==="bottom"){p.marginTop=m.bottom-q.top}if(s.horizontal==="left"){p.marginLeft=-q.left-v.width}if(s.horizontal==="right"){p.marginLeft=m.right-q.left}t.stopCssAnimation();var r=false;t.addClass("fly-out-animation");t.cssAnimate(p,{enableCssTransition:w.enableCssTransition,duration:w.duration,complete:function(){o();t.css({marginTop:0,marginLeft:0})}});function o(){if(!r){r=true;t.removeClass("fly-out-animation");t.quickHide();if(n){n()}}}}this.fadeIn=function(m,n){if(!n){n={}}n.effect="show";m.each(function(){d($(this),n)})};this.fadeOut=function(m,n){if(!n){n={}}n.effect="hide";m.each(function(){d($(this),n)})};function d(n,o){o=$.extend({effect:"show",enableCssTransition:false,easing:"linear",duration:200,complete:undefined},o);var m=o.complete;var r=o.effect;var t=o.easing;n.stopCssAnimation();if(r==="show"){n.quickShow()}var q=false;n.addClass("fading-animation");if(r==="show"){n.css("opacity",0)}var p={opacity:r==="show"?1:0};n.cssAnimate(p,{enableCssTransition:o.enableCssTransition,duration:o.duration,complete:function(){s()}});function s(){if(!q){q=true;n.removeClass("fading-animation");if(r==="hide"){n.quickHide();n.css("opacity",1)}if(m){m()}}}}function j(v){var p=v.offset();var w=v.elementSize();var m=v.attr("style");var r=v.css("position");var n=v.css("display");if(!n){n=g(v[0].tagName)?"inline-block":"block"}var q=(r==="absolute"?"absolute":"relative");var o={position:q,display:n,"margin-left":v.css("marginLeft"),"margin-top":v.css("marginTop"),"margin-right":v.css("marginRight"),"margin-bottom":v.css("marginBottom"),"float":v.css("float")};var t=[];for(var u in o){t.push(u+":"+o[u]+";")}v.wrap("<span style='{0}'></span>".format(t.join(" ")));v.css({position:"relative",left:0,top:0,bottom:"",right:"",width:w.width+"px",height:w.height+"px",marginLeft:0,marginTop:0,marginBottom:0,marginRight:0}).addClass("has-effect-wrapper");var s=v.parent().offset(p);return{$element:s,remove:function(){v.removeClass("has-effect-wrapper");if(m){v.attr("style",m)}else{v.removeAttr("style")}v.unwrap()}}}function h(m){if(m.hasClass("has-effect-wrapper")){var n=m.parent();n.stopCssAnimation()}}function g(m){if(!l){l=$.makeDictionaryFromKeys(b,true)}return !!b[m.toLowerCase()]}}();var SlideEffect=new function(){var c;var d;var a;var f=Initializer.create(function(){c=$('<div class="slide-effect-placeholder"></div>');d=$('<div class="slide-effect-element-wrapper"></div>');a=$('<div class="slide-effect-events-catcher-layer events-catcher"></div>')});function b(h,j,i,l,m){var k={};$.each(j,function(o,n){if(parseInt(h.css(o))!==parseInt(n)){k[o]=n}});if(i){h.cssAnimate(k,{duration:l,complete:m})}else{h.css(k);if(m){m()}}}function g(h){h.stopCssAnimation()}this.animate=function(u,n){n=$.quickExtend({direction:"up",pushContent:undefined,duration:undefined,frameBottom:undefined,frameTop:undefined,animationCallback:$.noop,placeHolderSize:undefined,animate:true,scrollingOffset:undefined},n);f.execute();var z=n.direction;var i=n.duration;var y=n.pushContent;var s=n.frameTop;var m=n.frameBottom;var v=n.scrollingOffset;var q=(z=="up"||z=="down");var o=n.distance||((q?u.outerHeight(true):u.outerWidth(true)));c.outerSize(n.placeHolderSize);var x=ViewManager.getBodyElementContainer();var k=ViewManager.getBodyElementWrapper();var A=k.attr("style");var h=ViewManager.getBodyElement();var p=h.attr("style");k.addClass("slide-effect-body-wrapper");x.addClass("slide-effect-body-container");h.addClass("slide-effect");h.css({top:-v.top});if(ViewManager.isDesignMode()){DesignerManager.getDesignerPane().addClass("slide-effect-designer-pane")}var j=k;var r;var w;var l;if(y){j=k;if(q){j.css({height:n.placeHolderSize.height})}else{j.css({width:n.placeHolderSize.width})}if(z=="up"){w={top:o};l={top:0};r={top:"initial",bottom:"100%"}}else{if(z=="down"){w={top:-o};l={top:0};r={top:"100%",bottom:"initial"}}else{if(z=="left"){w={left:o};l={left:0};r={left:"initial",right:"100%"}}else{if(z=="right"){w={left:-o};l={left:0};r={left:"100%",right:"initial"}}}}}}else{j=d;if(z=="up"){w={top:0};l={top:-o};r={top:-o,bottom:"initial"}}else{if(z=="down"){w={bottom:0};l={bottom:-o};r={top:"initial",bottom:-o}}else{if(z=="left"){w={left:0};l={left:-o};r={left:-o,right:"initial"}}else{if(z=="right"){w={right:0};l={right:-o};r={left:"initial",right:-o}}}}}}d.css(r);j.addClass("slide-effect-animation");u.appendTo(d);c.appendTo(x);a.appendTo(k);d.appendTo(k);b(j,w,n.animate,i,n.animationCallback);var t={};$.extend(t,{isClosed:false,close:function(C){if(t.isClosed){return}C=$.quickExtend({animate:true,closeCallback:$.noop,closingCallback:$.noop},C);t.isClosed=true;var B=function(){C.closingCallback();c.detach();u.detach();d.detach();a.detach();h.setStyleAttr(p);h.removeClass("slide-effect");j.removeClass("slide-effect-animation");x.removeClass("slide-effect-body-container");k.removeClass("slide-effect-body-wrapper");k.setStyleAttr(A);d.setStyleAttr();if(ViewManager.isDesignMode()){DesignerManager.getDesignerPane().removeClass("slide-effect-designer-pane")}C.closeCallback()};g(j,w);b(j,l,C.animate,i,B)}});return t}}();var AnimationsManager=new function(){this.getElementsSupportedAnimations=function(){return[Animations.NoAnimation,Animations.Fade,Animations.Fly,Animations.Slide]};this.getNavigationSupportedAnimations=function(){return[Animations.NoAnimation,Animations.Fade,Animations.Slide]};this.getDropPanelSupportedAnimations=function(){return[Animations.NoAnimation,Animations.Fade,Animations.Fly,Animations.Slide]}}();var Animations={NoAnimation:{name:"NoAnimation",show:function(b,a){b.quickShow();a.complete()},hide:function(b,a){b.quickHide();a.complete()},title:"No Animation"},Fade:{name:"Fade",show:Effects.fadeIn,hide:Effects.fadeOut,title:"Fade"},Slide:{name:"Slide",show:Effects.slideIn,hide:Effects.slideOut,title:"Slide"},Fly:{name:"Fly",show:Effects.flyIn,hide:Effects.flyOut,title:"Fly"},DropDown:{show:function(b,a){b.slideDown(a.duration,a.complete)},hide:function(b,a){b.slideUp(a.duration,a.complete)}}};(function(a){a.fn.stopAnimations=function(){if(this.hasClass("during-animation")){this.stopCssAnimation()}return this};a.fn.animateShow=function(f,d,c){d=a.extend({complete:a.noop,duration:0},d);var g=d.duration;var b=this;if(typeof f==="string"){f=Animations[f]}if(f.show===undefined){f=Animations.NoAnimation}b.stopAnimations();b.addClass("during-animation");f.show(b,a.extend(d,{complete:function(){b.removeClass("during-animation");c()}}));return this};a.fn.animateHide=function(f,d,c){var b=this;d=a.extend({duration:0},d);var g=d.duration;if(typeof f==="string"){f=Animations[f]}if(f.hide===undefined){f=Animations.NoAnimation}b.stopAnimations();b.addClass("during-animation");f.hide(b,a.extend(d,{complete:function(){b.removeClass("during-animation");c()}}));return this};a.fn.showOnHover=function(d,c){var b=a(this);c=a.extend({showingFunction:function(){a(this).show()},hidingFunction:function(){a(this).hide()}},c);a(d).hover(function(){c.showingFunction.call(b)},function(){c.hidingFunction.call(b)});b.hide()};a.fn.animateVerticalOffset=function(b,c){return this.animateOffset({top:b},c,{moveHorizontally:false,moveVertically:true})};a.fn.animateHorizontalOffset=function(c,b){return this.animateOffset({left:c},b,{moveHorizontally:true,moveVertically:false})};a.fn.animateOffset=function(h,g,b){b=a.extend({moveHorizontally:true,moveVertically:true},b);var f=this.offset();var c=b.moveHorizontally?h.left-f.left:0;var i=b.moveVertically?h.top-f.top:0;if(c!==0||i!==0){var d={};if(c!==0){d.left=(parseInt(this.css("left"))+c)+"px"}if(i!==0){d.top=(parseInt(this.css("top"))+i)+"px"}this.animate(d,g)}};a.animateObject=function(d,c,b){return a.animateValue(d,c,a.extend({},b,{valueToProperties:function(h){var g={};for(var f in h){g["custom"+f]=h[f]}return g},propertiesToValue:function(g){var h={};for(var f in g){h[f.substring(6)]=g[f]}return h}}))};a.animateValue=function(g,h,l){l=a.extend({valueToProperties:function(m){return{value:m}},propertiesToValue:function(m){return m.value},times:1,duration:400,easing:"linear",step:a.noop,complete:a.noop},l);var d=l.valueToProperties(g);var b=l.valueToProperties(h);var k=l.times;var i=a.extend({},d);var f=false;var c;j();return{stop:function(m){k=0;c.stop(true,m);if(!m){j()}}};function j(){if(k<=0){f=true;l.complete();return}k--;c=a(a.extend({},d));c.animate(b,{duration:l.duration,easing:l.easing,step:function(n,m){i[m.prop]=n;l.step(l.propertiesToValue(i))},complete:function(){j()}})}};a.fn.stepAnimate=function(h,f,g,b,k){var j=a(this);var i;switch(h){case"scrollTop":i=j.scrollTop();break;case"scrollLeft":i=j.scrollLeft();break;default:i=parseInt(j.css(h))}var c=Math.ceil(Math.abs(f-i)/g);var d={};d[h]=f;return j.animate(d,a.extend({},k,{duration:c*b}))}})(jQuery);var AnimatedObject=new function(){this.create=function(a,f){f=$.extend({duration:400,easing:"linear"},f);var h;var g=a;var d=$.isPlainObject(a)?$.animateObject:$.animateValue;var c={valueChangeEvent:SimpleEvent.create(),setValue:function(i){if(h){h.stop(false)}b(i)},animateValue:function(i){if(h){h.stop(false)}h=d(g,i,{duration:f.duration,easing:f.easing,times:1,step:function(j){b(j)}})},bind:function(j){var i=c.valueChangeEvent.bind(j);j.call(c,g);return i}};return c;function b(i){g=i;c.valueChangeEvent.fire(c,i)}}}();(function(b){var c=[];b.useSimpleTemplate=function(g,f){var d=a(g);if(!f){return b(d)}var h=d.replace(/\${([^}]+)}/g,function(i,j){var k=f[j];return k?k:""});return b(h)};function a(f){if(typeof f!=="string"){if(f.id!==undefined){return HtmlTemplates[f.id]}else{var d=b.objectGet(HtmlTemplatesGroups,[f.group,f.name]);if(d===undefined){throw new Error("Missing template "+f.group+"->"+f.name)}return d}}else{return f}}b.useTemplate=function(f,g,d){if(typeof f==="string"){return b("<div>"+f+"</div>").tmpl(g,d)}if(f.useTemplate){return f.useTemplate(g)}if(f.isSimple||g===undefined){return b.useSimpleTemplate(f,g)}return b.tmpl(b.getTemplate(f),g,d)};b.getTemplate=function(g){var d;if(g.id!==undefined){d=g.id}else{d=g.group+"-"+g.name}if(!c[d]){var f;if(g.id!==undefined){f=HtmlTemplates[g.id];if(f===undefined){throw new Error("Missing template "+g.id)}}else{f=b.objectGet(HtmlTemplatesGroups,[g.group,g.name]);if(f===undefined){throw new Error("Missing template "+g.group+"->"+g.name)}}b.template(d,f);c[d]=true}return d};b.getTemplateOld=function(f){var d;if(f.id!==undefined){d=f.id}else{d=f.group+"-"+f.name}if(!c[d]){var g;if(f.id!==undefined){g=b("#"+f.id)}else{g=b("#"+f.group).children("."+f.name).first()}g.template(d);g.remove();c[d]=true}return d}})(jQuery);var DisplayingStates={Displayed:"state-displayed",Hidden:"state-hidden"};var StatesGroups={Hover:"hovering",Toggle:"toggle-button-state-group",Disabling:"disable-state-group"};(function(b){var a=true;b.toggleHoverTracking=function(d){a=d};b.fn.addStatesGroupsSupport=function(){var f=b(this);var d=f.data("states-groups");if(d===undefined){d={};f.data("states-groups",d)}return d};b.fn.getStatesGroupData=function(f){var d=b(this).data("states-groups");if(d===undefined){return undefined}else{return d[f]}};b.fn.addStatesGroup=function(g,h,d){h=b.extend({groupName:"default",defaultState:undefined,stateChangeCallback:undefined,triggeredEvent:undefined,elementPartsSelector:null},h);var f=b(this);var k=h.groupName;if(d===undefined){d=f.addStatesGroupsSupport()}var j;if(g instanceof Array){j=g}else{j=[];b.each(g,function(l,m){j.push(m)})}var i=d[k];if(i===undefined){i={states:j,statesMap:b.makeDictionaryFromKeys(j,true),options:h,currentState:undefined};d[k]=i}if(!h.elementPartsSelector){if(!i.$elementParts){i.$elementParts=b([])}}else{if(typeof h.elementPartsSelector==="string"){i.$elementParts=f.find(h.elementPartsSelector)}else{i.$elementParts=h.elementPartsSelector}}if(h.stateChangeCallback){i.stateChangedEvent=SimpleEvent.create();i.stateChangedEvent.bind(h.stateChangeCallback)}c(f,d,k,i,h.defaultState);return this};function c(l,n,m,k,d,f){if(k===undefined){return}if(d!==null&&d!==undefined&&!k.statesMap[d]){throw new Error("Unknown state")}if(k.currentState==d){return}var j=k.currentState;var i=k.$elementParts.length===0?l:b.unite(l,k.$elementParts);if(j!==null&&j!==undefined){i.removeClass(k.currentState)}if(d!==null&&d!==undefined){i.addClass(d)}k.currentState=d;var h=k.stateChangedEvent;var g=n.stateChangedEvent;if(h){h.fire(l,d,f)}if(k.options.triggeredEvent){l.trigger(k.options.triggeredEvent,d,f)}if(g){g.fire(m,l,d,f)}}b.fn.inState=function(d){return b(this).hasClass(d)};b.fn.bindStateChange=function(g,f,d){return b(this).each(function(){var h=b(this).getStatesGroupData(g);var i=h.stateChangedEvent;if(!i){i=SimpleEvent.create();h.stateChangedEvent=i}i.bind(f,d)})};b.fn.setState=function(j,k,h){k=b.valueOrDefault(k,"default");for(var g=0;g<this.length;g++){var f=b(this[g]);var d=f.data("states-groups");if(d===undefined){console.warn("Setting state to an element with no states groups. ({0} {1})".format(j,k))}else{c(f,d,k,d[k],j,h)}}return this};b.fn.toggleBooleanState=function(g,k,h,m,d,l){for(var j=0;j<this.length;j++){var f=b(this[j]);if(d===undefined){if(f.inState(k)){f.setState(h,g,l)}else{f.setState(k,g,l)}}else{if(d===true){f.setState(k,g,l)}else{if(d===false){f.setState(h,g,l)}else{if(m){f.setState(m,g,l)}else{f.setState(k,g,l)}}}}}return this};b.fn.deactivated=function(d){return b(this).bind("deactivated",d)};b.fn.activated=function(d){return b(this).bind("activated",d)};b.fn.trackActiveState=function(f,d){b(this).each(function(){var g=b(this);if(f===undefined){f={}}f=b.extend({activeClass:"state-active",noActiveClass:"state-no-active"},f);b(this).addStatesGroup([f.activeClass,f.noActiveClass],b.extend(f,{defaultState:"state-no-active",groupName:"active-state-group"}),d);b(this).bind("mousedown",function(){if(b(this).isEnabled()){b(this).setState(f.activeClass,"active-state-group");g.trigger("activated");var h=function(){g.setState(f.noActiveClass,"active-state-group");b(document).unbind("mouseup",h);g.trigger("deactivated")};b(document).bind("mouseup",h)}})});return b(this)};b.fn.trackPressedState=function(f,d){b(this).each(function(){var g=b(this);if(f===undefined){f={}}f=b.extend({pressedClass:"state-pressed",notPressedClass:"state-not-pressed"},f);b(this).addStatesGroup([f.pressedClass,f.notPressedClass],b.extend(f,{defaultState:"state-not-pressed",groupName:"pressed-state-group"}),d);b(this).bind("mousedown",function(){if(g.isEnabled()){g.setState(f.pressedClass,"pressed-state-group");g.bind("mouseenter.pressedState",function(){g.setState(f.pressedClass,"pressed-state-group")}).bind("mouseleave.pressedState",function(){g.setState(f.notPressedClass,"pressed-state-group")});b(document).one("mouseup",function(){g.setState(f.notPressedClass,"pressed-state-group");g.unbind(".pressedState")})}})});return b(this)};b.fn.addDisablingStates=function(f,d){var g=b(this).filter(function(){return b(this).data("disableReasons")===undefined});g.each(function(){var h=b(this);h.data("disableReasons",{}).addStatesGroup(["state-disabled","state-enabled"],b.extend({defaultState:"state-enabled",groupName:"disable-state-group"},f),d)});return this};b.fn.addDisplayingStates=function(f,d){var g=b(this).filter(function(){return b(this).data("displayNoneReasons")===undefined});g.each(function(){var h=b(this);h.data("displayNoneReasons",{}).addStatesGroup(["state-displayed","state-hidden"],b.extend({},f,{groupName:"displayed-state-group"}),d)});return this};b.fn.inVisibleState=function(){return b(this).hasClass("state-visible")};b.fn.addVisibilityStates=function(h,f,d){var g=b(this).filter(function(){return b(this).data("invisibleReasons")===undefined});g.each(function(){var i=b(this);i.data("invisibleReasons",{}).addStatesGroup(["state-visible","state-invisible"],b.extend({},f,{groupName:"visibility-state-group"}),d);if(h){i.toggleVisibility(false)}});return this};b.fn.addBindingStates=function(f,d){var g=b(this).filter(function(){return b(this).data("bindingReasons")===undefined});g.each(function(){var h=b(this);h.data("bindingReasons",{}).addStatesGroup(["state-not-bound","state-bound"],b.extend({defaultState:"state-not-bound",groupName:"bound-state-group"},f),d)});return this};b.fn.toggleBindingState=function(h,j){if(j===undefined){j="default"}for(var f=0;f<this.length;f++){var d=b(this[f]);var g=d.data("bindingReasons");if(g){if(!h){delete g[j]}else{g[j]=true}d.toggleBooleanState("bound-state-group","state-not-bound","state-bound",undefined,b.isEmptyObject(g))}}return this};b.fn.inBoundState=function(){return b(this).hasClass("state-bound")};b.fn.toggleVisibility=function(d,j){if(j===undefined){j="default"}for(var g=0;g<this.length;g++){var f=b(this[g]);var h=f.data("invisibleReasons");if(h){if(d){delete h[j]}else{h[j]=true}f.toggleBooleanState("visibility-state-group","state-visible","state-invisible",undefined,b.isEmptyObject(h))}}return this};b.fn.trackFirstDisplayed=function(){var f=b(this);var d=undefined;f.displayChanged(g);g();function g(){var h=f.not("state-hidden").first();if(!b.sameElements(d,h)){if(d){d.removeClass("first-displayed")}d=h;d.addClass("first-displayed")}}};b.fn.trackLastDisplayed=function(){var f=b(this);var d=undefined;f.displayChanged(g);g();function g(){var h=f.not("state-hidden").last();if(!b.sameElements(d,h)){if(d){d.removeClass("last-displayed")}d=h;d.addClass("last-displayed")}}};b.fn.cssHide=function(d){return this.toggleDisplayed(false,d)};b.fn.cssShow=function(d){return this.toggleDisplayed(true,d)};b.fn.toggleDisplayed=function(f,g,d){if(g===undefined){g="default"}return b(this).each(function(){var h=b(this).data("displayNoneReasons");if(!h){return}if(f){if(d){delete h;h={}}else{delete h[g]}}else{h[g]=true}return b(this).toggleBooleanState("displayed-state-group","state-displayed","state-hidden",undefined,b.isEmptyObject(h))})};b.fn.toggleEnable=function(d,f){if(f===undefined){f="default"}return b(this).each(function(){var g=b(this).data("disableReasons");if(!g){return}if(d){if(g){delete g[f]}}else{g[f]=true}b(this).toggleBooleanState("disable-state-group","state-enabled","state-disabled",undefined,b.isEmptyObject(g))})};b.fn.toggleChecked=function(d){return b(this).toggleBooleanState("checkbox-state-group","state-checked","state-unchecked",undefined,d)};b.fn.enableChanged=function(d){return this.bindToStatesGroupEvent("disable-state-group",d)};b.fn.displayChanged=function(d){return this.bindToStatesGroupEvent("displayed-state-group",d)};b.fn.bindToStatesGroupEvent=function(g,h){var f=this.addStatesGroupsSupport();var d=f.stateChangedEvent;if(!d){d=SimpleEvent.createNamedEvents(this);f.stateChangedEvent=d}d.bind(g,h);return this};b.fn.isEnabled=function(){return b(this).inState("state-enabled")};b.fn.isDisabled=function(){return b(this).inState("state-disabled")};b.fn.isDisplayed=function(){return b(this).inState("state-displayed")};b.fn.isHidden=function(){return b(this).inState("state-hidden")};b.fn.trackHoveringState=function(f,d){b(this).each(function(){b(this).addStatesGroup(["state-hover","state-no-hover"],b.extend({},f,{groupName:StatesGroups.Hover,defaultState:"state-no-hover"}),d);b(this).bind("mouseenter",function(){if(!a){return}b(this).setState("state-hover","hovering")});b(this).bind("mouseleave",function(){if(!a){return}b(this).setState("state-no-hover","hovering")})});return b(this)};b.fn.trackFocus=function(f,d){b(this).each(function(){var g=b(this);var h=b.getFocusedElement();g.addStatesGroup(["state-focused","state-unfocused"],b.extend({},f,{defaultState:h&&h.hasAncestor(b(this))?"state-focused":"state-unfocused",groupName:"focus-state-group"}),d);g.focusin(function(){g.setState("state-focused","focus-state-group")});g.focusout(function(){b.beginInvoke(function(){var i=b.getFocusedElement();if(i&&i.hasAncestor(g)){g.setState("state-focused","focus-state-group")}else{g.setState("state-unfocused","focus-state-group")}})})});return b(this)};b.fn.isFocused=function(){return b(this).inState("state-focused")}})(jQuery);var QuickStates=new function(){this.createDisplayController=function(a){var c=ContextValue.createContextClass({getTarget:a});var b=ObservableFlag.createConditionalPositive({valueChangeCallback:function(d){c.set(d?"state-displayed":"state-hidden")}});c.set("state-displayed");return b}}();var ToggleButtonStates={Toggled:"state-toggled",UnToggled:"state-untoggled",Indeterminate:"state-toggle-indeterminate"};var ButtonSettings={Simple:{supportDisabling:false,supportHiding:false,trackActiveState:false,trackFocus:false,trackPressedState:true,elementPartsSelector:null},SimpleWithHiding:{supportDisabling:false,supportHiding:true,trackActiveState:false,trackFocus:false,trackPressedState:true,elementPartsSelector:null},SimpleWithDisabling:{supportDisabling:true,supportHiding:false,trackActiveState:false,trackFocus:false,trackPressedState:true,elementPartsSelector:null}};(function(a){a.fn.makeToggleButton=function(c){c=a.extend({},c);c.isToggleButton=true;return a(this).makeButton(c)};a.fn.makeSimpleButton=function(c){c=a.extend({displayCustomCursor:true},c);this.addClass("button state-enabled");if(c.displayCustomCursor){this.addClass("custom-cursor")}if(a.browser.msie){var d=this;d.mousedown(function(){d.addClass("state-pressed");a(document).one("mouseup",function(){d.removeClass("state-pressed")})})}return this};a.fn.makeButton=function(c){c=a.extend({isToggleButton:false,isToggled:false,enableClientToggleToFalse:true,enableClientToggleToTrue:true,toggleOnClick:true,displayCustomCursor:true,trackHoveringState:true,trackActiveState:true,trackPressedState:true,trackFocus:true,addToggledStates:false,supportHiding:true,supportDisabling:true,elementPartsSelector:null},c);return a(this).each(function(){var g=a(this);var f=g.data("button-data");if(f===undefined){f={$elementParts:g.find(c.elementPartsSelector),options:{}};g.data("button-data",f).addClass("button");var d=g.addStatesGroupsSupport();if(c.supportDisabling){g.addDisablingStates({elementPartsSelector:f.$elementParts},d)}else{g.addClass("state-enabled")}if(c.supportHiding){g.addDisplayingStates({},d)}if(c.trackActiveState){g.trackActiveState({elementPartsSelector:f.$elementParts},d)}if(c.trackPressedState){g.trackPressedState({elementPartsSelector:f.$elementParts},d)}if(c.addToggledStates){g.addToggledStates(c.isToggled,{elementPartsSelector:f.$elementParts},d)}if(c.trackHoveringState){g.trackHoveringState({elementPartsSelector:f.$elementParts},d)}if(g.is("a")&&c.trackFocus){g.trackFocus({},d)}}a.extend(f.options,c);g.toggleClass("custom-cursor",c.displayCustomCursor).toggleClass("toggle-button",c.isToggleButton).toggleClass("action-button",!c.isToggleButton);if(c.isToggleButton&&!f.isToggleButton){f.isToggleButton=true;g.addToggledStates(c.isToggled,{elementPartsSelector:f.$elementParts},d);if(c.toggleOnClick){g.buttonClick(function(h){if((g.isToggled()&&c.enableClientToggleToFalse)||(!g.isToggled()&&c.enableClientToggleToTrue)){b(g,h)}})}}})};function b(f,d){var c=f.data("toggle-group-data");if(!c||!c.oneAlwaysToggled||!f.is(c.currentToggled)){f.toggleToggled(undefined,d)}}a.fn.buttonClick=function(f,c,d){if(c===undefined){c=true}return this.bind("click"+(d?"."+d:""),function(i){var j=a(this);var h=!j.hasClass("state-disabled");var g;if(h){g=f.call(j,i)}i.stopPropagation();if(!h||c){i.preventDefault()}return g})};a.fn.buttonDown=function(c){return a(this).each(function(){var d=a(this);a(this).mousedown(function(f){if(!d.inState("state-disabled")){c.call(this,f)}})})};a.fn.buttonUp=function(c){return a(this).each(function(){var d=a(this);a(this).mouseup(function(f){if(!d.inState("state-disabled")){c.call(this,f)}})})};a.fn.buttonPress=function(c){return a(this).each(function(){var d=a(this);a(this).mouseHold(function(f){if(!d.inState("state-disabled")){c.call(this,f)}})})};a.fn.addToggledStates=function(d,f,c){return a(this).addStatesGroup(["state-toggled","state-untoggled","state-toggle-indeterminate"],a.extend({},f,{defaultState:d?"state-toggled":"state-untoggled",groupName:StatesGroups.Toggle}),c)};a.updateTogglingGroup=function(f,d){var c=a(document).data("toggle-group-"+f);c.duringTogglingUpdated=true;d();c.duringTogglingUpdated=false};a.fn.makeToggleGroup=function(c){c=a.extend({groupName:a.uniqueID(),oneAlwaysToggled:false,defaultToggled:undefined,toggleChangeCallback:a.noop},c);var f=function(){if(!d.duringTogglingUpdated){d.duringTogglingUpdated=true;if(a(this).isToggled()===true){d.elements.not(this).toggleToggled(false);d.currentToggled=a(this)}else{if(a(this).isToggled()===false){if(a.sameElements(d.currentToggled,a(this))){if(c.oneAlwaysToggled){a(this).toggleToggled(true)}else{d.currentToggled=undefined}}}}c.toggleChangeCallback(d.currentToggled);d.duringTogglingUpdated=false}};var d={id:a.uniqueID(),elements:a(this),currentToggled:undefined,duringTogglingUpdated:false,bindFunction:f,oneAlwaysToggled:c.oneAlwaysToggled};if(c.groupName){a(document).data("toggle-group-"+c.groupName,d)}a(this).bindStateChange(StatesGroups.Toggle,f,d.id);a(this).data("toggle-group-data",d);if(c.defaultToggled){a(c.defaultToggled).toggleToggled(true)}return a(this)};a.createToggleGroup=function(c){c=a.extend({groupName:a.uniqueID(),oneAlwaysToggled:false,toggleChangeCallback:a.noop},c);var d={elements:a([]),currentToggled:undefined,duringTogglingUpdated:false,oneAlwaysToggled:c.oneAlwaysToggled};d.bindFunction=function(){if(!d.duringTogglingUpdated){d.duringTogglingUpdated=true;if(a(this).isToggled()===true){d.elements.not(this).toggleToggled(false);d.currentToggled=a(this)}else{if(a(this).isToggled()===false){if(a.sameElements(d.currentToggled,a(this))){if(c.oneAlwaysToggled){a(this).toggleToggled(true)}else{d.currentToggled=undefined}}}}c.toggleChangeCallback(d.currentToggled);d.duringTogglingUpdated=false}};if(c.groupName){a(document).data("toggle-group-"+c.groupName,d)}return d};a.fn.addToToggleGroup=function(d){var c=a(this);if(d.elements.filter(function(){return a.sameElements(a(this),c)}).length===0){d.elements=d.elements.add(c);c.bindStateChange(StatesGroups.Toggle,d.bindFunction,d.id)}return a(this)};a.getToggleGroupData=function(c){return a(document).data("toggle-group-"+c)};a.getCurrentToggled=function(c){var d=a(document).data("toggle-group-"+c);if(d){return d.currentToggled}};a.fn.toggleToggled=function(c,d){return a(this).toggleBooleanState(StatesGroups.Toggle,"state-toggled","state-untoggled","state-toggle-indeterminate",c,d)};a.fn.isToggled=function(){if(a(this).inState("state-toggled")){return true}else{if(a(this).inState("state-untoggled")){return false}else{return null}}};a.fn.toggled=function(c){return a(this).bindStateChange(StatesGroups.Toggle,c)}})(jQuery);var LayoutHelper=new function(){this.SizeUnificationBatch=OperationsBatch.create();this.positionToRight=function(a){a.addClass("vertically-centered").wrap("<div class='right-block'></div>");return a.parent().prepend('<span class="height-normalizer"></span>')};this.positionToLeft=function(a){a.addClass("vertically-centered").wrap("<div class='left-block'></div>");return a.parent().prepend('<span class="height-normalizer"></span>')};this.createTable=function(q){q=$.extend({numberOfColumns:2,numberOfRows:1,isUniform:true,sizeUnifiersGroup:undefined,inlineCellContent:false,className:""},q);var o=q.numberOfColumns;var c=q.numberOfRows;var h=q.isUniform;var p=q.sizeUnifiersGroup;var a=q.inlineCellContent;var k=q.className;var m=[];var l=new StringBuilder();l.append('<div class="table {0}">',k);for(var f=0;f<c;f++){l.append('<div class="table-row row-index-{0} {1}">',f,$.getIndexClasses(f,c-1));for(var d=0;d<o;d++){var b="";if(h){b='style="width:{0}%;"'.format($.adjustFraction(100/o,2))}l.append('<span class="table-cell border-box-sizing vertically-top col-index-{0} {1}" {2}>',d,$.getIndexClasses(d,o-1),b);l.append('<span class="cell-content {0}"></span>',a?"vertically-top":"block");l.append("</span>")}l.append("</div>")}if(p){for(var f=0;f<o;f++){m[f]=p.addSizeUnifier()}}l.append("</div>");var n=$(l.toString());var g={$element:n,appendTo:function(i){n.appendTo(i);return g},getCell:function(j,i){return n.find(".row-index-{0} .col-index-{1} .cell-content".format(j,i))},getColumnSizeUnifier:function(i){return m[i]},countRows:function(){return c},countColumns:function(){return o},countCells:function(){return c*o},distributeItems:function(i){$(".cell-content",n).each(function(j){$(this).append(i[j])})}};return g};this.createSizeUnifiersGroup=function(){var b=[];var a=undefined;return{addSizeUnifier:function(){a=LayoutHelper.createSizeUnifier();b.push(a);return a},getCurrent:function(){return a},invalidate:function(){for(var c=0;c<b.length;c++){b[c].invalidate()}},unify:function(c){for(var d=0;d<b.length;d++){b[d].unify(c)}}}};this.createSizeUnifier=function(){var a={};var c=[];var b={width:false,height:false};$.extend(a,{addElement:function(f){if(!$.isPlainObject(f)){f={$element:$(f)}}f=$.extend({$element:undefined,$widthTarget:undefined,$heightTarget:undefined,autoWidth:false,autoHeight:false},f);var d=f.$element;if(!d){throw new Error("Missing $element option")}f.$widthTarget=$.valueOrDefault(f.$widthTarget,d);f.$heightTarget=$.valueOrDefault(f.$heightTarget,d);c.push(f);a.invalidate();return a},invalidate:function(){b.width=true;b.height=true},unify:function(n){n=$.extend({unifyWidth:false,unifyHeight:false,unifyToMinWidth:false,unifyToMinHeight:false},n);var m=false;if(n.unifyWidth&&b.width){m=true;b.width=false}if(n.unifyHeight&&b.height){m=true;b.height=false}if(m||n.force){var k=[];for(var h=0;h<c.length;h++){var d=c[h];var l=d.$element;var j=d.$widthTarget;var g=d.$heightTarget;var f={};if(n.unifyWidth){f.outerWidth=l.outerWidth();f.width=j.width()}if(n.unifyHeight){f.outerHeight=l.outerHeight();f.height=j.height()}f.elementInfo=d;k.push(f)}LayoutHelper.SizeUnificationBatch.performOperation(function(){var r,q,s,p,o;if(n.unifyWidth){r=n.unifyToMinWidth?"minValue":"maxValue";q=$[r](k,function(i){return i.outerWidth});for(o=0;o<k.length;o++){s=k[o];p=s.elementInfo;c[o].$widthTarget.css("width",q-(s.outerWidth-s.width))}}if(n.unifyHeight){r=n.unifyToMinHeight?"minValue":"maxValue";q=$[r](k,function(i){return i.outerHeight});for(o=0;o<k.length;o++){s=k[o];p=s.elementInfo;c[o].$heightTarget.css("height",q-(s.outerHeight-s.height))}}})}}});return a};this.createBlocksNormalizer=function(){var b={};var a={};$.extend(b,{addMainBlock:function(d,f){f=$.extend({$leftBlock:undefined,$rightBlock:undefined},f);var c={};var g=$.weakID();$.extend(c,{$mainBlock:d,$leftBlock:f.$leftBlock,$rightBlock:f.$rightBlock,remove:function(){delete a[g]}});a[g]=c;return c},normalize:function(){LayoutHelper.SizeUnificationBatch.performOperation(function(){var d=[];$.each(a,function(k,j){var m=j.$leftBlock&&j.$leftBlock.length>0?j.$leftBlock.outerWidth(true):undefined;var l=j.$rightBlock&&j.$rightBlock.length>0?j.$rightBlock.outerWidth(true):undefined;if(m!==undefined||l!==undefined){d.push({mainBlockController:j,marginLeft:m,marginRight:l})}});for(var h=0;h<d.length;h++){var g=d[h];var c=g.mainBlockController;var f=c.$mainBlock;if(g.marginLeft!==undefined){f.css("marginLeft",g.marginLeft)}if(g.marginRight!==undefined){f.css("marginRight",g.marginRight)}}})}});return b};this.normalizeBlock=function(b,c){c=$.extend({$leftBlock:undefined,$rightBlock:undefined},c);var g=c.$leftBlock;var a=c.$rightBlock;var f=g&&g.length>0?g.outerWidth(true):undefined;var d=a&&a.length>0?a.outerWidth(true):undefined;if(f!==undefined){b.css("marginLeft",f)}if(d!==undefined){b.css("marginRight",d)}};this.normalizeBlockField=function(f,c){c=$.extend({leftBlockSelector:".left-block",rightBlockSelector:".right-block",mainBlockSelector:".main-block"},c);var b=$(c.mainBlockSelector,f);var d=$(c.leftBlockSelector,f);var a=$(c.rightBlockSelector,f);LayoutHelper.normalizeBlock(b,{$leftBlock:d,$rightBlock:a})}}();(function(a){a.fn.makeTable=function(m){m=a.extend({itemsPerRow:3,rowClass:undefined,columnClass:undefined},m);var l=this;var f=m.itemsPerRow;var h=l.children();var c=undefined;var k=a([]);var g=1;var d=1;for(var b=0;b<h.length;b++){if(b%f===0){c=a("<span class='block row row-{0}'></span>".format(g)).addClass(m.rowClass);g++;d=1;k.pushElements(c)}var j=a("<span class='vertically-top column column-{0}'></span>".format(d)).addClass(m.columnClass).append(h[b]).appendTo(c);if(b%f===0){j.addClass("first")}if((b+1)%f===0){j.addClass("last")}d++}k.first().addClass("first");k.last().addClass("last");k.appendTo(l)};a.fn.unifySize=function(b){var d=LayoutHelper.createSizeUnifier();for(var c=0;c<this.length;c++){d.addElement(a(this[c]))}d.unify(b)};a.fn.uniformChildren=function(){var d,g;var c=this.children();var j=this.width();var h=Math.floor(j/c.length);var b=[];for(g=0;g<c.length;g++){d=a(c[g]);b.push({$element:d,margin:d.outerWidth(true)-d.outerWidth()})}var f=a.minValue(b,function(i){return h-i.margin});var k=f/j*100;LayoutHelper.SizeUnificationBatch.performOperation(function(){for(var l=0;l<b.length;l++){var m=b[l];m.$element.addClass("border-box-sizing").css({width:k+"%"})}})}})(jQuery);
/*! Copyright (c) 2011 Brandon Aaron (http://brandonaaron.net)
* Licensed under the MIT License (LICENSE.txt).
*
* Thanks to: http://adomas.org/javascript-mouse-wheel/ for some pointers.
* Thanks to: Mathias Bank(http://www.mathias-bank.de) for a scope bug fix.
* Thanks to: Seamus Leahy for adding deltaX and deltaY
*
* Version: 3.0.6
* 
* Requires: 1.2.2+
*/
(function(d){var b=["DOMMouseScroll","mousewheel"];if(d.event.fixHooks){for(var a=b.length;a;){d.event.fixHooks[b[--a]]=d.event.mouseHooks}}d.event.special.mousewheel={setup:function(){if(this.addEventListener){for(var f=b.length;f;){this.addEventListener(b[--f],c,false)}}else{this.onmousewheel=c}},teardown:function(){if(this.removeEventListener){for(var f=b.length;f;){this.removeEventListener(b[--f],c,false)}}else{this.onmousewheel=null}}};d.fn.extend({mousewheel:function(f){return f?this.bind("mousewheel",f):this.trigger("mousewheel")},unmousewheel:function(f){return this.unbind("mousewheel",f)}});function c(k){var i=k||window.event,h=[].slice.call(arguments,1),l=0,j=true,g=0,f=0;k=d.event.fix(i);k.type="mousewheel";if(i.wheelDelta){l=i.wheelDelta/120}if(i.detail){l=-i.detail/3}f=l;if(i.axis!==undefined&&i.axis===i.HORIZONTAL_AXIS){f=0;g=-1*l}if(i.wheelDeltaY!==undefined){f=i.wheelDeltaY/120}if(i.wheelDeltaX!==undefined){g=-1*i.wheelDeltaX/120}h.unshift(k,l,g,f);return(d.event.dispatch||d.event.handle).apply(this,h)}})(jQuery);function UpdatingController(c){var d=this;var a=c!==undefined?c:false;var b=[];this.togglePostponing=function(f){if(f){d.postponeUpdates()}else{d.unPostponeUpdates()}};this.postponeUpdates=function(){a=true};this.unPostponeUpdates=function(){if(!a){return}for(var f=0;f<b.length;f++){var g=b[f];$.each(g.postponedUpdates,function(i,h){h()});delete g.postponedUpdates}b=[];a=false};this.requestUpdate=function(f,h,g){if(g===undefined){g="default"}if(!a){h()}else{if(f.postponedUpdates===undefined){f.postponedUpdates={};b.push(f)}f.postponedUpdates[g]=h}}}(function(b){var c=document.createElement("div"),a=c.style;b.support.backgroundSize=a.backgroundSize===""?"backgroundSize":(a.MozBackgroundSize===""?"MozBackgroundSize":(a.WebkitBackgroundSize===""?"WebkitBackgroundSize":(a.OBackgroundSize===""?"OBackgroundSize":false)));if(b.support.backgroundSize&&b.support.backgroundSize!=="backgroundSize"){b.cssHooks.backgroundSize={get:function(g,f,d){return b.css(g,b.support.backgroundSize)},set:function(d,f){d.style[b.support.backgroundSize]=f}}}c=a=null})(jQuery);
/*! Copyright (c) 2010 Brandon Aaron (http://brandonaaron.net)
* Licensed under the MIT License (LICENSE.txt).
*/
(function(a){var b="Top Right Bottom Left".split(" ");a.each(["margin","padding"],function(c,d){a.cssHooks[d]={get:function(h,g,f){return a.map(b,function(i){return a.css(h,d+i)}).join(" ")},set:function(g,h){var i=h.split(/\s/),f={Top:i[0],Right:i[1]||i[0],Bottom:i[2]||i[0],Left:i[3]||i[1]||i[0]};a.each(b,function(k,j){g.style[d+j]=f[j]})}}})})(jQuery);(function(j){var a=document.createElement("div"),b=a.style,n="transform",s="Transform",h=["O"+s,"ms"+s,"Webkit"+s,"Moz"+s,n],k=h.length,q,l,c,p,r=/Matrix([^)]*)/;while(k--){if(h[k] in b){j.support[n]=q=h[k];continue}}switch(j.support.transform){case"MozTransform":j.support.transformCSS="-moz-transform";break;case"WebkitTransform":j.support.transformCSS="-webkit-transform";break;case"OTransform":j.support.transformCSS="-o-transform";break;case"msTransform":j.support.transformCSS="-ms-transform";break}if(!q){j.support.matrixFilter=l=b.filter===""}a=b=null;j.cssNumber[n]=true;if(q&&q!=n){j.cssProps[n]=q;if(q=="Moz"+s){c={get:function(t,i){return(i?j.css(t,q).split("px").join(""):t.style[q])},set:function(i,t){i.style[q]=/matrix[^)p]*\)/.test(t)?t.replace(/matrix((?:[^,]*,){4})([^,]*),([^)]*)/,"matrix$1$2px,$3px"):t}}}else{if(/^1\.[0-5](?:\.|$)/.test(j.fn.jquery)){c={get:function(t,i){return(i?j.css(t,q.replace(/^ms/,"Ms")):t.style[q])}}}}}else{if(l){c={get:function(v,u){var t=(u&&v.currentStyle?v.currentStyle:v.style),i;if(t&&r.test(t.filter)){i=RegExp.$1.split(",");i=[i[0].split("=")[1],i[2].split("=")[1],i[1].split("=")[1],i[3].split("=")[1]]}else{i=[1,0,0,1]}i[4]=t?t.left:0;i[5]=t?t.top:0;return"matrix("+i+")"},set:function(x,y,u){var t=x.style,v,i,w;if(!u){t.zoom=1}y=o(y);if(!u||u.M){i=["Matrix(M11="+y[0],"M12="+y[2],"M21="+y[1],"M22="+y[3],"SizingMethod='auto expand'"].join();w=(v=x.currentStyle)&&v.filter||t.filter||"";t.filter=r.test(w)?w.replace(r,i):w+" progid:DXImageTransform.Microsoft."+i+")";if((centerOrigin=j.transform.centerOrigin)){t[centerOrigin=="margin"?"marginLeft":"left"]=-(x.offsetWidth/2)+(x.clientWidth/2)+"px";t[centerOrigin=="margin"?"marginTop":"top"]=-(x.offsetHeight/2)+(x.clientHeight/2)+"px"}}if(!u||u.T){t.left=y[4]+"px";t.top=y[5]+"px"}}}}}if(c){j.cssHooks[n]=c}p=c&&c.get||j.css;j.fx.step.transform=function(y){var w=y.elem,t=y.start,A=y.end,D,E=y.pos,u,v,B,x,F,z=false,C=false,i;v=B=x=F="";if(!t||typeof t==="string"){if(!t){t=p(w,q)}if(l){w.style.zoom=1}D=A.split(t);if(D.length==2){A=D.join("");y.origin=t;t="none"}y.start=t=t=="none"?{translate:[0,0],rotate:0,scale:[1,1],skew:[0,0]}:d(f(t));y.end=A=~A.indexOf("matrix")?d(o(A)):m(A);for(i in t){if(i=="rotate"?t[i]==A[i]:t[i][0]==A[i][0]&&t[i][1]==A[i][1]){delete t[i]}}}if(t.translate){v=" translate("+((t.translate[0]+(A.translate[0]-t.translate[0])*E+0.5)|0)+"px,"+((t.translate[1]+(A.translate[1]-t.translate[1])*E+0.5)|0)+"px)";z=true}if(t.rotate!=undefined){B=" rotate("+(t.rotate+(A.rotate-t.rotate)*E)+"rad)";C=true}if(t.scale){x=" scale("+(t.scale[0]+(A.scale[0]-t.scale[0])*E)+","+(t.scale[1]+(A.scale[1]-t.scale[1])*E)+")";C=true}if(t.skew){F=" skew("+(t.skew[0]+(A.skew[0]-t.skew[0])*E)+"rad,"+(t.skew[1]+(A.skew[1]-t.skew[1])*E)+"rad)";C=true}u=y.origin?y.origin+v+x+B:v+B+x;c&&c.set?c.set(w,u,{M:C,T:z}):w.style[q]=u};function o(z){z=z.split(")");var M=j.trim,L=z.length-1,J,x,O,H=1,G=0,F=0,E=1,u,y,N,v,K,I,w=0,t=0;while(L--){J=z[L].split("(");x=M(J[0]);O=J[1];u=y=N=v=0;switch(x){case"translateX":w+=parseInt(O,10);continue;case"translateY":t+=parseInt(O,10);continue;case"translate":O=O.split(",");w+=parseInt(O[0],10);t+=parseInt(O[1]||0,10);continue;case"rotate":O=g(O);u=Math.cos(O);y=Math.sin(O);N=-Math.sin(O);v=Math.cos(O);break;case"scaleX":u=O;v=1;break;case"scaleY":u=1;v=O;break;case"scale":O=O.split(",");u=O[0];v=O.length>1?O[1]:O[0];break;case"skewX":u=v=1;N=Math.tan(g(O));break;case"skewY":u=v=1;y=Math.tan(g(O));break;case"skew":u=v=1;O=O.split(",");N=Math.tan(g(O[0]));y=Math.tan(g(O[1]||0));break;case"matrix":O=O.split(",");u=+O[0];y=+O[1];N=+O[2];v=+O[3];w+=parseInt(O[4],10);t+=parseInt(O[5],10)}K=H*u+G*N;G=H*y+G*v;I=F*u+E*N;E=F*y+E*v;H=K;F=I}return[H,G,F,E,w,t]}function d(v){var w,u,t,i=v[0],z=v[1],y=v[2],x=v[3];if(i*x-z*y){w=Math.sqrt(i*i+z*z);i/=w;z/=w;t=i*y+z*x;y-=i*t;x-=z*t;u=Math.sqrt(y*y+x*x);y/=u;x/=u;t/=u;if(i*x<z*y){i=-i;z=-z;t=-t;w=-w}}else{rotate=w=u=t=0}return{translate:[+v[4],+v[5]],rotate:Math.atan2(z,i),scale:[w,u],skew:[t,0]}}function m(u){u=u.split(")");var v=[0,0],y=0,x=[1,1],C=[0,0],z=u.length-1,w=j.trim,A,t,B;while(z--){A=u[z].split("(");t=w(A[0]);B=A[1];if(t=="translateX"){v[0]+=parseInt(B,10)}else{if(t=="translateY"){v[1]+=parseInt(B,10)}else{if(t=="translate"){B=B.split(",");v[0]+=parseInt(B[0],10);v[1]+=parseInt(B[1]||0,10)}else{if(t=="rotate"){y+=g(B)}else{if(t=="scaleX"){x[0]*=B}else{if(t=="scaleY"){x[1]*=B}else{if(t=="scale"){B=B.split(",");x[0]*=B[0];x[1]*=(B.length>1?B[1]:B[0])}else{if(t=="skewX"){C[0]+=g(B)}else{if(t=="skewY"){C[1]+=g(B)}else{if(t=="skew"){B=B.split(",");C[0]+=g(B[0]);C[1]+=g(B[1]||"0")}}}}}}}}}}}return{translate:v,rotate:y,scale:x,skew:C}}function g(i){return ~i.indexOf("deg")?parseInt(i,10)*(Math.PI*2/360):~i.indexOf("grad")?parseInt(i,10)*(Math.PI/200):parseFloat(i)}function f(i){i=/\(([^,]*),([^,]*),([^,]*),([^,]*),([^,p]*)(?:px)?,([^)p]*)(?:px)?/.exec(i);return[i[1],i[2],i[3],i[4],i[5],i[6]]}j.transform={centerOrigin:"margin"}})(jQuery);
/*! Copyright (c) 2010 Burin Asavesna (http://helloburin.com)
* Licensed under the MIT License (LICENSE.txt).
*/
(function(d){var h=document.createElement("div"),a=h.style,c=d.support,f="TopLeft TopRight BottomRight BottomLeft".split(" ");c.borderRadius=a.MozBorderRadius===""?"MozBorderRadius":(a.MsBorderRadius===""?"MsBorderRadius":(a.WebkitBorderRadius===""?"WebkitBorderRadius":(a.OBorderRadius===""?"OBorderRadius":(a.borderRadius===""?"BorderRadius":false))));h=null;function b(j,i){i=i===undefined||i===""?"border":i+"Border";if(c.borderRadius&&c.borderRadius=="MozBorderRadius"){return i+"Radius"+j.charAt(0).toUpperCase()+j.substr(1).toLowerCase()}else{return i+j+"Radius"}}var g;if(c.borderRadius&&c.borderRadius!=="BorderRadius"){g=c.borderRadius.replace("BorderRadius","");d.cssHooks.borderRadius={get:function(k,j,i){return d.map(f,function(l){return d.css(k,b(l,g))}).join(" ")},set:function(i,j){i.style[b("",g)]=j}}}d.each(f,function(k,j){d.cssHooks["borderRadius"+j]={get:function(m,l,i){return d.css(m,b(j,g))},set:function(i,l){i.style[b(j,g)]=l}}});d.each(f,function(j,l){var k="borderRadius"+l;d.fx.step[k]=function(i){d.cssHooks[k].set(i.elem,i.now+i.unit)}})})(jQuery);(function(){$.cssHooks.rgbaBackground={get:function(d,c,a){var b=$.getRGBA($.css(d,"backgroundColor"));if($.browser.msie&&parseInt($.browser.version)<9){b[3]=$.css(d,"opacity")}return"rgba({0},{1},{2},{3})".format(b[0],b[1],b[2],b[3])},set:function(b,c){var a=$.getRGBA(c);if($.browser.msie&&parseInt($.browser.version)<9){b.style.backgroundColor="rgb({0},{1},{2})".format(a[0],a[1],a[2]);$(b).css("opacity",a[3])}else{b.style.backgroundColor="rgba({0},{1},{2},{3})".format(a[0],a[1],a[2],a[3])}}};$.fx.step.rgbaBackground=function(a){if(!a.colorInit){a.start=$.getRGBA($.cssHooks.rgbaBackground.get(a.elem));a.end=$.getRGBA(a.end);a.colorInit=true}$.cssHooks.rgbaBackground.set(a.elem,"rgba("+Math.max(Math.min(Math.floor(a.pos*(a.end[0]-a.start[0])+a.start[0]),255),0)+","+Math.max(Math.min(Math.floor(a.pos*(a.end[1]-a.start[1])+a.start[1]),255),0)+","+Math.max(Math.min(Math.floor(a.pos*(a.end[2]-a.start[2])+a.start[2]),255),0)+","+Math.max(Math.min(Math.floor(((a.pos*(a.end[3]-a.start[3]))+a.start[3])*100)/100,1),0)+")")}})();
/*! Copyright (c) 2010 Burin Asavesna (http://helloburin.com)
 * Licensed under the MIT License (LICENSE.txt).
 */
(function(h){var i=document.createElement("div"),c=i.style,g=h.support,f=/\s/,b=/\)\s/;g.boxShadow=c.MozBoxShadow===""?"MozBoxShadow":(c.MsBoxShadow===""?"MsBoxShadow":(c.WebkitBoxShadow===""?"WebkitBoxShadow":(c.OBoxShadow===""?"OBoxShadow":(c.boxShadow===""?"BoxShadow":false))));i=null;function d(k,l,j){var m=k.split(f);m[j]=l;return m.join(" ")}if(g.boxShadow&&g.boxShadow!=="BoxShadow"){h.cssHooks.boxShadow={get:function(l,k,j){return h.css(l,g.boxShadow)},set:function(j,k){j.style[g.boxShadow]=k}};h.cssHooks.boxShadowColor={get:function(l,k,j){return h.css(l,g.boxShadow).split(b)[0]+")"},set:function(j,k){j.style[g.boxShadow]=k+" "+h.css(j,g.boxShadow).split(b)[1]}};h.cssHooks.boxShadowBlur={get:function(l,k,j){return h.css(l,g.boxShadow).split(f)[5]},set:function(j,k){j.style[g.boxShadow]=d(h.css(j,g.boxShadow),k,5)}};h.cssHooks.boxShadowSpread={get:function(l,k,j){return h.css(l,g.boxShadow).split(f)[6]},set:function(j,k){j.style[g.boxShadow]=d(h.css(j,g.boxShadow),k,6)}};h.cssHooks.boxShadowX={get:function(l,k,j){return h.css(l,g.boxShadow).split(f)[3]},set:function(j,k){j.style[g.boxShadow]=d(h.css(j,g.boxShadow),k,3)}};h.cssHooks.boxShadowY={get:function(l,k,j){return h.css(l,g.boxShadow).split(f)[4]},set:function(j,k){j.style[g.boxShadow]=d(h.css(j,g.boxShadow),k,4)}};var a="Blur Spread X Y".split(" ");h.each(a,function(j,l){var k="boxShadow"+l;h.fx.step[k]=function(m){h.cssHooks[k].set(m.elem,m.now+m.unit)}})}})(jQuery);
/*!
* Copyright (c) 2011 Tom Ellis (http://www.webmuse.co.uk)
* Linear and Radial Gradient cssHook for jQuery
* Limitations:
  - Works with jQuery 1.4.3 and higher
  - Works in Firefox 3.6+, Safari 5.1+, Chrome 13+, Opera 11.10+, IE9+
  - Radial Gradients DO NOT work in Opera yet (Doesn't make sense I Know!)
  - Only works for background and background image CSS properties
* Licensed under the MIT License (LICENSE.txt).
*/
(function(h){var k=document.createElement("div"),g=k.style,v=/^(.*?)linear-gradient(.*?)$/i,m=/^(.*?)radial-gradient(.*?)$/i,n=/^(.*?)(:?linear-gradient)(\()(.*)(\))(.*?)$/i,r=/^(.*?)(:?radial-gradient)(\()(.*?)(\))(.*?)$/i,b=/(^|\s)linear-gradient/,p=/(^|\s)-moz-linear-gradient/,q=/(^|\s)-webkit-linear-gradient/,s=/(^|\s)-o-linear-gradient/,f=/(^|\s)radial-gradient/,t=/(^|\s)-moz-radial-gradient/,j=/(^|\s)-webkit-radial-gradient/,o=/(^|\s)-o-radial-gradient/,d=/\s/,a=/\s/g,c="background backgroundImage",u="background-image: -moz-linear-gradient(red, blue);background-image: -webkit-linear-gradient(red, blue);background-image: -o-linear-gradient(red, blue);background-image: linear-gradient(red, blue);",l="background-image: -moz-radial-gradient(circle, orange, red);background-image: -webkit-radial-gradient(circle, orange, red);background-image: -o-radial-gradient(circle,red, blue);background-image: radial-gradient(circle, orange, red);",i=c.split(d);g.cssText=u,linearSettings=function(w){var x=n.exec(w);w=w.replace(x[2],h.support.linearGradient);return w},radialSettings=function(w){var x=r.exec(w);w=w.replace(x[2],h.support.radialGradient);return w};h.support.linearGradient=b.test(g.backgroundImage)?"linear-gradient":(p.test(g.backgroundImage)?"-moz-linear-gradient":(q.test(g.backgroundImage)?"-webkit-linear-gradient":(s.test(g.backgroundImage)?"-o-linear-gradient":false)));g.cssText=l;h.support.radialGradient=f.test(g.backgroundImage)?"radial-gradient":(t.test(g.backgroundImage)?"-moz-radial-gradient":(j.test(g.backgroundImage)?"-webkit-radial-gradient":(o.test(g.backgroundImage)?"-o-radial-gradient":false)));if(h.support.linearGradient&&h.support.linearGradient!=="linear-gradient"){h.each(i,function(w,x){h.cssHooks[x]={set:function(y,z){if(v.test(z)){y.style[x]=linearSettings(z)}else{if(m.test(z)){y.style[x]=radialSettings(z)}else{y.style[x]=z}}}}})}k=g=null})(jQuery);var ImagesLoader=new function(){var b={};var a=0;this.getImagesCache=function(){return b};this.setLoadingDelay=function(c){a=c};this.loadImages=function(g,d){d=$.extend({loadCallback:$.noop,errorCallback:$.noop,finishCallback:$.noop,progressCallback:$.noop},d);if(!(g instanceof Array)){g=[g]}var c=[];var f=g.length;var h=0;$.each(g,function(k,j){var q;var l;var n=b[j];if(n!==undefined){d.loadCallback(n);o(n)}else{if(a>0){window.setTimeout(p,a)}else{p()}}function p(){q=new Image();l=$(q);l.load(m);l.error(function(){console.log("Failed Loading Image "+j);d.errorCallback();o({url:j,error:"Error Loading"})});q.src=j}function m(){var i={width:l[0].width,height:l[0].height};var r={$image:l,imageSize:i,imageUrl:j};b[j]=r;d.loadCallback(r);o(r)}function o(i){c.push(i);h++;d.progressCallback({imageData:i,loadedImagesCount:h,totalImagesCount:f,progress:h/f});if(h==f){if(f==1){d.finishCallback(i)}else{d.finishCallback(c)}}}})}}();var TabsGroupUtil=new function(){this.createSlideShow=function(c){c=$.extend({interval:2000,autoStart:false},c);var a={};var f=[];var d=undefined;var b=false;$.extend(a,{addTabsGroup:function(h){f.push({currentIndex:-1,tabsGroup:h});h.hideCurrentTab()},start:function(){if(!b){d=window.setInterval(g,c.interval);g();b=true}},isStarted:function(){return b},stop:function(){if(b){window.clearInterval(d);b=false}}});if(c.autoStart){a.start()}return a;function g(){for(var k=0;k<f.length;k++){var m=f[k];var l=m.tabsGroup;var h=l.tabs.length;var j=-1;if(h>0){j=(m.currentIndex+1)%h}if(j!==m.currentIndex){m.currentIndex=j;if(j===-1){l.hideCurrentTab()}else{l.tabs[j].showTab()}}}}}}();(function(h){h.fn.makeTabsGroup=function(j){var k=h.createTabsGroup(j);h(this).addToTabsGroup(k);return k};h.fn.makeTabsSwitcher=function(l){l=h.extend({foldingAnimation:function(p){this.animate({height:p},300)}},l);var j=this;var n=undefined;var k;var o=h.createTabsGroup(h.extend(l,{showingHandler:function(q){var p=q.currentTab;if(q.showedTab){if(n===undefined){m(q)}else{k=function(){m(q)};n.done(function(){if(k){var r=k;k=undefined;r()}})}}else{a(q,p);p.show();d(q,p)}}}));h(this).children().addToTabsGroup(o);return o;function m(z){if(h.sameElements(z.currentTab,z.showedTab)){return}var q=z.showedTab;var w=z.currentTab;q.hide();c(z,w);var t=w.offset();var v=w.outerSize();var u=j.css("position");if(u!="absolute"&&u!="fixed"){j.css("position","relative")}var A=j.height();q.show();w.hide();var p=q.offset();var r=q.outerSize();var y=j.height();var s=w.wrap("<span class='block'></span>").parent();var x=q.wrap("<span class='block'></span>").parent();h.unite(s,x).css({display:"block",position:"absolute"});s.offset(t).elementSize(v);x.offset(p).elementSize(r);j.css({height:y,overflow:"hidden"});x.insertBefore(s);f(z,q);g(z,w);z.options.foldingAnimation.call(j,A);n=h.unite(q,w,j).promise();n.done(function(){w.unwrap();q.unwrap();j.css({height:"",overflow:""})})}};h.createTabsGroup=function(j){j=h.extend({showingFunction:undefined,hidingFunction:undefined,useDisplayingStates:false,useVisibilityStates:false,hideBeforeShowing:true,onTabShow:h.noop,onTabHide:h.noop,onTabHiding:h.noop,onTabShowing:h.noop},j);var k={tabs:[],currentTab:undefined,currentTabChanged:SimpleEvent.create(),options:j,tabShowedEvent:SimpleEvent.create(),tabHideEvent:SimpleEvent.create(),hideCurrentTab:function(){h.hideTab(k)},isShowed:function(l){return l.is(k.currentTab)}};return k};h.fn.getTabsGroup=function(){return h(this).data("tabs-group")};h.fn.makeTabButton=function(l,k){k=h.extend({hideTabOnUntoggling:false},k);var o=h(this).makeToggleButton();var n=h(l);var p=n.data("tabs-group");var j=false;var m=false;p.currentTabChanged.bindAndExecute(function(){if(!m){j=true;o.toggleToggled(h.sameElements(p.currentTab,n));j=false}});o.toggled(function(q){if(!j){m=true;if(q===ToggleButtonStates.Toggled){n.showTab()}else{if(k.hideTabOnUntoggling){n.hideTab()}else{j=true;o.toggleToggled(true);j=false}}m=false}});return this};h.fn.addToTabsGroup=function(k,j){return h(this).each(function(){j=h.extend({onTabHide:h.noop,onTabShow:h.noop,onTabShowing:h.noop,onTabHiding:h.noop},j);var m=h(this);var l={tabHideEvent:SimpleEvent.create(),tabShowEvent:SimpleEvent.create(),options:j,showTab:function(){m.showTab()}};k.tabs.push(l);h(this).data("tabs-group-controller",l);h(this).data("tabs-group",k);if(k.options.useDisplayingStates){h(this).addDisplayingStates().toggleDisplayed(false,"TabsGroup")}else{if(k.options.useVisibilityStates){h(this).addVisibilityStates().toggleVisibility(false,"TabsGroup")}else{h(this).hide()}}})};h.fn.removeFromTabsGroup=function(){var k=h(this).data("tabs-group");if(h(this).is(k.currentTab)){k.currentTab=undefined}var j=h(this).data("tabs-group-controller");k.tabs.removeItem(j);h(this).removeData("tabs-group").removeData("tabs-group-controller");return this};h.fn.onTabHide=function(j){h(this).data("tabs-group-controller").tabHideEvent.bind(j)};h.fn.onTabShow=function(j){h(this).data("tabs-group-controller").tabShowEvent.bind(j)};h.fn.hideTab=function(){h.hideTab(h(this).data("tabs-group"),h(this))};h.hideTab=function(l,k){var j=l.options;var m=l.currentTab;if(m!==undefined&&(k===undefined||k.is(m))){l.currentTab=undefined;f(l,m);l.currentTabChanged.fire()}};h.fn.showTab=function(n){var k=h(this[0]);var o=h(this).data("tabs-group");var l=o.options;var j=k.data("tabs-group-controller");var m=o.currentTab;if(m===undefined||!h.sameElements(m,k)){o.currentTab=k;if(l.showingHandler){l.showingHandler(o)}else{f(o,m);c(o,k,n);if(!l.useDisplayingStates&&!l.useVisibilityStates){g(o,k,m)}}o.currentTabChanged.fire()}};function c(m,l,k){var j=m.options;a(m,l);if(j.useDisplayingStates){l.toggleDisplayed(true,"TabsGroup")}else{if(j.useVisibilityStates){l.toggleVisibility(true,"TabsGroup")}else{l.show()}}d(m,l,k)}function g(m,l,k){var j=m.options;if(!j.useDisplayingStates&&!j.useVisibilityStates&&j.showingFunction){l.hide();j.showingFunction.call(l,k)}else{l.show()}}function f(l,k){if(!k){return}b(l,k);var j=l.options;if(j.useDisplayingStates){k.toggleDisplayed(false,"TabsGroup")}else{if(j.useVisibilityStates){k.toggleVisibility(false,"TabsGroup")}else{if(l.options.hidingFunction){l.options.hidingFunction.call(k)}else{k.hide()}}}i(l,k)}function d(m,l,k){m.showedTab=l;var j=l.data("tabs-group-controller");j.options.onTabShow.call(l,k);j.tabShowEvent.fire();m.tabShowedEvent.fire(l);m.options.onTabShow.call(l)}function a(l,k){var j=k.data("tabs-group-controller");j.options.onTabShowing.call(k);l.options.onTabShowing.call(k)}function i(l,k){var j=k.data("tabs-group-controller");j.options.onTabHide.call(k);l.options.onTabHide.call(k);l.tabHideEvent.fire(k);j.tabHideEvent.fire()}function b(l,k){var j=k.data("tabs-group-controller");j.options.onTabHiding.call(k);l.options.onTabHiding.call(k)}})(jQuery);var Dialog=new function(){var b={};this.open=function(d,f){f=$.extend({onOpened:$.noop,overlayClass:"dialog-overlay",contextClass:undefined,showingAnimationFunction:false,hidingAnimation:false,overlayShowingAnimation:false,overlayHidingAnimation:false,afterShowEffect:undefined},f);a(d,true);var i={id:$.uniqueID(),$overlay:$("<div class='dialog-overlay panels-scope'></div>").appendTo("body"),$dialogContainer:$("<div class='panels-scope activation-scope dialog block fixed-positioned'></div>").appendTo("body"),contextClass:ContextValue.createContextClass({getTarget:function(){return i.$dialogContainer}})};d.data("dialog-controller",i);b[i.id]=true;i.contextOptions=f;i.contextClass.set(f.contextClass);var c=i.$overlay;c.appendTo("body");if(f.overlayShowingAnimation){$.beginInvoke(function(){f.overlayShowingAnimation.call(c)})}else{c.show()}i.$dialogContainer.append(d).appendTo("body").show();var g=$("body").scrollTop();var h=$("html").scrollTop();f.onOpened.call(d);i.$dialogContainer.makeCentered({horizontally:true,vertically:true});$("body").scrollTop(g);$("html").scrollTop(h);if(f.showingAnimationFunction){i.$dialogContainer.hide();$.beginInvoke(function(){f.showingAnimationFunction.apply(i.$dialogContainer)})}else{if(f.afterShowEffect){f.afterShowEffect.apply(i.$dialogContainer)}}return i};this.hasOpenedDialogs=function(){return !$.isEmptyObject(b)};this.reCenterTheDialog=function(c){var d=c.data("dialog-controller");if(d){d.$dialogContainer.makeCentered({horizontally:true,vertically:true})}};this.getDialogOverlay=function(c){var d=c.data("dialog-controller");return d.$overlay};this.close=function(c){a(c,false)};function a(g,k){var j=g.data("dialog-controller");if(!j){return}delete b[j.id];g.removeData("dialog-controller");g.detach();var f=j.contextOptions;var c=j.$overlay;var d=j.$dialogContainer;var h=f.overlayHidingAnimation;var i=f.hidingAnimation;if(h&&!k){h.call(c,function(){c.remove()})}else{c.remove()}if(i&&!k){i.call(d,function(){d.remove()})}else{d.remove()}}};var ItemsListFilteringBehaviour={HideItems:1,DetachItems:2};(function(g){var r=[];g.addItemsListExtension=function(u){r.push(u)};g.fn.makeItemsList=function(C){C=g.extend({template:undefined,itemCreationFunction:undefined,getTemplateItem:g.contextIdentity,autoFetchingScrollParent:"self",additionalTemplateFields:undefined,itemAddedCallback:g.noop,itemRemovingCallback:g.noop,itemUpdatedCallback:g.noop,itemsChangedCallback:g.noop,scrollableOptions:false,$scrollbar:undefined,scrollbarOptions:undefined,itemWrapper:undefined,emptyListTemplate:undefined,listItemClass:undefined,insertionFilter:g.returnTrue,insertionFunction:function(E,D){var F=D.getListFooter();if(F){E.insertBefore(F)}else{E.appendTo(D.$element)}},idFunction:undefined,items:undefined,createItemsOnInitialization:false,autoFetchCount:20,autoFetchDistance:10,initialFetchCount:0,filteringFunction:undefined,filteringBehaviour:ItemsListFilteringBehaviour.HideItems,filteredItemsChangeCallback:undefined,lastDisplayedItemClass:undefined},C);var B=g(this).addClass("items-list");var z;var v=ObservableFlag.create(true);var w={$scrollParent:a(B,C.autoFetchingScrollParent),trackScrolling:false,filteringBehaviour:C.filteringBehaviour,insertionFunction:C.insertionFunction};var A;var x=C.scrollableOptions!==false;if(x){A=B.scrollable(C.scrollableOptions)}var y={$element:B,data:w,id:g.weakID(),isEmptyFlag:v,itemsCount:ObservableObject.createNumerical(0),itemsChangingBatch:OperationsBatch.create(),extensionActivated:SimpleEvent.create(),itemsRemovingEvent:SimpleEvent.create(),itemsRemovedEvent:SimpleEvent.create(),itemRemovingEvent:SimpleEvent.create(),itemAddedEvent:SimpleEvent.create(),itemsAddedEvent:SimpleEvent.create(),itemUpdatedEvent:SimpleEvent.create(),itemsChangedEvent:SimpleEvent.create(),boundCollectionChangedEvent:SimpleEvent.create(),options:C,items:{},filteredItems:{},unfilteredItems:{},isScrollable:x,filteringFunction:g.returnTrue,filteredItemsChangeEvent:SimpleEvent.create(),setFilteringBehaviour:function(D){if(D!==w.filteringBehaviour){w.filteringBehaviour=D}if(D===ItemsListFilteringBehaviour.HideItems){g.each(y.unfilteredItems,function(F,G){var H=G.$wrapper;if(!H){H=G.$item}H.toggleDisplayed(false,"ItemsListFiltering");w.insertionFunction(H,y)})}else{var E=g([]);g.each(y.unfilteredItems,function(F,G){var H=G.$wrapper;if(!H){H=G.$item}H.toggleDisplayed(true,"ItemsListFiltering");E.pushElements(H)});E.detach()}},setItemWrapper:function(D){y.itemWrapperTemplate=D;g.each(y.items,function(H,I){var E=I.$item;var F=I.$wrapper;if(!F){E.wrap("<span></span>");F=E.parent()}E.detach();var G=g.useTemplate(D);F.replaceWith(G);var J=g(".wrapped-item-container",G);if(J.length>0){E.appendTo(J)}else{E.appendTo(G)}G.addDisplayingStates();if(!I.$wrapper){E.toggleDisplayed(true,"ItemsListFiltering")}G.toggleDisplayed(I.isFiltered,"ItemsListFiltering");I.$wrapper=G});return y},removeItemWrappers:function(){g.each(y.items,function(F,G){var D=G.$item;var E=G.$wrapper;if(E){E.replaceWith(D);G.$wrapper=undefined}})},setScrollParent:function(D){if(w.trackScrolling){s(y,w);w.$scrollParent=a(B,D);o(y,w)}},getScrollingController:function(){if(y.connectedScrollable){return y.connectedScrollable}return A},initialize:function(){if(!y.initialized){y.initialized=true;if(C.createItemsOnInitialization&&C.items){y.setItems(C.items)}if(x){if(C.$scrollbar){var D=C.$scrollbar.scrollBar(C.scrollbarOptions);D.connectToScrollable(B);y.scrollBar=D}c(y)}if(y.delayedFetchingCollection&&C.initialFetchCount>0){y.delayedFetchingCollection.fetchTo(C.initialFetchCount)}}},connectScrollable:function(D){y.connectedScrollable=D;return y},addListFooter:function(D){D=g.extend({footerClass:"block",createFooter:undefined,initialize:g.noop},D);if(z){throw new Error("Cannot add multiple footers to items list.")}var E=D.createFooter;if(E){z=E()}else{z=g("<span class='items-list-footer'></span>").addClass(D.footerClass)}z.appendTo(B);D.initialize(z,y);return y},getListFooter:function(){return z},getScrollable:function(){return A},refreshScrolling:function(){c(y)},notifyItemUpdated:function(E,D){C.itemUpdatedCallback.call(E,E,D);y.itemUpdatedEvent.fire(E,E)},isEmpty:function(){return g.isEmptyObject(y.filteredItems)},getItemID:function(D){if(C.idFunction){return C.idFunction.call(D,D)}else{return undefined}},getListItem:function(D){if(typeof D==="string"||typeof D==="number"||typeof D==="boolean"){return y.items[D]}else{if(g.isPlainObject(D)){if(D.isItemsListItem){return D}else{if(C.idFunction){var E=C.idFunction.call(D,D);return y.items[E]}else{return undefined}}}else{return D.data("items-list-item")}}},getItemByIndex:function(D,E){E=g.valueOrDefault(E,false);var F;if(E){F=y.$element.children(".state-displayed")}else{F=g(".items-list-"+y.id,y.$element)}if(D>=F.length){return undefined}return g(F[D]).data("items-list-item")},setFilter:function(D){y.filteringFunction=D;y.refilter()},getFilteredItems:function(){return y.filteredItems},getFilteredListItems:function(){var D={};g.each(y.filteredItems,function(E,F){D[C.idFunction.call(F.item,F.item)]=F.item});return D},getListItems:function(){var D={};g.each(y.items,function(E,F){D[C.idFunction.call(F.item,F.item)]=F.item});return D},getDataItems:function(){return y.getListItems()},findItems:function(D){D=g.valueOrDefault(D,g.returnTrue);var E=[];g.each(y.items,function(F,G){if(D(G)){E.push(G)}});return E},findItem:function(D){return y.findItems(D)[0]},onButtonClick:function(D){y.onItemEvents("click",function(F,E){if(!F.$item.is(".state-disabled")){D(F,E);E.stopPropagation();E.preventDefault()}});return y},attachContextMenu:function(I,H){H=g.extend({predicate:g.returnTrue,contextMenuOpenedClass:"context-menu-opened",appendto:"body",activationArgs:undefined,contextMenuButtonSelector:undefined},H);var D=H.predicate;var F=H.contextMenuOpenedClass;var G=H.appendto;var J=H.activationArgs;var E=H.contextMenuButtonSelector;y.onItemEvents("contextmenu",function(N,M){var K=N.$item;var L=N.item;if(D()){K.addClass(F);PanelsManager.usePanel(I).openInContext(M,{activationArgs:g.valueOrDefault(J,{activationContext:{item:L}}),closeCallback:function(){K.removeClass(F)},appendTo:G})}M.stopPropagation();M.preventDefault()});if(E){y.attachItemsDropPanel(I,{itemPartSelector:E,dropPanelOpenedClass:F,dropPanelClosedClass:"",appendTo:G,positioningFunction:PositioningFunctions.createVerticallyCentered()},function(K){return{activationArgs:g.valueOrDefault(J,{activationContext:{item:K.item}})}})}return y},onInnerButtonClick:function(D,E){y.onItemPartEvents(D,"click",function(H,G,F){if(!H.is(".state-disabled")){E(H,G,F);F.stopPropagation();F.preventDefault()}});return y},onItemEvents:function(D,E){B.on(D,".items-list-item",function(G){var F=y.getListItem(g(this));if(F.itemsList===y){E(F,G)}});return y},onItemPartEvents:function(E,D,F){B.on(D,E,function(H){var I=g(this);var G=y.getListItem(I.closest(".items-list-item"));if(G.itemsList===y){F(I,G,H)}});return y},onItemHover:function(D,E){return y.onItemEvents("mouseenter",D).onItemEvents("mouseleave",E)},attachItemsDropPanel:function(D,L,G){L=g.extend({dropPanelOpenedClass:"state-toggled",dropPanelClosedClass:"state-untoggled",dropPanelOpenedCallback:g.noop,dropPanelClosedCallback:g.noop,itemPartSelector:undefined},L);G=g.valueOrDefault(G,g.noop);var M=L.dropPanelOpenedClass;var K=L.dropPanelClosedClass;var E=L.itemPartSelector;var H=L.dropPanelOpenedCallback;var I=L.dropPanelClosedCallback;g.each(y.items,function(N,O){O.$item.addClass("attached-drop-panel-window").addClass(K)});y.itemAddedEvent.bind(function(N){N.$item.addClass("attached-drop-panel-window").addClass(K)});var J=ObservableObject.createReferenceObject({valueChangeCallback:function(O,N){if(O){O.$item.removeClass(K).addClass(M);H(O.$item)}if(N){N.$item.removeClass(M).addClass(K);I(N.$item)}}});y.itemsRemovingEvent.bind(function(Q){for(var P=0;P<Q.length;P++){var O=Q[P];var N=O.openedDropPanel;if(N){N.requestDeactivation()}}});var F=function(N,O,P){var S=G;var Q;var V=O.openedDropPanel;if(V){V.requestDeactivation()}if(g.isFunction(D)){var U=D(O);if(U){Q=U.panel;if(U.contextOptionsCallback){S=U.contextOptionsCallback}}else{Q=undefined}}else{Q=D}if(!Q){return}var R=PanelsManager.usePanel(Q);if(V!==R){O.openedDropPanel=R;J.setValue(O);var T=g.extend({isDraggable:true,stackWithWindows:true},L,S(O));R.openAsDropPanel({activationArgs:T.activationArgs,panelContext:T.panelContext,positioningFunction:T.positioningFunction,relativeTo:N,contextClass:T.contextClass,appendTo:T.appendTo,showingFunction:T.showingFunction,isDraggable:T.isDraggable,stackWithWindows:T.stackWithWindows});R.deactivateOnClickOutside({ignoredElementsFilters:[N]});R.panelDeactivatedEvent.one(function(){O.openedDropPanel=undefined;J.setValue(undefined)})}P.stopPropagation();P.preventDefault()};if(E){y.onInnerButtonClick(E,F)}else{y.onButtonClick(function(O,N){F(O.$item,O,N)})}return y},refilter:function(){y.filteredItems={};y.unfilteredItems={};t(y);n(y)},getItemsElements:function(){return y.$element.find(".items-list-"+y.id)},getFilteredItemsElements:function(){return y.getItemsElements().filter(".state-filtered")},getBoundCollection:function(){return y.boundObservableCollection},releaseBoundCollection:function(){var D=y.boundObservableCollection;if(D){D.itemsAddedEvent.unbind(y.id);D.itemsUpdatedEvent.unbind(y.id);D.itemsRemovedEvent.unbind(y.id);var E=y.delayedFetchingCollection;if(E){E.allFetchedEvent.unbind(y.id);s(y,w)}y.clear()}},setItems:function(H,D){y.itemsChangingBatch.start();y.releaseBoundCollection();var G=H.isObservableCollection&&H.isObservableCollection();var F=H.supportsDelayedFetching&&H.supportsDelayedFetching();var E;if(G){C.idFunction=H.getIDFunction();H.updateBatch.startedEvent.bind(function(){y.itemsChangingBatch.start()},y.id);H.updateBatch.finishedEvent.bind(function(){y.itemsChangingBatch.finish()},y.id);H.itemsAddedEvent.bind(function(I){y.addItems(I);if(F){i(y,w)}},y.id);H.itemsUpdatedEvent.bind(function(I){y.addItems(I)},y.id);H.itemsRemovedEvent.bind(function(I){y.removeItems(I)},y.id);E=b(y,H.getItemsValues(),D);y.boundObservableCollection=H;y.boundCollectionChangedEvent.fire()}else{E=b(y,H,D)}y.itemsAddedEvent.fire(y,E);if(F){y.delayedFetchingCollection=H;if(C.autoFetchCount&&H.hasMore()){H.allFetchedEvent.bind(function(){s(y,w)},y.id);o(y,w)}}n(y);y.itemsChangingBatch.finish();return E},addItems:function(D,F){y.itemsChangingBatch.start();var E=k(y,D,F);t(y,E);n(y);y.itemsChangingBatch.finish();y.itemsAddedEvent.fire(y,E);return E},addItem:function(G){var D,E;var F=C.insertionFilter;if(F.call(G)){y.itemsChangingBatch.start();E=p(y,G,false);D=E.listItem;t(y,[D]);n(y);if(E.isNewItem){y.itemsAddedEvent.fire(y,[D])}y.itemsChangingBatch.finish()}return D},removeItems:function(D){y.itemsChangingBatch.start();var E=l(y,D);if(E.length>0){y.itemsRemovedEvent.fire(y,E);n(y);y.filteredItemsChangeEvent.fire()}y.itemsChangingBatch.finish()},removeItem:function(D){y.itemsChangingBatch.start();y.removeItems(g.makeArray(D));y.itemsChangingBatch.finish()},clear:function(){y.itemsChangingBatch.start();var D=m(y);if(D.length>0){y.itemsRemovedEvent.fire(y,D);n(y)}y.itemsChangingBatch.finish()},trackLastDisplayedItem:function(E){var D;y.itemsChangedEvent.bindAndExecute(function(){var H=B.children().last(".state-displayed");var F;if(H.length===0){F=undefined}else{if(H.hasClass("items-list-item")){F=H.data("items-list-item")}else{var G=g(".items-list-"+y.id,H);F=G[G.length-1].data("items-list-item")}}if(F!==D){E(F,D);D=F}})},trackElementsIndexes:function(){y.itemsChangedEvent.bindAndExecute(function(){y.getItemsElements().filter(":not(.state-hidden)").applyIndexesClasses()});return y},fetchMore:function(D){var E=y.delayedFetchingCollection;if(E&&E.hasMore()){E.fetchMore(D)}},scrollToItem:function(F){var E=y.getScrollingController();if(E){var H=y.getListItem(F);if(H){var D=H.$item;var G=E.$element;var J=D.offset().top-G.offset().top;var I=G.scrollTop();G.scrollTop(I+J)}}return y},bringToViewport:function(E){var D=y.getScrollingController();if(D){var F=y.getListItem(E);if(F){D.bringToViewport(F.$item)}}return y}};for(var u=0;u<r.length;u++){g.extend(y,r[u].call(y,y))}if(C.items&&!C.createItemsOnInitialization){y.setItems(C.items)}if(C.filteringFunction){y.setFilter(C.filteringFunction)}if(C.filteredItemsChangeCallback){y.filteredItemsChangeEvent.bind(C.filteredItemsChangeCallback)}if(C.lastDisplayedItemClass){y.trackLastDisplayedItem(function(D,E){if(E){E.$item.removeClass(C.lastDisplayedItemClass)}if(D){D.$item.addClass(C.lastDisplayedItemClass)}})}f(y);return y};function a(v,u){if(u){if(u=="auto"){return v.scrollParent()}else{if(u=="self"){return v}else{return g(u)}}}else{return v}}function s(u,v){v.$scrollParent.unbind("scroll.autoFetch"+u.id);v.trackScrolling=false}function o(u,v){v.$scrollParent.bind("scroll.autoFetch"+u.id,function(){i(u,v)});v.trackScrolling=true}function i(v,y){var w=v.delayedFetchingCollection;var u=v.$element;var x=v.options.autoFetchCount;var z=y.$scrollParent;if(w&&x&&w.hasMore()){if(z.scrollTop()+v.options.autoFetchDistance>=z.getMaxScrollHeight()){w.fetchMore(x)}}}function t(z,E){var y=z.data;if(E===undefined){E=g.getValues(z.items)}else{if(g.isPlainObject(E)){E=g.getValues(E)}}var D=g.valueOrDefault(z.filteringFunction,g.returnTrue);var C;var B=D(E);if(B===true){C=E}else{if(B===false){C=[]}else{if(B instanceof Array){C=B}else{C=[B]}}}var A=g.toDictionary(C,function(H){return H.id});var v=g([]);var G=g([]);for(var x=0;x<E.length;x++){var u=E[x];var w=A[u.id]!==undefined;var F=u.$wrapper;if(!F){F=u.$item}F.toggleClass("state-filtered",w);if(F){u.$item.toggleClass("state-filtered",w)}if(y.filteringBehaviour===ItemsListFilteringBehaviour.HideItems){F.toggleDisplayed(w,"ItemsListFiltering")}else{F.toggleDisplayed(true,"ItemsListFiltering");if(w){G.pushElements(F)}else{v.pushElements(F)}}u.isFiltered=w;if(w){z.filteredItems[u.id]=u;delete z.unfilteredItems[u.id]}else{z.unfilteredItems[u.id]=u;delete z.filteredItems[u.id]}}if(G.length>0){G.each(function(){y.insertionFunction(g(this),z)})}if(v.length>0){v.detach()}z.filteredItemsChangeEvent.fire(z,z.filteredItems)}function p(y,G,B){var I=y.options;B=g.valueOrDefault(B,false);y.itemsChangingBatch.start();var v;if(I.idFunction){v=I.idFunction.call(G,G)}else{v=g.uniqueID()}var x;var H;if(y.items[v]!==undefined){x=y.items[v];var C=x.item;x.item=G;y.notifyItemUpdated(x,C);H=false}else{x={data:{},itemsList:y,itemRemovingEvent:SimpleEvent.create(),bindingsCollection:SimpleEvent.createBindingsCollection(),onItemRemoving:function(J){x.itemRemovingEvent.one(J);x.bindingsCollection.unbindAll()},unbindOnRemoving:function(J){x.onItemRemoving(function(){J.unbind()})},replaceData:function(K){var J=x.item;x.item=K;y.notifyItemUpdated(x,J)},invalidateItem:function(){y.notifyItemUpdated(x,x.item)}};var E=I.getTemplateItem.call(G,G);if(I.additionalTemplateFields){E=g.extend({},E,I.additionalTemplateFields)}x.templateItem=E;var F=I.template;var A=I.itemCreationFunction;var D;if(A!==undefined){D=A.call(G,G,x)}else{if(F&&g.isFunction(F)){F=F(E)}D=g.useTemplate(F,E)}D.addClass("items-list-item").addClass(I.listItemClass).addClass("items-list-"+y.id);var z=undefined;var u=y.itemWrapperTemplate;if(u){z=g.useTemplate(u).addDisplayingStates();var w=g(".wrapped-item-container",z);if(w.length>0){D.appendTo(w)}else{D.appendTo(z)}}g.extend(x,{isItemsListItem:true,id:v,$item:D,$wrapper:z,isFiltered:true,item:G});y.items[v]=x;I.insertionFunction(z?z:D,y);if(!B){h(y,x)}H=true}y.itemsChangingBatch.finish();return{listItem:x,isNewItem:H}}function h(u,w){var v=w.$item;v.addDisplayingStates();v.data("items-list-item",w);u.options.itemAddedCallback.call(w,w);u.itemAddedEvent.fire(u,w);u.notifyItemUpdated(w)}function l(v,u){return d(v,q(v,u))}function q(v,u){u=g.makeArray(u);var y=[];for(var x=0;x<u.length;x++){var w=u[x];if(g.isFunction(w)){g.merge(y,g.grep(g.getValues(v.items),function(A){return w(A)}))}else{var z;if(typeof w==="string"||typeof w==="number"||typeof w==="boolean"){z=v.items[w]}else{if(g.isPlainObject(w)){z=w}else{z=w.data("items-list-item")}}if(z!==undefined){y.push(z)}}}return y}function d(u,w){u.itemsRemovingEvent.fire(u,w);for(var v=0;v<w.length;v++){j(u,w[v])}return w}function j(u,y){var v=u.options;v.itemRemovingCallback.call(y,y);u.itemRemovingEvent.fire(y,y);y.itemRemovingEvent.fire(y,y);y.isRemoved=true;var w=y.$wrapper;if(w){w.remove()}else{y.$item.remove()}var x=y.id;delete u.items[x];delete u.filteredItems[x];delete u.unfilteredItems[x]}function m(u){return d(u,g.getValues(u.items))}function b(y,A,C){var D;var z=y.options.idFunction;if(z){var B={};for(var x=0;x<A.length;x++){var E=A[x];B[z.call(E,E)]=true}var w=[];for(var v in y.items){if(B[v]===undefined){w.push(v)}}D=l(y,w)}else{D=m(y)}var u=k(y,A,C);t(y);if(D.length>0){y.itemsRemovedEvent.fire(y,D)}return u}function k(x,y,z){var D=x.options;var v=D.insertionFilter;var u=[];var C=[];g.each(y,function(E,F){if(v(F)&&(!z||z.call(F,F))){u.push(p(x,F,true))}});for(var w=0;w<u.length;w++){var B=u[w];var A=B.listItem;if(B.isNewItem){h(x,A)}C.push(A)}return C}function f(v){var u=v.isEmpty();v.isEmptyFlag.setValue(u);v.$element.toggleClass("state-empty",u).toggleClass("state-non-empty",!u);var w=v.options.emptyListTemplate;if(w!==undefined){if(!u&&v.$emptyListElement){v.$emptyListElement.remove();v.$emptyListElement=undefined}if(u&&!v.$emptyListElement){if(g.isFunction(w)){w=w()}if(typeof w==="string"){v.$emptyListElement=g(w)}else{if(g.isPlainObject(w)){v.$emptyListElement=g.useTemplate(w)}else{v.$emptyListElement=w}}v.$emptyListElement.appendTo(v.$element)}}}function n(u){f(u);c(u);u.itemsCount.setValue(g.count(u.filteredItems));u.options.itemsChangedCallback();u.itemsChangingBatch.whenFinished(function(){u.itemsChangedEvent.fire()},u.itemsChangedEvent.id)}function c(u){var v=u.getScrollingController();if(v){v.refresh();if(u.scrollBar){u.scrollBar.refresh()}}}})(jQuery);var OrderingType={Ascending:1,Descending:2};(function(){$.addItemsListExtension(function(b){return{addOrderingSupport:function(c){c=$.extend({itemIndexChangedCallback:$.noop,orderingType:OrderingType.Ascending,comparer:undefined,orderingValueSelector:function(d){return 0},notifyUpdateOnIndexChange:false},c);$.extend(b,{orderingSupportOptions:c,hasOrderingSupport:true,comparer:c.comparer,orderingValueSelector:c.orderingValueSelector,orderingType:c.orderingType,orderedItems:[],autoHtmlSortingEnabled:true,itemsReorderedEvent:SimpleEvent.create(),toggleAutoHtmlSorting:function(d){b.autoHtmlSortingEnabled=d},setOrderingType:function(d){if(b.orderingType!==d){b.orderingType=d;a(b)}},reorder:function(){a(b)}});b.itemsChangedEvent.bind(function(){a(b)});a(b);b.extensionActivated.fire(b,"Ordering");return b}}});function a(k){var l=k.orderingSupportOptions;if(k.orderingType===OrderingType.Ascending){k.orderedItems=$.getValues(k.items).orderBy(k.orderingValueSelector,k.comparer)}else{k.orderedItems=$.getValues(k.items).orderByDesc(k.orderingValueSelector,k.comparer)}var j=[];var g=k.orderedItems;for(var f=0;f<g.length;f++){var b=g[f];if(b.index!==f){b.index=f;j.push(b)}}if(k.autoHtmlSortingEnabled){var h=$([]);for(var f=0;f<g.length;f++){var d;var c=g[f];if(c.$wrapper){d=c.$wrapper}else{d=c.$item}h.pushElements(d)}h.applyDOMOrder()}k.itemsReorderedEvent.fire();for(var f=0;f<j.length;f++){var b=j[f];l.itemIndexChangedCallback.call(b,b,b.index);if(l.notifyUpdateOnIndexChange){k.notifyItemUpdated(b)}}}})();(function(){$.addItemsListExtension(function(f){var a;var d;var b=false;var c=ObservableFlag.createConditionalNegative({valueChangeCallback:function(g){if(b&&!g){f.recalculateLayout()}}});return{addLayoutSupport:function(g){g=$.valueOrDefault(g,false);$.extend(f,{hasLayoutSupport:true,layoutRecalculated:SimpleEvent.create(),getLayout:function(){return a},setLayout:function(h){h=$.extend({recalculateOnItemsChange:false,initialize:$.noop,release:$.noop,recalculateLayout:$.noop,supportInteractiveSorting:undefined,isInitialized:false},h);if(a){a.release(f);h.isInitialized=false}if(d){d.disposeAll()}a=h;d=SimpleEvent.createEventListenersGroup();if(a){h.initialize(f);h.isInitialized=true;if(h.recalculateOnItemsChange){SimpleEvent.createEventListener(f.itemsChangedEvent,function(){f.recalculateLayout()}).activate().addToGroup(d)}f.recalculateLayout()}return f},recalculateLayout:function(){if(a){if(c.isTrue()){b=true}else{b=false;a.recalculateLayout(f);f.layoutRecalculated.fire();f.refreshScrolling()}}return f},releaseLayout:function(){f.setLayout(undefined)}});if(g){f.postponeLayoutUpdate()}return f},postponeLayoutUpdate:function(g){c.setTrue(g);return f},unPostponeLayoutUpdate:function(g){c.setFalse(g);return f}}})})();var ItemsListLayoutsFactory=new function(){this.createSingleRowSpread=function(b){b=$.extend({separatorClass:undefined,horizontalSpacing:0},b);var a=b.separatorClass;var c=b.horizontalSpacing;return{recalculateOnItemsChange:true,initialize:function(d){d.setItemWrapper({useTemplate:function(){var f=$("<span class='list-item-layout-wrapper vertically-centered positioned'><span class='wrapped-item-container block'></span></span>");if(a){$("<span class='single-row-spread-separator inline-block positioned-right'></span>").addClass(a).appendTo(f)}return f}})},release:function(d){d.removeItemWrappers()},recalculateLayout:function(g){var d=$.count(g.filteredItems);var f=g.getFilteredItemsElements();f.each(function(h){var j=g.getListItem($(this));var k=j.$wrapper;k.css("width",Math.floor(100/d)+"%");if(c!==0){$(".wrapped-item-container",k).css({paddingLeft:h>0?Math.floor(c/2):0,paddingRight:h<d-1?Math.floor(c/2):0})}if(a){$(".single-row-spread-separator",j.$wrapper).quickToggle(h<d-1)}})}}};this.createUniformSpread=function(c){c=$.extend({itemWidth:100,spreadOneRow:false,widthChangeCallback:$.noop,margin:10,wrapperClass:"content-centered"},c);var d=c.wrapperClass;var g=c.itemWidth;var b=c.spreadOneRow;var a=c.widthChangeCallback;var f=c.margin;return{recalculateOnItemsChange:true,initialize:function(h){h.setItemWrapper({useTemplate:function(){return $("<span class='list-item-layout-wrapper vertically-centered'></span>").addClass(d)}})},release:function(h){h.removeItemWrappers()},recalculateLayout:function(l){var k=l.$element.width();var i=Math.floor((k+f)/(g+f));var h=$.count(l.filteredItems);var j;if(h<=i&&!b){j=g}else{j=k/Math.min(h,i)-f}l.getFilteredItemsElements().each(function(m){var n=l.getListItem($(this));n.$wrapper.css("width",j).css("margin-right",(m+1)%i===0?0:f);a.call(n,n,j)})}}};this.createUnifiedSizes=function(b){b=$.extend({unifyWidth:false,unifyHeight:false},b);var c=b.unifyWidth;var a=b.unifyHeight;return{recalculateOnItemsChange:true,recalculateLayout:function(d){d.getItemsElements().filter(":not(.state-hidden)").unifySize({unifyWidth:c,unifyHeight:a})},release:function(f){var d={};if(c){d.width=""}if(a){d.height=""}f.getItemsElements().css(d)}}};this.createTreeLayout=function(d){d=$.extend({childrenFunction:function(i,h){return[]}},d);var b=d.childrenFunction;var a;var c=SimpleEvent.createBindingsCollection();return{recalculateOnItemsChange:true,initialize:function(h){h.setFilteringBehaviour(ItemsListFilteringBehaviour.DetachItems);a=TreeBuilder.createTree({itemStyleCallback:function(i,j){if(j>0){return"padding-left: {0}px;".format(j*20)}return undefined}}).appendTo(h.$element);h.itemAddedEvent.bind(function(i){g(i)}).addToCollection(c);$.each(h.items,function(j,k){g(k)})},recalculateLayout:function(i){var h=f(i);a.updateStructure(h)},release:function(h){if(a){c.unbindAll();a.$element.replaceWith($(".items-list-item",h.$element))}}};function g(h){h.treeNode=TreeBuilder.createTreeNode({content:h.$item})}function f(o){$.each(o.items,function(r,s){s.treeNode.children=[]});var l=b(o,null);var m=$.merge([],l);while(m.length>0){var n=m.pop();var k=n.treeNode;var p=k.children;var q=b(o,n);for(var h=0;h<q.length;h++){var j=q[h];p.push(j.treeNode);m.push(j)}}return $.map(l,function(i){return i.treeNode})}};this.createTableLayout=function(a){a=$.extend({columns:2,isUniform:true,inlineCellContent:false,className:""},a);var g;var c=a.columns;var b=a.isUniform;var f=a.inlineCellContent;var d=a.className;return{recalculateOnItemsChange:true,initialize:function(h){h.setFilteringBehaviour(ItemsListFilteringBehaviour.DetachItems)},recalculateLayout:function(k){var h=k.itemsCount.getValue();var i=Math.ceil(h/c);if(!g||g.countRows()!==i){var j=g;g=LayoutHelper.createTable({className:d,numberOfColumns:c,numberOfRows:i,isUniform:b,inlineCellContent:f});g.distributeItems($(".items-list-item",k.$element));if(j){j.$element.remove()}g.$element.appendTo(k.$element)}else{g.distributeItems($(".items-list-item",k.$element))}},release:function(h){if(g){g.$element.replaceWith($(".items-list-item",h.$element))}}}};this.createMarginExtender=function(a){a=$.extend({minMargin:10,wrapperClass:undefined},a);var b=a.wrapperClass;var c=a.minMargin;return{recalculateOnItemsChange:true,initialize:function(d){d.setItemWrapper({useTemplate:function(){return $("<span class='vertically-centered'></span>").addClass(b)}})},release:function(d){d.removeItemWrappers()},recalculateLayout:function(l){var m=l.itemsCount.getValue();if(m>0){var h=l.$element;var k=h.children();var d=h.width();var i=k.first().width();var j=Math.floor((d+c)/(i+c));var g=i*j;var f=(d-g)/(j-1);k.each(function(n){if((n+1)%j!==0){$(this).css("margin-right",f)}else{$(this).css("margin-right","")}})}}}};this.createHierarchyLayout=function(r){r=$.extend({hierarchyCollection:undefined,hierarchyLevelChange:$.noop},r);var b;var f;var m=r.hierarchyCollection;var g=undefined;return{recalculateOnItemsChange:true,setHierarchyCollection:function(s){if(this.isInitialized){throw new Error("can't change hierarchy when initialized")}m=s},initialize:function(u){b=SimpleEvent.createBindingsCollection();u.setFilteringBehaviour(ItemsListFilteringBehaviour.DetachItems);u.setItemWrapper({useTemplate:function(){return $('<div class="hierarchy-item"><div class="hierarchy-item-content"><div class="hierarchy-item-container wrapped-item-container"></div><div class="hierarchy-children-container"></div></div></div>')}});function s(){g=u.autoHtmlSortingEnabled;u.toggleAutoHtmlSorting(false);u.itemsReorderedEvent.bind(function(){j(u.orderedItems)}).addToCollection(b)}if(!u.hasOrderingSupport){var t=false;u.extensionActivated.bind(function(v){if(!t&&v==="Ordering"){t=true;s()}}).addToCollection(b)}else{s()}u.itemRemovingEvent.bind(function(w){var v=n(w.$wrapper).children();v.detach()}).addToCollection(b);f=SimpleEvent.createEventListener([m.hierarchyUpdateEvent],function(){u.recalculateLayout()});f.activate()},recalculateLayout:function(s){i(s,m.getHierarchies(),m.getRootIds(),undefined,0);j(s.hasOrderingSupport?s.orderedItems:s.items)},release:function(s){b.unbindAll();f.deactivate();s.removeItemWrappers();if(s.hasOrderingSupport){s.toggleAutoHtmlSorting(g)}},supportInteractiveSorting:function(v,t){t=$.extend({beforeOrderChangeCallback:$.noop,afterOrderChangeCallback:$.noop,interactiveBehaviourOptions:undefined},t);var s=$.extend({itemSelector:".hierarchy-item",orderChangedCallback:$.noop,isHierarchy:true,verticalThreshold:function(){var w=$.findFirst(v.items,$.returnTrue);return w!==undefined?w.$item.outerHeight(true):0}},t.interactiveBehaviourOptions);s.orderChangedCallback=$.hookAfterMethod(s.orderChangedCallback,function u(A){t.beforeOrderChangeCallback();var w=q(A).data("items-list-item");var z=l(A).data("items-list-item");var B=0;var x=true;if(z){B=z.index;if(w.index>B){B++}else{x=false}}d(w);var y=a(A);var D=y.length;if(w.index!=B){if(x){for(var C=B;C<w.index;C++){v.orderedItems[C].sortingIndex+=D+1}w.sortingIndex=v.orderedItems[B].sortingIndex-1-D}else{for(var C=w.index+D+1;C<=B;C++){v.orderedItems[C].sortingIndex-=D+1}w.sortingIndex=v.orderedItems[B].sortingIndex+1}for(var C=1;C<=D;C++){v.orderedItems[w.index+C].sortingIndex=w.sortingIndex+C}v.reorder()}t.afterOrderChangeCallback()});v.$element.makeDraggableSorting(s)}};function d(s){var x=s.id;var u=p(s.$wrapper).data("items-list-item");var w=u?u.id:undefined;if(s.hierarchyLevel!==undefined){s.$wrapper.removeClass("hierarchy-level-"+s.hierarchyLevel)}s.hierarchyLevel=u?u.hierarchyLevel+1:0;s.$wrapper.addClass("hierarchy-level-"+s.hierarchyLevel);var v=s.hierarchyParent;if(v){var t=a(v.$wrapper);v.$wrapper.toggleClass("hierarchy-has-children",t.length>0)}if(u){s.hierarchyParent=u;u.$wrapper.addClass("hierarchy-has-children")}else{delete s.hierarchyParent}r.hierarchyLevelChange(s);f.deactivate();m.setParent(x,w);f.activate()}function i(x,t,u,w,s){var v=w?n(w.$wrapper):x.$element;$.each(u,function(B,C){var y=x.items[C];if(y.hierarchyLevel!==undefined){y.$wrapper.removeClass("hierarchy-level-"+y.hierarchyLevel)}y.hierarchyLevel=s;y.$wrapper.addClass("hierarchy-level-"+y.hierarchyLevel).removeClass("hierarchy-has-children");if(w){y.hierarchyParent=w;w.$wrapper.addClass("hierarchy-has-children")}else{delete y.hierarchyParent}var z=y.$wrapper;z.appendTo(v);var A=t[C];if(A){i(x,t,A,y,s+1)}r.hierarchyLevelChange(y)})}function c(s){var u=$([]);for(var t=0;t<s.length;t++){u.pushElements(s[t].$wrapper)}u.applyDOMOrder()}function h(t,s){return $.grep(t,function(u){return $.oneOfValues(u.id.toString(),s)})}function j(t){c(h(t,m.getRootIds()));var s=m.getHierarchies();$.each(s,function(v,u){c(h(t,u))})}function q(s){return s.find("> .hierarchy-item-content > .hierarchy-item-container > .items-list-item")}function k(s){return s.findAndSelf(".items-list-item").last()}function l(t){var s=t.prev(".hierarchy-item");if(s.length>0){return k(s)}return q(o(t))}function p(s){return q(o(s))}function o(s){return s.parent().closest(".hierarchy-item")}function n(s){return s.find("> .hierarchy-item-content > .hierarchy-children-container")}function a(s){return n(s).find(".items-list-item")}}}();function HierarchyCollection(l){l=$.extend({ids:undefined,hierarchies:undefined},l);var h=this;var j={};var c={};this.id=$.weakID();this.hierarchyUpdateEvent=SimpleEvent.create();function d(o,p){var n=c[o];n.parentId=p;if(p===undefined){j[o]=n}else{var m=c[p];if(m){m.children[o]=o}else{throw Error("unsupported")}}}function a(o){var n=c[o];var p=n.parentId;n.parentId=undefined;if(p===undefined){delete j[o]}else{var m=c[p].children;delete m[o]}}function g(o,m,n){if(c[o]){return}c[o]={id:o,parentId:n,children:m};d(o,n)}this.addIds=function(n,o){if(n===undefined){return}n=$.makeArray(n);var m=[];$.each(n,function(p,q){if(!c[q]){g(q,{},o)}})};function i(p,o){var m=c[p];if(m){var n=m.parentId;if(o!==n){a(p);d(p,o);return true}}else{throw Error("unsupported")}return false}this.setParent=function(n,m){if(i(n,m)){h.hierarchyUpdateEvent.fire()}};this.getRootIds=function(n){n=n?n:$.returnTrue;var m=[];$.each(j,function(o){if(n(o)){m.push(o)}});return m};this.getHierarchies=function(n){n=n?n:$.returnTrue;var m={};$.each(c,function(p,o){if(n(p)&&!$.isEmptyObject(o.children)){m[p]=$.getKeys(o.children)}});return m};this.clear=function(){j={};c={}};this.removeIds=function(n){if(n===undefined){return}n=$.makeArray(n);var m=[];$.each(n,function(o,q){var p=c[q];if(p){$.each(p.children,function(r){h.setParent(r,p.parentId)});a(q);delete c[q]}})};function b(n){n=$.valueOrDefault(n,{});var r=h.getHierarchies();var o=$.getKeys(r);var m=$.getKeys(n);m=$.grep(m,function(s){return n[s]&&n[s].length>0});if(o.length!==m.length){return false}for(var q=0;q<o.length;q++){var p=o[q];if(!$.defaultArraySetsEqualityComparer(r[p],n[p])){return false}}return true}function f(m,n){h.clear();h.addIds(n);$.each(m,function(p,o){$.each(o,function(q,r){i(r,p)})});h.hierarchyUpdateEvent.fire()}this.setHierarchies=function(m){if(!b(m)){f(m,$.getKeys(c))}};this.updateHierarchy=function(m,n){if(!b(m)||!$.defaultArraySetsEqualityComparer(n,$.getKeys(c))){f(m,n)}};this.getIds=function(){return c};this.hasHierarchy=function(){return $.count(c)>$.count(j)};this.hasChildren=function(n){var m=c[n];return m&&!$.isEmptyObject(m.children)};this.clone=function(){return new HierarchyCollection({ids:$.getKeys(c),hierarchies:this.getHierarchies()})};function k(n,m,o){$.each(m.children,function(p){n.addIds(p,o);k(n,c[p],p)})}this.createSubHierarchy=function(m){var n=c[m];if(n){var o=new HierarchyCollection();k(o,n);return o}return undefined};if(l.hierarchies&&l.ids){f(l.hierarchies,l.ids)}else{if(l.ids){this.addIds(l.ids)}}}function RemoteSet(b){var d=this;var c={};var a=$.extend({fetchingFunction:undefined,insertionFunction:undefined,removingFunction:undefined,updateFunction:undefined,idFunction:$.defaultIdFunction,converter:{setterMapper:$.makeArray,getterMapper:$.makeArray}},b);d.itemsAddedEvent=SimpleEvent.create();d.itemAddedEvent=SimpleEvent.create();d.itemsRemovedEvent=SimpleEvent.create();d.itemRemovingEvent=SimpleEvent.create();d.itemsUpdatedEvent=SimpleEvent.create();d.itemUpdatedEvent=SimpleEvent.create();d.supportsDelayedFetching=$.returnFalse;d.updateBatch=OperationsBatch.create();d.getIDFunction=function(){return a.idFunction};d.getItems=function(f,i,h,g){a.fetchingFunction(f,function(j){j=a.converter.getterMapper(j);var k=[];$.each(j,function(l,m){var n=a.idFunction.call(m,m);c[n]=m;k.push(m)});i({fetchedItems:k,error:null})},h,g)};d.getItemsValues=function(){return $.getValues(c)};d.removeItems=function(f,i,h,g){g=$.extend({fireEvents:true},g);a.removingFunction(f,function(j){d.updateBatch.begin();f=$.makeArray(f);j=$.makeArray(j);var l=[];$.each(f,function(n,o){var m=j[n];if(m!==null){d.itemRemovingEvent.fire(d,c[o]);delete c[o]}else{l.push(o)}});var k=(l.length===0);if(g.fireEvents){d.itemsRemovedEvent.fire(d,j)}d.updateBatch.end();i({removedItems:j,failedItems:l,error:k?null:Exception.create(Exceptions.InnerException,"Some of the items couldn't be removed.")})},function(j){h({failedItems:f,error:j})},g)};d.saveItems=function(f,i,h,g){g=$.extend({fireEvents:true},g);f=a.converter.setterMapper(f);a.insertionFunction(f,function(l){d.updateBatch.begin();l=$.makeArray(l);var k=[];var m=[];var o=[];var n=[];$.each(f,function(q,s){var r=l[q];if(r!==null){var p=s.id===undefined;s.id=r;p?m.push(s):o.push(s);k.push(s);c[r]=s}else{n.push(s)}});var j=(n.length===0);if(g.fireEvents){d.itemsAddedEvent.fire(d,m);d.itemsUpdatedEvent.fire(d,o)}d.updateBatch.end();i({savedItems:k,failedItems:n,error:j?null:Exception.create(Exceptions.InnerException,"Some of the items couldn't be saved.")})},function(j){h({failedItems:f,error:j})},g)};d.clear=function(){var f=$.getKeys(c);c={};d.itemsRemovedEvent.fire(d,f)}}var SetView=new function(){this.create=function(c,n){var m=$.extend({filters:[],fields:[],sorts:[],onItemsFetchedCallback:$.noop},n);var j=new ObservableCollection();var f=c.getListInfo();var h=f.listId;var b=f.listName;var l=c.getSetObserver();var a=c.getFieldsConverter();if(f.fetchType===FetchType.Remote){}else{}var k=CollectionObserver.create(j);var d=FilterUtils.getFiltersCompositeFunction(m.filters,"filterFunction");var g={};$.extend(g,{viewChangedEvent:l.itemsChangedEvent,getItems:function(){return j.getItems()},postponeUpdates:function(){k.postponeUpdates()},unPostponeUpdates:function(){k.unPostponeUpdates()},updateItems:function(p){j.beginUpdate();var o=FilterUtils.filterItems(p,d,{notPassedIdFunction:$.defaultIdFunction});if(o.passed.length>0){j.put(o.passed)}if(o.notPassed.length>0){j.remove(o.notPassed)}j.endUpdate()},removeItems:function(o){j.remove(o)},fetchAllItems:function(p,o,q,r){ListsService.fetchAllListItems(h.getValue(),b,p,$.filterKeys(m.filters,"serverFilters"),m.sorts,i(o),q,r)},fetchItems:function(v,u,p,o,r,s){s=$.extend({instanceId:undefined},s);var q=i(o);if(s.instanceId&&(typeof DynamicPageElements!=="undefined")){var t=$.objectGet(DynamicPageElements,s.instanceId);if(t&&!t.isUsed){t.isUsed=true;q(t.content);return}}ListsService.fetchListItems(h.getValue(),b,p,$.filterKeys(m.filters,"serverFilters"),m.sorts,v,u,q,r,s)},clear:function(){},bindTo:function(o){CollectionUtils.connectObservableCollection(o,k)},unbindFrom:function(o){CollectionUtils.disconnectObservableCollection(o)}});return g;function i(o){return function(q){var p=a.getterMapper(q.items);j.syncrhonize(p);m.onItemsFetchedCallback(p);o({fetchedItems:p,totalCount:q.totalCount})}}}};var ControllersFactory=new function(){this.create=function(b){$.extendMissing(b,{activate:$.noop,deactivate:$.noop,initialize:$.noop,subControllersInfo:[]});var f=b.initialize;var h=b.activate;var a=b.deactivate;var g=b.subControllersInfo;var c=[];for(var d=0;d<g.length;d++){c.push($.extend({controller:undefined,activationArgs:[],deactivationArgs:[]},g[d]))}$.extend(b,{isInitialized:false,initialize:function(){if(!b.isInitialized){f()}for(var j=0;j<c.length;j++){var k=c[j];k.initialize.call(k.controller)}},activate:function(){b.initialize();h.apply(b,arguments);for(var j=0;j<c.length;j++){var k=c[j];k.controller.activate.apply(k.controller,k.activationArgs)}},deactivate:function(){a.apply(b,arguments);for(var j=0;j<c.length;j++){var k=c[j];k.controller.deactivate.apply(k.controller,k.deactivationArgs)}}});if(b.$element!==undefined){$.extend(b,{appendTo:function(i){b.$element.appendTo(i);return b}})}return b}}();var DictionaryUtils=new function(){this.equalByKeys=function(c,b){var a;for(a in c){if(b[a]===undefined){return false}}for(a in b){if(c[a]===undefined){return false}}};this.diffByKeys=function(g,d){var b=[];var f=[];var c=[];var a;for(a in g){if(d[a]===undefined){b.push(g[a])}else{c.push({leftValue:g[a],rightValue:d[a]})}}for(a in d){if(g[a]===undefined){f.push(d[a])}}return{leftOnly:b,rightOnly:f,both:c,equalByKeys:b.length===0&&f.length===0}}}();(function(a){a.mapToDictionary=function(b,g,f){g=a.valueOrDefault(g,a.identity);f=a.valueOrDefault(f,a.identity);var h={};for(var c=0;c<b.length;c++){var d=b[c];h[f(d)]=g(d,c)}return h};a.makeDictionary=function(b,g,c){g=a.valueOrDefault(g,"key");c=a.valueOrDefault(c,"value");var h={};for(var d=0;d<b.length;d++){var f=b[d];h[f[g]]=f[c]}return h};a.lookupAdd=function(f,c,d){var b=f[c];if(b===undefined){b=[];f[c]=b}b.push(d);return f};a.extractKeys=function(f,d){var g={};for(var c=0;c<d.length;c++){var b=d[c];g[b]=f[b]}return g};a.anyValue=function(f,b){for(var c in f){var d=f[c];if(b.call(d,d)){return true}}return false};a.allValues=function(f,b){for(var c in f){var d=f[c];if(!b.call(d,d)){return false}}return true};a.makeDictionaryFromKeys=function(d,b){var f={};for(var c=0;c<d.length;c++){f[d[c]]=b}return f};a.revertDictionary=function(d){var c={};for(var b in d){c[d[b]]=b}return c};a.getEntries=function(d){var b=[];for(var c in d){b.push({key:c,value:d[c]})}return b};a.findKey=function(g,d,f){f=a.valueOrDefault(f,a.referencesEqualityComparer);for(var b in g){if(g.hasOwnProperty(b)){var c=g[b];if(f(c,d)){return b}}}return undefined};a.getKeys=function(d,f){f=a.valueOrDefault(f,a.returnTrue);var c=[];for(var b in d){if(d.hasOwnProperty(b)&&f(d[b])){c.push(b)}}return c};a.getValues=function(d,f){f=a.valueOrDefault(f,a.returnTrue);var b=[];for(var c in d){if(d.hasOwnProperty(c)&&f(d[c])){b.push(d[c])}}return b};a.count=function(d,b){var c=0;if(b){for(var f in d){var g=d[f];if(b.call(g,g,f)){c++}}}else{a.each(d,function(h,i){c++})}return c};a.sortValues=function(j,f){var h={};for(var g=0;g<f.length;g++){h[f[g]]=g}var b=a.getEntries(j).orderBy(function(i){return h[i.key]});var d=a.getValues(j).orderBy(a.identity);var c={};for(var g=0;g<b.length;g++){c[b[g].key]=d[g]}return c};a.replaceKeys=function(f,d){if(!f){return f}var b={};c(f,b);return b;function c(j,i){for(var h in j){if(j.hasOwnProperty(h)){var g=h;if(h in d){g=d[h]}if(a.isPlainObject(j[h])){i[g]={};c(j[h],i[g])}else{i[g]=j[h]}}}}};a.replaceValuesKey=function(g,d,f){var b=a.extend(true,{},g);c(g,b);return b;function c(j,i){if(j.hasOwnProperty(d)){if(f[j[d]]){i[d]=f[j[d]]}}for(var h in j){if(h!==d&&a.isPlainObject(j[h])){c(j[h],i[h])}}}};a.replaceValuesKeyByFunction=function(h,f,g,c){if(!h){return h}var b=a.extend(true,{},h);d(h,b);return b;function d(k,j){if(k.hasOwnProperty(f)){if(g[k[f]]){j[f]=g[k[f]]}else{j[f]=c(f,k[f]);g[k[f]]=j[f]}}for(var i in k){if(i!==f&&a.isPlainObject(k[i])){d(k[i],j[i])}}}};a.mapArray=function(h,g,c){var f={};for(var b=0;b<h.length;b++){var d=h[b];f[c(d,b)]=g(d)}return f};a.mapDictionary=function(f,b){var d={};for(var c in f){d[c]=b(c,f[c])}return d};a.mapDictionaryKeys=function(f,b){var d={};for(var c in f){d[b(c)]=f[c]}return d};a.dictionaryFilter=function(g,c){var b={};for(var d in g){var f=g[d];if(c(f,d)){b[d]=f}}return b};a.toDictionary=function(){var g=arguments.length;var l=arguments[g-1];var k={};for(var c=0;c<g-1;c++){var b=arguments[c];for(var f=0;f<b.length;f++){var h=b[f];var d=l(h);k[d]=h}}return k};a.hasMoreThanOneKey=function(b){return a.hasNumberOfKeys(b,2)};a.hasNumberOfKeys=function(f,c){var d=0;for(var b in f){d++;if(d>=c){return true}}return false};a.containsOneOfKeys=function(f){var d=[];for(var b=1;b<arguments.length;b++){var c=arguments[b];if(a.isArray(c)){a.merge(d,c)}else{d.push(c)}}for(var b=0;b<d.length;b++){if(f[d[b]]!==undefined){return true}}return false};a.copyDictionaryValue=function(c,d,b){d[b]=c[b]};a.duplicateDitionary=function(f){var d={};for(var b in f){var c=f[b];if(a.isPlainObject(c)){d[b]=a.extend({},c)}else{d[b]=c}}return d};a.mergeDictionary=function(d,c){for(var b in c){d[b]=c[b]}return d};a.subtractDictionary=function(f,d){var b={};for(var c in f){if(d[c]===undefined){b[c]=f[c]}}return b};a.intersectDictionaries=function(f,d){var b={};for(var c in d){if(f[c]!==undefined){b[c]=d[c]}}return b};a.makeSet=function(b,f){var g={};f=a.valueOrDefault(f,a.identity);for(var c=0;c<b.length;c++){var d=b[c];g[f(d)]=d}return g};a.subtractSets=function(c,b,d){if(c instanceof Array){c=a.makeSet(c,d)}if(b instanceof Array){b=a.makeSet(b,d)}return a.getValues(a.subtractDictionary(c,b))};a.intersectSets=function(c,b,d){if(c instanceof Array){c=a.makeSet(c,d)}if(b instanceof Array){b=a.makeSet(b,d)}return a.getValues(a.intersectDictionaries(c,b))}})(jQuery);(function(c){function b(f,d){return f-d}function a(d){return function(g,f){return 0-d(g,f)}}c.numbersComparer=b;c.createArrayComparer=function(d){return function(g,f){for(var h=0;h<g.length&&h<f.length;h++){var j=d(g[h],f[h]);if(j!==0){return j}}return b(g.length,f.length)}};c.createPriorityComparer=function(h){var d={};var f=h.length;for(var g=0;g<f;g++){d[h[g]]=f-g}return function(l,k){var j=c.valueOrDefault(d[l],0);var i=c.valueOrDefault(d[k],0);return b(j,i)}};c.arrayDefaultComparer=c.createArrayComparer(b);c.stringsComparer=function(f,d){if(!f||!f){if(f===d){return 0}else{if(!f){return -1}else{return 1}}}else{var h=f.toLowerCase();var g=d.toLowerCase();if(h<g){return -1}else{if(h>g){return 1}}return 0}};Array.prototype.orderByDesc=function(f,d){if(d===undefined){d=b}return this.orderBy(f,a(d))};c.mergeSorted=function(g,u,n,k){u=c.valueOrDefault(u,c.identity);n=c.valueOrDefault(n,b);k=c.valueOrDefault(k,c.identity);var m,l,v,s,f;var t=[];var p=[];var d=[];var o=0;for(m=0;m<g.length;m++){var r=g[m];var h=[];for(l=0;l<r.length;l++){v=r[l];h.push({value:u.call(v,v,l),item:k.call(v,v,r)})}d.push(h);if(r.length>0){o++;p.push(0)}else{p.push(undefined)}}while(o>0){s=undefined;f=undefined;for(m=0;m<p.length;m++){var q=p[m];if(q!==undefined){v=d[m][q];if(f===undefined||n(v.value,f.value)<0){f=v;s=m}}}t.push(f.item);p[s]++;if(p[s]>=d[s].length){p[s]=undefined;o--}}return t};Array.prototype.orderBy=function(k,g){if(g===undefined){g=b}k=c.valueOrDefault(k,c.identity);var f;var d=this;var j=[];for(f=0;f<d.length;f++){var h=d[f];j.push({item:h,value:k.call(h,h,f)})}j.sort(function(l,i){return g(l.value,i.value)});for(f=0;f<d.length;f++){d[f]=j[f].item}return d};c.sortArray=function(h,f,d){var g=c.merge([],h);g.orderBy(f,d);return g};c.sortArrayDesc=function(h,f,d){var g=c.merge([],h);g.orderByDesc(f,d);return g};c.fn.orderBy=c.arrayFuncToJquery(Array.prototype.orderBy);c.fn.orderByDesc=c.arrayFuncToJquery(Array.prototype.orderByDesc);c.fn.applyDOMOrder=function(){for(var f=1;f<this.length;f++){var g=c(this[f]);var d=g.prev();if(d[0]!==this[f-1]){g.insertAfter(this[f-1])}}return this};c.fn.sortChildElements=function(d,g,m,k){if(g===undefined){g=true}var n=c(this).children().filter(d);var h=g?n.orderBy(m,k):n.orderByDesc(m,k);for(var j=1;j<h.length;j++){var l=c(h[j]);var f=l.prev();if(f[0]!==h[j-1]){l.insertAfter(h[j-1])}}}})(jQuery);var DateUtils=new function(){if(!Date.now){Date.now=function(){return new Date().getTime()}}var a=function(){var b=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,c=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,f=/[^-+\dA-Z]/g,d=function(h,g){h=String(h);g=g||2;while(h.length<g){h="0"+h}return h};return function(k,x,t){var i=a;if(arguments.length==1&&Object.prototype.toString.call(k)=="[object String]"&&!/\d/.test(k)){x=k;k=undefined}k=k?new Date(k):new Date;if(isNaN(k)){throw new SyntaxError("invalid date")}x=String(i.masks[x]||x||i.masks["default"]);if(x.slice(0,4)=="UTC:"){x=x.slice(4);t=true}var v=t?"getUTC":"get",p=k[v+"Date"](),g=k[v+"Day"](),l=k[v+"Month"](),r=k[v+"FullYear"](),u=k[v+"Hours"](),n=k[v+"Minutes"](),w=k[v+"Seconds"](),q=k[v+"Milliseconds"](),h=t?0:k.getTimezoneOffset(),j={d:p,dd:d(p),ddd:i.i18n.dayNames[g],dddd:i.i18n.dayNames[g+7],m:l+1,mm:d(l+1),mmm:i.i18n.monthNames[l],mmmm:i.i18n.monthNames[l+12],yy:String(r).slice(2),yyyy:r,h:u%12||12,hh:d(u%12||12),H:u,HH:d(u),M:n,MM:d(n),s:w,ss:d(w),l:d(q,3),L:d(q>99?Math.round(q/10):q),t:u<12?"a":"p",tt:u<12?"am":"pm",T:u<12?"A":"P",TT:u<12?"AM":"PM",Z:t?"UTC":(String(k).match(c)||[""]).pop().replace(f,""),o:(h>0?"-":"+")+d(Math.floor(Math.abs(h)/60)*100+Math.abs(h)%60,4),S:["th","st","nd","rd"][p%10>3?0:(p%100-p%10!=10)*p%10]};return x.replace(b,function(m){return m in j?j[m]:m.slice(1,m.length-1)})}}();a.masks={"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"};a.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]};this.formatDateMillis=function(d,b,c){return DateUtils.formatDate(new Date(d),b,c)};this.formatDateString=function(d,b,c){return DateUtils.formatDate(new Date(d),b,c)};this.formatDate=function(c,b,d){return a(c,b,d)};this.getCurrentDateString=function(b,c){return a(new Date(),b,c)};this.getDateStringMillis=function(b){return new Date(b).getTime()}}();var DateFormats=[{title:"12/31/2014 (mm/dd/yyyy)",format:"mm-dd-yyyy"},{title:"31/12/2014 (dd/mm/yyyy)",format:"dd-mm-yyyy"},{title:"2014/12/31 (yyyy/mm/dd)",format:"yyyy-mm-dd"},{title:"Dec 31, 2014 (mmm dd, yyyy)",format:"mmm dd-yyyy"},{title:"31 Dec, 2014 (dd mmm, yyyy)",format:"dd mmm-yyyy"},{title:"December 31, 2014 (mmmm dd, yyyy)",format:"mmmm dd-yyyy"},{title:"31 December, 2014 (dd mmmm, yyyy)",format:"dd mmmm-yyyy"},{title:"Friday, September 28, 2014 (dddd, mmmm dd, yyyy)",format:"dddd-mmmm dd-yyyy"},{title:"12 (mm)",format:"mm"},{title:"Dec (mmm)",format:"mmm"},{title:"December (mmmm)",format:"mmmm"},{title:"31 (dd)",format:"dd"},{title:"Sun (ddd)",format:"ddd"},{title:"Sunday (dddd)",format:"dddd"},{title:"2014 (yyyy)",format:"yyyy"}];var DateSeparators=[{title:"/",value:"/"},{title:".",value:"."},{title:"-",value:"-"},{title:",",value:", "}];(function(k,d){if(k.fn.dotdotdot){return}k.fn.dotdotdot=function(y){if(this.length==0){k.fn.dotdotdot.debug('No element found for "'+this.selector+'".');return this}if(this.length>1){return this.each(function(){k(this).dotdotdot(y)})}var u=this;if(u.data("dotdotdot")){u.trigger("destroy.dot")}u.data("dotdotdot-style",u.attr("style")||"");u.css("word-wrap","break-word");if(u.css("white-space")==="nowrap"){u.css("white-space","normal")}u.bind_events=function(){u.bind("update.dot",function(B,D){B.preventDefault();B.stopPropagation();if(k.isFunction(w.height)){w.maxHeight=w.height()}else{w.maxHeight=(typeof w.height=="number")?w.height:r(u)}w.maxHeight+=w.tolerance;if(k.isFunction(w.ignoredHeight)){w.minHeight=w.ignoredHeight()}else{w.minHeight=(typeof w.ignoredHeight=="number")?w.ignoredHeight:0}if(typeof D!="undefined"){if(typeof D=="string"||D instanceof HTMLElement){D=k("<div />").append(D).contents()}if(D instanceof k){z=D}}v=u.wrapInner('<div class="dotdotdot" />').children();v.contents().detach().end().append(z.clone(true)).find("br").replaceWith("<br />").end().css({height:"auto",width:"auto",border:"none",padding:0,margin:0});var C=false,A=false;if(t.afterElement){C=t.afterElement.clone(true);C.show();t.afterElement.detach()}if(n(v,w)){if(w.wrap=="children"){A=c(v,w,C)}else{A=p(v,u,v,w,C)}}v.replaceWith(v.contents());v=null;if(k.isFunction(w.callback)){w.callback.call(u[0],A,z)}t.isTruncated=A;return A}).bind("isTruncated.dot",function(B,A){B.preventDefault();B.stopPropagation();if(typeof A=="function"){A.call(u[0],t.isTruncated)}return t.isTruncated}).bind("originalContent.dot",function(B,A){B.preventDefault();B.stopPropagation();if(typeof A=="function"){A.call(u[0],z)}return z}).bind("destroy.dot",function(A){A.preventDefault();A.stopPropagation();u.unwatch().unbind_events().contents().detach().end().append(z).attr("style",u.data("dotdotdot-style")||"").data("dotdotdot",false)});return u};u.unbind_events=function(){u.unbind(".dot");return u};u.watch=function(){u.unwatch();if(w.watch=="window"){var C=k(window),B=C.width(),A=C.height();C.bind("resize.dot"+t.dotId,function(){if(B!=C.width()||A!=C.height()||!w.windowResizeFix){B=C.width();A=C.height();if(s){clearInterval(s)}if(u.is(":visible")){s=setTimeout(function(){u.trigger("update.dot")},100)}}})}else{x=m(u);s=setInterval(function(){if(u.is(":visible")){var D=m(u);if(x.width!=D.width||x.height!=D.height){u.trigger("update.dot");x=D}}},500)}return u};u.unwatch=function(){k(window).unbind("resize.dot"+t.dotId);if(s){clearInterval(s)}return u};var z=u.contents(),w=k.extend(true,{},k.fn.dotdotdot.defaults,y),t={},x={},s=null,v=null;if(!(w.lastCharacter.remove instanceof Array)){w.lastCharacter.remove=k.fn.dotdotdot.defaultArrays.lastCharacter.remove}if(!(w.lastCharacter.noEllipsis instanceof Array)){w.lastCharacter.noEllipsis=k.fn.dotdotdot.defaultArrays.lastCharacter.noEllipsis}t.afterElement=b(w.after,u);t.isTruncated=false;t.dotId=o++;u.data("dotdotdot",true).bind_events().trigger("update.dot");if(w.watch){u.watch()}return u};k.fn.dotdotdot.defaults={ellipsis:"...",wrap:"word",fallbackToLetter:true,lastCharacter:{},tolerance:0,callback:null,after:null,height:null,watch:false,windowResizeFix:true};k.fn.dotdotdot.defaultArrays={lastCharacter:{remove:[" ","\u3000",",",";",".","!","?"],noEllipsis:[]}};k.fn.dotdotdot.debug=function(s){};var o=1;function c(v,z,y){var x=v.children(),s=false;v.empty();for(var u=0,t=x.length;u<t;u++){var w=x.eq(u);v.append(w);if(y){v.append(y)}if(n(v,z)){w.remove();s=true;break}else{if(y){y.detach()}}}return s}function p(t,u,z,y,x){var s=false;var w="table, thead, tbody, tfoot, tr, col, colgroup, object, embed, param, ol, ul, dl, blockquote, select, optgroup, option, textarea, script, style";var v="script, .dotdotdot-keep";t.contents().detach().each(function(){var B=this,A=k(B);if(typeof B=="undefined"||(B.nodeType==3&&k.trim(B.data).length==0)){return true}else{if(A.is(v)){t.append(A)}else{if(s){return true}else{t.append(A);if(x){t[t.is(w)?"after":"append"](x)}if(n(z,y)){if(B.nodeType==3){s=f(A,u,z,y,x)}else{s=p(A,u,z,y,x)}if(!s){A.detach();s=true}}if(!s){if(x){x.detach()}}}}}});return s}function f(u,w,H,x,t){var E=u[0];if(!E){return false}var A=j(E),s=(A.indexOf(" ")!==-1)?" ":"\u3000",C=(x.wrap=="letter")?"":s,F=A.split(C),B=-1,I=-1,D=0,v=F.length-1;if(x.fallbackToLetter&&D==0&&v==0){C="";F=A.split(C);v=F.length-1}while(D<=v&&!(D==0&&v==0)){var y=Math.floor((D+v)/2);if(y==I){break}I=y;a(E,F.slice(0,I+1).join(C)+x.ellipsis);if(!n(H,x)){B=I;D=I}else{v=I;if(x.fallbackToLetter&&D==0&&v==0){C="";F=F[0].split(C);B=-1;I=-1;D=0;v=F.length-1}}}if(B!=-1&&!(F.length==1&&F[0].length==0)){A=h(F.slice(0,B+1).join(C),x);a(E,A)}else{var z=u.parent();if(z.contents().filter(function(){return this.nodeType===3}).length<=1){return true}u.detach();var G=(t&&t.closest(z).length)?t.length:0;if(z.contents().length>G){E=g(z.contents().eq(-1-G),w)}else{E=g(z,w,true);if(!G){z.detach()}}if(E){A=h(j(E),x);a(E,A);if(n(H,x)){f(k(E),w,H,x,t)}if(G&&t){k(E).parent().append(t)}}}return true}function n(u,t){var s=u.innerHeight();return s>t.maxHeight&&s>t.minHeight}function h(s,t){while(k.inArray(s.slice(-1),t.lastCharacter.remove)>-1){s=s.slice(0,-1)}if(k.inArray(s.slice(-1),t.lastCharacter.noEllipsis)<0){s+=t.ellipsis}return s}function m(s){return{width:s.innerWidth(),height:s.innerHeight()}}function a(t,s){if(t.innerText){t.innerText=s}else{if(t.nodeValue){t.nodeValue=s}else{if(t.textContent){t.textContent=s}}}}function j(s){if(s.innerText){return s.innerText}else{if(s.nodeValue){return s.nodeValue}else{if(s.textContent){return s.textContent}else{return""}}}}function l(s){do{s=s.previousSibling}while(s&&s.nodeType!==1&&s.nodeType!==3);return s}function g(t,w,s){var v=t&&t[0],u;if(v){if(!s){if(v.nodeType===3){return v}if(k.trim(t.text())){return g(t.contents().last(),w)}}u=l(v);while(!u){t=t.parent();if(t.is(w)||!t.length){return false}u=l(t[0])}if(u){return g(k(u),w)}}return false}function b(s,t){if(!s){return false}if(typeof s==="string"){s=k(s,t);return(s.length)?s:false}return !s.jquery?false:s}function r(v){var w=v.innerHeight(),u=["paddingTop","paddingBottom"];for(var x=0,t=u.length;x<t;x++){var s=parseInt(v.css(u[x]),10);if(isNaN(s)){s=0}w-=s}return w}var q=k.fn.html;k.fn.html=function(s){if(s!=d&&!k.isFunction(s)&&this.data("dotdotdot")){return this.trigger("update",[s])}return q.apply(this,arguments)};var i=k.fn.text;k.fn.text=function(s){if(s!=d&&!k.isFunction(s)&&this.data("dotdotdot")){s=k("<div />").text(s).html();return this.trigger("update",[s])}return i.apply(this,arguments)}})(jQuery);(function(a){a.arraysEqual=function(d,b,c){c=a.extend({valueFunction:a.identity,equalityComparer:a.referencesEqualityComparer},c);var h=c.valueFunction;var g=c.equalityComparer;if(!d||!b){return d===b}if(d.length!==b.length){return false}for(var f=0;f<d.length;f++){if(!g(h(d[f]),h(b[f]))){return false}}return true};a.reverseArray=function(b,c){c=a.valueOrDefault(c,a.identity);var f=[];for(var d=b.length-1;d>=0;d--){f.push(c(b[d]))}return f};a.flattenStructure=function(h,o){o=a.extend({subTreeOpener:undefined,subTreeCloser:undefined,childrenGetter:function(i){return i.children}},o);var f=o.subTreeOpener;var k=o.subTreeCloser;var m=o.childrenGetter;var j,n;var d=[];var g=[];for(j=h.length-1;j>=0;j--){d.push(h[j])}var b={};var l={};while(d.length>0){n=d.pop();g.push(n);if(n!==l){var c=m(n);if(c&&c.length>0){if(f!==undefined){g.push(b)}if(k!==undefined){d.push(l)}for(j=c.length-1;j>=0;j--){d.push(c[j])}}}}if(f!==undefined||k!==undefined){for(j=0;j<g.length;j++){n=g[j];if(n===b){g[j]=f}if(n===l){g[j]=k}}}return g};a.findDuplications=function(c,b){return a.grep(a.countItems(c,b),function(d){return d.count>1})};a.getInValidItems=function(d,c){var b=[];c=c?c:a.returnTrue;a.each(d,function(f,g){var h=c(g);if(!h){b.push(g)}});return b};a.countItems=function(d,c){var b={};a.each(d,function(g,h){var j=c(h);var f=b[j];if(!f){f={item:h,count:1,value:j};b[j]=f}else{f.count++}});return a.getValues(b)};a.oneOfValues=function(c,b){return a.inArray(c,b)>=0};a.removeSortedArrayDuplicates=function(b){var f=[];for(var d=0;d<b.length;d++){var g=b[d];var c=b[d+1];if(g!==c){f.push(g)}}return f};a.binarySearch=function(b,h){var f=0;var g=b.length-1;var c;var d;while(f<=g){c=(f+g)/2|0;d=b[c];if(d<h){f=c+1}else{if(d>h){g=c-1}else{return c}}}return -1};a.binarySearchGreater=function(c,g){var b=0,f=c.length;while(b!==f){var d=Math.floor((b+f)/2);if(c[d]<=g){b=d+1}else{f=d}}if(b>=c.length){return -1}return b};a.binarySearchLower=function(c,g){var b=0,f=c.length;while(b!==f){var d=Math.ceil((b+f)/2);if(c[d]>=g){f=d-1}else{b=d}}if(b<0){return -1}return b};a.binaryRangeSearch=function(b,g,f){var d=a.binarySearchGreater(b,g-1);if(d!==-1){var c=a.binarySearchLower(b,f+1);if(c!==-1){return b.slice(d,c+1)}else{return[]}}else{return[]}};a.binarySearchClosest=function(b,h,d){if(d===undefined){d=false}var i=b[a.binarySearchGreater(b,h-1)];var c=b[a.binarySearchLower(b,h+1)];if(i===undefined){return c}else{if(c===undefined){return i}else{var f=Math.abs(h-c);var g=Math.abs(h-i);if(f===g){return d?c:i}else{if(f<g){return c}else{return i}}}}};a.groupBy=function(c,d){var b={};a.each(c,function(f,g){var h=d(g);var j=b[h];if(j===undefined){j=[];b[h]=j}j.push(g)});return b};a.max=function(b,f,c){var d=-1;var g=undefined;f=a.valueOrDefault(f,a.identity);a.each(b,function(h,i){var j=f(i,h);var k;if(!g){k=true}else{if(c){k=(c(j,d)>0)}else{k=(j>d)}}if(k){d=j;g=i}});return{value:d,item:g}};a.min=function(b,f,c){var d=-1;var g=undefined;f=a.valueOrDefault(f,a.identity);a.each(b,function(h,j){var k=f(j,h);var i;if(!g){i=true}else{if(c){i=(c(k,d)<0)}else{i=(k<d)}}if(i){d=k;g=j}});return{value:d,item:g}};a.extractFieldValue=function(b,c){return a.map(b,function(d){return d[c]})};a.minItem=function(b,d,c){return a.min(b,d,c).item};a.maxItem=function(b,d,c){return a.max(b,d,c).item};a.minValue=function(b,d,c){return a.min(b,d,c).value};a.maxValue=function(b,d,c){return a.max(b,d,c).value};a.fn.min=function(c){var b=-1;var d=undefined;a(this).each(function(){var f=c(a(this));if(!d||f<b){b=f;d=a(this)}});return{value:b,element:d}};a.fn.max=function(c){var b=-1;var d=undefined;a(this).each(function(){var f=c.call(a(this),a(this));if(!d||f>b){b=f;d=a(this)}});return{value:b,element:d}};a.fn.all=function(c){var b=true;a(this).each(function(){if(!c.call(a(this))){b=false;return false}});return b};a.allTheSame=function(b,d){if(b.length<2){return true}var c=d(b[0]);return a.all(b,function(f){return d(f)===c})};a.getIfAllTheSame=function(b,d){if(b.length===0){return undefined}var c=d(b[0]);var f=a.all(b,function(g){return d(g)===c});return f?c:false};a.findFirst=function(d,c){c=a.valueOrDefault(c,a.returnTrue);var b=undefined;a.each(d,function(f,g){if(c.call(g,f,g)){b=g;return false}});return b};a.all=function(d,c){var b=true;a.each(d,function(f,g){if(!c.call(g,g)){b=false;return false}});return b};a.common=function(g,f){var c=undefined;for(var b=0;b<g.length;b++){var d=f(g[b]);if(c!==undefined&&d!==c){return undefined}else{c=d}}return c};a.fn.any=function(c){var b=false;a(this).each(function(){if(c.call(a(this))){b=true;return false}});return b};a.any=function(g,b,f){if(f===undefined){f=0}for(var c=f;c<g.length;c++){var d=g[c];if(b.call(d,d)){return true}}return false};a.generateRange=function(f,d){var b=[];for(var c=f;c<=d;c++){b.push(c)}return b};a.sum=function(h,g,b){g=a.valueOrDefault(g,a.identity);var d=a.valueOrDefault(b,0);for(var c=0;c<h.length;c++){var f=h[c];d+=g.call(f,f)}return d};a.fn.sum=function(c,b){return a.sum(this,c,b)}})(jQuery);function ObservableCollection(b){var a=$.extend({idFunction:$.defaultIdFunction,comparerFunction:$.defaultEqualityComparer,noCompare:false,attributes:{}},b);var f=this;var c={};var d=a.attributes;this.id=$.weakID();this.itemsAddedEvent=SimpleEvent.create();this.itemsRemovedEvent=SimpleEvent.create();this.itemsUpdatedEvent=SimpleEvent.create();this.itemUpdatedEvent=SimpleEvent.create();this.itemAddedEvent=SimpleEvent.create();this.itemRemovingEvent=SimpleEvent.create();this.supportsDelayedFetching=$.returnFalse;this.isObservableCollection=$.returnTrue;this.updateBatch=OperationsBatch.create();this.getAttributes=function(){return d};this.setAttributes=function(g){$.extend(d,g)};this.beginUpdate=function(){f.updateBatch.begin()};this.endUpdate=function(){f.updateBatch.end()};this.connectObservableCollection=function(h,g){return CollectionUtils.connectObservableCollection(this,h,g)};this.disconnectObservableCollection=function(){CollectionUtils.disconnectObservableCollection(this)};this.updateItem=function(h,g){var j;if(typeof h==="object"){j=a.idFunction.call(h,h)}else{j=h}var i=c[j];if(i!==undefined){f.put($.extend({},i,g))}};this.updateItems=function(h){f.beginUpdate();for(var g in c){f.updateItem(g,h(g,c[g]))}f.endUpdate()};this.reset=function(g){f.beginUpdate();f.clear();f.put(g);f.endUpdate()};this.syncrhonize=function(g){var j;if($.isPlainObject(g)){j=g}else{j=$.makeSet($.makeArray(g),a.idFunction)}var h=[];for(var i in c){if(j[i]===undefined){h.push(i)}}f.beginUpdate();f.remove(h);f.put(g);f.endUpdate()};this.invalidateItems=function(g){if(g===undefined){return}var g=$.makeArray(g);for(var h=0;h<g.length;h++){f.itemUpdatedEvent.fire(f,g[h])}if(g.length>0){f.itemsUpdatedEvent.fire(f,g)}};this.put=function(g){if(g===undefined){return}g=$.makeArray(g);var m=[];var j=[];for(var h=0;h<g.length;h++){var k=g[h];var n=a.idFunction.call(k,k);var l=c[n]!==undefined;if(l){if(!a.comparerFunction(c[n],k)){c[n]=k;m.push(k)}}else{c[n]=k;j.push(k)}}f.beginUpdate();for(var h=0;h<j.length;h++){f.itemAddedEvent.fire(f,j[h])}if(j.length>0){f.itemsAddedEvent.fire(f,j)}for(var h=0;h<m.length;h++){f.itemUpdatedEvent.fire(f,m[h])}if(m.length>0){f.itemsUpdatedEvent.fire(f,m)}f.endUpdate()};this.remove=function(k){f.beginUpdate();k=$.makeArray(k);var j=[];for(var g=0;g<k.length;g++){var l=k[g];var h=c[l];if(h!==undefined){f.itemRemovingEvent.fire(f,h);delete c[l];j.push(l)}}if(j.length>0){f.itemsRemovedEvent.fire(f,j)}f.endUpdate()};this.clear=function(){f.remove($.getKeys(c))};this.getIDFunction=function(){return a.idFunction};this.getItems=function(){return c};this.getItemsLength=function(){return $.getKeys(c).length};this.getItemsValues=function(){return $.getValues(c)};this.getItem=function(g){return c[g]}}(function(){ObservableCollection.createFilteredCollection=function(a,c){var b=new ObservableCollection({idFunction:a.getIDFunction()});a.connectObservableCollection(b,{filterFunction:c});return b}})();var VersionController=new function(){this.create=function(d){var c=1;var a=0;var b=d?1:0;return{informOperation:function(){b=c},isDirty:function(){return b>a},beginSaving:function(){c++;var f=b;return{finishSaving:function(){if(a<f){a=f}}}}}};this.beginSaving=function(c){var a=[];for(var d=0;d<c.length;d++){var b=c[d];a.push(b.beginSaving())}return{finishSaving:function(){for(var f=0;f<a.length;f++){a[f].finishSaving()}}}}}();var CollectionObserver=new function(){this.create=function(d,r,f){f=$.extend({unionWithItems:undefined},f);var i=f.unionWithItems;r=$.valueOrDefault(r,false);var h=d.getIDFunction();var s=d.supportsDelayedFetching();var m={};var b=ObservableFlag.createConditionalNegative({valueChangeCallback:function(u){if(!u){m.updateBatch.start();var x=$.getValues(o);var w=$.getValues(j);var y=$.getValues(c);var v={};if(x.length>0){m.itemsAddedEvent.fire(m,x);v.addedItems=x}if(w.length>0){m.itemsRemovedEvent.fire(m,w);v.removedItems=w}if(y.length>0){m.itemsUpdatedEvent.fire(m,y);v.updatedItems=y}if(!$.isEmptyObject(v)){m.itemsChangedEvent.fire(m,v);$.each(y,function(z,A){m.itemUpdatedEvent.fire(m,A);m.itemChangedEvent.fire(m,h.call(A,A))});$.each(x,function(z,A){m.itemAddedEvent.fire(m,A);m.itemChangedEvent.fire(m,h.call(A,A))});$.each(w,function(z,A){m.itemRemovedEvent.fire(m,A);m.itemChangedEvent.fire(m,A)})}o={};j={};c={};m.updateBatch.finish()}}});d.updateBatch.startedEvent.bind(function(){b.setTrue("CollectionUpdate")});d.updateBatch.finishedEvent.bind(function(){b.setFalse("CollectionUpdate")});var n=undefined;if(i){n=$.makeSet(i,h)}var o={};var j={};var c={};var q;var k;var g;var p;var l;var a;var t;$.extend(m,{controllerType:CollectionObserver,itemsChangedEvent:SimpleEvent.create(),itemChangedEvent:SimpleEvent.create(),itemsChangedFinishedEvent:SimpleEvent.create(),itemsAddedEvent:SimpleEvent.create(),itemAddedEvent:SimpleEvent.create(),itemsRemovedEvent:SimpleEvent.create(),itemRemovedEvent:SimpleEvent.create(),itemsUpdatedEvent:SimpleEvent.create(),itemUpdatedEvent:SimpleEvent.create(),allFetchedEvent:SimpleEvent.create(),updateBatch:OperationsBatch.create(),getObservableCollection:function(){return d},supportsDelayedFetching:function(){return s},isObservableCollection:$.returnTrue,isPostponed:function(){return b.isTrue()},postponeUpdates:function(){var u=b.isTrue();b.setTrue();return u},unPostponeUpdates:function(){b.setFalse()},release:function(){d.itemsAddedEvent.unbind(q);d.itemAddedEvent.unbind(k);d.itemsRemovedEvent.unbind(g);d.itemRemovingEvent.unbind(p);d.itemsUpdatedEvent.unbind(l);d.itemUpdatedEvent.unbind(a);if(s){d.allFetchedEvent.unbind(t)}},getIDFunction:function(){return h},hasMore:function(){if(s){return d.hasMore()}else{return false}},hasFetchedOnce:function(){if(s){return d.hasFetchedOnce()}else{return true}},fetchMore:function(u,v){v=$.valueOrDefault(v,$.noop);if(s){d.fetchMore(u,v)}else{v()}},fetchTo:function(u,v){v=$.valueOrDefault(v,$.noop);if(s){d.fetchTo(u,v)}else{v()}},fetchAll:function(u){u=$.valueOrDefault(u,$.noop);if(s){d.fetchAll(u)}else{u()}},getItem:function(u){return d.getItem(u)},getItems:function(){var u=d.getItems();if(n){return $.extend({},n,u)}else{return u}},hasItems:function(){return !$.isEmptyObject(d.getItems())},getItemsValues:function(){var u=d.getItemsValues();if(i){return $.merge($.merge([],i),u)}else{return u}}});q=d.itemsAddedEvent.bind(function(w){if(!b.isTrue()){m.itemsAddedEvent.fire(m,w);m.itemsChangedEvent.fire(m,{addedItems:w})}else{for(var v=0;v<w.length;v++){var u=w[v];var x=h.call(u,u);if(j[x]!==undefined){delete j[x];c[x]=u}else{o[x]=u}}}});g=d.itemsRemovedEvent.bind(function(v){if(!b.isTrue()){m.itemsRemovedEvent.fire(m,v);m.itemsChangedEvent.fire(m,{removedItems:v})}else{for(var u=0;u<v.length;u++){var x=v[u];var w=true;if(o[x]!==undefined){delete o[x];w=false}if(c[x]!==undefined){delete c[x]}if(w){j[x]=x}}}});l=d.itemsUpdatedEvent.bind(function(x){if(!b.isTrue()){m.itemsUpdatedEvent.fire(m,x);m.itemsChangedEvent.fire(m,{updatedItems:x})}else{for(var u=0;u<x.length;u++){var w=x[u];var v=h.call(w,w);if(o[v]===undefined){c[v]=w}else{o[v]=w}if(j[v]!==undefined){delete j[v];console.warn("Notified item update after item removing.")}}}});a=d.itemUpdatedEvent.bind(function(u){if(!b.isTrue()){m.itemUpdatedEvent.fire(m,u);m.itemChangedEvent.fire(m,h.call(u,u))}});k=d.itemAddedEvent.bind(function(u){if(!b.isTrue()){m.itemAddedEvent.fire(m,u);m.itemChangedEvent.fire(m,h.call(u,u))}});p=d.itemRemovingEvent.bind(function(u){if(!b.isTrue()){var v=h.call(u,u);m.itemRemovedEvent.fire(m,v);m.itemChangedEvent.fire(m,v)}});if(s){t=d.allFetchedEvent.bind(function(){m.allFetchedEvent.fire(m)})}if(r){m.postponeUpdates()}return m}}();var ColorCoordinate={Red:0,Green:1,Blue:2,Hue:3,Saturation:4,Brightness:5,Opacity:6};var ColorsSwatches={Popular:["transparent","black","white","#cccccc","red","blue","green","yellow","orange","purple","indigo","#FF9900","#ABD477","#F2522E","#4D82DB","#7C3EBB","#3366FF","#6633FF","#CC33FF","#FF33CC","#33CCFF","#003DF5","#002EB8","#FF3366","#33FFCC","#B88A00","#F5B800","#FF6633","#33FF66","#008AB8","#FF0040","#FF6E3D","#3DCFFF","#00BFFF","#E6E6E6","#4000FF","#00C291","#40FF00","#FFB800","#00B499","#E8E9EB"]};(function(c){c.calculateForegroundColor=function(d){if(!d||c.isGradient(d)){return c.Color("black")}var f=c.Color(d).toRGB();return(f[0]*0.299+f[1]*0.587+f[2]*0.114>150)?c.Color("black"):c.Color("white")};c.generateHSLSwatch=function(){var k=[];var h=["red","blue","green","yellow","orange","purple","indigo","black"];for(var j=0;j<h.length;j++){var g=c.Color(h[j]);for(var f=0.1;f<=0.9;f+=0.1){var d=g.toHSL().modify([null,null,f]);k.push(d)}}return k};c.calculateMeanColor=function(d,g,i,h,f){return c.Color([Math.floor(c.calculateMeanValue(d,g,i,h[0],f[0])),Math.floor(c.calculateMeanValue(d,g,i,h[1],f[1])),Math.floor(c.calculateMeanValue(d,g,i,h[2],f[2])),c.calculateMeanValue(d,g,i,c.valueOrDefault(h[3],1),c.valueOrDefault(f[3],1))])};c.recolor=function(g,f,d,i){c.assertRange(f,-180,180);c.assertRange(d,-100,100);c.assertRange(i,-100,100);if(c.isGradient(g)){var h=g.gradient;return{gradient:{colorStops:c.map(h.colorStops,function(k){return{location:k.location,value:j(k.value)}}),opacityStops:c.map(h.opacityStops,function(k){return{location:k.location,value:k.value}})},orientation:g.orientation}}else{return j(g)}function j(o){var n=c.Color(o).toHSL();var q=n[0];var p=n[1];var m=n[2];var k=n.getAlpha();if(f!=0){q=c.modulo(Math.round(q*360)+f,360)/360}if(d>0){p=p+(1-p)*(d/100)}else{if(d<0){p=p-p*(Math.abs(d)/100)}}if(i>0){m=m+(1-m)*(i/100)}else{if(i<0){m=m-m*(Math.abs(i)/100)}}return c.Color([q,p,m,k],"HSL").toCSS()}};c.colorsEqualityComparer=function(f,d){return c.colorsEqual(f,d)};c.colorsEqual=function(h,g,k){k=c.valueOrDefault(k,true);if(!h||!g){return h===g}else{var f=c.Color(h).toRGB();var i=c.Color(g).toRGB();var j=c.valueOrDefault(f[3],1);var d=c.valueOrDefault(i[3],1);return(f[0]===i[0]&&f[1]===i[1]&&f[2]===i[2]&&(!k||j===d))}};c.getCoordinateValue=function(f,h){if(c.isRGBCoordinate(h)&&f.space!=="RGB"){f=c.Color(f).toRGB()}else{if(c.isHSLCoordinate(h)&&f.space!=="HSL"){f=c.Color(f).toHSL()}}var d=a(h);var g=f[d];if(g===undefined&&h===ColorCoordinate.Opacity){return 1}return g};c.getCoordinateDelta=function(f,d,g){return c.getCoordinateValue(f,g)-c.getCoordinateValue(d,g)};c.colorsSimilarExceptCoordinate=function(g,f,j){if(!g||!f){return g===f}else{if(typeof g==="string"){g=c.Color(g)}if(typeof f==="string"){f=c.Color(f)}g=c.getRelevantCoordinates(g,j);f=c.getRelevantCoordinates(f,j);var d=a(j);for(var h=0;h<g.length;h++){if(h!==d&&g[h]!==f[h]){return false}}return true}};c.isRGBCoordinate=function(d){return(d===ColorCoordinate.Red||d===ColorCoordinate.Green||d===ColorCoordinate.Blue)};c.isHSLCoordinate=function(d){return(d===ColorCoordinate.Hue||d===ColorCoordinate.Saturation||d===ColorCoordinate.Brightness)};c.adjustCoordinate=function(d,f,g){if(g===undefined){return d}return c.modifyCoordinate(d,f,c.getCoordinateValue(d,f)+g)};c.modifyCoordinate=function(f,g,h){f=c.Color(f);if(g===ColorCoordinate.Opacity){return f.setAlpha(h)}var d=[null,null,null];if(c.isRGBCoordinate(g)){f=f.toRGB();h=Math.max(0,Math.min(255,Math.round(h)))}else{if(c.isHSLCoordinate(g)){f=f.toHSL();h=Math.max(0,Math.min(1,h))}}d[a(g)]=h;return f.modify(d)};c.getRelevantCoordinates=function(d,f){d=c.Color(d);if(f===ColorCoordinate.Opacity||c.isRGBCoordinate(f)){return d.toRGB()}else{if(c.isHSLCoordinate(f)){return d.toHSL()}}return undefined};c.getCoordinateMaxValue=function(d){switch(d){case ColorCoordinate.Red:case ColorCoordinate.Green:case ColorCoordinate.Blue:return 256;case ColorCoordinate.Hue:case ColorCoordinate.Saturation:case ColorCoordinate.Brightness:case ColorCoordinate.Opacity:return 1}};c.getRGBA=function(f){var d;if(f&&f.constructor==Array&&f.length==3){return f}if(d=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(f)){return[parseInt(d[1],10),parseInt(d[2],10),parseInt(d[3],10),1]}if(d=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*(1|0|0\.[0-9]*)\s*\)/.exec(f)){return[parseInt(d[1],10),parseInt(d[2],10),parseInt(d[3],10),parseFloat(d[4])]}if(d=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(f)){return[parseFloat(d[1])*2.55,parseFloat(d[2])*2.55,parseFloat(d[3])*2.55,1]}if(d=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(f)){return[parseInt(d[1],16),parseInt(d[2],16),parseInt(d[3],16),1]}if(d=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(f)){return[parseInt(d[1]+d[1],16),parseInt(d[2]+d[2],16),parseInt(d[3]+d[3],16),1]}if(d=/rgba\(0, 0, 0, 0\)/.exec(f)){return b.transparent}return c.merge(c.merge([],b[c.trim(f).toLowerCase()]),[1])};var b={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255,0]};function a(d){switch(d){case ColorCoordinate.Red:return 0;case ColorCoordinate.Green:return 1;case ColorCoordinate.Blue:return 2;case ColorCoordinate.Hue:return 0;case ColorCoordinate.Saturation:return 1;case ColorCoordinate.Brightness:return 2;case ColorCoordinate.Opacity:return 3}}})(jQuery);var CanvasLayouts={FillHorizontally:1,FillVertically:2};var Canvas=new function(){this.create=function(){var i=$("<canvas></canvas>");var h={$element:i,canvas:i[0],idGenerator:$.createWeakIdGenerator(),elements:{},size:{width:0,height:0},isInitialized:false,duringUpdate:0,repaintOnEndUpdate:false,initialize:function(){if(!h.isInitialized){if(b()){if(G_vmlCanvasManager.isInitialized){j()}else{G_vmlCanvasManager.initialized.one(j)}}else{h.isInitialized=true;h.refreshSize()}}function j(){G_vmlCanvasManager.initElement(h.canvas);h.isInitialized=true;h.refreshSize()}},beginUpdate:function(){h.duringUpdate++},endUpdate:function(){h.duringUpdate=Math.max(0,h.duringUpdate-1);if(h.duringUpdate===0){if(h.repaintOnEndUpdate){h.repaintOnEndUpdate=false;h.repaint()}}},repaint:function(){if(!h.isInitialized){return}if(h.duringUpdate>0){h.repaintOnEndUpdate=true}else{var l=h.canvas;var n=h.size;var m=l.getContext("2d");var j=undefined;m.clearRect(0,0,l.width,l.height);var o=h.elements;for(var k in o){o[k].repaint(m)}}},refreshSize:function(k){h.initialize();if($.browser.msie&&parseInt($.browser.version)<9){h.$element.css({width:"",height:""})}var j=k;if(j===undefined||j===null){j=h.$element.elementSize()}h.size=j;h.$element.attr("width",j.width).attr("height",j.height);h.repaint()}};$(window).resize(function(j){if(j.target===window||j.target===document){h.repaint()}});return $.extend(h,{addEllipse:g(f),addTriangle:g(a)});function g(j){return function(){var l=$.merge([h],arguments);var k=this;var m=j.apply(k,l);h.elements[m.id]=m;h.repaint();return m}}};function b(){return $.browser.msie&&parseInt($.browser.version)<9}function a(g,h){var i={properties:$.extend({width:0,height:0,x:0,y:0,angle:0},h),drawShape:function(m){var l=i.properties;var n=l.width;var k=l.height;var j=l.x;var o=l.y;if(i.isLayoutActive(CanvasLayouts.FillHorizontally)){n=g.size.width;j=0}if(i.isLayoutActive(CanvasLayouts.FillVertically)){k=g.size.height;o=0}n-=l.lineWidth*2;k-=Math.round(l.lineWidth*1.5);j+=l.lineWidth;o+=l.lineWidth;m.beginPath();m.moveTo(j,o+k);m.lineTo(j+n,o+k);m.lineTo(j+Math.floor(n/2),o);m.closePath()}};return d(i,g,h)}function f(g,i){var h={properties:$.extend({centerX:0,centerY:0,radiusX:0,radiusY:0},i),drawShape:function(k){var r=h.properties;var u,n,t,s;if(h.isLayoutActive(CanvasLayouts.FillHorizontally)){u=g.size.width-r.lineWidth;t=r.lineWidth/2}else{u=r.radiusX*2;t=r.centerX-u/2}if(h.isLayoutActive(CanvasLayouts.FillVertically)){n=g.size.height-r.lineWidth;s=r.lineWidth/2}else{n=r.radiusY*2;s=r.centerY-n/2}var q=0.5522848;var m=(u/2)*q,j=(n/2)*q,v=t+u,p=s+n,o=t+u/2,l=s+n/2;k.beginPath();k.moveTo(t,l);k.bezierCurveTo(t,l-j,o-m,s,o,s);k.bezierCurveTo(o+m,s,v,l-j,v,l);k.bezierCurveTo(v,l+j,o+m,p,o,p);k.bezierCurveTo(o-m,p,t,l+j,t,l);k.closePath()}};return d(h,g,i)}function a(g,h){var i={properties:$.extend({width:0,height:0,x:0,y:0,angle:0},h),drawShape:function(l){var r=i.properties;var q=r.lineWidth/2;var k=r.width;var v=r.height;var t=r.x;var s=r.y;if(i.isLayoutActive(CanvasLayouts.FillHorizontally)){k=g.size.width;t=0}if(i.isLayoutActive(CanvasLayouts.FillVertically)){v=g.size.height;s=0}l.beginPath();if(r.angle===45||r.angle===135||r.angle===225||r.angle===315){if(q>0){var n=Math.sqrt(Math.pow((v),2)+Math.pow((k),2));var p=Math.asin(k/n)*180/Math.PI;var u=90-p;var m=q/Math.sin(p*Math.PI/180)+(Math.sin((u)*Math.PI/180)*q/(Math.cos((u)*Math.PI/180)));v-=(m+q);var o=(v/Math.cos(p*Math.PI/180))*Math.sin(p*Math.PI/180);var j=k-o-q;k=o;t=Math.round(t);s=Math.round(s);k=Math.round(k);v=Math.round(v)}switch(r.angle){case 45:if(q>0){t+=(q);s+=(m)}l.moveTo(t,s);l.lineTo(t,s+v);l.lineTo(t+k,s+v);break;case 135:if(q>0){t+=(q);s+=(q)}l.moveTo(t,s);l.lineTo(t,s+v);l.lineTo(t+k,s);break;case 225:if(q>0){k=o;t+=(j);s+=(m)}l.moveTo(t,s);l.lineTo(t+k,s);l.lineTo(t+k,s+v);break;case 315:if(q>0){t+=(j);s+=(m)}l.moveTo(t,s+v);l.lineTo(t+k,s+v);l.lineTo(t+k,s);break}}else{switch(r.angle){case 90:if(q>0){var n=Math.sqrt(Math.pow((v/2),2)+Math.pow((k),2));var p=Math.asin(k/n)*180/Math.PI;var u=180-2*p;var m=q/Math.sin(p*Math.PI/180)+(Math.sin((u/2)*Math.PI/180)*q/(Math.cos((u/2)*Math.PI/180)));v-=m*2;var j=q/Math.sin((u/2)*Math.PI/180);k-=(q+j);t+=(q);s+=(m);t=Math.round(t);s=Math.round(s);k=Math.round(k);v=Math.round(v)}l.moveTo(t,s);l.lineTo(t,s+v);l.lineTo(t+k,s+Math.round(v/2));break;case 180:if(q>0){var n=Math.sqrt(Math.pow((k/2),2)+Math.pow((v),2));var p=Math.asin(v/n)*180/Math.PI;var u=180-2*p;var j=q/Math.sin(p*Math.PI/180)+(Math.sin((u/2)*Math.PI/180)*q/(Math.cos((u/2)*Math.PI/180)));k-=j*2;var m=q/Math.sin((u/2)*Math.PI/180);v-=(q+m);t=Math.round(t);s=Math.round(s);k=Math.round(k);v=Math.round(v);t+=(j);s+=(q)}l.moveTo(t,s);l.lineTo(t+k,s);l.lineTo(t+Math.round(k/2),s+v);break;case 270:if(q>0){var n=Math.sqrt(Math.pow((v/2),2)+Math.pow((k),2));var p=Math.asin(k/n)*180/Math.PI;var u=180-2*p;var m=q/Math.sin(p*Math.PI/180)+(Math.sin((u/2)*Math.PI/180)*q/(Math.cos((u/2)*Math.PI/180)));v-=m*2;var j=q/Math.sin((u/2)*Math.PI/180);k-=(q+j);t+=(j);s+=(m);t=Math.round(t);s=Math.round(s);k=Math.round(k);v=Math.round(v)}l.moveTo(t+k,s);l.lineTo(t+k,s+v);l.lineTo(t,s+Math.round(v/2));break;default:if(q>0){var n=Math.sqrt(Math.pow((k/2),2)+Math.pow((v),2));var p=Math.asin(v/n)*180/Math.PI;var u=180-2*p;var j=q/Math.sin(p*Math.PI/180)+(Math.sin((u/2)*Math.PI/180)*q/(Math.cos((u/2)*Math.PI/180)));k-=j*2;var m=q/Math.sin((u/2)*Math.PI/180);v-=(q+m);t+=(j);s+=(m);t=Math.round(t);s=Math.round(s);k=Math.round(k);v=Math.round(v)}l.moveTo(t,s+v);l.lineTo(t+k,s+v);l.lineTo(t+Math.round(k/2),s);break}}l.closePath()}};return d(i,g,h)}function d(h,g,i){$.extend(h.properties,{lineWidth:0,strokeColor:"black",backgroundColor:"transparent"},i);$.extend(h,{repaint:function(k){var r=h.properties;h.drawShape(k);var u=r.backgroundColor;if($.isGradient(u)){var l=u.orientation;var t=(l===Orientation.Vertical?g.size.height:0);var j=(l===Orientation.Horizontal?g.size.width:0);var q=$.normalizeGradientStops(u.gradient);var o=k.createLinearGradient(0,0,j,t);for(var p=0;p<q.length;p++){var m=q[p];var n=$.Color(m.color);var s=$.valueOrDefault(m.stop,0);o.addColorStop(s/100,n.toCSS(true))}k.fillStyle=o;k.fill()}else{u=$.Color(u).toCSS();if(u!=="transparent"){k.fillStyle=u;k.fill()}}if(r.lineWidth>0){k.lineWidth=r.lineWidth;k.strokeStyle=r.strokeColor;k.stroke()}}});return c(h,g)}function c(h,g){return $.extend(h,{id:g.idGenerator.next(),setPropertyValue:function(i,k){var j=h.properties;var l=j[i];if(l!==k){j[i]=k;g.repaint()}},setPropertiesValues:function(i){g.beginUpdate();for(var j in i){h.setPropertyValue(j,i[j])}g.endUpdate()},toggleLayout:function(k,j){var i=h.isLayoutActive(k);if(i!==j){if(j){h.layouts[k]=true}else{delete h.layouts[k]}g.repaint()}return h},isLayoutActive:function(i){return h.layouts[i]!==undefined},layouts:{}})}}();var Exceptions={UserNotLoggedIn:"UserNotLoggedInException",DownForMaintenanceException:"DownForMaintenanceException",GroupAlreadyExists:"GroupAlreadyExistsException",SiteAlreadyExists:"SiteAlreadyExistsException",PartialOperationFailure:"PartialOperationFailureException",UnknownError:"UnknownErrorException",EmailAlreadyExistsException:"EmailAlreadyExistsException",UserAlreadyExistsException:"UserAlreadyExistsException",UserNotFound:"UserNotFoundException",EmailNotFound:"EmailNotFoundException",IncorrectPassword:"IncorrectPasswordException",PasswordRequired:"PasswordRequiredException",EmailRequired:"EmailRequiredException",NameRequired:"NameRequiredException",InvalidSubdomainException:"InvalidSubdomainException",SiteNameTooLong:"SiteNameTooLongException",SubdomainAlreadyExistsException:"SubdomainAlreadyExistsException",SubdomainTooShortException:"SubdomainTooShortException",InvalidEmailException:"InvalidEmailException",SiteDoesNotExistsException:"SiteDoesNotExistsException",NotAuthorizedException:"NotAuthorizedException",AuthorizationException:"AuthorizationException",AlbumAlreadyExistsException:"AlbumAlreadyExistsException",ValidationException:"ValidationException",ResourceAlreadyExistsException:"ResourceAlreadyExistsException",DifferentDomainOwnerException:"DifferentDomainOwnerException",UserAlreadyConnectedToSiteException:"UserAlreadyConnectedToSiteException",StudioAlreadyExists:"StudioAlreadyExistsException",InnerException:"InnerException",DuplicateUserStudio:"DuplicateUserStudioException",InvalidFileTypeException:"InvalidFileTypeException",FileSizeException:"FileSizeException",UrlAliasAlreadyExistsException:"UrlAliasAlreadyExistsException",InvalidUrlAliasException:"InvalidUrlAliasException"};var ExceptionContext={Login:1,Registration:2,Domain:3};var Exception=new function(){this.create=function(a,b){return{ExceptionType:a,Message:b}};this.getExceptionType=function(a){if($.isPlainObject(a)){var b=a.ExceptionType;if(b){return b.substring(b.lastIndexOf(".")+1)}}return Exceptions.UnknownError};this.createExceptionHandler=function(a,b){return function(d){var c=Exception.getUserDescription(d,b);a(c)}};this.getUserDescription=function(b,a){switch(Exception.getExceptionType(b)){case"InvalidSiteNameException":return"Invalid Site Name or Subdomain";case"InvalidUserNameException":return"Invalid Username";case"UnknownUserException":return"That username does not exist. Please check your username, or enter your email address.";case Exceptions.UserNotLoggedIn:return"You are not logged in";case Exceptions.UserNotFound:return"User was not found.";case Exceptions.EmailNotFound:return"Email was not found.";case Exceptions.IncorrectPassword:return"Incorrect password.";case Exceptions.PasswordRequired:return"Password is required.";case Exceptions.EmailRequired:return"Email is required.";case Exceptions.NameRequired:return"Full name is required.";case Exceptions.GroupAlreadyExists:case Exceptions.SiteAlreadyExists:return"A site with the specified name already exists";case Exceptions.SiteNameTooLong:return"Please keep your site name to 30 characters or less.";case Exceptions.SubdomainTooShortException:return"Please enter at least 3 characters as subdomain.";case Exceptions.SubdomainAlreadyExistsException:return"Sorry, a site with the specified subdomain already exists";case Exceptions.InvalidSubdomainException:return"Invalid subdomain";case Exceptions.AlbumAlreadyExistsException:return"An album with the specified name already exists";case"FontFamilyAlreadyExistsException":return"Font Family Already Exists";case Exceptions.SiteDoesNotExistsException:return"The site you are trying to edit does not exist";case Exceptions.NotAuthorizedException:case Exceptions.AuthorizationException:switch(a){case ExceptionContext.Login:return"Your username doesnt match your password.";default:return"You are not authorized to perform this operation."}case Exceptions.UserAlreadyExistsException:return"Username Already Exists";case Exceptions.EmailAlreadyExistsException:return"Email Already Exists";case Exceptions.InvalidEmailException:return"A valid e-mail is required";case Exceptions.ValidationException:switch(a){case ExceptionContext.Domain:return"The Domain You Entered Is Invalid";default:return"Error In Data Validation"}case Exceptions.ResourceAlreadyExistsException:switch(a){case ExceptionContext.Domain:return"The domain or the sub-domain you entered, already exists";default:return"Resource Already Exists"}case Exceptions.InnerException:case Exceptions.UnknownError:var c=b.Message;if(typeof(c)==="string"){return c}else{return"Internal error occurred."}case Exceptions.StudioAlreadyExists:return"Studio with the specified name already exists";case Exceptions.DuplicateUserStudio:return"Can't create more than one studio per user";case Exceptions.DifferentDomainOwnerException:return"The domain you entered is registered by another user. Please contact <a href='mailto:support@webzai.com'>support@webzai.com</a> in case you are the domain owner.";case"UserAlreadyConnectedToSiteException":return"User is already connected to the site.";case Exceptions.InvalidFileTypeException:return"File type is not supported.";case Exceptions.FileSizeException:return"File size exceeds the limit allowed.";case Exceptions.UrlAliasAlreadyExistsException:return"Chosen Friendly URL already in use.";case Exceptions.InvalidUrlAliasException:return"Chosen Friendly URL is invalid. <br> Only letters, numbers and ._@!- are allowed.";default:switch(a){case ExceptionContext.Login:return"Internal error occurred. Please login again.";case ExceptionContext.Registration:return"Registration Failed. Please Try Again Later.";default:return"Internal Error Occurred."}}}}();(function(c){var f=null;var a;function b(g){f=c(g.target)}function d(g){f=null}c(function(){c(document).on("focusin",b);c(document).on("focusout",d)});c.clearFocus=function(){if(!a){a=c("<input type='text'>").css({opacity:0,position:"absolute",left:0,top:0,width:0}).appendTo("body")}a[0].focus();a[0].blur()};c.getFocusedElement=function(){return f};c.fn.blurContextElement=function(){if(f&&f.hasAncestor(this)){c.clearFocus()}}})(jQuery);var PanelAppearance={Window:"panel-appearance-window",Contained:"panel-appearance-contained"};var PanelsManager=new function(){var b=this;var a={};this.Templates={BasicPanel:{useTemplate:function(f){f=$.extend({panelClass:"",panelContentClass:""},f);var c=f.panelClass;var d=f.panelContentClass;var g=new StringBuilder();g.append('<div class="{0}">'.format(c));g.append('<div class="{0}-content panel-content {1}"></div>'.format(c,d));g.append("</div>");return $(g.toString())}}};this.getDefaultPanel=function(c){if(c.DefaultPanel===undefined){c.DefaultPanel=PanelsManager.createPanel.apply(this,$.merge([c],$.restArguments(arguments,1)))}return c.DefaultPanel};this.requestPanel=function(d){var f=d.panelsPool;if(f==undefined){f=[];d.panelsPool=f}if(f.length===0){var c=PanelsManager.createPanel(d);c.panelsPool=f;f.push(c)}return f.pop()};this.releasePanel=function(c){if(!c.panelsPool){console.error("Cannot release panel which hasn't been associated with a panels factory pool")}c.panelsPool.push(c)};this.createDeferredPanel=function(d,c){return b.registerPanel(undefined,d,c)};this.registerPanel=function(j,h,d){d=$.extend({creationArgs:[],defaultActivationArgs:undefined,creationCallback:$.noop,activationHandler:$.noop},d);var i;var c=false;var g=false;if(j!==undefined&&a[j]!==undefined){console.error("Panel with the name {0} is already registered".format(j));return}var f={id:$.uniqueID(),isDeferredPanel:true,panelCreatedEvent:SimpleEvent.create(),beforePanelInitializedEvent:SimpleEvent.create(),panelInitializedEvent:SimpleEvent.create(),isCreated:false,isEnabled:ObservableFlag.createConditionalPositive({valueChangeCallback:function(l){if(f.isActivated.isTrue()){var k=f.getPanel();if(l){d.activationHandler.apply(k,$.merge([k],$.valueOrDefault(i,[])))}else{g=true;k.requestDeactivation();g=false}}}}),isActivated:ObservableFlag.create(false,{valueChangeCallback:function(k){if(c){return}if(k){f.activate()}else{if(f.isEnabled.isTrue()){f.getPanel().requestDeactivation()}}}}),isPanelActivated:function(){return f.isCreated&&f.panel.isActivated},getPanelElement:function(){if(f.isCreated){return f.panel.$element}return undefined},getPanel:function(){var k=f.panel;if(k===undefined){if($.isFunction(h)){k=h()}else{k=b.createPanelWithActivationArgs.apply(this,$.merge([h,d.defaultActivationArgs],$.makeArray(d.creationArgs)))}f.panel=k;f.isCreated=true;f.panelCreatedEvent.fire(f,k);d.creationCallback.call(k,k);k.beforePanelInitializedEvent.one(function(){f.beforePanelInitializedEvent.fire()});k.panelInitializedEvent.one(function(){f.panelInitializedEvent.fire()});k.requestDeactivationEvent.bind(function(){if(!g){c=true;f.isActivated.setFalse();c=false}});k.id=f.id}return f.panel},activate:function(){if(f.isEnabled.isFalse()){i=$.merge([],arguments)}else{var k=f.getPanel();d.activationHandler.apply(k,$.merge([k],arguments))}f.isActivated.setTrue()},use:function(){return f.getPanel()}};if(j!==undefined){a[j]=f}return f};this.getPanel=function(d){var c=a[d];if(c===undefined){console.warn("Panel with the name {0} isn't registered".format(d));return undefined}return c.getPanel()};this.usePanel=function(c){if(!c){return c}if(c.isDeferredPanel){return c.getPanel()}else{return c}};this.createInnerPanelController=function(l,q){q=$.extend({appendTo:l.$element,onDeactivationRequested:function(){l.requestDeactivation()},panelChangedCallback:$.noop,onPanelActivated:$.noop,propagateInnerDropPanelsContainer:false,customPanelAppearance:undefined},q);var k={};var o=q.appendTo;var j=q.onDeactivationRequested;var m=q.panelChangedCallback;var i=q.onPanelActivated;var f=q.propagateInnerDropPanelsContainer;var d=q.customPanelAppearance;var p;var n;var h;var g;var c=SimpleEvent.createBindingsCollection();$.extend(k,{wrappingPanel:l,panelChangedEvent:SimpleEvent.create(),panelActivatedEvent:SimpleEvent.create(),getPanel:function(){return p},setPanel:function(w,r){r=$.extend({activationArgs:undefined,data:undefined},r);var t=r.activationArgs;var v=r.data;if(w){w=w.use()}if(w===p&&t===n&&h===v){return}c.unbindAll();var u=p;p=w;n=t;h=v;if(!!u&&u!==p){u.hostingInnerPanelController=undefined;u.deactivate();u.$element.detach()}if(w){var s=w.hostingInnerPanelController;if(s&&s!==k){s.setPanel(undefined)}w.hostingInnerPanelController=k;w.$element.appendTo($.evaluateWhenFunction(o,w,v));if(f){w.setInnerDropPanelsContainer(l.getInnerDropPanelsContainer())}if(l.isActivated){w.activate(n,undefined,{customPanelAppearance:d});w.setCustomPanelSize(g);i(w);k.panelActivatedEvent.fire(k,w)}w.requestDeactivationEvent.bind(function(){j()}).addToCollection(c);l.panelDeactivatedEvent.bind(function(){w.deactivate()}).addToCollection(c);l.panelActivatedEvent.bind(function(){w.activate(n,undefined,{customPanelAppearance:d});w.setCustomPanelSize(g);i(w);k.panelActivatedEvent.fire(k,w)}).addToCollection(c)}m(w);k.panelChangedEvent.fire(k,w)},setCustomInnerPanelSize:function(r){g=r;if(p&&l.isActivated){p.setCustomPanelSize(r)}}});return k};this.makeDeactivationButton=function(d,c){d.makeButton().buttonClick(function(){c.requestDeactivation()})};this.getControllerByElement=function(c){return c.data("panelController")};this.createPanelWithActivationArgs=function(h,g){var d=[];for(var f=0;f<arguments.length;f++){if(f!==1){d.push(arguments[f])}}var c=b.createPanel.apply(this,d);$.extend(c.defaultActivationArgs,g);return c};this.createPanel=function(d){var c=$.merge([],arguments);c.shift();var f;if($.isFunction(d)){f=d.apply(d,c)}else{f=d.create.apply(d,c)}return b.createController(f)};this.tryNavigateToPanel=function(d,c,f){if(d&&d.navigateToPanel!==undefined){d.navigateToPanel(c,f);return true}return false};this.createBaseController=function(){var d=SimpleEvent.createEventListenersGroup();var c={id:$.uniqueID(),panelUpdateBatch:OperationsBatch.create(),bindings:[],readWriteInitializationOperations:[],panelActivatedEvent:SimpleEvent.create(),panelDeactivatedEvent:SimpleEvent.create(),addReadWriteInitialization:function(f,g){c.readWriteInitializationOperations.push({read:f,write:g})},associateBinding:function(f){c.bindings.push(f)},associateScrollingView:function(f){SimpleEvent.createEventListener(c.panelActivatedEvent,function(){f.toggleAutoRefresh(true)}).activate().addToGroup(d);SimpleEvent.createEventListener(c.panelDeactivatedEvent,function(){f.toggleAutoRefresh(false)}).activate().addToGroup(d);if(c.isActivated){f.toggleAutoRefresh(true)}},associateCollectionObserver:function(f){SimpleEvent.createEventListener(c.panelActivatedEvent,function(){f.unPostponeUpdates()}).activate().addToGroup(d);SimpleEvent.createEventListener(c.panelDeactivatedEvent,function(){f.postponeUpdates()}).activate().addToGroup(d);if(c.isActivated){f.unPostponeUpdates()}},associateItemsList:function(f){SimpleEvent.createEventListener(c.panelActivatedEvent,function(){if(f.unPostponeLayoutUpdate){f.unPostponeLayoutUpdate()}}).activate().addToGroup(d);SimpleEvent.createEventListener(c.panelDeactivatedEvent,function(){if(f.postponeLayoutUpdate){f.postponeLayoutUpdate()}}).activate().addToGroup(d);if(c.isActivated){f.unPostponeLayoutUpdate()}}};return c};this.createController=function(h){$.extendMissing(h,{id:$.uniqueID(),panelActivatedEvent:SimpleEvent.create(),panelDeactivatedEvent:SimpleEvent.create(),panelActivatingEvent:SimpleEvent.create(),openedInContext:SimpleEvent.create(),beforePanelInitializedEvent:SimpleEvent.create(h),panelInitializedEvent:SimpleEvent.create(h),isPinned:ObservableFlag.create(false),maxPanelSize:ObservableObject.create({width:Infinity,height:Infinity},{equalityComparer:EqualityComparers.SizeEqualityComparer,valueChangeCallback:function(i){if(h.isActivated){h.updatePanelSize(i)}}}),defaultPanelAppearance:undefined,updatePanelSize:$.noop,updateCustomPanelSize:$.noop,duringActivation:false,update:$.noop,visualizers:[],readWriteInitializationOperations:[],bindings:[],scrollingControllers:[],initialize:$.noop,onActivated:$.noop,onActivating:$.noop,onDeactivating:$.noop,onDeactivated:$.noop,requestResize:$.noop,getDirtyMessage:$.returnUndefined,querySize:function(){return{width:h.$element.width(),height:h.$element.height()}},onSizeChange:$.noop,defaultActivationArgs:{},isOpened:function(){return h.windowController&&h.windowController.isOpened.isTrue()},isEnabled:function(){return true}});var d=h.visualizers;for(var g=0;g<d.length;g++){d[g].postponeBinding()}var l=h.update;var k=h.initialize;var j=h.defaultPanelAppearance;h.$element.addDisplayingStates().data("panelController",h);var c=ContextValue.createContextClass(h.$element);var f=h.$innerDropPanelsContainer;$.extend(h,{wasInitialized:false,isActivated:false,isActivatedFlag:ObservableFlag.create(false),panelWrapper:undefined,use:function(){return h},performReadWriteInitialization:function(){$.readWrite(h.readWriteInitializationOperations,function(i){return i.read()},function(m,i){if(i!==undefined){m.write(i)}});h.readWriteInitializationOperations=[]},activateAssociatedBindings:function(){var n=h.bindings;for(var m=0;m<n.length;m++){n[m].activate()}},activateAssociatedVisualizers:function(){var m=h.visualizers;for(var n=0;n<m.length;n++){m[n].initialize().unPostponeBinding().activate()}},handlePanelContentUpdate:function(){if(h.isActivated){h.activateAssociatedVisualizers();h.performReadWriteInitialization();h.activateAssociatedBindings()}},getPanelAppearance:function(){return c.get()},setCustomPanelSize:function(i){h.customPanelSize=i;h.recalculateCustomPanelSize()},recalculateCustomPanelSize:function(i){i=$.valueOrDefault(i,false);if(!i||h.hasCustomPanelSize()){if(h.isActivated){var m=$.evaluateWhenFunction(h.customPanelSize);h.calculatedCustomPanelSize=m;h.updateCustomPanelSize(m);h.onSizeChange()}}},hasCustomPanelSize:function(){return !!h.customPanelSize},resetCustomPanelSize:function(){h.setCustomPanelSize(undefined)},requestResize:$.wrapMethod(h.requestResize,function(i){return function(m){h.lastRequestedSize=m;i(m)}}),setPanelID:function(i){h.$element.attr("id",i);return h},setInnerDropPanelsContainer:function(i){f=i},getInnerDropPanelsContainer:function(){return f},togglePanelWrapper:function(i,m){if(m){h.panelWrapper=i}else{if(h.panelWrapper===i){h.panelWrapper=undefined}}},getPanelWrapper:function(){return h.panelWrapper},toggleDisplayed:function(i,m){if(h.panelWrapper){h.panelWrapper.$element.toggleDisplayed(i,m)}else{h.$element.toggleDisplayed(i,m)}},toggleVisibility:function(i,m){if(h.panelWrapper){h.panelWrapper.$element.toggleVisibility(i,m)}else{h.$element.toggleVisibility(i,m)}},addVisibilityStates:function(){if(h.panelWrapper){h.panelWrapper.$element.addVisibilityStates()}else{h.$element.addVisibilityStates()}return h},requestDeactivationEvent:SimpleEvent.create(),requestDeactivation:function(i){if(h.isActivated){h.requestDeactivationEvent.fire(h,i)}},makeUnselectable:function(){h.$element.makeUnselectable();return h},update:function(){if(h.isActivated&&h.isEnabled()){l.apply(h,arguments)}},applyOnContext:function(i){ContextManager.apply(i,h.context)},getContext:function(){return h.context},setContext:function(o){if($.isFunction(o)){o=o()}h.context=o;var m=h.visualizers;for(var n=0;n<m.length;n++){m[n].setContext(o)}},initialize:function(n){if(!h.wasInitialized){h.beforePanelInitializedEvent.fire();h.wasInitialized=true;h.makeUnselectable();var m=h.visualizers;for(var o=0;o<m.length;o++){m[o].initialize();m[o].refreshBinding()}k(n);h.onSizeChange();h.panelInitializedEvent.fire()}},reactivate:function(){h.activate(h.lastActivationArgs,h.lastPanelContext)},activate:function(q,r,s){s=$.extend({customPanelAppearance:j},s);h.deactivate(true);h.duringActivation=true;h.setContext(r);h.lastActivationArgs=q;h.lastPanelContext=r;h.isActivated=true;h.isActivatedFlag.setTrue();if($.isFunction(q)){q=q()}var p=h.defaultActivationArgs;if(p!==undefined){if($.isFunction(p)){p=p()}else{p=$.extend({},p)}}q=$.extend(p,q);var m=$.weakID();q.activationId=m;q.activationNamespace="."+m;h.currentActivationArgs=q;c.set(s.customPanelAppearance);h.initialize();h.onActivating.call(h,q,r);h.panelActivatingEvent.fire(h,q,r);var n=h.scrollingControllers;for(var o=0;o<n.length;o++){n[o].toggleAutoRefresh(true)}h.activateAssociatedVisualizers();h.performReadWriteInitialization();h.activateAssociatedBindings();h.update();h.onActivated.call(h,q,r);h.panelActivatedEvent.fire();h.recalculateCustomPanelSize();h.duringActivation=false;return h},deactivate:function(p){p=$.valueOrDefault(p,false);if(!h.isActivated){return}h.maxPanelSize.setValue({width:Infinity,height:Infinity});h.$element.blurContextElement();h.isActivated=false;h.isActivatedFlag.setFalse();h.onDeactivated.call(h);var m=h.visualizers;for(var o=0;o<m.length;o++){m[o].postponeBinding().deactivate()}var n=h.scrollingControllers;for(var o=0;o<n.length;o++){n[o].toggleAutoRefresh(false)}var q=h.bindings;for(var o=0;o<q.length;o++){q[o].deactivate()}if(!p){h.panelDeactivatedEvent.fire()}},appendTo:function(i){h.$element.appendTo(i);return h},openInContext:function(o,m){m=$.extend({activationArgs:undefined,leftDelta:1,topDelta:1,showingAnimation:undefined,deactivationPredicate:$.returnTrue,closeCallback:$.noop,appendTo:"body",contextClass:""},m);if(!h.$contextContainer){h.$contextContainer=$("<span class='context-container panels-scope inline-block absolute-positioned'></span>").addClass(m.contextClass).appendTo(m.appendTo)}if(!o){o=h.openInContextEvent}var p=$.getMouseOffset(o);h.$element.appendTo(h.$contextContainer);h.$contextContainer.show().offset($.translateOffset(p,{left:m.leftDelta,top:m.topDelta})).positionInWindow({vertically:true,horizontally:true,verticalPadding:20,horizontalPadding:20});h.activate(m.activationArgs);h.openedInContext.fire(h,o);if(m.showingAnimation){h.$element.hide();m.showingAnimation(h.$element)}var i;if(h.requestDeactivationEvent){i=h.requestDeactivationEvent.bind(function(){n()})}$(document).bind("mousedown.closeContext",function(r){var q=$(r.target);if(!q.hasAncestor(h.$contextContainer)&&m.deactivationPredicate(q)){n()}});if(o){h.openInContextEvent=o}function n(){if(i!==undefined){h.requestDeactivationEvent.unbind(i)}$(document).unbind("mousedown.closeContext");h.$contextContainer.hide();h.deactivate();m.closeCallback()}},openAsDialog:function(i){if($.isFunction(i)){i=i(h)}i=$.extend({activationArgs:{},dialogOptions:{},modalDialogOptions:undefined},i);if(!i.dialogOptions.buttons){i.dialogOptions.buttons=ConfirmationPanel.OkCancelButtons}var m=PanelsManager.requestPanel(ConfirmationPanel);m.panelDeactivatedEvent.one(function(){PanelsManager.releasePanel(m)});m.openModal($.extend({buttons:i.dialogOptions.buttons},i.dialogOptions,{innerPanel:h,innerPanelActivationArgs:i.activationArgs}),i.modalDialogOptions)},makeAsWindow:function(n){n=$.extend({defaultActivationArgs:undefined,positioningFunction:function(s){s.center($.getWindowCenter(),{centerHorizontally:false,centerVertically:true}).right($(window).width()-50)},appendTo:"body",windowClass:undefined,isFloatingWindow:true,repositionOnActivation:true,repositionIfOpened:true,isDraggable:true,withWindowController:$.noop,horizontalAnchor:"left",verticalAnchor:"top"},n);var o=n.isDraggable;var m=n.withWindowController;var r=n.horizontalAnchor;var q=n.verticalAnchor;var i=$("<div class='designer-window'></div>").disableSelectionTriggering().addDisplayingStates().addVisibilityStates().addClass(n.windowClass).appendTo(n.appendTo).toggleDisplayed(false);if(o){DraggingBehaviours.Draggable.makeDraggable(i,{distance:3,contextOptions:{eventsCatcherClass:"cursor-move",behaviourOptions:{horizontalAnchor:r,verticalAnchor:q,containment:"window"}}})}if(n.isFloatingWindow){WindowsManager.setFloatingWindow(i)}var p={$element:i,options:n,isOpened:ObservableFlag.create(false),firstActivation:true,isDocked:false};h.windowController=p;m(p);return h},repositionWindow:function(i){var m=h.windowController;if(m!==undefined&&m.isOpened.isTrue()){if(i){i(m.$element)}else{m.reposition()}}},openAsDropPanel:function(n){n=$.extend({activationArgs:undefined,panelContext:undefined,positioningFunction:undefined,relativeTo:undefined,contextClass:undefined,appendTo:undefined,isDraggable:false,stackWithWindows:false,showingFunction:undefined,hidingFunctionBeforeShowing:function(r){r.hide()},closeCallback:$.noop,placeInsideWindow:true},n);var m=n.placeInsideWindow;var q=n.hidingFunctionBeforeShowing;var p=$("<span class='drop-panel-wrapper inline-block' style='position: absolute;'></span>").addClass(n.contextClass).appendTo($.valueOrDefault($.evaluateWhenFunction(n.appendTo),"body"));if(n.isDraggable){DraggingBehaviours.Draggable.makeDraggable(p,{distance:3,contextOptions:{eventsCatcherClass:"cursor-move",behaviourOptions:{containment:"window"}}})}if(n.stackWithWindows){WindowsManager.setFloatingWindow(p);WindowsManager.focusWindow(p)}h.deactivate();h.$element.appendTo(p).toggleClass("is-draggable",n.isDraggable);h.activate(n.activationArgs,n.panelContext);if(n.positioningFunction){var o;if(n.relativeTo){o=$(n.relativeTo)}if(m){p.positionToFit($.getWindowArea(),[function(r){n.positioningFunction(p,o,h)}],undefined,{fallbackPositioning:0})}else{n.positioningFunction(p,o,h)}}if(n.showingFunction){q(p);n.showingFunction.call(p,p,h)}var i=h.requestDeactivationEvent.bind(function(){h.deactivate()});h.panelDeactivatedEvent.one(function(){h.$element.detach();if(n.stackWithWindows){WindowsManager.removeFloatingWindow(p)}p.remove();i.unbind();n.closeCallback()});return h},deactivateOnClickOutside:function(n){n=$.extend({ignoredElementsFilters:[],mouseButton:false,activationScopeSelector:".panels-scope"},n);var m=n.mouseButton;if(!h.isActivated){return}var p=$.makeArray(n.ignoredElementsFilters);p.unshift(h.$element);p.push(".file-selector");var i=h.$element.closest(n.activationScopeSelector)[0];var o=$.uniqueID();$(document).bind("mousedown."+o,function(t,u){if(m!==false&&t.which!==m){return}var u=$.valueOrDefault(u,t.target);if(!h.isPinned.isTrue()){var q=$(u);var s=q.closest(n.activationScopeSelector)[0];if(s===i){var r=q.parents().andSelf();if($.all(p,function(v){return r.filter(v).length===0})){h.requestDeactivation()}}}});h.panelDeactivatedEvent.one(function(){$(document).unbind("mousedown."+o)})},openWindow:function(v){v=$.extend({onlyWhenClosed:false,activationArgs:undefined,positioningFunction:undefined,contextClass:undefined,appendTo:undefined,showingFunction:undefined,noDeactivation:false,relativeTo:undefined,positionInWindow:true,horizontalAnchor:undefined,verticalAnchor:undefined,panelContext:undefined},v);var r=v.onlyWhenClosed;var o=v.activationArgs;var q=v.relativeTo;var s=v.horizontalAnchor;var i=v.verticalAnchor;var m=v.panelContext;var t=h.windowController;if(t===undefined){t=h.makeAsWindow({horizontalAnchor:s,verticalAnchor:i}).windowController;h.windowController=t}var n=t.isOpened.isTrue();if(r&&n){return t}s=$.valueOrDefault(s,t.options.horizontalAnchor);i=$.valueOrDefault(i,t.options.verticalAnchor);if(t.isOpened.isTrue()&&!v.noDeactivation){h.closeWindow()}WindowsManager.focusWindow(t.$element);t.lastOpeningOptions=v;var p=t.options;var u=$.valueOrDefault(v.positioningFunction,p.positioningFunction);t.$element.append(h.$element).toggleDisplayed(true);h.$element.toggleClass("is-draggable",!!p.isDraggable);if(v.contextClass){t.$element.addClass(v.contextClass)}if(v.appendTo){t.$element.appendTo(v.appendTo)}h.activate($.extend({},p.defaultActivationArgs,o),m);if(t.firstActivation||(p.repositionOnActivation&&h.isPinned.isFalse())){if(!n||p.repositionIfOpened){u(t.$element,q,h)}}t.reposition=function(){u(t.$element,q,h)};if(v.positionInWindow){t.$element.positionInWindow({horizontally:true,vertically:true,horizontalAnchor:s,verticalAnchor:i})}t.firstActivation=false;t.isOpened.setTrue();t.deactivationBinding=h.requestDeactivationEvent.bind(function(){h.closeWindow()});if(v.positionInWindow){$(window).bind("resize.window"+h.id,function(w){if(w.target===window||w.target===document){t.$element.positionInWindow({horizontally:true,vertically:true,horizontalAnchor:s,verticalAnchor:i})}})}if(v.showingFunction&&!n){t.$element.hide();v.showingFunction.call(t.$element,t.$element,h)}return t},closeWindow:function(){var i=h.windowController;if(i.isOpened.isTrue()){h.requestDeactivationEvent.unbind(i.deactivationBinding);$(window).unbind("resize.window"+h.id);i.isOpened.setFalse();h.deactivate();i.$element.toggleDisplayed(false);if(i.lastOpeningOptions.contextClass!==undefined){i.$element.removeClass(i.lastOpeningOptions.contextClass)}}},openModal:function(o,m){m=$.extend({closeButtonClass:undefined,contextClass:undefined},m);var i=SimpleEvent.createEventListener($.getWindowSizeEvent(),function(){var r=$.getWindowSize();var q={width:r.width-400,height:r.height-200};var t=r.width-100;var s=r.height-50;if(q.width<978){q.width=Math.min(978,t)}if(q.height<500){q.height=Math.min(500,s)}h.requestResize(q);Dialog.reCenterTheDialog(h.$element)});var n=$.extend({},m,{onOpened:function(){h.activate(o);i.activateAndExecute();h.panelDeactivatedEvent.one(function(){i.deactivate()})}});var p=Dialog.open(h.$element,n);if(p.$closeButton){p.$closeButton.remove()}if(m.closeButtonClass){p.$closeButton=$("<span class='inline-block {0}'></span>".format(m.closeButtonClass)).appendTo(p.$dialogContainer).makeButton().buttonClick(function(){h.requestDeactivation()});p.$closeButton.css({position:"absolute",right:0-p.$closeButton.width()/2,top:0-p.$closeButton.height()/2})}if(h.requestDeactivationEvent){h.requestDeactivationEvent.bind(function(){h.closeModal();return true})}return h},closeModal:function(){Dialog.close(h.$element);h.deactivate()}});return h}};(function(a){a.createDropPanelWindow=function(b,d){d=a.extend({activationArgs:undefined,panelContext:undefined,placeInsideWindow:undefined,positioningFunction:undefined,contextClass:undefined,appendTo:"body",showingFunction:undefined,hidingFunctionBeforeShowing:undefined,isDraggable:true,stackWithWindows:true,bindTogglingState:false,deactivateOnClickOutside:true,deactivateOnSelectionChanged:Global.IsDesigner,openCallback:a.noop,closeCallback:a.noop,ignoredElementsFilters:[]},d);var g=ObservableFlag.create(undefined,{valueChangeCallback:function(j){if(j){d.openCallback()}else{d.closeCallback()}}});var i;if(d.deactivateOnSelectionChanged){i=SimpleEvent.createEventListener([SelectionManager.Events.SelectionChangedSimple],function(){c.close()})}var f=[];var c={panel:b,open:function(j,l){if(g.isFalse()){var k=h();g.setTrue();l=a.extend({},d,l);k.openAsDropPanel({activationArgs:l.activationArgs,panelContext:l.panelContext,positioningFunction:l.positioningFunction,relativeTo:j,contextClass:l.contextClass,appendTo:l.appendTo,showingFunction:l.showingFunction,isDraggable:l.isDraggable,stackWithWindows:l.stackWithWindows,placeInsideWindow:l.placeInsideWindow,hidingFunctionBeforeShowing:l.hidingFunctionBeforeShowing});if(l.deactivateOnClickOutside){var m=f;if(l.ignoredElementsFilters&&l.ignoredElementsFilters.length>0){m=a.merge(f.clone(),l.ignoredElementsFilters)}k.deactivateOnClickOutside({ignoredElementsFilters:m})}if(l.deactivateOnSelectionChanged){i.activate()}k.panelDeactivatedEvent.one(function(){g.setFalse();if(l.deactivateOnSelectionChanged){i.deactivate()}})}},close:function(){if(g.isTrue()){h().requestDeactivation()}},toggle:function(){if(c.isOpened()){c.close()}else{c.open()}},isOpened:function(){return g.getValue()},addDeactivationIgnoredElements:function(){a.merge(f,arguments)},connectButton:function(l,j){j=a.extend({dropPanelOpenedClass:"state-toggled",dropPanelClosedClass:"state-untoggled",dropPanelClassTarget:undefined,onClosingRequest:a.returnTrue},j);var k=j.onClosingRequest;var m=ContextValue.createContextClass({getTarget:function(){return a.valueOrDefault(j.dropPanelClassTarget,l)}});g.valueChangedEvent.bindAndExecute(function(){if(g.isTrue()){m.set(j.dropPanelOpenedClass)}else{m.set(j.dropPanelClosedClass)}});l.addClass("attached-drop-panel-window").buttonClick(function(){if(c.isOpened()){if(k()){c.close()}}else{c.open(l,j)}});f.push(l)}};return c;function h(){return PanelsManager.usePanel(b)}};a.fn.attachDropPanelWindow=function(c,d){d=a.extend({dropPanelOpenedClass:"state-toggled",dropPanelClosedClass:"state-untoggled",withDropPanelController:undefined},d);var b=a.createDropPanelWindow(c,d);b.connectButton(this,d);if(d.withDropPanelController){var f=this;d.withDropPanelController({open:function(){b.open(f,d)},close:function(){b.close()},isOpened:function(){return b.isOpened()}})}return this}})(jQuery);var Panels={};(function(a){a.fn.onContextMenu=function(c){for(var b=0;b<this.length;b++){this[b].oncontextmenu=function(d){if(!d){d=window.event}d.cancelBubble=true;if(d.stopPropagation){d.stopPropagation()}if(d.preventDefault){d.preventDefault()}if(d.returnValue){d.returnValue=false}c(d)}}return this}})(jQuery);(function(f){f.fn.cssAnimate=function(k,j){j=f.extend({duration:400,complete:undefined,enableCssTransition:true},j);var m=f.isEmptyObject(k);if(m||j.duration===0){if(!m){this.css(k)}if(j.complete){j.complete()}}else{if(f.support.transition&&j.enableCssTransition){var i;if(j.complete){var l=f.count(k);var h=0;i=function(){h++;if(h===l){j.complete()}}}var n=this;setTimeout(function(){n.animateProperties(k,{duration:j.duration,complete:i})},0)}else{this.animate(k,{duration:j.duration,always:j.complete})}}return this};f.fn.stopCssAnimation=function(){this.stopAllPropertiesAnimation();this.stop(true,true);return this};f.fn.stopAllPropertiesAnimation=function(){return this.stopPropertiesAnimation(this.getAnimatedProperties())};f.fn.getAnimatedProperties=function(){var h=this.data("transitions");if(h){return f.getKeys(h)}else{return[]}};f.fn.stopPropertiesAnimation=function(m){m=f.makeArray(m);var h=this;var l=h.data("transitions");if(l){for(var k=0;k<m.length;k++){var j=m[k];j=g(j);var n=l[j];if(n){delete l[j];if(n.complete){n.complete()}}}}d(h,l);return this};function g(h){return h.replace(/([A-Z])/g,function(i,j){return"-"+j.toLowerCase()})}f.fn.animateProperties=function(i,h){h=f.extend({duration:400,complete:undefined},h);this.stopPropertiesAnimation(f.getKeys(i));for(var j in i){b(this,j,i[j],h)}};function c(h){getComputedStyle(h[0]).display}function b(h,j,m,k){var l=h.data("transitions");if(l===undefined){l={};h.data("transitions",l)}j=g(j);var i=f.support.transitionEvent+"."+j;if(l[j]){h.unbind(i)}l[j]={duration:k.duration,targetValue:m,complete:k.complete};h.bind(i,function(n){if(n.originalEvent.propertyName===j){h.unbind(i);var o=l[j];if(o){delete l[j];if(o.complete){o.complete()}d(h,l)}}});d(h,l);h.css(j,m)}function d(h,i){if(i===undefined){i=f.valueOrDefault(h.data("transitions"),{})}var m=new StringBuilder(",");for(var k in i){var j=i[k];m.append("{0} {1}ms",a(k),j.duration)}var l=m.toString();if(!l){l="none"}h.css(f.support.transitionPrefix+"transition",l)}function a(h){switch(h){case"borderRadiusTopLeft":return"border-top-left-radius";case"borderRadiusTopRight":return"border-top-right-radius";case"borderRadiusBottomLeft":return"border-bottom-left-radius";case"borderRadiusBottomRight":return"border-bottom-right-radius";case"glow":case"innerGlow":case"dropShadow":case"dropInnerShadow":switch(f.support.boxShadow){case"MozBoxShadow":return"-moz-box-shadow";case"WebkitBoxShadow":return"-webkit-box-shadow";default:return"box-shadow"}default:return h}}})(jQuery);(function(){var a=document.body||document.documentElement;var b=a.style;$.support.transition=false;if(b.WebkitTransition!==undefined){$.support.transitionEvent="webkitTransitionEnd";$.support.transitionPrefix="-webkit-";$.support.transition=true}else{if(b.MozTransition!==undefined){$.support.transitionEvent="transitionend";$.support.transitionPrefix="-moz-";$.support.transition=true}else{if(b.OTransition!==undefined){$.support.transitionEvent="oTransitionEnd";$.support.transitionPrefix="-o-";$.support.transition=true}}}})();var Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(c){var a="";var l,j,g,k,h,f,d;var b=0;c=Base64._utf8_encode(c);while(b<c.length){l=c.charCodeAt(b++);j=c.charCodeAt(b++);g=c.charCodeAt(b++);k=l>>2;h=((l&3)<<4)|(j>>4);f=((j&15)<<2)|(g>>6);d=g&63;if(isNaN(j)){f=d=64}else{if(isNaN(g)){d=64}}a=a+this._keyStr.charAt(k)+this._keyStr.charAt(h)+this._keyStr.charAt(f)+this._keyStr.charAt(d)}return a},decode:function(c){var a="";var l,j,g;var k,h,f,d;var b=0;c=c.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(b<c.length){k=this._keyStr.indexOf(c.charAt(b++));h=this._keyStr.indexOf(c.charAt(b++));f=this._keyStr.indexOf(c.charAt(b++));d=this._keyStr.indexOf(c.charAt(b++));l=(k<<2)|(h>>4);j=((h&15)<<4)|(f>>2);g=((f&3)<<6)|d;a=a+String.fromCharCode(l);if(f!=64){a=a+String.fromCharCode(j)}if(d!=64){a=a+String.fromCharCode(g)}}a=Base64._utf8_decode(a);return a},_utf8_encode:function(b){b=b.replace(/\r\n/g,"\n");var a="";for(var f=0;f<b.length;f++){var d=b.charCodeAt(f);if(d<128){a+=String.fromCharCode(d)}else{if((d>127)&&(d<2048)){a+=String.fromCharCode((d>>6)|192);a+=String.fromCharCode((d&63)|128)}else{a+=String.fromCharCode((d>>12)|224);a+=String.fromCharCode(((d>>6)&63)|128);a+=String.fromCharCode((d&63)|128)}}}return a},_utf8_decode:function(a){var b="";var d=0;var f=c1=c2=0;while(d<a.length){f=a.charCodeAt(d);if(f<128){b+=String.fromCharCode(f);d++}else{if((f>191)&&(f<224)){c2=a.charCodeAt(d+1);b+=String.fromCharCode(((f&31)<<6)|(c2&63));d+=2}else{c2=a.charCodeAt(d+1);c3=a.charCodeAt(d+2);b+=String.fromCharCode(((f&15)<<12)|((c2&63)<<6)|(c3&63));d+=3}}}return b}};var GradientStopsTypes={Opacity:1,Color:2};(function(b){var a=undefined;function c(){if(a===undefined){var g=document.createElement("div");var f="background-image: -moz-linear-gradient(red, blue);background-image: -webkit-linear-gradient(red, blue);background-image: -o-linear-gradient(red, blue);background-image: linear-gradient(red, blue);background-image: -webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, red), color-stop(100%, blue));";var d=g.style;d.cssText=f;a=/(^|\s)-webkit-gradient/.test(d.backgroundImage)}return a}b.fn.clearBackground=function(){if(b.browser.msie&&parseInt(b.browser.version)<9){this.empty()}else{this.css("background-image","")}return this};b.calculateGradientColorStopValue=function(f,g,d){if(!g&&!d){return b.Color("black")}if(!g){return d.value}if(!d){return g.value}return b.calculateMeanColor(f,g.location,d.location,b.Color(g.value),b.Color(d.value))};b.calculateGradientOpacityStopValue=function(i,f,h){if(!f&&!h){return 1}if(!f){return h.value}if(!h){return f.value}var g=i-f.location;var j=h.location-f.location;var k=h.value;var d=f.value;return d+(k-d)/j*g};b.solidToGradient=function(f,d){return{gradient:{colorStops:[{location:0,value:f},{location:100,value:f}],opacityStops:[{location:0,value:1},{location:100,value:1}]},orientation:d}};b.isGradient=function(d){return b.isPlainObject(d)&&d.gradient!==undefined};b.fn.applyGradientColor=function(d){return this.setGradient(b.valueOrDefault(d.orientation,Orientation.Vertical),d.gradient)};b.cloneGradient=function(d,f){f=b.valueOrDefault(f,false);var g=d.gradient;return{gradient:{colorStops:b.map(g.colorStops,function(h){return{location:h.location,value:f?b.Color(h.value):h.value}}),opacityStops:b.map(g.opacityStops,function(h){return{location:h.location,value:h.value}})},orientation:d.orientation}};b.getExplorer9GradientCSS=function(q){var g=q.orientation;var m=q.gradient;var f=b.uniqueID();var p=(g===Orientation.Vertical?100:0);var d=(g===Orientation.Horizontal?100:0);var o=new StringBuilder("");o.append('<?xml version="1.0" ?>');o.append('<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 1 1" preserveAspectRatio="none">');o.append('<linearGradient id="{0}" gradientUnits="userSpaceOnUse" x1="0%" y1="0%" x2="{1}%" y2="{2}%">',f,d,p);for(var l=0;l<m.length;l++){var h=m[l];var k=b.Color(h.color);var n=b.valueOrDefault(h.stop,0);o.append('<stop offset="{0}%" stop-color="{1}" stop-opacity="{2}"/>',n,k.toHEX(),b.valueOrDefault(k[3],1))}o.append("</linearGradient>");o.append('<rect x="0" y="0" width="1" height="1" fill="url(#{0})" />',f);o.append("</svg>");var j=Base64.encode(o.toString());return"url(data:image/svg+xml;base64,"+j+")"};b.fn.setGradient=function(j,h){var m=this;var f,s,r,w,q,t,n;if(b.isPlainObject(h)){h=b.normalizeGradientStops(h)}h[0].stop=0;h[h.length-1].stop=100;m.css("background-color","");if(b.browser.msie&&parseInt(b.browser.version)==9){m.css("background-image",b.getExplorer9GradientCSS({orientation:j,gradient:h}))}else{if(b.browser.msie&&parseInt(b.browser.version)<9){m.empty();f=new StringBuilder("");for(s=1;s<h.length;s++){w=h[s-1];r=h[s];t=b.Color(w.color);q=b.Color(r.color);var v=r.stop-w.stop;f.append("<span style=\"display: {5}; height: {0}%; width: {1}%; filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='{2}', endColorstr='{3}', gradientType='{4}');\"></span>",j===Orientation.Vertical?v:100,j===Orientation.Horizontal?v:100,o(t),o(q),j===Orientation.Vertical?0:1,j===Orientation.Vertical?"block":"inline-block")}m.html(f.toString())}else{f=new StringBuilder(",");var l=b.support.linearGradient==="linear-gradient";var g=c();var u,k;if(l||!g){u="linear-gradient({0})";k="{1} {0}%"}else{u="-webkit-gradient({0})";k="color-stop({0}%, {1})"}if(j===Orientation.Vertical){if(l){f.append("to bottom")}else{if(g){f.append("linear, 50% 0%, 50% 100%")}else{f.append("top")}}}else{if(l){f.append("to right")}else{if(g){f.append("linear, 0% 50%, 100% 50%")}else{f.append("left")}}}for(s=0;s<h.length;s++){r=h[s];q=r.color;n=b.valueOrDefault(r.stop,0);var p=q.toRGB();var d="rgba({0},{1},{2},{3})".format(p[0],p[1],p[2],p[3]);f.append(k.format(Math.floor(n),d))}b(this).css("background-image",u.format(f.toString()))}}function o(i){var x=i.toHEX();var y=Math.floor(b.valueOrDefault(i[3],1)*255).toString(16);if(y.length===1){y="0"+y}return"#"+y+x.substr(1)}}})(jQuery);(function(){$.normalizeGradientStops=function(q){var m=f(q.colorStops,q.opacityStops);var p=[];for(var o=0;o<m.length;o++){var n=m[o];var l=n.color;l[3]=$.adjustFraction($.valueOrDefault(l[3],1)*n.opacity,2);p.push({stop:n.location,color:l})}return p};function f(r,w){var r=a(r);var w=j(w);var z=0,q=0;var v,m;var t=r[0];var y=w[0];var A=[];while(t){if(!y){console.warn("Bad gradient stops")}if(y.location<t.location){if(!v){console.warn("Bad gradient - Impossible that previous stop doesn't exist")}var x=y.location;var u=v.location;var o=t.location;var n=v.value;var s=t.value;var p=$.Color([Math.floor($.calculateMeanValue(x,u,o,n[0],s[0])),Math.floor($.calculateMeanValue(x,u,o,n[1],s[1])),Math.floor($.calculateMeanValue(x,u,o,n[2],s[2])),$.calculateMeanValue(x,u,o,$.valueOrDefault(n[3],1),$.valueOrDefault(s[3],1))]);A.push({location:y.location,opacity:y.value,color:p});q++;m=y;y=w[q]}else{if(t.location<y.location){if(!m){console.warn("Bad gradient - Impossible that previous stop doesn't exist")}var x=t.location;var u=m.location;var o=y.location;var l=$.calculateMeanValue(x,u,o,m.value,y.value);A.push({location:t.location,opacity:l,color:t.value});z++;v=t;t=r[z]}else{A.push({location:t.location,opacity:y.value,color:t.value});z++;v=t;t=r[z];q++;m=y;y=w[q]}}}if(y){console.warn("Bad gradient stops")}return A}function a(l){return c(k(l),$.Color("black"),i,function(m){return $.Color(m)})}function j(l){return c(l,1,g,function(m){return m})}function g(m,l){return m===l}function i(m,l){if(!m||!l){return m===l}else{return $.color.isEqual(m,l)}}function k(n){var l=[];for(var o=0;o<n.length;o++){var m=n[o];l.push({location:m.location,value:$.Color(m.value).toRGB()})}return l}function c(s,m,n,l){if(s.length==0){return[{location:0,value:m},{location:100,value:m}]}var r=[];for(var p=0;p<s.length;p++){r.push(s[p])}if(!d(r)){h(r)}var q=r[0];var o=r[r.length-1];if(q.location!=0){r.unshift({location:0,value:l(q.value)})}if(o.location!=100){r.push({location:100,value:l(o.value)})}r=b(r,function(u,v,t){return v.location!=u.location||v.location!=t.location});if(r[0].location==r[1].location){r.shift()}if(r[r.length-1].location==r[r.length-2].location){r.pop()}r=b(r,function(u,v,t){return !n(v.value,u.value)||!n(v.value,t.value)});return r}function b(p,m){if(p.length<3){return p}else{var l=[p[0]];for(var o=1;o<p.length-1;o++){var n=p[o];if(m(p[o-1],n,p[o+1])){l.push(n)}}l.push(p[p.length-1]);return l}}function d(m){if(m.length>1){for(var l=1;l<m.length;l++){if(m[l].location<m[l-1].location){return false}}}return true}function h(l){l.orderBy(function(n,m){return[n.location,m]},function(n,m){if(n[0]!=m[0]){return n[0]-m[0]}else{return n[1]-m[1]}})}})(jQuery);var ContextValue=new function(){var a=this;this.create=function(c){c=$.extend({valueChangeCallback:$.noop},c);var d=undefined;var b={set:function(f){if(f!==d){var g=d;d=f;c.valueChangeCallback(d,g);return true}return false},get:function(){return d},clear:function(){b.set(undefined)},toggle:function(g,f){if(f){b.set(g)}else{if(d===g){b.clear()}}}};return b};this.createContextClass=function(b){if(!$.isPlainObject(b)){b={getTarget:b}}b=$.extend({getTarget:undefined,valueChangeCallback:$.noop},b);var c=b.getTarget;var d=b.valueChangeCallback;return a.create({valueChangeCallback:function(h,g){var f=$.evaluateWhenFunction(c);if(g!==undefined){f.removeClass(g)}if(h!==undefined){f.addClass(h)}d(h,g)}})};this.createClassesFlags=function(c){c=$.extend({getTarget:undefined},c);var f={};var d=c.getTarget;var b={clear:function(){b.set($.mapDictionary(f,$.returnFalse))},getActiveClasses:function(){var g=[];$.each(f,function(h,i){if(i){g.push(h)}});return g},set:function(i){var j=[];var m=[];for(var h in i){var l=i[h];var k=!!f[h];if(l&&!k){m.push(h)}if(!l&&k){j.push(h)}f[h]=l}if(m.length>0||j.length>0){var g;if($.isFunction(d)){g=d()}else{g=d}if(m.length>0){g.addClass(m.join(" "))}if(j.length>0){g.removeClass(j.join(" "))}}}};return b};this.createSingleTargetClass=function(d){var c=undefined;var b={setTarget:function(f){if(c&&!c.is(f)){c.removeClass(d)}c=f;if(c){c.addClass(d)}},getTarget:function(){return c},clear:function(){b.setTarget(undefined)}};return b}}();(function(b){var a;b.preventClick=function(){if(a===undefined){a=b("<div class='events-catcher'></div>").addDisplayingStates().toggleDisplayed(false).appendTo("body")}a.toggleDisplayed(true);b(document).one("mouseup",function(){a.toggleDisplayed(false)})};b.whenMouseFocused=function(m){m=b.extend({sensitivity:7,interval:100,triggeringEvent:undefined,callback:b.noop},m);var d=m.sensitivity;var c=m.interval;var i=m.triggeringEvent;var k=m.callback;var l=b.weakID(".mousefocused");var h;var j;if(i){h=b.getMouseOffset(i);j=h}var g={};b(document).bind("mousemove"+l,function(n){j=b.getMouseOffset(n);if(!h){h=j}});var f=setInterval(function(){if(!j||(Math.abs(j.top-h.top)<=d&&Math.abs(j.left-h.left)<=d)){g.stop();k()}else{h=j}},c);return b.extend(g,{stop:function(){b(document).unbind("mousemove"+l);clearInterval(f)}})};b.onDistanceMove=function(f,h,g){var d="mousemove.distancemove"+b.uniqueID();if(isFinite(h)){h={horizontal:h,vertical:h}}var c=b.getMouseOffset(f);b(document).bind(d,function(l){var m=b.getMouseOffset(l);var k=false;if(h.horizontal!==undefined){var j=Math.abs(m.left-c.left);if(j>=h.horizontal){k=true}}if(!k&&h.vertical!==undefined){var i=Math.abs(m.top-c.top);if(i>=h.vertical){k=true}}if(k){b(document).unbind(d);g(l,m)}});return function(){b(document).unbind(d)}};b.onceMouseUpInArea=function(d,g,f){if(isFinite(g)){g={horizontal:g,vertical:g}}var c=b.getMouseOffset(d);b(document).one("mouseup",function(j){var l=b.getMouseOffset(j);var k=false;if(g.horizontal!==undefined){var i=Math.abs(l.left-c.left);if(i>g.horizontal){k=true}}if(!k&&g.vertical!==undefined){var h=Math.abs(l.top-c.top);if(h>g.vertical){k=true}}if(!k){f(j,l)}})}})(jQuery);var PoolingController=new (function(){var a=this;this.create=function(c){c=$.extend({onStartPooling:$.noop,onEndPooling:$.noop,timeout:100},c);var g=ObservableFlag.createFlagsObserver();var j={};var d=ObservableFlag.createConditionalPositive();var h;var b={};b=$.extend({attach:function(l,k,m){m=m?m:$.uniqueID();j[m]={isPostponed:ObservableFlag.createConditionalNegative(),startCallback:l,finishCallback:k};return{callbackId:m,detach:function(){b.detach(m)},postpone:function(n){b.postponePooling(m,n)},unPostpone:function(n){b.unPostponePooling(m,n)}}},detach:function(k){delete j[k]},postponePooling:function(l,m){var k=j[l];if(k){k.isPostponed.setValue(true,m)}},unPostponePooling:function(l,m){var k=j[l];if(k){k.isPostponed.setValue(false,m)}},getCallbacksLength:function(){return $.getKeys(j).length},stopPooling:function(k){d.setValue(false,k)},startPooling:function(k){d.setValue(true,k);if(d.isTrue()){i()}}},b);f();function f(){c.onStartPooling();i();c.onEndPooling();h=window.setTimeout(function(){f()},c.timeout)}function i(){if(d.isTrue()){for(var k in j){var l=j[k];if(l&&l.isPostponed.isFalse()){l.currentValue=l.startCallback()}}for(var k in j){var l=j[k];if(l&&l.isPostponed.isFalse()){l.finishCallback(l.currentValue)}}}}return b}})();var ObservableObject=new function(){this.createNumerical=function(a,b){return ObservableObject.create(a,$.extend({},b,{equalityComparer:$.referencesEqualityComparer}))};this.createTextual=function(a,b){return ObservableObject.create($.valueOrDefault(a,""),$.extend({},b,{equalityComparer:$.referencesEqualityComparer}))};this.createReferenceObject=function(a){return ObservableObject.create(undefined,$.extend({},a,{equalityComparer:$.referencesEqualityComparer}))};this.createJqueryObject=function(a){return ObservableObject.create(undefined,$.extend({},a,{equalityComparer:function(c,b){if(!c||!b){return c===b}if(c.length!==b.length){return false}return c.not(b).length===0}}))};this.isObservableObject=function(a){return $.isPlainObject(a)&&a.isObservableObject};this.create=function(c,d){d=$.extend({valueConverter:$.identity,equalityComparer:$.defaultEqualityComparer,valueChangeCallback:$.noop,tag:undefined},d);var a=d.tag;var b={};var f=c;$.extend(b,{isObservableObject:true,valueChangedEvent:SimpleEvent.create(),adjustValue:function(h,g){b.setValue(h(b.getValue()),g)},getValue:function(){return f},setValue:function(h,g){h=d.valueConverter(h);if(!d.equalityComparer(f,h)){var i=f;f=h;b.valueChangedEvent.fire(b,h,i,g);d.valueChangeCallback.call(b,h,i,g);return true}return false},getTag:function(){return a},isEqual:function(g){return d.equalityComparer(f,g)},onValueChanged:function(g){return b.valueChangedEvent.bind(g)},createValueListener:function(g){return SimpleEvent.createEventListener(b.valueChangedEvent,g)},trackValues:function(g,h){h=$.extend({setCallback:$.noop,unsetCallback:$.noop,statusChangeCallback:$.noop},h);g=$.makeArray(g);var i=$.inArray(f,g)>=0;if(i){h.setCallback()}return b.valueChangedEvent.bind(function(){if($.inArray(f,g)>=0&&!i){i=true;h.setCallback();h.statusChangeCallback(true)}else{if($.inArray(f,g)<0&&i){i=false;h.unsetCallback();h.statusChangeCallback(false)}}})},bind:function(h,g){var g=b.valueChangedEvent.bind(h,g);h.call(b,f);return g},unbind:function(g){b.valueChangedEvent.unbind(g)}});return b};this.createValueBinding=function(b,l){l=$.extend({notifiedValuesFilter:$.returnTrue,valueConverter:$.identity,valueChangeCallback:$.noop,synchronizeToCurrentValue:false,autoActivate:false},l);var c={};var d=undefined;var k=undefined;var g=undefined;var j=false;var a=false;var h=false;var f=b.valueChangedEvent.bind(i);$.extend(c,{valueChangedEvent:SimpleEvent.create(),adjustValue:function(m){if(!h){c.setValue(m(b.getValue()))}},setValue:function(m){if(!h){if(j){a=true;g=m;b.setValue(m);a=false}else{d=m;k=undefined}}},activate:function(){if(!j){j=true;if(d!==undefined){c.setValue(d)}if(k){i(k)}}},deactivate:function(){if(j){d=undefined;j=false}},toggleActive:function(m){if(m){c.activate()}else{c.deactivate()}},destroy:function(){f.unbind()}});if(l.autoActivate){c.activate()}if(l.synchronizeToCurrentValue){i(b.getValue())}return c;function i(m){if(!a){if(j){m=l.valueConverter(m);h=true;var n=g;g=m;if(l.notifiedValuesFilter(m,n)){l.valueChangeCallback(m);c.valueChangedEvent.fire(c,m)}h=false}else{k=m;d=undefined}}}};this.createPropertyBinding=function(a,d){d=$.extend({propertyName:undefined,observableObject:undefined},d);var h=OperationsBatch.create();var g=d.observableObject?d.observableObject:ObservableObject.create();var c=d.propertyName;var f=g.valueChangedEvent.bind(function(i){h.performOperation(function(){a.properties[c].bindingValue=i;PropertiesManager.recomputePropertyValue(a,c)},"binding")});a.properties[c].bindingObject=g;var b={clearBinding:function(){delete a.properties[c].bindingValue;delete a.properties[c].bindingConroller;f.unbind();PropertiesManager.recomputePropertyValue(a,c)},getObservable:function(){return g},setValue:function(i){g.setValue(i)},getValue:function(i){return g.getValue()},postponeUpdates:function(){h.start()},unPostponeUpdates:function(){h.finish()}};a.properties[c].bindingConroller=b;return b}}();(function(c){var a={activate:c.noop,deactivate:c.noop,dispose:c.noop,activateAndExecute:c.noop};c.fn.bindContent=function(f,d){return b(this,f,false,d)};c.fn.bindTextContent=function(f,d){return b(this,f,true,d)};c.fn.bindClassName=function(i,g){g=c.extend({valueConverter:c.identity,whenUndefined:"",executeOnStart:true},g);var f=g.valueConverter;var j=g.executeOnStart;i=c.valueOrDefault(c.evaluateWhenFunction(i),g.whenUndefined);var d=this;if(typeof i==="string"){d.addClass(i);return a}var k=ContextValue.createContextClass(d);var h=i.createValueListener(function(){var l=f(i.getValue());k.set(l)});if(j){h.activateAndExecute()}else{h.activate()}return h};function b(f,j,d,h){h=c.extend({valueConverter:c.identity,executeOnStart:true,textOnly:false,whenUndefined:""},h);var g=h.valueConverter;var k=h.executeOnStart;j=c.valueOrDefault(c.evaluateWhenFunction(j),h.whenUndefined);if(typeof j==="string"){if(d){f.text(j)}else{f.html(j)}return a}var i=j.createValueListener(function(){var l=g(j.getValue());if(d){f.text(l)}else{f.html(l)}});if(k){i.activateAndExecute()}else{i.activate()}return i}})(jQuery);(function(){var d;var b;var f;var a;var c=$(window);$.getWindowSize=function(){if(f){return a}else{return $.calculateWindowSize()}};$.resetBodyTrackedSize=function(){_lastTrackingBodySize=undefined};$.getWindowSizeEvent=function(){if(!b){var i=$.uniqueID();var j=c;b=SimpleEvent.create(j,{setUp:function(){f=true;j.bind("resize."+i,function(k){if(k.target===window||k.target===document){h()}});g()},tearUp:function(){f=false;j.unbind("resize."+i)}})}return b};$.resetWindowSize=function(){h()};$.refreshWindowSize=g;function h(){g();b.fire(c,a)}function g(){a=$.calculateWindowSize()}$.setDocumentTitle=function(k){var j=Global.IsDesigner?ApplicationManager.getBrandText()+" Editor ({0})":"{0}";var i=undefined;if(Global.IsDesigner){i=$.getRootDocument()[0]}if(!i){i=window.document}if(i){i.title=j.format(k)}};$.callRootFunction=function(l){var j=$.restArguments(arguments,1);var i=$.getRootWindow();var k=i[l];if(k!==undefined){k.apply(i,j)}}})();var DynamicFonts=new function(){var b=DeferredObject.create(function(){var f=$('<style rel="stylesheet" type="text/css" />').appendTo("head");var h=f[0];var d=h[h.sheet?"sheet":"styleSheet"];var c=false;try{d.insertRule(createFontRule("test","test"),0);c=true}catch(g){}f.remove();return c});var a=DeferredObject.create(function(){return !$.browser.msie});this.create=function(p){p=$.extend({fonts:[]},p);var f={};var i=false;var g;var d;var o=[];var n=[];var j={};$.extend(j,{FontsUpdateBatch:OperationsBatch.create({batchFinishCallback:function(){if(o.length>0){j.addFonts(o);o=[]}if(n.length>0){j.removeFonts(n);n=[]}}}),getStyleSheet:function(){return g},getRegisteredFonts:function(){return f},isRegisteredFont:function(q){return f[q]!==undefined},addFont:function(q,r){j.addFonts([{fontFamily:q,fontUrlPrefix:r}])},addFonts:function(v){h();if(j.FontsUpdateBatch.isActive()){$.merge(o,v);return}v=$.makeArray(v);var q=[];for(var t=0;t<v.length;t++){var r=v[t];var u=r.fontFamily;var y=r.fontUrlPrefix;var w=f[u];if(w===undefined){var x=k(u,y);w={ruleCSS:x};f[u]=w;q.push(w)}}if(b.get()){for(var t=0;t<q.length;t++){var s=q[t];g.insertRule(s.ruleCSS,0);s.rule=g.cssRules[0]}}else{if(q.length>0){l()}}},removeFonts:function(w){w=$.makeArray(w);if(j.FontsUpdateBatch.isActive()){$.merge(n,w);return}var v=[];for(var t=0;t<w.length;t++){var r=w[t];var q=f[r];if(q!==undefined){v.push(q.rule);delete f[r]}}if(a.get()){for(var t=0;t<v.length;t++){var u=v[t];var s=$.inArray(u,g.cssRules);m(g,s)}}else{if(v.length>0){l()}}}});if(p.fonts.length>0){h()}return j;function h(){if(!i){i=true;d=c();g=d[d.sheet?"sheet":"styleSheet"]}}function c(){var w=p.fonts;var v=new StringBuilder();v.append('<style rel="stylesheet" type="text/css" >');for(var t=0;t<w.length;t++){var s=w[t];var r=s.fontFamily;var u=s.fontUrlPrefix;var q=k(r,u);v.append(q);f[r]={ruleCSS:q}}v.append("</style>");return $(v.toString()).appendTo("head")[0]}function m(r,q){if(r.deleteRule){r.deleteRule(q)}else{r.removeRule(q)}}function l(){$(d).remove();d=$('<style rel="stylesheet" type="text/css" />').appendTo("head")[0];var q=d.sheet?"sheet":"styleSheet";g=d[q];g.cssText=$.map(f,function(r){return r.ruleCSS}).join("\n")}function k(r,t){var q=new StringBuilder();var s="?"+document.domain;q.append("@font-face {").append('font-family: "{0}";',r).append("src:url('{0}.eot{1}');",t,s).append("src:url('{0}.eot{1}#iefixhlochz') format('embedded-opentype'),",t,s).append("url('{0}.woff{1}') format('woff'),",t,s).append("url('{0}.ttf{1}') format('truetype'),",t,s).append("url('{0}.svg{1}#font') format('svg');",t,s).append("}");return q.toString()}}}();var ImageBoxLayout={Stretched:"fill",Cover:"stretchedToFill",Fit:"stretched",FitWhenBigger:"fitWhenBigger",Original:"normal",Tile:"repeat",TileHorizontally:"repeatHorizontally",TileVertically:"repeatVertically",Custom:"custom"};var ImageBoxState={NoImage:"state-no-image",LoadingImage:"state-loading-image",ImageLoaded:"state-image-loaded",ImageError:"state-image-error",PendingImage:"state-pending-image"};var PendingImage={};var ImageBoxUtil={calculateImageSizeInLayout:function(c,b,d){var a;if(d.width===0||d.height===0||c.width===0||c.height===0){return{width:0,height:0}}if($.isPlainObject(b)){a={width:b.widthRatio*d.width,height:b.heightRatio*d.height}}else{switch(b){case ImageBoxLayout.Stretched:a={width:d.width,height:d.height};break;case ImageBoxLayout.Cover:a=$.stretch(c,d,true,{ceilFractions:true});break;case ImageBoxLayout.Fit:a=$.stretch(c,d,false,{ceilFractions:true});break;case ImageBoxLayout.FitWhenBigger:if(c.width>d.width||c.height>d.height){a=$.stretch(c,d,false,{ceilFractions:true})}else{a=$.extend({},c)}break;case ImageBoxLayout.Original:a=$.extend({},c);break}}return{width:Math.floor(a.width),height:Math.floor(a.height)}},isCustomLayout:function(a){return $.isPlainObject(a)}};(function(d){var g=d.createFieldsEqualityComparer(["imageUrl"]);d.fn.makeImageBoxNew=function(p){p=d.extend({autoLoad:true,optimizeSpeed:true,layout:ImageBoxLayout.Fit,position:{vertical:"center",horizontal:"center"},viewPort:{width:0,height:0},imageUrl:undefined,imageSize:undefined},p);var o={};var n=this.addClass("image-box-new").toggleClass("optimize-speed",p.optimizeSpeed);var q=d("<span class='image-box-image-wrapper block'></span>").appendTo(n);var r={id:d.weakID("imagebox"),loadingAnimation:undefined,viewPort:undefined,layout:undefined,position:undefined,imageInfo:undefined,pendingImageInfo:undefined,loadingImageInfo:undefined,imageSizeInLayout:undefined,forceBackgroundImage:false,useBackgroundImage:false,borderRadius:{bottomRight:0,topRight:0,topLeft:0,bottomLeft:0},borderWidth:{top:0,left:0,bottom:0,right:0},layoutClass:ContextValue.createContextClass({getTarget:function(){return q}}),horizontalPositionClass:ContextValue.createContextClass({getTarget:function(){return q}}),verticalPositionClass:ContextValue.createContextClass({getTarget:function(){return q}}),useBackgroundImageClass:ContextValue.createContextClass({getTarget:function(){return q}}),stateClass:ContextValue.createContextClass({getTarget:function(){return n}}),state:ObservableObject.create(undefined,{valueChangeCallback:function(s){r.stateClass.set(s);o.stateChangedEvent.fire(o,s)}})};d.extend(o,{$element:n,$imageWrapper:q,$image:undefined,stateChangedEvent:SimpleEvent.create(),viewportChangedEvent:SimpleEvent.create(),getState:function(){return r.state},trackStates:function(s,t){return r.state.trackValues(s,t)},setImage:function(s,v){if(s===undefined){return}if(typeof s==="string"){s={imageUrl:s,imageSize:undefined}}if(s&&s!==PendingImage&&!s.imageUrl){s=null}var t=g(s,r.imageInfo)&&r.loadingImageInfo===undefined;var u=g(s,r.loadingImageInfo);if(t||u){r.pendingImageInfo=undefined;return}r.pendingImageInfo=s;if(p.autoLoad){a(o,r,v)}return o},clearImage:function(){o.setImage(null);return o},loadImage:function(s){a(o,r,s);return o},setBorderWidth:function(s){s=d.extend({top:0,left:0,right:0,bottom:0},r.borderWidth,s);if(!d.borderWidthEqualityComparer(r.borderWidth,s)){r.borderWidth=s;n.css({"border-top-width":s.top,"border-left-width":s.left,"border-bottom-width":s.bottom,"border-right-width":s.right});h(o,r);d.updateInnerBorderRadius(o.$imageWrapper,r.borderRadius,r.borderWidth)}},setBorderRadius:function(s){s=d.extend({topLeft:0,topRight:0,bottomLeft:0,bottomRight:0},r.borderRadius,s);if(!d.borderRadiusEqualityComparer(r.borderRadius,s)){var t=r.borderRadius;r.borderRadius=s;d.updateInnerBorderRadius(o.$imageWrapper,r.borderRadius,r.borderWidth);if(m(t)!==m(s)){f(o,r)}}},setViewPort:function(t,s){t=d.extend({width:0,height:0},r.viewPort,t);if(!d.sizesEqual(r.viewPort,t)||s){r.viewPort=t;h(o,r)}},getActualViewPort:function(){return l(r)},setAlt:function(s){o.alt=s;if(o.$image){if(s){o.$image.attr("alt",s)}else{o.$image.removeAttr("alt")}}},setPosition:function(s){s=d.extend({vertical:"center",horizontal:"center"},r.position,s);if(!j(s,r.position)){r.position=s;r.horizontalPositionClass.set("horizontal-"+s.horizontal);r.verticalPositionClass.set("vertical-"+s.vertical);f(o,r)}},setLayout:function(s){if(!i(s,r.layout)){r.layout=s;r.layoutClass.set(s);f(o,r)}},getLayout:function(){return r.layout},synchronizeViewPort:function(){o.setViewPort(n.elementSize())},toggleForceBackgroundImage:function(s){r.forceBackgroundImage=s;f(o,r)},getImageSizeInLayout:function(){return r.imageSizeInLayout},setLoadingAnimation:function(s){r.loadingAnimation=s;n.toggleClass("has-loading-animation",!!s)}});o.setViewPort(p.viewPort);o.setPosition(p.position);o.setLayout(p.layout);if(p.imageUrl){o.setImage({imageUrl:p.imageUrl,imageSize:p.imageSize})}else{o.clearImage()}return o};function h(n,p){var o=l(p);n.$imageWrapper.css(o);f(n,p);n.viewportChangedEvent.fire(n,o)}function a(p,u,t){if(u.pendingImageInfo===undefined){return}var o=u.pendingImageInfo;u.pendingImageInfo=undefined;if(u.$asyncImage){u.$asyncImage.unbind().remove();u.$asyncImage=undefined}var s=p.$image;if(s){s.unbind()}if(!o||o===PendingImage){if(s){s.remove()}p.$imageWrapper.css("background-image","");p.$image=undefined;u.imageInfo=undefined;if(o===PendingImage){u.state.setValue(ImageBoxState.PendingImage)}else{u.state.setValue(ImageBoxState.NoImage)}return}var r=d("<img class='image-box-image-new' />").appendTo(p.$imageWrapper);if(t){r.quickHide();u.$asyncImage=r;u.loadingImageInfo=o}else{if(s){s.remove()}p.$image=r;u.imageInfo=o;p.setAlt(p.alt)}var q=o.imageSize!==undefined;u.state.setValue(ImageBoxState.LoadingImage);r.one("load",function(){u.state.setValue(ImageBoxState.ImageLoaded);n()}).one("error",function(){u.state.setValue(ImageBoxState.ImageError);n()});d.unite(r,p.$imageWrapper).toggleClass("unknown-size",!q);r.attr("src",o.imageUrl);if(q){f(p,u)}function n(){if(t){if(s){s.remove()}p.$image=r;p.setAlt(p.alt);u.imageInfo=o;u.$asyncImage=undefined;u.loadingImageInfo=undefined;r.quickShow()}if(!q){d.unite(r,p.$imageWrapper).removeClass("unknown-size");if(u.useBackgroundImage){u.useBackgroundImageClass.set("use-image-element")}u.imageInfo.imageSize={width:r.prop("width"),height:r.prop("height")};if(u.useBackgroundImage){u.useBackgroundImageClass.set("use-background-image")}f(p,u)}else{if(t){f(p,u)}}}}function f(o,q){if(!q.viewPort||!q.position||!q.layout||!q.imageInfo||q.imageInfo.imageSize===undefined){return}var r=(q.forceBackgroundImage&&!!d.support.backgroundSize)||k(q.layout)||(b()&&m(q.borderRadius));q.useBackgroundImageClass.set(r?"use-background-image":"use-image-element");q.useBackgroundImage=r;var p=undefined;if(r){o.$imageWrapper.css("background-image","url("+q.imageInfo.imageUrl+")");if(k(q.layout)){o.$imageWrapper.css("background-size","")}else{p=ImageBoxUtil.calculateImageSizeInLayout(q.imageInfo.imageSize,q.layout,l(q));o.$imageWrapper.css("background-size","{width}px {height}px".format(p))}}else{o.$imageWrapper.css("background-image","");p=ImageBoxUtil.calculateImageSizeInLayout(q.imageInfo.imageSize,q.layout,l(q));var n;if(q.layout===ImageBoxLayout.Stretched){n={marginLeft:0,marginTop:0}}else{n=c(q.position,p,l(q),q.layout)}o.$image.css(p).css(n).attr("width",p.width).attr("height",p.height)}q.imageSizeInLayout=p}function l(q){var r=q.viewPort;var n=q.borderWidth;var p=n.left+n.right;var o=n.top+n.bottom;return{width:r.width-p,height:r.height-o}}function c(s,n,r,o){var q=0;var p=0;if(d.isPlainObject(o)){p=o.leftRatio*r.width;q=o.topRatio*r.height}else{switch(s.horizontal){case"right":p=r.width-n.width;break;case"center":p=Math.round(r.width/2-n.width/2);break}switch(s.vertical){case"bottom":q=r.height-n.height;break;case"center":q=Math.round(r.height/2-n.height/2);break}}return{marginTop:q,marginLeft:p}}function j(o,n){if(o===undefined||n===undefined){return o===n}else{return(o.horizontal===n.horizontal&&o.vertical===n.vertical)}}function i(o,n){if(o===undefined||n===undefined){return o===n}else{if(d.isPlainObject(o)!==d.isPlainObject(n)){return false}else{if(d.isPlainObject(o)){return(o.leftRatio===n.leftRatio&&o.topRatio===n.topRatio&&o.widthRatio===n.widthRatio&&o.heightRatio===n.heightRatio)}else{return o===n}}}}function k(n){switch(n){case ImageBoxLayout.TileHorizontally:case ImageBoxLayout.TileVertically:case ImageBoxLayout.Tile:return true;default:return false}}function m(n){return n&&(n.topLeft>0||n.topRight>0||n.bottomLeft>0||n.bottomRight>0)}function b(){return !!d.browser.opera}})(jQuery);
/*!
* jQuery.Rule - Css Rules manipulation, the jQuery way.
* Copyright (c) 2007-2011 Ariel Flesler - aflesler(at)gmail(dot)com | http://flesler.blogspot.com
* Dual licensed under MIT and GPL.
* Date: 02/7/2011
* Compatible with jQuery 1.2+
*
* @author Ariel Flesler
* @version 1.0.2
*
* @id jQuery.rule
* @param {Undefined|String|jQuery.Rule} The rules, can be a selector, or literal CSS rules. Many can be given, comma separated.
* @param {Undefined|String|DOMElement|jQuery) The context stylesheets, all of them by default.
* @return {jQuery.Rule} Returns a jQuery.Rule object.
*
* @example $.rule('p,div').filter(function(){ return this.style.display != 'block'; }).remove();
*
* @example $.rule('div{ padding:20px;background:#CCC}, p{ border:1px red solid; }').appendTo('style');
*
* @example $.rule('div{}').append('margin:40px').css('margin-left',0).appendTo('link:eq(1)');
*
* @example $.rule().not('div, p.magic').fadeOut('slow');
*
* @example var text = $.rule('#screen h2').add('h4').end().eq(4).text();
*/
(function(f){var b=f('<style rel="stylesheet" type="text/css" />').appendTo("head")[0],j=b.sheet?"sheet":"styleSheet",h=b[j],l=h.rules?"rules":"cssRules",g=h.deleteRule?"deleteRule":"removeRule",c=h.ownerNode?"ownerNode":"owningElement",d=/^([^{]+)\{([^}]*)\}/m,k=/([^:]+):([^;}]+)/;h.disabled=false;var i=f.rule=function(m,n){if(!(this instanceof i)){return new i(m,n)}this.sheets=i.sheets(n);if(m&&d.test(m)){m=i.clean(m)}if(typeof m=="object"&&!m.exec){a(this,m.get?m.get():m.splice?m:[m])}else{a(this,this.sheets.cssRules().get());if(m){return this.filter(m)}}return this};f.extend(i,{sheets:function(n){var m=n;if(typeof m!="object"){m=f.makeArray(document.styleSheets)}m=f(m).not(h);if(typeof n=="string"){m=m.ownerNode().filter(n).sheet()}return m},rule:function(m){if(m.selectorText){return["",m.selectorText,m.style.cssText]}return d.exec(m)},appendTo:function(o,m,n){switch(typeof m){case"string":m=this.sheets(m);case"object":if(m[0]){m=m[0]}if(m[j]){m=m[j]}if(m[l]){break}default:if(typeof o=="object"){return o}m=h}var s;if(!n&&(s=this.parent(o))){o=this.remove(o,s)}var q=this.rule(o);if(m.addRule){m.addRule(q[1],q[2]||";")}else{if(m.insertRule){m.insertRule(q[1]+"{"+q[2]+"}",m[l].length)}}return m[l][m[l].length-1]},remove:function(n,o){o=o||this.parent(n);if(o!=h){var m=o?f.inArray(n,o[l]):-1;if(m!=-1){n=this.appendTo(n,0,true);o[g](m)}}return n},clean:function(m){return f.map(m.split("}"),function(n){if(n){return i.appendTo(n+"}")}})},parent:function(n){if(typeof n=="string"||!f.browser.msie){return n.parentStyleSheet}var m;this.sheets().each(function(){if(f.inArray(n,this[l])!=-1){m=this;return false}});return m},outerText:function(m){return !m||!m.selectorText?"":[m.selectorText+"{","\t"+m.style.cssText,"}"].join("\n").toLowerCase()},text:function(n,m){if(m!==undefined){n.style.cssText=m}return !n?"":n.style.cssText.toLowerCase()}});i.fn=i.prototype={pushStack:function(m,o){var n=i(m,o||this.sheets);n.prevObject=this;return n},end:function(){return this.prevObject||i(0,[])},filter:function(m){var n;if(!m){m=/./}if(m.split){n=f.trim(m).toLowerCase().split(/\s*,\s*/);m=function(){var o=this.selectorText||"";return !!f.grep(o.toLowerCase().split(/\s*,\s*/),function(p){return f.inArray(p,n)!=-1}).length}}else{if(m.exec){n=m;m=function(){return n.test(this.selectorText)}}}return this.pushStack(f.grep(this,function(p,o){return m.call(p,o)}))},add:function(m,n){return this.pushStack(f.merge(this.get(),i(m,n)))},is:function(m){return !!(m&&this.filter(m).length)},not:function(o,m){o=i(o,m);return this.filter(function(){return f.inArray(this,o)==-1})},append:function(m){var o=this,n;f.each(m.split(/\s*;\s*/),function(q,p){if((n=k.exec(p))){o.css(n[1],n[2])}});return this},text:function(m){return !arguments.length?i.text(this[0]):this.each(function(){i.text(this,m)})},outerText:function(){return i.outerText(this[0])}};f.each({ownerNode:c,sheet:j,cssRules:l},function(n,o){var p=o==l;f.fn[n]=function(){return this.map(function(){return p?f.makeArray(this[o]):this[o]})}});f.fn.cssText=function(){return this.filter("link,style").eq(0).sheet().cssRules().map(function(){return i.outerText(this)}).get().join("\n")};f.each("remove,appendTo,parent".split(","),function(m,n){i.fn[n]=function(){var o=f.makeArray(arguments),p=this;o.unshift(0);return this.each(function(q){o[0]=this;p[q]=i[n].apply(i,o)||p[q]})}});f.each(("each,index,get,size,eq,slice,map,attr,andSelf,css,show,hide,toggle,queue,dequeue,stop,animate,fadeIn,fadeOut,fadeTo").split(","),function(m,n){i.fn[n]=f.fn[n]});function a(n,m){n.length=0;Array.prototype.push.apply(n,m)}f(window).unload(function(){f(h).cssRules().remove()})})(jQuery);var TransitionOrder={Simultaneously:1,EnterBeforeExit:2,ExitBeforeEnter:3};var Transitions=new function(){this.slideHorizontally=function(m,l,n){n=$.extend({});var i=m.height();var k=m.width();var a=m.prop("style")["height"];var j=m.hasClass("overflow-hidden");var h=m.hasClass("positioned");var c=$("<div></div>").css({width:k,position:"absolute",left:0,top:0});var b=$("<div></div>").css({width:k,position:"absolute",left:0,top:0}).append(m.children()).appendTo(c);var f=$("<div></div>").append(l).appendTo(m);var g=m.height();f.appendTo(c).css({width:k,position:"absolute",left:k,top:0});m.height(i).addClass("positioned").addClass("overflow-hidden");c.appendTo(m);if(g>i){m.height(g)}var d=c.animate({left:-k}).promise();$.when(d).done(function(){l.appendTo(m);c.remove();m.css("height",a);if(!h){m.removeClass("positioned")}if(!j){m.removeClass("overflow-hidden")}})};this.executeTransition=function(b,c,a){a=$.extend({transitionOrder:TransitionOrder.Simultaneously,entranceAnimation:{animation:Animations.NoAnimation,duration:400,easing:"linear"},exitAnimation:{animation:Animations.NoAnimation,duration:400,easing:"linear"}},a);b.stop(true,true);c.stop(true,true)}}();var RemoteSettings=new function(){this.create=function(c){c=$.extend({getSettingsValue:function(g){},setSettingsValue:function(g,i,j,h){}},c);var d={};var b={};var f={};var a={getValue:function(i,g){if(b[i]){return d[i]}var k=c.getSettingsValue(i);if(k!==undefined){try{k=JSON.parse(k)}catch(j){}}var h=(k!==undefined);if(!h){k=g}f[i]=h;d[i]=k;b[i]=true;return k},setValue:function(h,i,g){g=$.extend({onSuccess:$.noop,onError:$.noop},g);d[h]=i;b[h]=true;c.setSettingsValue(h,JSON.stringify(i),g)},createObservableObject:function(k,h,j){j=$.extend({observableObjectOptions:undefined,updateOptions:undefined,updateServerOnChange:true},j);var g=j.observableObjectOptions;var i=j.updateOptions;var m=j.updateServerOnChange;var l=a.getValue(k,h);var n=ObservableObject.create(l,g);n.valueChangedEvent.bind(function(o){if(m){a.setValue(k,o,i)}else{d[k]=o;b[k]=true}});return n},createObservableFlag:function(k,h,j,i){var l=a.getValue(k,h);var g=ObservableFlag.create(l,j);g.valueChangedEvent.bind(function(m){a.setValue(k,m,i)});return g}};return a}}();(function(b){var a=undefined;b.isIOS=function(){if(a===undefined){var c=navigator.appVersion;a=(/iphone|ipad|ipod/gi).test(c)}return a};b.getIOSWindowHeight=function(){var c=document.documentElement.clientWidth/window.innerWidth;return window.innerHeight*c};b.getHeightOfIOSToolbars=function(){var c=(window.orientation===0?screen.height:screen.width)-b.getIOSWindowHeight();return c>1?c:0}})(jQuery);var StyleListener=new function(){var h=this;var d;var g=$.createPolling(function(){d.fire(this,$.now())},100);var c=OperationsBatch.create();var b=false;d=SimpleEvent.create(this,{setUp:function(){h.IsActive.setTrue("Events")},tearUp:function(){h.IsActive.setFalse("Events")},beforeFireEvent:function(){c.start()},afterFireEvent:function(){c.finish()}});this.IsActive=ObservableFlag.createConditionalPositive({valueChangeCallback:function(i){if(i){g.start()}else{g.stop()}}});this.IsActive.setFalse("Events");this.setInterval=function(i){g.setDefaultInterval(i)};this.checkNow=function(){b=true;g.poll();b=false};this.create=function(o,q){q=$.extend({minInterval:0,properties:undefined,callback:undefined},q);var l=$.makeArray(q.properties);var n=q.callback;var p=q.minInterval;if(n===undefined){throw new Error("Style change callback is missing")}var k=[];var i;var j=function(u){i=u;var r=undefined;for(var v=0;v<l.length;v++){var w=l[v];var s=f(o,w);var t=k[v];if(t===undefined||!a(w,t,s)){k[v]=s;if(!r){r={}}r[w]={value:s,prevValue:t}}}if(r){c.performOperation(function(){n(r)});return true}return false};var m=SimpleEvent.createEventListener(d,function(r){if(!b&&i!==undefined&&(r-i)<p){return}j(r)});m.checkForChanges=function(){return j($.now())};return m};function f(i,j){switch(j){case"width":case"outerWidth":case"height":case"outerHeight":case"offset":return i[j]();case"scrollHeight":return i[0].scrollHeight;case"scrollWidth":return i[0].scrollWidth;default:return i.css(j)}}function a(j,k,i){switch(j){case"offset":return k.top===i.top&&k.left===i.left;default:return k===i}}}();var ColorsHelper=new function(){this.compositeColorsEqualityComparer=function(k,j){var c=ColorsHelper.isGradient(k);var b=ColorsHelper.isGradient(j);if(c!==b){return false}if(c){var i=k.orientation;var g=j.orientation;if(i!==g){return false}var f=k.gradient;var d=j.gradient;var h=$.arraysEqual(f.colorStops,d.colorStops,{equalityComparer:function(m,l){if(m.location!==l.location){return false}return ColorsHelper.bindableColorsEqualityComparer(m.value,l.value)}});if(!h){return false}else{return $.arraysEqual(f.opacityStops,d.opacityStops,{equalityComparer:function(m,l){return m.location===l.location&&m.value===l.value}})}}else{return ColorsHelper.bindableColorsEqualityComparer(k,j)}};this.bindableColorsEqualityComparer=function(c,b){var f=ThemeColorsManager.isColorBinding(c);var d=ThemeColorsManager.isColorBinding(b);if(f!==d){return false}else{if(f){return ThemeColorsManager.themeColorBindingEqualityComparer(c,b)}else{return $.colorsEqual(c,b)}}};this.cloneColor=function(b){if(!b){return b}else{if($.isGradient(b)){return ColorsHelper.cloneGradient(b)}else{if(ThemeColorsManager.isSolidColorBinding(b)){return ColorsHelper.cloneSolidColorBinding(b)}else{return $.Color(b)}}}};this.cloneSolidColorBinding=function(b){if(!b){return b}return ThemeColorsManager.createThemeColorBinding(b.mainColor,{variation:b.variation,opacity:b.opacity,brightness:b.brightness})};this.cloneGradient=function(c){if(!c){return c}var b=c.gradient;return{gradient:{colorStops:$.map(b.colorStops,function(d){return{location:d.location,value:ColorsHelper.cloneColor(d.value)}}),opacityStops:$.map(b.opacityStops,function(d){return{location:d.location,value:d.value}})},orientation:c.orientation}};this.convertToApplicableColor=function(b){if(!b){return b}if(ThemesManager.isBinding(b)){return ThemesManager.evaluateCurrentPageThemeBinding(b)}if(ThemeColorsManager.isSolidColorBinding(b)||typeof b==="string"){return b}if(ColorsHelper.isGradient(b)){return ColorsHelper.mapGradientColorValues(b,function(c){return ColorsHelper.convertToApplicableColor(c)})}return $.Color(b).toCSS()};this.toggleGradientOrientation=function(b){if(!b){return b}return ColorsHelper.adjustGradientOrientation(b,b.orientation===Orientation.Vertical?Orientation.Horizontal:Orientation.Vertical)};this.adjustGradientOrientation=function(c,b){if(!c){return c}c=ColorsHelper.cloneGradient(c);c.orientation=$.evaluateWhenFunction(b);return c};this.reverseGradient=function(b){if(!b){return b}b=ColorsHelper.cloneGradient(b);var c=b.gradient;c.colorStops=$.reverseArray(c.colorStops,function(d){return{value:d.value,location:d.location=100-d.location}});c.opacityStops=$.reverseArray(c.opacityStops,function(d){return{value:d.value,location:d.location=100-d.location}});return b};this.getBrightness=function(b){return $.adjustFraction($.getCoordinateValue(b,ColorCoordinate.Brightness),2)};this.getHue=function(b){return $.adjustFraction($.getCoordinateValue(b,ColorCoordinate.Hue),2)};this.getSaturation=function(b){return $.adjustFraction($.getCoordinateValue(b,ColorCoordinate.Saturation),2)};this.changeBrightness=function(b,c){b=$.Color(b).toHSL();return $.Color([b[0],b[1],Math.max(0,Math.min(1,$.adjustFraction(c,2)))],"HSL")};this.isGradient=function(b){return $.isPlainObject(b)&&b.gradient!==undefined};this.getGradientColorValues=function(b){return $.map(b.gradient.colorStops,function(c){return c.value})};this.mapGradientColorValues=function(d,f){var b=d.gradient.opacityStops;var c=d.gradient.colorStops;return{gradient:{opacityStops:$.map(b,function(g){return $.extend({},g)}),colorStops:$.map(c,function(g){return{location:g.location,value:f(g.value)}})},orientation:d.orientation}};this.getColorComponentValue=function(b,c){b=ColorsHelper.convertToColorSpace(b,ColorsHelper.getColorSpaceByComponent(c));return b[a(c)]};this.getCompositeColorOpacity=function(b){if(ThemeColorsManager.isSolidColorBinding(b)){return $.valueOrDefault(b.opacity,1)}else{if(ColorsHelper.isGradient(b)){return $.valueOrDefault(b.opacity,1)}else{return ColorsHelper.getOpacity(b)}}};this.adjustOpacity=function(b,f){if(ThemeColorsManager.isSolidColorBinding(b)){return ThemeColorsManager.adjustThemeColorBinding(b,{opacity:f($.valueOrDefault(b.opacity,1))})}else{if(ColorsHelper.isGradient(b)){var d=ColorsHelper.cloneGradient(b);d.opacity=f($.valueOrDefault(d.opacity,1));return d}}b=$.Color(b);var c=$.merge([],b);c[3]=f($.valueOrDefault(c[3],1));return $.Color(c,b.space)};this.adjustBrightness=function(b,c){if(!b){return b}else{if(ColorsHelper.isGradient(b)){b=ColorsHelper.cloneGradient(b);$.each(b.gradient.colorStops,function(f,d){d.value=ColorsHelper.adjustBrightness(d.value,c)})}else{if(ThemeColorsManager.isSolidColorBinding(b)){return ThemeColorsManager.adjustThemeColorBinding(b,{brightness:Math.min(1,Math.max(-1,c($.valueOrDefault(b.brightness,0))))})}else{return ColorsHelper.adjustColorComponent(b,ColorSpaceComponent.L,c)}}}};this.getOpacity=function(b){b=$.Color(b);return $.valueOrDefault(b[3],1)};this.adjustColorComponent=function(c,d,g){c=ColorsHelper.convertToColorSpace(c,ColorsHelper.getColorSpaceByComponent(d));var b=a(d);var f=$.merge([],c);f[b]=g(f[b]);return $.Color(f,c.space)};this.convertToColorSpace=function(b,c){b=$.Color(b);switch(c){case ColorSpace.RGB:return b.toRGB();case ColorSpace.HSL:return b.toHSL();default:return b}};this.getColorSpaceByComponent=function(b){switch(b){case ColorSpaceComponent.R:case ColorSpaceComponent.G:case ColorSpaceComponent.B:return ColorSpace.RGB;case ColorSpaceComponent.H:case ColorSpaceComponent.S:case ColorSpaceComponent.L:return ColorSpace.HSL}};function a(b){switch(b){case ColorSpaceComponent.R:return 0;case ColorSpaceComponent.G:return 1;case ColorSpaceComponent.B:return 2;case ColorSpaceComponent.H:return 0;case ColorSpaceComponent.S:return 1;case ColorSpaceComponent.L:return 2}}}();var ScrollingView=new function(){this.create=function(j,l){l=$.extend({scrollbarClass:undefined,instanceClass:undefined,$scrollbar:undefined,$customMouseWheelTarget:undefined},l);var d=l.instanceClass;var g=l.scrollbarClass;var f=l.$scrollbar;var b=l.$customMouseWheelTarget;var c=$('<div class="scrolling-view positioned"></div>').addClass(d);var i=$('<div class="scrolling-pane positioned"></div>').addClass(d).appendTo(c);var h=$('<div class="scrolled-content"></div>').addClass(d).appendTo(i);if(!f){f=$('<div class="scrollbar"></div>').appendTo(c)}f.addClass(g).addClass(d);c.insertBefore(j);j.appendTo(h);var a=i.scrollable({scrollableContainer:$.valueOrDefault(b,i)});var k=f.scrollBar({reactToSlideAreaClick:true,handleMinSize:80,autoHide:true}).connectToScrollable(a);k.isVisible.valueChangedEvent.bindAndExecute(function(){$.unite(c,i,h).chooseClass(k.isVisible.isTrue(),"scrollbar-visible","scrollbar-hidden")});return{$element:c,$scrollingPane:i,$scrolledContent:h,$scrollbar:f,scrollingController:a,toggleAutoRefresh:function(m){a.toggleAutoRefresh(m)},refreshScrolling:function(){a.refresh()}}}}();var FontDetect=new function(){var a=false;var c=["serif","sans-serif","monospace","cursive","fantasy"];var b={};function d(){if(a){return}a=true;$("body > :first-child").before('<div id="fontdetectHelper"><span>abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ</span></div>');$("#fontdetectHelper").css({position:"absolute",visibility:"hidden",top:"-200px",left:"-100000px",width:"100000px",height:"200px","font-size":"100px"})}this.onFontLoaded=function(j,m){m=$.extend({successCallback:$.noop,errorCallback:$.noop,finishCallback:$.noop,interval:100,timeout:2000},m);var g=m.successCallback;var i=m.errorCallback;var n=m.finishCallback;var f=m.interval;var k=m.timeout;if(!a){d()}if(FontDetect.isFontLoaded(j)){g(j);n(j)}var l=new Date().getTime();var h=setInterval(function(){if(FontDetect.isFontLoaded(j)){clearInterval(h);g(j);n(j)}else{var o=new Date().getTime();if((o-l)>k){clearInterval(h);i(j);n(j)}}},f)};this.isFontLoaded=function(f){if(!f){return true}var k=0;var i=0;var h=f.toLowerCase();if(!a){d()}if(b[h]){return true}for(var g=0;g<c.length;++g){var j=$("#fontdetectHelper > SPAN");j.css("font-family",f+","+c[g]);k=j.width();if(g>0&&k!=i){return false}i=k}b[h]=true;return true};this.whichFont=function(f){var g=$(f).css("font-family");var i=g.split(",");var h=i.shift();while(h){h=h.replace(/^\s*['"]?\s*([^'"]*)\s*['"]?\s*$/,"$1");if(FontDetect.isFontLoaded(h)){return h}h=i.shift()}return null}}();(function(a){a.rememberScrolling=function(){if(ViewManager.isDesignMode()){return DesignerManager.rememberScrollingViewport()}var b=a.getScrollingController();var c=b.$scrollableForRead.scrollTop();var d=b.$scrollableForRead.scrollLeft();return{restore:function(){b.$scrollableForWrite.scrollTop(c);b.$scrollableForWrite.scrollLeft(d)}}};a.getScrollingController=function(){var b;var c;if(ViewManager.isDesignMode()){c=b=DesignerManager.getScrollablePane()}else{if(Global.IsDesigner&&ViewMobileWrapperMode.IsActive.isTrue()){c=b=ViewMobileWrapperMode.getScrollablePane()}else{b=a(document);c=a("html, body")}}return{$scrollableForRead:b,$scrollableForWrite:c}};a.getScrollOffset=function(){var b=a.getScrollingController().$scrollableForRead;return{top:b.scrollTop(),left:b.scrollLeft()}}})(jQuery);var AjaxNavigation=new (function(){var h=this;var k;var m;var i;var l;var o=/\/$/;var n=/^\//;var j=/#(.*)$/;var d;this.initialize=function(p){p=$.extend({usePushState:true,useHash:false,useGlobalBindClick:true,useHashFallbackAsFragment:false,fragmentChangedCallback:$.noop,globalBindClass:"internal-link",loadFragmentCallback:undefined},p);m=p.usePushState&&!!window.history&&!!window.history.pushState;l=p.useHash;i=p.loadFragmentCallback;d=p.fragmentChangedCallback;if(l){$(window).hashchange(b)}if(m){$(window).on("popstate",b)}if(p.useGlobalBindClick){$(document).on("click."+p.globalBindClass,"a."+p.globalBindClass,function(t){var q=$(t.currentTarget);var u=q.attr("target");if(u!=="_blank"&&u!=="_top"){t.preventDefault();var s=c();var r=q.attr("href");if(r.indexOf(s)===0){r=r.substring(s.length)}h.navigate(r)}t.stopPropagation()})}k=a(undefined,p.useHashFallbackAsFragment)};this.isPushState=function(){return m};this.getFragment=function(){return k};function c(){var p=window.location;if(p.hostname==="localhost"){var r=p.pathname.split("/");var t=r[3];var q=$.getLocationOrigin()+"/view/"+r[2]+"/"+r[3];return q+"/"}else{var s=p.hostname.split(".");if((s[s.length-2]==="webzai"||s[s.length-2]=="thebestswebsitebuilder")&&s[s.length-1]==="com"){var t=p.pathname.split("/")[1];return $.getLocationOrigin()+"/"+t+"/"}else{return $.getLocationOrigin()+"/"}}}this.getFullHtmlUrl=function(p){return c()+p};this.navigate=function(r,q){q=$.extend({disableLoading:false},q);r=a(r||"");if(k===r){return}if(q.disableLoading){k=r}if(l){window.location.hash="#"+r}else{var p=this.getFullHtmlUrl(r);if(r===""&&p!=="/"){p=p.slice(0,-1)}if(m){window.history.pushState(null,document.title,p);if(!q.disableLoading){f(r)}}else{window.location.assign(p)}}if(q.disableLoading&&(l||m)){d()}};function g(){var p=window.location.href.match(j);return p?p[1]:""}function a(p,q){if(p==null){if(l){p=g()}else{p=decodeURI(window.location.pathname).replace(n,"").replace(o,"");if(q&&!p){p=g()}}}else{p=decodeURI(p).trim(" ").replace(n,"").replace(o,"")}return p.trim(" ").toLowerCase()}function f(p){k=a(p);d();i(k)}function b(){var p=a();if(p===k){return false}f(p)}})();var PanelUtils=new function(){this.calculateCustomHeightProperties=function(h,i){h=$.extend({minHeight:"",maxHeight:"",height:""},h);i=$.valueOrDefault(i,0);var g=h.minHeight;var f=h.maxHeight;var a=h.height;var b=$.isNumeric(f);var d=$.isNumeric(g);var c=$.isNumeric(a);if($.isNumeric(a)){a-=i;f="none";g="none"}else{a="";if($.isNumeric(f)){f-=i}else{f=""}if($.isNumeric(g)){g-=i}else{g=""}}return{maxHeight:f,minHeight:g,height:a}}}();var MouseTargetTracker=new function(){this.create=function(p,q){q=$.extend({trackedAreasSelector:[],onStartedBeingTarget:$.noop,onStoppedBeingTarget:$.noop,onMouseTargetChange:$.noop,areaSelector:$.identity,relativeOffset:{left:0,top:0}},q);var k=q.trackedAreasSelector;var j=q.onStartedBeingTarget;var m=q.onStoppedBeingTarget;var d=q.onMouseTargetChange;var h=q.relativeOffset;var l=q.areaSelector;var c=[];var b=ObservableObject.createReferenceObject({valueChangeCallback:function(s,r){if(r){m(r)}if(s){j(s)}d(s,r)}});var o=ObservableFlag.createConditionalNegative();var n=$.weakID(".mouse-tracker");var i={getCurrentMouseTarget:function(){return b.getValue()},setCurrentMouseTarget:function(r){return b.setValue(r)},setTrackedAreas:function(r){k=r},refresh:function(){c=[];var r=$.evaluateWhenFunction(k);for(var t=0;t<r.length;t++){var s=r[t];var u=l(s);c.push({area:$.getRelativeArea(u,$.evaluateWhenFunction(h)),trackedArea:s})}},activate:function(r,t){var s=o.isTrue();o.setTrue(t);if(!s&&o.isTrue()){g(r)}return i},deactivate:function(s){var r=o.isTrue();o.setFalse(s);if(r&&o.isFalse()){f()}return i},dispose:function(){f()}};return i;function g(r){p.on("mousemove"+n,function(s){a(s)}).on("mouseleave"+n,function(s){b.setValue(undefined)});i.refresh();if(r){a(r)}}function f(){b.setValue(undefined);p.off(n)}function a(t){var u=$.getMouseOffset(t);for(var r=0;r<c.length;r++){var s=c[r];if($.isInsideArea(s.area,u,$.evaluateWhenFunction(h))){b.setValue(s.trackedArea);return}}b.setValue(undefined)}}}();var ReadWrite=new function(){var c={Read:1,Write:2,Neutral:3};var b={};this.doWrite=function(d){return a().doWrite(d)};this.doRead=function(d){return a().doRead(d)};this.evaluateAll=function(){var d=c.Read;while(!$.isEmptyObject(b)){var f=$.extend({},b);$.each(f,function(m,l){var k=l.operations;var h=l.nextOperationIndex;var g;for(g=h;g<k.length;g++){var j=k[g];var i=j.type;if(i!==c.Neutral&&i!==d){break}l.lastReturnValue=j.func.call(l.controller,l.lastReturnValue)}if(g===k.length){delete b[m]}else{l.nextOperationIndex=g}});d=(d===c.Read?c.Write:c.Read)}};function a(){var g=[];var f=$.weakID();var d={doRead:function(h){g.push({type:c.Read,func:h});return d},doWrite:function(h){g.push({type:c.Write,func:h});return d},doNeutral:function(h){g.push({type:c.Neutral,func:h});return d},evaluate:function(){delete b[f];var h=undefined;for(var k=0;k<g.length;k++){var j=g[k];h=j.func.call(d,h)}return h}};b[f]={operations:g,nextOperationIndex:0,lastReturnValue:undefined,controller:d};return d}}();var ButtonsList=new function(){this.create=function(a){return ButtonsList.createOnElement($("<div></div>"),a)};this.createOnElement=function(j,l){l=$.extend({itemCreationFunction:undefined,listLayout:undefined,themeClass:undefined,buttonsToolTip:false,toolTipField:"toolTip"},l);var d=l.itemCreationFunction;var h=l.listLayout;var g=l.themeClass;var k=l.buttonsToolTip;var i=l.toolTipField;j.addClass("buttons-list").addClass(g);var b={};var c=new ObservableCollection();var a=CollectionObserver.create(c,true);var f=j.makeItemsList({items:c,itemCreationFunction:d,itemAddedCallback:function(n){var m=n.item;var p=m.command;var o=n.$item;if(p){o.bindCommand(p)}if(k){o.attachCustomToolTip(k,m[i])}m.onButtonCreated(o)}}).onButtonClick(function(m){m.item.onClick()});if(h){f.addLayoutSupport(true).setLayout(ItemsListLayoutsFactory.createSingleRowSpread({separatorClass:"item-operations-list-items-separator"}))}$.extend(b,{addButton:function(m){m=$.extend({onButtonCreated:$.noop,onClick:$.noop,command:undefined},m);m.id=$.weakID();c.put(m)},associateWithPanel:function(m){m.associateCollectionObserver(a);m.associateItemsList(f);return b}});return b}}();var ListsService=new function(){var d={};var c=[{id:1,title:"ori",blurb:"This is ori description",author:"author: ori"},{id:2,title:"gabay",blurb:"This is gabay description",author:"author: gabay"},{id:3,title:"Ruslan",blurb:"This is Ruslan description",author:"author: Ruslan"},{id:4,title:"Idan",blurb:"This is Idan description",author:"author: Idan"}];var b=[{id:1,tag:"Food",count:5},{id:2,tag:"Sport",count:6},{id:3,tag:"TV",count:6},{id:4,tag:"Computers",count:6},{id:5,tag:"Movies",count:6}];function a(){return"{0}/services/lists".format(PageData.ServicesBasePath?"/"+PageData.ServicesBasePath:"")}this.fetchListItems=function(k,g,l,f,j,n,o,m,i,q){if(false){var p=c.length;if(q.fetchAlways&&n>=p){var h=o-n;n=$.divideNoReminder(p-1,h)*h;o=n+h}return m({items:c.slice(n,o),totalCount:p})}$.ajaxJason(a(),"fetchItems",{listId:k,listName:g,fields:l,filters:f,sort:j,skip:n,take:o-n,itemsPerPage:o-n},$.removeDotNetType(m),i)};this.fetchAllListItems=function(g,i,f,l,k,m,j,h){h=$.extend({defaultMode:undefined},h);if(false){return m(c)}$.ajaxJason(a(),"fetchItems",{listId:g,listName:i,fields:f,filters:l,sort:k,skip:0,itemsPerPage:1000,take:1000,adminMode:h.defaultMode},$.removeDotNetType(m),j)};this.fetchItemData=function(g,i,f,k,j,h){h=$.extend({defaultMode:undefined},h);if(false){return k($.grep(c,function(l){return $.inArray(l.id+"",f.id||f.alias)>=0}))}$.ajaxJason(a(),"fetchItem",{listName:i,listId:g,alias:f.alias,id:f.id,adminMode:h.defaultMode},k,j)};this.saveListItems=function(f,i,h,k,j,g){g=$.extend({defaultMode:undefined,createNewList:undefined},g);if(false){c=c.concat(h);return k($.filterKeys(h,"id"))}$.ajaxJason(a(),"saveItem",{listName:i,listId:f,items:h,adminMode:g.defaultMode,createNewList:g.createNewList},$.removeDotNetType(k),j)};this.deleteListItems=function(g,i,f,k,j,h){h=$.extend({defaultMode:undefined,createNewList:undefined},h);if(false){c=$.grep(c,function(l){return $.inArray(l.id,f)===-1});return k(f)}$.ajaxJason(a(),"deleteItems",{listName:i,listId:g,ids:f,adminMode:h.defaultMode,createNewList:h.createNewList},$.removeDotNetType(k),j)};this.fetchListTags=function(f,g,i,h){if(false){return i(b)}$.ajaxJason(a(),"fetchTags",{listId:f,listName:g},$.removeDotNetType(i),h)}};var ViewersService=new function(){function a(){if(PageData.isNewServer){return"/form"}else{return"/services/viewers-service.asmx"}}this.submitForm=function(f,b,h,d,g,i,c){if(PageData.isNewServer){$.ajaxJason(a(),"Submit",{siteID:f,siteType:b,formID:h,formValues:g},i,c)}else{$.ajaxJason(a(),"SubmitForm",{siteID:f,siteType:b,formID:h,formSecret:d,formValues:g},i,c)}}}();var ElementInstance=new function(){this.InstancesInitializationBatch=OperationsBatch.create({batchFinishCallback:E,batchFinishingStartedCallback:function(){ElementsManager.PropertiesUnpostponingBatch.start()},batchFinishingCompletedCallback:function(){ElementsManager.PropertiesUnpostponingBatch.finish()}});this.ElementInstancePrototype={bindUntilRemovedAndExecute:U,bindUntilRemoved:aq,scale:am,scaleContent:Z,isInstanceVisible:W,adjustSizeFromScale:O,adjustPositionFromScale:z,isInstanceDeleted:az,bindTriggerActivate:ao,unbindTriggerActivate:K,bindRoll:at,unbindRoll:y,activateAction:T,deActivateActions:S,setIsContent:ac,isContent:av,getPageId:h,setParent:ar,detach:aA,isInTopLayer:aE,bindPropertyChange:q,unbindPropertyChange:ab,getChildInstances:af,getChildIndex:b,getArea:ai,getRelativeToParentArea:N,getPosition:w,getSize:l,getContentSize:aC,getNoneContentSize:s,getDescendingInstances:al,setElement:c,initialize:aa,setBorderTarget:a,getBackgroundLayer:ag,addBackgroundLayer:X,setElementContent:u,getElementContent:p,refresh:aj,isDescendantOf:aG,isDescendantOfByCondition:M,getActualPropertyValue:aF,setActualPropertyValue:R,animatePart:v,setPropertiesValues:aw,updatePropertiesValues:ad,setPropertyValue:J,setPropertyFieldValue:F,setPropertyFieldsValues:r,getPropertiesValues:aD,notifyCalculatedPropertyChange:m,getPropertyValue:H,getExtendedPropertyValue:Y,getPropertyNormalValue:k,getParent:x,hasParent:j,hasSelectableParent:i,getSiblings:D,getParents:d,hasAncestor:t,findParent:o,getConnections:ae,getTargetConnections:C,getSourceConnections:B,getInitializedConnections:L,getInitializedTargetConnections:I,getInitializedSourceConnections:G,getSupportedStates:A,getInstanceDataForSaving:P,getChildElements:ap,activateTrigger:aB,activateState:ah,deactivateState:ay,getSupportedTriggers:n,getInstanceNavigatableAncestors:ax};this.isElementInstance=function(aH){return aH._isInstance_};this.getSupportedStates=function(aH){return aH.elementType.getSupportedStates()};function ax(){var aH=this;return $.grep(aH.getParents(true),function(aI){return aI.hasFeature(Features.Navigatable)})}function n(){var aH=this;var aI=[];$.each(aH.getElementDefinitions(),function(aJ,aK){if(aK.triggers){$.merge(aI,aK.triggers)}});return aI}var an=[];var ak=[];this.addInstancePrototypeExtension=function(aH){an.push(aH)};this.applyPrototypeExtensions=function(aH){for(var aI=0;aI<an.length;aI++){var aJ=an[aI];$.extend(aH,aJ(aH))}};this.create=function(aT,aO,aU){aO=$.extend({initialPropertiesValues:{},elementID:undefined},aO);aU=$.extend({rootID:null,isForTemplateUse:false},aU);var aI=aU.rootID;var aJ=aU.isForTemplateUse;var aR={};$.quickExtend(aR,{_isInstance_:true,id:aO.elementID!==undefined?aO.elementID:StructureLoadingManager.generateWebsiteId(),$element:null,$parent:null,decorators:{},backgroundLayers:{},data:{},currentActions:{},currentEffects:{},currentPropertiesValues:{},parentInstance:null,childInstances:[],$container:null,elementType:aT,isVisible:true,properties:{},affectedProperties:{},bindings:[],instanceDetachedEvent:SimpleEvent.create(aR),instanceAttachedEvent:SimpleEvent.create(aR),borderTargetAddedEvent:SimpleEvent.create(aR),visibilityChangedEvent:SimpleEvent.create(aR),visibleAreaChangedEvent:SimpleEvent.create(aR),sizeChangedEvent:SimpleEvent.create(aR),contentSizeChangedEvent:SimpleEvent.create(aR),offsetChangedEvent:SimpleEvent.create(aR),clientVisibilityChangedEvent:SimpleEvent.create(aR),propertyChangedEvent:SimpleEvent.createNamedEvents(aR),actualPropertyValueChanged:SimpleEvent.createNamedEvents(aR),propertyChangedEventSimple:SimpleEvent.create(aR),elementEnterEvent:SimpleEvent.create(aR),elementLeaveEvent:SimpleEvent.create(aR),instanceRemoving:SimpleEvent.create(aR),instanceRemoved:SimpleEvent.create(aR),resizingStarted:SimpleEvent.create(aR),resizingStopped:SimpleEvent.create(aR),triggerActivated:SimpleEvent.createNamedEvents(aR),elementStateActivated:SimpleEvent.createNamedEvents(aR),elementStateRemoved:SimpleEvent.createNamedEvents(aR),getElementDefinitions:aT.getElementDefinitions,hasFeature:aT.hasFeature,isType:aT.isType,getFeaturesMap:aT.getFeaturesMap,isTypeOf:aT.isTypeOf,hasOneOfDefinitions:aT.hasOneOfDefinitions,getAncestorsMap:aT.getAncestorsMap,hasAncestorType:aT.hasAncestorType});$.quickExtend(aR,ElementInstance.ElementInstancePrototype);if(aI===null&&!aJ){aI=aR.id;ThemesManager.assignThemesToNewPage(aI)}var aQ=aR.getElementDefinitions();var aM=aR.elementType;var aS=aM.getPropertiesDefaultValues();var aH=aO.initialPropertiesValues;if(aH){for(var aL in aH){aS[aL]=aH[aL]}}aR.properties=PropertiesManager.createProperties(ThemesManager.getPageThemes(aI),aM.typeProperties,aS);ElementInstance.applyPrototypeExtensions(aR);var aK=aM.typeMethods;for(var aP in aK){aR[aP]=$.quickProxy(aK[aP],aR)}var aN=aM.typeAggregatedMethods;for(var aP in aN){aR[aP]=$.quickProxy(aN[aP],aR)}aM.applyExtensions(aR);return aR};function U(aH,aI){this.bindUntilRemoved(aH,aI);aI()}function aq(aI,aJ){var aH=this;aI=$.makeArray(aI);$.each(aI,function(aK,aM){var aL=aM.bind(aJ);aH.instanceRemoved.bind(function(){aM.unbind(aL);return true})})}function W(){return PositionManager.isElementVisible(this)}function am(aH,aI){aI=$.extend({includeInstance:false,includeSize:true,includePosition:true,centerRoot:false,includeChildren:true},aI);var aK=this;aK.isInScalingProcess.setValue(true);if(aI.includeInstance){if(aI.includeSize){aK.adjustSizeFromScale(aH,aI.centerRoot)}if(aI.includePosition&&(!aI.includeSize||!aI.centerRoot)){aK.adjustPositionFromScale(aH)}aK.scaleContent(aH)}if(aI.includeChildren){var aJ=aK.getChildInstances();if(aJ.length>0){$.each(aJ,function(aL,aM){aM.scale(aH,{includeInstance:true})})}}aK.isInScalingProcess.setValue(false)}function Z(aJ){var aI=this;var aK=aI.properties;var aH={};var aL={};$.each(aK,function(aN,aP){if(aN!=="sizeAndPosition"){var aR=aP.descriptor;if(aR.scaleProperty){var aO=aR.scaleProperty(aJ);var aQ=false;if(aI.data.scaleAnchorValues){var aM=aI.data.scaleAnchorValues[aN]}else{var aM=aI.getPropertyValue(aN)}if($.isPlainObject(aO)){var aS=$.extend({},aM);$.each(aO,function(aU,aT){if(aS[aU]!==undefined){aS[aU]*=aT;if(aS[aU]!==0){aQ=true}if($.isEmptyObject(PropertiesManager.getGlobalState())){PropertiesManager.scalePropertyCustomStates(aI,aN,aU,aT)}}})}else{var aS=aM;aS*=aO;if(aS!==0){aQ=true}if($.isEmptyObject(PropertiesManager.getGlobalState())){PropertiesManager.scalePropertyCustomStates(aI,aN,undefined,aO)}}if(aQ){aH[aN]=aS}else{aL[aN]=aS}}}});aI.setPropertiesValues(aH);if(!$.isEmptyObject(PropertiesManager.getGlobalState())&&aL){$.each(aL,function(aM,aN){PropertiesManager.resetCustomStateProperty(aI,PropertiesManager.getEditedState(),aM);if(aI.elementType===ElementsTypes.TabsPanel&&aI.getCurrentItem()){PropertiesManager.resetCustomStateProperty(aI.getCurrentItem(),PropertiesManager.getEditedState(),aM)}})}}function z(aI,aK){var aH=this;var aL;if(aH.data.scaleAnchorValues){aL=aH.data.scaleAnchorValues.sizeAndPosition}else{aL=aH.getPropertyValue("sizeAndPosition")}var aJ={top:aL.top,left:aL.left};aJ.left=aJ.left*aI.x;aJ.top=aJ.top*aI.y;if($.isEmptyObject(PropertiesManager.getGlobalState())){PropertiesManager.scalePropertyCustomStates(aH,"sizeAndPosition","top",aI.y);PropertiesManager.scalePropertyCustomStates(aH,"sizeAndPosition","left",aI.x)}aH.setPropertyFieldsValues("sizeAndPosition",aJ)}function O(aI,aK){var aH=this;var aL;if(aH.data.scaleAnchorValues){aL=aH.data.scaleAnchorValues.sizeAndPosition}else{aL=aH.getPropertyValue("sizeAndPosition")}var aJ={};if(aK){aJ.left=aL.left+aL.width*(1-aI.x)/2;aJ.top=aL.top+aL.height*(1-aI.y)/2}aJ.height=aL.height*aI.y;aJ.width=aL.width*aI.x;if($.isEmptyObject(PropertiesManager.getGlobalState())){PropertiesManager.scalePropertyCustomStates(aH,"sizeAndPosition","height",aI.y);PropertiesManager.scalePropertyCustomStates(aH,"sizeAndPosition","width",aI.x)}aH.setPropertyFieldsValues("sizeAndPosition",aJ)}function az(){return this.isDeleted}function ao(aJ,aH,aK,aI){aH.bind(this,aJ,aH,aK,aI,"ActivateTriggerList")}function K(aJ,aH,aK,aI){aH.unbind(this,aJ,aH,aK,aI,"ActivateTriggerList")}function at(aJ,aH,aK,aI){aH.bind(this,aJ,aH,aK,aI,"ActivateTriggerList")}function y(aJ,aH,aK,aI){aH.unbind(this,aJ,aH,aK,aI,"ActivateTriggerList")}function T(aL,aI,aJ,aH){var aK=this;if(ViewManager.isViewMode()||(aL.isForDesigner&&SelectionManager.isSelected(aJ.$element))){aK.currentActions[aL.name]=aL;aL.activateFunction(aJ,aK,aI,aJ,aH)}}function S(){var aI=this;var aH=false;$.each(aI.currentActions,function(aJ,aK){if(aK.deactivateFunction){aH=true;aK.deactivateFunction(aI)}delete aI.currentActions[aJ]});if(aH){LayoutManager.refreshElementsLayout(aI)}aI.currentActions={}}function ac(aH){this.data.isContent=aH;this.canPush.setValue(!aH,"content")}function av(){return this.data.isContent}function h(){return ElementsManager.getInstanceRootID(this)}function ar(aH){ElementsManager.setElementParent(this,aH)}function aA(){var aH=this;if(aH.hasParent()){var aI=aH.getParent();aI.childInstances=$.grep(aI.childInstances,function(aJ){return aJ!=aH})}aH.$element.detach();aH.$container=undefined;if(aI&&aI!==null){aI.onChildElementRemoved(aH)}PositionManager.visibilityTreeDetach(aH);aH.parentInstance=null;aH.$parent=null;aH.onDetached();aH.instanceDetachedEvent.fire()}function aE(){var aH=this;if(aH.isType(ElementsTypes.page)||aH.hasFeature(Features.PageSection)){return true}return false}function P(aI){aI=$.extend({forSaving:false,propertiesFilter:undefined},aI);var aK=this;var aJ=aK.getSize();var aH=aK.getPosition();var aL=PropertiesManager.clonePropertiesValues(aK,{forSaving:aI.forSaving,propertiesFilter:aI.propertiesFilter});if(!aI.forSaving){aL.name=null;aL.formID=null}if(aI.adjustSize){if(aJ){$.extend({},aL.sizeAndPosition,aJ)}}return{type:aK.elementType.name,id:aK.id,elementProperties:aL,metaData:aK.getMetaDataForSaving()}}function ap(){return ElementsManager.getChildElements(this.$element)}function A(){return this.elementType.getSupportedStates()}function ae(aJ){var aI=this;var aH={sourceConnections:{},targetConnections:{}};aH.sourceConnections=aI.getSourceConnections(aJ);aH.targetConnections=aI.getTargetConnections(aJ);return aH}function C(aI){var aH=this;return au(BehavioursManager.getInstanceTargetConnections(aH.id),aI)}function B(aI){var aH=this;return au(BehavioursManager.getInstanceSourceConnections(aH.id),aI)}function L(aJ){var aI=this;var aH={sourceConnections:{},targetConnections:{}};aH.sourceConnections=aI.getInitializedSourceConnections(aJ);aH.targetConnections=aI.getInitializedTargetConnections(aJ);return aH}function I(aI){var aH=this;return au(BehavioursManager.getInstanceInitializedTargetConnections(aH.id),aI)}function G(aI){var aH=this;return au(BehavioursManager.getInstanceInitializedSourceConnections(aH.id),aI)}function au(aH,aK){var aJ=this;var aI={};$.each(aH,function(aM,aL){if(!aK||aK(aL)){aI[aL.id]=aL}});return aI}function o(aH,aI){var aJ=this;if(aI===undefined){aI=false}var aK=aI?aJ:aJ.parentInstance;while(aK&&!aH(aK)){aK=aK.parentInstance}return aK}function t(aH,aI){return this.findParent(aH,aI)!==null}function d(aH){var aI=[];var aJ=this;if(aH){aI.push(aJ)}while(aJ.parentInstance){aI.push(aJ.parentInstance);aJ=aJ.parentInstance}return aI}function D(aJ){aJ=$.extend({ignoreSections:false},aJ);var aH=this;var aO=[];var aN=aH.parentInstance;if(aN){var aO=[];if(aH.isType(ElementsTypes.SectionElement)){$.each(aH.getPageContentInstance().getSectionsByPage(PageManager.getCurrentPage()),function(aQ,aP){if(aH!==aP){aO.push(aP)}})}else{if(!aH.isType(ElementsTypes.PageContentElement)&&aH.parentInstance&&(aH.parentInstance.hasFeature(Features.PageSection)||aH.parentInstance.isType(ElementsTypes.page))){var aM=PageManager.getCurrentPage();$.each(aM.childInstances,function(aQ,aP){if(aP.hasFeature(Features.PageSection)){$.each(aP.childInstances,function(aS,aR){if(aR!==aH){aO.push(aR)}})}else{if(aP!==aH){aO.push(aP)}}})}else{if(!aH.hasFeature(Features.PageSection)&&!aH.isType(ElementsTypes.PageContentElement)){var aI;if(aJ.ignoreSections&&(aN.hasFeature(Features.PageSection)||aN===PageManager.getCurrentPage())){aI=ElementsManager.getPageRootInstances()}else{aI=aN.childInstances}for(var aK=0;aK<aI.length;aK++){var aL=aI[aK];if(aL!==aH){aO.push(aL)}}}}}}return aO}function j(){var aH=this;return aH.parentInstance!==null&&aH.parentInstance!==ElementsRoot}function i(){return this.getSelectableParent()!==null}function x(){return this.parentInstance}function k(aJ,aL,aI){var aK=this;var aH=aK.properties[aJ].value;if(aH!==undefined&&aL!==undefined){return aH[aL]}else{return aH}}function H(aJ,aL,aI){var aK=this;var aH=PropertiesManager.getValue(aK,aJ,aI);if(aH!==undefined&&aL!==undefined){return aH[aL]}else{return aH}}function Y(aJ,aL,aI){var aK=this;var aH=PropertiesManager.getValue(aK,aJ,aI);if($.isPlainObject(aH)){return $.extend({},aH)}return aH}function m(aH){PropertiesManager.notifyCalculatedPropertyChange(this,aH)}function aD(aH){return PropertiesManager.getPropertiesValues(this,aH)}function r(aI,aH){var aJ=this;aJ.setPropertyValue(aI,$.extend({},aJ.getPropertyValue(aI,undefined,true),aH))}function F(aI,aH,aL){var aK=this;var aJ={};aJ[aH]=aL;aK.setPropertyValue(aI,$.extend({},aK.getPropertyValue(aI,undefined,true),aJ))}function J(aI,aH,aK,aM){var aJ=this;var aL={};aL[aI]=aH;aJ.setPropertiesValues(aL,aK,aM)}function ad(aH){var aI=this;PropertiesManager.updatePropertiesValues(aI,aH)}function aw(aH,aJ,aK){var aI=this;PropertiesManager.setPropertiesValues(aI,aH,aJ,aK)}function v(aN,aQ,aL,aO,aS){aS=$.extend({complete:$.noop,isInitialization:false},aS);var aM=this;var aJ=aS.isInitialization;var aP=(aO!==undefined);var aI=Global.IsDesigner&&(ViewManager.isViewMode()||aM.isForTemplateUse());if(aL!==undefined&&aL!==false&&$.support.transition){if(aL===true){aL=aQ}if(aP){var aH;if(aI){aH=ViewManager.Events.SwitchedToDesignMode.one(function(){aN.stopAllPropertiesAnimation()})}var aK=aS.complete;window.setTimeout(function(){aN.animateProperties(aL,{duration:aO.transitionDuration,complete:function(){if(aH!==undefined){ViewManager.Events.SwitchedToDesignMode.unbind(aH);aK()}}})},0)}else{if(!aJ){aN.stopPropertiesAnimation($.getKeys(aL))}}}else{var aR;if(aP||!aJ){aR=aN.data("activeQueues");if(!aR){aR={};aN.data("activeQueues",aR)}}$.each(aQ,function(aW,aV){var aX=aM.id+aW;var aT={};aT[aW]=aV;var aY=undefined;if(aI&&aP){aY=$.uniqueID();ViewManager.Events.SwitchedToDesignMode.one(function(){aY=undefined;aN.stop(aX,true,true);delete aR[aX]},aY)}if(!aJ&&aR[aX]){aN.stop(aX,true);delete aR[aX]}if(aP){var aU=aS.complete;aS=$.extend({},aS,{duration:aO.transitionDuration,easing:"linear",queue:aX,complete:function(){if(aY!==undefined){ViewManager.Events.SwitchedToDesignMode.unbind(aY);delete aR[aX];aU()}}});aR[aX]=true;aN.animate(aT,aS).dequeue(aX)}})}if(!aP){aN.css(aQ)}return aP}function R(aH,aJ){var aI=this;aI.currentPropertiesValues[aH]=aJ;aI.actualPropertyValueChanged.fire(aH,aI,aJ)}function aF(aI){var aJ=this;var aH=aJ.currentPropertiesValues[aI];if(aH===undefined){return aJ.getPropertyValue(aI)}else{return aH}}function aG(aH,aI){var aJ=this;if(aH.id===aJ.id){return true}if(aJ.parentInstance){return aJ.parentInstance.isDescendantOf(aH)}else{return false}}function M(aI){var aH=this;if(aI(aH.parentInstance)){return true}if(aH.parentInstance){return aH.parentInstance.isDescendantOfByCondition(aI)}else{return false}}function aj(){console.warn("Refresh Called - Remove the method calling")}function p(){return this.$elementContent}function u(aI){var aH=this;aI.addClass("element-content");aH.$elementContentContainer.empty();aH.$elementContentContainer.append(aI);aH.$elementContent=aI}function X(aM,aK){var aH=this;var aL=aM.name;var aP=aM.priority;var aN=aH.backgroundLayers;var aS=aN[aL];if(!aS){var aR=aK();if($.browser.msie&&parseInt($.browser.version)<8){aR.addClass("ie7")}var aO;for(var aQ in aN){var aJ=aN[aQ];var aI=aJ.priority;if(aP<aI){if(!aO||aO.priority>aI){aO=aJ}}}if(!aO){aR.insertBefore(aH.$elementBorderBox)}else{aR.insertBefore(aO.$element)}aS={priority:aP,$element:aR};aN[aL]=aS}return aS.$element}function ag(aJ){var aI=this;var aH=aI.backgroundLayers[aJ.name];if(aH){return aH.$element}else{return undefined}}function a(aH){var aI=this;aI.$elementBorderTarget.pushElements(aH.addClass("element-border-target"));aI.borderTargetAddedEvent.fire(aI,aH)}function aa(){var aH=this;if(aH.initializationTriggered){return aH}var aI=aH.getElementDefinitions();$.each(aI,function(aJ,aK){aK.initialize.apply(aH,[aH.$element])});if(ElementInstance.InstancesInitializationBatch.isActive()){ak.push(aH)}else{PropertiesManager.invalidateElement(aH);Q(aH)}aH.initializationTriggered=true;return aH}function c(aH){var aJ=this;aJ.$element=aH;aH.data("instance-data",aJ);var aI=aJ.elementType;var aK=aI.typeClass;if(aK){aH.addClass(aK)}if(aJ.hasFeature(Features.DesignElement)){aJ.$elementContentBox=aH.find(".element-content-box");aJ.$elementContentContainer=aH.find(".content-container-type");aJ.$elementSizeBox=aH.find(".element-size-box");aJ.$elementPositionBox=aH;if(aJ.isType(ElementsTypes.page)){aJ.$reszingGripBox=aJ.$elementContentBox}else{aJ.$reszingGripBox=aJ.$element}if(aI!==ElementsTypes.group){aJ.$elementMainBox=aH.find(".element-main-box");aJ.$elementBorderBox=aH.find(".design-element-border-box");aJ.$paddingBox=aH.find(".element-padding-box");aJ.$elementBackgroundLayer=aH.find(".element-background-layer");aJ.$elementBackgroundTarget=Global.IsExplorerMode?aH.find(".element-background-target-explorer"):aJ.$elementBackgroundLayer;aJ.$elementBorderTarget=aH.find(".element-border-target")}if($.browser.msie&&parseInt($.browser.version)<8){$.unite(aJ.$elementBorderBox,aJ.$elementBackgroundLayer).addClass("ie7")}aJ.$decorationLayersContainer=aH;if(aJ.isInDesignMode()){aJ.$contentMarking=aH.find(".content-marking").addVisibilityStates(true);aJ.showContentMarking=ObservableFlag.createConditionalNegative({valueChangeCallback:function(aL){aJ.$contentMarking.toggleVisibility(aL)}})}}return aJ}function al(aJ,aI){if(aJ===undefined){aJ=true}var aK=this;var aL=[];aH(aK);return aL;function aH(aN){if(aI){for(var aM=0;aM<aN.childInstances.length;aM++){aH(aN.childInstances[aM])}}if(aJ||aN!==aK){aL.push(aN)}if(!aI){for(var aM=0;aM<aN.childInstances.length;aM++){aH(aN.childInstances[aM])}}}}function s(){var aH=this;var aI;var aJ;if(aH.hasFeature(Features.HasBorder)){aI=aH.getPropertyValue("borderWidth")}else{aI={left:0,top:0,bottom:0,right:0}}var aJ=aH.getPropertyValue("padding");if(aJ===undefined){aJ={left:0,top:0,bottom:0,right:0}}return{width:parseInt(aI.left)+parseInt(aI.right)+parseInt(aJ.left)+parseInt(aJ.right),height:parseInt(aI.top)+parseInt(aI.bottom)+parseInt(aJ.top)+parseInt(aJ.bottom),widthLeft:parseInt(aI.left)+parseInt(aJ.left),heightTop:parseInt(aI.top)+parseInt(aJ.top)}}function aC(){return PositionManager.getContentSize(this)}function l(){return PositionManager.getElementSize(this)}function w(aH){return PositionManager.getElementOffset(this,aH)}function ai(aH){return PositionManager.getElementArea(this,aH)}function N(aI){var aH=this;if(aH.parentInstance){var aK=!aI?aH.parentInstance.getArea():aI;var aJ=aH.getArea();return aJ?$.expandArea(aJ,{top:aK.top,bottom:-aK.top}):aJ}else{return aH.getArea()}}function b(){return this.childIndex.getValue()}function af(){return this.childInstances}function ab(aH,aI){return this.propertyChangedEvent.unbind(aI)}function q(aH,aJ,aI){return this.propertyChangedEvent.bind(aH,aJ,aI)}function Q(aH){aH.isInitialized=true;var aI=aH.getElementDefinitions();$.each(aI,function(aJ,aK){if(aK.onInstanceInitialized){aK.onInstanceInitialized.call(aH)}});ElementsManager.Events.InstanceInitialized.fire(aH,aH);if(!aH.propertiesInitialized){aH.propertiesInitialized=true;ElementsManager.Events.InstancePropertiesInitialized.fire(aH,aH);aH.InstancePropertiesInitialized.fire(aH)}aH.setToCurrentMode()}function E(){var aI={};var aJ=ak;ak=[];LayoutManager.beginLayoutUpdateBatch();PropertiesManager.UpdateBatch.start();for(var aH=0;aH<aJ.length;aH++){if(!aJ[aH].isDeleted){PropertiesManager.invalidateElement(aJ[aH])}}PropertiesManager.UpdateBatch.finish();LayoutManager.endLayoutUpdateBatch();for(var aH=0;aH<aJ.length;aH++){if(!aJ[aH].isDeleted){Q(aJ[aH])}}ak=[]}function g(aH,aJ,aI){var aK=aH.data[aJ.name+aI+"function"];if(aK){return aK}else{return $.noop}}function ah(aJ,aK,aH){aK=$.valueOrDefault(aK,false);var aI=this;if(aK||ViewManager.isViewMode()||aI.isForTemplateUse()){if(typeof aJ!=="string"){aJ=aJ.name}aI.activatedStates.put({name:aJ});PropertiesManager.addGlobalState(aJ,aI,undefined,aH);V(aI,ElementStates[aJ],aH)}}function ay(aJ,aH,aI){aH=$.valueOrDefault(aH,false);var aK=this;if(aH||ViewManager.isViewMode()||aK.isForTemplateUse()){LayoutManager.layoutUpdateBatch.start();PropertiesManager.UpdateBatch.start();if(typeof aJ!=="string"){aJ=aJ.name}aK.activatedStates.remove(aJ);PropertiesManager.removeGlobalState(aJ,aK,undefined,aI);f(aK,ElementStates[aJ],aI);PropertiesManager.UpdateBatch.finish();LayoutManager.layoutUpdateBatch.finish()}}function aB(aH,aJ){var aI=this;if(ViewManager.isViewMode()||aI.isForTemplateUse()){aI.triggerActivated.fire(aH.name,aH.name,aJ);$.each(aH.activatedStates,function(aK,aL){aI.activateState(aL)});$.each(aH.deactivatedStates,function(aL,aK){aI.deactivateState(aK)})}}function V(aI,aJ,aH){aI.currentStates[aJ.id]=aJ.id;$.each(aI.currentStates,function(aM,aL){aM=parseInt(aM);var aK=ElementStatesManager.getComplexIdFromIds(aM,aJ.id);if(aM!==aJ.id&&!aI.currentStates[aK]&&ElementStates[aK]){PropertiesManager.addGlobalState(ElementStates[aK],aI,undefined,aH);aI.currentStates[aK]=aK}})}function f(aJ,aI,aH){delete aJ.currentStates[aI.id];$.each(aJ.currentStates,function(aM,aL){var aK=ElementStatesManager.getComplexIdWithOutId(aM,aI.id);aM=parseInt(aM);if(aM!==aI.id&&aJ.currentStates[aK]){PropertiesManager.removeGlobalState(ElementStates[aM],aJ,undefined,aH);delete aJ.currentStates[aM]}})}}();var ElementsRenderingController=new function(){this.renderDesignElement=function(d){if(d===undefined){d={tagName:undefined}}d=$.extend({elementType:undefined},d);var c=d.isDesigner;var h=d.isExplorerMode;var a=d.hasContent;var b=d.elementType;var f=b.className?b.className:"";var g=!c&&d.tagName&&(typeof d.tagName==="string")&&d.tagName!==HtmlTags.DIV;var i=new StringBuilder();i.append('<div class="design-element element-size-box {0}">'.format(f));i.conditionalAppend(g,'<{0} class="html-element">'.format(d.tagName));i.append('<div class="element-main-box design-element-main-box {0}">'.format(f));i.append('<div class="element-background-layer element-border-target design-element-background-layer {0}">'.format(f));i.conditionalAppend(h,'<div class="element-background-target-explorer {0}"></div>'.format(f));i.append("</div>");i.append('<div class="element-border-box element-border-target element-padding-box design-element-border-box {0}">'.format(f));i.append('<div class="element-content-box design-element-content-box {0}">'.format(f));if(a){i.conditionalAppend(c,'<div class="content-marking content-marking-back"></div>');i.conditionalAppend(c,'<div class="content-marking content-marking-front"></div>')}i.append('<div class="content-container content-container-type element-size-box {0}"></div>'.format(f));i.append("</div>");i.append("</div>");i.append("</div>");i.conditionalAppend(g,"</{0}>".format(d.tagName));i.append("</div>");return i.toString()};this.renderPageContentElement=function(b){if(b===undefined){b={tagName:undefined}}var a=b.isDesigner;var c=b.isExplorerMode;var d=new StringBuilder();d.append('<div class="design-element positioned">');d.append('<div class="element-main-box positioned">');d.append('<div class="element-background-layer element-border-target design-element-border-target">');d.conditionalAppend(c,'<div class="element-background-target-explorer"></div>');d.append("</div>");if(a){d.append('<div class="page-content-master-template-background absolute-fill">');d.append('<span class="height-normalizer"></span>');d.append('<span class="vertically-centered">Page Content</span>');d.append("</div>")}d.append('<div class="element-border-box element-border-target positioned design-element-border-box">');d.append('<div class="element-content-box design-element-content-box element-padding-box positioned">');d.append('<div class="page-content-element-size-box element-size-box positioned">');d.conditionalAppend(a,'<div class="content-marking content-marking-back"></div>');d.conditionalAppend(a,'<div class="content-marking content-marking-front"></div>');d.append('<div class="page-content-content-container content-container-type positioned"></div>');d.append("</div>");d.append("</div>");d.append("</div>");d.append("</div>");d.append("</div>");return d.toString()};this.renderPageElement=function(b){if(b===undefined){b={tagName:undefined}}var a=b.isDesigner;var c=b.isExplorerMode;var d=new StringBuilder();d.append('<div class="design-element">');d.append('<div class="element-main-box positioned">');d.append('<div class="element-background-layer positioned absolute-fill element-border-target design-element-border-target">');d.conditionalAppend(c,'<div class="element-background-target-explorer"></div>');d.append("</div>");d.append('<div class="page-element-border-box element-border-target positioned design-element-border-box">');d.conditionalAppend(a,'<div style="overflow: hidden;  top: 100%; position: absolute;width: 100%; height: 1000px;" id="bottom-background-designer-pane"/>');d.append('<div class="header-section page-section positioned"></div>');d.append('<div class="element-content-box element-padding-box positioned" >');d.append('<div class="page-element-size-box element-size-box positioned">');d.conditionalAppend(a,'<div class="content-marking content-marking-back"></div>');d.conditionalAppend(a,'<div class="content-marking content-marking-front"></div>');d.append('<div class="page-content-container content-container-type "></div>');d.append("</div>");d.append("</div>");d.append('<div class="footer-section page-section positioned"></div>');d.append("</div>");d.append("</div>");d.append("</div>");return d.toString()}}();var ElementsModel=new (function(){var f=this;this.initialize=function(){$.each(ElementsTypes,function(h,g){c(g)})};this.registerDefinition=function(g,h){$.each(h,function(m,k){var p={name:m,getExtensions:function(){return{}},properties:{},methods:{},ancestorElementType:undefined,features:[],aggregatedMethods:{definitions:{},aggregations:{}},triggers:{},initialize:function(i){}};if(g===ElementsTypes){p.isElementType=true}else{if(g===Features){p.isFeature=true}}if(g==ElementsTypes){$.extend(p,{category:ElementsTypesCategories.General,iconClass:"sprite-icon sprite-element-app"})}var j=$.extend(p,k);$.extend(k,j);var q={};var l=k.calculatedProperties;if(l){for(var o=0;o<l.length;o++){var n=l[o];if(n.isFeature||n.isElementType){var r=n.properties;$.each(r,function(i,s){q[i]=true})}else{q[n]=true}}}k.isCalculatedPropertyOwner=function(i){return !!q[i]};if(k.properties){$.each(k.properties,b)}});$.extend(g,h)};this.registerTypeCategories=function(g){$.each(g,function(h,i){ElementsTypesCategories[h]=$.extend({priority:0},i,{name:h,subCategories:{}})})};this.registerPropertiesCategories=function(g){$.each(g,function(h,i){PropertiesCategories[h]=$.extend({},i,{name:h,properties:{}})})};function b(h,i){if(PropertiesTypes[h]!==undefined){throw new Error("Duplicate property registration ({0})".format(h))}i.name=h;if(!i.isBound){i.isBound=$.returnFalse}i.isBoundToObservableWithValue=function(j){return i.isBoundToObservable(j)&&j.properties[i.name].bindingValue!==undefined};i.isBoundToObservable=function(j){return j.properties[i.name].bindingConroller!==undefined};if(!i.isInTemplate){i.isInTemplate=$.returnTrue}if(!i.onChange){i.onChange=$.noop}else{var g=i.onChange;i.onChange=function(k,m,o,l,n){var j=this;if((!j.elementType.isDelegatedProperty(i.name))){if((!j.disableStyleProperties()||!PropertiesManager.getEditableStylePropertiesMap()[i.name])){g.call(j,k,m,o,l,n)}else{g.call(j,k,i.getResetValue(),o,m,n)}}}}if(i.priority===undefined){i.priority=-1}if(typeof i.category==="string"){i.category=PropertiesCategories[i.category]}i.category=$.valueOrDefault(i.category,PropertiesCategories.Other);i.iconClass=i.category.iconClass;if(i.isStateProperty===undefined||i.isStateProperty===false){i.isStateProperty=$.returnFalse}else{if(i.isStateProperty===true){i.isStateProperty=$.returnTrue}}if(!i.getResetValue){i.getResetValue=i.defaultValue?i.defaultValue:$.returnUndefined}PropertiesTypes[h]=i;if(i.category){PropertiesCategories[i.category.name].properties[h]=h}}this.registerPropertiesTypes=function(g){$.each(g,function(h,i){PropertiesTypes[h]=$.extend({},i,{name:h,iconClass:i.category.iconClass})})};this.registerMenuItemTypes=function(g){$.each(g,function(h,i){MenuItemTypes[h]=$.extend({},i,{name:h})})};function c(p){var r=a(p);var J=$.toDictionary(r,function(i){return i.name});var k=p.delegatedDefinitionsProperties;var F={};var w=[];function G(j){if(!j){return}if(j.isFeature){throw new Error("feature is not element type")}if(F[j.name]||p===j){throw new Error("recursive inheritance is forbidden")}G(j.ancestorElementType);var i=a(j);$.each(i,function(V,W){if(J[W.name]===undefined&&W!==Features.ElementBase){J[W.name]=W;w.push(W)}else{throw new Error("feature already defined: "+W.name)}});w.push(j);F[j.name]=j}G(p.ancestorElementType);var A=[Features.ElementBase];$.merge(A,w);$.merge(A,r);A.push(p);var u={};var T={};var n={};var Q={};var I={};var l=[];var s=[];var K=[];var R=[];var v=[];var E=[];var C={};for(var N=0;N<A.length;N++){var P=A[N];var q=P.calculatedProperties;if(q){for(var M=0;M<q.length;M++){var t=q[M];if(t.isFeature||t.isElementType){var g=t.properties;$.each(g,function(i,j){u[i]=true})}else{u[t]=true}}}var O=P.className;if(O){K.push(O)}var B=P.methods;if(B){for(var h in B){T[h]=B[h]}}var g=P.properties;if(g){for(var U in g){var S=g[U];n[U]=S;if(S.defaultValue){Q[U]=S.defaultValue}if(S.isContentProperty){E.push(U)}if(S.isStyleProperty){v.push(U)}if(S.isStateProperty){R.push(U)}}}var o=P.defaultProperties;if(o){for(var U in o){Q[U]=o[U]}}var H=P.aggregatedMethods;if(H!==undefined){d(H);var z=H.definitions;if(z!==undefined){$.each(z,function(i,j){if(I[i]){throw new Error("duplicate aggregate method definition")}I[i]=[];I[i].push(j)})}}var m=P.onInstanceCreated;if(m){l.push(m)}var y=P.getExtensions;if(y){s.push(y)}}var L={};if(k){for(var N=0;N<k.length;N++){var x=k[N];L[x.name]=x;var g=x.properties;if(g){for(var U in g){var S=g[U];C[U]=true;n[U]=S;if(S.defaultValue){Q[U]=S.defaultValue}if(S.isContentProperty){E.push(U)}if(S.isStyleProperty){v.push(U)}if(S.isStateProperty){R.push(U)}}}}}for(var N=0;N<A.length;N++){var P=A[N];var H=P.aggregatedMethods;if(H!==undefined){var D=H.aggregations;if(D!==undefined){$.each(D,function(i,j){if(I[i]===undefined){throw new Error("missing aggregate method definition")}I[i].push(j)})}}}$.each(I,function(i,j){var V=function(){var X=this;var Y=$.merge([],arguments);Y.push(undefined);var aa=Y.length-1;var W=undefined;for(var Z=0;Z<j.length;Z++){var ab=j[Z];if(ab){Y[aa]=W;W=ab.apply(X,Y)}}return W};I[i]=V});p.elementDefinitions=A;p.featuresMap=J;p.calculatedPropertiesMap=u;p.typeMethods=T;p.typeAggregatedMethods=I;p.typeProperties=n;p.stateProperties=R;p.styleProperties=v;p.contentProperties=E;p.propertiesDefaultValues=Q;p.typeClass=K.length>0?K.join(" "):undefined;p.delegatedProperties=C;p.delegatedDefinitionsMap=L;p.isDelegatedProperty=function(i){return C[i]};if(l.length>0){p.onInstanceCreatedAggregation=function(){for(var j=0;j<l.length;j++){l[j].call(this,this)}}}if(s.length>0){p.applyExtensions=function(j){for(var W=0;W<s.length;W++){var X=s[W](j);if(X){for(var V in X){var Y=X[V];if($.isFunction(Y)){Y=$.quickProxy(Y,j)}j[V]=Y}}}}}p.hasFeature=function(i){return J[i.name]!==undefined};p.isTypeOf=function(i){i=$.makeArray(i);var j=false;$.each(i,function(W,V){j=p===V||p.hasAncestorType(V);if(j){return false}});return j};p.hasOneOfDefinitions=function(i){i=$.makeArray(i);return $.any(i,function(j){return(p===j||p.hasFeature(j)||p.hasAncestorType(j))})};p.isType=function(i){i=$.makeArray(i);var j=false;$.each(i,function(W,V){j=p===V;if(j){return false}});return j};p.getSupportedStates=function(){var i=[];$.each(p.getElementDefinitions(),function(j,V){if(V.supportedStates){$.merge(i,V.supportedStates)}});return i};p.getElementDefinitions=function(){return p.elementDefinitions};p.getFeaturesMap=function(){return J};p.getAncestorsMap=function(){return F};p.hasAncestorType=function(i){return F[i.name]!==undefined};p.isCalculatedProperty=function(i){return !!u[i]};p.getPropertiesDefaultValues=function(){var j={};for(var i in Q){j[i]=p.getPropertyDefaultValues(i)}return j};p.getPropertyDefaultValues=function(i){return Q[i]()}}function d(h){var g=$.getKeys(h);g.removeItem("definitions");g.removeItem("aggregations");if(g.length>0){throw new Error("Bad aggregation methods structure.")}}function a(g){var h={};var i=[];j(g.features);function j(l){var k=[];for(var o=0;o<l.length;o++){var n=l[o];if(n){var m=n.name;if(!n.isFeature){throw new Error("element type is not a feature")}if(h[m]===undefined&&n!==Features.ElementBase){h[m]=true;if(n.features){j(n.features)}i.push(n)}else{throw new Error("feature already defined: "+m)}}}}return i}return this})();var ElementsTypes={};var Features={};var ElementsTypesCategories={};var PropertiesCategories={};var PropertiesTypes={};var MenuLayouts={};var MenuItemTypes={};ElementsModel.registerPropertiesCategories({Other:{title:"General",iconClass:"sprite-icon sprite-property-category-misc"},Line:{title:"Line",iconClass:"sprite-icon sprite-property-category-line",shortTitle:"Line"},Layout:{title:"Layout",iconClass:"sprite-icon sprite-property-category-layout"},SizeAndPosition:{title:"Size And Position",iconClass:"sprite-icon sprite-property-category-size-and-position"},Shadow:{title:"Shadow",iconClass:"sprite-icon sprite-property-category-shadow",shortTitle:"Shadow"},Rotation:{title:"Rotation",iconClass:"sprite-icon sprite-property-category-rotation"},Padding:{title:"Padding",iconClass:"sprite-icon sprite-property-category-padding"},Margin:{title:"Margin",iconClass:"sprite-icon sprite-property-category-margin"}});ElementsModel.registerTypeCategories({FormFields:{},FormElementFields:{},Containers:{title:"Panel",iconClass:"sprite-icon sprite-tool-category-apps",subCategoryIconClass:"sprite-icon sprite-tool-category-apps",subCategoryTitle:"All",description:"Add Containers",priority:10},Content:{title:"Content",iconClass:"sprite-icon sprite-tool-category-apps",description:"Make your page look richer with images text and videos",priority:9},Text:{title:"Text",iconClass:"sprite-icon sprite-tool-category-apps",description:"Add Text Elements",priority:9},Images:{title:"Image",iconClass:"sprite-icon sprite-tool-category-apps",description:"Add Images",priority:9},Videos:{title:"Video",iconClass:"sprite-icon sprite-tool-category-apps",description:"Add Videos",priority:9},Social:{title:"Social",iconClass:"sprite-icon sprite-tool-category-apps",description:"Add Social Elements",priority:8},Widgets:{name:"Widgets",title:"Widgets",iconClass:"sprite-icon sprite-tool-category-apps",subCategoryIconClass:"sprite-icon sprite-tool-category-apps",subCategoryTitle:"All",description:"Organize your images on the page in beautifull dynamic galleries.",priority:7},Shapes:{title:"Shapes",iconClass:"sprite-icon sprite-tool-category-apps",subCategoryIconClass:"sprite-icon sprite-tool-category-apps",subCategoryTitle:"All",description:"Add Shapes",priority:11},Interactive:{title:"Interactive",iconClass:"sprite-icon sprite-tool-category-apps",description:"No description yet..."},General:{title:"General Elements",iconClass:"sprite-icon sprite-tool-category-apps",description:"No description yet..."},Templates:{title:"Templates",iconClass:"sprite-icon sprite-tool-category-apps",description:"No description yet...",priority:5},ViewersInteraction:{title:"Viewers",iconClass:"sprite-icon sprite-tool-category-apps",description:"Let your viewers interact with each other, and with you.",priority:7}});var DataSourcesManager=new function(){var a={};this.initialize=function(){regiterDataSourceItems()};this.setDataSourcesFromSave=function(b){if(!b){b={}}a=b};this.getDataSourcesForSave=function(){$.each(DataSources,function(b,c){if(c.isForSave&&!c.instanceId){a[b]=c.dataSourceInfo}});return a};this.loadDataSource=function(b,f,c,d){return DataSourcesManager.registerDataSourceInstance(b,f,c,d)};this.registerDataSourceDefinition=function(b){$.each(b,function(c,d){DataSourcesDefinitions[c]=d})};this.registerDataSourceInstance=function(c,g,d,h){var f;var b={};$.each(c,function(i,j){if($.isFunction(j)){b[i]=function(){var l=this;var k=$.merge([f.name],arguments);return j.apply(l,k)}}else{b[i]=j}});f=$.extend({id:g,name:g,dataSourceInfo:d,instanceId:h,itemsInformation:undefined,fieldsInformation:undefined,collectionItems:undefined,collectionFields:undefined,itemUpdatedEvent:SimpleEvent.createNamedEvents(),onViewInitialized:$.noop,sortingFunction:function(m,j){var l=m;var n=j;var k=parseInt(l.index);var i=parseInt(n.index);if(k!==undefined&&i!==undefined){return k-i}else{if(k!==undefined){return -1}else{if(i!==undefined){return 1}else{return 0}}}},invalidateAllItems:function(){f.itemsInformation.invalidateItems(f.itemsInformation.getItemsValues())},onWizardFinished:function(k){var i=ElementsManager.getInstanceByID(f.instanceId);var j={currentTemplate:i.elementType.itemName?i.getDefaultTemplate(i.elementType.itemName):undefined,currentItemsInfo:i.getPropertyValue("dataInfo"),itemFields:f.getItemFields(),items:f.getAllDataItems()};LayoutManager.layoutUpdateBatch.executeWithActivation(function(){onDialogCommitted(i,f,j,k)})},manageItemsPanelName:undefined,manageItemsPanelTitle:undefined,getIndexBetweenTwoItems:function(j,i){return j+(i>j?(i-j)*0.5:(j-i)*0.5)},openItemsDialog:function(l){l=$.extend(l,{selectedItemId:undefined});var i=ElementsManager.getInstanceByID(f.instanceId);var n=i.getPropertyValue("dataInfo");var m=Panels[f.manageItemsPanelName];var j=n.currentData;if(j.items){j=j.items}var k=$.objectGet(f,["dataSourceInfo","currentData","collectionItems"]);Dialogs.MasterDetailsDialog.usePanel(m).withActivationArgs({headerTitle:f.manageItemsPanelTitle,currentData:n.currentData,items:i.elementType===ElementsTypes.Menu?f.getAllDataItems():j,itemsMap:n.itemsMap,itemFields:f.getItemFields(),defaultItems:k?k.getItems():undefined,synchronizeWithPages:i.getPropertyValue("synchronizeWithPages"),selectedItemId:l.selectedItemId}).open({header1:f.manageItemsPanelTitle,innerPanelControlBox:function(o){return o.getHeaderControlBox()},buttonsOptions:[{type:ConfirmationButtonsTypes.OK,title:"Save"}],onConfirm:function(o,q){if(o){var r=q.getItemsData();if(i.elementType==ElementsTypes.ButtonsGroup){r={items:r}}var p={itemsData:r,itemsFields:q.getItemsFields(),itemsMap:q.getItemsMap()};i.getDataSource().onWizardFinished(p)}}})},getCollectionItems:function(){return f.collectionItems},getCollectionFields:function(){return f.collectionFields},getAllItems:function(){return f.collectionItems.getItems()},getAllDataItems:function(){return f.collectionItems.getItems()},fetchAllItems:function(i,j){i({fetchedItems:f.sortedItems,totalCount:f.sortedItems.length})},fetchItems:function(o,n,i,k,l){var j=f.sortedItems.length;if(l.fetchAlways&&o>=j){var m=n-o;o=$.divideNoReminder(j-1,m)*m;n=o+m}return i({fetchedItems:f.sortedItems.slice(o,n),totalCount:j})},getItem:function(i){return f.collectionItems.getItem(i)},fetchDataItem:function(m,k,j,l){var i=f.collectionItems.getItem(m);if(!i&&l){l()}if(i&&j){j(i)}return i},initialize:function(){f.itemsInformation=new ObservableCollection();f.collectionItems=CollectionObserver.create(f.itemsInformation);f.sortedItems=[];if(f.sortingFunction){f.collectionItems.itemsChangedEvent.bind(function(){f.sortedItems=$.getValues(f.collectionItems.getItems()).sort(f.sortingFunction)})}f.fieldsInformation=new ObservableCollection({idFunction:function(j){return j.name}});f.collectionFields=CollectionObserver.create(f.fieldsInformation);var i=ElementsManager.getInstanceByID(f.instanceId);f.dataSourceRemoved.bind(function(){f.clear()});f.collectionItems.itemChangedEvent.bind(function(j){f.itemUpdatedEvent.fire(j)});f.dataSourceRefreshedObserver=SimpleEvent.createEventObserver(f.dataSourceRefreshed,function(){i.onDataSourceRefresh()});f.onViewInitialized()},dataSourceRemoved:SimpleEvent.create(),itemChangedEvent:SimpleEvent.create(),itemAddedEvent:SimpleEvent.create(),itemRemovedEvent:SimpleEvent.create(),dataSourceRefreshed:SimpleEvent.create(),currentItemChangedEvent:SimpleEvent.create(),itemsOrderChangedEvent:SimpleEvent.create()},b);DataSources[f.name]=f;f.initialize();return f};this.registerDataSourceItemFields=function(b){$.each(b,function(c,d){DataSourceItemsFields[d.type]=$.extend({iconClass:"sprite-icon sprite-tool-category-apps",convertValueToFieldValue:$.returnValue,convertFieldValueToValue:$.returnValue},d)})};this.getFieldDefaultProperties=function(d,c){var b={};if(d.initialPropertiesValues){if(d.initialPropertiesValues[c]){b=d.initialPropertiesValues[c]}else{b=d.initialPropertiesValues.Default}}return $.cloneObject(b)}}();var DataSources={};var DataSourcesDefinitions={};var DataSourceItemsFields={};var DataSourceItemsData={Text:0,TextArea:1,Image:2,TextInput:4,Icon:5,Link:6,Video:7,paypal:8,Date:9,FontIcon:10,Alt:11};var DataSourceItemsDataToProperties={0:["text"],1:["text"],2:["imageUrl"],5:["imageUrl"],7:["videoId"],8:["paypalData","paypalOptions"]};function onDialogCommitted(j,b,d,a){OperationsManager.beginAtomicBatch(false,"Change "+j.elementType.title+" items");var h=a.itemsData;var f=a.template;var i=a.itemsFields;var g=a.itemsMap;var c=d.currentTemplate;var k=d.currentItemsInfo;if(f){if(!c||f.id!==c.id){if(f.structures){f=$.extend(true,{},f)}if(c){j.replaceTemplate(f,{fieldName:j.elementType.itemName})}else{j.replaceTemplate(f,{fieldName:j.elementType.itemName,templateName:"New Template"})}}}if(h){if(k===null||k===undefined||!$.defaultEqualityComparer(h,k.currentData)||!$.defaultEqualityComparer(g,k.itemsMap)){j.setPropertyValue("dataInfo",{currentData:h,itemsMap:g})}}if(i){b.updateItemFields(i)}OperationsManager.endAtomicBatch()}function regiterDataSourceItems(){DataSourcesManager.registerDataSourceItemFields([{isEditable:false,name:"index",type:"index",iconClass:"sprite-icon sprite-tool-category-text",getElementTypeName:function(){return ElementsTypes.label.name},supportElementContentBinding:function(a){return ArrayUtils.contains(a,[ElementsTypes.label.name,ElementsTypes.freeText.name])},getContentType:function(){return DataSourceItemsData.Text},getDefaultValue:function(){return 1},initialPropertiesValues:{Default:{text:"1",horizontalAlign:HorizontalAlignment.Centered,verticalAlignment:VerticalAlignment.Centered,fontSize:12,sizeAndPosition:{width:60,height:25},order:102,backgroundColor:"transparent"},Button:{text:"1",horizontalAlign:HorizontalAlignment.Centered,verticalAlignment:VerticalAlignment.Centered,fontSize:12,sizeAndPosition:{width:60,height:25},order:102,backgroundColor:"transparent"},MenuButton:{text:"1",horizontalAlign:HorizontalAlignment.Centered,verticalAlignment:VerticalAlignment.Centered,fontSize:12,sizeAndPosition:{width:60,height:25},order:102,backgroundColor:"transparent"},ImageBox:{text:"1",horizontalAlign:HorizontalAlignment.Centered,verticalAlignment:VerticalAlignment.Centered,fontSize:15,sizeAndPosition:{width:80,height:30},order:102,backgroundColor:"transparent"},DataListItemTemplate:{text:"1",horizontalAlign:HorizontalAlignment.Centered,verticalAlignment:VerticalAlignment.Centered,fontSize:15,sizeAndPosition:{width:80,height:30},order:102,backgroundColor:"transparent"}},title:"Index",isTarget:$.returnFalse,isText:$.returnTrue},{isEditable:false,name:"date",type:"date",iconClass:"sprite-icon sprite-tool-category-text",getElementTypeName:function(){return ElementsTypes.date.name},supportElementContentBinding:function(a){return ArrayUtils.contains(a,[this.getElementTypeName()])},getContentType:function(){return DataSourceItemsData.Date},getDefaultValue:function(){return 1},initialPropertiesValues:{Default:{dateMillis:Date.now(),horizontalAlign:HorizontalAlignment.Centered,verticalAlignment:VerticalAlignment.Centered,fontSize:12,sizeAndPosition:{width:60,height:25},order:102,backgroundColor:"transparent"},Button:{dateMillis:Date.now(),horizontalAlign:HorizontalAlignment.Centered,verticalAlignment:VerticalAlignment.Centered,fontSize:12,sizeAndPosition:{width:60,height:25},order:102,backgroundColor:"transparent"},MenuButton:{dateMillis:Date.now(),horizontalAlign:HorizontalAlignment.Centered,verticalAlignment:VerticalAlignment.Centered,fontSize:12,sizeAndPosition:{width:60,height:25},order:102,backgroundColor:"transparent"},ImageBox:{dateMillis:Date.now(),horizontalAlign:HorizontalAlignment.Centered,verticalAlignment:VerticalAlignment.Centered,fontSize:15,sizeAndPosition:{width:80,height:30},order:102,backgroundColor:"transparent"},DataListItemTemplate:{dateMillis:Date.now(),horizontalAlign:HorizontalAlignment.Centered,verticalAlignment:VerticalAlignment.Centered,fontSize:15,sizeAndPosition:{width:80,height:30},order:102,backgroundColor:"transparent"}},title:"Date",isTarget:$.returnFalse,isText:$.returnTrue},{isEditable:true,name:"image",type:"image",iconClass:"sprite-icon sprite-tool-category-images",getElementTypeName:function(){return ElementsTypes.image.name},convertValueToFieldValue:function(b,a){return $.extend({},a,{imageUrl:b})},convertFieldValueToValue:function(a){if(!a){return a}return a.imageUrl},supportElementContentBinding:function(a){return ArrayUtils.contains(a,[this.getElementTypeName()])},getContentType:function(){return DataSourceItemsData.Image},getDefaultValue:$.returnUndefined,initialPropertiesValues:{ImageBox:{sizeAndPosition:{top:25,left:10,width:150,height:150},order:104,imageUrl:DesignerManager.getDefaultImage()},Button:{sizeAndPosition:{top:40,left:40,width:50,height:50},order:104,imageUrl:DesignerManager.getDefaultIcon()},MenuButton:{sizeAndPosition:{top:40,left:40,width:50,height:50},order:104,imageUrl:DesignerManager.getDefaultIcon()},DataListItemTemplate:{sizeAndPosition:{top:25,left:10,width:150,height:150},order:104,imageUrl:DesignerManager.getDefaultImage()}},title:"Image",isTarget:$.returnTrue,isText:$.returnFalse},{isEditable:true,name:"icon",type:"icon",convertValueToFieldValue:function(b,a){return $.extend({},a,{imageUrl:b})},convertFieldValueToValue:function(a){if(!a){return a}return a.imageUrl},iconClass:"sprite-icon sprite-tool-category-images",getElementTypeName:function(){return ElementsTypes.image.name},supportElementContentBinding:function(a){return ArrayUtils.contains(a,[this.getElementTypeName()])},getContentType:function(){return DataSourceItemsData.Icon},getDefaultValue:$.returnUndefined,initialPropertiesValues:{ImageBox:{sizeAndPosition:{top:25,left:10,width:150,height:150},order:104,imageUrl:DesignerManager.getDefaultIcon()},Button:{sizeAndPosition:{top:40,left:40,width:50,height:50},order:104,imageUrl:DesignerManager.getDefaultIcon()},MenuButton:{sizeAndPosition:{top:40,left:40,width:50,height:50},order:104,imageUrl:DesignerManager.getDefaultIcon()},DataListItemTemplate:{sizeAndPosition:{top:25,left:10,width:150,height:150},order:104,imageUrl:DesignerManager.getDefaultIcon()}},title:"Icon",isTarget:$.returnFalse,isText:$.returnFalse},{isEditable:true,name:"fontIcon",type:"fontIcon",iconClass:"sprite-icon sprite-tool-category-images",getElementTypeName:function(){return ElementsTypes.Icon.name},supportElementContentBinding:function(a){return ArrayUtils.contains(a,[this.getElementTypeName()])},getContentType:function(){return DataSourceItemsData.FontIcon},getDefaultValue:$.returnNull,initialPropertiesValues:{},title:"Icon",isTarget:$.returnTrue,isText:$.returnFalse},{isEditable:true,name:"title",type:"title",iconClass:"sprite-icon sprite-tool-category-text",getElementTypeName:function(){return ElementsTypes.label.name},supportElementContentBinding:function(a){return ArrayUtils.contains(a,[ElementsTypes.label.name,ElementsTypes.freeText.name])},getContentType:function(){return DataSourceItemsData.Text},getDefaultValue:$.returnEmptyString,title:"Title",isTarget:$.returnTrue,isText:$.returnTrue},{isEditable:true,name:"description",type:"description",iconClass:"sprite-icon sprite-tool-category-text",getElementTypeName:function(){return ElementsTypes.label.name},supportElementContentBinding:function(a){return ArrayUtils.contains(a,[ElementsTypes.label.name,ElementsTypes.freeText.name])},getDefaultValue:$.returnEmptyString,initialPropertiesValues:{Default:{text:"Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut ",horizontalAlign:HorizontalAlignment.Centered,verticalAlignment:VerticalAlignment.Centered,fontSize:13,sizeAndPosition:{width:220,height:60},order:103,backgroundColor:"transparent"}},title:"Description",getContentType:function(){return DataSourceItemsData.TextArea},isTarget:$.returnTrue,isText:$.returnTrue},{isEditable:true,name:"alt",type:"alt",getContentType:function(){return DataSourceItemsData.Alt},supportElementContentBinding:$.returnFalse,getDefaultValue:$.returnEmptyString,title:"Alt Tag",isTarget:$.returnTrue,isText:$.returnTrue},{isEditable:true,name:"video",type:"video",iconClass:"sprite-icon sprite-tool-category-video",getElementTypeName:function(){return ElementsTypes.youtube.name},supportElementContentBinding:function(a){return ArrayUtils.contains(a,[this.getElementTypeName()])},getContentType:function(){return DataSourceItemsData.Video},getDefaultValue:$.returnUndefined,initialPropertiesValues:{ImageBox:{sizeAndPosition:{top:25,left:10,width:150,height:150},order:104,videoId:DesignerManager.VideosIds[0]},Button:{sizeAndPosition:{top:40,left:40,width:50,height:50},order:104,videoId:DesignerManager.VideosIds[0]},MenuButton:{sizeAndPosition:{top:40,left:40,width:50,height:50},order:104,videoId:DesignerManager.VideosIds[0]},DataListItemTemplate:{sizeAndPosition:{top:25,left:10,width:150,height:150},order:104,videoId:DesignerManager.VideosIds[0]}},title:"Video",isTarget:$.returnTrue,isText:$.returnFalse},{isEditable:false,name:"paypal",type:"paypal",iconClass:"sprite-icon sprite-tool-category-video",getElementTypeName:function(){return ElementsTypes.paypalButton.name},supportElementContentBinding:function(a){return ArrayUtils.contains(a,[this.getElementTypeName()])},getContentType:function(){return DataSourceItemsData.PayPal},initialPropertiesValues:{ImageBox:{sizeAndPosition:{top:25,left:10,width:50,height:25},order:104,paypalData:PropertiesTypes.paypalData.defaultValue(),paypalOptions:PropertiesTypes.paypalOptions.defaultValue()},DataListItemTemplate:{sizeAndPosition:{top:25,left:10,width:50,height:25},order:104,paypalData:PropertiesTypes.paypalData.defaultValue(),paypalOptions:PropertiesTypes.paypalOptions.defaultValue()}},title:"PayPal Button",isTarget:$.returnFalse,isText:$.returnFalse},{isEditable:true,name:"input",type:"input",getElementTypeName:function(){return ElementsTypes.TextInputField.name},supportElementContentBinding:function(a){return ArrayUtils.contains(a,[this.getElementTypeName()])},getContentType:function(){return DataSourceItemsData.TextInput},initialPropertiesValues:{ImageBox:{fontSize:15,sizeAndPosition:{top:5,left:40,width:130,height:30},order:102},DataListItemTemplate:{fontSize:15,sizeAndPosition:{top:5,left:40,width:130,height:30},order:102}},title:"Text Input",isTarget:$.returnFalse,isText:$.returnFalse},{isEditable:true,name:"link",type:"link",supportElementContentBinding:$.returnFalse,getContentType:function(){return DataSourceItemsData.Link},getDefaultValue:$.returnUndefined,title:"Link",isTarget:function(a){return a!==ElementsTypes.MenuButton&&a!==ElementsTypes.Menu},isText:$.returnFalse}])}var SocialIconsSetCollection={};(function(){$.registerDefinitions(SocialIconsSetCollection,{StaticCollection:{icons:$.registerDefinitions({},{facebook:{collectionName:"public-font-icons",iconName:"facebook"},googlePlus:{collectionName:"public-font-icons",iconName:"google-plus"},twitter:{collectionName:"public-font-icons",iconName:"twitter2"},linkedin:{collectionName:"public-font-icons",iconName:"linkedin"},pinterest:{collectionName:"public-font-icons",iconName:"pinterest"},reddit:{collectionName:"public-font-icons",iconName:"reddit"},instagram:{collectionName:"public-font-icons",iconName:"instagram"},youtube:{collectionName:"public-font-icons",iconName:"youtube"},flickr:{collectionName:"public-font-icons",iconName:"flickr"},soundCloud:{collectionName:"public-font-icons",iconName:"soundcloud"},tripAdvisor:{collectionName:"public-font-icons",iconName:"tripadvisor"},picasa:{collectionName:"public-font-icons",iconName:"picasa"},behance:{collectionName:"public-font-icons",iconName:"behance"},etsy:{collectionName:"public-font-icons",iconName:"etsy"},tumblr:{collectionName:"public-font-icons",iconName:"tumblr"},dribbble:{collectionName:"public-font-icons",iconName:"dribbble"},vimeo:{collectionName:"public-font-icons",iconName:"vimeo-2342"},vk:{collectionName:"public-font-icons",iconName:"vk"},renren:{collectionName:"public-font-icons",iconName:"renren"},weibo:{collectionName:"public-font-icons",iconName:"weibo"}})},Collection1:{icons:$.registerDefinitions({},{facebook:{collectionName:"public-font-icons",iconName:"facebook"},googlePlus:{collectionName:"public-font-icons",iconName:"google-plus"},twitter:{collectionName:"public-font-icons",iconName:"twitter2"},linkedin:{collectionName:"public-font-icons",iconName:"linkedin"},pinterest:{collectionName:"public-font-icons",iconName:"pinterest"},reddit:{collectionName:"public-font-icons",iconName:"reddit"},instagram:{collectionName:"public-font-icons",iconName:"instagram"},youtube:{collectionName:"public-font-icons",iconName:"youtube"},flickr:{collectionName:"public-font-icons",iconName:"flickr"},soundCloud:{collectionName:"public-font-icons",iconName:"soundcloud"},tripAdvisor:{collectionName:"public-font-icons",iconName:"tripadvisor"},picasa:{collectionName:"public-font-icons",iconName:"picasa"},behance:{collectionName:"public-font-icons",iconName:"behance"},etsy:{collectionName:"public-font-icons",iconName:"etsy"},tumblr:{collectionName:"public-font-icons",iconName:"tumblr"},dribbble:{collectionName:"public-font-icons",iconName:"dribbble"},vimeo:{collectionName:"public-font-icons",iconName:"vimeo-2342"},vk:{collectionName:"public-font-icons",iconName:"vk"},renren:{collectionName:"public-font-icons",iconName:"renren"},weibo:{collectionName:"public-font-icons",iconName:"weibo"}})},Collection2:{icons:$.registerDefinitions({},{facebook:{collectionName:"public-font-icons",iconName:"facebook"},googlePlus:{collectionName:"public-font-icons",iconName:"google-plus"},twitter:{collectionName:"public-font-icons",iconName:"twitter2"},linkedin:{collectionName:"public-font-icons",iconName:"linkedin"},pinterest:{collectionName:"public-font-icons",iconName:"pinterest"},reddit:{collectionName:"public-font-icons",iconName:"reddit"},instagram:{collectionName:"public-font-icons",iconName:"instagram"},youtube:{collectionName:"public-font-icons",iconName:"youtube"},flickr:{collectionName:"public-font-icons",iconName:"flickr"},soundCloud:{collectionName:"public-font-icons",iconName:"soundcloud"},tripAdvisor:{collectionName:"public-font-icons",iconName:"tripadvisor"},picasa:{collectionName:"public-font-icons",iconName:"picasa"},behance:{collectionName:"public-font-icons",iconName:"behance"},etsy:{collectionName:"public-font-icons",iconName:"etsy"},tumblr:{collectionName:"public-font-icons",iconName:"tumblr"},dribbble:{collectionName:"public-font-icons",iconName:"dribbble"},vimeo:{collectionName:"public-font-icons",iconName:"vimeo-2342"},vk:{collectionName:"public-font-icons",iconName:"vk"},renren:{collectionName:"public-font-icons",iconName:"renren"},weibo:{collectionName:"public-font-icons",iconName:"weibo"}})}})})();var OptionsFactory=new function(){this.percentageSlider=function(a){return $.extend({min:0,max:100,unitsText:"%",textFunction:function(b){return b+"%"},fromSliderValueFunction:function(b){return b/100},toSliderValueFunction:function(b){return b*100},sliderType:SliderTypes.PercentageSlider},a)};this.pixelsTextBox=function(a){return $.extend({textBoxType:TextBoxTypes.Integer,unitsText:"px"},a)};this.transparentTextBox=function(a){return $.extend({className:"",textBoxType:TextBoxTypes.Text,unitsText:""},a)};this.scaleSlider=function(a){return $.extend({unitsText:"Percents",textFunction:function(b){if(b===0){return"None"}else{return b+"%"}},max:500,min:10,defaultValue:10,step:1,sliderType:SliderTypes.PercentageSlider},a)}}();var TriggerType={PageLoad:1,State:2,Trigger:3};var BehavioursManager=new function(){this.Events={BehaviourAdded:SimpleEvent.create(),BehaviourUpdated:SimpleEvent.create(),BehaviourRemoved:SimpleEvent.create()};var c={};var d={};var a={};var b={};var f={};this.getInstanceSourceConnections=function(g){if(d[g]){return d[g]}return{}};this.getInstanceTargetConnections=function(g){if(a[g]){return a[g]}return{}};this.getInstanceInitializedSourceConnections=function(g){if(b[g]){return b[g]}return{}};this.getInstanceInitializedTargetConnections=function(g){if(f[g]){return f[g]}return{}};this.addBehaviourToCollection=function(j){var i=j.sourceElementID;var h=j.targetElementID;var g=j.id;$.objectSetIfUndefined(a,i,$.returnEmptyObject);a[i][g]=j;$.objectSetIfUndefined(d,h,$.returnEmptyObject);d[h][g]=j};this.addBehaviourToInitializedCollection=function(k){var j=k.sourceElementID;var i=k.targetElementID;var h=k.id;$.objectSetIfUndefined(f,j,$.returnEmptyObject);f[j][h]=k;$.objectSetIfUndefined(b,i,$.returnEmptyObject);b[i][h]=k;var g=ElementsManager.getInstanceByID(j);if(g){g.hasActions.setTrue()}};this.removeBehaviourFromCollection=function(j){var i=j.sourceElementID;var h=j.targetElementID;var g=j.id;if(a[i]){delete a[i][g]}if(d[h]){delete d[h][g]}};this.removeBehaviourFromInitializedCollection=function(k){var j=k.sourceElementID;var i=k.targetElementID;var h=k.id;if(f[j]){delete f[j][h]}if(b[i]){delete b[i][h]}if($.getKeys(f[j]).length===0){var g=ElementsManager.getInstanceByID(j);if(g){g.hasActions.setFalse()}}};this.removeInstanceBehaviourFromCollections=function(g){delete a[g];delete d[g];delete f[g];delete b[g]};this.registerBehaviours=function(g){$.each(g,function(h,i){i=$.extend({onConnectionRemoved:$.noop,onConnectionAdded:$.noop,initializeBehaviourDefinition:$.returnValue,activateFunction:$.noop,deactivateFunction:$.noop,activateCallback:$.noop,deactivateCallback:$.noop},i);$.extendMissing(i,{name:h});var k=i.activateFunction;var j=i.deactivateFunction;i.activateFunction=function(m,n,l){PageManager.PageChangingOperation.performOperation(function(){if(!n.data.activatedBehaviours){n.data.activatedBehaviours={}}k(m,n,l);n.data.activatedBehaviours[h]=true})};i.deactivateFunction=function(m,n,l){PageManager.PageChangingOperation.performOperation(function(){if(!n.data.activatedBehaviours){n.data.activatedBehaviours={}}if(n.data.activatedBehaviours[h]){j(m,n,l);n.data.activatedBehaviours[h]=false}})};i=i.initializeBehaviourDefinition(i);Behaviours[h]=i})};this.extendBehaviour=function(g,h){$.extend(g,h)};this.createActionBehaviour=function(i){var h={};var g={};i.activate=function(m,n,k,o){if(k.isTemplateConenction){var l=ElementActivationManager.getSameConnections(m.id,n.id,i.name,k);if(l.length>1){return}}switch(k.triggerType){case TriggerType.PageLoad:i.activateCallback(m,n,k);var j=false;LayoutManager.layoutUpdateBatch.performOperation(function(){var p=PageManager.getCurrentPage();if(p.id==m.getPageId()){i.activateFunction(m,n,k);j=true}});h[o]=PageManager.Events.PageChanged.bind(function(){if(!j){var p=PageManager.getCurrentPage();if(p.id==m.getPageId()){i.activateFunction(m,n,k)}}else{j=false}});break;case TriggerType.State:h[o]=m.elementStateActivated.bind(k.triggerName,function(){if(PageManager.Flags.isInPageChanging.isTrue()){var p=$.extend({},k);p.animationDuration=0;i.activateFunction(m,n,p)}else{i.activateFunction(m,n,k)}});g[o]=m.elementStateRemoved.bind(k.triggerName,function(){i.deactivateFunction(m,n,k)});i.activateCallback(m,n,k);break;case TriggerType.Trigger:h[o]=m.triggerActivated.bind(k.triggerName,function(){i.activateFunction(m,n,k)});i.activateCallback(m,n,k);break}};i.deactivate=function(k,l,j,m){switch(j.triggerType){case TriggerType.PageLoad:if(h[m]){PageManager.Events.PageChanged.unbind(h[m])}i.deactivateCallback(k,l,j);break;case TriggerType.State:if(h[m]){k.elementStateActivated.unbind(h[m].bindingName)}if(g[m]){k.elementStateRemoved.unbind(g[m].bindingName)}i.deactivateCallback(k,l,j);break;case TriggerType.Trigger:if(h[m]){k.triggerActivated.unbind(h[m].bindingName)}i.deactivateCallback(k,l,j);break;h[m]=undefined;g[m]=undefined}};return i};this.initBehaviours=function(g){$.each(g.getInitializedTargetConnections(),function(k,h){var l=ElementsManager.getInstanceByID(h.targetElementID);if(l&&l.shouldInitInstanceOnPageChange()){var j=ElementsManager.getInstanceByID(h.sourceElementID);Behaviours[h.behaviourName].deactivateFunction(j,l,{animationDuration:0},h.id)}})};this.activateBehaviours=function(g){$.each(g.getInitializedTargetConnections(),function(h,j){BehavioursManager.activateBehaviour(j)})};this.activateBehaviour=function(i){var g=ElementsManager.getInstanceByID(i.sourceElementID);var h=ElementsManager.getInstanceByID(i.targetElementID);if(g&&h&&!c[i.id]){c[i.id]=true;Behaviours[i.behaviourName].activate(g,h,i.options,i.id)}};this.deactivateBehaviours=function(g){$.each(g.getInitializedTargetConnections(),function(h,j){BehavioursManager.deactivateBehaviour(j)})};this.deactivateBehaviour=function(i){var g=ElementsManager.getInstanceByID(i.sourceElementID);var h=ElementsManager.getInstanceByID(i.targetElementID);c[i.id]=false;if(g&&h){Behaviours[i.behaviourName].deactivate(g,h,i.options,i.id)}}}();var Behaviours={};(function(){ElementInstance.addInstancePrototypeExtension(function(a){return{behaviourAdded:SimpleEvent.create(a),behaviourRemoved:SimpleEvent.create(a),behaviourUpdated:SimpleEvent.create(a)}})})();var TriggersManager=new (function(){this.registerTriggers=function(a){$.each(a,function(c,d){var b=$.extend({activatedStates:[],deactivatedStates:[]},d);$.extendMissing(b,{name:c});Triggers[c]=b;TriggersInformation.put(b)})};this.extendTrigger=function(a,b){$.extend(a,b)}})();var Triggers={};var TriggersInformation=new ObservableCollection();var ElementStatesManager=new (function(){var a=this;this.registerElementStates=function(d){for(var b in d){var c=d[b];c.name=b;$.extendMissing(c,{priority:0});ElementStates[b]=c}};this.extendElementState=function(b,c){$.extend(b,c)};this.getComplexStateId=function(b){var c=1;$.each(b,function(d,f){c=a.getComplexIdFromIds(c,f.id)});return c};this.getComplexStateName=function(c){var b=$.getKeys(c);if(b.length>1){var d=1;$.each(c,function(f,g){d=a.getComplexIdFromIds(d,g.id)});return d}else{return c[b[0]].name}};this.getComplexIdFromIds=function(c,b){return c*b};this.getComplexIdWithOutId=function(c,b){return c/b};this.getStatesMapFromIds=function(c){var d={};for(var b=0;b<c.length;b++){if(!ElementStates[c[b]]){return null}d[c[b]]=ElementStates[c[b]]}return d};this.getComplexStatePriority=function(c){var b=1;var d=10;$.each(c,function(f,g){b+=g.priority+d});return b};this.registerComplexState=function(c){if(c&&c.length>1){var b={};var d=a.getStatesMapFromIds(c);if(d===null){return false}var f=a.getComplexStateId(d);if(!ElementStates[f]){b[f]={ids:c,priority:ElementStatesManager.getComplexStatePriority(d),id:f,name:f,isComplex:true,statesMap:d};ElementStatesManager.registerElementStates(b)}return ElementStates[f]}}})();var ElementStates={};(function(){ElementStatesManager.registerElementStates({NormalState:{id:1},MouseDownState:{priority:3,id:3},ElementSelectedState:{priority:3,id:5},ElementFocusedState:{priority:3,id:7},BeforeLoadedState:{priority:4,id:11},BeforeOpenedState:{priority:4,id:17},FirstButton:{priority:1,id:19},LastButton:{priority:1,id:23},MobileState:{priority:7,id:29}});ElementStatesManager.registerElementStates({MouseOverState:{priority:2,id:13}});for(var c in ElementStates){var d=ElementStates[c];if(c!==ElementStates.NormalState.name&&c!==ElementStates.MobileState.name){var b=[ElementStates.MobileState.name,d.name];var a=ElementStatesManager.registerComplexState(b)}}})();(function(){TriggersManager.registerTriggers({GotFocus:{activatedStates:[ElementStates.ElementFocusedState]},LostFocus:{deactivatedStates:[ElementStates.ElementFocusedState]},MouseClick:{},MouseDown:{activatedStates:[ElementStates.MouseDownState]},MouseUp:{deactivatedStates:[ElementStates.MouseDownState]},MouseEnter:{activatedStates:[ElementStates.MouseOverState]},MouseLeave:{deactivatedStates:[ElementStates.MouseOverState]},PageLeave:{deactivatedStates:[ElementStates.BeforeLoadedState,ElementStates.BeforeOpenedState]},PageLoaded:{activatedStates:[ElementStates.BeforeLoadedState,ElementStates.BeforeOpenedState]},PageOpened:{activatedStates:[ElementStates.BeforeOpenedState,ElementStates.BeforeLoadedState]},Selected:{activatedStates:[ElementStates.ElementSelectedState]},Unselected:{deactivatedStates:[ElementStates.ElementSelectedState]}})})();(function(){BehavioursManager.registerBehaviours({ScrollToFixedBehaviour:{activate:function(c,d,b){return;if(MobileVersionViewManager.Flags.IsInMobileContext){return}var a=this;if(!d.data.originalPosition&&PositionManager.isElementVisible(d)){d.data.originalPosition=d.$element.position()}c.data.ScrollToFixedSizeAndPosition=SimpleEvent.bind([c.offsetChangedEvent,c.sizeChangedEvent],function(){if(!a.tempDeactivation){a.tempDeactivation=true;a.deactivate(c,d,b);LayoutManager.layoutUpdateBatch.performOperation(function(){a.activate(c,d,b)});a.tempDeactivation=false}});c.data.ScrollToFixedBehaviour=c.$element.scrollToFixed({fixedClass:"scroll-to-fixed",distance:b.distance,startPosition:c.data.originalPosition.top,fixedCallback:function(){if(c.parentInstance===PageManager.getCurrentPage()&&!c.data.isFixedCallback){c.data.isFixedCallback=true;c.$element.addClass("positioned-fixed");$(window).bind("scroll."+c.id+"isFixedBehaviour",function(){LayoutManager.requestUpdatePosition(c)})}},unfixedCallback:function(){if(c.parentInstance===PageManager.getCurrentPage()){c.data.isFixedCallback=false;c.$element.removeClass("positioned-fixed");$(window).unbind("scroll."+c.id+"isFixedBehaviour")}}})},deactivate:function(b,c,a){return;if(MobileVersionViewManager.Flags.IsInMobileContext.isTrue()){return}if(!this.tempDeactivation){c.data.originalPosition=undefined}b.data.ScrollToFixedBehaviour.unbind();SimpleEvent.unbind(b.data.ScrollToFixedSizeAndPosition);LayoutManager.refreshElementsLayout(b)}}})})();(function(){BehavioursManager.registerBehaviours({ScaleBehaviour:{initializeBehaviourDefinition:BehavioursManager.createActionBehaviour,activateFunction:function(c,d,b){a(d,b.ratio,b)},deactivateFunction:function(c,d,b){a(d,1,b)},deactivateCallback:function(c,d,b){this.deactivateFunction(c,d,{});window.setTimeout(function(){PositionManager.updatePosition(c)},0)}}});function a(d,c,b){if($.browser.msie&&parseInt($.browser.version)<9){return}b=$.extend({animationDuration:0},b);var g=c===1?"":"scale({0})".format(c);var f={};f[$.support.transformCSS]=g;var h={transitionDuration:b.animationDuration};d.animatePart(d.$element,{transform:g},f,h,{complete:function(){PositionManager.updatePosition(d)}})}})();(function(){BehavioursManager.registerBehaviours({RotateBehaviour:{initializeBehaviourDefinition:BehavioursManager.createActionBehaviour,activateFunction:function(c,d,b){a(d,b.degree,b,true)},activateCallback:function(c,d,b){var f=$('<span class="design-element-rotation-wrapper"></span>');d.getMainBox().wrap(f);d.data.rotateBehaviourWrapper=d.getMainBox().parent()},deactivateFunction:function(c,d,b){a(d,0,b,false)},deactivateCallback:function(c,d,b){d.getMainBox().unwrap();this.deactivateFunction(c,d,{animationDirection:b.animationDirection});window.setTimeout(function(){PositionManager.updatePosition(d)},0)}}});function a(c,h,b,g){if($.browser.msie&&parseInt($.browser.version)<9){return}b=$.extend({animationDuration:0,animationDirection:"left"},b);var i=h;if(b){if(b.animationDirection==="left"&&g){i=-h}}var f=!i?"rotate(0deg)":"rotate({0}deg)".format(i);var d={};d[$.support.transformCSS]=f;var j=c.data.rotateBehaviourWrapper;c.animatePart(j,{transform:f},d,{transitionDirection:b.animationDirection,transitionDuration:b.animationDuration});PositionManager.updatePosition(c)}})();(function(){BehavioursManager.registerBehaviours({TriggerGoogleEvent:{initializeBehaviourDefinition:BehavioursManager.createActionBehaviour,activateFunction:function(a,b,c){if(!Global.IsDesigner){$.triggerGoogleEvent($.extend({category:PageManager.getCurrentPage().getPropertyValue("name"),action:"deafaultAction",label:undefined,value:undefined},c))}}}})})();(function(){BehavioursManager.registerBehaviours({SubmitForm:{initializeBehaviourDefinition:BehavioursManager.createActionBehaviour,activateFunction:a},ClearForm:{initializeBehaviourDefinition:BehavioursManager.createActionBehaviour,activateFunction:b}});function a(j,l,c){if(Global.IsDesigner){ConfirmationPanel.getController().openModal({header1:"Form Submission",header2:"Form submission works only in the published version of your site.",buttons:ConfirmationPanel.OkButton})}else{var f=l.getPropertyValue("formID");var i=[];var h;var d=[];$.each(l.getTemplatesArray(),function(p,r){var n=r.getInstance();var o=n.getDataItem();var q=n.getValue();if(!o.fieldOptions.isOptional&&(q===undefined||q===null||q==="")){i.push(o.fieldName)}d.push(n)});if(i.length===0){h=$.map(d,function(o){var n=o.getDataItem();return{fieldName:SiteManager.getFormFieldName(n),fieldValue:o.getValue()}})}if(i.length===0){ViewersService.submitForm(Global.SiteID,SiteManager.getSiteType(),f,null,h,function(q){var o=l.getPropertyValue("submitAddress");if(l.getPropertyValue("formOptions").clearOnSubmit){b(j,l)}if(!o||$.isEmptyObject(o)){if(q===false){alert(l.getPropertyValue("submitError"))}else{alert(l.getPropertyValue("submitText"))}}else{var n;if(o.type===LinkTypes.Pages){var p=PageManager.getPageData(o.url);if(!p){return}n=PageManager.getPageFragmentValue(o.url);UrlManager.navigate(n)}else{var r=o.url;if(r.indexOf("://")<0){r="http://"+r}n=r;window.location=n}}},function(){alert(l.getPropertyValue("submitError"))})}else{var m="You must fill out the fields below: ";var k="";var g=" , ";$.each(i,function(n,o){if(n===i.length-1){g="."}k+=o+g});alert(m+k)}}}function b(d,f){var c=$.grep(f.getDescendingInstances(false),function(g){return g.elementType===ElementsTypes.skinInputElement});$.each(c,function(){this.clear()})}})();(function(){BehavioursManager.registerBehaviours({ShowTab:{initializeBehaviourDefinition:BehavioursManager.createActionBehaviour,activateFunction:function(f,g,d){d=$.extend({performAnimation:true,animationOptions:{},targetTab:undefined},d);if(d.targetTab){var h=ElementsManager.getInstanceByID(d.targetTab);if(h){g.showItem(h,d.performAnimation,undefined,d.animationOptions)}}},activateCallback:function(f,g,d){f.data["currentItemChangedEventShowTab"+g.id]=g.currentItemChangedEvent.bind(function(){if(!ViewManager.isDesignMode()){if(g.getCurrentItem().id===d.targetTab){f.userSelect(true)}else{f.userSelect(false)}}})},deactivateCallback:function(d,f){f.currentItemChangedEvent.unbind(d.data["currentItemChangedEventShowTab"+f.id])}},NavigateTo:{initializeBehaviourDefinition:BehavioursManager.createActionBehaviour,activateFunction:c},NavigateNext:{initializeBehaviourDefinition:BehavioursManager.createActionBehaviour,activateFunction:a},NavigatePrev:{initializeBehaviourDefinition:BehavioursManager.createActionBehaviour,activateFunction:b},NextPage:{initializeBehaviourDefinition:BehavioursManager.createActionBehaviour,activateFunction:function(){PageManager.switchToNextPage()}},PrevPage:{initializeBehaviourDefinition:BehavioursManager.createActionBehaviour,activateFunction:function(){PageManager.switchToPrevPage()}}});function a(f,g,d){d=$.extend({entranceAnimation:undefined,entranceAnimationSpeed:undefined,entranceAnimationDirection:undefined,exitAnimation:undefined,exitAnimationSpeed:undefined,exitAnimationDirection:undefined},d);if(g.isTypeOf(ElementsTypes.PostsList)&&g.isPrimary()){ListUtils.navigatePrimaryPostList(g,1)}else{g.navigate(1,true,undefined,d)}}function c(f,g,h){var d=$.extend({animationDuration:0},h);ElementsManager.scrollToInstanceInPreview(g,d)}function b(f,g,d){d=$.extend({entranceAnimation:undefined,entranceAnimationSpeed:undefined,entranceAnimationDirection:undefined,exitAnimation:undefined,exitAnimationSpeed:undefined,exitAnimationDirection:undefined},d);if(g.isTypeOf(ElementsTypes.PostsList)&&g.isPrimary()){ListUtils.navigatePrimaryPostList(g,-1)}else{g.navigate(-1,true,undefined,d)}}})();(function(){BehavioursManager.registerBehaviours({ActivateState:{initializeBehaviourDefinition:BehavioursManager.createActionBehaviour,activateFunction:function(b,c,a){StatesGroupsManager.activateStateGroupState(a.groupId,a.stateId)},deactivateFunction:function(b,c,a){StatesGroupsManager.deactivateStateGroup(a.groupId)}},DeactivateState:{initializeBehaviourDefinition:BehavioursManager.createActionBehaviour,activateFunction:function(b,c,a){StatesGroupsManager.deactivateStateGroup(a.groupId)},deactivateFunction:function(b,c,a){StatesGroupsManager.activateStateGroupState(a.groupId,a.stateId)}},ActivateAllStates:{initializeBehaviourDefinition:BehavioursManager.createActionBehaviour,activateFunction:function(b,c,a){StatesGroupsManager.activateStateGroupStates(a.groupId)},deactivateFunction:function(b,c,a){StatesGroupsManager.deactivateStateGroup(a.groupId)}}})})();(function(){BehavioursManager.registerBehaviours({PlayVideo:{initializeBehaviourDefinition:BehavioursManager.createActionBehaviour,deactivateFunction:a,activateFunction:b,deactivateCallback:function(d,f){a(d,f)}},StopVideo:{initializeBehaviourDefinition:BehavioursManager.createActionBehaviour,activateFunction:a,deactivateCallback:function(d,f){a(d,f)}},PauseVideo:{initializeBehaviourDefinition:BehavioursManager.createActionBehaviour,deactivateFunction:a,activateFunction:c,deactivateCallback:function(d,f){a(d,f)}}});function a(f,g,d){g.stop()}function c(f,g,d){g.pause()}function b(f,g,d){g.play()}})();(function(){BehavioursManager.registerBehaviours({showInCenter:{initializeBehaviourDefinition:BehavioursManager.createActionBehaviour,activateFunction:function(f,g,d){PopUpManager.showInPopup(g)}},ShowElement:{initializeBehaviourDefinition:BehavioursManager.createActionBehaviour,deactivateFunction:c,activateFunction:b},HideElement:{initializeBehaviourDefinition:BehavioursManager.createActionBehaviour,deactivateFunction:b,activateFunction:c}});function c(g,h,f,d){if(!f){f={}}var i=a(f,d);PropertiesManager.updateComputedValue(h,h.properties.isVisible,false,i,true)}function b(g,h,f,d){if(!f){f={}}var i=a(f,d);PropertiesManager.updateComputedValue(h,h.properties.isVisible,true,i,true)}function a(f,d){return $.extend({transitionEffect:Animations.NoAnimation.name,transitionDuration:0,transitionSlideDirection:"left",transitionFlyDirection:{vertical:"top",horizontal:"left"}},{transitionEffect:f.animationType,transitionDuration:d?0:f.animationDuration,transitionSlideDirection:f.animationSlideDirection,transitionFlyDirection:f.animationDirection})}})();(function(){BehavioursManager.registerBehaviours({ExternalAppConnectionBehaviour:{activate:function(b,c,a){if(!b.hasFeature(Features.ConnectableExternalApp)){throw new Error("Invalid use")}b.connectFeatureInstance(a.featureName,c)},deactivate:function(b,c,a){if(!b.hasFeature(Features.ConnectableExternalApp)){throw new Error("Invalid use")}b.disconnectFeatureInstance(a.featureName,c)}}})})();var PropertiesHelper=new function(){this.isUnifiedValue=function(a,c){if($.isPlainObject(a)){var b=true;if(c===undefined){c=a[$.getKeys(a)[0]]}$.each(a,function(f,d){if(!$.defaultEqualityComparer(c,d)){b=false;return false}});return b}return c===undefined||$.defaultEqualityComparer(a,c)}}();EditorManager=new function(){this.Flags={PcEditing:ObservableFlag.create(true),MobileEditing:ObservableFlag.create(false,{valueChangeCallback:function(d){DesignerStateManager.toggleState(DesignerStates.MobileEditing,d)}}),InUserEditingMode:ObservableFlag.create(true)};this.SwitchBetweenMobileAndPcBatch=OperationsBatch.create();this.contextEditingClass=ContextValue.createContextClass({getTarget:function(){return $("body")}});this.MobileDesktopViewClass="mobile-desktop-mode";this.PcDesktopViewClass="pc-desktop-mode";var c;var b;this.setEditingClass=function(d){EditorManager.contextEditingClass.set(d)};this.getEditorCoordinator=function(){return c};this.initialize=function(d){if(Global.IsDesigner){a(d)}else{EditorManager.Flags.PcEditing.isFalse()}Global.Events.FinishGroupInitialization.one(function(){EditorManager.setEditingClass(Global.IsMobileView?EditorManager.MobileDesktopViewClass:EditorManager.PcDesktopViewClass)})};this.getCoordinatorHierarchyForSave=function(){var d=ElementsManager.getHierarchyInfo(c,{forSaving:true,saveToServer:true,idsInHierarchy:true,copyAffectedStates:false,copyAffectingStates:true,copyMobileStates:false});if(b){d=ElementsManager.adjustHierarchyWithBaseHierarchy(d,b,function(h,f,g){if(g===MobileVersionViewManager.MobileStateName&&ElementsManager.getInstanceByID(f)){return false}return true})}StructureLoadingManager.preSaveHierarchy(d);return d};function a(d){if(d&&d.editorCoordinator){var f=d.editorCoordinator;f.isCoordinator=true;b=f;StructureLoadingManager.loadHierarchy(f);c=ElementsManager.addHierarchyInfo(b)[0]}else{c=ElementsManager.addInstance(ElementsTypes.EditorCoordinator,null,{elementID:"editorCoordinator"});Global.Events.ElementsAdded.fire(Global,{instances:[c]})}PageManager.Events.CoordinatorInitialized.fire()}}();var EditorFeaturesManager=new function(){var g=this;var d=[];var a={};var c={};this.Events={ConfigurationChanged:SimpleEvent.create()};this.createFlagAndStore=function(i){var h=ObservableFlag.create(i);d.push({observable:h,defaultValue:i});return h};this.createObservableNumericObjectAndStore=function(i){var h=ObservableObject.createNumerical(i);d.push({observable:h,defaultValue:i});return h};this.setCustomConfiguration=function(h){c=h;g.applyConfiguration(a)};this.applyConfiguration=function(h){a=h;var i=$.extend(true,{},c,a);f();b(i,FeaturesToggling);EditorFeaturesManager.Events.ConfigurationChanged.fire()};this.applyDefaultConfiguration=function(){a={};c={};f();EditorFeaturesManager.Events.ConfigurationChanged.fire()};function f(){$.each(d,function(h,j){j.observable.setValue(j.defaultValue)})}function b(h,i){$.each(h,function(j,k){if($.isPlainObject(k)){b(k,i[j])}else{i[j].setValue(k)}})}}();var FeaturesToggling={TopHeaderFlag:EditorFeaturesManager.createFlagAndStore(true),TopHeader:{AddButtonFlag:EditorFeaturesManager.createFlagAndStore(true),AddTab:{ImageButtonFlag:EditorFeaturesManager.createFlagAndStore(true),TextButtonFlag:EditorFeaturesManager.createFlagAndStore(true),DateButtonFlag:EditorFeaturesManager.createFlagAndStore(true),ShapesButtonFlag:EditorFeaturesManager.createFlagAndStore(true),ButtonsButtonFlag:EditorFeaturesManager.createFlagAndStore(true),PanelsButtonFlag:EditorFeaturesManager.createFlagAndStore(true),VideoButtonFlag:EditorFeaturesManager.createFlagAndStore(true),SocialButtonFlag:EditorFeaturesManager.createFlagAndStore(true),EcommerceButtonFlag:EditorFeaturesManager.createFlagAndStore(true),WidgetButtonFlag:EditorFeaturesManager.createFlagAndStore(true),MapButtonFlag:EditorFeaturesManager.createFlagAndStore(true),FormButtonFlag:EditorFeaturesManager.createFlagAndStore(true),MenuButtonFlag:EditorFeaturesManager.createFlagAndStore(true),GalleryButtonFlag:EditorFeaturesManager.createFlagAndStore(true),ListWidgetsButtonFlag:EditorFeaturesManager.createFlagAndStore(true),FlashButtonFlag:EditorFeaturesManager.createFlagAndStore(true),DocumentsButtonFlag:EditorFeaturesManager.createFlagAndStore(true),BlogButtonFlag:EditorFeaturesManager.createFlagAndStore($.objectGet(PageData,["editorFeatures","blog"])==="1"),AppButtonFlag:EditorFeaturesManager.createFlagAndStore(true),TemplatesButtonFlag:EditorFeaturesManager.createFlagAndStore(true),AddTextPanel:{TitleButtonFlag:EditorFeaturesManager.createFlagAndStore(true),HeadingButtonFlag:EditorFeaturesManager.createFlagAndStore(true),TextButtonFlag:EditorFeaturesManager.createFlagAndStore(true),ParagraphButtonFlag:EditorFeaturesManager.createFlagAndStore(true)},AddShapesPanel:{RectangleButtonFlag:EditorFeaturesManager.createFlagAndStore(true),EllipseButtonFlag:EditorFeaturesManager.createFlagAndStore(true),TriangleButtonFlag:EditorFeaturesManager.createFlagAndStore(true),HorizontalLineButtonFlag:EditorFeaturesManager.createFlagAndStore(true),VerticalLineButtonFlag:EditorFeaturesManager.createFlagAndStore(true)},AddButtonsPanel:{CommonButtonFlag:EditorFeaturesManager.createFlagAndStore(true),NavigationButtonFlag:EditorFeaturesManager.createFlagAndStore(true),VideoButtonFlag:EditorFeaturesManager.createFlagAndStore(true),FormButtonFlag:EditorFeaturesManager.createFlagAndStore(true),DownloadButtonFlag:EditorFeaturesManager.createFlagAndStore(true),ButtonGroupButtonFlag:EditorFeaturesManager.createFlagAndStore(true)},AddPanelsPanel:{BoxButtonFlag:EditorFeaturesManager.createFlagAndStore(true),TabsButtonFlag:EditorFeaturesManager.createFlagAndStore(true)},AddSocialPanel:{LikeButtonFlag:EditorFeaturesManager.createFlagAndStore(true),ActivityButtonFlag:EditorFeaturesManager.createFlagAndStore(true),CommentsButtonFlag:EditorFeaturesManager.createFlagAndStore(true),LikeBoxButtonFlag:EditorFeaturesManager.createFlagAndStore(true),FollowButtonFlag:EditorFeaturesManager.createFlagAndStore(true),FacePileButtonFlag:EditorFeaturesManager.createFlagAndStore(true)}},StyleButtonFlag:EditorFeaturesManager.createFlagAndStore(true),StyleTab:{StatesButtonFlag:EditorFeaturesManager.createFlagAndStore(true),PaddingButtonFlag:EditorFeaturesManager.createFlagAndStore(true),BackgroundButtonFlag:EditorFeaturesManager.createFlagAndStore(true),BorderButtonFlag:EditorFeaturesManager.createFlagAndStore(true),ShadowButtonFlag:EditorFeaturesManager.createFlagAndStore(true),RoundnessButtonFlag:EditorFeaturesManager.createFlagAndStore(true),TextButtonFlag:EditorFeaturesManager.createFlagAndStore(true),SizeVisualizerFlag:EditorFeaturesManager.createFlagAndStore(true),PositionVisualizerFlag:EditorFeaturesManager.createFlagAndStore(true),MarginVisualizerFlag:EditorFeaturesManager.createFlagAndStore(true),DockingVisualizerFlag:EditorFeaturesManager.createFlagAndStore(true),FillColorVisualizerFlag:EditorFeaturesManager.createFlagAndStore(true),LineColorVisualizerFlag:EditorFeaturesManager.createFlagAndStore(true),TextColorVisualizerFlag:EditorFeaturesManager.createFlagAndStore(true),CopyAndPasteStyleButtonsFlag:EditorFeaturesManager.createFlagAndStore(true)},PagesButtonFlag:EditorFeaturesManager.createFlagAndStore(true),PagesTab:{ManagePagesButtonFlag:EditorFeaturesManager.createFlagAndStore(true),ManageSiteButtonFlag:EditorFeaturesManager.createFlagAndStore(true),SiteRoutingButtonFlag:EditorFeaturesManager.createFlagAndStore(true),NewPageButtonFlag:EditorFeaturesManager.createFlagAndStore(true),DeletePageButtonFlag:EditorFeaturesManager.createFlagAndStore(true),PagesNavigationSectionFlag:EditorFeaturesManager.createFlagAndStore(true),AllPagesButtonFlag:EditorFeaturesManager.createFlagAndStore(true)},LayoutButtonFlag:EditorFeaturesManager.createFlagAndStore(!Global.IsMobile),LayoutTab:{ResolutionButtonFlag:EditorFeaturesManager.createFlagAndStore(true),ResponsiveSectionFlag:EditorFeaturesManager.createFlagAndStore(true),ResponsiveSectionOptions:{ShowViewPortFlag:EditorFeaturesManager.createFlagAndStore(true)}},ManageButtonFlag:EditorFeaturesManager.createFlagAndStore(true),ManageTab:{SiteButtonFlag:EditorFeaturesManager.createFlagAndStore(true),SocialButtonFlag:EditorFeaturesManager.createFlagAndStore(true),EcommerceButtonFlag:EditorFeaturesManager.createFlagAndStore(true),FontsButtonFlag:EditorFeaturesManager.createFlagAndStore(true),DomainButtonFlag:EditorFeaturesManager.createFlagAndStore(true),UsersButtonFlag:EditorFeaturesManager.createFlagAndStore(true),SEOButtonFlag:EditorFeaturesManager.createFlagAndStore(true),RoutingButtonFlag:EditorFeaturesManager.createFlagAndStore(true),AnalyticsButtonFlag:EditorFeaturesManager.createFlagAndStore(true)},ArrangeButtonFlag:EditorFeaturesManager.createFlagAndStore(true),ArrangeTab:{VerticalAlignmentPartFlag:EditorFeaturesManager.createFlagAndStore(true),HorizontalAlignmentPartFlag:EditorFeaturesManager.createFlagAndStore(true),AdjustSizePartFlag:EditorFeaturesManager.createFlagAndStore(true),ArrangePartFlag:EditorFeaturesManager.createFlagAndStore(true),CircleButtonFlag:EditorFeaturesManager.createFlagAndStore(true),GridButtonFlag:EditorFeaturesManager.createFlagAndStore(true),LineButtonFlag:EditorFeaturesManager.createFlagAndStore(true),ColumnButtonFlag:EditorFeaturesManager.createFlagAndStore(true),GroupButtonFlag:EditorFeaturesManager.createFlagAndStore(true)},TemplateButtonFlag:EditorFeaturesManager.createFlagAndStore(true),TemplateTab:{},SnappingButtonFlag:EditorFeaturesManager.createFlagAndStore(true),GridButtonFlag:EditorFeaturesManager.createFlagAndStore(true),RullersButtonFlag:EditorFeaturesManager.createFlagAndStore(true),UndoButtonFlag:EditorFeaturesManager.createFlagAndStore(true),RedoButtonFlag:EditorFeaturesManager.createFlagAndStore(true),SaveButtonFlag:EditorFeaturesManager.createFlagAndStore(true),PublishButtonFlag:EditorFeaturesManager.createFlagAndStore(true),SimpleEditButtonFlag:EditorFeaturesManager.createFlagAndStore(true),PreviewButtonFlag:EditorFeaturesManager.createFlagAndStore(true),HelpButtonFlag:EditorFeaturesManager.createFlagAndStore(true),FullScreenFlag:EditorFeaturesManager.createFlagAndStore(false)},LefterFlag:EditorFeaturesManager.createFlagAndStore(true),Lefter:{FeaturesBarFlag:EditorFeaturesManager.createFlagAndStore(true),FeaturesBarButtons:{BehavioursFlag:EditorFeaturesManager.createFlagAndStore(true),StatesFlag:EditorFeaturesManager.createFlagAndStore(true)},ElementSeoFlag:EditorFeaturesManager.createFlagAndStore(true),ElementAppearanceFlag:EditorFeaturesManager.createFlagAndStore(true),ElementBehavioursFlag:EditorFeaturesManager.createFlagAndStore(true),FooterSectionFlag:EditorFeaturesManager.createFlagAndStore(true),LinkVisualizerFlag:EditorFeaturesManager.createFlagAndStore(true),ShowOnAllPagesVisualizerFlag:EditorFeaturesManager.createFlagAndStore(true),CustomizeFlag:EditorFeaturesManager.createFlagAndStore(true),CustomizePanel:{ManagePagesFlag:EditorFeaturesManager.createFlagAndStore(true),RecolorFlag:EditorFeaturesManager.createFlagAndStore(true),ScaleFlag:EditorFeaturesManager.createFlagAndStore(true),ImageLoadingSettingsFlag:EditorFeaturesManager.createFlagAndStore(true),CropImageFlag:EditorFeaturesManager.createFlagAndStore(true),ManageFontsFlag:EditorFeaturesManager.createFlagAndStore(true),SelectInnerElementsFlag:EditorFeaturesManager.createFlagAndStore(true),UnwrapInnerElementsFlag:EditorFeaturesManager.createFlagAndStore(true),AddTabFlag:EditorFeaturesManager.createFlagAndStore(true),DuplicateTabFlag:EditorFeaturesManager.createFlagAndStore(true),AddNavigationFlag:EditorFeaturesManager.createFlagAndStore(true),TransitionsFlag:EditorFeaturesManager.createFlagAndStore(true),UngroupFlag:EditorFeaturesManager.createFlagAndStore(true),UngroupElementFlag:EditorFeaturesManager.createFlagAndStore(true),SelectGroupedElements:EditorFeaturesManager.createFlagAndStore(true),ChangeButtonFlag:EditorFeaturesManager.createFlagAndStore(true),AddVideoWidgetsFlag:EditorFeaturesManager.createFlagAndStore(true),ChangeVideoFlag:EditorFeaturesManager.createFlagAndStore(true),ChangeVideoPreviewFlag:EditorFeaturesManager.createFlagAndStore(true),ChangePayPalFlag:EditorFeaturesManager.createFlagAndStore(true),ChangeCheckOutFlag:EditorFeaturesManager.createFlagAndStore(true),PayPalAccountFlag:EditorFeaturesManager.createFlagAndStore(true),ManageFormFlag:EditorFeaturesManager.createFlagAndStore(true),ChangeFormFlag:EditorFeaturesManager.createFlagAndStore(true),AddFormButtonsFlag:EditorFeaturesManager.createFlagAndStore(true),ApplyTemplateToAllItemsFlag:EditorFeaturesManager.createFlagAndStore(true),ApplyAsTemplateFlag:EditorFeaturesManager.createFlagAndStore(true),AttachTemplateFlag:EditorFeaturesManager.createFlagAndStore(true),ChangeItemTemplateFlag:EditorFeaturesManager.createFlagAndStore(true),ManageGalleryFlag:EditorFeaturesManager.createFlagAndStore(true),ChangeGalleryFlag:EditorFeaturesManager.createFlagAndStore(true),ManageMenuFlag:EditorFeaturesManager.createFlagAndStore(true),ChangeMenuFlag:EditorFeaturesManager.createFlagAndStore(true)},FacebookSettingsFlag:EditorFeaturesManager.createFlagAndStore(true),ImageSettingsFlag:EditorFeaturesManager.createFlagAndStore(true),TextSettingsFlag:EditorFeaturesManager.createFlagAndStore(true),AttachedElementsFlag:EditorFeaturesManager.createFlagAndStore(true),TabsFlag:EditorFeaturesManager.createFlagAndStore(true),GroupElementsFlag:EditorFeaturesManager.createFlagAndStore(true),YoutubeSettingsFlag:EditorFeaturesManager.createFlagAndStore(true),PayPalButtonSettings:EditorFeaturesManager.createFlagAndStore(true),PayPalCheckOutSettings:EditorFeaturesManager.createFlagAndStore(true),NavigationSettingsFlag:EditorFeaturesManager.createFlagAndStore(true),MapSettingsFlag:EditorFeaturesManager.createFlagAndStore(true),MapMarkersFlag:EditorFeaturesManager.createFlagAndStore(true),FormEmailFlag:EditorFeaturesManager.createFlagAndStore(true),FormArrangementFlag:EditorFeaturesManager.createFlagAndStore(true),SubmitSettingsFlag:EditorFeaturesManager.createFlagAndStore(true),ManageItemFieldsFlag:EditorFeaturesManager.createFlagAndStore(true),DataListLayoutFlag:EditorFeaturesManager.createFlagAndStore(true),AlignmentFlag:EditorFeaturesManager.createFlagAndStore(true),DataListSettingsFlag:EditorFeaturesManager.createFlagAndStore(true),TemplateLayoutSettingFlag:EditorFeaturesManager.createFlagAndStore(true),DataListTemplatesFlag:EditorFeaturesManager.createFlagAndStore(true),ButtonGroupSettingsFlag:EditorFeaturesManager.createFlagAndStore(true),ButtonSettingsFlag:EditorFeaturesManager.createFlagAndStore(true),MasterTemplateFlag:EditorFeaturesManager.createFlagAndStore(true),PageBackgroundFlag:EditorFeaturesManager.createFlagAndStore(true)},FooterFlag:EditorFeaturesManager.createFlagAndStore(true),Footer:{ElementNavigationPathFlag:EditorFeaturesManager.createFlagAndStore(true),HiddenElementsFlag:EditorFeaturesManager.createFlagAndStore(true),NotificationsFlag:EditorFeaturesManager.createFlagAndStore(true),UserAccountFlag:EditorFeaturesManager.createFlagAndStore(true)},ContextTextPanelFlag:EditorFeaturesManager.createFlagAndStore(true),ContextTextPanel:{VerticalAligmenetFlag:EditorFeaturesManager.createFlagAndStore(true),TextDirectionFlag:EditorFeaturesManager.createFlagAndStore(true)},ContextPanelFlag:EditorFeaturesManager.createFlagAndStore(true),ContextPanel:{OperationsFlag:EditorFeaturesManager.createFlagAndStore(true),Operations:{LinkButtonFlag:EditorFeaturesManager.createFlagAndStore(true),RecolorButtonFlag:EditorFeaturesManager.createFlagAndStore(true),DuplicateButtonFlag:EditorFeaturesManager.createFlagAndStore(true),SendForwardButtonFlag:EditorFeaturesManager.createFlagAndStore(true),SendBackwardButtonFlag:EditorFeaturesManager.createFlagAndStore(true),DeleteButtonFlag:EditorFeaturesManager.createFlagAndStore(true),HideInMobileFlag:EditorFeaturesManager.createFlagAndStore(true)},SettingsButtonFlag:EditorFeaturesManager.createFlagAndStore(true),ScaleFlag:EditorFeaturesManager.createFlagAndStore(true),GroupElementsFlag:EditorFeaturesManager.createFlagAndStore(true),UnGroupElementsFlag:EditorFeaturesManager.createFlagAndStore(true),ChangeImageFlag:EditorFeaturesManager.createFlagAndStore(true),CropImageFlag:EditorFeaturesManager.createFlagAndStore(true),EditTextFlag:EditorFeaturesManager.createFlagAndStore(true),ChangeBackgroundFlag:EditorFeaturesManager.createFlagAndStore(true),RotateRightFlag:EditorFeaturesManager.createFlagAndStore(true),RotateLeftFlag:EditorFeaturesManager.createFlagAndStore(true),ChangeColorFlag:EditorFeaturesManager.createFlagAndStore(true),AddTabFlag:EditorFeaturesManager.createFlagAndStore(true),AddNavigationFlag:EditorFeaturesManager.createFlagAndStore(true),UngroupFlag:EditorFeaturesManager.createFlagAndStore(true),ChangeButtonFlag:EditorFeaturesManager.createFlagAndStore(true),ChangeVideoFlag:EditorFeaturesManager.createFlagAndStore(true),AddVideoButtonsFlag:EditorFeaturesManager.createFlagAndStore(true),ChangePayPalButtonFlag:EditorFeaturesManager.createFlagAndStore(true),ChangeCheckOutButtonFlag:EditorFeaturesManager.createFlagAndStore(true),MapAddressFlag:EditorFeaturesManager.createFlagAndStore(true),ManageFormFlag:EditorFeaturesManager.createFlagAndStore(true),ChangeFormFlag:EditorFeaturesManager.createFlagAndStore(true),AddFormButtonsFlag:EditorFeaturesManager.createFlagAndStore(true),EditTemplateFlag:EditorFeaturesManager.createFlagAndStore(true),ApplySizeToAllItemsFlag:EditorFeaturesManager.createFlagAndStore(true),UnifyColumnWidthFlag:EditorFeaturesManager.createFlagAndStore(true),AttachToTemplateFlag:EditorFeaturesManager.createFlagAndStore(true),ManageItemsFlag:EditorFeaturesManager.createFlagAndStore(true),ChangeDesignFlag:EditorFeaturesManager.createFlagAndStore(true),ShowOnAllPagesFlag:EditorFeaturesManager.createFlagAndStore(true),FitToContentFlag:EditorFeaturesManager.createFlagAndStore(true)},ContextBarPanelFlag:EditorFeaturesManager.createFlagAndStore(true),ContextMenuFlag:EditorFeaturesManager.createFlagAndStore(true),ContextMenu:{},Panels:{},EditorThemeObject:EditorFeaturesManager.createObservableNumericObjectAndStore(1),EditorFeatures:{MarkSelectionTargetFlag:EditorFeaturesManager.createFlagAndStore(true),ShowRuluersFlag:EditorFeaturesManager.createFlagAndStore(true),SelectionFlag:EditorFeaturesManager.createFlagAndStore(true),SelectionOptions:{SingleSelectionFlag:EditorFeaturesManager.createFlagAndStore(true),AreaSelectionFlag:EditorFeaturesManager.createFlagAndStore(true),AltSelectionFlag:EditorFeaturesManager.createFlagAndStore(true),CtrlSelectionFlag:EditorFeaturesManager.createFlagAndStore(true),HoverOnSelecteeFlag:EditorFeaturesManager.createFlagAndStore(true),MarkSelecteeOnSelectionAreaFlag:EditorFeaturesManager.createFlagAndStore(true),MarkSelectedOnSelectionAreaFlag:EditorFeaturesManager.createFlagAndStore(true)},DraggingFlag:EditorFeaturesManager.createFlagAndStore(true),DraggingOptions:{ShiftDraggingFlag:EditorFeaturesManager.createFlagAndStore(true)},ResizingFlag:EditorFeaturesManager.createFlagAndStore(true),ResizingOptions:{ShowSingleResizingGripsFlag:EditorFeaturesManager.createFlagAndStore(true),ShowAreaResizingGripsFlag:EditorFeaturesManager.createFlagAndStore(true),ShiftResizingFlag:EditorFeaturesManager.createFlagAndStore(true),AltResizingFlag:EditorFeaturesManager.createFlagAndStore(true)},RedroppingFlag:EditorFeaturesManager.createFlagAndStore(true),RedroppingOptions:{RightMouseClickFlag:EditorFeaturesManager.createFlagAndStore(true),RedropWithCtrlFlag:EditorFeaturesManager.createFlagAndStore(true)},SnappingFlag:EditorFeaturesManager.createFlagAndStore(true),SnappingOptions:{SnapToRullersFlag:EditorFeaturesManager.createFlagAndStore(true),SnapToCoolumnsGridFlag:EditorFeaturesManager.createFlagAndStore(true),SnapToElementsFlag:EditorFeaturesManager.createFlagAndStore(true),HighlightSnappedElementsFlag:EditorFeaturesManager.createFlagAndStore(true),SnapToleranceObject:EditorFeaturesManager.createObservableNumericObjectAndStore(5)}}};var PayPalButtonManager=new function(){var a=this;this.createPayPalButton=function(d,l,f){if(!d){return}f=f?f:EcommerceManager.ButtonTypes.buynow.value;var c=$.extend({env:"www",business:d,size:"large",cmd:"_xclick"},l);switch(f){case EcommerceManager.ButtonTypes.cart.value:c.cmd="_cart";c.add="true";break;case EcommerceManager.ButtonTypes.donate.value:c.cmd="_donations";break;case EcommerceManager.ButtonTypes.view.value:f="cart";c.cmd="_cart";c.add="true";break}c.bn="JavaScriptButton_{0}".format(f);var b=document.createElement("form");var g=document.createElement("input");var k=c.size;b.method="post";b.action="https://{0}.paypal.com/cgi-bin/webscr".format(c.env);b.className="paypal-button";b.target="_blank";g.type="hidden";for(var j in c){var i=c[j];var h=g.cloneNode(true);h.name=j;h.value=i;b.appendChild(h)}return $(b)}}();var FormFieldsManager=new function(){this.registerFormFields=function(a){$.each(a,function(b,c){FormFields[b]=$.extend({name:b},c)})}}();var FormFields={};FormFieldsManager.registerFormFields({LabelField:{name:"LabelField"}});var FontsManager=new function(){var c=this;this.SiteFonts=new ObservableCollection({idFunction:function(d){return d.fontFamily}});this.PreviewFontsUpdateBatch=OperationsBatch.create({batchStartCallback:function(){c.PreviewFonts.FontsUpdateBatch.start()},batchFinishCallback:function(){c.PreviewFonts.FontsUpdateBatch.finish()}});this.useFontFamily=function(d){};this.getSiteFonts=function(){return $.getValues(FontsManager.SiteFonts.getItems())};this.initialize=function(f){if(f===undefined){f=a()}var g=b();var d=$.makeSet(g,function(h){return h.fontFamily});f=$.grep(f,function(h){return !d[h.fontFamily]});f=$.merge(g,f);FontsManager.SiteFonts.put(f);c.SiteFontsController=DynamicFonts.create({fonts:$.map(f,function(h){if(!h.fileNamePrefix){return undefined}return{fontFamily:h.fontFamily,fontUrlPrefix:AssetsManager.resolveFontUrl(h)}})});FontsManager.SiteFonts.itemsAddedEvent.bind(function(h){c.SiteFontsController.addFonts($.map(h,function(i){return{fontFamily:i.fontFamily,fontUrlPrefix:AssetsManager.resolveFontUrl(i)}}))});FontsManager.SiteFonts.itemRemovingEvent.bind(function(h){c.SiteFontsController.removeFonts(h.fontFamily)});if(Global.IsDesigner){c.PreviewFonts=DynamicFonts.create()}};this.loadSupportedGoogleFonts=$.noop;this.getFontDisplayText=function(d){if(ThemeFontsManager.isFontBinding(d)){return"{0} ({1})".format(ThemeFontsManager.getThemeFontType(d),ThemeFontsManager.evaluateFontBinding(d))}else{return d}};this.addPreviewFonts=function(d){d=$.makeArray(d);c.PreviewFonts.FontsUpdateBatch.start();$.each(d,function(g,j){var f="font"+j.fileNamePrefix;var h=AssetsManager.resolveFontUrl(j);c.PreviewFonts.addFont(f,h)});c.PreviewFonts.FontsUpdateBatch.finish()};this.setPreviewFont=function(d,f){c.addPreviewFonts(f);d.css("font-family","font"+f.fileNamePrefix)};this.getPreviewFontFamily=function(d){return"font"+d.fileNamePrefix};function b(){var d=[{fontFamily:"Arial"},{fontFamily:"Open Sans",fileNamePrefix:"ALyKWGaVsEemWmMSYxY8yg"},{fontFamily:"Open Sans Semi Bold",fileNamePrefix:"1aJZYUlSkk6puu4aOD3swQ"},{fontFamily:"Open Sans Extra Bold",fileNamePrefix:"I7CsSHRfZ0GB3AlD-DX-CQ"},{fontFamily:"Open Sans Condensed Light",fileNamePrefix:"zrpWq297sEeRsdU269eKIw"},{fontFamily:"Abril Fatface",fileNamePrefix:"gDLUCJWR_kqtWwfvIU_PaA"},{fontFamily:"Old Standard TT",fileNamePrefix:"kQqAlUNfAUWwCMQC0RiqsA"},{fontFamily:"Old Standard TT Italic",fileNamePrefix:"5ef35NcXqE-Sn4NiR-kJ3w"},{fontFamily:"Old Standard TT Bold",fileNamePrefix:"YWxRPXjKo0GD6sF4iTxb1A"},{fontFamily:"Amatic SC Bold",fileNamePrefix:"vncilunqC0SNXw6uCxWKYw"},{fontFamily:"Amatic SC",fileNamePrefix:"J-Q2uiHPAUWsLt1eszDGwg"},{fontFamily:"Bad Script",fileNamePrefix:"1Bgd0dJpN0GXJNyBAzkHww"},{fontFamily:"Dancing Script Bold",fileNamePrefix:"-BbHXw_ndE26qvVGfs-anQ"},{fontFamily:"Droid Sans Bold",fileNamePrefix:"ne7cbOZqTkedYy1HwYydZg"},{fontFamily:"Droid Serif",fileNamePrefix:"ePS3nDDdtEGk9UXdlz3xaw"},{fontFamily:"Gravitas One",fileNamePrefix:"Ia_3RDEl902d_biCJt5AFA"},{fontFamily:"Julius Sans One",fileNamePrefix:"w7D5mT_LT0-R_obV2nz21A"},{fontFamily:"Kaushan Script",fileNamePrefix:"N7N-3fd-v0qOnhTu-9GamA"},{fontFamily:"Lato Light",fileNamePrefix:"JYwDjrpa8U6xfI7FKlWegw"},{fontFamily:"Lato",fileNamePrefix:"kMHuzhNgr0KObYFogkU9qg"},{fontFamily:"Lobster",fileNamePrefix:"kPGhPwcvbkOCT9x5L5PHhw"},{fontFamily:"Neuton Bold",fileNamePrefix:"qFokD41aVU27THVC-6RMuw"},{fontFamily:"Neuton Extra Light",fileNamePrefix:"jk72vychhEmjX17_Z5nbjg"},{fontFamily:"Neuton",fileNamePrefix:"6a8BIp-h8EWtgJAOTPMYAw"},{fontFamily:"Nixie One",fileNamePrefix:"xctC69Fg002n2dGvXpnZIw"},{fontFamily:"Oleo Script",fileNamePrefix:"dCfhlsJpIk2_PlZcLee6-w"},{fontFamily:"PT Mono",fileNamePrefix:"mKwJ41VczkuadvZQFB69iQ"},{fontFamily:"PT Sans",fileNamePrefix:"ujtBJKYCkk-aGRvjqZ2Q6g"},{fontFamily:"PT Sans Bold",fileNamePrefix:"jyCuK2Q9ckmUVHo_bxIt1w"},{fontFamily:"PT Sans Narrow Bold",fileNamePrefix:"R3vKkDHIkEqPkFN_BbFEYA"},{fontFamily:"PT Serif",fileNamePrefix:"k0Q0RpzRHUa3xsKlKajrYw"},{fontFamily:"Source Sans Pro Light",fileNamePrefix:"N-FTQm6wJUid2Llo-YmLXw"},{fontFamily:"Source Sans Pro Semi Bold",fileNamePrefix:"Cuwea6LnvkOqcMrkyGOEWA"},{fontFamily:"Vollkorn",fileNamePrefix:"9_jFFW9MXU2YKrxUFFf7Tw"},{fontFamily:"Vollkorn Italic",fileNamePrefix:"_NLTS5Xqx0u8VVDeXpU6xQ"},{fontFamily:"Vollkorn Bold",fileNamePrefix:"KvLEhsX3PEeA-FNngJB2qQ"}];$.each(d,function(g,f){f.ownerID=null;if(f.storageServer===undefined){f.storageServer=AssetsStorageServers.AzureBlob}});return d}function a(){return[{id:"c09c885d-6218-410b-8870-0567be7bacd2",fontFamily:"ChunkFive",supportedLanguages:["eng"],classification:"serif",fileNamePrefix:"XYicwBhiC0GIcAVnvnus0g",storageServer:4,ownerID:null},{id:"0218ee78-8fb2-4a8a-a104-07af0fb595f6",fontFamily:"Trade Winds",supportedLanguages:["eng"],classification:"decorative",fileNamePrefix:"eO4YArKPikqhBAevD7WV9g",storageServer:4,ownerID:null},{id:"7dbceeb3-6db6-4340-b511-07d698996ebb",fontFamily:"Monofett",supportedLanguages:["eng"],classification:"decorative",fileNamePrefix:"s-68fbZtQEO1EQfWmJluuw",storageServer:4,ownerID:null},{id:"c62d3acb-e722-4ee7-9bd1-0989f096666d",fontFamily:"Daniel",supportedLanguages:["eng"],classification:"hand",fileNamePrefix:"yzotxiLn506b0QmJ8JZmbQ",storageServer:4,ownerID:null},{id:"e52e2b3b-cf41-4efd-bfaf-12310555a963",fontFamily:"Sansation",supportedLanguages:["eng"],classification:"sanserif",fileNamePrefix:"Oysu5UHP_U6_rxIxBVWpYw",storageServer:4,ownerID:null},{id:"3a19ffeb-9eb2-4352-80bd-13cd8161dbf7",fontFamily:"Journal",supportedLanguages:["eng"],classification:"hand",fileNamePrefix:"6_8ZOrKeUkOAvRPNgWHb9w",storageServer:4,ownerID:null},{id:"ae6ac39d-1c58-4844-af75-153e93e35a7b",fontFamily:"Smokum",supportedLanguages:["eng"],classification:"serif",fileNamePrefix:"ncNqrlgcREivdRU-k-Naew",storageServer:4,ownerID:null},{id:"8a9d8040-0523-4c66-93f1-19930b7cbac9",fontFamily:"Astloch",supportedLanguages:["eng"],classification:"hand",fileNamePrefix:"QICdiiMFZkyT8RmTC3y6yQ",storageServer:4,ownerID:null},{id:"317350d9-ac32-40e9-bf24-1995387d7609",fontFamily:"Flavors",supportedLanguages:["eng"],classification:"decorative",fileNamePrefix:"2VBzMTKs6UC_JBmVOH12CQ",storageServer:4,ownerID:null},{id:"642b8eaa-b418-4db8-b9ea-1b9c8aa86d00",fontFamily:"Ultra",supportedLanguages:["eng"],classification:"serif",fileNamePrefix:"qo4rZBi0uE256huciqhtAA",storageServer:4,ownerID:null},{id:"2c3211e9-2b6a-49c6-b63a-1e40b49fa28f",fontFamily:"Oxygen",supportedLanguages:["eng"],classification:"sanserif",fileNamePrefix:"6REyLGorxkm2Oh5AtJ-ijw",storageServer:4,ownerID:null},{id:"31757e21-a23d-4b2b-af66-2de414ece485",fontFamily:"Loved by the King",supportedLanguages:["eng"],classification:"hand",fileNamePrefix:"IX51MT2iK0uvZi3kFOzkhQ",storageServer:4,ownerID:null},{id:"78ec2b16-7746-4d71-b549-2e02bcddbb58",fontFamily:"Ubuntu",supportedLanguages:["eng"],classification:"sanserif",fileNamePrefix:"FivseEZ3cU21SS4CvN27WA",storageServer:4,ownerID:null},{id:"3a767f73-88f9-4a5b-b9d9-314b6953ff2b",fontFamily:"alegreya",supportedLanguages:["eng"],classification:"serif",fileNamePrefix:"c392OvmIW0q52TFLaVP_Kw",storageServer:4,ownerID:null},{id:"367e3596-460d-4385-8894-33bc86900d45",fontFamily:"Geostar Fill",supportedLanguages:["eng"],classification:"serif",fileNamePrefix:"ljV-Ng1GhUOIlDO8hpANRQ",storageServer:4,ownerID:null},{id:"9a12ddc9-4d39-484b-88f8-3ba12992301a",fontFamily:"GoodDog",supportedLanguages:["eng"],classification:"decorative",fileNamePrefix:"yd0SmjlNS0iI-DuhKZIwGg",storageServer:4,ownerID:null},{id:"481951ac-767c-411a-94ad-42178d05bd9e",fontFamily:"WalkWay",supportedLanguages:["eng"],classification:"sanserif",fileNamePrefix:"rFEZSHx2GkGUrUIXjQW9ng",storageServer:4,ownerID:null},{id:"790f646a-9f89-4aac-9793-530d241b955d",fontFamily:"IM Fell English SC",supportedLanguages:["eng"],classification:"serif",fileNamePrefix:"amQPeYmfrEqXk1MNJBuVXQ",storageServer:4,ownerID:null},{id:"aa1aa242-4565-493d-8dc8-53672f30e967",fontFamily:"Metamorphous",supportedLanguages:["eng"],classification:"sanserif",fileNamePrefix:"QqIaqmVFPUmNyFNnLzDpZw",storageServer:4,ownerID:null},{id:"265b03e5-acde-4773-9b5d-55a462006730",fontFamily:"Droid Sans",supportedLanguages:["eng"],classification:"sanserif",fileNamePrefix:"5QNbJt6sc0ebXVWkYgBnMA",storageServer:4,ownerID:null},{id:"cf62fd55-956a-418a-bbc1-577c0bdb2ddc",fontFamily:"Fredericka the Great",supportedLanguages:["eng"],classification:"decorative",fileNamePrefix:"Vf1iz2qVikG7wVd8C9st3A",storageServer:4,ownerID:null},{id:"fcae94e7-2fec-4ea0-8e29-584a2b3498e9",fontFamily:"Eater",supportedLanguages:["eng"],classification:"decorative",fileNamePrefix:"55Su_OwvoE6OKVhKKzSY6Q",storageServer:4,ownerID:null},{id:"c87f2751-0273-48ca-b050-5bd471272166",fontFamily:"Vast Shadow",supportedLanguages:["eng"],classification:"decorative",fileNamePrefix:"USd_yHMCykiwUFvUcSchZg",storageServer:4,ownerID:null},{id:"a1fec907-1d82-4efd-8ea5-72aa2462692a",fontFamily:"Shadows Into Light",supportedLanguages:["eng"],classification:"hand",fileNamePrefix:"B8n-oYId_U6OpXKqJGJpKg",storageServer:4,ownerID:null},{id:"bca1239b-cfd9-4674-a3f3-77bfe865cd9e",fontFamily:"Sail",supportedLanguages:["eng"],classification:"hand",fileNamePrefix:"myOhvNnPdEaj83e_6GXNng",storageServer:4,ownerID:null},{id:"c0c4ebfa-376e-456d-b52f-7bc3a5524511",fontFamily:"Monoton",supportedLanguages:["eng"],classification:"decorative",fileNamePrefix:"-uvEwG43bUW1L3vDpVJFEQ",storageServer:4,ownerID:null},{id:"4d70accc-c3eb-4e30-831f-87c2aebbba92",fontFamily:"Windsong",supportedLanguages:["eng"],classification:"hand",fileNamePrefix:"zKxwTevDME6DH4fCrru6kg",storageServer:4,ownerID:null},{id:"649495ea-c170-4cf0-a7c1-899801f3b23a",fontFamily:"Frijole",supportedLanguages:["eng"],classification:"decorative",fileNamePrefix:"6pWUZHDB8EynwYmYAfOyOg",storageServer:4,ownerID:null},{id:"ce47876c-91e9-4828-bcdd-8c969c79eed4",fontFamily:"Montserrat Alternates",supportedLanguages:["eng"],classification:"decorative",fileNamePrefix:"bIdHzumRKEi83YyWnHnu1A",storageServer:4,ownerID:null},{id:"d3c0077c-8bf2-4eab-846a-8f423e34340d",fontFamily:"Geostar",supportedLanguages:["eng"],classification:"serif",fileNamePrefix:"fAfA0_KLq06Eao9CPjQ0DQ",storageServer:4,ownerID:null},{id:"0cb005e2-6cb1-4f9a-b41d-915a272a1b76",fontFamily:"Creepster",supportedLanguages:["eng"],classification:"decorative",fileNamePrefix:"4gWwDLFsmk-0HZFaJyobdg",storageServer:4,ownerID:null},{id:"7cade256-3cb9-45aa-a4d8-97b306fd4dbc",fontFamily:"Love Ya Like A Sister",supportedLanguages:["eng"],classification:"decorative",fileNamePrefix:"VuKtfLk8qkWk2JezBv1NvA",storageServer:4,ownerID:null},{id:"2071d878-f419-47cd-b047-9bb130909aae",fontFamily:"Raleway",supportedLanguages:["eng"],classification:"sanserif",fileNamePrefix:"eNhxIBn0zUewR5uxMJCarg",storageServer:4,ownerID:null},{id:"88e68407-dc4c-4ed4-ada4-b4c89c83f206",fontFamily:"Merienda One",supportedLanguages:["eng"],classification:"decorative",fileNamePrefix:"B4TmiEzc1E6tpLTInIPyBg",storageServer:4,ownerID:null},{id:"6ac971e7-32c6-4cf8-9960-bd37457038ea",fontFamily:"Titillium Web",supportedLanguages:["eng"],classification:"sanserif",fileNamePrefix:"53HJasYy-EyZYL03RXA46g",storageServer:4,ownerID:null},{id:"5e1f36d2-2c8e-4e67-bdc9-be3821863d46",fontFamily:"Fascinate",supportedLanguages:["eng"],classification:"decorative",fileNamePrefix:"0jYfXo4sZ069yb44IYY9Rg",storageServer:4,ownerID:null},{id:"6a0c7754-700e-4c3e-9bb9-c7c28ac10924",fontFamily:"Megrim",supportedLanguages:["eng"],classification:"sanserif",fileNamePrefix:"VHcMag5wPkybucfCisEJJA",storageServer:4,ownerID:null},{id:"b040c83c-d7a1-4fd5-96e2-ccfea301d539",fontFamily:"Ballpark",supportedLanguages:["eng"],classification:"hand",fileNamePrefix:"PMhAsKHX1U-W4sz-owHVOQ",storageServer:4,ownerID:null},{id:"4228bbc5-24cf-4b16-9962-d16e83224608",fontFamily:"Miltonian",supportedLanguages:["eng"],classification:"decorative",fileNamePrefix:"xbsoQs8kFkuZYtFugyJGCA",storageServer:4,ownerID:null},{id:"dabde0dc-c2ac-445b-ae82-d17271036830",fontFamily:"Average Sans",supportedLanguages:["eng"],classification:"sanserif",fileNamePrefix:"3OC92qzCW0SugtFycQNoMA",storageServer:4,ownerID:null},{id:"a1f56792-8d49-47b5-b238-e176eee56874",fontFamily:"Questrial",supportedLanguages:["eng"],classification:"sanserif",fileNamePrefix:"kmf1oUmNtUeyOOF27uVodA",storageServer:4,ownerID:null},{id:"d2a8a6f3-ae33-4f02-9873-e319979ebc3c",fontFamily:"Plaster",supportedLanguages:["eng"],classification:"decorative",fileNamePrefix:"86ao0jOuAk-Yc-MZl568PA",storageServer:4,ownerID:null},{id:"55445c86-6517-4786-a23b-e7969bd58cc7",fontFamily:"Ubuntu Condensed",supportedLanguages:["eng"],classification:"sanserif",fileNamePrefix:"hlxEVRdlhkeiO-eWm9WMxw",storageServer:4,ownerID:null},{id:"589684e8-cae5-44d9-a4e8-ecaaabbd07f3",fontFamily:"Seymour One",supportedLanguages:["eng"],classification:"decorative",fileNamePrefix:"6ISWWOXK2USk6Oyqq70H8w",storageServer:4,ownerID:null},{id:"0399ce94-4c94-4280-aa47-f257929bf1b6",fontFamily:"Butcherman",supportedLanguages:["eng"],classification:"decorative",fileNamePrefix:"lM6ZA5RMgEKqR_JXkpvxtg",storageServer:4,ownerID:null},{id:"b4d1d6e8-0d30-4b5a-9dae-f46e9d0200e0",fontFamily:"MarketingScript",supportedLanguages:["eng"],classification:"hand",fileNamePrefix:"6NbRtDANWkudrvRunQIA4A",storageServer:4,ownerID:null},{id:"fe4e0d3a-2ef7-4331-8f57-ff80a693729a",fontFamily:"Caesar Dressing",supportedLanguages:["eng"],classification:"decorative",fileNamePrefix:"Og1O_vcuMUOPV_-AppNymg",storageServer:4,ownerID:null}]}}();var AccountsManager=new (function(){var a=DeferredObject.create(function(){return{paypal:"YourPayPalEmail@domain.com",facebookPageUrl:SocialLinksManager.getBrandSocialDefaultLink("facebook"),siteEmail:"youremail@domain.com",googleCard:"youremail@domain.com",googlePlus:SocialLinksManager.getBrandSocialDefaultLink("googlePlus"),twitter:SocialLinksManager.getBrandSocialDefaultLink("twitter"),linkedin:"http://www.linkedin.com"}});this.Types={PayPal:"paypal",SiteEmail:"siteEmail",Facebook:"facebookPageUrl",GoogleCard:"googleCard",GooglePlus:"googlePlus",Twitter:"twitter",Linkedin:"linkedin"};this.Events={AccountsChangedEvent:SimpleEvent.create()};this.getDefaultAccountId=function(b){return a.get()[b]};this.getAccountID=function(b){return SiteSettingsManager.getValue(b+"AccountId",a.get()[b])};this.setAccountID=function(b,c,d){SiteSettingsManager.setValue(b+"AccountId",c,{onSuccess:d,onError:$.noop})}})();var InstancePoolingManager=new (function(){var c=this;var b;var a={};this.initialize=function(){b=PoolingController.create();c.stopPooling()};this.attach=function(f,l,n){var h=[];l=l?l:$.returnTrue;n=n?n:$.noop;f=$.makeArray(f);for(var k=0;k<f.length;k++){var m=f[k];var g=$.uniqueID();var j=m.id;if(!a[j]){m.data.poolingVisibilityChanaged=m.visibilityChangedEvent.bind(function(){var i=PositionManager.isElementVisible(m);if(!i){c.postponeSamples(m,"visibility")}else{c.unPostponeSamples(m,"visibility")}});var d={id:j,callbacksItems:{}};a[j]=d}a[j].callbacksItems[g]=b.attach(l,n,g);h.push({callbackId:g,id:j})}if(b.getCallbacksLength()>0){c.startPooling()}return h};this.stopPooling=function(d){d=!d?"default":d;b.stopPooling(d)};this.startPooling=function(d){d=!d?"default":d;b.startPooling(d)};this.postponeSamples=function(f,d){d=!d?"default":d;f=$.makeArray(f);$.each(f,function(h,g){var j=a[g.id];if(j){$.each(j.callbacksItems,function(k,i){i.postpone(d)})}})};this.unPostponeSamples=function(f,d){d=!d?"default":d;f=$.makeArray(f);$.each(f,function(h,g){var j=a[g.id];if(j){$.each(j.callbacksItems,function(k,i){i.unPostpone(d)})}})};this.detach=function(h){h=$.makeArray(h);for(var f=0;f<h.length;f++){var g=h[f];if(a[g.id]){a[g.id].callbacksItems[g.callbackId].detach();delete a[g.id].callbacksItems[g.callbackId];if($.getKeys(a[g.id].callbacksItems).length===0){delete a[g.id];var d=ElementsManager.getInstanceByID(g.id);if(d){d.visibilityChangedEvent.unbind(d.data.poolingVisibilityChanaged)}}}}if(b.getCallbacksLength()===0){c.stopPooling()}}})();var StatesGroupsManager=new function(){var f=this;var c={};var d={};var a={};this.initialize=function(){Global.Events.FinishGroupInitialization.bind(function(){var h=PageManager.getCoordinator();var g=h.getPropertyValue("siteStatesGroups");c[h.id]=new ObservableCollection();if(g!==null){var i=$.getValues(g);c[h.id].put(i);$.each(i,function(k,j){b(j.id);$.each(j.states,function(l,m){d[j.id].put(m)})})}})};function b(i){var h=PageManager.getCoordinator();if(!d[i]){var g=h.getPropertyValue("siteStatesGroups");d[i]=new ObservableCollection();d[i].itemsUpdatedEvent.bind(function(l){var j=h.getPropertyValue("siteStatesGroups");var k={};if(j!==null){k=$.extend({},j)}$.each(l,function(m,n){k[i].states[n.id].title=n.title});h.setPropertyValue("siteStatesGroups",k)})}}this.addStateGroup=function(i){var h=PageManager.getCoordinator();i=$.extend({title:"States Group "+(c[h.id].getItemsValues().length+1),stateTitle:"State 1",id:StructureLoadingManager.generateWebsiteId(),stateId:StructureLoadingManager.generateWebsiteId()},i);var j=i.id;var g=h.getPropertyValue("siteStatesGroups");var k={};if(g!==null){k=$.extend({},g)}k[j]={id:j,title:i.title,states:{},currentState:undefined};h.setPropertyValue("siteStatesGroups",k);b(j);c[h.id].put([k[j]]);f.addStateGroupState(j,{id:i.stateId,title:i.stateTitle});return j};this.renameStatesGroup=function(j,i){if(!j){return}var h=PageManager.getCoordinator();var g=h.getPropertyValue("siteStatesGroups");var k={};if(g!==null){k=$.extend({},g)}k[j].title=i;h.setPropertyValue("siteStatesGroups",g);c[h.id].updateItem(j,k[j])};this.removeStateGroup=function(j){if(!j){return}var h=PageManager.getCoordinator();var g=h.getPropertyValue("siteStatesGroups");var k={};if(g!==null){k=$.extend({},g)}d[j].clear();delete d[j];delete k[j];c[h.id].remove(j);h.setPropertyValue("siteStatesGroups",k);var i=$.grep($.getValues(PageManager.getCoordinator().getSourceConnections()),function(l){return l.options.groupId===j});$.each(i,function(m,l){ElementActivationManager.removeConnection(l)})};this.addStateGroupState=function(k,j){if(!k){return}var h=PageManager.getCoordinator();var g=h.getPropertyValue("siteStatesGroups");var l={};if(g!==null){l=$.extend({},g)}j=$.extend({title:"State"+($.getKeys(l[k].states).length+1),id:StructureLoadingManager.generateWebsiteId()},j);var i=j.id;l[k].states[i]={id:i,title:j.title};d[k].put([l[k].states[i]]);c[h.id].updateItem(k,l[k]);h.setPropertyValue("siteStatesGroups",l);return i};this.removeStateGroupState=function(j,l){if(!j||!l){return}var h=PageManager.getCoordinator();var g=h.getPropertyValue("siteStatesGroups");var k={};if(g!==null){k=$.extend({},g)}delete k[j].states[l];d[j].remove(l);c[h.id].updateItem(j,k[j]);h.setPropertyValue("siteStatesGroups",k);var i=$.grep($.getValues(PageManager.getCoordinator().getSourceConnections()),function(m){return m.options.groupId===j&&m.options.stateId===l});$.each(i,function(n,m){ElementActivationManager.removeConnection(m)});PropertiesManager.resetCustomState(h,{source:h.id,type:{name:l.toString()}})};this.activateStateGroupState=function(h,i){if(!h||!i){return}f.deactivateStateGroupState(h,a[h]);var g=PageManager.getCoordinator();PropertiesManager.addGlobalState({name:i.toString()},g);a[h]=i};this.getCurrentActivatedState=function(g){return a[g]};this.deactivateStateGroupState=function(i,j,h){if(!i||!j){return}var g=PageManager.getCoordinator();PropertiesManager.removeGlobalState({name:j.toString()},g);a[i]=undefined};this.deactivateStateGroup=function(h){if(!h||!a[h]){return}var g=PageManager.getCoordinator();PropertiesManager.removeGlobalState({name:a[h].toString()},g);a[h]=undefined};this.clearActivatedStatesGroups=function(){a={}};this.activateStateGroupStates=function(i,h){if(!i){return}var g=d[i].getItemsValues();$.each(g,function(j,k){window.setTimeout(function(){f.activateStateGroupState(i,k.id)},1000*j)});window.setTimeout(function(){f.deactivateStateGroupState(i,a[i])},1000*(g.length))};this.editStateGroupState=function(i,l,h){var g=PageManager.getCoordinator();var k=c[g.id].getItem(i);var j=d[i].getItem(l);h=$.extend({title:j.title,description:j.description},h);if(!ModeManager.inMode(Modes.CustomStateMode)){ModeManager.switchTo(Modes.CustomStateMode,{isStatesGroup:true,sourceInstance:PageManager.getCoordinator(),StateMode:{name:l.toString(),title:h.title,description:h.description,elementName:k.title}})}else{ModeManager.refreshMode({isStatesGroup:true,sourceInstance:PageManager.getCoordinator(),StateMode:{name:l.toString(),title:h.title,description:h.description,elementName:k.title}})}};this.getCurrentPageStatesGroups=function(){var g=PageManager.getCoordinator();return c[g.id]};this.getStatesGroup=function(i){var g=PageManager.getCoordinator();var h=c[g.id];if(h){return h.getItem(i)}else{return null}};this.getStateGroupState=function(g,h){return d[g].getItem(h)};this.getStateGroupsStatesList=function(g){return d[g]};this.getStatePages=function(i){var g={};var h=PageManager.getCoordinator().affectedProperties[i];if(h){$.each(h,function(m,k){var l=ElementsManager.getInstanceByID(m);var j=l.getPageId()})}return g}}();var DataLayoutsManager=new (function(){var c=this;this.registerDataLayoutTypes=function(d,f){$.each(d,function(h,j){var l=$.extend({categoryName:f.name,removeLayout:$.noop,orderElements:$.noop,startLayout:$.noop,getNavigatableInstances:a,navigateTo:$.noop,refreshLayout:$.noop,getCurrentItem:function(m){return m.data.pagesInstance},getControllers:function(m,o,n){return o},canItemResize:{vertically:false,horizontally:false},canResize:{vertically:true,horizontally:true},fields:{},canSelectItems:true,showItem:$.noop,fetchControllersToArrange:function(p,o,m,n){p.getDataItemsController().fetchAllControllers(m,n)},refreshEmptyState:$.noop},j,{name:h});DataLayouts[h]=l;var g=l.arrange;var k=l.startLayout;var i=l.refreshEmptyState;l.arrange=function(p,r,n){var q=p.getLastArrangementOptions();var o=n.size;if(q&&q.options&&q.options.size){if(o&&o.width===0){o.width=q.options.size.width}if(o&&o.height===0){o.height=q.options.size.height}}var m=g(p,r,n);if(m){$.each(m.controllersToArrange,function(t,u){var s=u.getInstance();if(s){s.canResizeHorizontally.setValue(l.canItemResize.horizontally,"dataListItem");s.canResizeVertically.setValue(l.canItemResize.vertically,"dataListItem");s.canSelectFlag.setValue(l.canSelectItems,"dataListItem")}});m.options=n}return m};l.startLayout=$.hookAfterMethod(k,b);l.refreshEmptyState=$.hookAfterMethod(i,b);f.items[h]=DataLayouts[h]})};function b(d){var g=d.getArrangement();var f=d.isInEmptyState();d.getDataItemsController().getInstance().canResizeVertically.setValue(g.canResize.vertically||f,"isInLayout");d.getDataItemsController().getInstance().canResizeHorizontally.setValue(g.canResize.horizontally||f,"isInLayout")}this.create=function(g,f){var d;if($.isFunction(g)){d=g(f)}else{d=g.create(f)}return $.extend({startLayout:$.noop,removeLayout:$.noop,arrange:$.noop,refreshLayout:$.noop,setControllersHierarchy:function(h){},setControllers:function(h){},getControllers:function(h,j,i){return j}},d)};this.getLayoutsByCategory=function(d){return d.items};function a(d){return[]}})();var DataLayouts={};var DataLayoutsCategories={Pages:{name:"Pages",iconClass:"sprite-icon sprite-tool-category-panels",title:"Pages",isActive:true,items:{}},Normal:{name:"Normal",iconClass:"sprite-icon sprite-tool-category-panels",title:"Normal",isActive:true,items:{}},FormLayouts:{name:"FormLayouts",iconClass:"sprite-icon sprite-tool-category-panels",title:"Form Layouts",isActive:false,items:{}}};function caclulateFixedSize(c,f,b){var a;if($.isFunction(c)){a=c.apply(this,arguments)}else{a=c}a.width=a.width!==undefined?Math.floor(a.width):undefined;a.height=a.height!==undefined?Math.floor(a.height):undefined;var d=f.getInstance().getItemMainParent();if(b&&(d.isBlock()||d.isFillHorizontal())){a.width=b.width}return a}var DataArrangements={Horizontal:{getFixedSize:function(d,b){var c=((b.size.width)-(b.lineSpacing)*(d-1))/d;var a=(b.size.height);return{width:c,height:a}},arrange:function(c,l){l=$.extend({lineSpacing:10,length:undefined,calculatedFixedSize:undefined},l);var d=l.length;var f=l.size;var k;for(var h=0;h<c.length;h++){var i=c[h];k=caclulateFixedSize(l.fixedSize,i,l.calculatedFixedSize);var g=h>0?1*l.lineSpacing:0;i.setSize(k);i.setMargin({marginLeft:g})}var a=Math.ceil(k.width*d+(d-1)*(l.lineSpacing));a=a>0?a:f.width;var b={height:k.height,width:a};return{fixedSize:k,contentSize:b}}},Vertical:{getFixedSize:function(d,b){var a=(b.size.height-(b.columnSpacing)*(d-1))/d;var c=(b.size.width);return{width:c,height:a}},arrange:function(b,m){var k;m=$.extend({columnSpacing:10,length:undefined},m);var d=m.size;var c=m.length;var l;for(var f=0;f<b.length;f++){var g=b[f];l=caclulateFixedSize(m.fixedSize,g,m.calculatedFixedSize);var h=f>0?1*m.columnSpacing:0;g.setSize(l);g.setMargin({marginTop:h})}var i=Math.ceil(l.height*c+(c-1)*(m.columnSpacing));i=i>0?i:d.height;var a={width:l.width,height:i};return{fixedSize:l,contentSize:a}}},Grid:{getFixedSize:function(d,b){var g=b.cols;var f=Math.floor(d/g);var h=d%g;if(h!==0){f++}var a=(b.size.height-(b.rowsSpacing)*(f-1))/f;var c=((b.size.width)-(b.colsSpacing)*(g-1))/g;return{width:c,height:a}},arrange:function(b,r){var f=r.size;r=$.extend({rowsSpacing:10,colsSpacing:10,cols:3,length:undefined},r);var c=r.length;var m=r.cols;var q=Math.floor(c/m);var i=c%m;if(i!==0){q++}var g=0;var l=0;var p;var k=b.length;for(var o=0;o<q&&k>0;o++){g=0;for(var d=0;d<m&&k>0;d++){var j=o*m+d;var h=b[j];p=caclulateFixedSize(r.fixedSize,h,r.calculatedFixedSize);g=d>0?1*r.colsSpacing:0;h.setSize(p);h.setMargin({marginTop:l,marginLeft:g});k--}l=r.rowsSpacing}var a=Math.ceil(p.width*m+(m-1)*(r.colsSpacing));a=a>0?a:f.width;var n=Math.ceil(p.height*q+(q-1)*(r.rowsSpacing));n=n>0?n:f.height;return{fixedSize:p,contentSize:{width:a,height:n}}}},OneColumn:{getFixedSize:function(d,b){var a=(b.size.height-(b.rowsSpacing)*(d-1))/d;var c=(b.size.width);return{width:c,height:a}},arrange:function(b,n,h){var l;var d=n.size;n=$.extend({rowsSpacing:10,length:undefined},n);var c=n.length;var a={width:0,height:0};var m;for(var f=0;f<b.length;f++){var g=b[f];m=caclulateFixedSize(n.fixedSize,g,n.calculatedFixedSize);var k=g.getSize();var i=f>0?1*n.rowsSpacing:0;a.height+=k.height+i;g.setSize({width:m.width,height:k.height});g.setMargin({marginTop:i})}a.width=n.calculatedFixedSize.width;return{fixedSize:n.calculatedFixedSize,contentSize:a}}},Columns:{getFixedSize:function(d,b){var g=parseInt(Math.min(parseInt(b.cols),d));var f=Math.floor(d/g);var h=d%g;if(h!==0){f++}var a=(b.size.height-(b.rowsSpacing)*(f-1))/f;var c=((b.size.width)-(b.colsSpacing)*(g-1))/g;return{width:c,height:a}},arrange:function(a,b){var g=b.size;b=$.extend({rowsSpacing:10,colsSpacing:10,cols:3,length:undefined},b);var c=b.length;var l=parseInt(Math.min(parseInt(b.cols),c));var k=Math.floor(c/l);var m=c%l;if(m!==0){k++}var d=0;var n=0;var p=0;var t=0;var i=a.length;for(var h=0;h<k&&i>0;h++){d=0;t=0;for(var f=0;f<l&&i>0;f++){var j=h*l+f;var q=a[j];var s=caclulateFixedSize(b.fixedSize,q,b.calculatedFixedSize);var o=q.getSize();d=f>0?1*b.colsSpacing:0;q.setSize({width:s.width,height:o.height});q.setMargin({marginTop:n,marginLeft:d});i--;if(t<o.height){t=o.height}c--}p+=(t+n);n=b.rowsSpacing}var r=s.width*l+(l-1)*(b.colsSpacing);r=r>0?r:g.width;p=p>0?p:g.height;return{fixedSize:s,contentSize:{width:r,height:p}}}},Rows:{getFixedSize:function(f,c){var g=parseInt(Math.min(c.rows,f));var h=Math.floor(f/g);var b=f%g;if(b!==0){h++}var a=(c.size.height-(c.rowsSpacing)*(g-1))/g;var d=((c.size.width)-(c.colsSpacing)*(h-1))/h;return{width:d,height:a}},arrange:function(a,c){var i=c.size;c=$.extend({rowsSpacing:10,colsSpacing:10,rows:5},c);var n=parseInt(Math.min(c.rows,a.length));var o=Math.floor(a.length/n);var m=a.length%n;if(m!==0){o++}var f=a.length;var r=0;var u=0;var v=0;var g=0;var p=0;var t=caclulateFixedSize(c.fixedSize,a[0],c.calculatedFixedSize);var x=0;for(var h=0;h<o&&f>0;h++){var d={};var l=c.$columns[h];var w=h>0?c.colsSpacing:0;l.css("width",t.width);l.css("marginLeft",w);r=0;for(var k=0;k<n&&f>0;k++){var j=h*n+k;var y=a[j];var q=y.getSize();var b=k>0?c.rowsSpacing:0;y.setSize({width:t.width,height:q.height});y.setMargin({marginTop:b});y.column=h;y.columnData=d;r+=(q.height+b);f--}if(u<r){u=r}r=0;d.height=r}var s=t.width*o+(o-1)*c.colsSpacing;s=s>0?s:i.width;u=u>0?u:i.height;return{fixedSize:t,contentSize:{width:s,height:u}}}}};function fitParent(d,a,c){var b={};b.height=a;b.width=c;d.getElementContent().css(b);d.data.height=a;d.data.width=c}$.each(DataLayoutsCategories,function(a,b){DataLayouts[a]={}});var ViewManager=new function(){this.Events={SwitchedToViewMode:SimpleEvent.create(),SwitchedToDesignMode:SimpleEvent.create(),ViewModeChanged:SimpleEvent.create()};var f=this;var i=!!Global.IsDesigner;var g;var c;var j;var d;this.initialize=function(){g=$("#body-element");c=$("body");d=$('<div class="body-element-container"><div class="body-element-wrapper"></div></div>');j=$(".body-element-wrapper",d);g.wrap(d);d=g.closest(".body-element-container");j=g.closest(".body-element-wrapper");FreemiumBanners.initialize();if($.browser.msie&&parseInt($.browser.version)<8){ViewManager.getBodyTargets().addClass("ie7-layout")}else{ViewManager.getBodyTargets().addClass("standard-layout")}k();PageManager.Events.BeforePageChanged.bind(function(){if(f.isViewMode()){b();l()}else{h()}});PageManager.Events.PageChanging.bind(function(){if(f.isViewMode()){a()}});$(document).preventBrowserBehaviour(function(n){var m=$(n).parents().andSelf();return(!m.hasClass("content-editable")&&!m.hasClass("selectable-text")&&(i||m.hasClass("webzai-clickable-behaviour")||!m.hasClass("has-text")))})};this.getBodyElementWrapper=function(){return j};this.getBodyElementContainer=function(){return d};this.getBodyElement=function(){return g};this.getBodyTargets=function(){return $.unite(c,g)};this.getSiteScrollableElement=function(){return $.getScrollingController().$scrollableForWrite};this.isDesignMode=function(){return i};this.isViewMode=function(){return !i};this.switchToViewMode=function(){i=false;k();PageManager.PageChangingOperation.performOperation(function(){f.Events.SwitchedToViewMode.fire();f.Events.ViewModeChanged.fire()})};this.switchToDesignMode=function(){i=true;g.scrollTop(0);$("html, body").scrollTop(0);k();h();f.Events.SwitchedToDesignMode.fire();f.Events.ViewModeChanged.fire();if(window.getSelection){if(window.getSelection().empty){window.getSelection().empty()}else{if(window.getSelection().removeAllRanges){window.getSelection().removeAllRanges()}}}else{if(document.selection){document.selection.empty()}}};function b(){$.each(ElementsManager.getAllPageInstances(),function(n,m){if(m.isInitialized){m.onBeforePageOpen()}})}function a(){$.each(ElementsManager.getAllPageInstances(),function(n,m){if(m.isInitialized){m.onBeforePageLeave()}})}function l(){$.each(ElementsManager.getAllPageInstances(),function(n,m){if(m.isInitialized){m.setToPreview()}})}function h(){LayoutManager.beginLayoutUpdateBatch();$.each(ElementsManager.getAllPageInstances(),function(n,m){if(m.isInitialized){m.setToDesign()}});LayoutManager.endLayoutUpdateBatch()}function k(){ViewManager.getBodyTargets().toggleClass("design-mode",i).toggleClass("view-mode",!i)}};var ElementActivationManager=new (function(){var h=this;var d=false;this.initialize=function(){Global.Events.ElementRemoving.bind(function(m){var i=m.removedInstance;g(i.id);if(i.hasFeature(Features.DataList)){var j;if(i.getDataSource()){var j=i.getDataSource().getAllItems()}else{var l=i.getPropertyValue("dataInfo");if(l){var k=l.currentData;if(k){if(k.items){j=k.items}else{j=k}}}}if(j){$.each(j,function(o,n){g(i.id+o)})}}})};this.getConnection=function(m,l,k,i){var j=f(m,l,k,i);if(j.length==1){return j[0]}return undefined};this.applyConnections=function(i){if(!i){i={}}$.each(i,function(k,j){h.connectElement(j.sourceElementID,j.targetElementID,j.behaviourName,j.options,j.id)})};this.applyConnectionsToSource=function(j,i){$.each(j,function(){var k=ElementsManager.getInstanceByID(this.targetElementID);if(i&&k){h.connectElement(i.id,k.id,this.behaviourName,this.options)}else{console.warn("Bad element ID")}})};this.updateConnection=function(k,q,i,m,p){var o=p?p.priority:undefined;var l=ElementsManager.getInstanceByID(i);var n=ElementsManager.getInstanceByID(m);var j=!p.name?k.options:k.connectionData;if(ViewManager.isViewMode()){p.deactivate(l,n,q)}BehavioursManager.removeBehaviourFromCollection(k);BehavioursManager.removeBehaviourFromInitializedCollection(k);k=c(i,m,p,q,k.id);Global.Events.ConnectionUpdated.fire(this,k)};this.removeConnection=function(i){Global.Events.ConnectionRemoving.fire();OperationsManager.beginAtomicBatch(false,"Remove Action");BehavioursManager.removeBehaviourFromCollection(i);BehavioursManager.removeBehaviourFromInitializedCollection(i);var k=ElementsManager.getInstanceByID(i.sourceElementID);var l=ElementsManager.getInstanceByID(i.targetElementID);if(!k||!l){Global.Events.ConnectionRemoved.fire(this,i);return}var n=i.behaviourName?Behaviours[i.behaviourName]:undefined;var j=n?n.priority:undefined;var m=!i.connectionData?i.options:i.connectionData;if(ViewManager.isViewMode()){n.deactivate(k,l,i.options)}Global.Events.ConnectionRemoved.fire(this,i);k.influenceChanged.fire(k);OperationsManager.endAtomicBatch()};this.removeInstanceConnections=function(i){g(i.id)};function g(i){b(i);a(i)}function b(i){$.each(BehavioursManager.getInstanceSourceConnections(i),function(k,j){ElementActivationManager.removeConnection(j)})}function a(i){$.each(BehavioursManager.getInstanceTargetConnections(i),function(k,j){ElementActivationManager.removeConnection(j)})}this.connectElement=function(m,j,l,k,o){j=$.makeArray(j);if(typeof l!=="string"){l=l.name}var i=$.extend({isTemplateConenction:ViewManager.isDesignMode()&&TemplateEditingManager.Flags.IsInEditingTemplate.isTrue()},k);var n=l?Behaviours[l]:{};if(!n){return}OperationsManager.beginAtomicBatch();$.each(j,function(s,v){Global.Events.ConnectionAdding.fire();var w=this;var r=null;var x=f(m,v,l,i);var p=$.grep(x,function(y){return y.options.isTemplateConenction===i.isTemplateConenction});var t=true;if(p.length===1){var r=p[0];t=false;var q=false;if(!$.defaultEqualityComparer(i,r.options)){q=true}if(q){ElementActivationManager.updateConnection(r,i,m,v,n)}}if(t){var u=c(m,v,n,i,o);Global.Events.ConnectionAdded.fire(this,u)}});OperationsManager.endAtomicBatch()};this.getSameConnections=f;function c(n,m,k,j,o){var l=k.name;var i={sourceElementID:n,targetElementID:m,behaviourName:l,options:j};if(!o){i.id=StructureLoadingManager.generateWebsiteId()}else{i.id=o}BehavioursManager.addBehaviourToCollection(i);ElementsManager.performOnInstancesCreated([n,m],function(){BehavioursManager.addBehaviourToInitializedCollection(i);var p=ElementsManager.getInstanceByID(n);var q=ElementsManager.getInstanceByID(m);p.influenceChanged.fire(p);if(ViewManager.isViewMode()){LayoutManager.layoutUpdateBatch.performOperation(function(){BehavioursManager.activateBehaviour(i)});p.refreshCursor()}});return i}function f(n,m,l,i){var j=BehavioursManager.getInstanceTargetConnections(n);var k=[];if(j){$.each(j,function(p,o){if(o.targetElementID===m&&o.options.triggerName===i.triggerName&&o.behaviourName===l&&o.options.triggerType===i.triggerType){k.push(this)}})}return k}})();var ArrangementManager=new (function(){var h=this;var t=this;var a=0;var p=0;var D=0;var K=0;var A=0;var I=1;var k;var n;var P;var y;var f=false;var d;var H=99999;var G=99999;var F=-100000;var u=-100000;var N=-100000;var x=-100000;var O={};var o;var g=false;this.ArrangementTypes={Grid:"grid-arrange",Column:"column",Line:"line",Circle:"circle-arrange",None:"none-arrange"};this.Flags={IsArrangeableInShape:ObservableFlag.create(false),IsArrangeableInCircle:ObservableFlag.create(false),IsArrangeableInGrid:ObservableFlag.create(false),IsArrangeableInRow:ObservableFlag.create(false),IsArrangeableInColumn:ObservableFlag.create(false)};this.AllignMents={Top:{title:"Top",name:"Top",iconClass:"sprite-icon sprite-align-top "},VerticalCenter:{title:"center",name:"VerticalCenter",iconClass:"sprite-icon sprite-align-v-center"},Bottom:{title:"Bottom",name:"Bottom",iconClass:"sprite-icon sprite-align-bottom"},Left:{title:"Left",name:"Left",iconClass:"sprite-icon sprite-align-left"},HorizontalCenter:{title:"center",name:"HorizontalCenter",iconClass:"sprite-icon sprite-align-h-center"},Right:{title:"Right",name:"Right",iconClass:"sprite-icon sprite-align-right"}};this.Rotate={Clock:"clock-rotation",UnClock:"unclock-rotation"};this.ArrangeConstants={line:{majorPosition:"left",minorPosition:"top",majorSize:"width",minorSize:"height"},column:{majorPosition:"top",minorPosition:"left",majorSize:"height",minorSize:"width"}};this.disableArrangement=function(){g=true};this.enableArrangement=function(){g=false};this.initialize=function(){SelectionManager.Events.SelectionChangedSimple.bind(Q);PropertiesManager.Events.NamedPropertyValueChanged.bind("fillLayout",function(R){if(SelectionManager.isInstanceSelected(R.instance)){PropertiesManager.UpdateBatch.performOperation(Q,"updateIsArrangeableInShapeFlag")}});function Q(){t.Flags.IsArrangeableInShape.setValue(t.isArrangeable(SelectionManager.getSelectedInstances()));t.Flags.IsArrangeableInCircle.setValue(t.isArrangeable(SelectionManager.getSelectedInstances()));t.Flags.IsArrangeableInColumn.setValue(t.isArrangeableInColumn(SelectionManager.getSelectedInstances()));t.Flags.IsArrangeableInRow.setValue(t.isArrangeableInRow(SelectionManager.getSelectedInstances()));t.Flags.IsArrangeableInGrid.setValue(t.isArrangeable(SelectionManager.getSelectedInstances()))}};this.registerArrangement=function(Q){$.each(Q,function(S,T){Arrangements[S]=$.extend(T,{name:S});var R=Arrangements[S].arrange;Arrangements[S].arrange=function(U,V){if(!g){CommandsManager.UpdateBatch.start();LayoutManager.beginLayoutUpdateBatch();PropertiesManager.UpdateBatch.start();R(U,V);PropertiesManager.UpdateBatch.finish();LayoutManager.endLayoutUpdateBatch();CommandsManager.UpdateBatch.finish()}}})};this.rotateElements=function(Q,R){if(Q){if(Q===t.Rotate.Clock){R=t.rotateWithClock(R)}else{if(Q===t.Rotate.UnClock){R=t.rotateAgainstClock(R)}}}return R};this.getCurrentAvgPosition=function(){return P};this.getCurrentArea=function(){return{left:H,top:G,right:F,bottom:u}};this.calculateArrangementSizeAndPositionInfo=function(V){if(!V){V=SelectionManager.getSelectedInstances()}var Q=99999;var W=99999;var R=-99999;var U=-99999;var T=-99999;var S=-99999;$.each(V,function(Z,X){var Y=$.extend({},X.getPropertyValue("sizeAndPosition"));if(Q>Y.left){Q=Y.left}if(W>Y.top){W=Y.top}if(R<Y.left+Y.width){R=Y.left+Y.width}if(U<Y.top+Y.height){U=Y.top+Y.height}});return{left:Q,right:R,top:W,bottom:U}};this.calculateArrangementInfo=function(R){var Q=ElementsManager.getRootInstance();if(!R){R=SelectionManager.getSelectedInstances()}H=99999;G=99999;F=-99999;u=-99999;N=-99999;x=-99999;$.each(R,function(V,T){var S=$.extend({},T.getPosition(true));var U=T.getSize();if(H>S.left){H=S.left}if(G>S.top){G=S.top}if(F<S.left+U.width){F=S.left+U.width}if(u<S.top+U.height){u=S.top+U.height}if(U.width>N){N=U.width}if(U.height>x){x=U.height}});o=Q.getSize();O={width:N,height:x};P={left:(H+F)/2,top:(G+u)/2};d=true};this.checkCurrentArrangement=function(Q){n=k;if(k!==Q&&f===false){t.calculateArrangementInfo();k=Q}if(f===false){f=true}};this.finishCurrentArrangement=function(Q){if(f===true&&k===Q){f=false}if(d){d=false}};function c(S,R,Q){$.each(S,function(X,U){var V=U.getSize();var T=U.getPosition(true);var W={};W[R]=P[R]-V[Q]/2;ElementsLayoutHelper.moveToOffset(U,$.extend({},T,W))})}this.getParentOffset=function(Q){var S=h.getContentSize()/2;var T=Q.parentInstance;if(T!==ElementsManager.getRootInstance()){var R=$.extend({},T.getPosition());R.left+=S}else{var R={left:0,top:0}}return R};function l(S,R){var Q=R==="left"?H:G;$.each(S,function(W,U){var T=U.getPosition(true);var V={};V[R]=Q;ElementsLayoutHelper.moveToOffset(U,$.extend({},T,V))})}function j(T,S,R){var Q=S==="left"?F:u;$.each(T,function(Y,V){var W=V.getSize();var U=V.getPosition(true);var X={};X[S]=Q-W[R];ElementsLayoutHelper.moveToOffset(V,$.extend({},U,X))})}this.alignInstances=function(Q,R){h.calculateArrangementInfo();if(R===Alignment.Top){l(Q,"top")}if(R===Alignment.Left){l(Q,"left")}if(R===Alignment.Right){j(Q,"left","width")}if(R===Alignment.Bottom){j(Q,"top","height")}if(R===Alignment.VerticalCenter){c(Q,"top","height")}if(R===Alignment.HorizontalCenter){c(Q,"left","width")}y=R};this.getMaxCols=function(Q){return Q.length};this.isArrangeable=function(Q){if(Q.length<2){return false}return $.all(Q,function(S){if(!S.isArrangeable()){return false}if(S.hasFeature(Features.HasLayout)){var R=S.getPropertyValue("fillLayout");if(R.fillHorizontal===true||R.fillVertical===true){return false}}return true})};this.isArrangeableInRow=function(Q){if(Q.length<2){return false}return $.all(Q,function(S){if(!S.isArrangeable()){return false}if(S.hasFeature(Features.HasLayout)){var R=S.getPropertyValue("fillLayout");if(R.fillHorizontal===true){return false}}return true})};this.isArrangeableInColumn=function(Q){if(Q.length<2){return false}return $.all(Q,function(S){if(!S.isArrangeable()){return false}if(S.hasFeature(Features.HasLayout)){var R=S.getPropertyValue("fillLayout");if(R.fillVertical===true){return false}}return true})};this.rotateAgainstClock=function(T){var S=T[0];T[0]=T[T.length-1];for(var Q=1;Q<T.length;Q++){var R=T[Q];T[Q]=S;S=R}return T};this.rotateWithClock=function(T){var S=T[T.length-1];T[T.length-1]=T[0];for(var Q=T.length-2;Q>=0;Q--){var R=T[Q];T[Q]=S;S=R}return T};function E(S,R,Q){var T=S[R];S[R]=S[Q];S[Q]=T;return S}this.sortElementsInA=function(R,Q){if(Q==t.ArrangementTypes.Column){return J(R,C)}else{return J(R,b)}};function J(S,R){for(var Q=0;Q<S.length;Q++){var T=R(S,Q);S=E(S,Q,T.index)}return S}function z(W,V,U){var S=Math.sin(U*Math.PI/180);var T=Math.cos(U*Math.PI/180);var Q=V*T;var X=V*S;return{left:W.left+Q,top:W.top+X}}function v(R,Q){return{left:Q.left-R.width/2,top:Q.top-R.height/2}}this.getDesignerOffset=function(V,U,T,S){var Q=z(V,U,T);var V=v(S,Q);return V};function M(Q,U,S,T,R){var V;if(R===t.AllignMents.Center){V=B(Q,U,S,T)}else{if(R===t.AllignMents.Top){V=i(Q,U,S,T)}else{if(R===t.AllignMents.Bottom){V=q(Q,U,S,T)}}}return V}this.getMinorPosition=function(Q,V,U,T,R,S){if(S===t.ArrangementTypes.Column){return m(Q,V,U,T,R)}else{return M(Q,V,U,T,R)}};function m(Q,U,S,T,R){var V;if(R===t.AllignMents.Center){V=s(Q,U,S,T)}else{if(R===t.AllignMents.Left){V=r(Q,U,S,T)}else{if(R===t.AllignMents.Right){V=w(Q,U,S,T)}}}return V}function B(R,X,U,W){var S=R.getPropertyValue("sizeAndPosition");var Q=S.height;var T=X-U/2;var V=X+U/2-W;return X-Q/2}function i(Q,V,S,U){var R=V;var T=V+S-U;return V}function q(R,X,U,W){var S=R.getPropertyValue("sizeAndPosition");var Q=S.height;var T=X-U;var V=X-W;return X-Q}function s(Q,X,V,W){var R=Q.getPropertyValue("sizeAndPosition");var T=R.width;var U=X-V/2;var S=X+V/2-W;return X-T/2}function r(Q,V,T,U){var S=V-T;var R=V-U;return V}function w(Q,X,V,W){var R=Q.getPropertyValue("sizeAndPosition");var T=R.width;var U=X;var S=X+V-W;return X-T}this.getCenterStartPosition=function(V,Q,U,S){var R=h.getTotalSize(V);if(S===undefined){S=U}var T=V.length;var W={left:Q.left-((U*(T-1)+R.width))/2,top:Q.top-(S*(T-1)+R.height)/2};return W};this.getSelectedInstancesMaxSize=function(){return O};this.getSelectedInstancesParentSize=function(){return o};this.getMaxSize=function(X){var W=0;var V=0;for(var T=0;T<X.length;T++){var R=X[T];var S=R.getPropertyValue("sizeAndPosition");var U=S.width;var Q=S.height;if(U>W){W=U}if(Q>V){V=Q}}return{width:W,height:V}};this.getTotalSize=function(X){var W=0;var V=0;for(var T=0;T<X.length;T++){var R=X[T];var S=R.getPropertyValue("sizeAndPosition");var U=S.width;var Q=S.height;W+=U;V+=Q}return{width:W,height:V}};this.min=function(R,Q){return R<Q?R:Q};function b(Q,R){return L(Q,"left",R)}function C(Q,R){return L(Q,"top",R)}function L(Q,U,W){if(!W){W=0}var X=Q[W];var T=X.getPosition()[U];var R=W;for(var S=W;S<Q.length;S++){var Y=Q[S];var V=Y.getPosition()[U];if(V<T){X=Y;T=V;R=S}}return{position:T,instance:X,index:R}}this.getContentSize=function(){if(TemplateEditingManager.Flags.IsInEditingMode.isTrue()){return ElementsManager.getRootInstance().getSize().width}else{return 960}};return this})();var Arrangements={};var OrderManager=new (function(){var h=this;var a=false;var c=false;var d=false;var b=1;var g=0;var f;this.Events={ElementsReordered:SimpleEvent.create()};this.OrderingBatch=OperationsBatch.create({batchStartCallback:function(){d=false;c=true},beforeFinishingCallback:function(){c=false;if(d){OrderManager.reassignElementsOrders()}}});this.initialize=function(){PropertiesManager.Events.NamedPropertyValueChanged.bind("order",function(){OrderManager.reassignElementsOrders()});Global.Events.ChildElementRemoved.bind(function(){var j=this;for(var k=0;k<j.childInstances.length;k++){j.childInstances[k].childIndex.setValue(k)}})};this.beginReorderingBatch=function(){h.OrderingBatch.start()};this.endReorderingBatch=function(i){h.OrderingBatch.finish()};this.reorderingScope=function(i){h.beginReorderingBatch();i();h.endReorderingBatch()};this.getElementWithOrder=function(i){if(f){return f[i]}return undefined};this.setReassignmentRequired=function(i){d=i};this.reassignElementsOrders=function(){if(a){return}if(c){d=true;return}a=true;OperationsManager.beginAtomicBatch();f=[];var m=0;var k=ElementsManager.getRootInstance();if(k.isType(ElementsTypes.page)){l(k)}else{i(k)}b=m+m;a=false;OrderManager.Events.ElementsReordered.fire();OperationsManager.endAtomicBatch();function j(n){n.setPropertyValue("order",m);f[m]=n;m++}function l(p){j(p);var q=[];var y=[];var o=[];var v=[];var u=[];$.each(p.childInstances,function(B,A){if(A.hasFeature(Features.PageSection)){$.merge(q,A.childInstances);A.childInstances=[];o.push(A);if(A.isType(ElementsTypes.SectionElement)){v.push(A)}}else{if(!A.isType(ElementsTypes.PageContentElement)){q.push(A);y.push(A)}else{u.push(A)}}});p.childInstances=[];q=q.orderBy(function(){return this.getPropertyValue("order")},function(B,A){return $.nullLastComparer(B,A)});o=o.orderBy(function(){return this.getPropertyValue("order")+(this.isType(ElementsTypes.HeaderElement)?-Infinity:0)+(this.isType(ElementsTypes.FooterElement)?Infinity:0)},function(B,A){return $.nullLastComparer(B,A)});var z=[];z=$.merge(z,u);z=$.merge(z,o);o=$.grep(o,function(A){return A.isInstanceVisible()});v=$.grep(o,function(A){return A.isType(ElementsTypes.SectionElement)});$.each(v,function(B,A){A.SectionIndex.setValue(B+1)});p.pageContentInstancesCount.setValue(u.length);p.sectionsCount.setValue(o.length);p.contentSectionsCount.setValue(v.length);if(o.length>0){p.firstSectionInstance.setValue(o[0]);p.lastSectionInstance.setValue(o[o.length-1]);p.firstSectionContextClass.setTarget(o[0].$element);p.lastSectionContextClass.setTarget(o[o.length-1].$element);if(v.length>0){p.firstContentSectionInstance.setValue(v[0]);p.lastContentSectionInstance.setValue(v[v.length-1]);p.firstContentSectionContextClass.setTarget(v[0].$element);p.lastContentSectionContextClass.setTarget(v[v.length-1].$element)}}$.each(z,function(B,A){j(A)});p.childInstances=z;$.each(q,function(B,A){A.parentInstance.childInstances.push(A)});var s;var n=false;var t={};for(var s=0;s<p.childInstances.length;s++){var w=p.childInstances[s];if(w.childIndex.getValue()!==s){t[p.id]=p}w.childIndex.setValue(s)}for(var s=0;s<o.length;s++){var x=o[s];for(var r=0;r<x.childInstances.length;r++){var w=x.childInstances[r];if(w.childIndex.getValue()!==r){t[x.id]=x}w.childIndex.setValue(r)}}for(var s=0;s<q.length;s++){i(q[s])}if(t[p.id]){p.reorderChildElements()}for(var s=0;s<o.length;s++){var x=o[s];if(t[x.id]){x.reorderChildElements()}}for(var s=0;s<q.length;s++){var w=q[s];w.zIndex.setValue(s+1)}}function i(n){j(n);var r=n.childInstances.orderBy(function(){return{order:this.getPropertyValue("order"),elementType:this.elementType}},function(t,s){return $.nullLastComparer(t.order,s.order)});n.childInstances=r;var p;var q=false;for(p=0;p<r.length;p++){var o=r[p];if(o.childIndex.getValue()!==p){q=true}o.childIndex.setValue(p);o.zIndex.setValue()}for(p=0;p<r.length;p++){i(r[p])}if(q){n.reorderChildElements()}}};this.getContainerChildIndexOrder=function(i,j){if(!j){j=0}if(!i.childInstances[j]){return 0}return i.childInstances[j].getPropertyValue("order")};this.setChildIndexOrder=function(i,k){if(!k){k=0}if(!i.parentInstance.childInstances[k]){return}var j=i.parentInstance.childInstances[k].getPropertyValue("order");return i.setPropertyValue("order",j-0.5)};this.bringForward=function(j){OperationsManager.beginAtomicBatch();h.beginReorderingBatch();j=$.makeArray(j);var q=$.makeSet(j,function(i){return i.id});for(var p=0;p<j.length;p++){var r=j[p];var n=r.getPropertyValue("order");var m=PositionManager.getOverlappingInstances(r,r.getSiblings(),2);var l=$.grep(m,function(i){return q[i.id]===undefined&&i.getPropertyValue("order")>n});if(l.length>0){var o=$.minValue(l,function(i){return i.getPropertyValue("order")});r.setPropertyValue("order",o+(1-1/(n+1)))}else{var k=r.getPropertyValue("order");var o=$.minValue(r.parentInstance.childInstances,function(s){var i=s.getPropertyValue("order");return i-k>0?(i-k):h.getMaxOrder()});r.setPropertyValue("order",k+o+0.1)}}h.endReorderingBatch();OperationsManager.endAtomicBatch()};this.bringToFront=function(i){i=$.makeArray(i);OperationsManager.beginAtomicBatch();h.beginReorderingBatch();$.each(i,function(l,k){var j=k.getPropertyValue("order");PropertiesManager.setPropertiesValues(k,{order:b+j})});h.endReorderingBatch();OperationsManager.endAtomicBatch()};this.sendBackward=function(j){OperationsManager.beginAtomicBatch();h.beginReorderingBatch();j=$.makeArray(j);var q=$.makeSet(j,function(i){return i.id});for(var p=0;p<j.length;p++){var r=j[p];var n=r.getPropertyValue("order");var m=PositionManager.getOverlappingInstances(r,r.getSiblings(),2);var k=$.grep(m,function(i){return q[i.id]===undefined&&i.getPropertyValue("order")<n});if(k.length>0){var o=$.maxValue(k,function(i){return i.getPropertyValue("order")});r.setPropertyValue("order",o-1/(n+1))}else{var l=r.getPropertyValue("order");var o=$.minValue(r.parentInstance.childInstances,function(s){var i=s.getPropertyValue("order");return i-l>=0?h.getMaxOrder():(l-i)});r.setPropertyValue("order",l-o-0.1)}}h.endReorderingBatch();OperationsManager.endAtomicBatch()};this.sendToBack=function(i){OperationsManager.beginAtomicBatch();h.beginReorderingBatch();$.each(i,function(m,l){var k=$instance(l);var j=k.getPropertyValue("order");PropertiesManager.setPropertiesValues(k,{order:-1-(1/j)})});h.endReorderingBatch();OperationsManager.endAtomicBatch()};this.getMaxOrder=function(){return b};this.increaseMaxOrder=function(){b++};return this})();var SiteSettingsManager=(function(){var b={};var a=RemoteSettings.create({getSettingsValue:function(c){if(typeof(PageData)!=="undefined"&&PageData.siteSettings){return PageData.siteSettings[c]}else{return undefined}},setSettingsValue:function(d,f,c){c=$.extend({isPublic:true},c);if(SiteManager.isSavedSite()){ApplicationService.setSiteSettingValue(SiteManager.getSiteID(),d,f,c.isPublic,c.onSuccess,c.onError)}else{b[d]={value:f,isPublic:c.isPublic};c.onSuccess()}}});a.getPendingSettings=function(){return b};return a})();var BackgroundLayers={BackgroundColor:{priority:1,name:"BackgroundColor"},BackgroundImage:{priority:2,name:"BackgroundImage"},BackgroundImageOverlay:{priority:3,name:"BackgroundImageOverlay"},BackgroundOverlay:{priority:4,name:"BackgroundOverlay"}};var ElementsManager=new (function(){var f=this;this.Events={InstanceInitialized:SimpleEvent.create(),InstanceCreatedEvent:SimpleEvent.create(),InstancePropertiesInitialized:SimpleEvent.create(),InstancesRemoved:SimpleEvent.create(),InstancesRemoving:SimpleEvent.create(),RemovingStarted:SimpleEvent.create(),ElementAddedToContainer:SimpleEvent.create(),HideElementsInDesigner:SimpleEvent.create()};this.Flags={IsTempDisplayedInDesigner:ObservableFlag.createConditionalNegative(),NoHiddenElementsInDesigner:Global.IsDesigner?UserSettingsManager.createObservableFlag("disableElementsHiding",false):undefined};if(Global.IsDesigner){Global.Events.FinishGroupInitialization.bind(function(){PageManager.Events.PageChanged.bindAndExecute(function(){d(f.Flags.IsTempDisplayedInDesigner.isTrue()||f.Flags.NoHiddenElementsInDesigner.isTrue())})});SimpleEvent.bind([f.Flags.IsTempDisplayedInDesigner.valueChangedEvent,f.Flags.NoHiddenElementsInDesigner.valueChangedEvent],function(k){d(f.Flags.IsTempDisplayedInDesigner.isTrue()||f.Flags.NoHiddenElementsInDesigner.isTrue())});function d(k){LayoutManager.layoutUpdateBatch.performOperation(function(){$.each(ElementsManager.getAllPageInstances(),function(){if(this.isDisplayedInDesigner.isFalse()&&!k){this.isDisplayed.setValue(false,"isDisplayedInDesigner")}if(k){this.isDisplayed.setValue(true,"isDisplayedInDesigner");PositionManager.updatePosition(this)}})})}}this.HiddenElementsInDesigner=new ObservableCollection({comparerFunction:$.defaultIdComparer});this.HiddenElementsInDesignerCollection=CollectionObserver.create(f.HiddenElementsInDesigner);this.HierarchyChangedUpdateBatch=OperationsBatch.create();this.PropertiesUnpostponingBatch=OperationsBatch.create();this.Templates={GroupElement:{id:"group-element-template"}};var c={};var i={};var j={};var h={};var a;this.performOnInstancesInitialization=function(l,m){l=$.makeArray(l);var n={};for(var o=0;o<l.length;o++){var q=l[o];var k=f.getInstanceByID(q);if(!k||!k.isInitialized){n[q]=true}}if(!$.isEmptyObject(n)){var p=ElementsManager.Events.InstanceInitialized.bind(function(s){var r=s.id;if(n[r]){delete n[r];if($.isEmptyObject(n)){ElementsManager.Events.InstanceInitialized.unbind(p);m(l)}}})}else{m(l)}};this.performOnInstancesCreated=function(l,m){l=$.makeArray(l);var n={};for(var o=0;o<l.length;o++){var q=l[o];var k=f.getInstanceByID(q);if(!k){n[q]=true}}if(!$.isEmptyObject(n)){var p=ElementsManager.Events.InstanceCreatedEvent.bind(function(s){var r=s.id;if(n[r]){delete n[r];if($.isEmptyObject(n)){ElementsManager.Events.InstanceCreatedEvent.unbind(p);m(l)}}})}else{m(l)}};this.getInstanceRootID=function(k){return h[k.id]};this.setElementParent=function(k,m){if(k.parentInstance!==null&&k.parentInstance!==undefined){k.parentInstance.childInstances=$.grep(k.parentInstance.childInstances,function(n){return n!=k})}if(m&&!m.hasFeature(Features.ItemsContainer)){var l=false;m=m.parentInstance;while(!l&&m){if(m.accept(k)&&k.canRedropTo(m)&&m.isDroppable()){l=true}else{m=m.parentInstance}}}k.parentInstance=m;k.$parent=(!m)?null:m.$element;if(m!==null){m.childInstances.push(k)}ElementsManager.updateInstanceRoot(k,m)};this.updateInstanceRoot=function(k,n){var m=k.root;var o=n?n.root:k;if(m!==o&&!k.isForTemplateUse()){var l=k.getDescendingInstances(true);$.each(l,function(r,q){q.root=o;var s=q.id;if(m){var t=m.id;delete c[t][s]}var p=o.id;h[s]=p;$.objectSet(c,[p,s],q);q.currentPageId.setValue(p)})}};this.removeInstances=function(k,m,t){var p,u;ElementsManager.HierarchyChangedUpdateBatch.start();LayoutManager.beginLayoutUpdateBatch();if(!(k instanceof Array)){k=[k]}var o=ElementsUtil.getHierarchiesRoots(k);var o=$.grep(o,function(w){return !w.isInDeleteProcess});var r={};ElementsManager.Events.RemovingStarted.fire(null,o);PositionManager.VisibilityUpdateBatch.start();for(p=0;p<o.length;p++){u=o[p];var s=u.getDescendingInstances(true,true);for(var n=0;n<s.length;n++){var q=s[n];q.isInDeleteProcess=true;if(q.elementIsSelected){q.elementIsSelected.setValue(false)}Global.Events.ElementRemoving.fire(this,{removedInstance:q,fromUser:t});q.instanceRemoving.fire(q,{fromUser:t})}for(var n=0;n<s.length;n++){var q=s[n];q.onRemove();var v=q.id;r[v]=q}}PositionManager.VisibilityUpdateBatch.finish();ElementsManager.Events.InstancesRemoving.fire(null,{removedInstancesMap:r,removedRootInstances:o,fromUser:t});$.each(r,function(x,w){if(!w.isDeleted){i[x]=true;var y=h[x];if(y){delete c[y][x]}delete h[x];w.isDeleted=true;w.instanceRemoved.fire(w)}});for(p=0;p<o.length;p++){u=o[p];u.detach();u.$element.remove()}LayoutManager.endLayoutUpdateBatch();var l=ElementsManager.getRootInstance().id;if(ElementsManager.getInstanceByID(l)){OrderManager.reassignElementsOrders()}ElementsManager.Events.InstancesRemoved.fire(null,r);ElementsManager.HierarchyChangedUpdateBatch.fireEvent(Global.Events.HieararchyChanged);ElementsManager.HierarchyChangedUpdateBatch.finish()};this.setLastInstancesResizingSize=function(k){k=$.makeArray(k);OperationsManager.beginAtomicBatch();$.each(k,function(m,l){l.setLastResizingSize()});OperationsManager.endAtomicBatch()};this.setScaleAnchors=function(k){$.each(k,function(m,l){var n=l.getDescendingInstances(true);$.each(n,function(p,o){o.data.scaleAnchorValues={};o.data.scaleAnchorCustomStatesValues={};$.each(o.getPropertiesValues(b),function(r,q){if($.isPlainObject(q)){o.data.scaleAnchorValues[r]=$.extend({},q)}else{o.data.scaleAnchorValues[r]=q}o.data.scaleAnchorCustomStatesValues[r]=$.extend(true,{},o.properties[r].customStatesValues)})})})};function b(k){if(k.descriptor.scaleProperty){return true}return false}this.generateInstancesMap=function(n){var l={};for(var m=0;m<n.length;m++){var k=n[m];l[k.id]=k}return l};this.getRootInstances=function(o,n){var l=f.generateInstancesMap(o);var k=[];if(!n){n=ElementsManager.getRootInstance()}if(n){m(n)}return k;function m(q){if(l[q.id]){k.push(q)}else{for(var p=0;p<q.childInstances.length;p++){m(q.childInstances[p])}}}};this.synchronizeLayoutProperty=function(t,k){var s;var n;var u=t.$element;var v=t.getPropertyValue("sizeAndPosition");var q=t.getAutoLayoutProperties();if(k!==undefined){s=k.position;n=k.size}var o;if(s!==undefined){o=s}else{var m=u.position();o={left:parseFloat(m.left),top:parseFloat(m.top)}}var x=n!==undefined?n:u.elementSize();var w={left:o.left,top:o.top};var p={width:x.width,height:x.height};var r={};var l={};r.width=Math.floor(p.width);r.height=Math.floor(p.height);l.top=Math.floor(w.top);l.left=Math.floor(w.left);if(p.width!==r.width){p.width=r.width+1}if(p.height!==r.height){p.height=r.height+1}if(w.top!==l.top){w.top=l.top+1}if(w.left!==l.left){w.left=l.left+1}PropertiesManager.setPropertiesValues(t,{sizeAndPosition:{width:q.width?v.width:p.width,height:q.height?v.height:p.height,left:q.left?v.left:w.left,top:q.top?v.top:w.top}})};this.getAllPageInstances=function(l){if(!l){var k=ElementsManager.getRootInstance();if(!k){return{}}l=k.id}return c[l]};this.getInstancesWithHierarchyFromRoots=function(k){var l=[];var m=[];k=$.makeArray(k);$.each(k,function(p,o){l.push(o);var q={instance:o,childInstancesHierarchies:[]};n(q);m.push(q)});return{rootInstancesHierarchies:m,allInstances:l};function n(p){var o=p.instance;var q=o.childInstances;$.each(q,function(t,r){var s={instance:r,childInstancesHierarchies:[]};l.push(r);n(s);p.childInstancesHierarchies.push(s)})}};this.getPageInstancesByType=function(l){var m=[];var k=f.getAllPageInstances();$.each(k,function(o,n){if((n.hasFeature(l)||n.elementType===l)&&!n.isContent()){m.push(n)}});return m};this.getInstancesIds=function(l){var k=[];if(l){$.each(l,function(n,m){k.push(m.id)})}return k};this.getInstancesByIds=function(k){var l=[];if(k){$.each(k,function(n,o){var m=ElementsManager.getInstanceByID(o);if(m){l.push(m)}})}return l};this.getInstanceData=function(k){return $(k).data("instance-data")};this.getInstanceByID=function(l){var k=h[l];if(k!==undefined){return c[k][l]}else{if(j[l]){return j[l]}}return undefined};this.isIdExistInTheCurrentPage=function(o){if(o){var l=ElementsManager.getRootInstance().id;var k=ElementsManager.getInstanceByID(o);if(k){return k.getPageId()===l}var n=o.split(TemplateItemInstanceIdSeperator);if(n.length===2){var m=ElementsManager.getInstanceByID(n[0]);return m&&m.getPageId()===l}}return false};this.getParentById=function(n){if(n){var k=ElementsManager.getInstanceByID(n);if(k){return k.parentInstance}var m=n.split(TemplateItemInstanceIdSeperator);if(m.length===2){var l=ElementsManager.getInstanceByID(m[0]);return l}}return undefined};this.getItemIdFromDataListInstanceId=function(k){return k.split(TemplateItemInstanceIdSeperator)[1]};this.showParentsById=function(l,o,u){o=o?o:false;var s=ElementsManager.getInstanceByID(l);if(s){return s.showParents(o,u)}else{var r=ElementsManager.getParentById(l);var p=r.getParents(true);var w=false;for(var m=1;m<p.length&&!w;m++){if(p[m].hasFeature(Features.Navigatable)){p[m].navigateTo(p[m-1],o,u)}if(PositionManager.isElementVisible(p[m])){w=true}}if(r.hasFeature(Features.TemplatePagesList)){var k=r.getDataSource();var v=k.fetchDataItem(ElementsManager.getItemIdFromDataListInstanceId(l));var n=v.index;var q=r.getPropertyValue("dataLayoutOptions").elementsPerPage;var t=Math.floor(n/q);r.navigate(t-r.getCurrentItem().getChildIndex(),false)}}};this.getParents=function(r,m,p){var l=[];var q={};for(var o=0;o<r.length;o++){var k=r[o];if(m){n(k)}else{n(k.parentInstance)}}return l;function n(s){if(s&&!q[s.id]){q[s.id]=true;if(!p||p.call(s)){l.push(s)}n(s.parentInstance)}}};this.loadRootElement=function(k){var m=f.addHierarchyInfo(k,{parent:null,isLoading:true});var l=m[0];return l};this.setRootInstance=function(k){a=k};this.getRootInstance=function(){if(a){return a}else{return PageManager.getCurrentPage()}};this.getCurrentRootInstance=function(){if(TemplateEditingManager.Flags.IsInEditingTemplate.isTrue()){return TemplateEditingManager.getCurrentInstance()}return ElementsManager.getRootInstance()};this.getDescendingElements=function(k,n){n=n===undefined?$.returnTrue:n;var m=$([]);k.each(l);function l(){if(n(this)){var o=ElementsManager.getChildElements($(this));m=m.add(o);o.each(l)}}return m};this.getChildElements=function(l){var k=$.map($instance(l).getChildInstances(),function(m){return m.$element[0]});return $(k)};this.scrollToContext=function(m,n){m=$.valueOrDefault(m,200);n=$.valueOrDefault(n,0);var l=SelectionArea.getSelectionBoxArea(true);if(l){if(!PositionManager.isAreaInViewPort(l)){var k=ViewManager.getSiteScrollableElement();if(m){k.animate({scrollTop:l.top-n},{duration:m})}else{k.scrollTop(l.top-n)}}}};this.scrollToInstance=function(r,o,l){o=o===undefined?200:o;l=$.valueOrDefault(l,0);var q=PositionManager.getElementOffset(r,true).top;var s=PositionManager.getElementSize(r);var p=DesignerManager.calculateDesignerArea();if(q+s.height<p.bottom&&q>p.top){return false}var m=50;var n=DesignerManager.calculateScrollTop(q-p.top-m);var k=ViewManager.getSiteScrollableElement();if(o){k.animate({scrollTop:n-l},{duration:o})}else{k.scrollTop(n)}};this.scrollToInstanceInPreview=function(m,l){l=$.extend({animationDuration:0},l);var k=$.getScrollingController();m.showParents();var n;if(m.isFixed()){if(m.isType(ElementsTypes.HeaderElement)){n=0}else{if(m.isType(ElementsTypes.FooterElement)){n=PageManager.getCurrentPage().getArea().bottom+m.getSize().height}}}else{n=PositionManager.getElementOffset(m).top}if(k.$scrollableForRead.scrollTop()!==n){PositionManager.disableMouseOver();k.$scrollableForWrite.stop(true,true).animate({scrollTop:n},{duration:l.animationDuration,always:function(){PositionManager.enableMouseOver()}})}};this.addElementToContainerElement=function(p,o,m){OperationsManager.beginAtomicBatch(false,"Change Container");ElementsManager.HierarchyChangedUpdateBatch.start();CommandsManager.UpdateBatch.start();PositionManager.UpdateBatch.start();LayoutManager.beginLayoutUpdateBatch();PositionManager.VisibilityUpdateBatch.start();PropertiesManager.UpdateBatch.start();OrderManager.beginReorderingBatch();o=$.makeArray(o);o=o.orderBy(function(q){return q.getPropertyValue("order")});for(var l=0;l<o.length;l++){var k=o[l];var n=k.parentInstance;if(!(n===p)){if(n){Global.Events.ContainerChanging.fire(k,k);k.detach();k.containerChanging.fire()}k.$container=p.addChildElement(k,m);k.setParent(p);p.onChildElementAdded(k,m);k.onElementAddedToContainer(p);Global.Events.ContainerChanged.fire(k,k,p,n);k.containerChanged.fire()}}ElementsManager.HierarchyChangedUpdateBatch.fireEvent(Global.Events.HieararchyChanged);OrderManager.endReorderingBatch();PropertiesManager.UpdateBatch.finish();PositionManager.VisibilityUpdateBatch.finish();LayoutManager.endLayoutUpdateBatch();PositionManager.UpdateBatch.finish();CommandsManager.UpdateBatch.finish();ElementsManager.HierarchyChangedUpdateBatch.finish();OperationsManager.endAtomicBatch()};this.getPageRootInstances=function(){var l=PageManager.getCurrentPage();var k=[];$.each(l.childInstances,function(n,m){if(m.hasFeature(Features.PageSection)){$.merge(k,m.childInstances)}else{if(!m.isType(ElementsTypes.PageContentElement)){k.push(m)}}});return k};this.adjustHierarchyWithBaseHierarchy=function(o,k,p){var m=o.idsInHierarchy;var n=o.connections.targetConnections;var l=o.customStatesProperties;if(k&&k.connections&&k.connections.targetConnections){$.each(k.connections.targetConnections,function(t,q){if(!n[t]&&m[q.targetElementID]&&m[q.sourceElementID]){var s=ElementsManager.getInstanceByID(q.targetElementID);var r=ElementsManager.getInstanceByID(q.sourceElementID);if(!s||!r||!s.isInitialized||!r.isInitialized){n[t]=q}}});o.connections.targetConnections=n}if(m&&k&&k.customStatesProperties){$.each(k.customStatesProperties,function(r,q){var s=ElementsManager.getInstanceByID(r);if(!s||s.isInstanceDeleted()){$.each(q,function(w,t){for(var v in t){var x=t[v];for(var u in x){var z=x[u];var y=ElementsManager.getInstanceByID(u);if(m[u]&&(!s||!s.isInitialized||!y||!y.isInitialized)){if(!p||p(u,r,v)){$.objectSet(l,[r,w,v,u],z)}}}}})}});o.customStatesProperties=l}return o};this.getHierarchyInfo=function(k,u){u=$.extend({forSaving:false,saveToServer:false,saveRootsOffsets:false,filter:$.returnTrue,propertiesFilter:undefined,allowContent:false,idsInHierarchy:false,adjustSize:false,adjustPosition:false,clearRootsLayout:false,copyAffectedStates:true,copyAffectingStates:false,copyMobileStates:true,connectionFilter:$.returnTrue,rootInstancesHierarchies:undefined},u);if(k.length===undefined){k=[k]}var l=u.rootInstancesHierarchies;if(!l){l=ElementsManager.getInstancesWithHierarchyFromRoots(k).rootInstancesHierarchies}var q={};var s=[];var t={};var o={};s.length=0;var n=99999999;var m=99999999;$.each(l,function(y,x){var v=x.instance;var w=r(x,true);if(w){var z=v.getPosition(true);if(z){w.offset=z;if(z.left<m){m=z.left}if(z.top<n){n=z.top}}if(v.parentInstance){w.containerId=v.parentInstance.id}if(u.clearRootsLayout){w.elementProperties.fillLayout={fillVertical:false,fillHorizontal:false};w.elementProperties.verticalLayout=LayoutManager.Layout.normal;w.elementProperties.horizontalLayout=LayoutManager.Layout.normal}s.push(w)}});var p={structures:s,connections:{targetConnections:t,sourceConnections:{}},customStatesProperties:o,pageId:PageManager.getCurrentPageId(),version:StructureLoadingManager.CurrentStructureVersion,id:StructureLoadingManager.generateWebsiteId(),relativePoint:{left:m,top:n}};if(u.idsInHierarchy){p.idsInHierarchy=q}return p;function r(w,v){var x=w.instance;if(!u.filter(x)){return undefined}var A=x.getTargetConnections(u.connectionFilter);$.extend(t,A);if(u.copyAffectedStates){$.extend(true,o,PropertiesManager.copyAffectedCustomProperties(x,u).copiedCustomStatesProperties)}if(u.copyAffectingStates){$.extend(true,o,PropertiesManager.copyAffectingCustomProperties(x,u))}else{if(u.copyMobileStates){$.extend(true,o,PropertiesManager.copyAffectingCustomProperties(x,{filterFunction:function(B,C,D){if(D===MobileVersionViewManager.MobileStateName){return true}}}))}}var y=x.getInstanceDataForSaving(u);q[x.id]=true;if(w.childInstancesHierarchies.length>0){y.childElements=[];$.each(w.childInstancesHierarchies,function(D,C){var B=C.instance;if(!B.isContent()||u.allowContent){var C=r(C);if(C){y.childElements.push(C)}}});if(x.hasFeature(Features.DataList)){var z=x.getDataSource();if(z){$.each(x.getDataSource().getAllItems(),function(C,B){$.extend(t,BehavioursManager.getInstanceTargetConnections(x.getDataItemInstanceId(C),function(D){return !D.isTemplateConenction&&u.connectionFilter(D)}))})}}}return y}};this.addHierarchyInfo=function(m,l){var k=HierarchyController.create(m);return k.addHierarchyAndApply(l)};this.addInstance=function(r,k,q,w){w=$.extend({droppingArgs:undefined,isContent:false,isVisible:true,idMapping:undefined,isForTemplateUse:false},w);var m=k===null;var l=m||!k.root?null:k.root.id;var v=g(r);OrderManager.beginReorderingBatch();var o=ElementInstance.create(v,q,{rootID:l,isForTemplateUse:w.isForTemplateUse});if(k&&!k.hasFeature(Features.ItemsContainer)){var u=false;k=k.parentInstance;while(!u&&k){if(k.accept(o)&&o.canRedropTo(k)&&k.isDroppable()){u=true}else{k=k.parentInstance}}}if(!w.isForTemplateUse){if(l===null){l=o.id;c[l]={}}c[l][o.id]=o;h[o.id]=l;o.currentPageId.setValue(l);o.root=c[l][l];o.setIsContent(w.isContent);o.isVisible=w.isVisible&&(Global.IsDesigner||!o.hasFeature(Features.Hideable)||o.getPropertyValue("isVisible")===true);if(o.getPropertyValue("name")===null){NamingManager.allocateName(o,k)}}else{o.data.isForTemplateUse=true;j[o.id]=o}o.setParent(k);var t;var n=o.elementType;if(n.renderElement){t=$(n.renderElement(o))}else{if(n===ElementsTypes.page){t=$(ElementsRenderingController.renderPageElement({isDesigner:o.isInDesignMode(),isExplorerMode:Global.IsExplorerMode}))}else{if(n.isType(ElementsTypes.PageContentElement)){t=$(ElementsRenderingController.renderPageContentElement({isDesigner:o.isInDesignMode(),isExplorerMode:Global.IsExplorerMode}))}else{t=$(ElementsRenderingController.renderDesignElement({elementType:o.elementType,hasContent:o.hasFeature(Features.HasContent),isDesigner:o.isInDesignMode(),tagName:o.getPropertyValue("tagName"),isExplorerMode:Global.IsExplorerMode}))}}}if($.browser.msie&&parseInt($.browser.version)===7){t.addClass("ie7")}o.setElement(t);var s;if(o.hasFeature(Features.HasContent)){s=o.creationFunction(o);if(s){o.setElementContent(s)}}if(k){o.$container=k.addChildElement(o,w.droppingArgs)}else{if(!w.isForTemplateUse){PageManager.getPagesRoot().append(o.$element)}}var p=v.onInstanceCreatedAggregation;if(p){p.call(o,o)}if(o.elementType===ElementsTypes.coordinator){o.initialize()}else{o.visibilityChangedEvent.bind(function(){if(PositionManager.isElementVisible(o)){o.initialize()}})}PositionManager.initializeStoredPosition(o);if(k!==null){k.onChildElementAdded(o,w.droppingArgs);o.onElementAddedToContainer(k)}ElementsManager.Events.InstanceCreatedEvent.fire(o,o);OrderManager.endReorderingBatch();return o};function g(k){if(typeof k=="object"){return k}else{return ElementsTypes[k]}}this.duplicateHierarchyInfo=function(n,t){t=$.extend({generateNewID:true,rootsIds:[],structureProcessor:$.returnValue},t);var q={id:StructureLoadingManager.generateWebsiteId()};q.newToOldIDMapping={};q.oldToNewIDMapping={};q.connections={};q.customStatesProperties={};q.structures=[];q.defaultProperties=n.defaultProperties;q.defaultDefinitonNamesMap=n.defaultDefinitonNamesMap;var o=[];$.each(n.structures,function(w,u){var v=r(u,t,w);q.structures.push(v)});if(n.connections){var p={};var s=n.connections.targetConnections;if(s){$.each(s,function(v,u){if(!q.oldToNewIDMapping[v]){q.oldToNewIDMapping[v]=$.uniqueID()}})}}$.each(q.structures,function(v,u){u=k(u)});if(n.connections){var p=q.oldToNewIDMapping;var s=n.connections.targetConnections;var m={};if(s){m=$.replaceKeys(s,q.oldToNewIDMapping);m=$.replaceValuesKey(m,"sourceElementID",q.oldToNewIDMapping);m=$.replaceValuesKey(m,"targetElementID",q.oldToNewIDMapping);m=$.replaceValuesKey(m,"id",q.oldToNewIDMapping)}q.connections.targetConnections=m;q.connections.sourceConnections={}}if(n.customStatesProperties){q.customStatesProperties=$.replaceKeys(n.customStatesProperties,q.oldToNewIDMapping);var l={};$.each(q.customStatesProperties,function(v,u){if(u.rowsItems){u.rowsItems=$.replaceValuesKeyByFunction(u.rowsItems,"id",l,function(w,x){return $.uniqueID()})}});$.each(q.customStatesProperties,function(v,u){if(u.cellItem){u.cellItem=$.replaceValuesKeyByFunction(u.cellItem,"id",l,function(w,x){return $.uniqueID()});u.cellItem=$.replaceValuesKeyByFunction(u.cellItem,"rowId",l,function(w,x){return $.uniqueID()})}});$.each(q.customStatesProperties,function(v,u){if(u.cellItem){u.cellItem=$.replaceKeys(u.cellItem,l)}if(u.rowsItems){u.rowsItems=$.replaceKeys(u.rowsItems,l)}})}return q;function k(z){var y=z.elementProperties.dataInfo;var E=z.type;var K=z.elementProperties.connections;var D=z.elementProperties.fieldsMap;var x=z.elementProperties.fieldsData;var H=z.elementProperties.fieldsTemplates;var J=z.elementProperties.skinBinding;var v=z.elementProperties.formID;if(H){var C=$.uniqueID();$.each(H,function(M,L){$.each(L,function(S,O){if(E!==ElementsTypes.FormElement){C=$.uniqueID()}if(O.hierarchy&&O.hierarchy.structures[0].elementProperties.skinBinding&&O.hierarchy.structures[0].elementProperties.skinBinding.hierarchy){var R=O.hierarchy.structures[0].elementProperties.skinBinding.hierarchy;var Q=O.hierarchy.structures[0].type;var N=R.fieldsToValues;var P=R.statesAnimations;L[S].hierarchy=SkinEditingManager.convertTemplateToSkinTemplateWithFields(R,Q,C);L[S].hierarchy.structures[0].elementProperties.skinBinding.hierarchy.fieldsToValues=N;L[S].hierarchy.structures[0].elementProperties.skinBinding.hierarchy.statesAnimations=P}else{if(O.hierarchy){L[S].hierarchy=SkinEditingManager.convertTemplateToSkinTemplateWithFields(O.hierarchy,undefined,C)}}})})}if(J&&!ElementsTypes[E].hasFeature(Features.SkinElement)){if(J.hierarchy){J.hierarchy=SkinEditingManager.convertTemplateToSkinTemplateWithFields(J.hierarchy,E)}}if(y&&y.currentData){var w=y.currentData;var G=y.itemsMap;if(!G||$.getKeys(G).length===0){G=w.itemsMap;if(!G){G={}}}y.itemsMap=G;var u={};if(q.oldToNewIDMapping[w.id]&&E===ElementsTypes.Menu.name){var A=q.oldToNewIDMapping[w.id];var I={};var B=0;$.each(w.items,function(N,M){var L=A+"p"+B;u[L]=M.id;I[L]=M;I[L].id=L;B++;G[L]=G[N];delete G[N]});w.items=I;y.currentData=w;y.itemsMap=G}var F=w.items;if(!F){F=w}$.each(F,function(N,L){var M=u[N]?z.oldId+TemplateItemInstanceIdSeperator+u[N]:z.oldId+TemplateItemInstanceIdSeperator+N;q.oldToNewIDMapping[M]=z.id+TemplateItemInstanceIdSeperator+N});y=$.replaceValuesKey(y,"id",q.oldToNewIDMapping);z.elementProperties.dataInfo=y}if(K){K=$.replaceValuesKey(K,"targetId",q.oldToNewIDMapping);K=$.replaceKeys(K,q.oldToNewIDMapping);z.elementProperties.connections=K}if(D){D=$.replaceKeys(D,q.oldToNewIDMapping);z.elementProperties.fieldsMap=D}if(x){x=$.replaceKeys(x,q.oldToNewIDMapping);z.elementProperties.fieldsData=x}if(v){z.elementProperties.formID="id"+$.uniqueID()}if(z.childElements){$.each(z.childElements,function(M,L){z.childElements[M]=k(L)})}return z}function r(w,y,x){var v=$.extend(true,{oldId:w.id},w);if(y.rootsIds[x]){q.oldToNewIDMapping[w.id]=y.rootsIds[x];q.newToOldIDMapping[y.rootsIds[x]]=w.id;v.id=y.rootsIds[x]}v.containerId=undefined;v=u(v,true);return v;function u(A,z){var B=A.id;if(!z||!y.rootsIds[x]){if(y.generateNewID||ElementsManager.getInstanceByID(B)){B=StructureLoadingManager.generateWebsiteId()}q.oldToNewIDMapping[A.id]=B;q.newToOldIDMapping[B]=A.id}A.id=B;A=y.structureProcessor(A);if(A.childElements){$.each(A.childElements,function(D,C){A.childElements[D]=u(C)})}return A}}};this.addPageContent=function(){OperationsManager.beginAtomicBatch(true,"Add Header");Global.Events.ElementsAdding.fire();var k=ElementsManager.addInstance(ElementsTypes.PageContentElement,PageManager.getCurrentPage());var l=ElementsManager.addInstance(ElementsTypes.SectionElement,PageManager.getCurrentPage(),{initialPropertiesValues:{pageContentId:k.id}});MasterPagesManager.EditingMasterPage.valueChangedEvent.one(function(){PositionManager.updatePosition(l)});SelectionManager.selectInstances([k],true);Global.Events.ElementsAdded.fire(Global,{instances:[k,l]});OperationsManager.endAtomicBatch();return{pageContentInstance:k,sectionInstance:l}};this.addCustomSection=function(p,m){m=$.extend({categoryID:undefined,relativeSectionInstance:undefined,side:Side.Top},m);OperationsManager.beginAtomicBatch(true,"Add Section");OrderManager.beginReorderingBatch();var l=m.relativeSectionInstance;var k;if(l){k=l.getPropertyValue("order")+(m.side===Side.Top?-0.1:0.1)}var n;if(p){var o=ElementsTypes.SectionElement.name;if(m.categoryID===RemoteTemplatesCategories.SectionFooter){o=ElementsTypes.FooterElement.name}else{if(m.categoryID===RemoteTemplatesCategories.SectionHeader){o=ElementsTypes.HeaderElement.name}}p.structures[0].type=o;ElementsUtilizationManager.utilizeTemplate(p,function(q){n=q[0];if(o===ElementsTypes.SectionElement.name){n.setPropertyValue("order",k)}})}else{n=ElementsManager.addSection(undefined,{initialPropertiesValues:{order:k,sizeAndPosition:{height:300}}})}OrderManager.bringToFront(n.childInstances);OrderManager.endReorderingBatch();OperationsManager.endAtomicBatch();return n};this.addSection=function(l,m){if(PageManager.getCurrentPage().getPageContentInstances().length>0){m=$.extend(true,{initialPropertiesValues:l?{pageContentId:l.id}:undefined},m);OperationsManager.beginAtomicBatch(false,"Add Header");Global.Events.ElementsAdding.fire();var k=ElementsManager.addInstance(ElementsTypes.SectionElement,PageManager.getCurrentPage(),m);MasterPagesManager.setAsPageContentElement(k);Global.Events.ElementsAdded.fire(Global,{instances:[k]});OperationsManager.endAtomicBatch();return k}else{alert("there is no Page Content In The Page")}};this.addFooterInstance=function(){OperationsManager.beginAtomicBatch(true,"Add Header");Global.Events.ElementsAdding.fire();var k=ElementsManager.addInstance(ElementsTypes.FooterElement,PageManager.getCurrentPage());SelectionManager.selectInstances([k],true);Global.Events.ElementsAdded.fire(Global,{instances:[k]});OperationsManager.endAtomicBatch()};this.addHeaderInstance=function(){OperationsManager.beginAtomicBatch(true,"Add Header");Global.Events.ElementsAdding.fire();var k=ElementsManager.addInstance(ElementsTypes.HeaderElement,PageManager.getCurrentPage());SelectionManager.selectInstances([k],true);Global.Events.ElementsAdded.fire(Global,{instances:[k]});OperationsManager.endAtomicBatch()};this.copyConnections=function(l,k){var m={};if(!l){l={}}$.each(l,function(p,o){var n={sourceElementID:o.sourceElementID,targetElementID:o.targetElementID,behaviourName:o.behaviourName,options:$.extend(true,{},o.options),id:StructureLoadingManager.generateWebsiteId()};var q=false;if(k[o.targetElementID]){n.targetElementID=k[o.targetElementID];q=true}if(k[o.sourceElementID]){n.sourceElementID=k[o.sourceElementID];q=true}if(q){o.connectionData=undefined;m[n.id]=n}});return m};return this})();function $instance(a){if(a===null){return null}if(a){if(typeof a=="object"&&a._isInstance_){return a}else{if(typeof a=="string"||typeof a=="string"){return ElementsManager.getInstanceByID(a)}}}return ElementsManager.getInstanceData(a)}var RollsManager=new function(){this.registerRolls=function(a){$.each(a,function(b,c){Rolls[b]=$.extend({name:b,setRoll:$.noop,removeRoll:$.noop},c)})}}();var Rolls={};var WidgetsManager=new function(){this.registerWidgets=function(a){$.each(a,function(b,c){Widgets[b]=$.extend({name:b,iconClass:"",title:"unknown",messageTitle:Global.IsDesigner?Language.modeBar.selectionMode[b].title:undefined,message:Global.IsDesigner?Language.modeBar.selectionMode[b].description:undefined},c)})};this.getWidgetFromInstance=function(a){var c=[];var b=a.getElementDefinitions();$.each(b,function(d,f){if(f.widgets){$.each(f.widgets,function(g,h){c.push(h)})}});return c};this.hasWidgets=function(b){var a=false;var c=b.getElementDefinitions();$.each(c,function(d,f){if(f.widgets&&f.widgets.length>0){a=true;return false}});return a}}();var Widgets={};var LayoutManager=new function(){this.SizeProperties=["width","minHeight","height","minWidth"];this.PositionProperties=["left","right","top","bottom","marginLeft","marginTop","marginRight","marginBottom"];this.DomReadBatch=OperationsBatch.create();this.Layout={normal:"normal",fill:"fill",fillVertical:"fillVertical",fillHorizontal:"fillHorizontal",centered:"centered",stretched:"stretched",stackedHorizontally:"stackedHorizontally",stackedVertically:"stackedVertically",dockLeft:"dockLeft",dockRight:"dockRight",dockTop:"dockTop",dockBottom:"dockBottom"};var f=this;var j={};var d={};var c=0;var i={};f.autoAdjustLayoutToContent=ObservableFlag.createConditionalPositive();f.Events={LayoutBatchFinished:SimpleEvent.create()};f.layoutUpdateBatch=OperationsBatch.create({name:"layoutUpdateBatch",batchStartCallback:function(){},batchFinishCallback:function(){h();f.Events.LayoutBatchFinished.fire()},batchFinishingStartedCallback:function(k){if(k>0){}},batchFinishingCompletedCallback:function(k){if(k>0){}}});this.requestUpdatePosition=function(l,k){if(!(l instanceof Array)){l=[l]}g(l,k);if(!f.layoutUpdateBatch.isActive()){b()}};this.refreshElementsLayout=function(n,m){if(!(n instanceof Array)){n=[n]}for(var l=0;l<n.length;l++){var k=n[l];j[k.id]={instance:k,forceLayoutUpdate:true}}if(!f.layoutUpdateBatch.isActive()){h()}};this.beginLayoutUpdateBatch=function(){f.layoutUpdateBatch.start()};this.endLayoutUpdateBatch=function(){f.layoutUpdateBatch.finish()};this.setPageContentWidth=function(k){var m=PageManager.getCurrentPage();if(m){var l=PageManager.getContentWidth();var n=Math.floor((k-l)/2);PageManager.getCoordinator().setPropertyValue("contentWidth",k);LayoutManager.beginLayoutUpdateBatch();$.each(m.getChildInstances(),function(p,o){o.setPropertyFieldsValues("sizeAndPosition",{left:o.getPropertyValue("sizeAndPosition").left+n})});LayoutManager.endLayoutUpdateBatch()}};function h(){var x=null,o,v,q,w,m,l,n;var t=[];var s=[];var k=false;if(!$.isEmptyObject(j)||!$.isEmptyObject(i)){k=true;PositionManager.UpdateBatch.start()}var p=PageManager.getCurrentPage();var u=undefined;x=null;var r=[];$.each(j,function(L,U){v=U.instance;if(v.isDeleted){return true}var P=v.getParent();var C=v.isRelativePositioned();var z=v.getActualPropertyValue("lineWidth");var M=v.getActualPropertyValue("padding");var X=v.getActualPropertyValue("borderWidth");var Q=X?v.getActualPropertyValue("borderWidth"):StructureLoadingManager.createValueToObjectValueConverter(["left","top","bottom","right"])(z?z:0);var K=v.getPropertyValue("fillLayout");var O=v.currentMargin?v.currentMargin:StructureLoadingManager.createValueToObjectValueConverter(["left","top","bottom","right"])(0);var R=(!v.isType(ElementsTypes.HeaderElement)&&!v.isType(ElementsTypes.FooterElement));w=v.getActualPropertyValue("sizeAndPosition");q=v.getAutoLayoutProperties();K=K?K:{};var E={left:0,right:0,top:0,bottom:0};var G={};var V=HorizontalAlignment.Left;if(P&&P.hasFeature(Features.HasChildrenLayoutAnchor)){V=P.getPropertyValue("childrenAnchor")}if(!PositionManager.isElementVisible(v)){return true}if(v.hasFeature(Features.HasLayout)){if(ViewManager.isViewMode()&&P===p&&v.isFixed()){if(Global.IsDesigner){var I=DesignerManager.ResponsiveViewPort.getValue();if(I){if(!u){u=$.getWindowSize().width}E.left=E.right=(u-I)/2}if(MobileVersionViewManager.Flags.IsInMobileContext.isTrue()){var J=ViewMobileWrapperMode.getMobileContainerArea();E.bottom+=ViewMobileWrapperMode.getMobileContainerBottom();E.top+=J.top}else{E.top+=DesignerHeader.getOuterHeight()}}if(!Global.IsDesigner||MobileVersionViewManager.Flags.IsInMobileContext.isFalse()){E.bottom+=FreemiumBanners.getFooterHeight()}if(R){E.top+=p.getHeaderInstanceHeight()}if(R){E.bottom+=p.getFooterInstanceHeight()+PrivacyPolicyBar.getPrivacyPolicyActualHeight()}}if(K.fillHorizontal||(v.hasFeature(Features.HasResponsiveItem)&&!v.isBlock())){if(C){$.extend(G,{right:"",left:"",width:"",marginLeft:O.left,marginRight:O.right})}else{$.extend(G,{right:O.right+E.right,left:O.left+E.left,width:"",marginLeft:"",marginRight:""})}U.left=O.left}if(K.fillVertical){$.extend(G,{bottom:O.bottom+E.bottom,top:O.top+E.top,height:"",minHeight:"",marginTop:""});U.top=O.top}if(v.isType(ElementsTypes.PageContentElement)){$.extend(G,{marginBottom:O.bottom,marginTop:O.top})}if(!K.fillHorizontal){var T=v.getPropertyValue("horizontalLayout");var D=O.left+E.left;var W=O.right+E.right;switch(T){case LayoutManager.Layout.dockLeft:$.extend(G,{left:!C?D:"",right:"",marginLeft:C?D:"",marginRight:""});break;case LayoutManager.Layout.dockRight:$.extend(G,{right:!C?W:"",left:"",marginLeft:"",marginRight:C?W:""});break;case LayoutManager.Layout.centered:$.extend(G,{right:"",left:"50%",marginLeft:"{0}px".format(0-w.width/2+O.left),marginRight:""});break}}if(!K.fillVertical){var F=v.getPropertyValue("verticalLayout");var N=O.top+E.top;var H=O.bottom+E.bottom;switch(F){case LayoutManager.Layout.dockTop:$.extend(G,{top:!C?N:"",bottom:"",marginTop:C?N:"",marginBottom:""});break;case LayoutManager.Layout.dockBottom:$.extend(G,{bottom:!C?H:"",top:"",marginTop:"",marginBottom:C?H:""});break;case LayoutManager.Layout.centered:$.extend(G,{bottom:"",top:"50%",marginTop:0-(w.height)/2+O.top,marginBottom:""});break}}}var y=v.getMinSize();var B=v.getMaxSize();if(!q.width){if(v.hasWidth()){G.width=$.minValue([B.width,$.maxValue([w.width-(M?M.left+M.right:0)-(Q?Q.left+Q.right:0),y.width])])}else{G.width=""}}if(!q.height){if(v.hasHeight()){G.minHeight=(w.height)-(M?M.top+M.bottom:0)-(Q?Q.top+Q.bottom:0)}else{if(v.isType(ElementsTypes.Tab)&&v.hasCellWrapper.isTrue()){G.minHeight=v.parentInstance.getPropertyValue("sizeAndPosition").height}else{G.minHeight=0}}}G.minHeight=$.minValue([B.height,$.maxValue([G.minHeight,y.height])]);if(v.elementType===ElementsTypes.Flash){G.height=G.minHeight}if(!q.left){if(C){if(v.hasCellWrapper.isTrue()){G=$.extend(G,{marginLeft:"",marginRight:"",left:"",right:""},v.getStaticMargin({vertically:false}))}else{G=$.extend(G,{marginLeft:"",marginRight:"",left:"",right:""})}}else{switch(V){case HorizontalAlignment.Right:$.extend(G,{right:0-(w.left-E.right),left:"",marginLeft:"",marginRight:""});break;case HorizontalAlignment.Centered:$.extend(G,{right:"",left:"50%",marginLeft:(w.left),marginRight:""});break;default:var S=B.width;var A=w.left+w.width;$.extend(G,{left:S<A?$.max([0,A-S]).value:(w.left+E.left),right:"",marginLeft:"",marginRight:""});break}}}if(!q.top){if(C){if(v.hasCellWrapper.isTrue()){G=$.extend({top:"",bottom:"",marginTop:"",marginBottom:""},G,v.getStaticMargin({horizontally:false}))}else{$.extend(G,{top:"",bottom:"",marginTop:(w.top+E.top),marginBottom:""})}}else{$.extend(G,{top:(w.top+E.top),bottom:"",marginTop:"",marginBottom:""})}}if(v.isType(ElementsTypes.HeaderElement)){$.extend(G,{top:(E.top),bottom:"",left:E.left,right:E.right,marginTop:""})}if(v.isType(ElementsTypes.FooterElement)){$.extend(G,{top:"",bottom:(E.bottom),left:E.left,right:E.right,marginTop:""})}G=$.extend({right:"",left:"",marginLeft:"",marginRight:"",top:"",bottom:"",marginTop:"",marginBottom:"",width:"",height:"",minHeight:"",minWidth:""},G);r.push({pendingUpdate:U,instance:v,layoutStyle:G})});$.each(r,function(C,D){var z=D.pendingUpdate;var A=D.layoutStyle;var y=D.instance;var B=a(y,A);if(B.sizeChanged||q.width||q.height||z.forceLayoutUpdate){t.push(y)}if(B.positionChanged||q.left||q.top||z.forceLayoutUpdate){s.push(y)}});if(k){g(t,{updateOffset:false,updateSize:true});g(s,{updateOffset:true,updateSize:false});b();j={};PositionManager.UpdateBatch.finish()}}this.updateInstanceLayoutStyle=a;this.executePendingPositionsUpdates=b;function g(n,l){l=$.extend({updateOffset:true,updateSize:true},l);for(var m=0;m<n.length;m++){var k=n[m];var o=i[k.id];if(o){o.updateSize=o.updateSize||l.updateSize;o.updateOffset=o.updateOffset||l.updateOffset}else{i[k.id]={instance:k,updateSize:l.updateSize,updateOffset:l.updateOffset}}}}function b(){var m=i;i={};var t={};var C={};while(!$.isEmptyObject(m)){var q=[];var k=[];for(var r in m){var y=m[r];var z=y.instance;if(z.isDeleted){continue}if(y.updateOffset){q.push(z);t[r]=true}if(y.updateSize){k.push(z);C[r]=true}}m={};var s=PositionManager.updatePosition(k,{updateOffset:false,updateSize:true}).changedSizes;var D=PositionManager.updatePosition(q,{updateOffset:true,updateSize:false}).changedOffsets;for(var w=0;w<s.length;w++){var p=s[w];var l=p.getChildInstances();for(var v=0;v<l.length;v++){var n=l[v];var B=n.id;var u=!t[B];var x=!C[B];if(u||x){m[B]={instance:n,updateOffset:u,updateSize:x}}}}for(var w=0;w<D.length;w++){var A=D[w];var l=A.getChildInstances();for(var v=0;v<l.length;v++){var n=l[v];var B=n.id;var u=!t[B];if(u){var o=m[B];if(!o){m[B]={instance:n,updateOffset:true,updateSize:false}}else{o.updateOffset=true}}}}}}function a(z,y){var l=$.extend({},z.actualSizeAndPosition);var t={};var w={};var x=false;var A=false;var r=f.SizeProperties;var q={};var p=false;var o=false;for(var s=0;s<r.length;s++){var k=r[s];if(y[k]!==l[k]){t[k]=y[k];q[k]=true;o=true}}var v=f.PositionProperties;for(var s=0;s<v.length;s++){var k=v[s];if(y[k]!==l[k]){w[k]=y[k];q[k]=true;p=true}}z.actualSizeAndPosition=$.extend(z.actualSizeAndPosition,t,w);var n=(y.left!==""&&y.right!=="");var m=(y.top!==""&&y.bottom!=="");var u=z.isRelativePositioned();if(n){if(q.left||q.right){x=true}}else{if(q.left||q.right||q.marginLeft||u){A=true}if(q.width){x=true;if(y.right!==""){A=true}}}if(m){if(q.top||q.bottom){x=true}}else{if(q.top||q.bottom||q.marginTop||u){A=true}if(q.height||q.minHeight){x=true;if(y.bottom!==""){A=true}}}if(o){z.changeElementSize(t)}if(p){z.getPositionBox().css(w)}return{sizeChanged:x,positionChanged:A}}}();var ElementsLayoutHelper=new function(){this.clearInstancesLayout=function(c){LayoutManager.beginLayoutUpdateBatch();for(var b=0;b<c.length;b++){var a=c[b];if(a.hasFeature(Features.HasLayout)){a.setPropertyValue("verticalLayout",LayoutManager.Layout.normal);a.setPropertyValue("horizontalLayout",LayoutManager.Layout.normal);a.setPropertyValue("fillLayout",{fillVertical:false,fillHorizontal:false})}}LayoutManager.endLayoutUpdateBatch()};this.centerInDesignerArea=function(b){b=$.makeArray(b);var a=$.shrinkArea($.getWindowArea(),DesignerManager.getDesignerAreaCoordinates());ElementsLayoutHelper.translateInstancesArea(b,a.center,{horizontalAlignment:HorizontalAlignment.Centered,verticalAlignment:VerticalAlignment.Centered})};this.rememberLayoutProperties=function(f){var c=[];for(var b=0;b<f.length;b++){var d={};var a=f[b];d.sizeAndPosition=$.extend({},a.getPropertyValue("sizeAndPosition"));d.margin=$.extend({},a.getPropertyValue("margin"));d.fillLayout=$.extend({},a.getPropertyValue("fillLayout"));d.verticalLayout=a.getPropertyValue("verticalLayout");d.horizontalLayout=a.getPropertyValue("horizontalLayout");c.push({instance:a,storedProperties:d})}return{restoreLayoutProperties:function(){PropertiesManager.UpdateBatch.executeWithActivation(function(){for(var g=0;g<c.length;g++){c[g].instance.setPropertiesValues(c[g].storedProperties)}})}}};this.withLayoutPreserving=function(c,d,a){var b=ElementsLayoutHelper.rememberLayout(c,a);d();b.restoreLayout()};this.rememberLayout=function(f,g){g=$.extend({includeDockedElements:true,rememberLeft:true,rememberTop:true,rememberWidth:true,rememberHeight:true,relativeTo:false},g);f=$.makeArray(f);var p=[];var s=g.includeDockedElements;var b=g.relativeTo;for(var t=0;t<f.length;t++){var k=f[t];var o=k.getPropertyValue("fillLayout");var u=k.getPropertyValue("horizontalLayout");var h=k.getPropertyValue("verticalLayout");var v=o&&o.fillHorizontal;var n=o&&o.fillVertical;var m=g.rememberLeft&&(s||(!v&&u===LayoutManager.Layout.normal));var d=g.rememberTop&&(s||(!n&&h===LayoutManager.Layout.normal));var a=g.rememberWidth&&(s||!v);var c=g.rememberHeight&&(s||!n);if(m||d||a||c){var l={instance:k,rememberLeft:m,rememberTop:d,rememberWidth:a,rememberHeight:c};var q=k.$element;if(m||d){var j=q.offset();if(b){var r=$.evaluateWhenFunction(b);j=$.getRelativeOffset(j,r)}l.offset=j}if(a){l.width=q.width()}if(c){l.height=q.height()}p.push(l)}}return{restoreLayout:function(){LayoutManager.beginLayoutUpdateBatch();PropertiesManager.UpdateBatch.start();var y;for(y=0;y<p.length;y++){p[y].currentOffset=p[y].instance.$element.offset()}var B={left:0,top:0};if(b){B=$.evaluateWhenFunction(b)}for(y=0;y<p.length;y++){var A=p[y];var w=A.instance;var z=A.currentOffset;var C={};var x={};if(A.rememberLeft){C.left=A.offset.left+B.left}if(A.rememberTop){C.top=A.offset.top+B.top}if(A.rememberWidth){x.width=A.width}if(A.rememberHeight){x.height=A.height}ElementsLayoutHelper.moveToOffset({instance:w,offset:z},C);ElementsLayoutHelper.setInstancesSize(w,x)}PropertiesManager.UpdateBatch.finish();LayoutManager.endLayoutUpdateBatch()}}};this.getInstancesArea=function(d){d=$.makeArray(d);var b=[];for(var c=0;c<d.length;c++){var a=d[c].$element;b.push(a.getArea())}return $.unionAreas(b)};this.setInstanceArea=function(a,b){ElementsLayoutHelper.moveToOffset(a,{left:b.left,top:b.top});ElementsLayoutHelper.setInstancesSize(a,{width:b.width,height:b.height})};this.translateInstancesArea=function(a,n,o){o=$.extend({verticalAlignment:VerticalAlignment.Top,horizontalAlignment:HorizontalAlignment.Left},o);a=$.makeArray(a);var g=o.verticalAlignment;var k=o.horizontalAlignment;var h=[];for(var d=0;d<a.length;d++){var l=a[d].$element;if(g!==VerticalAlignment.Top||k!==HorizontalAlignment.Left){h.push(l.getArea())}else{h.push(l.offset())}}var c,b,f,m;var j={};if(k!==HorizontalAlignment.Left){f=$.maxValue(h,function(i){return i.right})}if(k!==HorizontalAlignment.Right){c=$.minValue(h,function(i){return i.left})}if(g!==VerticalAlignment.Top){m=$.maxValue(h,function(i){return i.bottom})}if(g!==VerticalAlignment.Bottom){b=$.minValue(h,function(i){return i.top})}switch(k){case HorizontalAlignment.Left:j.left=c;break;case HorizontalAlignment.Right:j.left=f;break;case HorizontalAlignment.Centered:j.left=Math.floor((c+f)/2)}switch(g){case VerticalAlignment.Top:j.top=b;break;case VerticalAlignment.Bottom:j.top=m;break;case VerticalAlignment.Centered:j.top=Math.floor((b+m)/2)}ElementsLayoutHelper.moveInstances(a,{left:n.left-j.left,top:n.top-j.top})};this.moveToOffset=function(a,d,n){if(!d){return}n=$.extend({transitionData:undefined,callback:undefined},n);var c=n.transitionData;var l=n.callback;a=$.makeArray(a);var f;var b=[];for(f=0;f<a.length;f++){var m=a[f];if(ElementInstance.isElementInstance(m)){b.push({instance:m,offset:m.$element.offset()})}else{var j=m.instance;b.push({instance:j,offset:$.valueOrCalculate(m.offset,function(){return j.$element.offset()})})}}if($.isFunction(d)){d=d(b)}LayoutManager.beginLayoutUpdateBatch();PropertiesManager.UpdateBatch.start();for(f=0;f<b.length;f++){var g=b[f];var k=g.offset;var h={};if(d.top){h.top=d.top-k.top}if(d.left){h.left=d.left-k.left}ElementsLayoutHelper.moveInstances(g.instance,h,c,l)}PropertiesManager.UpdateBatch.finish();LayoutManager.endLayoutUpdateBatch()};this.setInstancesContentSize=function(f,c){if(!c){return}f=$.makeArray(f);LayoutManager.beginLayoutUpdateBatch();PropertiesManager.UpdateBatch.start();for(var b=0;b<f.length;b++){var a=f[b];var d=ElementsUtil.getElementContentMargins(a);ElementsLayoutHelper.setInstancesSize(a,{width:c.width+d.left+d.right,height:c.height+d.top+d.bottom})}PropertiesManager.UpdateBatch.finish();LayoutManager.endLayoutUpdateBatch()};this.setInstancesSize=function(d,o,f){if(!o){return}f=$.extend({preserveVerticalMargins:false,preserveHorizontalMargins:false},f);var s=f.preserveVerticalMargins;var p=f.preserveHorizontalMargins;d=$.makeArray(d);var r;var h=o.width;var j=o.height;var m=h!==undefined;var a=j!==undefined;if(!m&&!a){return}var b=[];for(r=0;r<d.length;r++){var u=d[r];var v={width:0,height:0};var l=u.getPropertyValue("fillLayout");var k=u.getPropertyValue("sizeAndPosition");var c="s";var n="e";if(m){var t=u.getPropertyValue("horizontalLayout");if(l&&l.fillHorizontal){v.width=h-u.$element.width()}else{v.width=h-k.width;if(p&&t===LayoutManager.Layout.dockRight){v.width=-v.width;n="w"}}}if(a){var g=u.getPropertyValue("verticalLayout");if(l&&l.fillVertical){v.height=j-u.$element.height()}else{v.height=j-k.height;if(s&&g===LayoutManager.Layout.dockBottom){v.height=-v.height;c="n"}}}if(v.width!==0||v.height!==0){b.push({instance:u,delta:v,axis:c+n})}}LayoutManager.beginLayoutUpdateBatch();PropertiesManager.UpdateBatch.start();for(r=0;r<b.length;r++){var q=b[r];ElementsLayoutHelper.resizeInstances(q.instance,q.delta,{axis:q.axis,isSymmetric:false})}PropertiesManager.UpdateBatch.finish();LayoutManager.endLayoutUpdateBatch()};this.resizeInstances=function(w,G,v){v=$.extend({axis:"se",isSymmetric:false,lockRatio:false,minWidth:undefined,minHeight:undefined,maxWidth:Infinity,resizeCenteredElementsSymmetrically:false},v);if(!G){return}G=$.extend({width:0,height:0},G);w=$.makeArray(w);var n=v.minWidth;var s=v.minHeight;var u=v.maxWidth;var C=v.isSymmetric;var E=v.lockRatio;var Q=v.resizeCenteredElementsSymmetrically;var t=$.resolveAxis(v.axis);var K=(n!==undefined)?0-Math.ceil(n/(C?2:1)):-Infinity;var V=(s!==undefined)?0-Math.ceil(s/(C?2:1)):-Infinity;var M=(u!==undefined&&u!==Infinity)?Math.ceil(u/(C?2:1)):Infinity;var o=$.valueOrDefault(G.width,0);var x=$.valueOrDefault(G.height,0);if(t.north){x=0-x}if(t.west){o=0-o}o=Math.min(Math.max(K,o),M);x=Math.max(V,x);if(E&&t.horizontal&&t.vertical){o=x*E}if(o<K){o=K;x=K}if(o>M){o=M;x=M}var r=t.horizontal;var d=t.vertical;var A=r&&(t.east||C);var k=r&&(t.west||C);var z=d&&(t.north||C);var S=d&&(t.south||C);SelectionArea.beginUpdateBatch();LayoutManager.beginLayoutUpdateBatch();PropertiesManager.UpdateBatch.start();var j=[];var J=[];for(var U=0;U<w.length;U++){var Y=w[U];var P,X,g,H,a,T,c,p,l,h;if(Y._isInstance_){X=undefined;g=undefined;H=undefined;a=undefined;T=undefined;P=Y}else{X=Y.sizeAndPosition;g=Y.margin;H=Y.fillLayout;a=Y.horizontalLayout;T=Y.verticalLayout;P=Y.instance}X=$.extend({},X!==undefined?X:ElementsLayoutHelper.getInstnceActaulSizeAndPosition(P));var b=false;var f=false;var R=false;var F=false;var y=false;var D=false;if(P.hasFeature(Features.HasLayout)){H=H!==undefined?H:P.getPropertyValue("fillLayout");a=a!==undefined?a:P.getPropertyValue("horizontalLayout");T=T!==undefined?T:P.getPropertyValue("verticalLayout");l=H&&H.fillHorizontal;h=H&&H.fillVertical;b=h||T===LayoutManager.Layout.dockTop;f=h||T===LayoutManager.Layout.dockBottom;R=l||a===LayoutManager.Layout.dockLeft;F=l||a===LayoutManager.Layout.dockRight;y=!l&&a===LayoutManager.Layout.centered;D=!h&&T===LayoutManager.Layout.centered;c=h||T!==LayoutManager.Layout.normal;p=l||a!==LayoutManager.Layout.normal;if((r&&p)||(d&&c)){g=$.extend({},g!==undefined?g:P.getPropertyValue("margin"));var N=P.getParentContentSize();var B=g.right+g.left;if(B>N.width){g.right=(g.right/B)*N.width;g.left=(g.left/B)*N.width}var q=g.top+g.bottom;if(q>N.height){g.top=(g.top/q)*N.height;g.bottom=(g.bottom/q)*N.height}if(F&&A){g.right-=o;if(!l){X.width+=o}}if(R&&k){g.left-=o;if(!l){X.width+=o}}if(f&&S){g.bottom-=x;if(!h){X.height+=x}}if(b&&z){g.top-=x;if(!h){X.height+=x}}P.setPropertyValue("margin",g)}}var L=P.getParent();var W=HorizontalAlignment.Left;if(L&&L.hasFeature(Features.HasChildrenLayoutAnchor)){W=L.getPropertyValue("childrenAnchor")}if(k&&!R){X.width+=o*((Q&&y&&!C)?2:1)}if(A&&!F){X.width+=o*((Q&&y&&!C)?2:1)}if(!R&&!F&&!y){if(W===HorizontalAlignment.Right){if(A){J.push({instance:P,sizeAndPosition:X,margin:g,fillLayout:H,horizontalLayout:a,verticalLayout:T,mirrorLeft:true})}}else{if(k){J.push({instance:P,sizeAndPosition:X,margin:g,fillLayout:H,horizontalLayout:a,verticalLayout:T})}}}if(z&&!b){X.height+=x*(Q&&D&&!C?2:1);if(!f&&!D){j.push({instance:P,sizeAndPosition:X,margin:g,fillLayout:H,horizontalLayout:a,verticalLayout:T})}}if(S&&!f){X.height+=x*(Q&&D&&!C?2:1)}P.setPropertyValue("sizeAndPosition",X)}var O=0;var I=0;if(z){I=0-x}if(k||A){O=0-o}if(J.length>0){var m=ElementsLayoutHelper.moveInstances(J,{left:O});j=$.map(j,function(i){var Z=m[i.instance.id];return Z?Z:i})}if(j.length>0){ElementsLayoutHelper.moveInstances(j,{top:I})}PropertiesManager.UpdateBatch.finish();LayoutManager.endLayoutUpdateBatch();SelectionArea.endUpdateBatch()};this.getInstnceActaulSizeAndPosition=function(a){var c=a.getPropertyValue("sizeAndPosition");if(a.hasFeature(Features.DataListItem)){var b=a.getItemMainParent();if(b){return $.extend({top:0,left:0},a.getSize())}else{return c}}return c};this.getRelativeArea=function(b,a){if(b.isRelativePositioned()){return b.getRelativeToParentArea(a)}else{var g=ElementsLayoutHelper.getRelativeTopPosition(b);var f=ElementsLayoutHelper.getRelativeLeftPosition(b);var c=b.getSize();var d={top:g,left:f,bottom:g+c.height,right:f+c.width,center:{top:g+c.height/2,left:f+c.width/2,},height:c.height,width:c.width};return d}};this.getRelativeTopPosition=function(h){var i=$.extend({},h.getPropertyValue("sizeAndPosition"));var g;var c;var j=false;if(h.hasFeature(Features.HasLayout)){var d=$.extend({},h.getPropertyValue("margin"));var f=h.getPropertyValue("horizontalLayout");var a=h.getPropertyValue("verticalLayout");var b=h.getPropertyValue("fillLayout");if(b.fillVertical||a!==LayoutManager.Layout.normal){if(a===LayoutManager.Layout.dockBottom){g=h.parentInstance.getContentSize().height-d.bottom-h.getSize().height;j=true}else{if(a===LayoutManager.Layout.centered){g=h.parentInstance.getContentSize().height/2+d.top-h.getSize().height/2;j=true}else{if(b.fillVertical||a===LayoutManager.Layout.dockTop){g=d.top;j=true}}}}}if(!j){g=i.top}return g};this.getRelativeLeftPosition=function(i){var j=$.extend({},i.getPropertyValue("sizeAndPosition"));var h;var d;var k=false;var a=HorizontalAlignment.Left;var c=i.parentInstance;if(c&&c.hasFeature(Features.HasChildrenLayoutAnchor)){a=c.getPropertyValue("childrenAnchor")}if(i.hasFeature(Features.HasLayout)){var f=$.extend({},i.getPropertyValue("margin"));var g=i.getPropertyValue("horizontalLayout");var b=i.getPropertyValue("fillLayout");if(b.fillHorizontal||g!==LayoutManager.Layout.normal){if(g===LayoutManager.Layout.dockRight){d=i.parentInstance.getContentSize().width-f.right-i.getSize().width;k=true}else{if(g===LayoutManager.Layout.centered){d=i.parentInstance.getContentSize().width/2+f.left-i.getSize().width/2;k=true}else{if(b.fillHorizontal||g===LayoutManager.Layout.dockLeft){d=f.left;k=true}}}}}if(!k){d=j.left;if(a===HorizontalAlignment.Centered){d+=c.getContentSize().width/2}else{if(a===HorizontalAlignment.Right){d=c.getContentSize().width-d}}}return d};this.moveInstances=function(a,l,g,p){a=$.makeArray(a);l=$.extend({left:0,top:0},l);LayoutManager.beginLayoutUpdateBatch();PropertiesManager.UpdateBatch.start();var m={};for(var h=0;h<a.length;h++){var r=a[h];var n=undefined,o=undefined,f=undefined,k=undefined,b=undefined,c=undefined;var d=false;if(r._isInstance_){n=r}else{o=r.sizeAndPosition;f=r.margin;c=r.fillLayout;n=r.instance;k=r.horizontalLayout;b=r.verticalLayout;d=$.valueOrDefault(r.mirrorLeft,false)}o=$.extend({},o!==undefined?o:n.getPropertyValue("sizeAndPosition"));var j=true;var q=true;if(n.hasFeature(Features.HasLayout)){f=$.extend({},f!==undefined?f:n.getPropertyValue("margin"));k=k!==undefined?k:n.getPropertyValue("horizontalLayout");b=b!==undefined?b:n.getPropertyValue("verticalLayout");c=c!==undefined?c:n.getPropertyValue("fillLayout");if(c.fillHorizontal||k!==LayoutManager.Layout.normal){if(c.fillHorizontal||k===LayoutManager.Layout.dockRight){f.right-=l.left}if(c.fillHorizontal||k===LayoutManager.Layout.dockLeft||k===LayoutManager.Layout.centered){f.left+=l.left}j=false}if(c.fillVertical||b!==LayoutManager.Layout.normal){if(c.fillVertical||b===LayoutManager.Layout.dockBottom){f.bottom-=l.top}if(c.fillVertical||b===LayoutManager.Layout.dockTop||b===LayoutManager.Layout.centered){f.top+=l.top}q=false}if(!q||!j){n.setPropertyValue("margin",f,g)}}if(q){o.top+=l.top}if(j){o.left+=l.left*(d?-1:1)}if(q||j){n.setPropertyValue("sizeAndPosition",o,g)}m[n.id]={instance:n,sizeAndPosition:o,margin:f,fillLayout:c,horizontalLayout:k,verticalLayout:b}}PropertiesManager.UpdateBatch.finish();LayoutManager.endLayoutUpdateBatch();return m};this.alignTop=function(a){ElementsLayoutHelper.moveToOffset(a,function(b){return{top:$.minValue(b,function(c){return c.offset.top})}})};this.getHorizontalSpacingData=function(i,c){c=$.extend({shouldSort:true},c);var b=c.shouldSort;if(!i||i.length===1){return{maxSpacing:0,minSpacing:0,averageSpacing:0}}if(b){i=ElementsLayoutHelper.sortByLeftPosition(i)}var d=Infinity;var g=0;var a=0;var f=0;var h;$.each(i,function(m,j){if(m>0){var k=PositionManager.getElementArea(h,true);var l=PositionManager.getElementArea(j,true);var n=l.left-k.right;if(n>=0){if(n<d){d=n}if(n>g){g=n}a+=n;f++}}h=j});a=a/f;return{maxSpacing:g,minSpacing:d,averageSpacing:a}};this.sortByTopPosition=function(a){a=a.sort(function(d,c){var f=ElementsLayoutHelper.getInstancesArea(d);var g=ElementsLayoutHelper.getInstancesArea(c);if(f!==undefined&&g!==undefined){return f.top-g.top!==0?f.top-g.top:f.left-g.left}else{if(f!==undefined){return 1}else{if(g!==undefined){return -1}}}});return a};this.sortByLeftPosition=function(a){a=a.sort(function(d,c){var f=ElementsLayoutHelper.getInstancesArea(d);var g=ElementsLayoutHelper.getInstancesArea(c);if(f!==undefined&&g!==undefined){return f.left-g.left!==0?f.left-g.left:f.top-g.top}else{if(f!==undefined){return 1}else{if(g!==undefined){return -1}}}});return a}}();var ElementsStructureHelper=new function(){this.reattachToCurrentSection=function(c){var b=PageManager.getCurrentPage();$.each(c,function(h,f){var l=PageManager.getCurrentPage();var k=f.getPosition(true);if(!f.isType(ElementsTypes.PageContentElement)&&!f.hasFeature(Features.PageSection)&&f.parentInstance.elementType===ElementsTypes.page&&k){var j=PositionManager.getInstancesInOffset(k);var g=$.grep(j,function(i){return i.instance.hasFeature(Features.PageSection)});var d;if(!g[0]){$.each(l.childInstances,function(){if(this.hasFeature(Features.PageSection)){if($.areasIntersects(this.getArea(),f.getArea())){d=this;return false}}})}else{d=g[0].instance}if(d){ElementsStructureHelper.reattachInstances([f],d)}}})};this.reattachInstances=function(c,d,b){c=$.makeArray(c);c=$.grep(c,function(f){return f.getParent()!==d});ElementsLayoutHelper.withLayoutPreserving(c,function(){var f=[];$.each(c,function(h,g){if(!(g.parentInstance.isInTopLayer()&&d.isInTopLayer())){f.push(g)}g.setPropertyValue("isFixed",false)});ElementsLayoutHelper.clearInstancesLayout(f);ElementsManager.addElementToContainerElement(d,c)},b)};this.unwrap=function(d){if(!d.hasParent()){return[]}var c=d.getChildInstances();if(c.length>0){var b=d.getParent();ElementsStructureHelper.reattachInstances(c,b)}ElementsManager.removeInstances([d]);return c};this.changeInstanceType=function(b,c){OrderManager.beginReorderingBatch();PositionManager.VisibilityUpdateBatch.start();var d=ElementsManager.addInstance(c,b.parentInstance);ElementsStructureHelper.changeInstance(b,d);PositionManager.VisibilityUpdateBatch.finish();OrderManager.endReorderingBatch()};this.changeInstance=function(c,j){OperationsManager.beginAtomicBatch();if(MobileVersionViewManager.Flags.IsInMobileContext.isTrue()){MobileVersionViewManager.addInstanceToMobile(j)}var l=["dataLayoutOptions","dataLayout","fieldsTemplates","sizeAndPosition"];var i=c.isMasterPageElement.isTrue();var d=[];if(j.hasFeature(Features.DataList)){j.reArrangementDisabled.setValue(true,"changingInstance");if(j.hasFeature(Features.TemplatePagesList)){$.each(ElementsManager.getAllPageInstances(),function(o,n){if(n.elementType===ElementsTypes.Menu){var p=n.getPropertyValue("dataInfo").currentData;if(p.type===MenuItemTypes.NavigableInstance.name&&p.id===c.id){d.push(n)}}})}}LayoutManager.beginLayoutUpdateBatch();PropertiesManager.UpdateBatch.start();c.data.shouldNotMarkPropertiesAsCustom=true;$.each(c.properties,function(o,n){if(!PropertiesTypes[o].isStyleProperty&&$.grep(l,function(p){return o===p}).length===0){j.setPropertyValue(o,c.getPropertyNormalValue(o))}});c.data.shouldNotMarkPropertiesAsCustom=false;if(i){MasterPagesManager.setAsMasterPageRoots(j)}PropertiesManager.UpdateBatch.finish();LayoutManager.endLayoutUpdateBatch();var m=c.getConnections();var b=m.sourceConnections;var h=m.targetConnections;var k={};k[c.id]=j.id;b=ElementsManager.copyConnections(b,k);h=ElementsManager.copyConnections(h,k);ElementActivationManager.applyConnections(h);ElementActivationManager.applyConnections(b);var f=PropertiesManager.copyAffectedCustomProperties(c).copiedCustomStatesProperties;var g=PropertiesManager.copyAffectingCustomProperties(c,{filterFunction:function(p,o,n){if(p!==o){return true}return false}});delete f[c.id];f=$.replaceKeys(f,k);g=$.replaceKeys(g,k);PropertiesManager.addCustomStatesPropertiesValues(f);PropertiesManager.addCustomStatesPropertiesValues(g);if(MobileVersionViewManager.Flags.IsInMobileContext.isFalse()){ElementsLayoutHelper.moveToOffset(j,c.$element.offset())}$.each(d,function(o,n){n.getDataSource().connectToNavigatable(j)});if(MobileVersionViewManager.Flags.IsInMobileContext.isTrue()){RowsManager.removeInstancesFromContainer(c,{shouldRemoveFromViewPort:true});ElementsManager.removeInstances(c);j.setAsEditedInMode(true);j.toggleVisibilityInMode(true)}if(j.hasFeature(Features.DataList)){j.reArrangementDisabled.setValue(false,"changingInstance");j.reArrangeTheTemplates({keepItemSize:false})}OperationsManager.endAtomicBatch()};this.wrapInstances=function(g,f){var c=ElementsUtil.getCommonAncestors(g,false,false);if(c.length===0){return}var b=c[0];var d=TemplatesManager.addTemplateInstance({elementForCreation:{structures:[f]}},b);var h=d.instances[0];ElementsLayoutHelper.setInstanceArea(h,ElementsLayoutHelper.getInstancesArea(g));ElementsStructureHelper.reattachInstances(g,h);return h};this.groupInstances=function(f){if(!f||f.length<=1){return}OperationsManager.beginAtomicBatch(false,"Group");var c=f[0].getParent();if(!c){return}var b=TemplatesManager.addTemplateInstance({elementForCreation:{structures:[{type:"group",elementProperties:{sizeAndPosition:{left:0,top:0,width:0,height:0},backgroundColor:"transparent",borderWidth:$.convertValueToObject(0,["top","left","bottom","right"]),padding:$.convertValueToObject(0,["top","left","bottom","right"])}}]}},c);var d=b.instances[0];d.disableGroup("grouping");ElementsStructureHelper.reattachInstances(f,d);d.enableGroup("grouping");d.refreshGroupArea();OperationsManager.endAtomicBatch();return d};this.removeGroup=function(b){OperationsManager.beginAtomicBatch(false,"Remove Group");a(b.getChildInstances(),true);OperationsManager.endAtomicBatch()};this.removeFromGroup=function(b){OperationsManager.beginAtomicBatch(false,"Remove From Group");a(b,true);OperationsManager.endAtomicBatch()};this.releaseGroup=function(b){a(b.getChildInstances(),false)};function a(b,k){var n,g;var f={};for(g=0;g<b.length;g++){var o=b[g];var l=o.getParent();if(l&&l.elementType===ElementsTypes.group){var m=l.id;n=f[m];if(!n){n={instance:l,childInstances:[]};f[m]=n}n.childInstances.push(o)}}for(var c in f){n=f[c];var j=n.instance;var h=j.getParent();if(k){while(h.elementType===ElementsTypes.group){h=h.getParent()}}var d=h.elementType===ElementsTypes.group;j.startGroupUpdating();if(d){h.startGroupUpdating()}ElementsStructureHelper.reattachInstances(n.childInstances,h);if(d){h.finishGroupUpdating()}j.finishGroupUpdating()}}}();var DevicesNames={PC:"PC",Mobile:"Mobile"};var PropertiesManager=new (function(){var C=this;C.TransitionsTypes={transitionInEffect:"transitionInEffect",transitionOutEffect:"transitionOutEffect",transitionInDuration:"transitionInDuration",transitionOutDuration:"transitionOutDuration",directionIn:"directionIn",directionOut:"directionOut",transitionSlideInDirection:"transitionSlideInDirection",transitionSlideOutDirection:"transitionSlideOutDirection"};this.Events={PropertyValueChanged:SimpleEvent.create(),NamedPropertyValueChanged:SimpleEvent.createNamedEvents(),CmputedValueChanged:SimpleEvent.create(),CustomStatePropertyRemovedSimple:SimpleEvent.create(),CustomStatePropertyAddedSimple:SimpleEvent.create(),CustomStatePropertyChangedSimple:SimpleEvent.create(),TransitionEffectUpdated:SimpleEvent.create()};this.Flags={PropertiesAreCustom:ObservableFlag.create(false)};this.UpdateBatch=OperationsBatch.create({batchFinishCallback:function(){v()}});this.PropertiesChangesNotifyingBatch=OperationsBatch.create();var q=undefined;var z={};var d=false;var D={};var t={};var H=true;var B;var i={};var I={};var r;var G;var s={StateSet:0,StateAdded:1,StateRemoved:2};this.StateChangeTypes=s;this.setCanPerformTransition=function(K){H=K};this.initialize=function(){Global.Events.ElementRemoving.bind(function(L){var K=L.removedInstance;C.removeStateAffected(K);C.removeStateAffecting(K);PropertiesManager.clearInstanceGlobalState(K)});C.calculateTypesValues();r=[PropertiesTypes.backgroundColor.name,PropertiesTypes.borderColor.name,PropertiesTypes.fontColor.name,PropertiesTypes.backgroundOverlay.name,PropertiesTypes.iconColor.name,PropertiesTypes.borderWidth.name,PropertiesTypes.font.name,PropertiesTypes.fontSize.name,PropertiesTypes.roundness.name,PropertiesTypes.borderStyle.name,PropertiesTypes.elementOpacity.name,PropertiesTypes.shadow.name,PropertiesTypes.innerShadow.name,PropertiesTypes.glow.name,PropertiesTypes.innerGlow.name,PropertiesTypes.lineColor.name,PropertiesTypes.mapColor.name,PropertiesTypes.namedTextStyle.name,PropertiesTypes.lineHeight.name,PropertiesTypes.letterSpacing.name,PropertiesTypes.textStyle.name,PropertiesTypes.textDirection.name,PropertiesTypes.textShadow.name,PropertiesTypes.lineWidth.name,PropertiesTypes.lineStyle.name,PropertiesTypes.horizontalAlign.name];G=$.mapToDictionary(r,$.returnValue,$.returnValue)};this.getGlobalState=function(){return z};this.isEditorInState=function(){return d};this.isInState=function(K,L){return z[L]&&z[L][K.id]};this.getInstancesInCustomState=function(){return $.map(t,function(L,K){return ElementsManager.getInstanceByID(K)})};this.isInstanceInCustomState=function(K){return t[K.id]};this.getEditableStyleProperties=function(){return r};this.getEditableStylePropertiesMap=function(){return G};this.removeStateAffected=function(K,L){L=L?L:$.returnTrue;$.each(K.properties,function(M,P){for(var O in P.customStatesValues){var N=P.customStatesValues[O];$.each(N,function(S,Q){var R=ElementsManager.getInstanceByID(S);if(R&&L(R,K,O,M)){C.removeStateAffectedProperty(R,K,O,M)}})}})};this.removeStateAffecting=function(N){var K=false;for(var M in N.affectedProperties){var L=N.affectedProperties[M];$.each(L,function(S,P){var R=P.length;for(var O=0;O<R;O++){var Q=ElementsManager.getInstanceByID(S);if(Q){K=true;C.removeStateAffectedProperty(N,Q,M,P[0])}}})}};this.addGlobalState=function(N,L,M,K){if(M===undefined){M=s.StateAdded}f(N,L,M,K)};function f(P,N,L,K){if(typeof P!=="string"){P=P.name}var Q=PropertiesManager.getStateAffectedInstances(N,P);$.objectSet(z,[P,N.id],Q);d=true;for(var M=0;M<Q.length;M++){var O=Q[M];PropertiesManager.refreshState(O,L,undefined,K)}N.elementStateActivated.fire(P,P)}this.scalePropertyCustomStates=function(L,M,P,K){var O=L.properties[M].customStatesValues;if(L.data.scaleAnchorCustomStatesValues){var N=L.data.scaleAnchorCustomStatesValues[M]}else{var N=O}$.each(O,function(Q,R){if(ElementStates[Q]&&!ElementStates[Q].responsiveState){$.each(R,function(W,U){if(P){U.stateValue[P]=N[Q][W].stateValue[P]*K}else{U.stateValue=N[Q][W].stateValue*K}var V=PropertiesTypes[M];if(V.valueConverter!==undefined&&U.stateValue!==undefined&&U.stateValue!==null){var S=$.makeArray(V.valueConverter);for(var T=0;T<S.length;T++){U.stateValue=S[T](U.stateValue)}}})}})};this.setDefaultGlobalState=function(){var N=$.getKeys(t);var M=$.getKeys(D);$.merge(N,M);z={};d=false;t={};D={};C.setCanPerformTransition(false);for(var K=0;K<N.length;K++){var L=ElementsManager.getInstanceByID(N[K]);if(L){PropertiesManager.refreshState(ElementsManager.getInstanceByID(N[K]),s.StateSet,true)}}C.setCanPerformTransition(true)};this.setCustomGlobalState=function(L,K){PropertiesManager.setDefaultGlobalState();f(L,K,s.StateSet)};this.removeGlobalState=function(M,L,K){x(M,L,s.StateRemoved)};this.clearInstanceGlobalState=function(K){for(var L in z){x(L,K,s.StateSet)}};function x(O,M,K){if(typeof O!=="string"){O=O.name}var P=PropertiesManager.getStateAffectedInstances(M,O);if(z[O]){delete z[O][M.id];if($.isEmptyObject(z[O])){delete z[O]}}if(P!==undefined){for(var L=0;L<P.length;L++){var N=P[L];PropertiesManager.refreshState(N,K)}}if($.isEmptyObject(z)){d=false}M.elementStateRemoved.fire(O,O)}this.inStateEditingMode=function(){return q!==undefined};this.getEditedState=function(){return q};this.startStateEditingMode=function(K){q={type:K.StateMode};if(K.sourceInstance){q.source=K.sourceInstance.id}};this.endStateEditingMode=function(){q=undefined};this.createProperties=function(M,N,P){if(P===undefined){P={}}if(N===undefined){return}var R={};for(var O in N){var Q=N[O];var T=P[O];var K=Q.valueConverter;if(K&&T!==undefined&&T!==null){if($.isArray(K)){for(var L=0;L<K.length;L++){T=K[L](T)}}else{T=K(T)}}var S={value:T,customStatesValues:{},descriptor:Q,transitionsStack:[]};n(M,S,S.value);R[O]=S}return R};this.getDefaultValues=function(K){return $.map(K,function(L){var M={};$.each(L.properties,function(N,O){if(O.defaultValue){M[N]=$.extend(M[N],{value:O.defaultValue()})}});if(L.defaultProperties){$.each(L.defaultProperties,function(O,N){M[O]=$.extend(M[O],{value:N()})})}return M})};this.calculateTypesValues=function(){var K={};$.each(ElementsTypes,function(N,L){var Q={};var M=C.getDefaultValues(L.getElementDefinitions());for(var O=0;O<M.length;O++){var P=M[O];$.each(P,function(S,R){Q[S]=R})}K[N]=Q});B=K};this.getTypesDefaultValues=function(){return B};this.refreshState=function(N,L,M,K){if(!N){return}if(!PositionManager.isElementVisible(N)&&N!==PageManager.getCoordinator()&&N.getPageId()!==PageManager.getCurrentPageId()){$.each(N.properties,function(P,Q){if(Q.descriptor.shouldRefreshIfNotVisible){PropertiesManager.refreshProperty(N,Q,L,M,K)}});if(M){c(N)}if(!N.visibilityChangedEvent.hasNameBinding("refreshState")){var O=N.visibilityChangedEvent.bind(function(){O.unbind();M=M?M:(ViewManager.isDesignMode()?true:false);o(N,L,M,K)},"refreshState");N.data.propertiesManagerRefreshStateVisibilityChangedEvent=O}}else{if(N.visibilityChangedEvent.hasNameBinding("refreshState")){N.data.propertiesManagerRefreshStateVisibilityChangedEvent.unbind()}o(N,L,M,K)}};function c(K){$.each(K.properties,function(L,M){$.each(K.properties,function(N,O){if(O&&(O.customValueMarked)){if(O.customValueMarked){O.customValueMarked=undefined;O.customValue=undefined}}})})}function o(N,L,M,K){N.propertiesRefreshingState=true;$.each(N.properties,function(O,P){PropertiesManager.refreshProperty(N,P,L,M,K)});N.propertiesRefreshingState=false}this.refreshProperty=function(N,O,L,M,K){if(O&&(O.descriptor.isStateProperty()||(M&&O.customValueMarked))){if(M&&O.customValueMarked){O.customValueMarked=undefined;O.customValue=undefined}F(N,O,true,L)}};this.getStateTransitionEffect=function(M,L,K){if(q){var N=l(M,L);return $.objectGet(N.customStatesValues,[q.type.name,q.source,K])}};this.setStateTransitionEffect=function(O,L,K,N,R){var Q=R?R:q;if(Q){var P=l(O,L);var M=$.objectGet(P.customStatesValues,[Q.type.name,Q.source,K]);$.objectSet(P.customStatesValues,[Q.type.name,Q.source,K],N);PropertiesManager.Events.TransitionEffectUpdated.fire(PropertiesManager,{instance:O,propertyName:L,typeName:Q.type.name,sourceId:Q.source,transitionName:K,value:N,oldValue:M})}};this.getValue=function(K,M,L){if(K.isCalculatedProperty(M)){return K.getCalculatedPropertyValue(M,L)}else{var N=l(K,M);if(N===undefined){return undefined}if(L){return N.rawComputedValue}else{return N.computedValue}}};this.resetCustomStateAffecting=function(L,M){var K=PropertiesManager.getAffectedInstancesByState(L,M.name);$.each(K,function(N,O){PropertiesManager.resetCustomState(O,{type:M,source:L.id})})};this.resetCustomState=function(K,M,O){if(M===undefined){M=q}if(!O){O=$.returnTrue}if(M!==undefined){for(var L in K.properties){var N=K.properties[L];if(N.descriptor.isStateProperty()&&O(L)){C.setValueInCustomState(K,N,M,undefined)}}}};this.resetCustomStateProperty=function(K,M,L){if(M===undefined){M=q}if(M!==undefined){var N=K.properties[L];if(N&&N.descriptor.isStateProperty()){C.setValueInCustomState(K,N,M,undefined)}}};this.invalidateProperty=function(K,L,N,M,O){j(K,K.properties[L],N,M,O)};this.invalidateElement=function(K){var L=[];LayoutManager.beginLayoutUpdateBatch();$.each(K.properties,function(M,N){j(K,N)});LayoutManager.endLayoutUpdateBatch()};this.resetInstanceStyleProperties=function(K){var N=K.getDescendingInstances(true);var M=PropertiesManager.getEditableStyleProperties();var L=[];LayoutManager.beginLayoutUpdateBatch();$.each(M,function(P,O){if(K.properties[O]){j(K,K.properties[O])}});LayoutManager.endLayoutUpdateBatch()};function j(K,N,M,L,O){p(K,N,L,M,O)}this.recomputePropertyValue=function(K,L,M){F(K,K.properties[L],M)};this.beginUpdate=function(K,L){};this.endUpdate=function(K,L){};this.copyAffectingCustomProperties=function(R,T){T=$.extend({filterFunction:$.returnTrue},T);var N={};for(var O in R.properties){var Q=R.properties[O];var L=Q.customStatesValues;if(L){for(var S in L){var P=L[S];for(var K in P){var M=P[K];if(M&&T.filterFunction(R.id,K,S)){if(PropertiesTypes[O].preSaveProcessing){M.stateValue=PropertiesTypes[O].preSaveProcessing(M.stateValue)}$.objectSet(N,[R.id,O,S,K],M)}}}}}return N};this.copyAffectedCustomProperties=function(S,W){W=$.extend({propertiesFilter:undefined,saveToServer:undefined},W);var O={};var Q={};for(var U in S.affectedProperties){var K=S.affectedProperties[U];for(var R in K){if(!Q[R]){Q[R]={}}Q[R][U]={};var V=ElementsManager.getInstanceByID(R);if(!V){delete S.affectedProperties[U][R];continue}if(O[R]===undefined){O[R]={}}var N=K[R];for(var M=0;M<N.length;M++){var P=N[M];var T=V.properties[P];if((W.propertiesFilter!==undefined&&!W.propertiesFilter(T))||!T.customStatesValues[U]){continue}var L=$.extend(true,{},T.customStatesValues[U][S.id]);if(O[R][P]===undefined){O[R][P]={}}if(O[R][P][U]===undefined){O[R][P][U]={}}if(PropertiesTypes[P].preSaveProcessing){L.stateValue=PropertiesTypes[P].preSaveProcessing(L.stateValue)}O[R][P][U][S.id]=L;Q[R][U][P]=P}}}return{copiedCustomStatesProperties:O,statesToPropertiesCopied:Q}};this.getPropertiesValuesInState=function(L,M){var K={};$.each(L,function(N,O){if(M===undefined||!O.customStatesValues[M]){K[N]=O.value}else{K[N]=$.extend({},O.customStatesValues[M])}});return K};this.getStyleProperties=function(K){return C.getProperties(K,function(L){return L.descriptor.isStyleProperty})};this.getStateProperties=function(K){return C.getProperties(K,function(L){return L.descriptor.isStateProperty()})};this.getProperties=function(K,L){if(L===undefined){return K.properties}var M={};$.each(K.properties,function(N,O){if(L(O)){M[N]=O}});return M};this.clonePropertiesValues=function(M,L){L=$.extend({forSaving:false,propertiesFilter:undefined},L);var K={};$.each(M.properties,function(N,P){if(L.propertiesFilter!==undefined&&!L.propertiesFilter(P)){return true}var O=P.value;if($.isPlainObject(O)){K[N]=$.extend(true,{},O)}else{if($.isArray(O)){K[N]=O.clone()}else{K[N]=O}}if(P.descriptor.preSaveProcessing){K[N]=P.descriptor.preSaveProcessing(K[N])}});return K};this.updatePropertiesValues=function(L,K){var O={};for(var M in K){var N=L.getPropertyValue(M);if(b(PropertiesTypes[M],N,K[M])){if($.isPlainObject(K[M])){O[M]=$.extend({},N,K[M])}else{O[M]=K[M]}}}C.setPropertiesValues(L,O)};this.notifyCalculatedPropertyChange=function(K,L){if(K.isCalculatedProperty(L)){m({instance:K,hasThemeBinding:false,propertyName:L,propertyDescriptor:undefined,newValue:K.getPropertyValue(L),oldValue:undefined,isCalculated:true})}};this.setPropertiesValues=function(Q,S,K,R){var M=Q.properties;var P=false;if($.hasMoreThanOneKey(S)){P=true;LayoutManager.beginLayoutUpdateBatch();PropertiesManager.UpdateBatch.start();PropertiesManager.beginUpdate(Q,"setPropertiesValues")}for(var N in S){var L=S[N];var O=Q.isCalculatedProperty(N);if(O){Q.setCalculatedPropertyValue(N,L,K,R);m({instance:Q,hasThemeBinding:false,propertyName:N,propertyDescriptor:undefined,newValue:L,oldValue:undefined,isCalculated:true})}else{J(Q,M[N],L,K,R)}}if(P){PropertiesManager.endUpdate(Q,"setPropertiesValues");PropertiesManager.UpdateBatch.finish();LayoutManager.endLayoutUpdateBatch()}};function b(K,M,L){if(M===undefined){return L!==undefined}else{if(K.comparer){return !K.comparer(L,M)}else{return !$.defaultEqualityComparer(L,M)}}}this.propertyValueHasChanged=b;this.propertyValueHasChanged=function(K,M,L){return b(PropertiesTypes[K],M,L)};this.addCustomStatesPropertiesValues=function(L){for(var K in L){ElementsManager.performOnInstancesCreated(K,function(P){var O=P[0];var N=L[O];var M=ElementsManager.getInstanceByID(O);$.each(N,function(Q,U){if(M.properties[Q]){$.extend(true,M.properties[Q].customStatesValues,U);var T=M.properties[Q];if(T.descriptor.isStateProperty()){g(M,T);F(M,T);for(var S in U){var R=U[S];$.each(R,function(V,X){var W=$.objectGet(z,[S,V]);if(W){W.push(M)}ElementsManager.performOnInstancesInitialization(V,function(Y){var Z=ElementsManager.getInstanceByID(Y);if(Z){w(Z,M,S,Q);if(ViewManager.isViewMode()){Z.refreshCursor()}}})})}}}})})}};this.isStyleAffecting=function(K,M){var N=false;if(M!==undefined){if(typeof M!=="string"){M=M.name}N=!$.isEmptyObject(K.affectedProperties[M])}else{for(var L in K.affectedProperties){if(!K.affectedProperties.hasOwnProperty(L)){continue}if(!$.isEmptyObject(K.affectedProperties[L])){N=true}}}if(!N&&K.isType(ElementsTypes.skinHierarchyBox)){var O=K.getStyleStateAffectedInstances(M);N=O.length>0}return N};this.isStyleAffectingInPage=function(K,O,N){var L=false;if(N!==undefined){if(typeof N!=="string"){N=N.name}if(K.affectedProperties[N]){$.each(K.affectedProperties[N],function(R,Q){var P=ElementsManager.getInstanceByID(R);if(P&&P.getPageId()===O.id){L=true;return false}})}}else{for(var M in K.affectedProperties){if(!K.affectedProperties.hasOwnProperty(M)){continue}if(!$.isEmptyObject(K.affectedProperties[M])){$.each(K.affectedProperties[M],function(R,Q){var P=ElementsManager.getInstanceByID(R);if(P&&P.getPageId()===O.id){L=true;return false}})}if(L){break}}}return L};this.getAffectedPropertiesDictionary=function(K,P,O){if(typeof O!=="string"){O=O.name}var N={};var L=P.affectedProperties[O];if(L!==undefined){var Q=L[K.id];if(Q!==undefined){for(var M=0;M<Q.length;M++){N[K.properties[Q[M]].descriptor.name]=K.properties[Q[M]].descriptor}}}return N};this.getStateAffectedInstances=function(P,N){var O=[];var M=P.affectedProperties[N];if(M!==undefined){for(var L in M){var K=ElementsManager.getInstanceByID(L);if(K){O.push(K)}}}if(P.isType(ElementsTypes.skinHierarchyBox)){var Q=P.getStyleStateAffectedInstances(N);O=$.merge(Q,O)}return O};this.getAffectingInstancesData=function(N){var L={};for(var K in N.properties){var O=N.properties[K];if(O.descriptor.isStateProperty()){for(var P in O.customStatesValues){for(var M in O.customStatesValues[P]){if(O.customStatesValues[P][M]){if(!L[M]){L[M]={}}L[M][K]={stateName:P,propertyName:K}}}}}}return L};this.isAffectedInOtherStates=function(P,N,L){var M=false;if(L.isComplex){return true}for(var O in P.affectedProperties){var K=P.affectedProperties[O];if(O!==L.name){if(K&&K[N.id]){M=true;return false}}}return M};this.isAffectedInState=function(N,L,M){var K=N.affectedProperties[M];if(K&&K[L.id]){return true}return false};this.getAffectedInstancesByState=function(M,L){var O={};var K=M.affectedProperties[L];for(var N in K){$.each(K[N],function(Q,R){if(R){var P=ElementsManager.getInstanceByID(N);if(P&&!O[N]){O[N]=P}}})}return O};this.getAffectedInstancesData=function(M){var O={};for(var L in M.affectedProperties){var K=M.affectedProperties[L];for(var N in K){$.each(K[N],function(P,Q){if(Q){if(!O[N]){O[N]={}}O[N][Q]={stateName:L,propertyName:Q}}})}}return O};this.removeStateAffectedProperty=function(M,T,S,O){var R=M.affectedProperties[S];if(R!==undefined){var N=R[T.id];if(N!==undefined){var Q=T.properties[O];var L=T.properties[O].customStatesValues;if($.isEmptyObject(L)||!L[S]){return}var P=L[S][M.id];var K=k(Q,S,M.id,T);if(K){K=K.stateValue}if(L[S]&&L[S][M.id]){$.each(L[S][M.id],function(W,V){var U=PropertiesManager.TransitionsTypes[W];if(U){PropertiesManager.Events.TransitionEffectUpdated.fire(PropertiesManager,{instance:T,propertyName:O,typeName:S,sourceId:M.id,transitionName:U,value:undefined,oldValue:V})}});delete L[S][M.id]}if($.isEmptyObject(L[S])){delete L[S]}N.removeItem(O);if(N.length==0){delete R[T.id];if($.isEmptyObject(R)){delete M.affectedProperties[S]}if($.getKeys(M.affectedProperties).length===0){M.hasStates.setFalse()}}PropertiesManager.Events.CustomStatePropertyRemovedSimple.fire(PropertiesManager,{affectedInstance:T,affectingInstance:M,propertyName:O,oldValue:K,stateName:S,sourceInstance:M});T.customStatePropertyRemovedEvent.fire(T,{propertyName:O,oldValue:K});M.affectingOnPropertyRemoved.fire();M.influenceChanged.fire(M)}}};this.copyStateAffectedProperty=function(M,S,R,K,O){var Q=M.affectedProperties[R];if(Q!==undefined){var N=Q[S.id];if(N!==undefined){var L=S.properties[O].customStatesValues;if(L[R]&&L[R][M.id]){if(!L[K]){L[K]={};L[K][M.id]={}}$.extend(true,L[K][M.id],L[R][M.id]);var P=S.properties[O];g(S,P);F(S,P);w(M,S,K,O)}}}};function w(Q,O,P,L){var N=Q.affectedProperties[P];if(N===undefined){if($.getKeys(Q.affectedProperties).length===0){Q.hasStates.setTrue()}N={};Q.affectedProperties[P]=N}var M=N[O.id];if(M===undefined){M=[];N[O.id]=M}var K=M.length>0;if($.inArray(L,M)<0){M.push(L)}PropertiesManager.Events.CustomStatePropertyAddedSimple.fire(PropertiesManager,{propertyName:L,stateName:P,affectedInstance:O,affectingInstance:Q,sourceInstance:Q});O.customStatePropertyAddedEvent.fire(O,{propertyName:L});Q.affectingOnPropertyAdded.fire();Q.influenceChanged.fire(O)}this.setValueInCustomState=function(T,S,L,R){if(!L||!L.type||!S){return}var M=ElementsManager.getInstanceByID(L.source);if(!M){return}if(typeof S==="string"){S=l(T,S)}var N=S.descriptor.name;var P=false;var U=k(S,L.type.name,L.source,T);if((U===undefined&&R!==undefined)||(U!==undefined&&R===undefined)){P=true}if(R!==undefined){if(S.customStatesValues[L.type.name]===undefined){S.customStatesValues[L.type.name]={}}if(S.customStatesValues[L.type.name][L.source]===undefined){S.customStatesValues[L.type.name][L.source]={}}}if(R!==undefined&&S.descriptor.customStateValueSetter){var O=h(S,T);R=S.descriptor.customStateValueSetter(O,R,T,L.type.name)}var Q=$.objectGet(S,["customStatesValues",L.type.name,L.source]);if(R!==undefined){if(Q!==undefined){$.extend(S.customStatesValues[L.type.name][L.source],{stateValue:R})}else{$.objectSet(S,["customStatesValues",L.type.name,L.source],{stateValue:R})}}else{if(U!==undefined&&Q!==undefined){$.each(Q,function(X,W){var V=PropertiesManager.TransitionsTypes[X];if(V){PropertiesManager.Events.TransitionEffectUpdated.fire(PropertiesManager,{instance:T,propertyName:N,typeName:L.type.name,sourceId:M.id,transitionName:V,value:undefined,oldValue:W})}})}}var K=U?U.stateValue:undefined;if(P){if(R===undefined){C.removeStateAffectedProperty(M,T,L.type.name,S.descriptor.name,K)}else{w(M,T,L.type.name,S.descriptor.name)}}else{PropertiesManager.Events.CustomStatePropertyChangedSimple.fire(PropertiesManager,{affectedInstance:T,propertyName:S.descriptor.name,oldStateValue:K})}g(T,S);F(T,S)};this.refreshPrioritisedCustomStates=g;function J(L,Q,P,O,R){if(Q){var M=Q.descriptor.name;if(Q.descriptor.valueConverter!==undefined&&P!==undefined&&P!==null){var K=$.makeArray(Q.descriptor.valueConverter);for(var N=0;N<K.length;N++){P=K[N](P)}}if(Q.descriptor.isStateProperty()&&q!==undefined){C.setValueInCustomState(L,Q,q,P)}else{if(C.shouldMarkPropertyAsCustom(L,M)){Q.customValue=P;Q.customValueMarked=true;D[L.id]=true}else{Q.customValue=undefined;Q.customValueMarked=false;Q.value=P}F(L,Q,O,undefined,R)}}}this.updateComputedValue=function(K,M,L,Q,O,P){var N=M.computedValue;n(function(){return K.getPageThemes()},M,L,K);if(O||b(M.descriptor,N,M.computedValue)){p(K,M,N,Q,P)}};this.shouldMarkPropertyAsCustom=function(K,L){return !K.data.shouldNotMarkPropertiesAsCustom&&!K.isContent()&&(!Global.IsDesigner||EditorManager.Flags.PcEditing.isFalse())&&!PropertiesTypes[L].isNotForCustomProperty};function F(V,U,T,P,W){if(T===undefined){T=false}var R=U.descriptor.name;var K=A(V,R,z,P);var S=K.computedStateData;if(K.isCustomState){$.objectSet(t,[V.id,R],true)}else{var X=V.id;var O=$.objectGet(t,[X,R]);if(O){var N=t[X];delete N[R];if($.isEmptyObject(N)){delete t[X]}}}var M=S.stateValue;var Q=U.computedValue;n(function(){return V.getPageThemes()},U,M,V);if(b(U.descriptor,Q,U.computedValue)){var L=undefined;if(T){if(typeof T==="object"){L=T}else{if(P===s.StateAdded){if(S.transitionInDuration){L={transitionEffect:S.transitionInEffect,transitionDuration:S.transitionInDuration,transitionDirection:S.directionIn,transitionSlideDirection:S.transitionSlideInDirection}}if(S.transitionOutDuration){U.transitionsStack.push({transitionEffect:S.transitionOutEffect,transitionDuration:S.transitionOutDuration,transitionDirection:S.directionOut,transitionSlideDirection:S.transitionSlideOutDirection})}else{U.transitionsStack.push(undefined)}}else{if(P===s.StateRemoved){L=U.transitionsStack.pop()}}}}p(V,U,Q,L,W)}}function n(P,O,N,K){O.rawComputedValue=N;O.hasThemeBinding=false;var L=N;if(O.descriptor.supportsThemeBinding){if(N&&typeof N==="object"&&!(N instanceof Array)){if(N.themeBinding===true){L=ThemesManager.evaluateThemeBinding(P,N);O.hasThemeBinding=true}else{L={};for(var Q in N){var M=N[Q];if(M&&typeof M==="object"&&M.themeBinding===true){L[Q]=ThemesManager.evaluateThemeBinding(P,M);O.hasThemeBinding=true}else{L[Q]=M}}}}}O.computedValue=L}function p(T,S,N,L,U){var P=S.descriptor;var O=P.name;var R=S.computedValue;var Q={instance:T,hasThemeBinding:S.hasThemeBinding,propertyName:O,propertyDescriptor:S.descriptor,newValue:R,rawValue:S.rawComputedValue,oldValue:N};PropertiesManager.Events.CmputedValueChanged.fire(T,Q);if(PropertiesManager.UpdateBatch.isActive()&&O!=="isVisible"&&O!=="isVisibleInMode"&&O!=="name"){var W=T.id;var K=i[O];if(!K){K={};i[O]=K}var V=I[W];if(!V){V={};I[W]=V}if(!K[W]){var M={instance:T,property:S,oldValue:N,transitionData:L,callback:U};K[W]=M;if(O!=="order"){V[O]=M}}}else{a(T,S,N,L,undefined,U)}}function v(){PropertiesManager.PropertiesChangesNotifyingBatch.start();var Q=i;var L=I;i={};I={};var O=$.getKeys(Q);O.orderByDesc(function(U){return PropertiesTypes[U].priority});for(var M=0;M<O.length;M++){var P=O[M];var K=Q[P];for(var T in K){var N=K[T];if(!N.instance.isDeleted){N.value=a(N.instance,N.property,N.oldValue,N.transitionData,false,N.callback)}}}for(var T in L){var S=L[T];var R=ElementsManager.getInstanceByID(T);if(R){R.propertiesChanged.fire(C,S);R.onPropertiesChanged(S)}}PropertiesManager.PropertiesChangesNotifyingBatch.finish()}function a(S,R,K,M,N,T){if(S.isDeleted){return null}if(N===undefined){N=true}if(!H){M=undefined}var Q=R.computedValue;var P=R.descriptor;var O=P.name;OperationsManager.beginAtomicBatch();P.onChange.call(S,S.$element,Q,M,K,T);OperationsManager.endAtomicBatch();S.onPropertyChange(P,Q,K,M);m({instance:S,hasThemeBinding:R.hasThemeBinding,propertyName:O,propertyDescriptor:R.descriptor,newValue:Q,rawValue:R.rawComputedValue,oldValue:K});if(N){var L={};L[O]={property:R,oldValue:K,value:Q,transitionData:M};S.propertiesChanged.fire(C,L);if(O!=="order"){S.onPropertiesChanged(L)}}return Q}function m(M){var K=M.instance;var L=M.propertyName;PropertiesManager.Events.PropertyValueChanged.fire(K,M);PropertiesManager.Events.NamedPropertyValueChanged.fire(L,K,M);K.propertyChangedEvent.fire(L,K,M.newValue,M.oldValue);K.propertyChangedEventSimple.fire(K,L,M.newValue,M.oldValue)}this.getPropertiesValues=function(L,M){var K={};$.each(L.properties,function(N,O){if(M===undefined||M(O)){K[N]=O.computedValue}});return K};this.getPropertiesNormalValues=function(L,M){var K={};$.each(L.properties,function(N,O){if(M===undefined||M(O)){K[N]=O.value}});return K};this.getPropertyValueInCustomState=k;function k(N,M,L,K){return E(N,M,L,K)}function E(R,T,L,S){var P=ElementsManager.getInstanceByID(L);var O=R.descriptor.name;var Q=h(R,S);var M=$.objectGet(R.customStatesValues,[T,L]);if(S.hasFeature(Features.HasPropertiesBinding)&&S.isPropertyBoundToStyleField(O)&&(P===S.getSkinInstanceBox()||P===PageManager.getCoordinator())&&SkinsManager.shouldReferToSkinValue()){M=S.getStyleFieldData(O,{stateName:T,sourceId:L,defaultValue:Q,customStateData:M});M=$.extend({stateValue:M.value},M.animation)}if(M===undefined){return undefined}var K=$.extend({},M);if(!S.shouldReferToStateValue(R.descriptor.name,T,L)){K.stateValue=Q}else{if(R.descriptor.customStateValueGetter&&ElementStates[T]){var N=R.descriptor.customStateValueGetter(Q,K.stateValue,S,T,L);K.stateValue=N}}return K}function A(S,N,K,M){var R=S.properties[N];if(q&&(!K||$.getKeys(K).length===1)){var O=k(R,q.type.name,q.source,S);if(O&&!$.isEmptyObject(O)){return{isCustomState:true,computedStateData:O}}}else{var U=R.prioritisedCustomStates;if(R.descriptor.isStateProperty()&&U&&U.length>0){for(var L=0;L<U.length;L++){var T=U[L];if($.objectGet(K,[T.stateName,T.affectingInstanceID])&&S.shouldReferToStateValue(R.descriptor.name,T.stateName,T.affectingInstanceID)){var P=E(R,T.stateName,T.affectingInstanceID,S);if(P){return{isCustomState:true,computedStateData:P}}}}}}var Q=h(R,S);return{isCustomState:false,computedStateData:{stateValue:Q}}}function h(O,K){var N=O.descriptor.name;var M=y(O);if(K.hasFeature(Features.HasPropertiesBinding)&&K.isPropertyBoundToStyleField(N)&&SkinsManager.shouldReferToSkinValue()){var L=K.getStyleFieldData(N,{defaultValue:M});return L.value}if(O.descriptor.isBoundToObservableWithValue(K)){return O.bindingValue}return M}function y(L){var K=L.value;if(L.customValueMarked){K=L.customValue}return K}function u(K,L){return(K.isInDesignMode()&&ViewManager.isDesignMode()&&ModeManager.getCurrentMode()===Modes.NormalMode&&(SelectionManager.isInstanceSelected(K)||L.descriptor.disableInDesign))}function l(K,L){return K.properties[L]}function g(K,R){var M=R;if(typeof R==="string"){R=K.properties[R]}else{M=R.descriptor.name}var L=[];var O=K.id;if(K.isPropertyBoundToStyleField&&K.isPropertyBoundToStyleField(M)){L=K.getPrioritizedStates(M)}for(var Q in R.customStatesValues){var P=R.customStatesValues[Q];for(var N in P){L.push({stateName:Q,affectingInstanceID:N})}}R.prioritisedCustomStates=L.orderByDesc(function(T){var S=T.affectingInstanceID===O?1:0;if(T.stateName===MobileVersionViewManager.MobileStateName&&R.descriptor.name==="sizeAndPosition"){S=2}if(T.styleFieldState){S+=0.1}var U=1;if(ElementStates[T.stateName]){U=ElementStates[T.stateName].priority}return[S,U]},$.arrayDefaultComparer)}})();(function(){ElementInstance.addInstancePrototypeExtension(function(a){return{customStatePropertyAddedEvent:SimpleEvent.create(a),customStatePropertyRemovedEvent:SimpleEvent.create(a),affectingOnPropertyAdded:SimpleEvent.create(a),affectingOnPropertyRemoved:SimpleEvent.create(a),InstancePropertiesInitialized:SimpleEvent.create(a),canBeUpdated:ObservableFlag.createConditionalPositive(true)}})})();var UrlManager=new (function(){var d=$.makeDictionaryFromKeys(["$","&","+",",",":",";","=","@","{","}","|","^","~","[","]","`","#"],true);var h=$.makeDictionaryFromKeys(["<",">","/","%","?","*","\\"],true);var g=this;var f;this.Events={UrlChangedEvent:SimpleEvent.create()};this.Flags={inUrlChange:ObservableFlag.create(false)};this.getFullHtmlUrl=function(i){return AjaxNavigation.getFullHtmlUrl(i)};this.isPageNameLegal=function(j){if(!j){return true}for(var l=0;l<j.length;l++){var k=j.charAt(l);if(h[k]){return false}}return true};this.getEncodedUrl=function(k){var m=new StringBuilder();for(var l=0;l<k.length;l++){var j=k.charAt(l);if(d[j]){j=encodeURIComponent(j)}m.append(j)}return m.toString()};this.getPageIdByFragment=function(){var i=AjaxNavigation.getFragment();return PageManager.getPageIdByFragmentValue(i,f)};this.getFragment=function(){return AjaxNavigation.getFragment()};this.getFragmentParts=function(j){var i=this.getFragment();return i?i.split($.valueOrDefault(j,"/")):[]};this.initialize=function(j){f=$.valueOrDefault(j,PageManager.getMainPageId());PageManager.Events.PageChanging.bind(a);PageManager.Events.PageChanged.bind(c);Global.Events.FinishGroupInitialization.bind(function(){var k=PageManager.getPageIdByFragmentValue(AjaxNavigation.getFragment(),f);b(k)});var i=Global.IsDesigner||PageData.IsSitePreview||PageData.IsTemplate;AjaxNavigation.initialize({usePushState:i?false:SiteManager.AjaxNavigationFlag.isTrue(),useHash:i,useHashFallbackAsFragment:true,fragmentChangedCallback:function(){UrlManager.Events.UrlChangedEvent.fire(UrlManager,AjaxNavigation.getFragment())},loadFragmentCallback:function(l){var k=PageManager.getPageIdByFragmentValue(l);b(k)}})};this.navigate=function(i){return AjaxNavigation.navigate(i)};function b(i){var k=PageManager.AllPagesInformation.getItem(i);if(!ListsManager.isListPage(k)){j(i)}else{ListsManager.handleListPageLoading(k,function(){j(i)},function(l){j(l)})}function j(l){UrlManager.Flags.inUrlChange.setTrue();PageManager.switchPage(l,{callback:function(){UrlManager.Flags.inUrlChange.setFalse()}})}}function a(i,k){if(UrlManager.Flags.inUrlChange.isFalse()){var j=PageManager.getPageFragmentValue(k);AjaxNavigation.navigate(j,{disableLoading:true})}}function c(){if(!Global.IsDesigner&&AjaxNavigation.isPushState()){if(ga){var i=PageManager.getCurrentPage();ga("send","pageview",UrlManager.getFragment())}}}})();var ConnectionManager=new (function(){this.hasTargetConnections=function(a){return !$.isEmptyObject(a.getInitializedTargetConnections())};this.hasSourceConnections=function(a){return !$.isEmptyObject(a.getInitializedSourceConnections())};this.hasActiveConnectionTo=function(a,c){var b=false;if(ConnectionManager.hasTargetConnections(a)){var d=a.getInitializedTargetConnections();$.each(d,function(g,f){if(f.targetElementID===c.id){b=true;return false}})}return b};this.hasTargetConnectionsForTriggers=function(a){var d,c,b;var g=$.restArguments(arguments,1);var h=a.getInitializedTargetConnections();for(d=0;d<g.length;d++){b=g[d];if(typeof(b)!=="string"){g[d]=b.name}}var f=false;if(h){$.each(h,function(j,i){for(c=0;c<g.length;c++){b=g[c];if(i.options.triggerName===b){f=true;return false}}})}return f};this.hasTargetConnectionsInPagesForTriggers=function(a,g){var d,c,b;var f=$.restArguments(arguments,2);var k=a.getInitializedTargetConnections();for(d=0;d<f.length;d++){b=f[d];if(typeof(b)!=="string"){f[d]=b.name}}var h=false;$.each(k,function(j,i){for(c=0;c<f.length;c++){b=f[c];if(i.options.triggerName===b){h=true;return false}}});return h}})();var PageManager=new (function(){var b=this;var G=PoolingController.create();var o;var r;var t;var z;var l;var s;var M;var k;var w;var c={};var D={};var B={};var K;this.Events={PageLoaded:SimpleEvent.create(),PageChanging:SimpleEvent.create(),InPageChanging:SimpleEvent.create(),PageChanged:SimpleEvent.create(),AfterPageChanged:SimpleEvent.create(),BeforePageChanged:SimpleEvent.create(),PageDeleted:SimpleEvent.create(),PageDeleting:SimpleEvent.create(),PageInitialized:SimpleEvent.create(),CoordinatorInitialized:SimpleEvent.create(),ListPageEntered:SimpleEvent.create()};this.Flags={isPageSelected:ObservableFlag.create(false),isInPageChanging:ObservableFlag.create(false),isInPageChangingForPropertiesOnly:ObservableFlag.create(false),HeaderExists:ObservableFlag.create(false,{valueChangeCallback:function(O){$("body").toggleClass("header-exists",O)}}),FooterExists:ObservableFlag.create(false,{valueChangeCallback:function(O){$("body").toggleClass("footer-exists",O)}}),InDynamicPage:ObservableFlag.create(false)};this.PageChangingOperation=OperationsBatch.create();this.NavigatablePageChangingOperation=OperationsBatch.create();this.PagesUpdatingOperation=OperationsBatch.create();this.CurrentPageInstance=ObservableObject.create(undefined,{equalityComparer:$.defaultIdComparer});this.CurrentPageData=ObservableObject.create(undefined,{equalityComparer:$.defaultIdComparer,valueChangeCallback:function(O){PageManager.Flags.InDynamicPage.setValue(h(O));if(O.masterPageListName!==undefined){PageManager.Events.ListPageEntered.fire(PageManager,O.masterPageListName)}}});this.TagsToPagesMapObservableCollection={};this.PagesTags=new ObservableCollection({idFunction:function(O){return O}});this.PageToTags={};this.PagesHierarchy=new HierarchyCollection();this.NavigatableHierarchy=new HierarchyCollection();this.AllPagesInformation=new ObservableCollection();this.AllPagesCollection=CollectionObserver.create(b.AllPagesInformation);this.PagesInformation=CollectionUtils.connectObservableCollection(new ObservableCollection(),b.AllPagesCollection,{filterFunction:$.oppositeFunction(h)});this.PagesCollection=CollectionObserver.create(b.PagesInformation);this.DynamicPagesInformation=CollectionUtils.connectObservableCollection(new ObservableCollection(),b.AllPagesCollection,{filterFunction:h});this.DynamicPagesCollection=CollectionObserver.create(b.DynamicPagesInformation);this.NavigatablePagesInformation=new ObservableCollection();this.NavigatablePagesCollection=CollectionObserver.create(b.NavigatablePagesInformation);this.FieldsInformation=new ObservableCollection({idFunction:function(O){return O.name}});this.FieldsCollection=CollectionObserver.create(b.FieldsInformation);this.initialize=function(P){d(P);if(Global.IsDesigner){DesignerStateManager.onStatesChange([DesignerStates.FullScreenPanelOpened],function(Q){t.hideElement()},function(Q){t.showElement()});K=SimpleEvent.createEventListener([OperationsManager.onOperationAdded,PropertiesManager.Events.PropertyValueChanged],function(){if(ElementsManager.getRootInstance()===t&&PageManager.Flags.isInPageChanging.isFalse()){var Q=D[z].markForSave;Q.informOperation();var S=MasterPagesManager.getCurrentMasterPage();if(S){var R=S.id;MasterPagesManager.getMasterTemplateForSaveDirtyFlag(R).informOperation()}}});MasterPagesManager.MasterPageEditingModeChangedFinished.bind(function(R){var Q=PageManager.getCurrentPage();PositionManager.updatePosition(Q);PositionManager.updatePosition(Q.getPageContentInstances())})}var O=false;s=P.mainPageId;PageManager.Events.PageChanged.bind(function(){if(t.data.isLoaded){t.activateTrigger(Triggers.PageOpened)}else{t.data.isLoaded=true;if(PropertiesManager.isStyleAffecting(t,ElementStates.BeforeLoadedState)){t.activateTrigger(Triggers.PageLoaded)}else{t.activateTrigger(Triggers.PageOpened)}}t.activateTrigger(Triggers.PageLeave);t.refreshPageMetaData()});SimpleEvent.bind([Global.Events.ElementsAdded,ElementsManager.Events.InstancesRemoved,PageManager.Events.PageChanged],function(){if(t){PageManager.Flags.HeaderExists.setValue(t.getHeaderInstance()!==undefined);PageManager.Flags.FooterExists.setValue(t.getFooterInstance()!==undefined)}});if(Global.IsDesigner){SelectionManager.Events.SelectionChangedSimple.bind(function(){var Q=SelectionManager.getSelectedInstances();if(Q.length===1&&Q[0]===t){b.Flags.isPageSelected.set()}else{b.Flags.isPageSelected.reset()}})}SimpleEvent.bind([PageManager.PagesInformation.itemUpdatedEvent],function(R){if(!O){var Q=R.id;if(D[Q].initialized){c[Q].setPropertyValue("name",R.title);PropertiesManager.notifyCalculatedPropertyChange(c[Q],"pageTitle")}E(Q,R.tags)}});PageManager.PagesCollection.itemsChangedEvent.bind(function(Q){if(Q.updatedItems){$.each(Q.updatedItems,function(R,S){var T=ElementsManager.getInstanceByID(S.id);if(T){T.setPropertyValue("name",S.title);if(T===t){T.refreshPageMetaData()}}})}});PageManager.NavigatablePageChangingOperation.startedEvent.bind(function(){PageManager.NavigatablePagesCollection.postponeUpdates()});PageManager.NavigatablePageChangingOperation.finishedEvent.bind(function(){PageManager.NavigatablePagesCollection.unPostponeUpdates()});PageManager.PagesUpdatingOperation.startedEvent.bind(function(){PageManager.NavigatablePageChangingOperation.begin();PageManager.AllPagesCollection.postponeUpdates()});PageManager.PagesUpdatingOperation.finishedEvent.bind(function(){PageManager.AllPagesCollection.unPostponeUpdates();PageManager.NavigatablePageChangingOperation.end()});PageManager.AllPagesInformation.itemsAddedEvent.bind(function(Q){PageManager.PagesHierarchy.addIds($.map(Q,function(R){if(!h(R)){return R.id}}))});PageManager.AllPagesInformation.itemsRemovedEvent.bind(function(Q){PageManager.PagesHierarchy.removeIds(Q)});MobileVersionViewManager.Flags.IsInMobileContext.valueChangedEvent.bind(function(){PageManager.NavigatablePageChangingOperation.begin();PageManager.NavigatablePagesInformation.beginUpdate();PageManager.NavigatablePagesInformation.disconnectObservableCollection();g();PageManager.NavigatablePagesInformation.endUpdate();PageManager.NavigatablePageChangingOperation.end()});i(P);PageManager.NavigatablePageChangingOperation.begin();g();PageManager.NavigatablePageChangingOperation.end();SimpleEvent.bind(PageManager.PagesHierarchy.hierarchyUpdateEvent,L)};function y(){var O=PageManager.NavigatablePagesInformation.getItems();var Q=PageManager.PagesHierarchy.getIds();var R=[];var P={};$.each(Q,function(U,S){if(O[U]){var T=[];$.each(S.children,function(V){if(O[V]){T.push(V)}});if(T.length>0){P[U]=T}R.push(U)}});PageManager.NavigatableHierarchy.updateHierarchy(P,R)}function g(){b.NavigatablePagesInformation.connectObservableCollection(b.PagesCollection,{normalizeCollection:L})}function L(){PageManager.NavigatablePageChangingOperation.performOperation(function(){PageManager.NavigatablePagesInformation.beginUpdate();var R={};var U={};var O=b.PagesCollection.getItems();var P=b.PagesHierarchy.getHierarchies();$.each(O,function(W,V){if(!Q(V)){T(W)}else{if(!U[W]){R[W]=V}}});PageManager.NavigatablePagesInformation.remove($.getKeys(U));var S=$.getValues(R);S=S.orderBy($.defaultIndexFunction,$.nullLastComparer);$.each(S,function(W,V){b.NavigatablePagesInformation.put($.extend({},V,{index:W+1}))});PageManager.NavigatablePagesInformation.endUpdate();y();function Q(V){var W=V.menu;if(W){if(MobileVersionViewManager.Flags.IsInMobileContext.isTrue()){return !W.isMobileDisabled}else{return !W.isDesktopDisabled}}return true}function T(V){U[V]=true;delete R[V];if(P[V]){$.each(P[V],function(W,X){T(X)})}}},"NormalizeNavigatablePagesInformation")}this.getCurrentPageSections=function(O){O=$.valueOrDefault(O,false);if(!t){return[]}else{var R=[];var Q=t.getHeaderInstance();if(O&&Q){R.push(Q)}R=$.merge(R,$.map(t.getPageContentInstances(),function(S){return S.getSectionsByPage(t)}));if(O){var P=t.getFooterInstance();if(P){R.push(P)}}return R}};function n(O){return $.findFirst(PageManager.AllPagesInformation.getItems(),O)}this.findPageByName=function(O){return n(function(Q,P){return P.title.toLowerCase()==O.toLowerCase()})};this.findPageByUrlAlias=function(O){return n(function(Q,P){return P.urlAlias===O})};this.getPagesRoot=function(){if(!o){if(Global.IsDesigner){o=$("#pages-root")}else{o=$("#body-element")}}return o};this.getPageBody=function(){if(!r){if(Global.IsDesigner){r=$("#page-body")}else{r=$("#body-element")}}return r};this.getPageBodyHeight=function(){var O=t.getSize();return O?O.height:t.getPropertyValue("sizeAndPosition").height+t.getHeaderInstanceHeight()+t.getFooterInstanceHeight()};this.getSavingPagesVersionConrollers=function(){var O=[];$.each(D,function(Q,P){if(P.exist){O.push(P.markForSave)}});return O};this.getPageIdByFragmentValue=function(O,S){if(!O){O=""}O=O.toLowerCase();O=$.trimPrefix(O,"!");var R;if(O===""){return s}else{var P=$.getValues(b.PagesInformation.getItems());var Q=O.split("/")[0];$.each(P,function(U,T){if(T.urlAlias===Q){R=T;return false}else{if(!R&&T.title.toLowerCase().trim(" ")===Q){R=T}}});if(R){if(!ListsManager.isListPage(R)){return R.id}else{return ListsManager.getListPageIdByFragment(R,O)}}else{return S?S:s}}};this.switchToNextPage=function(){var R=z;var Q=PageManager.PagesInformation.getItemsLength();var O=PageManager.AllPagesInformation.getItem(z);var P=h(O)?Q:O.index;$.each(PageManager.PagesInformation.getItems(),function(T,S){if(S.index===P+1||(P===Q&&S.index===1)){R=T;return false}});b.switchPage(R)};this.switchToPrevPage=function(){var P=z;var R=PageManager.PagesInformation.getItemsLength();var O=PageManager.AllPagesInformation.getItem(z);var Q=h(O)?1:O.index;$.each(PageManager.PagesInformation.getItems(),function(T,S){if(S.index===Q-1||(Q===1&&S.index===R)){P=T;return false}});b.switchPage(P)};this.duplicateLoadedPageHierarchy=function(O,S,R){R=$.extend({title:"Page"},R);var U=R.title;var T=PageManager.getPage(O);var Q=ElementsManager.getHierarchyInfo(T,{forSaving:true,saveToServer:true,idsInHierarchy:true,rootInstancesHierarchies:MobileVersionViewManager.getPageInstancesHierarchiesData(T),filter:function(V){return !V.isMasterPageElement.isTrue()}});var P=PageManager.addPageFromHierarchy(Q,S,{title:U});PageManager.switchPage(P);v(P,S)};this.addPageFromHierarchy=function(R,O,P,Y){P=$.extend({id:undefined,title:"Page",pageTitle:"",metaTags:"",headerCode:"",footerCode:"",description:"",tags:[],keyWords:"",pageType:undefined,pageListName:undefined,masterPageListName:undefined,urlAlias:undefined,useNameASUrl:undefined,markForSaving:true},P);Y=$.extend({duplicateHierarchy:true},Y);var S=Y.duplicateHierarchy;var X=R.structures[0];if(X.type!==ElementsTypes.page.name){R=PageManager.createPageHierarchyFromSections(R,{pageId:P.id});S=false}else{if(S){var V=P.id;var U={rootsIds:V?[V]:undefined};R=ElementsManager.duplicateHierarchyInfo(R,U)}}PageManager.PagesUpdatingOperation.start();var Q=R.structures[0].id;B[Q]=HierarchyController.create(R);var T=F();if(P.markForSaving){T.markForSave.informOperation()}D[Q]=T;var W=P.index;if(!h(P)&&W===undefined){W=0;$.each(PageManager.PagesInformation.getItemsValues(),function(Z,aa){if(aa.index>W){W=aa.index}});W++}if(P.urlAlias===undefined){P.urlAlias=UrlUtils.normalizeFriendlyUrl(P.title,"-");P.useNameASUrl=true}PageManager.AllPagesInformation.put({id:Q,title:P.title,pageTitle:P.pageTitle,description:P.description,keyWords:P.keyWords,metaTags:P.metaTags,headerCode:P.headerCode,footerCode:P.footerCode,index:W,isHomePage:false,tags:P.tags,pageType:P.pageType,pageListName:P.pageListName,masterPageListName:P.masterPageListName,urlAlias:P.urlAlias,useNameASUrl:P.useNameASUrl});O=$.valueOrDefault(O,MasterPagesManager.getDefaultMasterPageId());MasterPagesManager.setMasterPage(Q,O);PageManager.PagesUpdatingOperation.finish();return Q};this.createPageHierarchyFromSections=function(S,Q){Q=$.extend({pageId:undefined},Q);var O=$.valueOrDefault(Q.pageId,StructureLoadingManager.generateWebsiteId());var P=ElementsManager.duplicateHierarchyInfo(S);var R=P.structures;if(P.idsInHierarchy){P.idsInHierarchy[O]=true}P.pageId=O;P.structures=[{type:ElementsTypes.page.name,id:O,childElements:R,elementProperties:[]}];return P};this.addEmptyPage=function(Q,R){R=$.extend({id:undefined,title:"Page"},R);var S=R.title;var O=$.valueOrDefault(R.id,StructureLoadingManager.generateWebsiteId());R.id=O;var P={structures:[{type:ElementsTypes.page.name,id:O,elementProperties:{name:S}}]};return PageManager.addPageFromHierarchy(P,Q,R,{duplicateHierarchy:false})};this.addAndSwitchToPage=function(R,S,Q){Q=$.extend({hierarchy:undefined,switchOptions:undefined},Q);var T=$.extend({shouldFireInitializeEvent:true},Q.switchOptions);var P=Q.hierarchy;var O;if(!P){O=b.addEmptyPage(R,S)}else{O=b.addPageFromHierarchy(P,R,S)}PageManager.switchPage(O,T);v(O,R);return PageManager.getCurrentPage()};this.removePage=function(P,Q){Q=$.extend({normalizeIndex:true},Q);var V=ElementsManager.getInstanceByID(P);PageManager.PagesUpdatingOperation.start();OrderManager.beginReorderingBatch();if(z===P){var U=MasterPagesManager.getMasterPageIDByPage(P);var O=MasterPagesManager.getMasterPageRootInstances(U);for(var R=0;R<O.length;R++){O[R].detach()}}PageManager.Events.PageDeleting.fire(PageManager,P);if(P===s){var T=$.getKeys(PageManager.PagesInformation.getItems());if(T.length===1){var S=PageManager.addAndSwitchToPage(U);s=S.id}else{if(T[0]===s){s=T[1]}else{s=T[0]}}}if(l&&l.id===P){l=undefined}if(t&&P===t.id){b.switchPage(s,{callback:function(){H(P,Q.normalizeIndex)}});l=undefined}else{H(P,Q.normalizeIndex)}OrderManager.endReorderingBatch();PageManager.PagesUpdatingOperation.finish()};function H(P,R){PageManager.PagesUpdatingOperation.start();OrderManager.beginReorderingBatch();var Q=PageManager.AllPagesInformation.getItem(P);var O=Q.index;D[P].exist=false;if(c[P]){ElementsManager.removeInstances(c[P],c[P]);delete c[P]}PageManager.AllPagesInformation.remove(P);if(R&&!h(Q)){$.each(PageManager.PagesInformation.getItemsValues(),function(S,T){if(T.index>O){T.index--;PageManager.AllPagesInformation.updateItem(T.id,{index:T.index})}})}PageManager.Events.PageDeleted.fire(PageManager,P);f(P,Q.tags);C();OrderManager.endReorderingBatch();PageManager.PagesUpdatingOperation.finish()}this.getPagesMetaData=function(){var R={};$.each(D,function(U,T){if(T.exist){var S=$.extend({},PageManager.AllPagesInformation.getItem(U));delete S.type;R[U]=S}});var Q=ElementsManager.getHierarchyInfo(M,{forSaving:true,saveToServer:true,idsInHierarchy:true,copyAffectedStates:false,copyAffectingStates:true,copyMobileStates:false});if(k){var P=true;$.each(PageManager.PagesInformation.getItems(),function(T,S){if(!S.supportsMobileStates){P=false;return false}});Q=ElementsManager.adjustHierarchyWithBaseHierarchy(Q,k,function(U,S,T){if(P){return false}if(T===MobileVersionViewManager.MobileStateName&&ElementsManager.getInstanceByID(S)){return false}return true})}StructureLoadingManager.preSaveHierarchy(Q);var O=PageManager.PagesHierarchy.getHierarchies();return{editorCoordinator:EditorManager.getCoordinatorHierarchyForSave(),coordinator:Q,mainPageId:s,pagesData:R,pagesHierarchies:O}};this.getCurrentPageStructure=function(){var O=PageManager.getCurrentPage();var P=ElementsManager.getHierarchyInfo(O,{forSaving:true,saveToServer:true,idsInHierarchy:true,rootInstancesHierarchies:MobileVersionViewManager.getPageInstancesHierarchiesData(O),filter:function(Q){return !Q.isMasterPageElement.isTrue()}});P=ElementsManager.adjustHierarchyWithBaseHierarchy(P,q(O.id));P.idsInHierarchy=undefined;return P};this.getPagesStructures=function(O){var P={};$.each(D,function(T,S){if(S.exist){var Q=S.markForSave.isDirty();if(Q||!O){if(S.initialized){var R=ElementsManager.getHierarchyInfo(c[T],{forSaving:true,saveToServer:true,idsInHierarchy:true,filter:function(U){return !U.isMasterPageElement.isTrue()},rootInstancesHierarchies:MobileVersionViewManager.getPageInstancesHierarchiesData(c[T])});R=ElementsManager.adjustHierarchyWithBaseHierarchy(R,q(T));R.idsInHierarchy=undefined;P[T]=R}else{if(B[T]){P[T]=q(T)}}}}});return P};this.getMainPageId=function(){return s};this.setMainPageId=function(O){s=O;C()};this.getPages=function(){return c};this.getPage=function(O){return c[O]};this.isPage=function(O){return c[O]!==undefined};this.isDynamicPage=function(O){return O&&b.DynamicPagesInformation.getItem(O)!==undefined};this.getPagesData=function(){return PageManager.AllPagesInformation.getItems()};this.getPagesStates=function(){return D};this.getCurrentPage=function(){return t};this.getHtmlPageUrl=function(O){if(!O){O=t}if(Global.IsDesigner){return SocialLinksManager.getBrandSocialDefaultLink("facebook")}else{return $.getRootWindow().location.href+"/?page="+O.getPropertyValue("name")}};this.getCoordinatorHeirarchy=function(){return k};this.getCoordinator=function(){return M};this.getContentWidth=function(){var O=PageManager.getCoordinator().getPropertyValue("contentWidth");return O};this.getCurrentPageId=function(){if(t){return t.id}return z};this.backToPrevPage=function(){if(l){b.switchPage(l.id)}};this.getPrevPage=function(){return l};this.getPageData=function(P){var Q=P.masterListPageId;var O=$.valueOrDefault(Q,P);return PageManager.AllPagesInformation.getItem(O)};this.getPageFragmentValue=function(Q){var S=Q.masterListPageId;var O=$.valueOrDefault(S,Q);var R=PageManager.AllPagesInformation.getItem(O);if(!R){return""}var P="";if(!R.isHomePage||(S&&Q.suffix)){P=R.urlAlias||R.title}if(S&&Q.suffix){P+="/"+Q.suffix}return P.trim(" ").toLowerCase()};this.isPageLoaded=function(O){return B[O]||PagesStructures[O]!==undefined};function q(O){return J(O).getHierarchy()}function J(O){if(!B[O]){if(PagesStructures[O]){if(typeof PagesStructures[O]==="string"){B[O]=HierarchyController.create(JSON.parse(PagesStructures[O]))}else{B[O]=HierarchyController.create(PagesStructures[O])}}else{B[O]=HierarchyController.create(ElementsManager.getHierarchyInfo(c[O],{forSaving:true,saveToServer:true,idsInHierarchy:true,rootInstancesHierarchies:MobileVersionViewManager.getPageInstancesHierarchiesData(c[O]),filter:function(P){return !P.isMasterPageElement.isTrue()}}))}}return B[O]}var m={};var a={};var I={};var N=false;this.switchPage=function(R,S){S=$.extend({animation:Animations.NoAnimation,duration:0,callback:$.noop,shouldFireInitializeEvent:false,afterCurrentPageDetached:$.noop},S);if((!z||z!==R)){MasterPagesManager.resetCurrentMasterPage();if(Global.IsDesigner&&ViewManager.isDesignMode()&&ModeManager.Flags.InModeChanging.isFalse()&&z){m[z]=DesignerManager.getCurrentViewPort()}var U=D[R];if(U.initialized&&!U.exist){return t}var T=b.getPageData(R);if(U.initialized===false){var Q=T.title;$("body").addClass("loading-page");N=R;MasterPagesManager.setMasterPageInfo(MasterPagesManager.getPageMasterPageId(R),function(){if(!a[R]){a[R]=true;if(N===R){if(!b.isPageLoaded(R)){$.ajax({url:SiteFilesMap["page-"+R],dataType:"script",cache:true,success:ErrorHandler.wrapWithNotify(function(){var V=G.attach($.noop,function(){if(b.isPageLoaded(R)){G.detach(V.callbackId);if(G.getCallbacksLength()===0){G.stopPooling()}if(N===R){P()}else{a[R]=false}}});G.startPooling()})})}else{P()}}else{a[R]=false}}})}else{R=R.toString();OrderManager.beginReorderingBatch();LayoutManager.beginLayoutUpdateBatch();PageManager.Events.PageChanging.fire(PageManager,z,R);PageManager.PageChangingOperation.start();PageManager.Flags.isInPageChanging.setTrue();PageManager.Flags.isInPageChangingForPropertiesOnly.setTrue();l=t;z=R.toString();PageManager.Events.InPageChanging.fire();N=false;O()}}else{ViewManager.getSiteScrollableElement().scrollTop(0);S.callback()}return t;function P(){if(!ViewManager.isViewMode()){SelectionManager.disable()}$("body").removeClass("loading-page");OrderManager.beginReorderingBatch();LayoutManager.beginLayoutUpdateBatch();if(Global.IsDesigner){K.deactivate()}R=R.toString();PageManager.Events.PageChanging.fire(PageManager,z,R);PageManager.PageChangingOperation.start();PageManager.Flags.isInPageChanging.setTrue();PageManager.Flags.isInPageChangingForPropertiesOnly.setTrue();l=t;z=R.toString();N=false;PageManager.Events.InPageChanging.fire();var W=J(R);var V=q(R);var X={StructureVersion:V.version?V.version:StructureLoadingManager.CurrentStructureVersion,pagesStructure:{pages:[V]}};StructureLoadingManager.loadHierarchy(X);if(V.structures[0].type!==ElementsTypes.page.name){var Z=V.structures;V.structures=[{type:ElementsTypes.page.name,id:R,childElements:Z}]}var Y=W.addHierarchyFromNode(R,{includeNode:true,includeChildren:false})[0];Y.setPropertyValue("name",Q);c[R]=Y;O()}function O(){if(!ViewManager.isViewMode()){SelectionManager.disable()}PositionManager.VisibilityUpdateBatch.start();if(t){t.detach();S.afterCurrentPageDetached()}t=c[R];PositionManager.UpdateBatch.start();t.attachPage();t.showElement();MasterPagesManager.updateCurrentMasterPage();PageManager.Events.PageLoaded.fire();PositionManager.VisibilityUpdateBatch.finish();var V=J(R);if(!V.isHierarchyApplied()){V.addHierarchyFromNode(R,{includeNode:false,includeChildren:true,parent:t});V.applyHierarchy()}if(!U.initialized){OrderManager.reassignElementsOrders()}PositionManager.UpdateBatch.finish();LayoutManager.endLayoutUpdateBatch();if(!U.initialized||S.shouldFireInitializeEvent){U.initialized=true;if(!PageManager.AllPagesInformation.getItem(R).supportsMobileStates){U.markForSave.informOperation();v(R)}PageManager.AllPagesInformation.getItem(R).supportsMobileStates=true;PageManager.Events.PageInitialized.fire()}OrderManager.endReorderingBatch();PageManager.CurrentPageInstance.setValue(c[R]);PageManager.CurrentPageData.setValue(T);PageManager.Events.BeforePageChanged.fire();PageManager.Events.PageChanged.fire();PageManager.Events.AfterPageChanged.fire();PageManager.PageChangingOperation.finish();PageManager.Flags.isInPageChanging.setFalse();PageManager.Flags.isInPageChangingForPropertiesOnly.setFalse();S.callback();if(Global.IsDesigner){K.activate();if(ViewManager.isDesignMode()){if(m[z]){DesignerManager.setCurrentViewPort(m[z])}else{if(ModeManager.inMode(Modes.ExpressMode)){DesignerManager.setPreviewViewPort()}else{DesignerManager.setDefaultViewPort()}}}else{DesignerManager.setPreviewViewPort()}}else{ViewManager.getSiteScrollableElement().scrollTop(0);PositionManager.invalidatePositioningRootOffset()}if(!ViewManager.isViewMode()){SelectionManager.enable();SelectionManager.selectInstances([],true)}OperationsManager.disableBatch();if(!t.getPageContentInstances()[0]){ElementsManager.addPageContent()}else{if(t.getPageContentInstances()[0].getSectionsCountByPage(t)===0){ElementsManager.addSection(t.getPageContentInstances()[0])}}OperationsManager.endDisableBatch()}};function i(O){PageManager.PagesUpdatingOperation.start();b.FieldsInformation.put([{type:"index",title:"Index",name:"index",isDefaultField:true},{type:"title",title:"Title",name:"title",isDefaultField:true}]);B=$.mapDictionary(O.pages?O.pages:{},function(T,U){return HierarchyController.create(U)});$.each(O.pagesData,function(U,T){D[U]=F()});var P=$.getValues(O.pagesData);var R={};var S=$.getValues(P);var Q=$.grep(S,h,true);A(Q,O.pagesHierarchies);$.each(S,function(T,U){U.id=U.id.toString();if(U.shareStyle===undefined){U.shareStyle=true}E(U.id,U.tags);u(U);S[T]=$.extend({metaTags:"",headerCode:"",footerCode:"",tags:[],pageListName:undefined,masterPageListName:undefined,pageType:undefined},U)});PageManager.AllPagesInformation.put(S);C();PageManager.PagesHierarchy.setHierarchies(O.pagesHierarchies);PageManager.PagesUpdatingOperation.finish()}this.constructPagesHierarchy=function(O){p(O)};function A(O,Q){if(w<1.2044){var U=$.map(O,$.defaultIdFunction);var S=new HierarchyCollection({ids:U,hierarchies:Q});var P=S.getHierarchies();var R=1;function T(W){var V=$.grep(O,function(X){return $.oneOfValues(X.id.toString(),W)});V.orderBy(function(X){return X.index});$.each(V,function(X,Y){Y.index=R++;if(P[Y.id]){T(P[Y.id])}})}T(S.getRootIds())}}function u(O){if(SiteManager.isTemplate()){if(O.isHomePage){O.urlAlias="";O.useNameASUrl=false}else{O.urlAlias=UrlUtils.normalizeFriendlyUrl(O.title,"-");O.useNameASUrl=true}}}function h(O){return !!O.pageListName}function E(O,P){if(P&&O){var S=PageManager.PageToTags[O]?PageManager.PageToTags[O]:[];var Q=$.makeDictionaryFromKeys(P,true);var R=$.grep(S,function(T){return !Q[T]});PageManager.PagesTags.put(P);$.each(P,function(V,U){var T=PageManager.TagsToPagesMapObservableCollection[U];if(!T){T=new ObservableCollection();PageManager.TagsToPagesMapObservableCollection[U]=T}T.put({id:O})});f(O,R);PageManager.PageToTags[O]=P}}function f(O,P){if(P&&O){$.each(P,function(S,R){var Q=PageManager.TagsToPagesMapObservableCollection[R];if(!Q){PageManager.PagesTags.remove(R)}else{Q.remove(O);if(Q.getItemsValues().length===0){PageManager.PagesTags.remove(R);Q.clear();delete PageManager.TagsToPagesMapObservableCollection[R]}}})}}function C(){PageManager.AllPagesInformation.updateItems(function(O){return{isHomePage:s===O}})}function F(){return{initialized:false,exist:true,markForSave:VersionController.create()}}function d(O){if(O&&O.coordinator){var P=O.coordinator;P.isCoordinator=true;k=P;w=k.version;StructureLoadingManager.loadHierarchy(P)}}function p(O){if(O&&O.coordinator){M=ElementsManager.addHierarchyInfo(k)[0]}else{M=ElementsManager.addInstance(ElementsTypes.coordinator,null,{elementID:"coordinator"});Global.Events.ElementsAdded.fire(Global,{instances:[M]})}PageManager.Events.CoordinatorInitialized.fire()}this.whenCoordinatorAvailable=function(O){if(M){O(M)}else{PageManager.Events.CoordinatorInitialized.one(function(){O(M)})}};this.initializeMinPageHeightRule=function(){var O=[ViewManager.Events.SwitchedToViewMode,ViewManager.Events.SwitchedToDesignMode];var P=SimpleEvent.createEventListener([$.getWindowSizeEvent(),Global.PageHeightChanged,PageManager.Events.PageChanging],j,{activationCallback:j,deactivationCallback:j});SimpleEvent.bindAndExecute(O,function(){if(ViewManager.isViewMode()){P.activate()}else{P.deactivate()}})};function j(){LayoutManager.layoutUpdateBatch.performOperation(x,"refreshLastSectionHeight")}this.refreshLastSectionHeight=x;function x(){var O=PageManager.getCurrentPage();if(O){OrderManager.OrderingBatch.performOperation(function(){var P=O.lastContentSectionInstance.getValue();var W=0;var U=0;if(ViewManager.isViewMode()&&P){W=$.getWindowSize().height;if(Global.IsDesigner){if(ViewMobileWrapperMode.IsActive.isTrue()){W=ViewMobileWrapperMode.MobileViewHeight}else{W-=DesignerHeader.getOuterHeight()}}W-=FreemiumBanners.getFooterHeight()-PrivacyPolicyBar.getPrivacyPolicyHeight();var S=0;$.each(O.getPageContentInstances()[0].getSectionsByPage(O),function(Y,X){if(X!==P){if(PositionManager.isElementVisible(X)){S+=X.getSize().height}}});var T=O.getFooterInstance();var V=T&&PositionManager.isElementVisible(T)?T.getSize().height:0;var Q=O.getHeaderInstance();var R=T&&PositionManager.isElementVisible(Q)?Q.getSize().height:0;U=W-R-V-S;U=U>0?U:0}if(P){P.data.calculatedMinHeight=U;LayoutManager.refreshElementsLayout(P)}},"refreshLastSectionHeight")}}function v(O,P){P=$.valueOrDefault(P,MasterPagesManager.getMasterPageIDByPage(O));MasterPagesManager.getMasterTemplateForSaveDirtyFlag(P).informOperation()}return this})();var PopUpManager=new (function(){var k=this;var a;var g;var b;var f;var l;var d;var o;var n;var m;var j;var i=false;function c(){var p;if(j){var t=b.getDataSource();var r=t.getAllItems();var s=r[a.getDataItemId()];var q=s.image;if(!q){$.each(s,function(v,u){if(u.imageUrl){q=u;return false}})}p=q?AssetsManager.resolveImageUrl(q.imageUrl,m):undefined}else{if(a.elementType===ElementsTypes.image){p=AssetsManager.resolveImageUrl(a.getPropertyValue("imageUrl"),m)}}$.unite(n,o).toggleDisplayed(j);l.toggleEnable(j);f.setImage(p,false)}this.showInPopup=function(q){if(!f){h()}a=q;m={width:$(window).width()*0.7,height:$(window).height()*0.7};l.css(m);if(q.elementType!==ElementsTypes.Gallery){b=$.grep(q.getParents(),function(w){return w.elementType===ElementsTypes.Gallery})[0];if(b){j=true;var s=$.grep(q.getParents(),function(w){return w.isDataListItem()})[0];if(s){a=s}}else{j=false}}else{b=q;j=true;a=b.getTemplatesArray()[0]}if(b){var v=b.getDataSource();var t=v.getAllItems();var u=t[a.getDataItemId()];var p=false;$.each(u,function(x,w){if(w.imageUrl){p=true;return false}});if(!p){b=undefined;a=undefined;j=false;return}}f.clearImage();Dialog.open(l);var r=Dialog.getDialogOverlay(l);r.css({backgroundColor:"black",opacity:0.8});$([r]).one("mousedown.popup",function(){k.hidePopup()});if(!i){$.unite(n,o).find(".navigate-button-icon").makeCentered({vertically:true,horizontally:false});i=true}f.synchronizeViewPort();c()};this.hidePopup=function(){var p=Dialog.getDialogOverlay(l);Dialog.close(l);p.removeClass("popup-overlay");$([p]).unbind("mousedown.popup");b=undefined;a=undefined;j=false};ViewManager.Events.SwitchedToDesignMode.bind(function(){if(a){k.hidePopup()}});function h(){l=$("<span class='popup-image-box-container'></span>").css("backgroundColor","black");f=$("<span class='absolute-fill'></span>").appendTo(l).makeImageBoxNew({autoLoad:true,layout:ImageBoxLayout.FitWhenBigger});o=$("<span class='popup-next-button popup-navigate-button'><span class='navigate-button-icon popup-next-button-icon'></span></span>").appendTo(l);n=$("<span class='popup-prev-button popup-navigate-button'><span class='navigate-button-icon popup-prev-button-icon'></span></span>").appendTo(l);d=$("<span class='popup-close-button'></span>").appendTo(l);d.makeButton().buttonClick(function(){k.hidePopup()});o.makeButton({elementPartsSelector:".navigate-button-icon"});l.makeButton(ButtonSettings.SimpleWithDisabling);$.unite(o,l).buttonClick(function(){var s=b.getDataSource();var r=s.getAllItems();var p=parseInt(r[a.getDataItemId()].index);var q=b.getTemplatesArray();if(q.length<=p){p=0}a=q[p];c()});n.makeButton({elementPartsSelector:".navigate-button-icon"}).buttonClick(function(){var s=b.getDataSource();var r=s.getAllItems();var p=parseInt(r[a.getDataItemId()].index)-1;var q=b.getTemplatesArray();if(1>p){p=q.length}a=q[p-1];c()})}})();var PositionManager=new function(){this.Events={ElementsVisibleAreaChanged:SimpleEvent.create(),ElementsVisibilityChanged:SimpleEvent.create(),PositionRootInvalidated:SimpleEvent.create()};this.UpdateBatch=OperationsBatch.create({batchFinishingStartedCallback:function(){LayoutManager.beginLayoutUpdateBatch()},batchFinishingCompletedCallback:function(){LayoutManager.endLayoutUpdateBatch()}});this.VisibilityUpdateBatch=OperationsBatch.create({batchFinishingStartedCallback:function(){ElementInstance.InstancesInitializationBatch.start()},batchFinishingCompletedCallback:function(){ElementInstance.InstancesInitializationBatch.finish()}});var p=this;var c={};var f={};var g={};var k;var q=undefined;var j={};var r={};var n={};var i={};var d={};var l=false;this.initialize=function(w){k=Global.OffsetAncestor;Global.Events.ElementRemoving.bind(function(y){var x=y.removedInstance;delete c[x.id];delete j[x.id];delete r[x.id];delete f[x.id];delete g[x.id]});$.getWindowSizeEvent().bind(function(){PositionManager.invalidatePositioningRootOffset();if(!Global.IsDesigner||(!Global.IsMobile&&(ViewManager.isViewMode()||ModeManager.inMode(Modes.ExpressMode)))){PositionManager.updatePosition($.getValues(ElementsManager.getAllPageInstances()))}})};this.invalidatePositioningRootOffset=function(){q=undefined;PositionManager.Events.PositionRootInvalidated.fire()};this.updateInstanceLastPositionAndSize=function(x,w){if(w){p.updateInstanceLastPosition(x,w.position);p.updateInstanceLastSize(x,w.size)}};this.getInstanceLastPositionAndSize=function(w){return{position:p.getInstanceLastPosition(w),size:p.getInstanceLastSize(w)}};this.updateInstanceLastPosition=function(x,w){if(w){f[x]=w}};this.getInstanceLastPosition=function(w){return f[w]};this.updateInstanceLastSize=function(x,w){if(w&&!(w.width===0&&w.height===0)){g[x]=w}};this.getInstanceLastSize=function(w){return g[w]};this.initializeStoredPosition=function(w){c[w.id]={offset:null,size:null,isVisible:false,visibleArea:null}};this.isTrackOver=function(w){if(n[w.id]||i[w.id]){return true}return false};this.enableMouseOver=function(){if(!l){l=true;PageManager.getPageBody().bind("mouseleave.trackMouseOver",function(){var x=$.getValues(d);d={};for(var w=0;w<x.length;w++){x[w].elementLeaveEvent.fire()}}).bind("mousemove.trackMouseOver",function(w){var E=$.getMouseOffset(w);var A={};var G={};for(var M in n){var L=n[M];if(!PositionManager.isElementVisible(L)){var z=false;var K=d[M]!==undefined}else{var J=$.getArea(PositionManager.getElementAbsoluteOffset(L),PositionManager.getElementSize(L));var z=$.isInsideArea(J,E);var K=d[M]!==undefined}if(z&&!K){d[M]=L;A[M]=L}else{if(!z&&K){delete d[M];G[M]=L}}}for(var I in i){var F=i[I];var B=F.childInstances;var K=d[F.id]!==undefined;var y=0;for(var D=0;D<B.length;D++){var H=B[D];var C=d[H.id]!==undefined;if(C&&!K){d[F.id]=F;A[F.id]=F;break}else{if(!C&&K){y++}}}if(y===B.length){delete d[F.id];G[F.id]=F}}for(var x in A){A[x].elementEnterEvent.fire(w,w)}for(var x in G){G[x].elementLeaveEvent.fire(w,w)}})}};this.activateWhenInstanceVisible=function(y,z,x){var w=PositionManager.isElementVisible(y);if(!w){var A=y.visibilityChangedEvent.bind(function(){A.unbind();z()},x)}else{z()}};this.disableMouseOver=function(){PageManager.getPageBody().unbind("mouseleave.trackMouseOver").unbind("mousemove.trackMouseOver");l=false};this.trackMouseOver=function(w){if(w.elementType===ElementsTypes.group){i[w.id]=w;$.each(w.childInstances,function(y,x){p.trackMouseOver(x)})}else{n[w.id]=w}};this.stopMouseOverTracking=function(w){if(w.elementType===ElementsTypes.group){delete i[w.id];$.each(w.childInstances,function(z,y){p.stopMouseOverTracking(y)})}var x=w.id;if(n[x]){delete n[x];delete d[x];if($.isEmptyObject(n)&&l){l=false;PageManager.getPageBody().unbind(".trackMouseOver")}}};this.getInstancesInOffset=function(y){var x=[];var w=PositionManager.getVisibleInstances();$.each(w,function(A,z){if(z.hasFeature(Features.Selectable)){var B=PositionManager.getElementVisibleArea(z,true);if(B&&y&&$.isInsideArea(B,y)){x.push({instance:z,order:z.getPropertyValue("order")})}}});return x};this.getInstancesFromOffsetInContainer=function(w,z,y){y=y?true:false;var x=[];var A=w;$.each(A.childInstances,function(C,B){if(B.hasFeature(Features.DesignElement)&&B.canMove.isTrue()){var D=PositionManager.getElementOffset(B,y);if(D&&D.top>=z){x.push(B)}}});return x};this.getInstancesFromOffset=function(w,y){var x=[];var z=w;while(z){$.each(z.childInstances,function(B,A){if(A.hasFeature(Features.DesignElement)&&A.canMove.isTrue()){var C=PositionManager.getElementOffset(A,true);if(C&&C.top>=y){x.push(A)}}});y=PositionManager.getElementOffset(z,true).top+z.getSize().height;if(!z.hasFeature(Features.PageSection)){z=z.parentInstance}else{z=null}}return x};this.getTopMostInstanceInOffset=function(x){var w=p.getInstancesInOffset(x);if(w.length===0){return undefined}return $.max(w,function(y){return y.order}).item.instance};this.getClientVisibleInstances=function(){return j};this.getVisibleInstances=function(){return r};this.visibilityTreeAttach=function(y){var z;var x=!y.hasParent()||p.isElementVisible(y.parentInstance);if(!y.isDeleted&&x&&(!p.isElementVisible(y))){PositionManager.UpdateBatch.start();var C=[];var w=[y];for(z=0;z<w.length;z++){var B=w[z];if(B.isVisible){C.push(B);var A=u(B);if(A){A.isVisible=true;$.merge(w,B.getChildInstances())}}}LayoutManager.requestUpdatePosition(y);LayoutManager.beginLayoutUpdateBatch();PositionManager.VisibilityUpdateBatch.start();LayoutManager.refreshElementsLayout(C,true);for(z=0;z<C.length;z++){h(C[z])}PositionManager.VisibilityUpdateBatch.finish();LayoutManager.endLayoutUpdateBatch();PositionManager.UpdateBatch.finish()}};this.visibilityTreeDetach=function(x){var y;if(!p.isElementVisible(x)||x.isDeleted){return}var A=[];var w=[x];for(y=0;y<w.length;y++){var B=w[y];var z=u(B);if(z&&z.isVisible){A.push(B);z.isVisible=false;$.merge(w,B.getChildInstances())}}PositionManager.UpdateBatch.start();LayoutManager.requestUpdatePosition(A);PositionManager.VisibilityUpdateBatch.start();for(y=0;y<A.length;y++){h(A[y])}PositionManager.VisibilityUpdateBatch.finish();PositionManager.UpdateBatch.finish()};function u(x){var w=x?c[x.id]:null;return w}this.isElementVisible=function(w){var x=u(w);if(!x||w.isDeleted){return false}return x.isVisible};this.getElementAbsoluteOffset=function(w){return p.getElementOffset(w,true)};this.getElementOffset=function(w,A){if(A===undefined){A=false}var B={};var x=u(w);if(!x){return w?$.extend({},w.getPropertyValue("sizeAndPosition")):null}var y=x.offset;var z=$.clonePosition(y);if(A){B=$.getAbsoluteOffset(z,s())}else{B=z}return B};this.getOverlappingInstances=function(x,z,w){if(!x||!z||z.length===0){return[]}var y=PositionManager.getElementArea(x);if(w){y=$.expandArea(y,w)}return $.grep(z,function(B){if(B!==x&&B.elementType!==ElementsTypes.page){var A=PositionManager.getElementArea(B);return $.areasOverlap(A,y)}else{return false}})};this.getAreaOverlappingInstances=function(y,A,w,z){if(!y||!A||A.length===0){return[]}var x=y;if(w){x=$.expandArea(x,w)}return $.grep(A,function(C){if(C.elementType!==ElementsTypes.page){var B=PositionManager.getElementArea(C,z);return $.areasOverlap(B,x)}else{return false}})};this.getInstancesInsideArea=function(x,z,w,y){if(!x||!z||z.length===0){return[]}if(w){x=$.expandArea(x,w)}return $.grep(z,function(A){if(A.elementType!==ElementsTypes.page){var B=PositionManager.getElementArea(A,y);return $.containsArea(x,B)}else{return false}})};this.getElementArea=function(w,z,x,y){x=x?x:PositionManager.getElementOffset;y=y?y:PositionManager.getElementSize;if(PositionManager.isElementVisible(w)){return $.getArea(x(w,z),y(w))}else{return null}};this.getElementsArea=function(z,y,w){w=w?w:p.getElementArea;var x={top:Infinity,left:Infinity,bottom:-Infinity,right:-Infinity};$.each(z,function(C,A){var B=w(A,y);if(B){if(B.left<x.left){x.left=B.left}if(B.top<x.top){x.top=B.top}if(B.right>x.right){x.right=B.right}if(B.bottom>x.bottom){x.bottom=B.bottom}}});x.width=x.right-x.left;x.height=x.bottom-x.top;return $.getArea(x,x)};this.getElementsAreaData=function(w,B){var A;var F;var D;var z=A=F=D=w[0];var y={top:Infinity,left:Infinity,bottom:-Infinity,right:-Infinity};$.each(w,function(J,H){var I=p.getElementArea(H,B);if(I){if(I.left<y.left){y.left=I.left;F=H}if(I.top<y.top){y.top=I.top;z=H}if(I.right>y.right){y.right=I.right;D=H}if(I.bottom>y.bottom){y.bottom=I.bottom;A=H}}});var E=$.max(w,function(H){return H.getSize().height}).value;var G=$.min(w,function(H){return H.getSize().height}).value;var C=$.max(w,function(H){return H.getSize().width}).value;var x=$.min(w,function(H){return H.getSize().width}).value;y.width=y.right-y.left;y.height=y.bottom-y.top;y=$.getArea(y,y);return{topInstance:z,bottomInstance:A,leftInstance:F,rightInstance:D,maxWidth:C,maxHeight:E,minWidth:x,minHeight:G,area:y}};this.getElementContentArea=function(w,y){var x=PositionManager.getElementArea(w,y);return $.shrinkArea(x,ElementsUtil.getElementContentMargins(w))};this.getInstnaceActualOffset=function(w,x){var y=p.getElementOffset(w,x);return p.unZoomPosition(y)};this.unZoomPosition=function(y){if(y===null||y===undefined){return}var w={left:y.left,top:y.top};var x={};x.top=Math.floor(w.top);x.left=Math.floor(w.left);if(w.top!==x.top){w.top=x.top+1}if(w.left!==x.left){w.left=x.left+1}return w};this.getElementSize=function(w){var y=u(w);if(!y){return $.extend({},w.getPropertyValue("sizeAndPosition"))}var x=y.size;return $.cloneSize(x)};this.getContentSize=function(w){var y;if(w.hasFeature(Features.HasBorder)){y=w.getActualPropertyValue("borderWidth")}else{y={left:0,top:0,bottom:0,right:0}}var z=w.getPropertyValue("padding");if(z===undefined){z={left:0,top:0,bottom:0,right:0}}var x=w.getSize();if(!x){x=w.getPropertyValue("sizeAndPosition")}return{width:x.width-y.left-y.right-z.left-z.right,height:x.height-y.top-y.bottom-z.top-z.bottom}};this.isAreaInViewPort=function(x){var w=DesignerManager.calculateDesignerArea();if((x.bottom<w.top||x.top>w.bottom)||(x.right<w.left||x.left>w.right)){return false}return true};this.isElementInViewPort=function(w){var x=PositionManager.getElementArea(w,true);return p.isAreaInViewPort(x)};this.getElementVisibleArea=function(w,A){if(A===undefined){A=false}var y=u(w);if(!y){return null}var x=y.visibleArea;var z=$.extendedAreaInfo(x);if(A){return $.getAbsoluteArea(z,s())}else{return z}};function a(w){return $.relativeOffset(w.offset(),s())}function h(w){var x=u(w);if(x&&x.isVisible){r[w.id]=w}else{delete r[w.id]}PositionManager.VisibilityUpdateBatch.fireEvent(w.visibilityChangedEvent,{instance:w},function(){return !w.isDeleted});PositionManager.VisibilityUpdateBatch.fireEvent(PositionManager.Events.ElementsVisibilityChanged,{instances:[w]},function(){return !w.isDeleted})}function b(w){var y=u(w);var z=j[w.id]!==undefined;var x=y?y.visibleArea!==null:z;OperationsBatch.fireOnBatchesComplete([PositionManager.UpdateBatch,PositionManager.VisibilityUpdateBatch],w.visibleAreaChangedEvent,function(){return !w.isDeleted});OperationsBatch.fireOnBatchesComplete([PositionManager.UpdateBatch,PositionManager.VisibilityUpdateBatch],PositionManager.Events.ElementsVisibleAreaChanged,function(){return !w.isDeleted});if(z!==x){if(x){j[w.id]=w}else{delete j[w.id]}OperationsBatch.fireOnBatchesComplete([PositionManager.UpdateBatch,PositionManager.VisibilityUpdateBatch],w.clientVisibilityChangedEvent,function(){return !w.isDeleted})}}function v(A,B){var z=ElementsUtil.getHierarchiesUnion(A);var y=[];var x=k.offset();var w=undefined;$.each(z,function(G,D){var F=u(D);if(!F){return true}var C=F.isVisible;var E;if(w&&C){E={left:w.left+F.offset.left,top:w.top+F.offset.top}}else{E=D.$element.offset()}var H=C?$.relativeOffset(E,x):null;if(!$.offsetsEqual(H,F.offset)){if(C){if(B&&w===undefined&&C){w={left:E.left-F.offset.left,top:E.top-F.offset.top}}F.offset=H;p.updateInstanceLastPosition(D.id,H);y.push(D);PositionManager.UpdateBatch.fireEvent(D.offsetChangedEvent,undefined,function(){if(PositionManager.isElementVisible(D)){return true}else{F=null;return false}})}}});return y}function m(x){var w=[];$.each(x,function(C,z){var A=u(z);if(!A){return true}var y=PositionManager.isElementVisible(z);var B=y?z.$element.elementContentSize():null;if(!$.sizesEqual(B,A.size)){if(y){var D=$.cloneSize(A.size);if(B){B.width=B.width>0?B.width:0;B.height=B.height>0?B.height:0}A.size=$.cloneSize(B);p.updateInstanceLastSize(z.id,B);w.push(z);PositionManager.UpdateBatch.fireEvent(z.sizeChangedEvent,{prevSize:D,size:B},function(){if(PositionManager.isElementVisible(z)){return true}else{A=null;return false}})}}});return w}this.updatePosition=function(B,y){y=$.extend({updateOffset:true,updateSize:true,hintMoveTogether:false},y);B=$.makeArray(B);B=$.grep(B,function(C){return p.isElementVisible(C)});PositionManager.UpdateBatch.start();var x=[];var A=[];if(y.updateOffset){x=v(B,y.hintMoveTogether)}if(y.updateSize){A=m(B)}var w=ElementsUtil.unionInstances(x,A);for(var z=0;z<w.length;z++){o(w[z])}PositionManager.UpdateBatch.finish();return{changedOffsets:x,changedSizes:A,changedInstances:w}};function o(D,y){var z=u(D);var x=y;if(!z){return}if(x===undefined){if(!z.isVisible){x=null}else{if(z.offset===null||z.size===null){x=null}else{var w=$.getArea(z.offset,z.size);if(D.elementType===ElementsTypes.page||!D.hasParent()){x=w}else{var C=D.getParent();var E=t(C);if(E){x=$.getAreasOverlap(E,w)}else{x=w}}}}}var A=!$.areasEqual(z.visibleArea,x);if(A){z.visibleArea=$.extendedAreaInfo(x);b(D);var B=x===null?null:undefined;$.each(D.getChildInstances(),function(G,F){o(F,B)})}}function t(w){var A=w.getChildrenViewPort();if(A&&u(w)){var z=PositionManager.getElementVisibleArea(w);var y=a(A);var x=A.elementContentSize();return $.getAreasOverlap(z,$.getArea(y,x))}else{return null}}function s(){if(q===undefined){q=k.offset()}return q}this.getPositioningRootOffset=function(){return s()};this.createElementAreaBinding=function(w,x){var y=SimpleEvent.createEventBinding(["sizeChangedEvent","offsetChangedEvent"],function(){w(PositionManager.getElementArea(y.getEventSource(),x))});return y};this.isInsideElementArea=function(w,A){if(!w||!A){return false}var x;if(w.elementType===ElementsTypes.group){x=$.grep(w.getDescendingInstances(false),function(C){return C.elementType!==ElementsTypes.group})}else{x=[w]}for(var z=0;z<x.length;z++){var y=x[z];if(PositionManager.isElementVisible(y)){var B=PositionManager.getElementVisibleArea(y,true);if(B&&$.isInsideArea(B,A)){return true}}}return false}}();var RotationManager=new function(){var j;var a;var d;var c;var h;this.initialize=function(){j=SelectionArea.addRightContextDecorator($("<div class='rotation-handle-container'></div>")).addDisplayingStates().bindStateToFlag(ContextManager.CanBeMoved,{stateToggledValue:FlagsObserverStates.AllTrue,stateType:StatesTypes.Displaying}).bindStateToFlag(Modes.ScaleMode.flag,{stateToggledValue:false,stateType:StatesTypes.Displaying}).bindStateToFlag(Modes.ExpressMode.flag,{stateToggledValue:false,stateType:StatesTypes.Displaying}).bindStateToFlag(Modes.PreviewMode.flag,{stateToggledValue:false,stateType:StatesTypes.Displaying}).disableSelectionTriggering();a=$("<div class='rotation-handle sprite-icon sprite-rotation-handle'></div>").appendTo(j).makeButton(ButtonSettings.SimpleWithHiding).mousedown(function(n){var m=$.getMouseOffset(n);b();var l=$.getDistance(c,m);$(document).bind("mousemove.rotation",function(p){var q=$.getMouseOffset(p);var o=$.getDistance(q,c);var t=$.getDistance(q,m);var s=(Math.pow(l,2)+Math.pow(o,2)-Math.pow(t,2))/(2*l*o);var r=Math.acos(s)*(360/(Math.PI*2));if(i(m,c,q)){r=360-r}r=Math.round(r);g(r)});$(document).one("mouseup",function(){$(document).unbind(".rotation");f()})});d=$("<div class='clear-rotation-button sprite-icon sprite-clear-rotation'></div>").makeButton(ButtonSettings.Simple).buttonClick(function(){ContextManager.apply(function(){this.setPropertyValue("rotationAngle",0)})}).bindStateToContext({stateType:StatesTypes.Displaying,propertyName:"rotationAngle",propertyValue:0,not:true}).appendTo(j);SelectionManager.Events.SelectionChangedSimple.bind(function(){h=SelectionManager.countSelectedElements()>0&&$.all(SelectionManager.getSelectedInstances(),function(){return this.hasFeature(Features.Rotatable)&&this.canRotate()});j.toggleDisplayed(h,"Context");if(ContextManager.CanBeMoved.allTrue()){k()}});SelectionArea.Events.SelectionAreaChanged.bind(function(){k()});DesignerStateManager.onStatesChange([DesignerStates.Dragging,DesignerStates.Selecting,DesignerStates.Resizing,DesignerStates.EditingElement,DesignerStates.EditingProperties],function(l){j.toggleDisplayed(false,l)},function(l){j.toggleDisplayed(true,l)})};function k(){if(h){var l=SelectionArea.getSelectionArea();if(l!==null){c=SelectionArea.getSelectionArea(true).center}}}function i(m,l,n){return((l.left-m.left)*(n.top-m.top)-(l.top-m.top)*(n.left-m.left))>0}function b(){OperationsManager.beginAtomicBatch(true,"rotation");ContextManager.apply(function(){this.data.startingRotationAngle=this.getPropertyValue("rotationAngle")});ContextManager.Events.PropertyChangingStart.fire();NotificationPanel.showNotification("Angle: 0")}function g(l){ContextManager.apply(function(){this.setPropertyValue("rotationAngle",(this.data.startingRotationAngle+l)%360)});NotificationPanel.showNotification("Angle: {0}".format(l))}function f(){ContextManager.Events.PropertyChangingFinish.fire();NotificationPanel.hideNotification();OperationsManager.endAtomicBatch(true)}}();var ElementsUtil=new function(){this.getElementContentMargins=function(a){var b;if(a.hasFeature(Features.HasBorder)){b=a.getActualPropertyValue("borderWidth")}else{b={left:0,top:0,bottom:0,right:0}}var c=a.getPropertyValue("padding");if(c===undefined){c={left:0,top:0,bottom:0,right:0}}return{left:b.left+c.left,right:b.right+c.right,top:b.top+c.top,bottom:b.bottom+c.bottom}};this.areSameInstances=function(b,a){return DictionaryUtils.equalByKeys(ElementsUtil.mapInstancesByID(b),ElementsUtil.mapInstancesByID(a))};this.getHierarchiesRoots=function(g){var d=ElementsUtil.mapInstancesByID(g);var f=$.getValues(d);for(var b=0;b<f.length;b++){var a=f[b];if(a.parentInstance){$.each(a.childInstances,function(j,h){c(h)})}}return $.getValues(d);function c(h){delete d[h.id];$.each(h.childInstances,function(k,j){c(j)})}};this.getHierarchiesUnion=function(k){var g=ElementsUtil.mapInstancesByID(k);var h=$.getValues(g);for(var f=0;f<h.length;f++){var a=h[f];var d=a.getChildInstances();for(var c=0;c<d.length;c++){var b=d[c];if(g[b.id]===undefined){h.push(b)}}}return h};this.getHierarchiesAllInstances=function(k){var c=ElementsUtil.mapInstancesByID(k);var h=$.getValues(c);for(var g=0;g<h.length;g++){var a=h[g];var f=a.getDescendingInstances();for(var d=0;d<f.length;d++){var b=f[d];if(c[b.id]===undefined){h.push(b)}}}return h};this.unionInstances=function(){return $.getValues(ElementsUtil.mapInstancesByID.apply(this,arguments))};this.mapInstancesByID=function(){var b={};for(var d=0;d<arguments.length;d++){var f=arguments[d];for(var c=0;c<f.length;c++){var a=f[c];b[a.id]=a}}return b};this.eliminateDescendingInstances=function(a){var c=ElementsUtil.mapInstancesByRoot(a);var k=[];for(var b in c){var g=[];var f=c[b];var j=$.count(f);g.push(ElementsManager.getInstanceByID(b));for(var d=0;d<g.length&&j>0;d++){var h=g[d];if(f[h.id]===undefined){$.merge(g,h.getChildInstances())}else{k.push(h);j--}}}return k};this.getCommonAncestors=function(a,f,j){j=$.valueOrDefault(j,true);a=$.makeArray(a);if(a.length===0){return[]}if(!f){a=ElementsUtil.eliminateDescendingInstances(a)}if(a.length===1){return a[0].getParents(j)}var k={};var g=a[0].getParents(false);var c;for(c=0;c<g.length;c++){k[g[c].id]=c}var h=undefined;for(c=1;c<a.length;c++){var b=a[c].getParent();while(b&&k[b.id]===undefined){b=b.getParent()}if(!b){return[]}var d=k[b.id];if(h===undefined||d>h){h=d}}return g.slice(h)};this.getAllAncestors=function(b,a){b=$.makeArray(b);if(b.length===0){return[]}var c={};$.each(b,function(g,d){if(!c[d.id]){var f=d.getParents(a);var h;for(h=0;h<f.length;h++){c[f[h].id]=f[h]}}});return c};this.getSelectableChildren=function(b){if(!b){return[]}var d=[];var a=[];$.merge(a,b.getChildInstances());while(a.length>0){var c=a.pop();if(PositionManager.isElementVisible(c)){if(c.canSelect()){d.push(c);if(c.hasFeature(Features.ItemsContainer)&&!c.selectBeforeChildren()){$.merge(a,c.getChildInstances())}}else{$.merge(a,c.getChildInstances())}}}return d};this.findAncestor=function(b,a,c){if(c===undefined){c=false}var d=c?b:b.parentInstance;while(d&&!a(d)){d=d.parentInstance}return d};this.findCommonAncestor=function(g,b){var c=undefined;for(var f=0;f<g.length;f++){var a=g[f];var d=ElementsUtil.findAncestor(a,b);if(!d){return undefined}else{if(c===undefined){c=d}else{if(c!==d){return undefined}}}}return c};this.findFirstDescendingInstances=function(d,h,f){var c=[];var b=[];if(f){b.push(d)}else{$.merge(b,d.getChildInstances())}for(var g=0;g<b.length;g++){var a=b[g];if(h(a)){c.push(a)}else{$.merge(b,a.getChildInstances())}}return c};this.mapInstancesByRoot=function(f){var d={};for(var c=0;c<f.length;c++){var a=f[c];var g=ElementsManager.getInstanceRootID(a);var b=d[g];if(b===undefined){b={};d[g]=b}b[a.id]=a}return d};this.instancesToElements=function(b){var a=$([]);$.each(b,function(d,c){a.pushElements(c.$element)});return a};this.elementsToInstances=function(a){var b=[];a.each(function(){b.push($instance(this))});return b};this.getInstanceNumericID=function(a){if(typeof a==="string"){if(a.indexOf("id")===0){a=a.substr(2)}a=parseInt(a)}return a}}();var ThemesTypes={Font:"font",Color:"color"};var ColorThemeRoles={Background1:"background1",Background2:"background2",Background3:"background3",Text1:"text1",Text2:"text2",Text3:"text3",Color1:"color1",Color2:"color2",Color3:"color3",Color4:"color4"};var ThemesManager=new function(){this.Themes={};this.DefaultColorTheme={id:"DefaultColorTheme",title:"White",type:ThemesTypes.Color,themeValues:{background1:"white",background2:"#C6E7FC",background3:"#31B6FD",text1:"black",text2:"#073E87",text3:"#4584D3",color1:"#A5D028",color2:"#5BD078",color3:"#F5C040",color4:"#05E0DB"}};this.DefaultFontsTheme={id:"DefaultFontsTheme",title:"Standard Fonts",type:ThemesTypes.Font,themeValues:{title:"Tahoma",subtitle:"Tahoma",text:"Tahoma"}};var i=this;var c={};var d={};var g;a();this.initialize=function(j){j=$.extend({usedThemes:{DefaultColorTheme:ThemesManager.DefaultColorTheme,DefaultFontsTheme:ThemesManager.DefaultFontsTheme},pagesThemes:{},defaultThemes:{color:ThemesManager.DefaultColorTheme.id,font:ThemesManager.DefaultFontsTheme.id}},j);d=j.usedThemes;c=j.pagesThemes;g=j.defaultThemes;if(Global.IsDesigner){for(var k in d){var l=d[k];ThemesManager.Themes[l.type].put(l)}}PageManager.Events.PageDeleted.bind(function(m){delete c[m];f()})};this.getPagesThemes=function(){return c};this.getUsedThemes=function(){return d};function f(){for(var l in d){var m=d[l].type;var k=false;if(g[m]===l){k=true}else{for(var j in c){if(c[j][m]===l){k=true}}}if(!k){delete d[l]}}}this.getSiteThemesInformation=function(){var j={};$.each(c,function(k,l){if(PageManager.isPage(k)){j[k]=l}});return{usedThemes:d,pagesThemes:j,defaultThemes:g}};this.assignThemesToNewPage=function(j){if(c[j]===undefined){var l={};var m=$.getValues(ThemesTypes);for(var k=0;k<m.length;k++){var n=m[k];l[n]=g[n]}c[j]=l}};this.getPageThemes=function(k){if(k===undefined||k===null){k=PageManager.getCurrentPage();if(k===undefined||k===null){return null}}var j=(typeof k==="string")?k:k.id;var l=ElementsManager.getInstanceByID(j);if(!l||l.elementType!==ElementsTypes.page){j=PageManager.getCurrentPageId()}return $.mapDictionary(c[j],function(m,n){var o=d[n];if(o===undefined){if(m===ThemesTypes.Color){d.DefaultColorTheme=ThemesManager.DefaultColorTheme;return ThemesManager.DefaultColorTheme}else{if(m===ThemesTypes.Font){d.DefaultFontsTheme=ThemesManager.DefaultFontsTheme;return ThemesManager.DefaultFontsTheme}}}return o})};this.isBinding=function(j){return j&&typeof j==="object"&&!!j.themeBinding};this.evaluateCurrentPageThemeBinding=function(k){if(!i.isBinding(k)){return k}var j=PageManager.getCurrentPage();if(!j){return undefined}return i.evaluateThemeBinding(j.getPageThemes(),k)};this.evaluateThemeBinding=function(k,l){if($.isFunction(k)){k=k()}if(i.isBinding(l)){var j=i.getValueInTheme(k[l.binding],l.role);if(l.binding===ThemesTypes.Color){return h(j,l).toCSS()}else{return j}}else{return l}};this.getValueInTheme=function(j,k){return j.themeValues[k]};this.createBinding=function(j,k){return{themeBinding:true,binding:j,role:k}};this.bindingToString=function(j){return"({0},{1},{2},{3},{4},{5},{6},{7})".format(j.type,j.role,j.saturation,j.saturationDelta,j.brightness,j.brightnessDelta,j.opacity,j.opacityDelta)};function h(k,l){var j=$.Color(k).toHSL();if(l.saturation!==undefined){j=$.modifyCoordinate(j,ColorCoordinate.Saturation,l.saturation)}else{if(l.saturationDelta){j=$.adjustCoordinate(j,ColorCoordinate.Saturation,l.saturationDelta)}}if(l.brightness!==undefined){j=$.modifyCoordinate(j,ColorCoordinate.Brightness,l.brightness)}else{if(l.brightnessDelta){j=$.adjustCoordinate(j,ColorCoordinate.Brightness,l.brightnessDelta)}}if(l.opacity!==undefined){j=$.modifyCoordinate(j,ColorCoordinate.Opacity,l.opacity)}else{if(l.opacityDelta){j=$.adjustCoordinate(j,ColorCoordinate.Opacity,l.opacityDelta)}}return j}function b(j){return new RemoteCollection({fetchingFunction:function(m,k,n,l){n([])},insertionFunction:function(k,m,l){},removingFunction:function(k,l,n,m){},getIDFunction:function(){return this.id},setIDFunction:function(k){this.id=k}})}function a(){if(Global.IsDesigner){var k=$.getValues(ThemesTypes);for(var j=0;j<k.length;j++){var l=k[j];i.Themes[l]=b(l)}}ElementInstance.addInstancePrototypeExtension(function(m){return{getPageThemes:function(){return ThemesManager.getPageThemes(m.root)}}})}}();(function(){if(Global.IsDesigner){ThemesManager.Themes[ThemesTypes.Color].put(ThemesManager.DefaultColorTheme);ThemesManager.Themes[ThemesTypes.Color].put([{id:"DarkTheme",title:"Dark",type:ThemesTypes.Color,themeValues:{background1:"#060503",background2:"#734F00",background3:"#fbfbd5",text1:"white",text2:"#456f25",text3:"#4285df",color1:"#F5846B",color2:"#901609",color3:"#c77000",color4:"#f0cc2d"}},{id:"Theme2",title:"Young",type:ThemesTypes.Color,themeValues:{background1:"#6699FF",background2:"#CC66FF",background3:"#E6FF66",text1:"#FFE600",text2:"#99FF66",text3:"#2970FF",color1:"#66FF7F",color2:"#FFCC66",color3:"#FF6699",color4:"#66E6FF"}},{id:"Theme3",title:"Art",type:ThemesTypes.Color,themeValues:{background1:"#00FF66",background2:"#001AFF",background3:"#FF0099",text1:"white",text2:"#B1FF3D",text3:"#FF6600",color1:"#FF001A",color2:"#0099FF",color3:"#00FFE6",color4:"#8B3DFF"}},{id:"Theme4",title:"Sunrise",type:ThemesTypes.Color,themeValues:{background1:"#060503",background2:"#734F00",background3:"#fbfbd5",text1:"white",text2:"#456f25",text3:"#4285df",color1:"#F5846B",color2:"#901609",color3:"#c77000",color4:"#f0cc2d"}}])}})();var ColorsManager=new function(){this.Events={ColorCopied:SimpleEvent.create()};this.UserColors=new ObservableCollection();this.PresetColorsSwatch=["transparent","#8781bd","#73469b","#3e5ba9","#0071bb","#37afd3","#08f3ff","#d3edf1","#00adef","#8dd4df","#00a99c","#c5e3c7","#81c99c","#8cc63e","#f5ef84","#fff100","#fdf7b9","#f7931d","#e8a051","#f69679","#ed135a","#c976a6","#e71d25","#e26e78","#ec008b","#ebbdd8","#91268f","#000","#222","#444","#666","#888","#aaa","#ccc","#eee","#fff"];var c=undefined;var a=false;this.initialize=function(){var d=UserSettingsManager.getValue("userColors");if(d){for(var f=0;f<d.length;f++){ColorsManager.UserColors.put({id:f,color:d[f]})}}};this.addUserColor=function(d){d=ColorsManager.getSolidColor(d);var h=d.getAlpha();if(h===0){d="transparent"}else{if(h!==1){d.setAlpha(1);d=d.toHEX()}}var i=ColorsManager.UserColors.getItemsValues();var g=$.maxValue(i,function(j){return j.id});var f={id:g+1,color:d};i.push(f);ColorsManager.UserColors.put(f);b()};this.removeUserColor=function(d){ColorsManager.UserColors.remove(d);b()};function b(){if(WebzaiController.isLoggedIn()){var f=ColorsManager.UserColors.getItemsValues();f.orderBy(function(g){return g.id});var d=$.map(f,function(g){return g.color});UserSettingsManager.setValue("userColors",d)}else{if(!a){a=true;WebzaiController.UserChangedEvent.one(b)}}}this.resetUserColors=function(){ColorsManager.UserColors.clear();b()};this.copyColor=function(d){c=d;ColorsManager.Events.ColorCopied.fire(ColorsManager,d)};this.getCopiedColor=function(){return c};this.getHueSwatch=function(n,l){var f=(n/l);var m=1/f;var d=1/l;var g=["transparent","white","black"];for(var k=0;k<f;k++){for(var h=0;h<l;h++){g.push($.Color([0+k*m,d+h*d,2/3],"HSL").toCSS())}}return g};this.getElementColors=function(d){var f=[];var g=d.getPropertyValue("backgroundColor",undefined,true);if($.isPlainObject(g)&&g.gradient!==undefined){}else{f.push(g)}f.push(d.getPropertyValue("borderColor","left",true));f.push(d.getPropertyValue("borderColor","top",true));f.push(d.getPropertyValue("borderColor","right",true));f.push(d.getPropertyValue("borderColor","bottom",true));f.push(d.getPropertyValue("shadow","color",true));f.push(d.getPropertyValue("innerShadow","color",true));f.push(d.getPropertyValue("fontColor",undefined,true));f=$.grep(f,function(h){return h!==undefined});return $.quickUnique(f,function(h){if(ThemesManager.isBinding(h)){return ThemesManager.bindingToString(h)}else{return h}})};this.convertToSolidColor=function(g,f){f=$.valueOrDefault(f,false);var h=g;if($.isGradient(g)){var d=g.gradient.colorStops[0];if(d){h=d.value}else{h=$.Color([0,0,0,1],"HSL")}}else{if(ThemesManager.isBinding(g)){h=$.Color(ThemesManager.evaluateCurrentPageThemeBinding(g))}}if(f){return $.Color(ThemeColorsManager.evaluateColorBinding(h))}else{if(ThemeColorsManager.isColorBinding(h)){return h}else{return $.Color(h)}}};this.getSolidColor=function(f){if(!f){return $.Color([0,0,0,1],"HSL")}f=ThemeColorsManager.evaluateColorBinding(f);if($.isGradient(f)){var d=f.gradient.colorStops[0];if(d){return $.Color(d.value)}else{return $.Color([0,0,0,1],"HSL")}}if(ThemesManager.isBinding(f)){f=$.Color(ThemesManager.evaluateCurrentPageThemeBinding(f))}return $.Color(f)};this.isSolidColor=function(d){return !$.isGradient(d)&&!ThemesManager.isBinding(d)}}();var FaceBookManager=new (function(){this.FaceBookInitializingBatch=OperationsBatch.create();var a;var d;var b=false;var c=false;this.isInitialized=function(){return b};this.initialize=function(){if(!c){c=true;$('<div id="fb-root" class="state-hidden"></div>').prependTo("body");a=$.valueOrDefault(Settings.FacebookAppID,Global.FacebookAppID);d=Global.FacebookChannelFileLocation;FaceBookManager.FaceBookInitializingBatch.start();window.fbAsyncInit=function(){FaceBookManager.FaceBookInitializingBatch.finish();b=true};(function(i,f,j){var h,g=i.getElementsByTagName(f)[0];if(i.getElementById(j)){return}h=i.createElement(f);h.id=j;h.async=true;h.src="//connect.facebook.net/en_US/all.js#xfbml=false&cookie=true&status=true&channelUrl="+d+"&appId="+a;g.parentNode.insertBefore(h,g)}(document,"script","facebook-jssdk"))}};this.getAppId=function(){return a};return this})();var ShouldSaveReasons={ShouldSave:1,Operation:2};var SiteManager=new function(){var s=this;var m;var i;var r;var g;var k;var o={};var n;var l;this.SitePublishedEvent=SimpleEvent.create();this.SiteSavedEvent=SimpleEvent.create();this.EditedSiteChangedEvent=SimpleEvent.create();this.SiteExists=ObservableFlag.create();this.AjaxNavigationFlag=ObservableFlag.create(true);if(Global.IsDesigner){this.SavingProcess=AjaxProcess.create({startCallback:function(v){Panels.AjaxOperationsPanel.getPanel().addAjaxProcess(v,{notification:"Saving Site",removeOnCompletion:true})},hasProgress:false});this.PublishingProcess=AjaxProcess.create()}this.initialize=function(v){m=v;if(v.siteMap){r=JSON.parse(v.siteMap);if(r){g=r.routing}if(!g){g={error404:{destination:RoutingDestination.HomePage},rules:[]}}}n=m.isTemplate;l=m.baseVersion;if(n){k=m.targetSiteID}else{k=m.groupId}SiteManager.SiteExists.setValue(SiteManager.isExistingSite())};this.setSiteSettings=function(v){o=$.extend({ajaxBasedNavigation:true,siteMetaTags:"",siteHeaderCode:"",siteFooterCode:""},v);s.AjaxNavigationFlag.setValue(o.ajaxBasedNavigation)};this.getBaseVersion=function(){return l};this.isResetTemplateMode=function(){return SiteManager.getBaseVersion()==="first"};this.getSiteSettings=function(v){return o};this.getSiteMap=function(){return r};this.getSiteRouting=function(){return g};this.setSiteRouting=function(v){g=v};this.isPremium=function(){return m.isPremium};this.getSiteConfiguration=function(){return m};this.isPublished=function(){return m.isPublished};this.isSavedSite=function(){return m.isSaved};this.isTemplate=function(){return n};this.isExistingSite=function(){return SiteManager.getSiteID()!==null};this.getSiteName=function(){return m.groupName};this.getSiteCreatorUserName=function(){return m.siteCreatorUserName};this.getSiteLimitations=function(){return m.limitations};this.getSiteID=function(){return k};this.getSiteType=function(){return m.siteType};this.getTemplateCategory=function(){return m.templateCategory};this.getTemplateCategoryPosition=function(){return m.templateCategoryPosition};this.setEditedSite=function(w,x,v){m.groupName=x;m.isPublished=v;k=w;s.EditedSiteChangedEvent.fire()};this.getEditedTemplateName=function(){return m.templateTitle};this.getEditedTemplateID=function(){return m.templateID};this.getSiteLocation=function(v){v=$.valueOrDefault(v,s.getSiteName());if(v!==null){if(PageData.isNewServer){return Settings.UserSiteAddressFormat.format({user:$.valueOrDefault(WebzaiController.getCurrentAccountSubdomain(),SiteManager.getSiteCreatorUserName()),site:SiteManager.getSiteName()})}else{return Settings.UserSiteAddressFormat.format({user:$.valueOrDefault(SiteManager.getSiteCreatorUserName(),WebzaiController.getCurrentUserName()),site:SiteManager.getSiteName()})}}};this.publish=function(y,v){if(i){return}i=true;var x=VersionController.beginSaving(MasterPagesManager.getSavingMasterTemplatesVersionConrollers());var w=VersionController.beginSaving(PageManager.getSavingPagesVersionConrollers());SiteManager.PublishingProcess.start(function(z){t(SavedVersionType.Published,z.onSuccess,z.onError,z.onProgress)},{onSuccess:function(){b();y();i=false;x.finishSaving();w.finishSaving()},onError:function(z){if(v){v(z)}i=false}})};this.publishAs=function(z,y,v){if(i){return}var x=VersionController.beginSaving(MasterPagesManager.getSavingMasterTemplatesVersionConrollers());var w=VersionController.beginSaving(PageManager.getSavingPagesVersionConrollers());i=true;d(SavedVersionType.Published,z,function(){i=false;y();x.finishSaving();w.finishSaving()},function(A){i=false;v(A)})};this.save=function(y,v){var x=VersionController.beginSaving(MasterPagesManager.getSavingMasterTemplatesVersionConrollers());var w=VersionController.beginSaving(PageManager.getSavingPagesVersionConrollers());SiteManager.SavingProcess.start(function(z){t(SavedVersionType.Normal,z.onSuccess,z.onError,z.onProgress)},{onSuccess:function(){x.finishSaving();w.finishSaving();y()},onError:v})};this.saveAs=function(y,z,v){var x=VersionController.beginSaving(MasterPagesManager.getSavingMasterTemplatesVersionConrollers());var w=VersionController.beginSaving(PageManager.getSavingPagesVersionConrollers());d(SavedVersionType.Normal,y,function(){x.finishSaving();w.finishSaving();if(z){z()}},v)};this.triggerAutoSave=function(w,v){if(s.isSavedSite()){t(SavedVersionType.AutoSaved,w,v)}};function d(y,x,w,v){ApplicationService.saveSiteAs(x,SiteManager.getEditedTemplateID(),SiteManager.getSiteInformation(),s.getSiteType(),y,SiteManager.getTemplateCategory(),SiteManager.getTemplateCategoryPosition(),ListsManager.getListNamesToCreate(),typeof AdditionalPostData!=="undefined"?AdditionalPostData:undefined,function(z){SiteManager.setEditedSite(z.id,z.name,y===SavedVersionType.Published);j(z.id);a();w(z);f(z)},v)}function t(y,x,v,w){Global.Events.BeforeSavingSite.fire();w(5);ApplicationService.saveSite(SiteManager.getSiteID(),SiteManager.getSiteInformation(),SiteManager.getBaseVersion(),s.getSiteType(),y,n?SiteManager.getEditedTemplateID():null,ListsManager.getListNamesToCreate(),function(z){if(SiteManager.isTemplate()){a()}x();f(z)},v,w)}function f(v){l=null;SiteManager.SiteSavedEvent.fire(SiteManager,v)}function j(v){if(!m.isSaved){m.isSaved=true;k=v;SiteManager.SiteExists.setTrue();m.siteCreatorUserName=WebzaiController.getCurrentUserName()}}function u(){var v=$.getRootWindow();if(v!==window){var w=v.location.hash;if(!w||w==="#"){w=""}if(w!==""){w=w+"&"}w=w+"siteID="+SiteManager.getSiteID();v.location.hash=w}}function a(){if(n){$.callRootFunction("setSiteEditingScope",SiteManager.getSiteID());n=false}}function b(){if(!m.isPublished){m.isPublished=true;s.SitePublishedEvent.fire()}}this.getSiteInformation=function(C){C=$.valueOrDefault(C,true);var D=C?function(F){return JSON.stringify(F)}:$.identity;var w=MasterPagesManager.getMasterPagesStructures();var y=PageManager.getPagesStructures(true);var E=c(y,w);var x={pagesStructure:PageManager.getPagesMetaData(),masterPages:MasterPagesManager.getMasterPagesMetaData(),fonts:FontsManager.getSiteFonts(),themes:ThemesManager.getSiteThemesInformation(),shouldShowDialog:Panels.DesignerLoadedPanel?Panels.DesignerLoadedPanel.getCheckBoxValue():false,siteSettings:o};var B=$.extend({pagesInformation:PageManager.getPagesData(),homePageID:PageManager.getMainPageId(),pagesHierarchies:PageManager.PagesHierarchy.getHierarchies(),listsInformation:ListsManager.getListsInformationForSaving()},o);var A=MasterPagesManager.getPagesToMasterPages();var v={mainPageID:PageManager.getMainPageId(),pages:$.map($.getValues(PageManager.AllPagesInformation.getItems()),function(F){return{id:F.id,name:F.title,index:F.index,pageListName:F.pageListName,masterPageListName:F.masterPageListName,masterPageID:A[F.id],urlAlias:F.urlAlias}}),routing:g};var z=q(E,h);return{pagesIDs:$.getKeys(x.pagesStructure.pagesData),siteMap:D(v),masterPagesIDs:$.getKeys(x.masterPages),pagesStructures:$.mapDictionary(y,function(F,G){StructureLoadingManager.preSaveHierarchy(G);return D(G)}),masterPagesStructures:$.mapDictionary(w,function(F,G){StructureLoadingManager.preSaveHierarchy(G.hierarchyInfo);return D(G)}),siteStructure:D(x),siteInformation:D(B),siteForms:z}};this.getFormFieldName=function(v){var w=$.trim(v.fieldName);if(w===""){w=$.trim(v.labelText)}if(w===""){w=v.id}return w};function h(v){var w={};$.each(v,function(y,A){if(A.type===ElementsTypes.FormElement.name){var B=A.elementProperties.formID;var z=A.elementProperties.dataInfo;var x={};$.each(z.currentData,function(E,C){var D=SiteManager.getFormFieldName(C);x[D]={name:D,type:FormFieldsTypes.ShortText,metaData:null}});w[B]={formID:B,email:A.elementProperties.targetEmail,fieldsInfo:x}}});return w}function q(x,v){var w={};var y={};$.each(x.pagesInstancesInfo,function(z,A){w[z]=v(A)});$.each(x.masterPagesInstancesInfo,function(z,A){y[z]=v(A)});return{pages:w,masterPages:y}}function c(x,v){var y={};var w={};$.each(x,function(z,A){var B=[];y[z]=B;$.each(A.structures,function(C,D){$.merge(B,p(D))})});$.each(v,function(z,B){var A=[];w[z]=A;if(B.hierarchyInfo&&B.hierarchyInfo.structures){$.each(B.hierarchyInfo.structures,function(C,D){$.merge(A,p(D))})}});return{pagesInstancesInfo:y,masterPagesInstancesInfo:w}}function p(v){var w=[];x(v);return w;function x(y){w.push({id:y.id,type:y.type,elementProperties:y.elementProperties,childElements:y.childElements});if(y.childElements){$.each(y.childElements,function(A,z){x(z)})}}}};var EcommerceManager=new (function(){this.Types={PayPal:"paypal",Google:"google"};this.SettingsNames={currency:"currency"};var b={currency:"USD"};var c={};var a={};c[AccountsManager.Types.PayPal]={};a[AccountsManager.Types.PayPal]=new ObservableCollection();this.setPayPalSettings=function(f,g,h){SiteSettingsManager.setValue("PayPal"+f,g,{onSuccess:h,onError:$.noop})};this.getPayPalSettings=function(f){return SiteSettingsManager.getValue("PayPal"+f,b[f])};this.initialize=function(){if(typeof(Storage)!=="undefined"&&localStorage.ecommerceCarts){c=$.extend(true,c,JSON.parse(localStorage.ecommerceCarts));a[AccountsManager.Types.PayPal].put($.getValues(c))}};this.addItem=function(g,f,h){if(!c[g][h]){c[g][h]=$.extend(true,{id:h},f);a[AccountsManager.Types.PayPal].put(f)}else{c[g][h].quantity=parseInt(f.quantity)+parseInt(c[g][h].quantity)+"";a[AccountsManager.Types.PayPal].put(c[g][h])}d()};this.removeItem=function(g,f,h){if(c[g][h]){c[g][h].quantity=parseInt(c[g][h].quantity)-parseInt(f.quantity)+"";if(c[g][h].quantity==="0"){delete c[g][h];a[AccountsManager.Types.PayPal].remove(h)}else{a[AccountsManager.Types.PayPal].put(c[g][h])}}d()};this.clearCart=function(f){delete c[f];c[f]={};a[AccountsManager.Types.PayPal].clear();d()};function d(){if(typeof(Storage)!=="undefined"){localStorage.ecommerceCarts=JSON.stringify(c)}}this.createButton=function(){var h=false;var g;var f={refresh:function(l,k,i,j){if(g){g.remove()}if(l===AccountsManager.Types.PayPal){g=PayPalButtonManager.createPayPalButton(AccountsManager.getAccountID(AccountsManager.Types.PayPal),k,i);g.appendTo(j)}f.buttonType=i;f.buttonData=k;f.type=l;f.$parent=j;return f},activate:function(i){var j=i.$element;if(f.type===AccountsManager.Types.PayPal){j.bind("click.paypalbutton",function(){g.submit()})}},deactivate:function(i){var j=i.$element;if(f.type===AccountsManager.Types.PayPal){j.unbind("click.paypalbutton")}}};return f};this.ButtonTypes={buynow:{title:"Buy Now",value:"buynow"},donate:{title:"Donate",value:"donate"},cart:{title:"Add To Cart",value:"cart"},view:{title:"Check Out",value:"view"}};this.Currencies=[{title:"U.S. Dollar",value:"USD"},{title:"Australian Dollar",value:"AUD"},{title:"Euro",value:"EUR"},{title:"Pound Sterling",value:"GBP"},{title:"Canadian Dollar",value:"CAD"},{title:"Brazilian Real",value:"BRL"},{title:"Israeli New Sheqel",value:"ILS"},{title:"Japanese Yen",value:"JPY"},{title:"Hong Kong Dollar",value:"HKD"},{title:"Mexican Peso",value:"MXN"},{title:"Norwegian Krone",value:"NOK"},{title:"Danish Krone",value:"DKK"},{title:"Czech Koruna",value:"K"},{title:"Hungarian Forint",value:"HUF"},{title:"New Zealand Dollar",value:"NZD"},{title:"Swiss Franc",value:"CHF"},{title:"Turkish Lira",value:"TRY"},{title:"Taiwan New Dollar ",value:"TWD"},{title:"Swedish Krona",value:"SEK"},{title:"Singapore Dollar",value:"SGD"},{title:"Philippine Peso",value:"PHP"}]})();var MasterPagesManager=new function(){this.MasterPages=new ObservableCollection({comparerFunction:function(t,s){if(t.id===s.id&&t.name===s.name&&$.defaultEqualityComparer(t.hierarchyInfo,s.hierarchyInfo)){return true}return false}});this.MasterPageEditingModeChanged=SimpleEvent.create();this.MasterPageEditingModeChangedFinished=SimpleEvent.create();this.MasterPageStateChanged=SimpleEvent.create();this.PagesInMasterPages={};this.EditingMasterPage=ObservableFlag.create(false,{valueChangeCallback:function(s){if(s){$("body").addClass("editing-master-template")}else{$("body").removeClass("editing-master-template")}}});this.CurrentMasterPageChanged=SimpleEvent.create();this.updateCurrentMasterPageBatch=OperationsBatch.create();var k=this;var l={};var n;var m;var o=$.makeDictionaryFromKeys(["sizeAndPosition","name","statesGroups","gridLines","customStates","pageTitle","childrenAnchor"],true);var b={};var d={};var p={};var f={};var h={};var j={};this.getMasterTemplateForSaveDirtyFlag=function(s){return j[s]};this.getSavingMasterTemplatesVersionConrollers=function(){return $.getValues(j)};this.getLoadedMasterPages=function(){var s=[];$.each(MasterPagesManager.MasterPages.getItems(),function(u,t){if(p[u]){s.push(t)}});return s};this.setMasterPageInfo=function(s,u){var t=MasterPagesManager.MasterPages.getItem(s);if(t&&!MasterPagesStructures[s]&&$.isEmptyObject(t.hierarchyInfo)&&f[s]){if(!d[s]){d[s]=true;$.ajax({url:SiteFilesMap["master-"+s],dataType:"script",cache:true,success:ErrorHandler.wrapWithNotify(function(){q(s,u)})})}}else{if(!p[s]&&f[s]){q(s,u)}else{u()}}};function q(s,v){p[s]=true;if(MasterPagesStructures[s]){var u;if(typeof MasterPagesStructures[s]==="string"){u=JSON.parse(MasterPagesStructures[s])}else{u=MasterPagesStructures[s]}u.id=s;var t={StructureVersion:u.version,masterPages:[u]};StructureLoadingManager.loadHierarchy(t);k.addMasterPage(u)}v()}this.getPageMasterPageId=function(s){return l[s]};this.initialize=function(x){for(var s in x){f[s]=true;var v=x[s];v.id=s;var y=v.pagesIDs;for(var t=0;t<y.length;t++){var z=y[t];l[z]=s}k.addMasterPage(v);var A=MasterPagesManager.getMasterTemplateForSaveDirtyFlag(s);A.beginSaving().finishSaving()}ElementsManager.Events.InstancesRemoving.bind(function(E){var C=E.removedRootInstances;if(ViewManager.isViewMode()||TemplateEditingManager.Flags.IsInEditingMode.isFalse()){var G=false;for(var F=0;F<C.length;F++){var B=C[F];if(B.hasParent()&&B.getParent().elementType===ElementsTypes.page){var H=B.root.id;var D=l[H];k.removeInstanceFromMasterPage(D,B);if(!B.hasFeature(Features.PageSection)){G=true}}}if(G){a()}}});ElementsManager.Events.ElementAddedToContainer.bind(function(B){if(B.hasParent()){var D=B.getParent();if(((B.isMasterPageElement.isTrue()&&D.elementType!==ElementsTypes.page))&&D.isMasterPageElement.isFalse()){c(B)}else{if(D.elementType===ElementsTypes.page){if(k.EditingMasterPage.isTrue()){k.setAsMasterPageRoots(B)}else{if(B.isMasterPageElement.isTrue()){var E=B.root.id;k.MasterPages.getItem(l[E]).rootInstances[B.id]=B}}}else{if(B.getParent().isMasterPageElement.isTrue()){B.isMasterPageElement.setTrue();var E=B.root.id;var C=l[E];k.removeInstanceFromMasterPage(s,B)}}}}});OrderManager.Events.ElementsReordered.bind(function(){a()});SimpleEvent.bind([ViewManager.Events.ViewModeChanged,MobileVersionViewManager.Flags.IsInMobileContext.valueChangedEvent],function(){m=undefined});var w;var u;PageManager.Events.PageChanged.bind(function(B){if(u){u.propertyChangedEventSimple.unbind(w)}u=PageManager.getCurrentPage();w=u.propertyChangedEventSimple.bind(function(F,E){if(n&&!o[F]){var D=PageManager.AllPagesInformation.getItem(u.id);var C={};if(ViewManager.isDesignMode()){if(EditorManager.Flags.PcEditing.isTrue()||!PropertiesTypes[F].isStateProperty()){n.pageProperties[F]=u.getPropertyValue(F)}if(EditorManager.Flags.MobileEditing.isTrue()||!PropertiesTypes[F].isStateProperty()){n.mobilePageProperties[F]=u.getPropertyValue(F)}}}})});PageManager.Events.PageDeleted.bind(function(B){var C=l[B];delete l[B];var D=k.MasterPages.getItem(C);delete D.rootInstancesOrders[B]});i();PageManager.PagesCollection.itemsChangedEvent.bind(i)};this.getMasterPageRootInstances=function(s){s=s?s:n.id;return $.getValues(k.getMasterPage(s).rootInstances)};this.isRootInstance=function(s,t){t=t?t:n;return !!k.getMasterPage(t.id).rootInstances[s.id]};this.getMasterPage=function(s){return k.MasterPages.getItem(s)};this.getCurrentMasterPage=function(){return n};this.resetCurrentMasterPage=function(){n=undefined;MasterPagesManager.editPageContent()};function i(){var u={};var t;for(var s in l){t=l[s];var w=$.getOrCreateArray(u,t);var v=PageManager.PagesCollection.getItem(s);if(v){w.push(v)}}for(t in k.PagesInMasterPages){k.PagesInMasterPages[t].syncrhonize($.valueOrDefault(u[t],[]))}}this.editMasterPage=function(){k.toggleMasterPageEdit(true)};this.editPageContent=function(){k.toggleMasterPageEdit(false)};this.toggleMasterPageEdit=function(s){if(k.EditingMasterPage.getValue()!==s){k.EditingMasterPage.setValue(s);k.MasterPageEditingModeChanged.fire();k.MasterPageEditingModeChangedFinished.fire()}};this.getMasterPagesMetaData=function(){var w={};var u=k.MasterPages.getItems();for(var t in u){var v=u[t];w[t]={name:v.name,pagesIDs:[]}}for(var s in l){if(w[l[s]]){w[l[s]].pagesIDs.push(s)}}return w};this.getMasterPagesStructures=function(){var s={};var u=k.MasterPages.getItems();for(var t in u){var v=k.getMasterTemplateForSaveDirtyFlag(t).isDirty();if(!v){continue}var w=u[t];var x={rootInstancesOrders:w.rootInstancesOrders,sortedRootInstances:w.sortedRootInstances,pageProperties:w.pageProperties,mobilePageProperties:w.mobilePageProperties};if(w.isCreated){x.hierarchyInfo=ElementsManager.getHierarchyInfo($.getValues(w.rootInstances),{forSaving:true,idsInHierarchy:true,rootInstancesHierarchies:MobileVersionViewManager.getMasterPageInstancesHierarchiesData(w.id)});x.hierarchyInfo=ElementsManager.adjustHierarchyWithBaseHierarchy(x.hierarchyInfo,w.hierarchyInfo);x.hierarchyInfo.idsInHierarchy=undefined;x.version=StructureLoadingManager.CurrentStructureVersion;s[t]=x}else{if(!$.isEmptyObject(w.hierarchyInfo)||!f[t]){x.hierarchyInfo=w.hierarchyInfo;x.version=w.version;s[t]=x}}}return s};this.removeMasterPage=function(w,t,v){var u=k.getMasterPage(w);if(!u){return}var s=this.MasterPages.getItemsValues();if(s.length===1){t=k.addMasterPage({name:"Master Template 1"})}else{if(!t){t=s[0].id===w?s[1].id:s[0].id}}$.each(k.PagesInMasterPages[w].getItemsValues(),function(x,y){k.setMasterPage(y.id,t,v)});ElementsManager.removeInstances($.getValues(u.rootInstances));this.MasterPages.remove(w);return t};this.addMasterPage=function(t){t=$.extend({id:undefined,name:undefined},t);var s=t.id!==undefined?t.id:StructureLoadingManager.generateWebsiteId();var u=k.MasterPages.getItem(s);t=$.extend({id:undefined,hierarchyInfo:{},pageProperties:{},mobilePageProperties:{},pageContentProperties:{},rootInstancesOrders:{},sortedRootInstances:[],name:u?u.name:undefined,version:StructureLoadingManager.CurrentStructureVersion},t);if(t.name===undefined){t.name=$.findAvailableName("Master Template {0}",$.extractFieldValue(MasterPagesManager.MasterPages.getItems(),"name"))}if(!k.PagesInMasterPages[s]){k.PagesInMasterPages[s]=new ObservableCollection()}k.MasterPages.put({id:s,version:t.version,name:t.name,isCreated:false,rootInstances:{},hierarchyInfo:t.hierarchyInfo,pageProperties:t.pageProperties,mobilePageProperties:t.mobilePageProperties,pageContentProperties:t.pageContentProperties,rootInstancesOrders:t.rootInstancesOrders,sortedRootInstances:t.sortedRootInstances});if(!j[s]){j[s]=VersionController.create(true)}return s};this.getMasterPageIDByPage=function(s){return l[s]};this.getPagesToMasterPages=function(){return l};this.getDefaultMasterPageId=function(){return MasterPagesManager.getMasterPageIDByPage(PageManager.getCurrentPage().id)};function g(){if(!m){m=$.extend({},n);m.rootInstancesOrders=$.extend({},n.rootInstancesOrders);$.each(m.rootInstancesOrders,function(s,t){m.rootInstancesOrders[s]=$.extend({},m.rootInstancesOrders[s])});m.sortedRootInstances=ArrayUtils.clone(n.sortedRootInstances)}}function a(){if(n){if(EditorManager.Flags.PcEditing.isTrue()){r(n)}else{g();r(m)}}}function r(v){var w=PageManager.getCurrentPageId();var t={};v.rootInstancesOrders[w]=t;var s={};$.each(n.rootInstances,function(z,y){var x=y.getPropertyValue("order");t[z]=x;s[z]=y;if(y.hasFeature(Features.PageSection)){$.each(y.childInstances,function(C,B){var A=B.getPropertyValue("order");t[B.id]=A;s[B.id]=B})}});var u=$.getKeys(s);v.sortedRootInstances=u.orderBy(function(x){return t[x]})}this.updateCurrentMasterPage=function(z){k.updateCurrentMasterPageBatch.start();var y=PageManager.getCurrentPage();var s=y.id;var t=l[s];var u=PageManager.getPagesStates()[s];if(u.markForSave.isDirty()){MasterPagesManager.getMasterTemplateForSaveDirtyFlag(t).informOperation()}var x=h[y.id];if(x){var v=k.MasterPages.getItem(x);h[y.id]=undefined;if(v){$.each($.getValues(v.rootInstances),function(B,A){A.detach()});var w=y.getDescendingInstances(false);k.updateCurrentMasterPage();if(t!==x){OrderManager.bringToFront(w)}k.updateCurrentMasterPageBatch.finish();return}}k.setMasterPageInfo(t,function(){var D=k.MasterPages.getItem(t);OrderManager.beginReorderingBatch();if(D.isCreated){var G=$.getValues(D.rootInstances);ElementsManager.addElementToContainerElement(y,G);if(ViewManager.isViewMode()){$(G,function(Q,P){P.refreshCursor()})}}else{if(!$.isEmptyObject(D.hierarchyInfo)){var I=ElementsManager.addHierarchyInfo(D.hierarchyInfo,{parent:y,isLoading:true});D.rootInstances=ElementsUtil.mapInstancesByID(I);var E=ElementsUtil.getHierarchiesUnion($.getValues(D.rootInstances));for(var H=0;H<E.length;H++){E[H].isMasterPageElement.set()}}D.isCreated=true}n=D;var K=PageManager.AllPagesInformation.getItem(s);var M;if(MobileVersionViewManager.Flags.IsInMobileContext.isFalse()){M=D.pageProperties}else{M=$.extend({},D.pageProperties,D.mobilePageProperties)}y.setPropertiesValues($.dictionaryFilter(M,function(Q,P){return !o[P]}));if(MobileVersionViewManager.Flags.IsInMobileContext.isFalse()){var F;if(EditorManager.Flags.PcEditing.isTrue()){F=n}else{g();F=m}var O=F.rootInstancesOrders[y.id];if(!O){O={}}$.each(D.rootInstances,function(Q,P){P.childIndex.setValue(undefined)});var J=$.makeDictionaryFromKeys(F.sortedRootInstances,true);for(var A in O){if(!J[A]){delete O[A]}}var C=0;for(var H=0;H<F.sortedRootInstances.length;H++){var L=F.sortedRootInstances[H];if(O[L]===undefined){C+=0.0001;O[L]=C}else{C=O[L]}}O=$.sortValues(O,F.sortedRootInstances);for(var N in O){var B=ElementsManager.getInstanceByID(N);if(B){B.setPropertyValue("order",O[N])}}}OrderManager.endReorderingBatch();k.CurrentMasterPageChanged.fire();if(z){z()}k.updateCurrentMasterPageBatch.finish()})};this.setMasterPage=function(s,t,y){var v=PageManager.getPage(s);var x=l[s];l[s]=t;if(t!==x){i()}if(PageManager.getCurrentPage()===v){var u=k.MasterPages.getItem(x);$.each($.getValues(u.rootInstances),function(A,z){z.detach()});v.setHeaderInstance(undefined);v.setFooterInstance(undefined);var w=v.getDescendingInstances(false);k.updateCurrentMasterPage(y);if(t!==x){OrderManager.bringToFront(w)}}else{h[s]=x}};this.canBeMasterPageElement=function(s){return s.hasParent()&&s.getParent().elementType===ElementsTypes.page};this.setAsMasterPageRoots=function(w){OperationsManager.beginAtomicBatch(false,"Move To Master Template");w=$.makeArray(w);w=$.grep(w,function(x){return x.hasParent()});var u=ElementsUtil.getHierarchiesUnion(w);$.each(w,function(z,x){var A=x.root.id;var y=l[A];k.MasterPages.getItem(y).rootInstances[x.id]=x});$.each(u,function(y,x){x.isMasterPageElement.set()});var t=ElementsUtil.eliminateDescendingInstances(w);var v=PageManager.getCurrentPage();var s=OrderManager.getMaxOrder()*OrderManager.getMaxOrder();$.each(t,function(y,x){if(x.parentInstance&&x.parentInstance.elementType!==ElementsTypes.page&&x.parentInstance.isMasterPageElement.isFalse()){ElementsStructureHelper.reattachInstances([x],v)}});k.MasterPageStateChanged.fire(k,t,true);a();OperationsManager.endAtomicBatch()};this.removeInstanceFromMasterPage=function(t,s){var u=k.MasterPages.getItem(t);delete u.rootInstances[s.id];$.each(u.sortedRootInstances,function(w,v){delete v[s.id]});u.sortedRootInstances=$.grep(u.sortedRootInstances,function(v,w){return w!==s.id})};this.setAsPageContentElement=function(s){OperationsManager.beginAtomicBatch(false,"Move To Page Content");s=$.makeArray(s);s=$.grep(s,function(t){return t.hasParent()&&t.getParent().elementType===ElementsTypes.page});c(s);OperationsManager.endAtomicBatch()};function c(t){t=$.makeArray(t);var s=ElementsUtil.getHierarchiesUnion(t);$.each(t,function(w,u){var x=u.root.id;var v=l[x];k.removeInstanceFromMasterPage(v,u)});$.each(s,function(v,u){u.isMasterPageElement.setFalse()});k.MasterPageStateChanged.fire(k,s,false);ElementsStructureHelper.reattachToCurrentSection(t);a()}}();var CompatibilityManager=new function(){var c=[];var b;this.addSiteInformationFix=function(d,f){c.push({version:d,callback:f})};function a(){if(!b){b=$(c).sort(function(f,d){if(f.version&&d.version){return f.version-d.version}else{if(f.version){return -1}else{if(d.version){return 1}else{return 0}}}})}}this.fixSiteInformation=function(g){a();if(!g.StructureVersion){if(g.version){g.StructureVersion=g.version}else{g.StructureVersion=StructureLoadingManager.CurrentStructureVersion}}for(var f=0;f<b.length;f++){var d=b[f];if(d.version===null||g.StructureVersion<d.version){d.callback(g)}}g.StructureVersion=StructureLoadingManager.CurrentStructureVersion;g.version=StructureLoadingManager.CurrentStructureVersion;if(g.templateStructure){g.templateStructure.version=StructureLoadingManager.CurrentStructureVersion;g.templateStructure.StructureVersion=StructureLoadingManager.CurrentStructureVersion}};this.fixTemplatesInformation=function(f){if(f.pagesStructure){$.each(f.pagesStructure.pages,function(g,h){$.each(h.structures,function(k,j){d(j)})})}if(f.masterPages){$.each(f.masterPages,function(g,h){if(h.hierarchyInfo.structures){$.each(h.hierarchyInfo.structures,function(k,j){d(j)})}})}if(f.templateStructure&&f.templateStructure.structures){$.each(f.templateStructure.structures,function(h,g){d(g)})}f.StructureVersion=StructureLoadingManager.CurrentStructureVersion;if(f.templateStructure){f.templateStructure.version=StructureLoadingManager.CurrentStructureVersion;f.templateStructure.StructureVersion=StructureLoadingManager.CurrentStructureVersion}function d(g){var h=g.type;if(g.elementProperties.fieldsTemplates){$.each(g.elementProperties.fieldsTemplates,function(j,i){$.each(i,function(l,k){CompatibilityManager.fixTemplateInformation({templateStructure:k.hierarchy,StructureVersion:k.hierarchy.version!==undefined?k.hierarchy.version:0})})})}if(g.childElements){$.each(g.childElements,function(j,k){d(k)})}}};this.fixTemplateInformation=function(f){a();if(!f.templateStructure.isDefaultStructure){for(var g=0;g<b.length;g++){var d=b[g];if(f.StructureVersion){if(d.version===null||f.StructureVersion<d.version){d.callback(f)}}}}f.templateStructure.version=StructureLoadingManager.CurrentStructureVersion;f.StructureVersion=StructureLoadingManager.CurrentStructureVersion;return f}}();var PropertiesValuesConverters={MaximizeFieldsNames:1,StringToObject:2,ValueToObject:3,StringFieldsToNumeric:4,NumericFieldsToBoolean:5};var StructureLoadingManager=new function(){var f=this;var g;var n;var o={};var h={};this.CurrentStructureVersion=1.209;this.initialize=function(p){f.createDefinitionsNamesMap();f.createDefinitionsDefaultProperties()};this.generateWebsiteId=function(){return"id"+$.uniqueID()+""};this.getDefinitionName=function(p){return o[p]};this.getSiteDefaultProperties=function(){return n};this.getSiteDefaultDefinitionsMap=function(){return o};this.getSiteHashDefaultDefinitionsMap=function(){return h};this.getHashDefinitionValue=function(p){return h[p]?h[p]:p};this.createDefinitionsNamesMap=function(){var p=1;$.each(PropertiesTypes,function(q,r){var s=a(p);o[s]=q;h[q]=s;p++});$.each(ElementsTypes,function(r,q){var s=a(p);o[s]=r;h[r]=s;p++});$.each(Features,function(q,r){var s=a(p);o[s]=q;h[q]=s;p++})};function a(p){if(p<10){return String.fromCharCode(p+47)}else{if(p>=10&&p<34){return String.fromCharCode(p+56)}else{return(p-23).toString()}}}this.createDefinitionsDefaultProperties=function(){var p={};$.each(Features,function(q,r){var t=PropertiesManager.getDefaultValues([r])[0];var s={};$.each(t,function(x,u){if(u.value!==undefined){var v=StructurePropertyLoadingMap.getPreSaveArray(x,StructurePropertyLoadingMap.getCurrentPreSaveVersion());if(v){for(var w=0;w<v.length;w++){u.value=v[w](u.value)}}s[h[x]]=u.value}});p[h[q]]=s});$.each(ElementsTypes,function(r,q){var t=PropertiesManager.getDefaultValues([q])[0];var s={};$.each(t,function(x,u){var v=StructurePropertyLoadingMap.getPreSaveArray(x,StructurePropertyLoadingMap.getCurrentPreSaveVersion());if(v){for(var w=0;w<v.length;w++){u.value=v[w](u.value)}}s[h[x]]=u.value});p[h[r]]=s});n=p};this.preSaveHierarchy=function(p){if(StructurePropertyLoadingMap.getCurrentPreSaveVersion()===0){return}p.defaultDefinitonNamesMap=f.getSiteDefaultDefinitionsMap();p.definitionsDefaultProperties=f.getSiteDefaultProperties();p.preSaveVersion=StructurePropertyLoadingMap.getCurrentPreSaveVersion();if(p.structures){$.each(p.structures,function(r,q){c(q)})}};function c(p){var q={};if(p.elementProperties.fieldsTemplates){$.each(p.elementProperties.fieldsTemplates,function(s,r){$.each(r,function(u,t){$.each(t.hierarchy.structures,function(v,w){c(w)})})})}$.each(p.elementProperties,function(t,s){var r=false;var w=PropertiesManager.getTypesDefaultValues()[p.type][t];if((w&&$.defaultEqualityComparer(w.value,s))){r=true}var u=StructurePropertyLoadingMap.getPreSaveArray(t,StructurePropertyLoadingMap.getCurrentPreSaveVersion());if(u){for(var v=0;v<u.length;v++){s=u[v](s)}}if(!r&&PropertiesTypes[t]){q[f.getHashDefinitionValue(t)]=s}});p.type=f.getHashDefinitionValue(p.type);p.elementProperties=q;if(p.childElements){$.each(p.childElements,function(r,s){c(s)})}}this.loadHierarchy=function(s){var r;var x;var u;var v;var t;var p={};if(s.templateStructure){r=s.templateStructure.defaultDefinitonNamesMap;x=q();u=s.templateStructure.preSaveVersion?s.templateStructure.preSaveVersion:0;t=s.templateStructure.definitionsDefaultProperties;$.each(s.templateStructure.structures,function(z,y){w(y)})}else{if(s.pagesStructure){$.each(s.pagesStructure.pages,function(y,z){r=z.defaultDefinitonNamesMap;x=q();u=z.preSaveVersion?z.preSaveVersion:0;t=z.definitionsDefaultProperties;$.each(z.structures,function(B,A){w(A)})})}else{if(s.masterPages){$.each(s.masterPages,function(y,z){if(z.hierarchyInfo.structures){r=z.hierarchyInfo.defaultDefinitonNamesMap;x=q();t=z.hierarchyInfo.definitionsDefaultProperties;u=z.hierarchyInfo.preSaveVersion?z.hierarchyInfo.preSaveVersion:0;$.each(z.hierarchyInfo.structures,function(B,A){w(A)})}})}else{if(s.isCoordinator){r=s.defaultDefinitonNamesMap;x=q();u=s.preSaveVersion?s.preSaveVersion:0;t=s.definitionsDefaultProperties;$.each(s.structures,function(z,y){w(y)})}}}}CompatibilityManager.fixSiteInformation(s);if(!s.isCoordinator){CompatibilityManager.fixTemplatesInformation(s)}function q(){var y={};if(r){$.each(r,function(A,z){y[z]=A});return y}else{return undefined}}function w(B){B.id=B.id.toString();if(!r||!r[B.type]||u===0){return}var z=B.type;B.type=r[B.type];var H=B.type;var E={};if(t){var y={};if(p[H]){y=p[H]}else{var I=ElementsTypes[H].getElementDefinitions();for(var C=0;C<I.length;C++){var A=I[C];var G=x[A.name];if(G){var F=t[x[A.name]];if(F){for(var D in F){var K=F[D];if(K!==undefined){y[D]=K}}}}}p[H]=y}var J;J=$.extend(true,{},y);B.elementProperties=$.extend(J,B.elementProperties)}$.each(B.elementProperties,function(N,L){var M=r[N];var P=StructurePropertyLoadingMap.getPreLoadArray(M,u);if(P&&L!==undefined&&L!==null){for(var O=0;O<P.length;O++){L=P[O](L)}}E[M]=L});B.elementProperties=E;if(B.elementProperties.fieldsTemplates){$.each(B.elementProperties.fieldsTemplates,function(M,L){$.each(L,function(O,N){$.each(N.hierarchy.structures,function(P,Q){w(Q)})})})}if(B.childElements){$.each(B.childElements,function(L,M){w(M)})}}};this.createStringToObjectValueConverter=m;this.createToStringConverter=d;this.createValueToObjectValueConverter=b;this.createRoundPropertyValueConverter=k;this.createNumericToBolleanValueConverter=l;this.createBooleanToNumericConverter=j;this.createStringToNumericConverter=i;this.minimizeFieldsNames=function(p){return function(r){var s=[];for(var q=0;q<p.length;q++){s.push(r[p[q]])}return s}};this.maximizeFieldsNames=function(p){var q=function(s){var t={};for(var r=0;r<p.length;r++){if(s[r]!==undefined&&s[r]!==null){t[p[r]]=s[r]}else{t[p[r]]=s[p[r]]}}return t};q.converterType=PropertiesValuesConverters.MaximizeFieldsNames;q.converterState=p;return q};this.NormalizeFieldsValuesSides=function(r){if(typeof r==="string"||typeof r!=="object"){r={top:r,left:r,bottom:r,right:r}}else{if($.getKeys(r).length!==4){r={top:r.top,left:r.left,bottom:r.bottom,right:r.right}}}var q=false;var p=false;if(r.top===r.bottom){q=true}if(r.left===r.right){p=true}if(q&&p){if(r.left===r.bottom){return"{left}".format(r)}else{return"{top},{left}".format(r)}}return"{top},{left},{bottom},{right}".format(r)};this.NormalizeFieldsValuesCorners=function(q){if(typeof q==="string"||typeof q!=="object"){q={topLeft:q,bottomLeft:q,topRight:q,bottomRight:q}}else{if($.getKeys(q).length!==4){q={topLeft:q.topLeft,bottomLeft:q.bottomLeft,topRight:q.topRight,bottomRight:q.bottomRight}}}var r=false;var p=false;if(q.topLeft===q.topRight){r=true}if(q.bottomLeft===q.bottomRight){p=true}if(p&&r){if(q.topLeft===q.bottomLeft){return"{topLeft}".format(q)}else{return"{topLeft},{bottomLeft}".format(q)}}return"{topLeft},{bottomLeft},{topRight},{bottomRight}".format(q)};this.ExpandObjectFieldsValuesSides=function(r){if(typeof r==="string"){return{top:r,left:r,bottom:r,right:r}}if(!$.isArray(r)){return r}var p=["top","left","bottom","right"];var s={};for(var q=0;q<p.length;q++){if(r.length===1){s[p[q]]=r[0]}else{if(r.length===2){s[p[q]]=r[q%2]}else{s[p[q]]=r[q]}}}return s};this.NormalizeObjectFieldsValuesSides=function(r){if(typeof r==="string"){r={top:r,left:r,bottom:r,right:r}}var q=false;var p=false;if($.defaultEqualityComparer(r.top,r.bottom)){q=true}if($.defaultEqualityComparer(r.left,r.right)){p=true}if(q&&p){if($.defaultEqualityComparer(r.left,r.bottom)){return[r.bottom]}else{return[r.top,r.left]}}return[r.top,r.left,r.bottom,r.right]};function l(p){var q=function(s){if(p){var t={};$.each(s,function(u,v){t[u]=v?true:false});for(var r=0;r<p.length;r++){t[p[r]]=(s[p[r]]?true:false)}return t}else{return s?true:false}};q.converterType=PropertiesValuesConverters.NumericFieldsToBoolean;q.converterState=p;return q}function j(p){return function(r){if(p){for(var q=0;q<p.length;q++){r[p[q]]=(r[p[q]]?1:0)}return r}else{return r?1:0}}}function i(p){var q=function(s){if(p){var t={};for(var r=0;r<p.length;r++){if(s[p[r]]===""||s[p[r]]==="null"){t[p[r]]=null}else{t[p[r]]=parseInt(s[p[r]])}}return t}else{return parseInt(s)}};q.converterType=PropertiesValuesConverters.StringFieldsToNumeric;q.converterState=p;return q}function d(p){return function(s){var q="";for(var r=0;r<p.length;r++){q+=((s[p[r]]!==undefined&&s[p[r]]!==null)?(s[p[r]]):"");if(r!==p.length-1){q+=","}}return q}}function m(p){var q=function(s){if(typeof s==="string"){var r={};$.each(p,function(t,u){r[u]=s});return r}return s};q.converterType=PropertiesValuesConverters.StringToObject;q.converterState=p;return q}function b(p){var q=function(t){var v={};var r;if($.isArray(t)){r=t}else{if(typeof t==="string"){r=t.toString().split(",")}else{if(typeof t==="object"){for(var s=0;s<p.length;s++){var u=p[s];if(t[u]){return t}}r=$.makeArray(t)}else{r=$.makeArray(t)}}}for(var s=0;s<p.length;s++){if(r.length===1){v[p[s]]=r[0]}else{if(r.length===2){v[p[s]]=r[s%2]}else{v[p[s]]=r[s]}}}return v};q.converterType=PropertiesValuesConverters.ValueToObject;q.converterState=p;return q}function k(p){return function(r){if(p){if(typeof r==="object"){for(var q=0;q<p.length;q++){var t=p[q];if(r[t]){r[t]=Math.round(r[t])}else{r[t]=0}}}else{var s={};for(var q=0;q<p.length;q++){var t=p[q];s[t]=Math.round(r)}r=s}return r}else{return Math.round(r)}}}}();var StructurePropertyLoadingMap=new function(){var c=this;var b=0;this.getCurrentPreSaveVersion=function(){return b};this.getPreSaveArray=function(g,d){for(var f=d;f>0;f--){if(a[f]&&a[f][g]){return a[f][g].preSaveConverter}}return undefined};this.getPreLoadArray=function(g,d){for(var f=d;f>0;f--){if(a[f]&&a[f][g]){return a[f][g].preLoadConverter}}return undefined};var a={1:{columnsGrid:{preSaveConverter:[StructureLoadingManager.minimizeFieldsNames(["margin","gutter","columnsNumber","color","showAlways","isEnabled","opacity"])],preLoadConverter:[StructureLoadingManager.maximizeFieldsNames(["margin","gutter","columnsNumber","color","showAlways","isEnabled","opacity"])]},itemFields:{preSaveConverter:[StructureLoadingManager.minimizeFieldsNames(["index","title","icon","image","description","link"])],preLoadConverter:[StructureLoadingManager.maximizeFieldsNames(["index","title","icon","image","description","link"])]},sizeAndPosition:{preSaveConverter:[StructureLoadingManager.minimizeFieldsNames(["left","width","top","height"])],preLoadConverter:[StructureLoadingManager.maximizeFieldsNames(["left","width","top","height"])]},glow:{preSaveConverter:[StructureLoadingManager.minimizeFieldsNames(["spread","blur","color"])],preLoadConverter:[StructureLoadingManager.maximizeFieldsNames(["spread","blur","color"])]},innerGlow:{preSaveConverter:[StructureLoadingManager.minimizeFieldsNames(["spread","blur","color"])],preLoadConverter:[StructureLoadingManager.maximizeFieldsNames(["spread","blur","color"])]},shadow:{preSaveConverter:[StructureLoadingManager.minimizeFieldsNames(["top","left","spread","blur","color"])],preLoadConverter:[StructureLoadingManager.maximizeFieldsNames(["top","left","spread","blur","color"])]},innerShadow:{preSaveConverter:[StructureLoadingManager.minimizeFieldsNames(["top","left","spread","blur","color"])],preLoadConverter:[StructureLoadingManager.maximizeFieldsNames(["top","left","spread","blur","color"])]},formFieldsData:{preSaveConverter:[StructureLoadingManager.minimizeFieldsNames(["isOptional"])],preLoadConverter:[StructureLoadingManager.maximizeFieldsNames(["isOptional"])]},formOptions:{preSaveConverter:[StructureLoadingManager.minimizeFieldsNames(["clearOnSubmit"])],preLoadConverter:[StructureLoadingManager.maximizeFieldsNames(["clearOnSubmit"])]},dataLayoutOptions:{preSaveConverter:[StructureLoadingManager.minimizeFieldsNames(["lineSpacing","columnSpacing","colsSpacing","rowsSpacing","R","rotation","cols","elementsPerPage"])],preLoadConverter:[StructureLoadingManager.maximizeFieldsNames(["lineSpacing","columnSpacing","colsSpacing","rowsSpacing","R","rotation","cols","elementsPerPage"])]},borderWidth:{preSaveConverter:[StructureLoadingManager.NormalizeFieldsValuesSides],preLoadConverter:[StructureLoadingManager.createValueToObjectValueConverter(["top","left","bottom","right"]),StructureLoadingManager.createStringToNumericConverter(["top","left","bottom","right"])]},roundness:{preSaveConverter:[StructureLoadingManager.NormalizeFieldsValuesCorners],preLoadConverter:[StructureLoadingManager.createValueToObjectValueConverter(["topLeft","bottomLeft","topRight","bottomRight"]),StructureLoadingManager.createStringToNumericConverter(["topLeft","bottomLeft","topRight","bottomRight"])]},borderColor:{preSaveConverter:[StructureLoadingManager.NormalizeObjectFieldsValuesSides],preLoadConverter:[StructureLoadingManager.createStringToObjectValueConverter(["top","left","bottom","right"]),StructureLoadingManager.createValueToObjectValueConverter(["top","left","bottom","right"])]},borderStyle:{preSaveConverter:[StructureLoadingManager.NormalizeFieldsValuesSides],preLoadConverter:[StructureLoadingManager.createValueToObjectValueConverter(["top","left","bottom","right"])]},padding:{preSaveConverter:[StructureLoadingManager.NormalizeFieldsValuesSides],preLoadConverter:[StructureLoadingManager.createValueToObjectValueConverter(["top","left","bottom","right"]),StructureLoadingManager.createStringToNumericConverter(["top","left","bottom","right"])]},imagePosition:{preSaveConverter:[StructureLoadingManager.createToStringConverter(["vertical","horizontal"])],preLoadConverter:[StructureLoadingManager.createValueToObjectValueConverter(["vertical","horizontal"])]},fillLayout:{preSaveConverter:[StructureLoadingManager.createBooleanToNumericConverter(["fillVertical","fillHorizontal"]),StructureLoadingManager.createToStringConverter(["fillVertical","fillHorizontal"])],preLoadConverter:[StructureLoadingManager.createValueToObjectValueConverter(["fillVertical","fillHorizontal"]),StructureLoadingManager.createStringToNumericConverter(["fillVertical","fillHorizontal"]),StructureLoadingManager.createNumericToBolleanValueConverter(["fillVertical","fillHorizontal"])]},margin:{preSaveConverter:[StructureLoadingManager.NormalizeFieldsValuesSides],preLoadConverter:[StructureLoadingManager.createValueToObjectValueConverter(["top","left","bottom","right"]),StructureLoadingManager.createStringToNumericConverter(["top","left","bottom","right"])]},imageLoadingOverlay:{preSaveConverter:[StructureLoadingManager.minimizeFieldsNames(["background","imageInfo"])],preLoadConverter:[StructureLoadingManager.maximizeFieldsNames(["background","imageInfo"])]},isGrowable:{preSaveConverter:[StructureLoadingManager.minimizeFieldsNames(["bottom","right"])],preLoadConverter:[StructureLoadingManager.maximizeFieldsNames(["bottom","right"])]},pagesFields:{preSaveConverter:[StructureLoadingManager.minimizeFieldsNames(["index","title","icon"])],preLoadConverter:[StructureLoadingManager.maximizeFieldsNames(["index","title","icon"])]}},2:{itemFields:{preSaveConverter:undefined,preLoadConverter:undefined}},3:{dataLayoutOptions:{preSaveConverter:[StructureLoadingManager.minimizeFieldsNames(["lineSpacing","columnSpacing","colsSpacing","rowsSpacing","R","rotation","cols","elementsPerPage","numberOfRows"])],preLoadConverter:[StructureLoadingManager.maximizeFieldsNames(["lineSpacing","columnSpacing","colsSpacing","rowsSpacing","R","rotation","cols","elementsPerPage","numberOfRows"])]}},4:{dataLayoutOptions:{preSaveConverter:[StructureLoadingManager.minimizeFieldsNames(["lineSpacing","columnSpacing","colsSpacing","rowsSpacing","R","rotation","cols","elementsPerPage","numberOfRows","rows"])],preLoadConverter:[StructureLoadingManager.maximizeFieldsNames(["lineSpacing","columnSpacing","colsSpacing","rowsSpacing","R","rotation","cols","elementsPerPage","numberOfRows","rows"])]}},5:{dataLayoutOptions:{preSaveConverter:[StructureLoadingManager.minimizeFieldsNames(["lineSpacing","columnSpacing","colsSpacing","rowsSpacing","R","rotation","cols","elementsPerPage","numberOfRows","rows","maxItems","isHierarchy","dropTrigger"])],preLoadConverter:[StructureLoadingManager.maximizeFieldsNames(["lineSpacing","columnSpacing","colsSpacing","rowsSpacing","R","rotation","cols","elementsPerPage","numberOfRows","rows","maxItems","isHierarchy","dropTrigger"])]}},6:{dataLayoutOptions:{preSaveConverter:[StructureLoadingManager.minimizeFieldsNames(["lineSpacing","columnSpacing","colsSpacing","rowsSpacing","R","rotation","cols","elementsPerPage","numberOfRows","rows","maxItems","isHierarchy"])],preLoadConverter:[StructureLoadingManager.maximizeFieldsNames(["lineSpacing","columnSpacing","colsSpacing","rowsSpacing","R","rotation","cols","elementsPerPage","numberOfRows","rows","maxItems","isHierarchy"])]}}};this.getConvertorsMap=function(){return a}}();var SiteViewportManager=new function(){var b;var a;this.ViewPortChanged=SimpleEvent.create();this.IsFullScreen=ObservableFlag.createConditionalNegative({valueChangeCallback:function(){$(document.body).toggleClass("full-screen-view",SiteViewportManager.IsFullScreen.isTrue()).toggleClass("inner-screen-view",SiteViewportManager.IsFullScreen.isFalse());d();if(Global.IsDesigner){DesignerManager.updateDesignerLayout();DesignerManager.setCurrentViewPort({left:"center"})}}});this.UserFullScreen=ObservableFlag.create(false,{valueChangeCallback:function(f){SiteViewportManager.setFullScreen(f,"UserSettings")}});this.initialize=function(){$.getWindowSizeEvent().bind(function(){d()});if(Global.IsDesigner){SimpleEvent.bind([DesignerManager.DesignerFrameLayout.valueChangedEvent,DesignerPane.DesignerPanePadding.valueChangedEvent],function(){if(SiteViewportManager.IsFullScreen.isTrue()){d()}});SimpleEvent.bind([DesignerManager.DesignerResolutionChanged,ViewManager.Events.ViewModeChanged,Modes.ExpressMode.modeStarted,Modes.ExpressMode.modeFinished,PageManager.Events.PageChanged,Global.PageHeightChanged,FreemiumBanners.isVisible.valueChangedEvent],d)}d()};this.setFullScreen=function(f,g){if(!Global.IsMobile){SiteViewportManager.IsFullScreen.setValue(f,g)}};this.getViewPort=function(){if(!b){b=c()}return b};function d(){b=undefined;SiteViewportManager.ViewPortChanged.fire();if(PageManager.getCurrentPage()){LayoutManager.refreshElementsLayout(PageManager.getCurrentPage())}}function c(){var i=$.getWindowSize();if(ViewManager.isDesignMode()){var g=i.height;var j=PageManager.getCurrentPage();if(j){var f=PositionManager.getElementSize(j);if(f!==null&&f!==undefined){g=Math.min(g,f.height)}}var h=DesignerManager.calculateDesignerArea();return{left:h.left,top:h.top,width:Math.min(i.width,h.width),height:Math.min(i.height,g)}}else{return{left:0,top:0,width:i.width,height:i.height-FreemiumBanners.getFooterHeight()-PrivacyPolicyBar.getPrivacyPolicyHeight()}}}}();DataListHelper=new function(){this.adjustDataListToContent=function(a,c){OperationsManager.setPropertyChangeListener(false);var d=a.getPropertyValue("fillLayout");var b=a.adjustSizeToContent({horizontally:!d||!a.isFillHorizontal(),vertically:!d||!a.isFillVertical()});OperationsManager.setPropertyChangeListener(true);return b};this.calculateAdjustedContentSize=function(a,b){return a.calculateNewContentSize({})}}();var RowsManager=new function(){var k={RowDecorator:{group:"rows-manager-templates",name:"row-decorator-template"},ColumnDecorator:{group:"rows-manager-templates",name:"column-decorator-template"}};var p=this;var g={};var i={};var c={};var r={};var j={};var w={};var h;var u;var t;var l;var d=SimpleEvent.createBindingsCollection();this.MarkingTypes={Column:"column",Row:"row"};p.CellsContainerChangedEvent=SimpleEvent.create();p.UpdateBatch=OperationsBatch.create();p.ContextRow=ObservableObject.createReferenceObject({equalityComparer:$.defaultIdComparer});p.ContextCell=ObservableObject.createReferenceObject({equalityComparer:$.defaultIdComparer});p.MoreThenOneRowInContext=ObservableFlag.create(false);p.CanMoveToRight=ObservableFlag.create(false);p.CanMoveToLeft=ObservableFlag.create(false);p.CanMoveToTop=ObservableFlag.create(false);p.CanMoveToBottom=ObservableFlag.create(false);p.CanMoveHorizontal=ObservableFlag.create(false);function q(){var x=p.ContextCell.getValue();var z=p.ContextRow.getValue();var y=o(x);p.CanMoveToRight.setValue(y.right);p.CanMoveToLeft.setValue(y.left);p.CanMoveToTop.setValue(y.top);p.CanMoveToBottom.setValue(y.bottom);p.CanMoveHorizontal.setValue(p.CanMoveToLeft.isTrue()||p.CanMoveToRight.isTrue())}function o(B){var A={top:false,bottom:false,left:false,right:false};if(!B){return A}var y=B.getInstance();var E=y.getPropertyValue("order");var D=B.getRowParent();if(!D){return A}var z=D.getMaxOrder().value;var x=D.getMinOrder().value;A.right=(E<z);A.left=(E>x);var C=y.parentInstance;A.top=(C.childInstances[0].getPropertyValue("order")<x);A.bottom=(C.childInstances[C.childInstances.length-1].getPropertyValue("order")>z);return A}this.initialize=function(){t=$.useTemplate(k.RowDecorator).appendTo(Global.DecoratorsContainer);l=$.useTemplate(k.ColumnDecorator).appendTo(Global.DecoratorsContainer);if(Global.IsDesigner){h=SimpleEvent.createEventListener([ContextManager.Events.ContextChangedSimple,RowsManager.CellsContainerChangedEvent],function(){var A=SelectionManager.getSelectedInstances();if(A.length===1&&ContextManager.HasCellWrapper.allTrue()){var C=A[0];var y=C.getCellItem();p.ContextCell.setValue(y);p.ContextRow.setValue(y.getRowParent());p.MoreThenOneRowInContext.setFalse()}else{p.ContextCell.setValue(null);if(A.length>1&&ContextManager.HasCellWrapper.allTrue()){var z=x(A);var B=$.getKeys(z);p.MoreThenOneRowInContext.setValue(B.length>1);if(B.length===1){p.ContextRow.setValue(B[0])}else{p.ContextRow.setValue(null)}}else{p.MoreThenOneRowInContext.setFalse();p.ContextRow.setValue(null)}}q()});u=SimpleEvent.createEventListener([OrderManager.Events.ElementsReordered],function(){q()})}function x(z){var y={};$.each(z,function(B,A){var C=A.getCellItem().getRowParent();if(!y[C.id]){y[C.id]=y}});return y}};this.renderRowElement=function(x){var y=new StringBuilder();y.append('<div class="row-element positioned {0}">'.format(x?"root-row":"desc-row"));y.append('<div class="cells-container positioned">');y.append("</div>");y.append("</div>");return $(y.toString())};this.renderCellElement=function(x){var y=new StringBuilder();y.append("<span class='cell-element positioned inline-block' style='width:{0}%'".format(Math.floor(x.width))+">");y.append("<div class='cell-element-container positioned'></div>");y.append("</span>");return $(y.toString())};this.convertCurrentPageToMobile=function(x){RowsManager.UpdateBatch.start();p.renderMasterPage(x);p.renderPageData(x);RowsManager.UpdateBatch.finish()};this.renderMasterPage=function(B){RowsManager.UpdateBatch.start();if(!w[MasterPagesManager.getCurrentMasterPage().id]||B){w[MasterPagesManager.getCurrentMasterPage().id]=true;var A=PageManager.getCurrentPage();var y=A.getHeaderInstance();var z=A.getFooterInstance();if(y){f(y,y.childInstances,B)}var x=[];$.each(A.childInstances,function(){var C=this;if(C.isMasterPageElement.isTrue()&&!(C.hasFeature(Features.PageSection)||C.isType(ElementsTypes.PageContentElement))){C.isDisplayed.setValue(false,"isInPageMasterTemplate");x.push(C)}})}if(z){f(z,z.childInstances,B)}RowsManager.UpdateBatch.finish()};this.renderPageData=function(y){RowsManager.UpdateBatch.start();var x=PageManager.getCurrentPage();if(!j[x.id]||y){j[x.id]=true;$.each(x.childInstances,function(){var z=this;if(z.isMasterPageElement.isFalse()&&!(z.hasFeature(Features.PageSection)||z.isType(ElementsTypes.PageContentElement))){z.setPropertyValue("isVisibleInMode",false)}});$.each(x.getPageContentInstances(),function(A,z){$.each(z.getSectionsByPage(x),function(C,B){f(B,B.childInstances,y)})})}RowsManager.UpdateBatch.finish()};this.resetMasterPage=function(y){y=y?y:MasterPagesManager.getCurrentMasterPage();if(w[y.id]){delete w[y.id];var x=MasterPagesManager.getMasterPageRootInstances(y.id);$.each(PageManager.getCurrentPage().childInstances,function(){var z=this;if(z.isMasterPageElement.isTrue()&&!(z.hasFeature(Features.PageSection)||z.isType(ElementsTypes.PageContentElement))){z.isDisplayed.setValue(true,"isInPageMasterTemplate")}});if(x){$.each(x,function(A,z){v(z)})}}};this.resetPageData=function(x){x=x?x:PageManager.getCurrentPage();if(j[x.id]){delete j[x.id];$.each(x.getPageContentInstances(),function(z,y){$.each(y.getSectionsByPage(x),function(B,A){if(A.isMasterPageElement.isFalse()){v(A)}})});v(x,{removeDescendant:false})}};this.resetRowsAndCells=function(){c={};r={}};this.activateRowsRendering=function(){if(ViewManager.isDesignMode()){h.activateAndExecute();u.activateAndExecute()}};this.deActivateRowsRendering=function(){h.deactivate();u.deactivate();q();d.unbindAll()};this.getCellItemsFromInstances=function(y){var x=[];$.each(y,function(A,z){x.push(z.getCellItem())});return x};this.getInstancesFromCellItems=function(x){var y=[];$.each(x,function(A,z){y.push(z.getInstance())});return y};this.getOrCreateCellFromInstance=function(x){var z=x.getCellItemData();var y=z?RowsManager.getCellById(z.id):undefined;if(!y){y=CellItem.create(x,z)}return y};this.getOrCreateRowByCellItem=function(z,x){var C=z.getRowId();var B=C?RowsManager.getRowById(C):undefined;if(!B||(B.containerInstance&&B.containerInstance.id!==x.id)){var y=x.getPropertyValue("rowsItems");var A=y&&C?y[C]:{id:C};B=RowItem.create([],A)}return B};this.addInstanceToContainer=function(z,y,x){if(!z.canContainerRows()||z.isType(ElementsTypes.TabsPanel)){return}if(!PositionManager.isElementVisible(z)){var C=z.visibilityChangedEvent.bind(function(){RowsManager.addInstanceToContainer(z,y)});d.add(C);return}RowsManager.UpdateBatch.start();b(y);var A=RowsManager.getOrCreateCellFromInstance(y);var B=RowsManager.getOrCreateRowByCellItem(A,z);B.updateCurrentCells(A);B.build(z.isRootInstance());B.setContainerInstance(z);B.initializeCellItems();RowsManager.UpdateBatch.finish()};this.addInstancesToContainer=f;function f(z,x,H){var M=[];var J={};if(!z.canContainerRows()){return}if(!PositionManager.isElementVisible(z)){var y=z.visibilityChangedEvent.bind(function(){LayoutManager.layoutUpdateBatch.performOperation(function(){OperationsManager.disableBatch();RowsManager.addInstancesToContainer(z,x);OperationsManager.endDisableBatch()})});d.add(y);return}x=$.makeArray(x);if(z.hasFeature(Features.Navigatable)){$.each(x,function(N,O){f(O,O.childInstances)});return}RowsManager.UpdateBatch.start();OperationsManager.disableBatch();var I=z.getPropertyValue("rowsItems");var A=$.grep(x,function(N){return(N.hasFeature(Features.HasResponsiveItem)&&N.shouldInstanceWrapWithCell()&&N.isInstanceVisible())});var B=$.grep(A,function(N){return !N.getPropertyValue("cellItem")&&PositionManager.isElementVisible(N)});var F=$.grep(x,function(N){return !(N.hasFeature(Features.HasResponsiveItem)&&N.shouldInstanceWrapWithCell())&&N.isInstanceVisible()});var L=$.mapArray(B,$.returnValue,$.defaultIdFunction);OrderManager.beginReorderingBatch();var D=[];if(B.length>0&&!z.hasFeature(Features.Navigatable)){var K=$.grep(A,function(N){return !!N.getPropertyValue("cellItem")});K=$.sortArray(K,function(N){return N.getPropertyValue("order")});var G=p.separateToRowsAndCells(B);var E;if(B.length===A.length){E=G}else{E=p.separateToRowsAndCells(A)}B=s(G);$.each(E,function(N,O){var P=O.getInstances();$.each(P,function(Q,R){if(!L[R.id]){D.push(K.shift())}else{D.push(R)}})});$.each(D,function(O,N){N.setPropertyValue("order",O+1)})}else{D=A}var C=[];$.each(D,function(P,N){if(!N.getCellItem()||N.getCellItem().isCellInContainer.isFalse()){var O=RowsManager.getOrCreateCellFromInstance(N);var Q=RowsManager.getOrCreateRowByCellItem(O,z);if(!J[Q.id]){M.push(Q);J[Q.id]=Q}Q.updateCurrentCells(O);C.push(N)}});$.each(M,function(O,N){N.build(z.isRootInstance());N.initializeCellItems();N.setContainerInstance(z)});$.each($.merge(F,C),function(O,N){if(N.hasFeature(Features.ItemsContainer)){f(N,N.childInstances)}});OrderManager.endReorderingBatch();var I=z.getPropertyValue("rowsItems");if(I){$.each(I,function(O,N){if(!J[O]&&(!c[O]||c[O].isBuilt.isFalse())){z.removeRowFromContainer(N)}})}RowsManager.UpdateBatch.finish();OperationsManager.endDisableBatch()}function s(x){var y=[];$.each(x,function(B,D){var C=340;var E=D.getInstances();var z=0;var F=0;var A=[];$.each(E,function(I,L){var H=L.getSize().width;z+=H;if(z>340||I===E.length-1){var G=false;F=z-H;if(A.length===0||(z<380&&(L.getArea().right-A[A.length-1].getArea().left<400))){G=true;A.push(L);F=z}var J=$.max(A,function(N){return N.getSize().height}).value;var K=$.min(A,function(N){return N.getSize().height}).value;if(K/J<0.6){$.each(A,function(){var N=this;var O=RowItem.create([]);CellItem.create(N,{rowId:O.id,width:100});y.push(N);b(N)})}else{var M=RowItem.create([]);$.each(A,function(){var N=this;CellItem.create(N,{rowId:M.id,width:Math.floor((N.getSize().width/F)*100)});y.push(N);b(N)})}A=[];z=0;if(!G){if(H>340||I===E.length-1){M=RowItem.create([]);CellItem.create(L,{rowId:M.id,width:100});y.push(L);b(L)}else{A.push(L);z=H}}}else{A.push(L)}})});return y}function b(x){if(x.data.disableAdjustWidthToMobile){x.data.disableAdjustWidthToMobile=false;return}if(x.hasFeature(Features.HasLayout)){var z=x.properties.fillLayout.value.fillHorizontal;var B=x.getSize();var A=x.getPropertyValue("lastResizingSize");var y=x.getPropertyValue("sizeAndPosition");if(B.width===0){B.width=A.width?A.width:y.width}if(B.height===0){B.height=A.height?A.height:y.height}if(B.height===0||B.height===0){ElementsLayoutHelper.setInstancesSize(x,{height:50});return}var C=PageManager.getCoordinator().getPropertyValue("pagePadding");if(!x.shouldBeBlockElementInMobile()&&((!x.parentInstance.isType(ElementsTypes.page))&&!z)&&B.width<(MobileVersionViewManager.MobileViewPortWidth)*0.75){x.setPropertyValue("display",ElementDisplay.Fixed);LayoutManager.layoutUpdateBatch.performOperation(function(){ElementsLayoutHelper.setInstancesSize(x,B)})}else{x.setPropertyValue("display",ElementDisplay.Block);if(x.canResizeVertically.isTrue()){ElementsLayoutHelper.setInstancesSize(x,{height:B.height})}}}}this.removeInstancesFromContainer=v;function v(x,A){A=$.extend({shouldRemoveFromViewPort:false,removeDescendant:true},A);var z=A.shouldRemoveFromViewPort;var C=A.removeDescendant;if(x.childInstances&&C){$.each(x.childInstances,function(E,D){v(D,A)})}if(x.isConvertedToMobile()&&(x.isVisibleInMode()||z)&&x.isUpdatedToViewPort()){x.removeInstanceFromViewPort()}if(x.hasFeature(Features.HasResponsiveItem)&&x.shouldInstanceWrapWithCell()&&x.getCellItem()){var y=x.getCellItem();y.clearCellItem();delete r[y.id]}if(x.hasFeature(Features.ItemsContainer)){var B=x.getRowsFromContainer();if(B){$.each(B,function(E,D){D.removeFromContainer();delete c[D.id]})}}}this.getAllDroppingAreas=function(){var A=[];var B=PageManager.getPageInstancesByType(Features.ItemsContainer);$.each(B,function(H,G){});if(rows[0].id!==currentRow.id||hasMoreThenOneCell){A.push({type:RowsManager.MarkingTypes.Row,isFirst:true,area:$.extendedAreaInfo({left:rowArea.left-RowHorizontalPadding,right:rowArea.right+RowHorizontalPadding,top:rowArea.top-RowVerticalPadding,bottom:rowArea.top+RowVerticalPadding}),item:rows[0],above:true,rowArea:rowArea,markingData:{left:rowArea.left,top:rowArea.top,width:rowArea.width}})}for(var z=0;z<rows.length-1;z++){var x=rows[z];var D=rows[z+1];var E=x.getArea();var F=D.getArea();var y=$.min([E.left,F.left]).value;var C=$.max([E.right,F.right]).value;if((rows[z].id!==currentRow.id&&rows[z+1].id!==currentRow.id)||hasMoreThenOneCell){A.push({type:RowsManager.MarkingTypes.Row,area:$.extendedAreaInfo({left:y-RowHorizontalPadding,right:C+RowHorizontalPadding,top:E.bottom-RowVerticalPadding,bottom:F.top+RowVerticalPadding}),rowArea:E,item:x,above:false,markingData:{left:y,top:(E.bottom+F.top)/2,width:$.max([E.width,F.width]).value}})}}rowArea=rows[rows.length-1].getArea();if(rows[rows.length-1].id!==currentRow.id||hasMoreThenOneCell){A.push({type:RowsManager.MarkingTypes.Row,isLast:true,area:$.extendedAreaInfo({top:rowArea.bottom-RowVerticalPadding,bottom:rowArea.bottom+RowVerticalPadding,left:rowArea.left-RowHorizontalPadding,right:rowArea.right+RowHorizontalPadding}),above:false,rowArea:rowArea,item:rows[rows.length-1],markingData:{left:rowArea.left,top:rowArea.bottom,width:rowArea.width}})}for(var z=0;z<rows.length;z++){A=$.merge(A,n(currentCellItem,rows[z]))}return A};this.getDroppingAreas=function(N){var G=[];var P=N.getCellItem();var O=P.getRowParent();var H=N.parentInstance;var B=H.childInstances;var I=H.getRowsFromContainer();var F=$.getValues(I);if(F.length===0){return G}F=$.sortArray(F,function(Q){return Q.getOrder()});var C=F[0].getArea();var D=10;var z=4;var A=$.getValues(O.getCells()).length>1;if(F[0].id!==O.id||A){G.push({type:RowsManager.MarkingTypes.Row,isFirst:true,area:$.extendedAreaInfo({left:C.left-D,right:C.right+D,top:C.top-z,bottom:C.top+z}),item:F[0],above:true,rowArea:C,markingData:{left:C.left,top:C.top,width:C.width}})}for(var L=0;L<F.length-1;L++){var x=F[L];var E=F[L+1];var M=x.getArea();var K=E.getArea();var J=$.min([M.left,K.left]).value;var y=$.max([M.right,K.right]).value;if((F[L].id!==O.id&&F[L+1].id!==O.id)||A){G.push({type:RowsManager.MarkingTypes.Row,area:$.extendedAreaInfo({left:J-D,right:y+D,top:M.bottom-z,bottom:K.top+z}),rowArea:M,item:x,above:false,markingData:{left:J,top:(M.bottom+K.top)/2,width:$.max([M.width,K.width]).value}})}}C=F[F.length-1].getArea();if(F[F.length-1].id!==O.id||A){G.push({type:RowsManager.MarkingTypes.Row,isLast:true,area:$.extendedAreaInfo({top:C.bottom-z,bottom:C.bottom+z,left:C.left-D,right:C.right+D}),above:false,rowArea:C,item:F[F.length-1],markingData:{left:C.left,top:C.bottom,width:C.width}})}for(var L=0;L<F.length;L++){G=$.merge(G,n(P,F[L]))}return G};function n(E,J){var B=[];var F=J.getCells();var H=$.getValues(F);H=$.sortArray(H,function(L){return L.getOrder()});var z=H[0].getArea();var K=J.getArea();var x=K.top;var y=K.bottom;if(H[0].id!==E.id){B.push({type:RowsManager.MarkingTypes.Column,isFirst:true,area:$.extendedAreaInfo({left:z.left-50,right:z.center.left,top:x,bottom:y}),item:H[0],rowArea:K,markingData:{left:z.left,top:K.top,height:K.height}})}for(var A=0;A<H.length-1;A++){var C=H[A];var D=H[A+1];var G=C.getArea();var I=D.getArea();if(D.id!==E.id&&C.id!==E.id){B.push({type:RowsManager.MarkingTypes.Column,area:$.extendedAreaInfo({left:G.center.left,right:I.center.left,top:x,bottom:y}),isFirst:false,rowArea:K,item:H[A],markingData:{left:(G.right+I.left)/2,top:K.top,height:K.height}})}}z=H[H.length-1].getArea();if(H[H.length-1].id!==E.id){B.push({type:RowsManager.MarkingTypes.Column,isLast:true,area:$.extendedAreaInfo({left:z.center.left,right:z.right+50,top:x,bottom:y}),rowArea:K,item:H[H.length-1],markingData:{left:z.right,top:K.top,height:K.height}})}return B}this.toggleAreaMarking=function(y,x){t.quickToggle(y!==undefined&&y.type===p.MarkingTypes.Row,function(){var z=y.markingData;var A=$.extendedAreaInfo({top:z.top-5,left:z.left,right:z.left+z.width,bottom:z.top+5});t.setArea($.translateArea(A,x))});l.quickToggle(y!==undefined&&y.type===p.MarkingTypes.Column,function(){var z=y.markingData;var A=$.extendedAreaInfo({top:z.top,left:z.left-5,right:z.left+5,bottom:z.top+z.height});l.setArea($.translateArea(A,x))})};this.onColumnDropped=function(x,C){if(C){var J=x.getRowParent();var z=C.rowArea.width;var F=x.getInstance();var A=F.getPropertyValue("margin");var K=F.getSize();var I=F.getPropertyValue("fillLayout").fillHorizontal;var H;var D;OrderManager.beginReorderingBatch();LayoutManager.layoutUpdateBatch.start();if(C.type===p.MarkingTypes.Column){var E=C.item;var y=E.getOrder();H=E.getRowParent();var G=$.getValues(H.getCells());if(H.id!==J.id){H.addCellItems([x])}F.setPropertyValue("order",y+(C.isFirst?-0.1:0.1))}if(C.type===p.MarkingTypes.Row){H=C.item;var y=H.getOrder();var B=(C.above?H.getMinOrder().value-0.1:H.getMaxOrder().value+0.1);J.removeCells([x]);x.setWidth(100);RowsManager.addInstanceToContainer(F.parentInstance,F,true);if(x.instance.hasFeature(Features.HasContent)){x.instance.adjustSizeToContent({minHeight:x.instance.getSize().height})}F.setPropertyValue("order",B)}LayoutManager.layoutUpdateBatch.finish();OrderManager.endReorderingBatch();F.parentInstance.reorderChildElements();LayoutManager.refreshElementsLayout(F);RowsManager.UpdateBatch.fireEvent(RowsManager.CellsContainerChangedEvent,{containerInstance:F.parentInstance})}};this.separateToRowsAndCells=function(E){var D=[];var B=[];if(E.length===0){return[]}var A=PositionManager.getElementsArea(E,true);var C;var x=0;var z=[];$.each(SectionsAlgorithms,function(G,I){var J=$.getValues(E);var H=$.mapArray(J,$.returnValue,$.defaultIdFunction);var F=[];while(J.length>0){J=I(J);F.push({instances:J});$.each(J,function(L,K){delete H[K.id]});J=$.getValues(H)}$.each(ColumnsAlgorithms,function(L,K){$.each(F,function(N,O){var M=K(O.instances,{maxArea:A.width});M.rows=$.sortArrayDesc(M.rows,function(P){return P.getColumns().length});O.rowsData=M});$.each(SectionsComparers,function(O,Q){var N=0;var P=$.makeArray(F);var M=Q(P,{instancesArea:A,instances:E});z.push(M);if(M.totalColumns>x){C=M;x=M.totalColumns}})})});var y=p.orderColumnsInRows(C);return y};this.orderColumnsInRows=function(x){return x.columnsToOrder};this.sectionsComparer=function(F,z){D=$.makeArray(D);z=$.extend({minSpacingBetweenSection:50},z);var B=z.minSpacingBetweenSection;var P=[];while(F.length>0){var D=F[0];var H=D.rowsData;var I=D.instances;var N=PositionManager.getElementsArea(I,true);var C=F.length;if(C>1&&I.length>1&&$.getKeys(H).length>0){var G=1;var O=1;var M;var L=$.sortArrayDesc($.getKeys(H.rowsByCols));$.each(L,function(Q,S){var R=H.rowsByCols[S];if(S>1){$.each(R,function(Z,ah){var aa=ah.getColumns();var ac=aa.length;var W=ah.getArea(true);var ad=1;var af=true;var Y=[ah];var X=N;while(af&&ad<F.length&&ad<4){af=false;var T=F[ad];var ae=T.rowsData;var ag=T.instances;var ab=PositionManager.getElementsArea(ag,true);if(ae.rowsByCols[ac]&&ab.top-X.bottom<B){var V=$.sortArrayDesc($.getKeys(ae.rowsByCols));var U=ae.rowsByCols[ac];$.each(U,function(ao,aj){var an=true;for(var ak=0;ak<ac&&an;ak++){var al=ah.getColumns()[ak+1];var ai=aj.getColumns()[ak];if(ak<ac-1&&ai.getArea(true).right>al.getArea(true).left+10){an=false}if(ak>0){var am=ah.getColumns()[ak-1];if(ai.getArea(true).left<am.getArea(true).right-10){an=false}}}if(an){af=true;ad++;Y.push(aj);return false}})}X=ab}if(G*O<ad*ac){G=ad;O=ac;M=Y}})}});if(O>1){for(var A=0;A<O;A++){for(var J=0;J<G;J++){var E=M[J];var y=E.getColumns()[A];P.push(y)}}for(var K=0;K<G;K++){F.shift()}}}if(F.length===C){F.shift();if(H.rows.length>0){var x=H.rowsByCols[1][0].getColumns();P=$.merge(P,x)}}}return{columnsToOrder:P,totalColumns:P.length}};this.separateToEqualColumns=function(z,A){A=$.extend({maxColumns:10,minColumns:1,minSpacingIntersection:undefined,shouldSort:true,maxArea:960},A);var M=A.shouldSort;if(M){z=ElementsLayoutHelper.sortByLeftPosition(z)}var X=z.length<A.maxColumns?z.length:A.maxColumns;var Q=A.minColumns;var aa={};if(Q>z.length){return aa}var ab=PositionManager.getElementsArea(z,true);var x=ElementsLayoutHelper.getHorizontalSpacingData(z);var ad=x.maxSpacing;var B=ab.left;var H=A.maxArea>ab.width?A.maxArea:ab.width;var U=false;var y;var J=[];var F={};for(var L=X;L>Q-1&&!U;L--){var Z=(H)/L;var I=false;for(var D=Z;(D>=(ab.width/L)-20)&&!I;D-=5){var W=A.minSpacingIntersection?A.minSpacingIntersection:D*0.2;var T=0;var O=B;var S=0;var C=0;var P={};var E=true;var G=RowOfColumns.create();y=undefined;while(E&&C<z.length){var Y=z[C];var V=PositionManager.getElementArea(Y,true);var K=V.left>=O-W&&V.left<O+D;var R=V.left>=O+D-W&&V.left<O+D*2;var ac=V.right-W<=O+D;var N=V.right-W<=O+D*2;if(K&&ac){if(!y){y=ColumnCell.create();G.addColumns(y)}y.addInstances(Y);C++}else{if(R&&N){if(!y||y.getInstances().length===0){E=false}else{y=undefined;O+=D;S++}}else{E=false}}}if(G.getColumns().length===L&&C===z.length){I=true;J.push(G);if(!F[L]){F[L]=[]}F[L].push(G)}}}return{rows:J,rowsByCols:F}};this.separateToColumns=function(C,y){y=$.extend({maxColumns:10,minColumns:2,minSpacingIntersection:undefined,shouldSort:true,maxArea:960},y);var x=y.shouldSort;if(x){C=ElementsLayoutHelper.sortByLeftPosition(C)}var z=[];$.each(C,function(F,E){z.push(ColumnCell.create(E))});var D=RowOfColumns.create(z);var B=a(D);var A={};$.each(B,function(E,G){var F=G.getColumns().length;if(!A[F]){A[F]=[]}A[F].push(G)});return{rows:B,rowsByCols:A}};function a(C){var x=C.getColumns();if(x.length===1){return[RowOfColumns.create(x)]}var z=[];if(ColumnCell.canBeInDifferentColumns(x[0],x[1])){var B=RowOfColumns.duplicateRow(C);var A=B.shift();var y=a(B);$.each(y,function(E,D){D.unShift(A)});$.merge(z,y)}var B=RowOfColumns.duplicateRow(C);B.mergeColumnsFromStart(2);var y=a(B);$.merge(z,y);return z}function m(E){var C=PositionManager.getElementsAreaData(E,true);var y=C.topInstance;var x=PositionManager.getElementArea(y,true);var D=x?$.expandArea(x,{left:50000,right:50000,top:0,bottom:10}):null;if(!D){return E}var B=PositionManager.getAreaOverlappingInstances(D,E,undefined,true);var A=y;var z=x;$.each(B,function(G,F){var H=F.getArea(true);if(H.top<x.top+x.height*0.3&&H.bottom>z.bottom){A=F;z=H}});D=$.expandArea(z,{left:50000,right:50000,top:50000,bottom:10});return PositionManager.getInstancesInsideArea(D,B,undefined,true)}this.getTopSectionInstances=m;this.addRowToPage=function(x){c[x.id]=x};this.removeRowFromPage=function(x){delete c[x.id]};this.getRowById=function(x){return c[x]};this.addCellToPage=function(x){r[x.id]=x};this.removeCellFromPage=function(x){delete r[x.id]};this.getCellById=function(x){return r[x]};this.getCellsSpacing=function(){return PageManager.getCoordinator().getPropertyValue("cellsSpacing")}}();var ColumnsAlgorithms=[RowsManager.separateToEqualColumns,RowsManager.separateToColumns];var ColumnsComparers=[];var SectionsAlgorithms=[RowsManager.getTopSectionInstances];var SectionsComparers=[RowsManager.sectionsComparer];(function(){window.RowItemObj=function(a,b){var c=this;b=$.extend({id:undefined,cellsSpacing:undefined},b);a=$.makeArray(a);b.id=b.id?b.id:$.uniqueID();this.id=b.id;this.options=b;this.cellItems=$.mapArray(a,$.returnValue,$.defaultIdFunction);this.isRowInPage=ObservableFlag.create(false);this.isInitialized=ObservableFlag.create(false);this.isBuilt=ObservableFlag.create(false);this.cellsSpacingObservable=ObservableObject.create(b.cellsSpacing);this.lastCell=null;this.globalCellsSpacingListener=SimpleEvent.createEventListener([{event:PropertiesManager.Events.NamedPropertyValueChanged,name:"cellsSpacing"},this.cellsSpacingObservable.valueChangedEvent],function(){c.updateCellsSpacing()});RowsManager.addRowToPage(this);$.each(a,function(f,d){d.setRowParent(c)})};(function(b,a){a.getDataForSave=function(){var d=this;var c=$.getKeys(this.getCells());return{id:this.id,settings:this.settings,cellsSpacing:this.cellsSpacingObservable.getValue()}};a.build=function(d){var c=this;if(c.isBuilt.isFalse()){c.$element=RowsManager.renderRowElement(d);c.$cellsContainer=$(".cells-container",c.$element);c.isBuilt.setTrue()}};a.setContainerInstance=function(c){this.containerInstance=c;c.addRowToContainer(this);this.addToContainer(this.containerInstance.getContentLayer())};a.addToContainer=function(c){this.globalCellsSpacingListener.activate();this.getElement().appendTo(c);this.isRowInPage.setTrue()};a.removeFromContainer=function(){this.globalCellsSpacingListener.deactivate();this.getElement().detach();this.isRowInPage.setFalse()};a.remove=function(){this.globalCellsSpacingListener.deactivate();this.isRowInPage.setFalse();this.containerInstance.removeRowFromContainer(this);this.removeCells($.getValues(this.getCells()));this.$element.remove();RowsManager.removeRowFromPage(this);$.each(this.containerInstance.childInstances,function(){this.childIndex.setValue(-1)});OrderManager.reassignElementsOrders()};a.getElement=function(){return this.$element};a.getCellsContainer=function(){return this.$cellsContainer};a.initializeCellItems=function(){var c=this;$.each(this.cellItems,function(f,d){d.setRowParent(c);d.addToContainer(c.getCellsContainer())});c.updateCellsSpacing();if(this.containerInstance){$.each(this.containerInstance.childInstances,function(){this.childIndex.setValue(-1)});OrderManager.reassignElementsOrders()}};a.updateCurrentCells=function(c){var d=this;c=$.makeArray(c);$.each(c,function(g,f){d.cellItems[f.id]=f;f.setRowParent(d)});RowsManager.UpdateBatch.fireEvent(RowsManager.CellsContainerChangedEvent,{containerInstance:this.containerInstance})};a.toggleFirstRow=function(c){var d=this.containerInstance.data.firstRow;if(c){if(d&&d.id!==this.id){d.toggleFirstRow(false)}this.containerInstance.data.firstRow=this;this.$element.addClass("first")}else{if(d&&d.id===this.id){this.$element.removeClass("first")}}};a.toggleLastRow=function(d){var c=this.containerInstance.data.lastRow;if(d){if(c&&c.id!==this.id){c.toggleLastRow(false)}this.containerInstance.data.lastRow=this;this.$element.addClass("last")}else{if(c&&c.id===this.id){this.$element.removeClass("last")}}};a.getOrder=function(){return $.getValues(this.cellItems)[0].getInstance().getPropertyValue("order")};a.getMaxOrder=function(){var c=0;var d;if($.isEmptyObject(this.cellItems)){return}$.each(this.cellItems,function(h,g){var f=g.getInstance().getPropertyValue("order");if(f>c){c=f;d=h}});return{value:c,item:this.cellItems[d]}};a.getMinOrder=function(){var c=Infinity;var d;if($.isEmptyObject(this.cellItems)){return}$.each(this.cellItems,function(h,g){var f=g.getInstance().getPropertyValue("order");if(f<c){c=f;d=h}});return{value:c,item:this.cellItems[d]}};a.markChilds=function(){var d=0;var g;var c=Infinity;var f;if($.isEmptyObject(this.cellItems)){return}$.each(this.cellItems,function(j,i){var h=i.getInstance().getPropertyValue("order");if(h>d){d=h;g=j}if(h<c){c=h;f=j}i.$element.removeClass("first");i.$element.removeClass("last")});this.firstCell=this.cellItems[f];this.lastCell=this.cellItems[g];this.firstCell.$element.addClass("first");this.lastCell.$element.addClass("last")};a.updateCellsSpacing=function(){var g=this;var d=$.makeArray($.getValues(this.cellItems));var h=this.getCellsSpacingRatio();var c=0;$.each(d,function(k,j){c+=j.getWidth()});if(c){var f=100/c;$.each(d,function(k,j){j.setWidth(j.getWidth()*f,h)})}else{$.each(d,function(k,j){j.setWidth(100/d.length,h)})}};a.updateCellsWidth=function(c){var d=this.getCellsSpacingRatio();$.each(c,function(j,g){var h=g.beforeWidth;var m=g.delta;var f=g.cellItem;var k=g.width;var l=Math.floor(((m/h)+1)*k);f.setWidth(l,d)})};a.getCellsSpacing=function(){var c=this.cellsSpacingObservable.getValue();if(c===undefined){return RowsManager.getCellsSpacing()}return c};a.addCellItems=function(c){var i=this;c=$.makeArray(c);if(c.length===0){return}var k=$.mapArray(c,$.returnValue,$.defaultIdFunction);var f=$.getKeys(i.cellItems).length;var d=f+c.length;var g=f/d;var h=i.getCellsSpacing();var j=(100-h*(d-1))/100;$.each(this.getCells(),function(m,l){l.setWidth(l.getWidth()*g,j);if(l.instance.hasFeature(Features.HasContent)){l.instance.adjustSizeToContent({minHeight:l.instance.getSize().height})}});$.each(c,function(n,l){var m=l.getRowParent();if(m){m.removeCells(l)}l.setRowParent(i);l.addToContainer(i.getCellsContainer());i.cellItems[l.id]=l;l.setWidth((100/d),j);if(l.instance.hasFeature(Features.HasContent)){l.instance.adjustSizeToContent({horizontally:false,minHeight:l.instance.getSize().height})}});$.each(this.containerInstance.childInstances,function(){this.childIndex.setValue(-1)});OrderManager.reassignElementsOrders()};a.removeCells=function(c){var g=this;c=$.makeArray(c);if(c.length===0){return}var i=$.mapArray(c,$.returnValue,$.defaultIdFunction);$.each(i,function(k,j){j.setRowParent(undefined);j.removeFromContainer();delete g.cellItems[k]});var d=$.getKeys(g.cellItems).length;var h=this.getCellsSpacingRatio();var f=0;$.each(g.cellItems,function(k,j){f+=j.getWidth()});$.each(g.cellItems,function(k,j){j.setWidth(100*(j.getWidth()/f),h);j.getInstance().childIndex.setValue(-1)});if(d===0){g.remove()}else{OrderManager.reassignElementsOrders()}};a.getCellsSpacingRatio=function(){var c=$.getKeys(this.cellItems).length;var d=this.getCellsSpacing();var f=(100-d*(c-1))/100;return f};a.getCalculatedWidth=function(c){var d=this.getCellsSpacingRatio();return c*d};a.getNewColumnCalculatedWidth=function(){var c=$.getKeys(this.cellItems).length;var f=this.getCellsSpacing();var g=(100-f*(c))/100;var d=100/($.getKeys(this.cellItems).length+1);return d*g};a.getWidth=function(){var c=PositionManager.getContentSize(this.containerInstance);return c.width};a.getArea=function(d){var c=this.$element.getArea();if(d){c=$.getAbsoluteArea(c,PositionManager.getPositioningRootOffset())}else{c=$.getRelativeArea(c,PositionManager.getPositioningRootOffset())}return c};a.getCells=function(){return this.cellItems}})(RowItemObj,RowItemObj.prototype)})();(function(){window.CellItemObj=function(a,b){b=$.extend({id:undefined,settings:undefined,rowId:undefined,width:100},b);b.id=b.id?b.id:$.uniqueID();this.id=b.id;this.width=b.width;this.calculatedWidth=b.width;this.settings=b.settings;this.rowId=b.rowId;this.instance=a;a.setCellItem(this);a.updateCellItemData(this);RowsManager.addCellToPage(this);this.isCellInContainer=ObservableFlag.create(false);this.isInitialized=ObservableFlag.create(false)};(function(b,a){a.getDataForSave=function(){var c=this;return{id:c.id,settings:c.settings,width:c.getWidth(),rowId:this.getRowId()}};a.addToContainer=function(c){this.build();this.instance.setCellItem(this);this.instance.addToCellItem();this.getElement().appendTo(c);this.isCellInContainer.setTrue()};a.removeFromContainer=function(){if(this.isCellInContainer.isTrue()){this.getElement().detach();this.instance.removeElementFromCellItem();this.isCellInContainer.setFalse()}};a.setWidth=function(d,c){this.width=d;this.calculatedWidth=d*c;this.getElement().css("width",Math.floor(d*c)+"%");this.getInstance().updateCellItemData(this);LayoutManager.refreshElementsLayout(this.getInstance())};a.getWidth=function(c){return this.width};a.clearCellItem=function(){this.getElement().detach();this.instance.reAttachElementToContainer();this.instance.setCellItem(null);this.isCellInContainer.setFalse()};a.build=function(){var c=this;if(c.isInitialized.isFalse()){c.$element=RowsManager.renderCellElement({width:c.getWidth()});c.$elementContainer=$(".cell-element-container",c.$element);c.isInitialized.setTrue()}};a.remove=function(){this.clearCellItem();RowsManager.removeCellFromPage(this);this.getRowParent().removeCells([this]);this.instance.removeCellItem();this.$element.remove()};a.getElement=function(){return this.$element};a.getElementContainer=function(){return this.$elementContainer};a.getRowId=function(){return this.rowId};a.getRowParent=function(){return this.rowParent};a.setRowParent=function(c){this.rowParent=c;this.rowId=c?c.id:undefined};a.getInstance=function(){var c=this;return c.instance};a.getOrder=function(){return this.instance.getPropertyValue("order")};a.getCellWidth=function(){return this.$element.width()};a.getArea=function(d){var c=this.$element.getArea();if(d){c=$.getAbsoluteArea(c,PositionManager.getPositioningRootOffset())}else{c=$.getRelativeArea(c,PositionManager.getPositioningRootOffset())}return c}})(CellItemObj,CellItemObj.prototype)})();var RowItem=new function(){this.create=function(b,a){return new RowItemObj(b,a)}}();var CellItem=new function(){this.create=function(b,a){return new CellItemObj(b,a)}}();var MobileVersionViewManager=new function(){var p={CellResizingHandle:{group:"mobile-version-view-manager-templates",name:"cell-resizing-handle-template"}};var k=this;k.Flags={IsInMobileContext:ObservableFlag.create(false),IsActivated:ObservableFlag.create(false)};k.Events={MobileEditingStarted:SimpleEvent.create(),MobileEditingFinished:SimpleEvent.create()};var f=OperationsBatch.create();var g=OperationsBatch.create();this.MobileRefreshingPositionsBatch=g;this.updateBatch=f;var l=360;k.MobileViewPortWidth=l;var a="MobileResponsiveStateId1234";k.MobileStateName=a;var h={};var i={};this.reset=function(){StatesGroupsManager.removeStateGroup(a)};this.switchToDesktop=function(){if(ElementsEditingManager.isDuringEditing()){ElementsEditingManager.finishElementEditing()}if(MobileVersionViewManager.Flags.IsActivated.isFalse()){return}var q=Modes.PreviewMode.flag.isTrue();EditorManager.SwitchBetweenMobileAndPcBatch.start();ModeManager.refreshMode({callbackBetweenRemoveAndAdd:function(){MobileVersionViewManager.Flags.IsInMobileContext.setFalse();EditorManager.SwitchBetweenMobileAndPcBatch.finish()}})};this.switchToMobile=function(){if(ElementsEditingManager.isDuringEditing()){ElementsEditingManager.finishElementEditing()}if(MobileVersionViewManager.Flags.IsActivated.isTrue()){return}if(!LimitationsManager.validateMobile()){return}EditorManager.SwitchBetweenMobileAndPcBatch.start();ModeManager.refreshMode({callbackBetweenRemoveAndAdd:function(){MobileVersionViewManager.Flags.IsInMobileContext.setTrue();EditorManager.SwitchBetweenMobileAndPcBatch.finish()}});if(SiteSettingsManager.getValue("isFirstMobileUse")===undefined&&ViewManager.isDesignMode()){Dialogs.LightBoxDialogCentered.usePanel(PanelsManager.getDefaultPanel(MobileIntroductionPanel)).open({header1:"Welcome to the Mobile Editor",buttons:ConfirmationPanel.OkButton,buttonsOptions:[{type:ConfirmationButtonsTypes.OK,title:"OK, let's go!"}],onConfirm:function(){SiteSettingsManager.setValue("isFirstMobileUse",true)}})}};this.addInstanceToMobile=function(q){var r=q.hasFeature(Features.PageSection);if(!r&&!q.hasFeature(Features.HasResponsiveItem)){return}var s=$.getValues(ElementsManager.getAllPageInstances());f.start();OrderManager.beginReorderingBatch();LayoutManager.beginLayoutUpdateBatch();PropertiesManager.UpdateBatch.start();if(r){$.each(q.childInstances,function(u,t){m(t)})}else{m(q)}LayoutManager.refreshElementsLayout(s);PropertiesManager.UpdateBatch.finish();OrderManager.setReassignmentRequired(true);OrderManager.endReorderingBatch();LayoutManager.endLayoutUpdateBatch();f.finish();LayoutManager.requestUpdatePosition(s)};function m(q){if(q.hasFeature(Features.DataList)){q.reArrangementDisabled.setValue(true,"MobileVersion")}if(!q.wasEditedInMode()){q.adjustInstanceToViewPort()}q.updateInstanceToViewPort();RowsManager.addInstanceToContainer(q.parentInstance,q);$.each(q.childInstances,function(s,r){m(r)});if(!q.wasEditedInMode()){q.setAsEditedInMode(true);PropertiesManager.setValueInCustomState(q,"sizeAndPosition",PropertiesManager.getEditedState(),q.getPropertyValue("sizeAndPosition"))}}this.resetContentChanges=function(){OperationsManager.disableBatch();var q=PropertiesManager.getEditedState();$.each($.getValues(ElementsManager.getAllPageInstances()),function(s,r){MobileVersionViewManager.resetInstanceContentChanges(r)});OperationsManager.endDisableBatch()};this.resetInstanceContentChanges=function(q){var r=q.getContentProperties();$.each(r,function(t,s){PropertiesManager.setValueInCustomState(q,q.properties[s],PropertiesManager.getEditedState(),undefined)})};this.resetInstanceStyleChanges=function(q){var r=PropertiesManager.getStyleProperties(q);$.each(r,function(s,t){PropertiesManager.setValueInCustomState(q,t,PropertiesManager.getEditedState(),undefined)})};this.resetPage=function(){OperationsManager.disableBatch();var q=PropertiesManager.getEditedState();MobileVersionViewManager.switchToDesktop();PropertiesManager.resetCustomState(PageManager.getCurrentPage(),q);$.each($.getValues(ElementsManager.getAllPageInstances()),function(s,r){PropertiesManager.resetCustomState(r,q)});MobileVersionViewManager.switchToMobile();OperationsManager.endDisableBatch()};this.resetContentChanges=function(){OperationsManager.disableBatch();var q=PropertiesManager.getEditedState();MobileVersionViewManager.switchToDesktop();$.each($.getValues(ElementsManager.getAllPageInstances()),function(s,r){$.each(r.getContentProperties(),function(u,t){PropertiesManager.setValueInCustomState(r,r.properties[t],q,undefined)})});MobileVersionViewManager.switchToMobile();OperationsManager.endDisableBatch()};this.resetInstance=function(q){OperationsManager.disableBatch();var r=PropertiesManager.getEditedState();PropertiesManager.resetCustomState(q,r);OperationsManager.endDisableBatch()};this.resetCurrentPageArrangement=function(){OperationsManager.disableBatch();var q=PropertiesManager.getEditedState();MobileVersionViewManager.switchToDesktop();$.each($.getValues(ElementsManager.getAllPageInstances()),function(s,r){$.each(["rowsItems","cellItem","sizeAndPosition","margin","staticMargin","display","cellHorizontalAlignment","order","isElementWasEditedInMode"],function(u,t){PropertiesManager.setValueInCustomState(r,r.properties[t],q,undefined)})});MobileVersionViewManager.switchToMobile();OperationsManager.endDisableBatch()};this.resetCurrentPageSections=function(){OperationsManager.disableBatch();var q=PropertiesManager.getEditedState();MobileVersionViewManager.switchToDesktop();$.each($.getValues(PageManager.getCurrentPageSections()),function(s,r){$.each(["order"],function(u,t){PropertiesManager.setValueInCustomState(r,r.properties[t],q,undefined)})});MobileVersionViewManager.switchToMobile();OperationsManager.endDisableBatch()};this.startDraggingInstance=function(q,s){s=$.extend({allAreas:false},s);var u=s.allAreas;LayoutManager.requestUpdatePosition(q.parentInstance.childInstances);var t=u?RowsManager.getDroppingAreas(q):RowsManager.getDroppingAreas(q);var r=q.getCellItem();DraggingBehaviours.Draggable.startDragging({$element:q.getCellItem().$element,event:e,$scrollParent:DesignerManager.getScrollablePane(),draggingHelper:{create:function(v){var x=v.clone();var w=$('<span class="absolute-positioned block mobile-dragging-wrapper"></span>').elementSize(v.elementSize());x.css("width","100%");x.appendTo(w);return w},appendTo:function(){return q.parentInstance.$element},helperClass:"mobile-dragging-helper-class"},droppableAreas:{getAnchorOffset:function(){return PositionManager.getPositioningRootOffset()},areasInfo:t,overAreasCallback:function(v){RowsManager.toggleAreaMarking(v[0],PositionManager.getPositioningRootOffset())},dropCallback:function(v){RowsManager.onColumnDropped(r,v[0])}},behaviourOptions:{autoScroll:{autoScrollArea:DesignerManager.calculateDesignerArea(),vertical:true,horizontal:true,interval:0,delta:5,distance:20,autoScrollCallback:$.noop}},onDrag:function(w,v){},onStart:function(w,v){q.isInDragging.setTrue();Global.Events.ElementDraggingStart.fire(DraggingManager,w);OperationsManager.beginAtomicBatch(true,"Dragging ")},onEnd:function(w,v){RowsManager.toggleAreaMarking(false);$(document).unbind(MobileScrollingNameSpace);q.isInDragging.setFalse();OperationsManager.endAtomicBatch();Global.Events.ElementDraggingStoped.fire(DraggingManager,w)}})};var n;this.initialize=function(){if(!StatesGroupsManager.getStatesGroup(a)){StatesGroupsManager.addStateGroup({title:a,stateTitle:a,id:a,stateId:a})}var q={};q[a]={priority:6,id:a,responsiveState:true};if(!ElementStates[a]){ElementStatesManager.registerElementStates(q)}};var c;var d=SimpleEvent.createEventListener([{event:PropertiesManager.Events.NamedPropertyValueChanged,name:"sizeAndPosition"},OrderManager.Events.ElementsReordered,RowsManager.CellsContainerChangedEvent,{event:PropertiesManager.Events.NamedPropertyValueChanged,name:"rowsSpacing"},{event:PropertiesManager.Events.NamedPropertyValueChanged,name:"cellsSpacing"},{event:PropertiesManager.Events.NamedPropertyValueChanged,name:"pagePadding"},{event:PropertiesManager.Events.NamedPropertyValueChanged,name:"sectionPadding"},{event:PropertiesManager.Events.NamedPropertyValueChanged,name:"sectionVerticalPadding"},{event:PropertiesManager.Events.NamedPropertyValueChanged,name:"innerRowPadding"},{event:PropertiesManager.Events.NamedPropertyValueChanged,name:"cellsHorizontalAlignment"},{event:PropertiesManager.Events.NamedPropertyValueChanged,name:"cellsVerticalAlignment"},{event:PropertiesManager.Events.NamedPropertyValueChanged,name:"innerRowsSpacing"},{event:PropertiesManager.Events.NamedPropertyValueChanged,name:"staticMargin"},{event:PropertiesManager.Events.NamedPropertyValueChanged,name:"cellHorizontalAlignment"},{event:PropertiesManager.Events.NamedPropertyValueChanged,name:"isVisibleInMode"},Global.Events.NavigationFinished],function(r){if(r){var q=r.instance;if(r.containerInstance){q=r.containerInstance.childInstances[0]}if(q&&(q.isType(ElementsTypes.coordinator)||q.isRelativePositioned())){j()}}else{j()}});function j(){d.deactivate();if(Global.IsDesigner){ModeManager.updateBatch.performOperation(function(){o()},"MobileVersionViewManager-updatePositions")}else{PageManager.PageChangingOperation.performOperation(function(){b()},"MobileVersionViewManager-updatePositions")}}function o(){g.start();ResizingManagerNew.ResizingBatch.performOperation(function(){b()},"MobileVersionViewManager-positions")}function b(){OrderManager.OrderingBatch.performOperation(function(){d.activate();LayoutManager.requestUpdatePosition($.getValues(ElementsManager.getAllPageInstances()));g.finish()},"MobileVersionViewManager-positions")}this.activateMobileAutoConvert=function(){c=SimpleEvent.createBindingsCollection();if(ModeManager.inMode(Modes.NormalMode)){EditorManager.Flags.MobileEditing.setTrue();SelectionManager.Flags.canSelectMoreThenOneElement.setValue(false);SelectionManager.selectInstances([],true);SelectionManager.disable("MobileVersionState");k.Events.MobileEditingStarted.fire()}k.convertToMobile();n=InteractiveColumnsResizing.startInteraction($("#page-body"),{rowSelector:".row-element.root-row",cellSelector:".cell-element",resizingHandlesFactory:function(){var q=$.useTemplate(p.CellResizingHandle);return{$element:q,positioningFunction:function(s,r){q.setOffset({left:s.left,top:s.top});q.height(r)}}},minWidth:10,onStart:function(q){q.$cellBefore.addClass("highlighted");q.$cellAfter.addClass("highlighted");q.cellBeforeInstance=$instance($(".design-element",q.$cellBefore).first());q.cellAfterInstance=$instance($(".design-element",q.$cellAfter).first());q.cellBefore=q.cellBeforeInstance.getCellItem();q.cellAfter=q.cellAfterInstance.getCellItem();q.cellBeforePrecentageWidth=q.cellBefore.getWidth();q.cellAfterPrecentageWidth=q.cellAfter.getWidth();q.row=q.cellAfter.getRowParent()},onResize:function(q){q.row.updateCellsWidth([{width:q.cellBeforePrecentageWidth,beforeWidth:q.cellBeforeWidth,cellItem:q.cellBefore,delta:q.delta},{width:q.cellAfterPrecentageWidth,beforeWidth:q.cellAfterWidth,cellItem:q.cellAfter,delta:-q.delta}]);LayoutManager.refreshElementsLayout([q.cellAfterInstance,q.cellBeforeInstance]);LayoutManager.requestUpdatePosition([q.cellAfterInstance,q.cellBeforeInstance])},onEnd:function(q){q.$cellBefore.removeClass("highlighted");q.$cellAfter.removeClass("highlighted")}})};this.getPageInstancesHierarchiesData=function(q){return MobileVersionViewManager.Flags.IsInMobileContext.isTrue()&&h[q.id]?h[q.id].rootInstancesHierarchies:undefined};this.getMasterPageInstancesHierarchiesData=function(q){q=q?q:MasterPagesManager.getDefaultMasterPageId();return MobileVersionViewManager.Flags.IsInMobileContext.isTrue()&&i[q]?i[q].rootInstancesHierarchies:undefined};this.convertToMobile=function(q){c=SimpleEvent.createBindingsCollection();OperationsManager.disableUndo("deactivateMobile");OperationsManager.disableBatch();f.start();RowsManager.activateRowsRendering();var t={};h={};i={};var r=PageManager.Events.PageChanging.bindAndExecute(function(v,x){if(q){return}f.start();k.Flags.IsActivated.setFalse();var y=PageManager.getCurrentPage();MobileVersionViewManager.endEditedState();OrderManager.beginReorderingBatch();var w=t[x];if(!w){Global.Flags.DisableDataListArrangements.setTrue()}});var s=MasterPagesManager.updateCurrentMasterPageBatch.bind(function(){MobileVersionViewManager.startEditingState()},function(){MobileVersionViewManager.endEditedState()});c.add(s);c.add(r);var u=true;RowsManager.resetRowsAndCells();r=PageManager.Events.PageChanged.bindAndExecute(function(){var B=PageManager.getCurrentPage();var z=t[B.id];Global.Flags.DisableDataListArrangements.setFalse();MasterPagesManager.updateCurrentMasterPage();if(q){return}var A=PageManager.getCoordinator();var w=h[B.id];if(!w){w=ElementsManager.getInstancesWithHierarchyFromRoots(B);h[B.id]=w}if(!z){$.each($.getValues(ElementsManager.getAllPageInstances()),function(D,C){if(C.hasFeature(Features.DataList)&&!C.getCellItem()){C.reArrangementDisabled.setValue(true,"MobileVersion")}})}var x=MasterPagesManager.getCurrentMasterPage().id;if(!i[x]){i[x]=ElementsManager.getInstancesWithHierarchyFromRoots(MasterPagesManager.getMasterPageRootInstances())}var v=w.allInstances;OperationsManager.disableBatch();if(!z||ViewManager.isDesignMode()){MobileVersionViewManager.startEditingState()}if(u){MobileVersionViewManager.startMobileState()}PositionManager.UpdateBatch.start();LayoutManager.beginLayoutUpdateBatch();if(u){EditorManager.setEditingClass(EditorManager.MobileDesktopViewClass);if(Global.IsDesigner){SiteViewportManager.setFullScreen(false,"Interface");DesignerManager.ResponsiveViewPort.setValue(l)}}$.each(v,function(D,C){var E=C.wasEditedInMode()||PropertiesManager.isAffectedInState(PageManager.getCoordinator(),C,a);if(!E&&C.isConvertedToMobile()){C.toggleVisibilityInMode(!C.shouldBeHiddenInMode())}});k.Flags.IsActivated.setTrue();PropertiesManager.UpdateBatch.start();var y=A.getPropertyValue("isSiteWasEditedInMode");if(!y){A.setPropertyFieldsValues("columnsGrid",{margin:10,gutter:5,columnsNumber:4});A.setPropertyValue("contentWidth",l);A.setPropertyValue("isSiteWasEditedInMode",true);A.setPropertyValue("pagePadding",0);A.setPropertyValue("sectionPadding",20);A.setPropertyValue("sectionVerticalPadding",20);A.setPropertyValue("cellsSpacing",5);A.setPropertyValue("rowsSpacing",10);A.setPropertyValue("sectionsSpacing",10)}if(!z){t[B.id]=true;$.each(v,function(D,C){var E=C.wasEditedInMode();if(!E&&C.isConvertedToMobile()&&C.isVisibleInMode()){C.adjustInstanceToViewPort()}});$.each(v,function(D,C){if(C.isConvertedToMobile()&&C.isVisibleInMode()&&!C.isUpdatedToViewPort()){C.updateInstanceToViewPort()}});RowsManager.convertCurrentPageToMobile();$.each(v,function(D,C){if(!C.wasEditedInMode()&&C.isConvertedToMobile()&&C.isVisibleInMode()){this.setAsEditedInMode(true)}if(!PropertiesManager.getPropertyValueInCustomState(C.properties.sizeAndPosition,MobileVersionViewManager.MobileStateName,PageManager.getCoordinator().id,C)){PropertiesManager.setValueInCustomState(C,"sizeAndPosition",PropertiesManager.getEditedState(),C.getPropertyValue("sizeAndPosition"))}})}$.each(v,function(D,C){if(C.hasFeature(Features.DataList)&&!C.isVisibleInMode()){C.reArrangementDisabled.setValue(false,"MobileVersion")}});PropertiesManager.UpdateBatch.finish();LayoutManager.refreshElementsLayout(v);OrderManager.setReassignmentRequired(true);OrderManager.endReorderingBatch();LayoutManager.endLayoutUpdateBatch();PositionManager.UpdateBatch.finish();f.finish();LayoutManager.requestUpdatePosition(v);if(!z&&ViewManager.isViewMode()&&!f.isActive()){if(Global.IsDesigner){ModeManager.updateBatch.performOperation(function(){MobileVersionViewManager.endEditedState()})}else{MobileVersionViewManager.endEditedState()}}OperationsManager.endDisableBatch();if(u){u=false}});f.finish();c.add(r);d.activate();SelectionManager.enable("MobileVersionState");if(!q){LayoutManager.requestUpdatePosition($.getValues(ElementsManager.getAllPageInstances()));if(ViewManager.isViewMode()){MobileVersionViewManager.endEditedState()}}q=false;OperationsManager.endDisableBatch()};this.deActivateDesktopMobileView=function(){if(k.Flags.IsActivated.isFalse()){return}n.stop();SelectionManager.selectInstances([],true);SelectionManager.disable("MobileVersionState");SelectionManager.Flags.canSelectMoreThenOneElement.setValue(true);EditorManager.Flags.MobileEditing.setFalse();k.resetToDesktop();SelectionManager.enable("MobileVersionState");k.Events.MobileEditingFinished.fire()};this.resetToDesktop=function(){h={};if(k.Flags.IsActivated.isFalse()){return}f.start();$.each($.getValues(ElementsManager.getAllPageInstances()),function(r,q){if(q.hasFeature(Features.DataList)&&q.isVisibleInMode()&&q.isUpdatedToViewPort()){q.reArrangementDisabled.setValue(true,"MobileVersion")}});OperationsManager.disableBatch();RowsManager.deActivateRowsRendering();EditorManager.setEditingClass(EditorManager.PcDesktopViewClass);d.deactivate();c.unbindAll();OrderManager.beginReorderingBatch();$.each(PageManager.getPages(),function(r,q){RowsManager.resetPageData(q)});$.each(MasterPagesManager.getLoadedMasterPages(),function(q,r){RowsManager.resetMasterPage(r)});k.Flags.IsActivated.setFalse();MobileVersionViewManager.endEditedState();MobileVersionViewManager.endMobileState();OrderManager.endReorderingBatch();PositionManager.UpdateBatch.start();LayoutManager.beginLayoutUpdateBatch();SiteViewportManager.setFullScreen(true,"Interface");DesignerManager.ResponsiveViewPort.setValue(undefined);OrderManager.reassignElementsOrders();LayoutManager.refreshElementsLayout($.getValues(ElementsManager.getAllPageInstances()));LayoutManager.requestUpdatePosition($.getValues(ElementsManager.getAllPageInstances()));LayoutManager.endLayoutUpdateBatch();PositionManager.UpdateBatch.finish();f.finish();OperationsManager.endDisableBatch();OperationsManager.enableUndo("deactivateMobile")};this.startMobileState=function(){var q=PageManager.getCoordinator();var r={name:a,title:"Mobile Editing",elementName:"Mobile"};PropertiesManager.addGlobalState(r,q)};this.startEditingState=function(){var q=PageManager.getCoordinator();var r={name:a,title:"Mobile Editing",elementName:"Mobile"};PropertiesManager.startStateEditingMode({isStatesGroup:true,sourceInstance:q,StateMode:r})};this.endEditedState=function(){PropertiesManager.endStateEditingMode()};this.endMobileState=function(){var q=PageManager.getCoordinator();var r={name:a,title:"Mobile Editing",elementName:"Mobile"};PropertiesManager.removeGlobalState(r,q)}}();var RowOfColumns=new function(){this.create=function(b){b=$.makeArray(b);var c;var a={getColumns:function(){return b},mergeColumnsFromStart:function(g){var h=[];for(var d=0;d<g;d++){h=$.merge(h,b[0].getInstances());b.shift()}var f=ColumnCell.create(h);b.unshift(f)},addColumns:function(g,f){g=$.makeArray(g);if(!f){$.each(g,function(h,j){b.push(j)})}else{for(var d=g.length-1;d>=0;d--){b.unshift(g[d])}}a.resetInformation()},resetInformation:function(){c=undefined},pop:function(){a.resetInformation();return b.pop()},shift:function(){a.resetInformation();var d=b.shift();return d},unShift:function(d){a.resetInformation();return b.unshift(d)},getArea:function(f){var d=a.getInstances();return PositionManager.getElementsArea(d,f)},getInstances:function(){var d=[];$.each(b,function(){d=$.merge(d,this.getInstances())});return d},calculateRowInformation:function(f){if(!c){c={};var d=a.getInstances();c.area=PositionManager.getElementsArea(d,f)}return c}};return a};this.duplicateRow=function(a){return RowOfColumns.create(a.getColumns())};this.betterRow=function(b,a){if(b.getColumns().length!==a.getColumns().length){return b.getColumns().length-a.getColumns().length}return newColumn}}();var ColumnCell=new function(){this.create=function(a){a=$.makeArray(a);return{addInstances:function(b){b=$.makeArray(b);a=$.merge(a,b)},getArea:function(b){return PositionManager.getElementsArea(a,b)},recalculateArea:function(){var b=PositionManager.getElementsArea(a,true);return b},getInstances:function(){return a}}};this.mergeColumns=function(c,b){var a=ColumnCell.create($.merge($.merge([],b.getInstances()),c.getInstances()));return a};this.canBeInDifferentColumns=function(b,a){return !ColumnCell.areInTheSameColumn(b,a)};this.areInTheSameColumn=function(d,c){var a=d.getArea(true);var b=c.getArea(true);return(a.left<b.left)?a.right>b.left+15:b.right>a.left+15}}();(function(){window.BasicHierarchyController=function(d,c){d=$.extend({structures:[],connections:{},customStatesProperties:{},defaultProperties:undefined},d);this.hierarchy=d;this.isApplied=ObservableFlag.create(false);a(this,c)};(function(d,c){b(c)})(BasicHierarchyController,BasicHierarchyController.prototype);function a(c,f){f=$.extend({valueChangeCallback:$.noop},f);var g=$.uniqueID();var d="Hierarchy"+g;c.id=g;c.name=d;c.options=f}function b(g){g.getStructureIds=function(j,i){var h={};if(this.hierarchy.idsInHierarchy){return $.extend({},this.hierarchy.idsInHierarchy)}this.eachStructure(function(l,k){h[k.id]=true});return h};g.eachStructure=function(k,j){var i=0;$.each(this.hierarchy.structures,function(m,l){var n=j?undefined:k(i++,l);if(n===false){return false}n=h(l);if(n===false){return false}n=j?k(i++,l):undefined;if(n===false){return false}});function h(l){if(l.childElements){$.each(l.childElements,function(m,o){var n=j?undefined:k(i++,o,l);if(n===false){return false}n=h(o);if(n===false){return false}n=j?k(i++,o,l):undefined;if(n===false){return false}})}}};g.getStructureByIndex=function(h){var k;var j=0;$.each(this.hierarchy.structures,function(m,l){return i(l)});return k;function i(l){if(j===h){k=l;return false}j++;if(l.childElements){$.each(l.childElements,function(m,n){return i(n)})}return k===undefined}};g.isHierarchyApplied=function(){return this.isApplied.isTrue()};g.getHierarchy=function(){return this.hierarchy};g.addHierarchyAndApply=function(i){var h=this;i=$.extend({defaultProperties:this.hierarchy.defaultProperties,afterAddingCallback:function(){h.applyHierarchy()}},i);return f(this.hierarchy.structures,i)};g.addHierarchy=function(h){h=$.extend({defaultProperties:this.hierarchy.defaultProperties},h);return f(this.hierarchy.structures,h)};g.addHierarchyFromNode=function(l,i){i=$.extend({defaultProperties:this.hierarchy.defaultProperties,includeNode:true,includeChildren:true},i);var h=this.getStructureById(l);var j;if(i.includeChildren){if(i.includeNode){j=f([h],i)}else{if(h.childElements){j=f(h.childElements,i)}}}else{if(i.includeNode){var k=h.childElements;h.childElements=[];j=f([h],i);h.childElements=k}}return j};g.applyHierarchy=function(){var h=this.hierarchy;PositionManager.VisibilityUpdateBatch.start();PropertiesManager.UpdateBatch.start();PositionManager.UpdateBatch.start();ElementActivationManager.applyConnections(h.connections.targetConnections);ElementActivationManager.applyConnections(h.connections.sourceConnections);PropertiesManager.addCustomStatesPropertiesValues(h.customStatesProperties);this.isApplied.setTrue();PropertiesManager.UpdateBatch.finish();PositionManager.VisibilityUpdateBatch.finish();PositionManager.UpdateBatch.finish()};g.getStructureByType=function(j){var h;$.each(this.hierarchy.structures,function(l,k){return i(k)});return h;function i(k){if(k.type===j){h=k;return false}if(k.childElements){$.each(k.childElements,function(l,m){return i(m)})}return h===undefined}};g.getStructureById=function(j){var h;$.each(this.hierarchy.structures,function(l,k){return i(k)});return h;function i(k){if(k.id===j){h=k;return false}if(k.childElements){$.each(k.childElements,function(l,m){return i(m)})}return h===undefined}};function f(k,i){i=$.extend({parent:undefined,parentsMap:undefined,isLoading:false,isForTemplateUse:false,filterFunction:$.returnTrue,afterAddingCallback:$.noop},i);if(!i.isForTemplateUse){Global.Events.ElementsAdding.fire();OperationsManager.beginAtomicBatch(false,"Add Hierarchy");CommandsManager.UpdateBatch.start()}ElementsManager.HierarchyChangedUpdateBatch.start();OrderManager.beginReorderingBatch();LayoutManager.beginLayoutUpdateBatch();PositionManager.VisibilityUpdateBatch.start();PropertiesManager.UpdateBatch.start();PositionManager.UpdateBatch.start();var h=[];var j=i.parent;$.each(k,function(n,m){l(m,j);if(i.filterFunction(m)){h.push(d(m,i))}});i.afterAddingCallback();ElementsManager.HierarchyChangedUpdateBatch.fireEvent(Global.Events.HieararchyChanged);PropertiesManager.UpdateBatch.finish();PositionManager.VisibilityUpdateBatch.finish();LayoutManager.endLayoutUpdateBatch();PositionManager.UpdateBatch.finish();OrderManager.endReorderingBatch();ElementsManager.HierarchyChangedUpdateBatch.finish();Global.Events.ElementsAdded.fire(Global,{instances:h});if(!i.isForTemplateUse){CommandsManager.UpdateBatch.finish();OperationsManager.endAtomicBatch()}return h;function l(n,o){if(!o&&!i.isForTemplateUse){if(n.containerId&&ElementsManager.getInstanceByID(n.containerId)){var m=ElementsManager.getInstanceByID(n.containerId);i.parent=m.$element}else{if(i.parentsMap&&i.parentsMap[n.id]){i.parent=i.parentsMap[n.id]}else{if(n.type!==ElementsTypes.page.name&&ElementsManager.getRootInstance()&&(!Global.IsDesigner||!TemplateEditingManager.Flags.IsInEditingMode.isFalse())){i.parent=ElementsManager.getRootInstance().$element}}}}}}function d(i,j){j=$.extend({parent:undefined,droppingArgs:undefined,initialProperties:undefined,isContent:false,isVisible:true,isLoading:false,isForTemplateUse:false,defaultProperties:undefined},j);if(j.parent&&j.parent!==null){var l=$instance(j.parent);if(l&&l.isForTemplateUse&&l.isForTemplateUse()){j.isForTemplateUse=true}}var h=k(i,j.parent);h.data.structureMetaData=i.metaData;return h;function k(p,n){var q=null;var m;if(n&&n!==null){q=$instance(n)}var r=ElementsTypes[p.type];var o=p.id;if(j.isLoading){c(r,p.elementProperties)}if(j.initialProperties){p.elementProperties=$.extend(p.elementProperties,j.initialProperties.all);if(j.initialProperties[o]){p.elementProperties=$.extend(p.elementProperties,j.initialProperties[o])}}PositionManager.updateInstanceLastPositionAndSize(p.id,p.metaData);m=ElementsManager.addInstance(p.type,q,{initialPropertiesValues:p.elementProperties,elementID:o},j);m.data.structureMetaData=p.metaData;if(p.dataFields){m.setBinding(j.dataSourceName,j.dataItemID,p.dataFields)}if(p.childElements){j.droppingArgs=undefined;j.parent=undefined;$.each(p.childElements,function(t,s){k(s,m)})}return m}}function c(h,i){if(i){var j=h.getElementDefinitions();$.each(j,function(m,l){var o=l.properties;for(var k in o){if(!o.hasOwnProperty(k)){continue}var n=o[k];if(i[k]&&n.preLoadingDecoding!=undefined){i[k]=n.preLoadingDecoding(i[k],h,i)}}})}}}})();var HierarchyController=new function(){this.create=function(b,a){return new BasicHierarchyController(b,a)}}();var TextStyleProperties={FontFamily:"fontFamily",TextColor:"color",FontSize:"fontSize"};var NamedTextStyles={ParagraphTitle:"title",MenuButton:"menu",PageTitle:"pageTitle",HeadingXL:"headingXL",HeadingM:"headingM",HeadingL:"headingL",HeadingS:"headingS",BodyL:"bodyL",BodyM:"bodyM",BodyS:"bodyS",BodyXS:"bodyXS"};var TextStyleManager=new function(){var a=["title","menu","pageTitle","headingXL","headingL","headingM","headingS","bodyL","bodyM","bodyS","bodyXS"];this.TextStylesChanged=SimpleEvent.create();this.TextStyleClassNames=$.map(NamedTextStyles,function(f){return"theme-text-style-{0}".format(f)});this.initialize=function(){if(Global.IsDesigner){var f=PropertiesValuesTracker.create(function(g){return g===null}).trackProperties($.map($.grep($.getValues(PropertiesTypes),function(g){return g.isTextStyleProperty}),function(g){return g.name}));PageManager.whenCoordinatorAvailable(function(g){PropertiesManager.Events.NamedPropertyValueChanged.bindAndExecute("textStyles",function(){f.invalidateFilteredProperties();TextStyleManager.TextStylesChanged.fire()})})}PageManager.whenCoordinatorAvailable(function(g){$.each(NamedTextStyles,function(j,h){var k=$.rule(".theme-text-style-"+h+" {}");TextStyleManager.TextStylesChanged.bindAndExecute(function(){var i=TextStyleManager.getTextStyleInformation(h);k.css({"font-family":ThemeFontsManager.evaluateFontBinding(i.fontFamily),color:ThemeColorsManager.evaluateColorBinding(i.color,true),"font-size":i.fontSize})})})})};this.getTextStyleFromClass=function(f){var g=/^theme-text-style-(\w+)$/i.exec(f);if(g){return g[1]}else{return undefined}};this.setElementsTextStyle=function(g,f){OperationsManager.beginAtomicBatch(true);PropertiesManager.UpdateBatch.start();$.each(g,function(j,h){if(f===null){var k=TextStyleManager.getElementTextStyle(h);if(k){h.setPropertiesValues({fontColor:k.color,font:k.fontFamily,fontSize:k.fontSize})}}h.setPropertyValue("namedTextStyle",f);if(f!==null){$.each(["fontColor","font","fontSize"],function(m,l){h.setPropertyValue(l,null)})}});PropertiesManager.UpdateBatch.finish();OperationsManager.endAtomicBatch()};this.getTextStyles=function(){var h=PageManager.getCoordinator();var g=h.getPropertyValue("textStyles");var f=[];$.each(g,function(i){f.push(b(i,g))});return f};this.getTextStyleInformation=function(f){return b(f,PageManager.getCoordinator().getPropertyValue("textStyles"))};this.getElementTextStyle=function(f){var g=f.getPropertyValue("namedTextStyle");if(g){return TextStyleManager.getTextStyleInformation(g)}else{return null}};this.evaluateTextStyleValue=function(g,f,h){if(h!==null){return h}var i=TextStyleManager.getTextStyleInformation(g);if(!i){return h}else{return i[f]}};this.evaluateElementTextStyle=function(f,g,h){if(h===undefined){h=f.getPropertyValue(d(g))}if(h===null){var i=TextStyleManager.getElementTextStyle(f);if(i){h=i[g]}}return h};this.getContextDefaultTextStyleValue=function(h){var g=ContextManager.getPropertyContextValue("namedTextStyle");if(g&&g.length===1&&g[0]!==null){var f=g[0];return{value:TextStyleManager.getTextStyleInformation(f)[h],title:TextStyleManager.getTextStyleTitle(f)}}else{return undefined}};this.getContextCustomTextStyle=function(){var f=SelectionManager.getSelectedInstances()[0];if(f){return{fontSize:TextStyleManager.evaluateElementTextStyle(f,TextStyleProperties.FontSize),color:TextStyleManager.evaluateElementTextStyle(f,TextStyleProperties.TextColor),fontFamily:TextStyleManager.evaluateElementTextStyle(f,TextStyleProperties.FontFamily)}}return undefined};this.getTextStyleTitle=function(f){return c(f)};function d(f){switch(f){case TextStyleProperties.FontFamily:return"font";case TextStyleProperties.TextColor:return"fontColor";case TextStyleProperties.FontSize:return"fontSize";default:return undefined}}function c(f){switch(f){case"title":return"Paragraph Title";case"menu":return"Menu Button";case"pageTitle":return"Page Title";case"headingXL":return"Heading Extra Large";case"headingL":return"Heading Large";case"headingM":return"Heading Medium";case"headingS":return"Heading Small";case"bodyL":return"Body Large";case"bodyM":return"Body Medium";case"bodyS":return"Body Small";case"bodyXS":return"Body Extra Small";default:return"Custom Style"}}function b(g,f){var h=f[g];return{name:g,title:c(g),fontSize:h.fontSize,color:h.color,fontFamily:h.fontFamily}}}();var PaletteVariation={Dark:"dark",Light:"light"};var ThemeMainColors={Background1:0,Background2:1,Text1:2,Text2:3,Emphasis:4};var ThemeColorsManager=new function(){var c=5;var b=5;this.getNumberOfMainColors=function(){return c};this.getNumberOfMainColorVariations=function(){return b};this.DisableColorsTransition=OperationsBatch.create();this.CurrentThemePalette=ObservableObject.createReferenceObject();this.ThemeColorsChanged=SimpleEvent.create();this.SitePresetPalettes=new ObservableCollection();this.ThemeColors=$.buildArray(c,function(){return{MainColor:ObservableObject.create(undefined,{equalityComparer:$.colorsEqualityComparer,valueConverter:function(d){return $.Color(d).toHEX()}}),Variations:$.buildArray(b,function(){return ObservableObject.create(undefined,{equalityComparer:$.colorsEqualityComparer,valueConverter:function(d){return $.Color(d).toHEX()}})})}});this.BackgroundClassNames=DeferredObject.create(function(){var g=[];for(var f=0;f<ThemeColorsManager.getNumberOfMainColors();f++){g.push("theme-background-color-{0}".format(f));for(var d=0;d<ThemeColorsManager.getNumberOfMainColorVariations();d++){g.push("theme-background-color-{0}-{1}".format(f,d))}}return g});this.TextColorClassNames=DeferredObject.create(function(){var g=[];for(var f=0;f<ThemeColorsManager.getNumberOfMainColors();f++){g.push("theme-text-color-{0}".format(f));for(var d=0;d<ThemeColorsManager.getNumberOfMainColorVariations();d++){g.push("theme-text-color-{0}-{1}".format(f,d))}}return g});this.initialize=function(){$.each(ThemeColorsManager.ThemeColors,function(h,g){var f=$.rule(".theme-text-color-"+h+" {}");var i=$.rule(".theme-background-color-"+h+" {}");g.MainColor.onValueChanged(function(j){f.css("color",j);i.css("background-color",j)});$.each(g.Variations,function(l,k){var m=$.rule(".theme-text-color-"+h+"-"+l+" {}");var j=$.rule(".theme-background-color-"+h+"-"+l+" {}");k.onValueChanged(function(n){m.css("color",n);j.css("background-color",n)})})});ThemeColorsManager.CurrentThemePalette.valueChangedEvent.bind(function(n){var f=n.palette;for(var m=0;m<c;m++){var l=f[m];var g=l.variations;var k=ThemeColorsManager.ThemeColors[m];var o=k.Variations;k.MainColor.setValue(l.color);for(var h=0;h<b;h++){o[h].setValue(g[h])}}ThemeColorsManager.ThemeColorsChanged.fire()});PageManager.whenCoordinatorAvailable(function(f){PropertiesManager.Events.NamedPropertyValueChanged.bindAndExecute("themeColors",function(){var g=f.getPropertyValue("themeColors");ThemeColorsManager.CurrentThemePalette.setValue(g)});PropertiesManager.Events.NamedPropertyValueChanged.bindAndExecute("sitePresetPalettes",function(){var g=f.getPropertyValue("sitePresetPalettes");ThemeColorsManager.SitePresetPalettes.syncrhonize(g)})});if(Global.IsDesigner){var d=PropertiesValuesTracker.create(function(g,h,f){var i=PropertiesTypes[h].supportsThemeBinding;if($.isFunction(i)){return i(g,f)}else{if($.isArray(i)){return $.any(i,function(j){return ThemeColorsManager.isColorBinding(g[j])})}}return ThemeColorsManager.isColorBinding(g)}).trackProperties($.map($.grep($.getValues(PropertiesTypes),function(f){return !!f.supportsThemeBinding}),function(f){return f.name}));ThemeColorsManager.CurrentThemePalette.onValueChanged(function(){var f=undefined;if(!ThemeColorsManager.DisableColorsTransition.isActive()){f={transitionDuration:200}}d.invalidateFilteredProperties(f)})}};this.saveSitePresetPalette=function(d){d=ThemeColorsManager.clonePalette(d);d.id=$.uniqueID();var f=PageManager.getCoordinator();var g=f.getPropertyValue("sitePresetPalettes").clone();g.push(d);f.setPropertyValue("sitePresetPalettes",g)};this.removeSitePresetPalette=function(d){var f=PageManager.getCoordinator();var g=f.getPropertyValue("sitePresetPalettes").clone();g=$.grep(g,function(h){return h.id!==d});f.setPropertyValue("sitePresetPalettes",g)};this.getCurrentPalette=function(){return ThemeColorsManager.clonePalette(PageManager.getCoordinator().getPropertyValue("themeColors"))};this.getColorBindingFromClass=function(d){var f=/^theme-text-color-(\d+)(?:-(\d+))?$/i.exec(d);if(!f){f=/^theme-background-color-(\d+)(?:-(\d+))?$/i.exec(d)}if(f){return ThemeColorsManager.createThemeColorBinding(parseInt(f[1]),{variation:f[2]?parseInt(f[2]):undefined})}else{return undefined}};this.createThemeColorBinding=function(g,d){d=$.extend({variation:undefined,opacity:1,brightness:0},d);var f=d.variation;if(f===undefined){f=ThemeColorsManager.getMainColorVariationIndex(g)}return{mainColor:g,variation:f,opacity:d.opacity,brightness:d.brightness}};this.adjustThemeColorBinding=function(f,d){d=$.extend({opacity:undefined,brightness:undefined},d);return ThemeColorsManager.createThemeColorBinding(f.mainColor,{variation:f.variation,opacity:$.valueOrDefault(d.opacity,f.opacity),brightness:$.valueOrDefault(d.brightness,f.brightness)})};this.themeColorBindingEqualityComparer=function(f,d){if(!f||!d){return f===d}return(f.mainColor===d.mainColor&&f.variation===d.variation&&$.valueOrDefault(f.opacity,1)===$.valueOrDefault(d.opacity,1)&&$.valueOrDefault(f.brightness,1)===$.valueOrDefault(d.brightness,1))};this.evaluateColorBinding=function(i,f){f=$.valueOrDefault(f,false);if(!i||!$.isPlainObject(i)){return i}if(ColorsHelper.isGradient(i)){return ColorsHelper.mapGradientColorValues(i,function(l){return ThemeColorsManager.evaluateColorBinding(l)})}var k=i.mainColor;if(k!==undefined){var j=i.variation;var h=$.valueOrDefault(i.opacity,1);var d=$.valueOrDefault(i.brightness,0);var g=$.Color(ThemeColorsManager.getThemeColor(k,j));g=ColorsHelper.adjustOpacity(g,function(){return h});if(d!==0){g=ColorsHelper.adjustColorComponent(g,ColorSpaceComponent.L,function(m){var l=ThemeColorsManager.getThemeColorBrightnessRange(m);return $.normalizeToRange($.adjustFraction(m,2)+$.adjustFraction(d,2),l.min,l.max)})}if(f){return g.toCSS()}return g}return i};this.getOriginalThemeColorBrightness=function(d){d=ThemeColorsManager.adjustThemeColorBinding(d,{brightness:0});return ColorsHelper.getBrightness(ThemeColorsManager.evaluateColorBinding(d))};this.getCurrentPaletteVariation=function(){return ThemeColorsManager.CurrentThemePalette.getValue().variation};this.getMainColorVariationIndex=function(f){var d=ThemeColorsManager.getThemeColor(f);return ThemeColorsManager.getThemeColorBrightnessIndex(ColorsHelper.getBrightness(d),ThemeColorsManager.getCurrentPaletteVariation())};this.getThemeColorBrightnessIndex=function(f,h){var g=1/b;var d=Math.min(Math.floor(f/g),b-1);if(h===PaletteVariation.Light){d=c-1-d}return d};this.getThemeColorBrightnessRange=function(g){var h=1/b;var f=Math.floor((g*100)/(h*100))*h;var d=f+h-0.01;return{min:f,max:d}};this.isColorBinding=function(d){if(!$.isPlainObject(d)){return false}return ThemeColorsManager.isSolidColorBinding(d)||ThemeColorsManager.isGradientColorBinding(d)};this.isSolidColorBinding=function(d){if(!$.isPlainObject(d)){return false}return d.mainColor!==undefined};this.isGradientColorBinding=function(d){if(!ColorsHelper.isGradient(d)){return false}return $.any(ColorsHelper.getGradientColorValues(d),function(f){return ThemeColorsManager.isSolidColorBinding(f)})};this.getBoundMainColorIndex=function(d){if(!$.isPlainObject(d)){return undefined}return d.mainColor};this.getBoundMainColorVariationIndex=function(d){if(!$.isPlainObject(d)){return undefined}return d.variation};this.getThemeColor=function(i,f){var h=PageManager.getCoordinator();var g=h.getPropertyValue("themeColors");var d=g.palette[i];if(f!==undefined){return d.variations[f]}else{return d.color}};this.setThemeColors=function(d){PageManager.getCoordinator().setPropertyValue("themeColors",d)};this.changeMainColor=function(f,d){a(function(g){var h=g.variation;g.palette[f]={color:d,variations:ThemeColorsManager.generateColorsVariations(d,h)};return true})};this.changePaletteVariation=function(d){a(function(h){if(h.variation===d){return false}h.variation=d;var f=h.palette;for(var g=0;g<f.length;g++){f[g].variations=$.reverseArray(f[g].variations)}return true})};this.getPaletteVariation=function(){return ThemeColorsManager.CurrentThemePalette.getValue().variation};this.generateColorsVariations=function(j,m){m=$.valueOrDefault(m,PaletteVariation.Light);j=$.Color(j);var h=ColorsHelper.getBrightness(j);var l=1/b;var f=$.adjustFraction(((Math.round(h*100))%(Math.round(l*100)))/100,2);var d=[];for(var g=0;g<b;g++){d.push($.adjustFraction(Math.min(0.98,Math.max(0.02,g*l+f)),2))}var k=$.map(d,function(i){return ColorsHelper.changeBrightness(j,i).toHEX()});k[ThemeColorsManager.getThemeColorBrightnessIndex(h,PaletteVariation.Dark)]=j.toHEX();if(m===PaletteVariation.Light){k.reverse()}return k};this.generatePalette=function(f,g){g=$.valueOrDefault(g,PaletteVariation.Light);var d=[];$.each(f,function(j,h){var k=ThemeColorsManager.generateColorsVariations(h,g);d.push({color:h,variations:k})});return{palette:d,variation:g}};this.getPresetPalettes=function(){var d=[["#F2F1E1","#CCE0C5","#3C3D3F","#54604F","#B7D9C0"],["#E4D7C6","#CFCECD","#DF3732","#29282D","#8F8C87"],["#F6F7F2","#EEE252","#E55516","#262B27","#8DA641"],["#ECE8CF","#918C6E","#112838","#33301D","#D90D3D"],["#C8DCBF","#E0FCEC","#5D9E9A","#5D9E9A","#DB0148"],["#FB6900","#004853","#007E80","#00B9BD","#E03912"],["#C44D58","#556270","#FF6B6B","#262B27","#C7F464"],["#87244C","#30162B","#F5F2C4","#BCCF9F","#3FB094"],["#F4F3E3","#BADDDD","#F28C8C","#000000","#F3C2AD"],["#000000","#7964E4","#6EE264","#FFFFFF","#A5A5A5"],["#FFFFFF","#FFF538","#FF006F","#000000","#FFB300"],["#FCFDFF","#EDEDF2","#A6AEC1","#3B414C","#00B5B5"],["#FDFAEB","#FAEDDF","#F7A29E","#3B3F49","#F3C6B9"],["#FFFFFF","#F3F4E5","#A1C1BE","#59554E","#E2E3D9"],["#040004","#413D3D","#FA023C","#C8FF00","#4B000F"],["#E6DCDB","#FE016B","#0D0F19","#0D0F19","#5E666C"],["#E7EDEA","#CEECEF","#FB0C06","#030D4F","#FFC52C"],["#ADB3BA","#0CCFC2","#FF2E43","#382F32","#F7921E"]];var f=[];$.each(d,function(g,h){f.push(ThemeColorsManager.generatePalette(h))});return f};this.clonePalette=function(d){return{palette:$.map(d.palette,function(f){return{color:f.color,variations:ArrayUtils.clone(f.variations)}}),variation:d.variation}};this.palettesEqualityComparer=function(f,d){if(!f||!d){return f===d}if(f.variation!==d.variation){return false}return $.arraysEqual(f.palette,d.palette,{equalityComparer:function(h,g){return(ColorsHelper.bindableColorsEqualityComparer(h.color,g.color)&&$.arraysEqual(h.variations,g.variations,{equalityComparer:ColorsHelper.bindableColorsEqualityComparer}))}})};function a(h){var g=PageManager.getCoordinator().getPropertyValue("themeColors");var d={palette:$.map(g.palette,function(i){return{color:i.color,variations:$.merge([],i.variations)}}),variation:g.variation};var f=h(d);if(f){PageManager.getCoordinator().setPropertyValue("themeColors",d)}}}();function ApiManager(h){h=$.extend({instance:undefined,$iframe:undefined,callbackHandler:undefined,callbacks:undefined,overrideApiMethods:undefined,isManage:false},h);var c="FeatureConnect.";var j="FeatureImpl.";var q=h.instance;var i=q.getAppSettings();var r=q.getAppSettingPrefix();var v=h.callbackHandler||this;var n=false,l=false,d=[],b=undefined,u={events:{id:"events",isActivated:false,isBatchSupported:false,callback:undefined}};var w=$.extend({beforeCallFunction:$.noop,afterCallFunction:$.noop,apiInitialize:$.noop},h.callbacks);var m={PROPERTY_CHANGE:"PROPERTY_CHANGE",SETTING_CHANGE:"SETTING_CHANGE",STYLE_CHANGE:"STYLE_CHANGE",SIZE_CHANGE:"SIZE_CHANGE",URL_CHANGE:"URL_CHANGE",POSITION_CHANGE:"POSITION_CHANGE",OUTSIDE_MOUSE_EVENT:"OUTSIDE_MOUSE_EVENT"};function s(y){if(!y){return undefined}return{id:y.id,name:y.title,title:y.pageTitle,isHomePage:y.isHomePage}}var k;var p={API_INIT:function(){if(!l){l=true}w.apiInitialize.apply(v,arguments)},SET_CALL_HANDLER:function(A){var B=A.callName;var y=u[B];if(y){if(!y.isActivated){y.isActivated=true;var z=y.batch;if(z){delete y.batch}if(A.oldCalls&&z){z.finish()}}}},RESET_CALL_HANDLER:function(y){var z=y.callName;delete u[z]},SET_PROPERTIES:function(y){q.setPropertyFieldsValues("appProperties",y)},GET_PROPERTIES:function(A){var z=q.getPropertyValue("appProperties");if(z){if($.isArray(A)){var y={};$.each(A,function(C,B){y[B]=z[B]});return y}}return z||{}},GET_SETTINGS:function(z){var y={};if($.isArray(z)){$.each(z,function(B,A){y[A]=q.getAppSettingValue(A)})}else{if(z==="all"){$.each(i,function(A){y[A]=q.getAppSettingValue(A)})}}return y},SET_SETTINGS:function(y){$.each(y,function(z,A){q.setAppSettingValue(z,A)})},RELOAD_APP:function(y){q.reloadApp(y)},GET_PAGES:function(z){var A=PageManager.PagesCollection.getItems();var y=[];$.each(A,function(C,B){y.push(s(B))});return y},CALL_HANDLER:function(z){var A=z.callName;var y=u[A];if(y&&y.callback){return y.callback.call(v,z.params)}},SET_DOCUMENT_SIZE:function(y){q.setDocumentSize(y)},SET_APP_SIZE:function(y){q.setAppSize(y)},SET_APP_CONTENT_SIZE:function(y){q.setAppContentSize(y)},ENABLE_TOP_POSITION:function(y){if(ViewManager.isViewMode()){var A=q.customZIndex.getValue();q.customZIndex.setValue(Global.MinExternalAppPropertyZindex);var z=ViewManager.Events.SwitchedToDesignMode.one(function(){if(k){k.restore()}});k={restore:function(){q.customZIndex.setValue(A);z.unbind();k=undefined}}}},DISABLE_TOP_POSITION:function(y){if(ViewManager.isViewMode()&&k){k.restore()}}};function t(y){d.push(y)}function g(){var z=false;t(q.contentSizeChangedEvent.bind(function(A){if(!z){z=true;q.duringResizing.once(false,function(C){var B=q.getContentSize();x(m.SIZE_CHANGE,{width:B.width,height:B.height});z=false})}}));t(UrlManager.Events.UrlChangedEvent.bind(function(){x(m.URL_CHANGE,IframeManager.getSessionUrl())}));t(q.isInDragging.valueChangedEvent.bind(function(B){if(!B){var A=q.getPosition();x(m.POSITION_CHANGE,{left:A.left,top:A.top})}}));var y=$.uniqueID();$(document).on("vmousedown."+y+" vmouseup."+y+" vclick."+y,function(A){if(ViewManager.isViewMode()){x(m.OUTSIDE_MOUSE_EVENT,{type:A.type.substr(1)})}});t({unbind:function(){$(document).off("."+y)}});q.InstancePropertiesInitialized.one(function(){t(q.propertyChangedEvent.bind("appProperties",function(D,B){if(!n){var C=$.diffObjectKeys(B,D);if(!$.isEmptyObject(C)){x(m.PROPERTY_CHANGE,C)}}}));var A={};$.each(i,function(B){if(!q.isQueryParamSetting(B)){A[r+B]=B}});t(q.propertiesChanged.bind(function(B){var C=[];$.each(B,function(E,F){var D=A[E];if(D){C.push({name:D,value:F.value})}});if(C.length>0){x(m.SETTING_CHANGE,C)}}))})}function a(){$.extend(p,h.overrideApiMethods);b=IframeManager.addFrame(h.$iframe,o);if(!h.isManage){if(q.hasFeature(Features.FeatureExternalApp)){var y=q.getAppFeatures();$.each(y,function(A){var z=j+A;u[z]={id:z,activated:false,isBatchSupported:true,callback:function(B){q.fireFeatureEvent(A,B.eventName,B.params)}}})}if(q.hasFeature(Features.ConnectableExternalApp)){var y=q.getAppConnectableFeatures();$.each(y,function(A){var z=c+A;u[z]={id:z,activated:false,isBatchSupported:true,callback:function(C){var B=$.Deferred();q.callConnectedFeatureFunction(A,C.functionName,C.params,function(D){B.resolve(D)});return B.promise()}}})}}g()}function f(B,A,C){var y=u[B];if(y&&y.isActivated){b.callFunction(B,A,C,false)}else{if(y&&y.isBatchSupported){var z=y.batch;if(!z){z=y.batch=OperationsBatch.create();z.start()}A=$.extend(true,{},A);z.performOperation(function(){b.callFunction(B,A,C,true)})}}}function x(y,z){f("events",{eventName:y,params:z})}function o(B,A,z){if(!p.hasOwnProperty(B)){return}z=$.extend(z,{instance:q});n=true;w.beforeCallFunction.call(v,B,A,z);var y=p[B](A,z);w.afterCallFunction.call(v,B,A,z,y);n=false;return y}this.callFeatureFunction=function(z,A,B,y,C){f(j+z,{functionName:A,params:B,callInfo:y},C)};this.fireConnectedFeatureEvent=function(A,z,B,y){f(c+A,{eventName:z,params:B,callInfo:y})};this.deactivate=function(){$.each(d,function(y,z){z.unbind()});b.remove();b=undefined};a()}var AppsManager=new (function(){var i={};var b={};var h=this;this.initialize=function(){};function f(k){return"{0}{1}".format(k.id,k.version)}function c(k){return"ExternalApp"+f(k)}function j(k){if(k.implementedFeatures){$.each(k.implementedFeatures,function(l,m){if(!m.isInternal){var n={};n[m.featureTypeName]={};ElementsModel.registerDefinition(Features,n)}})}}function g(l){var k=ExternalAppElementBuilder.createElement(l);ElementsModel.registerDefinition(ElementsTypes,k)}function a(k,m){var l={};$.each(k.settingCategories,function(n,o){$.extend(l,o.settings)});k=$.extend(k,{uniqueId:f(k),elementTypeName:c(k),appSettingPrefix:f(k),settings:l,getSourceConnections:function(){if(m){var n=[];if(m.defaultConnections){$.each(m.defaultConnections,function(p,o){if(o.sourceAppId===k.id){n.push({targetAppId:o.targetAppId,feature:o.feature})}})}return n}},getAppContainer:function(){return m},getUrl:function(){return $.evaluateWhenFunction(k.url)}});if(k.implementedFeatures){$.each(k.implementedFeatures,function(n,o){if(o.isInternal){o.featureTypeName=o.featureInternalType}else{o.featureTypeName="ExternalApp"+n}})}if(k.connectableFeatures){$.each(k.connectableFeatures,function(n,o){o.featureTypeName="ExternalApp"+n})}}function d(k){k=$.extend(k,{getApps:function(l){l=$.makeArray(l);return $.map(k.apps,function(m){if($.oneOfValues(m.id,l)){return m}})}})}this.addAppContainer=function(k){if(k.id in b){return}d(k);$.each(k.apps,function(m,l){h.addApp(l,k)});b[k.id]=k};this.getAppContainer=function(k){return b[k]};this.createApp=$.noop;this.addApp=function(k,l){a(k,l);var m=k.uniqueId;if(m in i){return}i[m]=k;j(k);g(k);this.createApp(k)}})();var IframeManager=new (function(){var c=DeferredObject.create(function(){if(Global.IsDesigner){return $.uniqueID().toString()}else{var m=sessionStorage.getItem("AppSessionID");if(!m){m=$.uniqueID().toString();sessionStorage.setItem("AppSessionID",m)}return m}});var b={},d=1,h={};function j(){return d++}this.initialize=function(){i()};function i(){var m=l;if(window.addEventListener){window.addEventListener("message",m,false)}else{if(window.attachEvent){window.attachEvent("onmessage",m)}}}function l(n){if(!n||!n.data){return}var q;try{q=JSON.parse(n.data)}catch(r){return}var s=q.id;if(s){var p=b[s];if(p&&p.origin===n.origin){switch(q.type){case"call":var m=p.callback(q.content.funcName,q.content.params);if(q.callbackId){$.when(m).done(function(t){a(s,q.callbackId,t)})}break;case"response":var o=q.callbackId;if(o&&h[o]){h[o](q.content);delete h[o]}break}}}}function a(o,n,m){k(o,"response",m,undefined,{callbackId:n})}function g(q,o,n,p,m){k(q,"call",n,p,{callName:o,oldCall:m})}function k(n,q,s,t,p){var o=b[n];if(!o||o.$iframe.length!==1){return}var r=o.$iframe[0].contentWindow;if(r){var u={content:s,type:q};if(t){var m=j();u.callbackId=m,h[m]=t}if(p){$.extend(u,p)}r.postMessage(JSON.stringify(u),"*")}}this.addFrame=function(t,u){var m=t[0].src;var p=m.split("/");var s=p[0]+"//"+p[2];var q="wzId=";var r=m.indexOf(q)+q.length;var o=m.indexOf("&",r);var n=m.substr(r,o-r);b[n]={callback:u,$iframe:t,origin:s};return{id:n,callFunction:function(x,w,y,v){g(n,x,w,y,v)},remove:function(){f(n)}}};this.getSessionUrl=function(){var m=$.getRootWindow().location.href;if(ViewManager.isDesignMode()){m=PathUtils.combinePaths(m,$.uniqueID().toString())}else{if(Global.IsDesigner||SiteManager.isTemplate()){m=PathUtils.combinePaths(m,c.get(),UrlManager.getFragment())}}return m};function f(m){delete b[m]}this.createIframeUrl=function(s,u){var t=s.getAppDefinition();u=$.extend({},{frameId:undefined,baseUrl:"",apiType:"",additionalParams:undefined,encodedParams:undefined},u);var m=u.baseUrl;var q=new StringBuilder();q.appendDecoded=function(v){return q.append(decodeURIComponent(v))};q.appendParameter=function(v,w){return q.append("&").appendDecoded(v).append("=").appendDecoded(w)};var p=m.indexOf("?")>=0;q.append(m).conditionalAppend(!p,"?");q.conditionalAppend(p,"&").append("wzId=").appendDecoded(u.frameId);q.appendParameter("wzInstanceId",s.id).appendParameter("wzAppId",t.id).appendParameter("wzAppV",t.version).appendParameter("wzApiType",u.apiType).appendParameter("wzDeviceType",MobileVersionViewManager.Flags.IsInMobileContext.isTrue()?"mobile":"desktop").appendParameter("wzMode",ViewManager.isDesignMode()?"designer":s.isInPreview()?"preview":"view");if(t.useSessionParams){q.appendParameter("wzSessionId",c.get())}if(t.isCacheDisabled===true){q.appendParameter("wzCache",$.uniqueID())}var o={};$.each(s.elementType.querySettings,function(v,x){var w=s.getAppSettingValue(x);o[x]=w});$.extend(o,u.additionalParams);var r={};r.wzCurrentUrl=this.getSessionUrl();$.extend(r,u.encodedParams);var n=Base64.encode(JSON.stringify(r));o.wzEncodeParams=n;q.append("&").append($.param(o));return q.toString()};this.initialize()})();var ThemeFontsManager=new function(){this.CurrentThemeFonts=ObservableObject.createReferenceObject();this.ThemeFonts={Heading1:ObservableObject.createReferenceObject(),Heading2:ObservableObject.createReferenceObject(),Body1:ObservableObject.createReferenceObject(),Body2:ObservableObject.createReferenceObject()};this.FontFamilyClassNames=DeferredObject.create(function(){return $.map(["heading1","heading2","body1","body2"],function(a){return"theme-text-font-{0}".format(a)})});this.initialize=function(b){var c={heading1:ThemeFontsManager.ThemeFonts.Heading1,heading2:ThemeFontsManager.ThemeFonts.Heading2,body1:ThemeFontsManager.ThemeFonts.Body1,body2:ThemeFontsManager.ThemeFonts.Body2};ThemeFontsManager.CurrentThemeFonts.valueChangedEvent.bind(function(d){$.each(c,function(g,f){f.setValue(d[g])})});$.each(c,function(g,f){var d=$.rule(".theme-text-font-"+g+" {}");f.onValueChanged(function(h){d.css("font-family",h)})});PageManager.whenCoordinatorAvailable(function(d){PropertiesManager.Events.NamedPropertyValueChanged.bindAndExecute("themeFonts",function(){var f=d.getPropertyValue("themeFonts");ThemeFontsManager.CurrentThemeFonts.setValue(f)})});if(b){var a=PropertiesValuesTracker.create(function(f,g,d){var h=PropertiesTypes[g].supportsThemeFontBinding;if($.isFunction(h)){return h(f,d)}return ThemeFontsManager.isFontBinding(f)}).trackProperties($.map($.grep($.getValues(PropertiesTypes),function(d){return d.supportsThemeFontBinding}),function(d){return d.name}));ThemeFontsManager.CurrentThemeFonts.onValueChanged(function(){a.invalidateFilteredProperties()})}};this.getFontBindingFromClass=function(a){var b=/^theme-text-font-(\w+)$/i.exec(a);if(b){return ThemeFontsManager.createThemeFontBinding(b[1])}else{return undefined}};this.createThemeFontBinding=function(a){return{themeFont:a}};this.getThemeFontType=function(a){if(ThemeFontsManager.isFontBinding(a)){switch(a.themeFont){case"heading1":return"Heading 1";case"heading2":return"Heading 2";case"body1":return"Body 1";case"body2":return"Body 2";default:return undefined}}};this.evaluateFontBinding=function(a){if(!a||!$.isPlainObject(a)){return a}var c=a.themeFont;if(c!==undefined){var d=PageManager.getCoordinator();var b=d.getPropertyValue("themeFonts");return b[c]}else{return a}};this.isFontBinding=function(a){if(!$.isPlainObject(a)){return false}return a.themeFont!==undefined};this.setThemeFonts=function(a){PageManager.getCoordinator().setPropertyValue("themeFonts",a)};this.updateThemeFont=function(b,a){PageManager.getCoordinator().setPropertyFieldValue("themeFonts",b,a)};this.getPresetFonts=function(){return[{heading1:"Open Sans Extra Bold",heading2:"Open Sans Condensed Light",body1:"Open Sans",body2:"Open Sans Semi Bold"},{heading1:"Lobster",heading2:"Source Sans Pro Semi Bold",body1:"Source Sans Pro Light",body2:"Source Sans Pro Semi Bold"},{heading1:"Dancing Script Bold",heading2:"Open Sans",body1:"Open Sans Condensed Light",body2:"Open Sans"},{heading1:"Oleo Script",heading2:"Open Sans",body1:"Open Sans",body2:"Open Sans"},{heading1:"Old Standard TT Bold",heading2:"Old Standard TT Italic",body1:"Source Sans Pro Light",body2:"Source Sans Pro Light"},{heading1:"Amatic SC Bold",heading2:"Amatic SC",body1:"Source Sans Pro Light",body2:"Amatic SC"},{heading1:"Kaushan Script",heading2:"Lato Light",body1:"Lato",body2:"Lato"},{heading1:"Julius Sans One",heading2:"Lato",body1:"Lato Light",body2:"Lato"},{heading1:"Bad Script",heading2:"Droid Sans Bold",body1:"Droid Sans",body2:"Droid Sans"},{heading1:"Neuton Bold",heading2:"Neuton",body1:"Neuton Extra Light",body2:"Neuton"},{heading1:"Nixie One",heading2:"Nixie One",body1:"Source Sans Pro Light",body2:"Nixie One"},{heading1:"Vollkorn Bold",heading2:"Vollkorn Italic",body1:"Vollkorn",body2:"Vollkorn"},{heading1:"Abril Fatface",heading2:"Abril Fatface",body1:"Open Sans",body2:"Abril Fatface"},{heading1:"Old Standard TT Italic",heading2:"Old Standard TT Bold",body1:"Old Standard TT",body2:"Old Standard TT"},{heading1:"Amatic SC Bold",heading2:"Amatic SC",body1:"Lato",body2:"Amatic SC"},{heading1:"Open Sans Extra Bold",heading2:"Droid Serif",body1:"Droid Serif",body2:"Droid Serif"},{heading1:"Gravitas One",heading2:"PT Mono",body1:"PT Mono",body2:"PT Mono"},{heading1:"Old Standard TT Bold",heading2:"Old Standard TT Italic",body1:"Old Standard TT",body2:"Old Standard TT"},{heading1:"PT Sans Narrow Bold",heading2:"PT Sans Bold",body1:"PT Serif",body2:"PT Sans"}]}}();var PropertiesValuesTracker=new function(){this.create=function(f){var g={};var d={};var c=false;ElementsManager.Events.InstancesRemoving.bind(function(h){$.each(h.removedInstancesMap,function(i){delete d[i]})});var a={trackProperties:function(k){var h=[];for(var l=0;l<k.length;l++){var j=k[l];if(!g[j]){h.push(j);g[j]=true}}SimpleEvent.bind($.map(h,function(i){return{event:PropertiesManager.Events.NamedPropertyValueChanged,name:i}}),b);return a},getFilteredProperties:function(){return d},invalidateFilteredProperties:function(h){c=true;$.each(d,function(k,j){var i=ElementsManager.getInstanceByID(k);if(i){$.each(j,function(l){PropertiesManager.invalidateProperty(i,l,h,i.getPropertyValue(l))})}});c=false;return a},invalidateElementFilteredProperties:function(h,i){c=true;var j=d[h.id];if(j){$.each(j,function(k){PropertiesManager.invalidateProperty(h,k,i,h.getPropertyValue(k))})}c=false;return a}};return a;function b(l){if(c||l.isCalculated){return}var h=l.instance;var m=h.id;var j=l.propertyName;var i=l.newValue;var k=f(i,j,h);if(k){$.objectSet(d,[m,j],true)}else{if($.objectGet(d,[m,j])!==undefined){delete d[m][j]}}}}};var RichTextProcessor=new function(){this.startProcessing=function(d){var f=$("<div></div>");f.html(d);var b=false;var c=d;var a={processLinks:function(){f.find("a[data-attached-link]").each(function(){var h=$(this);var g=h.attr("data-attached-link");var j=$.tryParseJSON(g);if(j&&j.type===LinkTypes.Pages){var i=PageManager.getPageFragmentValue(j.url);h.addClass("internal-link");h.attr("href",UrlManager.getFullHtmlUrl(i));b=true}});return a},finish:function(){if(b){c=f.html()}f.remove();return a},getProcessedContent:function(){return c},ifContentChanged:function(g){if(b){g(c)}return a}};return a}}();var LimitationsManager=new function(){var i=this;var f={};var b=this.Events={BeforeUpgradeDialogOpened:SimpleEvent.create(),AfterUpgradeDialogOpened:SimpleEvent.create(),UpgradeWindowClosed:SimpleEvent.create()};this.setLimitations=function(j){f={};$.extend(f,j)};function a(m){var j=f[m];if(!j){return}var k=j.dialog;b.BeforeUpgradeDialogOpened.fire();var l=m;if(m==="favicon"){l="generic"}$.triggerTrackingEvent({category:TrackingCategories.SiteStatus,action:TrackingActions.UpgradeDialogOpened,label:m,tagValue:m});Dialogs.LightBoxDialogCentered.usePanel(Panels.LimitationsPanel).withActivationArgs({header:k.title,featureList:k.featureList,upgradeButtonText:k.upgradeButtonText,isDiscount:k.isDiscount,upgradeUrl:k.upgradeUrl,imageClass:"image-sprite-limitations-"+l,upgradeClosedCallback:function(){ApplicationService.getSiteLimitations(SiteManager.getSiteID(),function(n){i.setLimitations(n)});b.UpgradeWindowClosed.fire()},limitName:m}).withClass("hide-header-splitter").open({closeOnClickOutside:true,layoutClass:"variation-left-orientation",buttons:[]});b.AfterUpgradeDialogOpened.fire()}function c(j){var k=d(j);if(!k){return undefined}else{return k.limitation}}function d(j){if(typeof WebzaiController!=="undefined"&&WebzaiController.isAdmin()){return false}var k=f[j];if(k&&k.limitation.isLimited){return k}return false}this.openFileLimitDialog=function(){a("file")};this.openStorageLimitDialog=function(){a("storage")};this.openLimitationDialog=function(j){a(j)};function g(k){var j=c(k);if(j){a(k);return false}return true}this.validateLimit=function(j){return g(j)};this.validatePage=function(j){var k=c("pages");if(k){if(j>=k.maxPages){a("pages");return false}}return true};this.validatePublish=function(){return g("publish")};this.validateVideo=function(l){var j=c("video");if(j){if(l!==undefined){var k=$.valueOrDefault(j.maxVideos,1);if(l<k){return true}}a("video");return false}return true};this.isVideoLimited=function(){return !!c("video")};this.validateMobile=function(){return g("mobile")};this.validateStats=function(){return g("stats")};this.validateEcommerce=function(){return g("ecommerce")};this.validateFavicon=function(){return g("favicon")};this.isFaviconLimited=function(){var j=c("favicon");if(j){return true}return false};this.getFreemiumBannerLimitation=function(){return d("bannerFeature")};this.initialize=function(){i.setLimitations(SiteManager.getSiteLimitations())};function h(){var j={video:{limitation:{isLimited:true},dialog:{title:"To add a video to your website you must upgrade",featureList:["Free secure web hosting","Remove ads from your site","Connect a domain"],upgradeButtonText:"Upgrade Now",isDiscount:true}},pages:{limitation:{isLimited:true,maxPages:3},dialog:{title:"To add more pages to your website you must upgrade",featureList:["Add unlimited pages","Free secure web hosting","Remove ads from your site"],upgradeButtonText:"Upgrade Now",isDiscount:true}},ecommerce:{limitation:{isLimited:true},dialog:{title:"To add ecommerce to your site you must upgrade",featureList:["Sell your products online","Index your site with leading search engines","Priority support"],upgradeButtonText:"Upgrade Now",isDiscount:true}},publish:{limitation:{isLimited:true},dialog:{title:"To publish your website you must upgrade",featureList:["Make your website public for all to visit","Free secure web hosting","Connect a domain"],upgradeButtonText:"Upgrade Now",isDiscount:false}},stats:{limitation:{isLimited:true},dialog:{title:"To view advanced stats for your website you must upgrade",featureList:["Free secure web hosting","Remove ads from your site","Connect a domain"],upgradeButtonText:"Upgrade Now",isDiscount:true}},storage:{limitation:{isLimited:true,maxSize:50*1024*1024},dialog:{title:"To add more files to your website you must upgrade",featureList:["Up to 10GB storage space","Free secure web hosting","Remove ads from your site"],upgradeButtonText:"Upgrade Now",isDiscount:true}},file:{limitation:{isLimited:true,maxSize:5*1024*1024},dialog:{title:"To upload files over 5MB to your website you must upgrade",featureList:["Upload files of up to 50MB","Free secure web hosting","Remove ads from your site"],upgradeButtonText:"Upgrade Now",isDiscount:true}},mobile:{limitation:{isLimited:true},dialog:{title:"To have a mobile optimized website, you need to upgrade",featureList:["Your site automatically mobile ready","Double your customer base","Keep up with online trends"],upgradeButtonText:"Upgrade Now",isDiscount:true}},favicon:{limitation:{isLimited:true},dialog:{title:"To add a favicon to your website you must upgrade",featureList:["Free Advertising Credits","Priority Support","Monitor stats via Google Analytics"],upgradeButtonText:"Upgrade Now",isDiscount:true}}};i.setLimitations(j)}}();var SkinsType={Hierarchy:"Hierarchy"};var SkinsBindingsTypes={Global:"Global",Inline:"Inline"};var SkinsBindingsTypesNames={Default:"Default",TextInput:"TextInput",TextArea:"TextArea"};var SkinsBindingsDevices={Desktop:"Desktop",Mobile:"Mobile"};var SkinsManager=new function(){this.initialize=function(){initializeDefaultSkins()};this.Events={SkinHierarchyChanged:SimpleEvent.createNamedEvents(),SkinHierarchyUpdated:SimpleEvent.createNamedEvents(),SkinStyleChanged:SimpleEvent.createNamedEvents()};this.Flags={DisableDuringEditingTemplate:ObservableFlag.create(true)};this.shouldReferToSkinValue=function(){return(ViewManager.isViewMode()||SkinsManager.Flags.DisableDuringEditingTemplate.isFalse()||!SkinEditingManager.isDuringEditing())};this.evaluateSkinFieldStateValue=function(g,k){k=$.extend({bindingData:undefined,fieldName:undefined,stateName:undefined,sourceId:undefined},k);var c=k.bindingData;var i=k.fieldName;var j=k.stateName;var f=k.sourceId;switch(c.type){case PropertiesBindingTypes.PropertyBinding:var a=g.getMainSkinInstance();if(a){var b=a.getPropertyValue(i);var h={value:b,animation:undefined};return h}break;default:var d=g.getPropertyValue("styleBindingId");return StylesManager.evaluateFieldStateValue(d,i,j)}};this.getFieldValueChangedEvent=function(a,d,f){switch(d.type){case PropertiesBindingTypes.PropertyBinding:var c=a.getMainSkinInstance();if(c){return{event:c.propertyChangedEvent,name:f}}break;default:var b=a.getStyleBindingId();return $.objectGet(StylesManager.getStyleFields(b),[f,"valueChangedEvent"])}};this.getSkinHierarchy=function(a){switch(a.type){case SkinsBindingsTypes.Inline:return a.hierarchy;break;case SkinsBindingsTypes.Global:var b=PageManager.getCoordinator().getSkin(a);if(!b){return SkinsManager.getDefaultSkinHierarchy(a.skinName)}return b;break}};this.updateSkin=function(b,a){PageManager.getCoordinator().updateSkin(b,a)};this.updateSkinHierarchy=function(f,a,c){switch(a.type){case SkinsBindingsTypes.Inline:c.setPropertyValue("skinBinding",$.extend({},a,{hierarchy:f}));break;case SkinsBindingsTypes.Global:var b=f.fieldsToValues;var d=f.statesAnimations;StylesManager.updateStyle(a.skinName+a.index,b,d);PageManager.getCoordinator().updateSkin(f,a);break}};this.getDefaultSkin=function(a){return DefaultSkinsTypes[a]};this.getDefaultSkinHierarchy=function(a){return SkinsManager.getDefaultSkin(a).hierarchy}}();var DefaultSkinsTypes={};function initializeDefaultSkins(){DefaultSkinsTypes[ElementsTypes.skinImageElement.name]={type:SkinsType.Hierarchy,hierarchy:{structures:[{type:ElementsTypes.skinHierarchyBox.name,elementProperties:{sizeAndPosition:{width:100,height:100,top:0,left:0}}}]}};DefaultSkinsTypes[ElementsTypes.SkinButtonElement.name]={type:SkinsType.Hierarchy,hierarchy:{structures:[{type:ElementsTypes.skinHierarchyBox.name,elementProperties:{sizeAndPosition:{width:100,height:100,top:0,left:0}}}]}}}var StylesManager=new function(){var a=ElementStates.NormalState.name;this.DefaultStateName=a;this.DefaultMobileStateName=MobileVersionViewManager.MobileStateName;this.Events={styleRemoved:SimpleEvent.createNamedEvents()};this.getDefaultStateName=function(){return a};var b=new ObservableCollection();var c=CollectionObserver.create(b);var d=OperationsBatch.create();this.StyleUpdateBatch=d;this.getStyleFields=function(g){var f=StylesManager.getStyle(g);return f.fields};this.getStyleId=function(f){return f.skinName+f.index};this.evaluateFieldStateValue=function(f,l,j){var i=StylesManager.getStyle(f);var j;if(!j&&MobileVersionViewManager.Flags.IsInMobileContext.isTrue()&&i.isSupportsMobile()){j=MobileVersionViewManager.MobileStateName}else{j=j?j:StylesManager.DefaultStateName}var h;var g;var k=i.getFieldData(l,j);if(k){h=i.statesAnimations[j]?i.statesAnimations[j].getValue():undefined;g=k.observableValue.getValue();return{animation:h,value:g}}return undefined};this.getStatesInformation=function(k,p,f){var g=StylesManager.getStyle(k);var o=[];var m=g.fields;var i=m[p[0]];if(i){for(var n in m[p[0]].states){var h=m[p[0]].states[n];var l=h.observableValue.getValue();if(l!==undefined){var j={stateName:n};j=f(j);o.push(j)}}}return o};this.getStyles=function(g){var f=b.getItem(g);return b.getItemsValues()};this.getStyle=function(g){var f=b.getItem(g);return f};this.isStyleExist=function(f){return b.getItem(f)!==undefined};this.initialize=function(){};this.addStyle=function(i,f,g){b.remove(i);var h=StylesManager.createStyle(i,f,g);b.put(h);return h};this.createStyle=function(f,h,n){n=n?n:{};var g=StyleController.create(f,h);var k=g.supportedStates;if(h){$.each(h,function(q,p){g.setField(q,StylesManager.createField(g,p,q))});var l=h;if(l){var j=$.getValues(l)[0];if(j){for(var o in j){var i=j[o];if(o!==StylesManager.DefaultStateName&&o!==MobileVersionViewManager.MobileStateName){var m;if(ElementStates[o].isComplex){m=DevicesNames.Mobile}else{m=DevicesNames.PC}$.objectSetIfUndefined(k,[m],$.returnEmptyArray);k[m].push(ElementStates[o]);if(!n[o]){n[o]={transitionInDuration:0,transitionOutDuration:0,easing:"linear",useCustomExitAnimation:false}}g.statesAnimations[o]=ObservableObject.create(n[o])}if(o===MobileVersionViewManager.MobileStateName){g.toggleMobileSupport(true,false)}}}}}return g};this.getStyleInformation=function(j){var f={fields:{},statesAnimations:{}};var g=b.getItem(j);$.each(g.fields,function(n,l){f.fields[n]={};for(var m in l.states){var k=l.states[m];f.fields[n][m]={value:k.observableValue.getValue(),animation:k.animation.getValue()}}});for(var i in g.statesAnimations){var h=g.statesAnimations[i];f.statesAnimations[i]=h.getValue()}return f};this.addFieldToStyle=function(f,i,g){var h=StylesManager.getStyle(f);$.objectSet(h.fields,[i],StylesManager.createField(h,g))};this.createField=function(i,f,k){var g=SimpleEvent.create();var j={states:{},valueChangedEvent:g};for(var h in f){$.objectSet(j,["states",h],StylesManager.createStateFieldData(i,k,h,f[h],g))}return j};this.createStateFieldData=function(j,k,i,g,h){var f={observableValue:ObservableObject.create(g.value,{valueChangeCallback:function(){OperationsManager.beginAtomicBatch();h.fire();j.fieldValueChangedEvent.fire(j,k,i);j.fieldNameValueChangedEvent.fire(k,i);OperationsManager.endAtomicBatch()}}),animation:ObservableObject.create(g.animation,{valueChangeCallback:function(){}})};return f};this.updateStyle=function(h,f,g){b.remove(h);StylesManager.addStyle(h,f,g)};this.updateStyleState=function(j,i,f,g){var h=StylesManager.getStyle(j);$.each(f,function(n,k){var m=k[i].value;var l=k[i].animation;h.setFieldValue(n,i,m);h.setFieldAnimationValue(n,i,m)});h.statesAnimations[i].setValue(g[i])};this.removeStyle=function(g){var f=StylesManager.getStyle(g);b.remove(g);f.removedEvent.fire();StylesManager.Events.styleRemoved.fire(g,g)}}();var StyleController=new function(){this.create=function(d){var a={};var c=false;var b={id:d,fields:{},statesAnimations:{},supportedStates:a,fieldValueChangedEvent:SimpleEvent.create(),fieldNameValueChangedEvent:SimpleEvent.createNamedEvents(),removedEvent:SimpleEvent.create(),isSupportsMobile:function(){return c},toggleMobileSupport:function(i,g){var f=c;c=i;if(g){if(i){if(!f){$.each(b.fields,function(q,m){for(var n in m.states){var l=m.states[n];var p=ElementStates[n];var o={value:l.observableValue.getValue(),animation:l.animation.getValue()};if(n===StylesManager.DefaultStateName){m.states[MobileVersionViewManager.MobileStateName]=StylesManager.createStateFieldData(b,q,n,o,b.fields[q].valueChangedEvent)}else{if(n!==ElementStates.MouseOverState.name){m.states[ElementStates.MobileState.id*p.id]=StylesManager.createStateFieldData(b,q,n,o,b.fields[q].valueChangedEvent)}}}});for(var h in b.statesAnimations){var j=b.statesAnimations[h];var k=ElementStates[h];if(h===StylesManager.DefaultStateName){b.statesAnimations[MobileVersionViewManager.MobileStateName]=ObservableObject.create(b.statesAnimations[h].getValue())}else{if(k!==ElementStates.MouseOverState){b.statesAnimations[ElementStates.MobileState.id*k.id]=ObservableObject.create(b.statesAnimations[h].getValue())}}}a[DevicesNames.Mobile]=[];$.each(a[DevicesNames.PC],function(l,m){if(m!==ElementStates.MouseOverState){a[DevicesNames.Mobile].push(ElementStates[ElementStates.MobileState.id*m.id])}})}}else{if(f){$.each(b.fields,function(o,m){for(var n in m.states){var l=m.states[n];if(n===StylesManager.DefaultStateName){delete m.states[MobileVersionViewManager.MobileStateName]}else{delete m.states[ElementStates.MobileState.id*ElementStates[n].id]}b.fieldValueChangedEvent.fire(b,o,n);b.fieldNameValueChangedEvent.fire(o,n)}m.valueChangedEvent.fire()});for(var h in b.statesAnimations){var j=b.statesAnimations[h];if(h===StylesManager.DefaultStateName){delete b.statesAnimations[MobileVersionViewManager.MobileStateName]}else{delete b.statesAnimations[ElementStates.MobileState.id*ElementStates[h].id]}}}}}},getFieldData:function(g,f){f=f?f:b.getDefaultStateName();return $.objectGet(b.fields,[g,"states",f])},getFieldObservable:function(g,f){f=f?f:StylesManager.DefaultStateName;return $.objectGet(b.fields,[g,"states",f,"observableValue"])},getFieldAnimationObservable:function(g,f){f=f?f:StylesManager.DefaultStateName;return $.objectGet(b.fields,[g,"states",f,"animation"])},getAnimationObservable:function(f){f=f?f:StylesManager.DefaultStateName;return $.objectGet(b.statesAnimations,[f])},getSupportedStates:function(){if(c&&MobileVersionViewManager.Flags.IsInMobileContext.isTrue()){return ArrayUtils.clone(a[DevicesNames.Mobile])}else{var f=ArrayUtils.clone(a[DevicesNames.PC]);if(MobileVersionViewManager.Flags.IsInMobileContext.isTrue()){return $.grep(f,function(g){return g!==ElementStates.MouseOverState})}return f}},getDefaultStateName:function(){return c?MobileVersionViewManager.MobileStateName:StylesManager.DefaultStateName},getFieldValue:function(h,f){var g=b.getFieldObservable(h,f);if(g){return g.getValue()}return undefined},setFieldValue:function(i,g,f){var h=b.getFieldObservable(i,g);if(h){return h.setValue(f)}},setFieldAnimationValue:function(i,h,g){var f=b.getFieldAnimationObservable(i,h);if(f){f.setValue(g)}},getStateAnimationObservable:function(f){return $.objectGet(b.statesAnimations,[f])},getStateAnimationValue:function(g){var f=b.getStateAnimationObservable(g);return f.getValue()},setStateAnimationValue:function(h,g){var f=b.getStateAnimationObservable(h);if(f){f.setValue(g)}},setField:function(g,f){$.objectSet(b.fields,[g],f)}};return b}}();var SkinEditingManager=new function(){var l;var m;this.Events=l={SkinEditingStart:SimpleEvent.create(),SkinEditingFinish:SimpleEvent.create(),FieldWasCreated:SimpleEvent.create(),BindingToFieldEvent:SimpleEvent.create(),BindingToFieldRemovedEvent:SimpleEvent.create(),FieldsChangedEvent:SimpleEvent.create()};this.Flags=m={IsInEditingMode:ObservableFlag.create(false,{valueChangeCallback:function(n){if(n){SkinEditingManager.Events.SkinEditingStart.fire();SkinEditingManager.IsInEditingBatch.start()}else{SkinEditingManager.IsInEditingBatch.finish();SkinEditingManager.Events.SkinEditingFinish.fire()}}})};this.IsInEditingBatch=OperationsBatch.create();this.BindingsCollection=SimpleEvent.createBindingsCollection();var h=this;var d;var k;var a;var c;var g;var j;var b=new ObservableCollection({idFunction:$.defaultNameFunction});var i=new ObservableCollection({idFunction:$.defaultIdFunction});var f;this.initialize=function(){};this.isDuringEditing=function(){return SkinEditingManager.Flags.IsInEditingMode.isTrue()};this.getCurrentInstance=function(){return SkinEditingManager.isDuringEditing()?d:undefined};this.clearAllFields=function(n){b.clear();$.each(TemplateEditingManager.getCurrentInstance().getDescendingInstances(true),function(p,o){o.clearAllBindings(n)});l.FieldsChangedEvent.fire()};this.clearStyleFields=function(){h.clearAllFields(PropertiesBindingTypes.StyleBinding)};this.clearPropertiesFields=function(){h.clearAllFields(PropertiesBindingTypes.PropertyBinding)};this.removeCategory=function(n){i.remove(n)};this.createCategory=function(o,p,n){i.put({id:o.id,priority:n,title:p})};this.removeField=function(n){b.remove(n);$.each(TemplateEditingManager.getCurrentInstance().getDescendingInstances(true),function(p,o){o.removeField(n)});l.FieldsChangedEvent.fire()};this.createField=function(t,o,n,s,r,q){b.put({name:t,fieldType:o,title:s,categoryId:r,priority:q});var p={};$.each(k,function(u,v){p[v.name]={value:undefined,animation:undefined}});p[StylesManager.DefaultStateName]={value:n,animation:undefined};StylesManager.addFieldToStyle(f.id,t,p)};this.bindPropertiesToField=function(o,p,n){PropertiesManager.UpdateBatch.executeWithActivation(function(){$.each(o,function(r,t){var q=t.instance;var r=t.propertyName;var s=t.propertyFieldName;q.setStyleBindingId(f.id);q.bindPropertyToField(r,s,p,n)})});l.FieldsChangedEvent.fire()};this.unbindPropertiesFromField=function(n,o){PropertiesManager.UpdateBatch.executeWithActivation(function(){$.each(n,function(q,s){var p=s.instance;var q=s.propertyName;var r=s.propertyFieldName;p.unbindPropertyToField(q,r,o)})});l.FieldsChangedEvent.fire()};this.getCurrentStyle=function(){return f};this.startEditing=function(o,r){r=$.extend({isTemplateEditing:false,commitCallback:$.noop,cancelCallback:$.noop,size:undefined,fields:{},skinFieldsMetaData:{},fieldsToValues:{},statesAnimations:{},elementTypeName:undefined},r);var u=r.skinFieldsMetaData;g=r.elementTypeName;c=o;k=ElementsTypes[g].typeMethods.getSkinSupportedStates();j=SkinsManager.getSkinHierarchy(o);j=SkinEditingManager.convertFieldsToTemplate(j,r.styleId);if(j.fieldsToData){b.syncrhonize($.getValues(j.fieldsToData))}else{b.clear()}if(j.categoriesData){i.syncrhonize($.getValues(j.categoriesData))}else{i.clear()}var s;s=j.styleId&&j.styleId!==r.styleId?j.styleId:$.uniqueID();var q=r.fieldsToValues&&!$.isEmptyObject(r.fieldsToValues)?r.fieldsToValues:j.fieldsToValues?j.fieldsToValues:{};var t=r.statesAnimations&&!$.isEmptyObject(r.statesAnimations)?r.statesAnimations:j.statesAnimations?j.statesAnimations:{};f=StylesManager.addStyle(s,q,t);a=r;var n=r.commitCallback;var p=r.cancelCallback;r.commitCallback=function(w){var v=StylesManager.getStyleInformation(s);w.styleVersion=$.uniqueID();w.styleId=s;w.fieldsToData=b.getItems();w.categoriesData=i.getItems();w.fieldsToValues=v.fields;w.statesAnimations=v.statesAnimations;if(!g||ElementsTypes[g].hasFeature(Features.DataListItem)||g==ElementsTypes.SkinNavigationButton.name){n(h.convertTemplateToSkinTemplateWithFields(w,g,undefined,{ignoreSizeAndPosition:true}))}else{var w=h.convertTemplateToField(w,g);n(w)}StylesManager.removeStyle(s)};r.cancelCallback=function(v){StylesManager.removeStyle(s);p()};SkinEditingManager.Flags.IsInEditingMode.setTrue();OperationsManager.disableBatch();TemplateEditingManager.startEditing(j,r.fields,o.skinName,r);d=TemplateEditingManager.getCurrentInstance();TemplateEditingManager.Events.TemplateEditingFinish.one(function(){SkinEditingManager.Flags.IsInEditingMode.setFalse()});OperationsManager.endDisableBatch()};this.convertFieldsToTemplate=function(y,s){var r=y.structures[0].type;var o=y.structures[0];var x=o.id;var v;var w=HierarchyController.create(y);var q=[];var p=$.extend(true,{},y.customStatesProperties);var u;var t;if(s){var n=StylesManager.getStyleInformation(s);u=n.fields;t=n.statesAnimations}else{u=y.fieldsToValues;t=y.statesAnimations}w.eachStructure(function(B,z,C){if(z.elementProperties.styleBindingId){var D=$.extend(true,{},z.elementProperties);var A=D.styleBindingFields;if(A){$.each(A,function(F,E){$.each(E.properties,function(K,P){var L=PropertiesTypes[K];if(u[F]){for(var O in u[F]){var H=u[F][O];var J=H.value;if(L.valueConverter!==undefined&&J!==undefined&&J!==null){var G=$.makeArray(L.valueConverter);for(var I=0;I<G.length;I++){J=G[I](J)}}if(!P.boundToProperty&&J){$.each(J,function(Q){if(!P.fields[Q]){delete J[Q]}})}if(O!==StylesManager.DefaultStateName){var M={};if(O!==StylesManager.DefaultMobileStateName){M=$.extend({},H.animation?H.animation:t[O])}var N=$.objectGet(p,[z.id,K,O,x]);if(N){J=$.extendValueWithDefaultValue(J,N.stateValue)}M.stateValue=J;if(M.stateValue!==undefined){$.objectSet(p,[z.id,K,O,x],M)}}else{D[K]=$.extendValueWithDefaultValue(J,D[K])}}}})})}z.elementProperties=D}});y.customStatesProperties=p;return y};this.convertTemplateToField=function(x,ai,ae){var T=x.structures[0].type;var A;var ae=ae?ae:$.uniqueID();var z=HierarchyController.create(x);var o=[];var S=0;var t;var N;var G;var ad;var D=x.customStatesProperties;var U={};var M={};var ag=0;var W={};var y={};var F=$.registerDefinitions({},{backgroundColor:{title:"Background"},inputBackgroundColor:{title:"Input Background"},backgroundOverlay:{title:"Overlay"},iconColor:{title:"Icon Color"},borderColor:{title:"Border"},lineColor:{title:"Line"},inputBorderColor:{title:"Input Border"},borderWidth:{title:"Border Width",options:{fieldVisualizer:SkinFieldsVisualizers.Slider,visualizerOptions:{min:0,max:20}}},lineWidth:{title:"Line Width",options:{fieldVisualizer:SkinFieldsVisualizers.Slider,visualizerOptions:{min:0,max:20}}},inputBorderWidth:{title:"Input Border Width",options:{fieldVisualizer:SkinFieldsVisualizers.Slider,visualizerOptions:{min:0,max:20}}},roundness:{title:"Roundness"},padding:{title:"Padding"},shadow:{title:"Shadow"},innerShadow:{title:"Inner Shadow"},glow:{title:"Glow"},innerGlow:{title:"Inner Glow"},fontSize:{title:"Text Size",options:{fieldVisualizer:SkinFieldsVisualizers.NumericTextBox,visualizerOptions:{min:0}}},font:{title:"Font"},fontColor:{title:"Text"},inputFontSize:{title:"Input Text Size",options:{fieldVisualizer:SkinFieldsVisualizers.NumericTextBox,visualizerOptions:{min:0}}},inputFont:{title:"Input Text"},inputFontColor:{title:"Input Text"}});var ak={};var s=x.structures[0];var Q=s.id;ai=ai?ai:ElementsTypes[T].skinTypeName;var J=ElementsTypes[ai];var aj=J.typeMethods.getSkinSupportedStates();var u=$.mapToDictionary(aj,undefined,function(al){return al.name});z.eachStructure(function(am,al,an){al.elementProperties.styleBindingId=ae;if(al.elementProperties.styleBindingFields){$.each(al.elementProperties.styleBindingFields,function(ap,ao){if(ao.type===PropertiesBindingTypes.StyleBinding){delete al.elementProperties.styleBindingFields[ap]}})}});var V=0;var L=0;if(ai!==ElementsTypes.skinInputElement.name){var K=ac(true);w();var O=K.coreStructure;var n=K.index;C();var ah=r();X();Z()}else{var aa=z.getStructureByIndex(0);var p=z.getStructureByType("TextInputField")||z.getStructureByType("TextArea");var K=ac();var E=K&&K.coreStructure?K.coreStructure:aa;q(p,F.inputBackgroundColor,"inputBackgroundColor","backgroundColor",SkinFieldsTypes.BackgroundColor,undefined,SkinDefaultCategories.Colors);G=v(E,F.borderColor,"borderColor","borderColor",SkinFieldsTypes.SolidColor,R,["left","top","bottom","right"],undefined,V,SkinDefaultCategories.Colors,ab);ad=v(E,F.borderWidth,"borderWidth","borderWidth",SkinFieldsTypes.Pixels,R,["left","top","bottom","right"],undefined,L,SkinDefaultCategories.Border);G=v(p,F.inputBorderColor,"inputBorderColor","borderColor",SkinFieldsTypes.SolidColor,$.returnTrue,["left","top","bottom","right"],undefined,undefined,SkinDefaultCategories.Colors,ab);ad=v(p,F.inputBorderWidth,"inputBorderWidth","borderWidth",SkinFieldsTypes.Pixels,$.returnTrue,["left","top","bottom","right"],undefined,undefined,SkinDefaultCategories.Border);q(p,F.roundness,"roundness","roundness",SkinFieldsTypes.Roundness,undefined,SkinDefaultCategories.Border);q(p,F.shadow,"shadow","shadow",SkinFieldsTypes.Shadow,undefined,SkinDefaultCategories.Effects);q(p,F.glow,"glow","glow",SkinFieldsTypes.Glow,undefined,SkinDefaultCategories.Effects);if(p){q(p,F.innerShadow,"innerShadow","innerShadow",SkinFieldsTypes.InnerShadow,undefined,SkinDefaultCategories.Effects);q(p,F.innerGlow,"innerGlow","innerGlow",SkinFieldsTypes.InnerGlow,undefined,SkinDefaultCategories.Effects)}Z(p,function(al){return al.id!==p.id})}$.each(ak,function(al,am){$.each(am,function(ao,an){W[an.fieldName].title=F[al].title+(am.length>1?" "+(ao+1):"");W[an.fieldName].options=$.extend(true,{},F[al].options)})});x.structures[0].type=ElementsTypes.skinHierarchyBox.name;x.styleVersion=$.uniqueID();x.styleId=ae;x.fieldsToData=W;x.categoriesData=y;x.fieldsToValues=U;x.statesAnimations=M;return x;function ac(al){var am;var ao=-1;z.eachStructure(function(ar,ap,at){var aq=ap.elementProperties;if(!at||(at.isForBackground&&aq.isVisible&&PropertiesHelper.isUnifiedValue(aq.fillLayout,true)&&PropertiesHelper.isUnifiedValue(aq.margin,0))){if(P(ap)){am=ap;ao=ar}ap.isForBackground=true;if(at){at.hasBackgroundChild=true}}});if(!am&&al){am=z.getStructureByIndex(0);ao=0}if(!am){return undefined}var an=q(am,F.backgroundColor,"backgroundColor","backgroundColor",SkinFieldsTypes.BackgroundColor,undefined,SkinDefaultCategories.Colors);return{coreStructure:am,index:ao}}function r(){if(O&&O.elementProperties.backgroundOverlay){var al=q(O,F.backgroundOverlay,"backgroundOverlay","backgroundOverlay",SkinFieldsTypes.BackgroundColor,"transparent",SkinDefaultCategories.Colors);if(al){return O}}}function H(){var an;var am;z.eachStructure(function(ar,ap,at){var aq=ap.elementProperties;if(!at||(at.isForBorder&&aq.isVisible&&!at.hasBorder&&PropertiesHelper.isUnifiedValue(aq.fillLayout,true)&&PropertiesHelper.isUnifiedValue(aq.margin,0))){if(af(ap,D)){an=ap;am=ar;ap.hasBorder=true}ap.isForBorder=true;if(at){at.hasBorderChilds=true}}});an=an?an:O;G=v(an,F.borderColor,"borderColor","borderColor",SkinFieldsTypes.SolidColor,$.returnTrue,["left","top","bottom","right"],undefined,V,SkinDefaultCategories.Colors,ab);ad=v(an,F.borderWidth,"borderWidth","borderWidth",SkinFieldsTypes.Pixels,$.returnTrue,["left","top","bottom","right"],undefined,L,SkinDefaultCategories.Border);var al=q(an,F.lineColor,"lineColor","lineColor",SkinFieldsTypes.SolidColor,undefined,SkinDefaultCategories.Colors);var ao=q(an,F.lineWidth,"lineWidth","lineWidth",SkinFieldsTypes.Pixels,undefined,SkinDefaultCategories.Border);q(an,F.roundness,"roundness","roundness",SkinFieldsTypes.Roundness,undefined,SkinDefaultCategories.Border);q(an,F.shadow,"shadow","shadow",SkinFieldsTypes.Shadow,undefined,SkinDefaultCategories.Effects);q(an,F.glow,"glow","glow",SkinFieldsTypes.Glow,undefined,SkinDefaultCategories.Effects);if(O){q(O,F.innerShadow,"innerShadow","innerShadow",SkinFieldsTypes.InnerShadow,undefined,SkinDefaultCategories.Effects);q(O,F.innerGlow,"innerGlow","innerGlow",SkinFieldsTypes.InnerGlow,undefined,SkinDefaultCategories.Effects)}V=G?V+$.getKeys(G).length:V;return an}function Z(am,ao){ao=ao?ao:$.returnTrue;var al=1;var an=0;z.eachStructure(function(aq,ap,ar){if(ElementsTypes[ap.type].hasFeature(Features.HasText)){an++}});if(an){z.eachStructure(function(at,ap,au){if(ElementsTypes[ap.type].hasFeature(Features.HasText)){if(ap.elementProperties.namedTextStyle){var ar=ap.elementProperties.namedTextStyle;var aq;if(PageManager.getCoordinator()){aq=TextStyleManager.getTextStyleInformation(ar)}else{aq=PageManager.getCoordinatorHeirarchy().structures[0].elementProperties.textStyles[ar]}ap.elementProperties.fontSize=!ap.elementProperties.fontSize?aq.fontSize:ap.elementProperties.fontSize}if(ao(ap)){q(ap,F.fontSize,"fontSize"+al,"fontSize",SkinFieldsTypes.Pixels,undefined,SkinDefaultCategories.Text);al++}}});if(am){q(am,F.inputFontSize,"inputFontSize","fontSize",SkinFieldsTypes.Pixels,undefined,SkinDefaultCategories.Text)}al=1;z.eachStructure(function(at,ap,au){if(ElementsTypes[ap.type].hasFeature(Features.HasText)){if(ap.elementProperties.namedTextStyle){var ar=ap.elementProperties.namedTextStyle;var aq;if(PageManager.getCoordinator()){aq=TextStyleManager.getTextStyleInformation(ar)}else{aq=PageManager.getCoordinatorHeirarchy().structures[0].elementProperties.textStyles[ar]}ap.elementProperties.fontColor=!ap.elementProperties.fontColor?aq.color:ap.elementProperties.fontColor}if(ao(ap)){q(ap,F.fontColor,"fontColor"+al,"fontColor",SkinFieldsTypes.SolidColor,undefined,SkinDefaultCategories.Colors);al++}}});if(am){q(am,F.inputFontColor,"inputfontColor","fontColor",SkinFieldsTypes.SolidColor,undefined,SkinDefaultCategories.Colors)}al=1;z.eachStructure(function(at,ap,au){if(ElementsTypes[ap.type].hasFeature(Features.HasText)){if(ap.elementProperties.namedTextStyle){var ar=ap.elementProperties.namedTextStyle;var aq;if(PageManager.getCoordinator()){aq=TextStyleManager.getTextStyleInformation(ar)}else{aq=PageManager.getCoordinatorHeirarchy().structures[0].elementProperties.textStyles[ar]}ap.elementProperties.font=!ap.elementProperties.font?aq.fontFamily:ap.elementProperties.font}if(ao(ap)){q(ap,F.font,"font"+al,"font",SkinFieldsTypes.Font,undefined,SkinDefaultCategories.Text);al++}}});if(am){q(am,F.inputFont,"inputfont","font",SkinFieldsTypes.Font,undefined,SkinDefaultCategories.Text)}}}function C(){var an=1;z.eachStructure(function(at,ap,au){var aq=ap.elementProperties.backgroundColor;if((at>n)&&aq){var ar=q(ap,F.backgroundColor,"backgroundColor"+an,"backgroundColor",SkinFieldsTypes.BackgroundColor,"transparent",SkinDefaultCategories.Colors);if(ar){an++}}});var ao=H();var am=1;var al=1;z.eachStructure(function(aw,at,au){var ar=at.elementProperties.borderColor;var ap=at.elementProperties.borderWidth;var ax=at.elementProperties.lineColor;var av=at.elementProperties.lineWidth;if((!ao||ao.id!==at.id)&&(ar||ax)){if(af(at,D)){ao=at;G=v(at,F.borderColor,"borderColor","borderColor",SkinFieldsTypes.SolidColor,B,["left","top","bottom","right"],undefined,V,SkinDefaultCategories.Colors,ab);V=G?V+$.getKeys(G).length:V}if(ao.elementProperties.lineWidth!==undefined){var aq=q(at,F.lineColor,"lineColor"+am,"lineColor",SkinFieldsTypes.SolidColor,undefined,SkinDefaultCategories.Colors);var ay=q(at,F.lineWidth,"lineWidth"+am,"lineWidth",SkinFieldsTypes.Pixels,undefined,SkinDefaultCategories.Border);am++}}})}function w(){var al=1;z.eachStructure(function(ao,am,ap){var an=am.elementProperties.iconColor;if(an){q(am,F.iconColor,"iconColor"+al,"iconColor",SkinFieldsTypes.BackgroundColor,undefined,SkinDefaultCategories.Colors);al++}})}function X(){var al=1;z.eachStructure(function(ap,am,aq){var ao=am.elementProperties.backgroundOverlay;if((ap>n)&&ao&&ao!=="transparent"){var an=q(am,F.backgroundOverlay,"backgroundOverlay"+al,"backgroundOverlay",SkinFieldsTypes.BackgroundColor,"transparent",SkinDefaultCategories.Colors);if(an){al++}}})}function af(al,ap){var ar=al.elementProperties;if(!PropertiesHelper.isUnifiedValue(ar.borderWidth,0)){return true}var aq=$.objectGet(ap,[al.id,"borderWidth"]);if(aq){var an=false;for(var ao in aq){var am=aq[ao];if(aj[ao]&&!PropertiesHelper.isUnifiedValue(am[Q].stateValue,0)){an=true;break}}if(an){return true}}return false}function q(an,az,ay,aq,at,av,au){var ap=false;if(an.elementProperties[aq]===undefined){return}if(!$.defaultEqualityComparer(an.elementProperties[aq],av)){$.objectSet(U,[ay,StylesManager.DefaultStateName],{value:an.elementProperties[aq]});ap=true}var al=$.objectGet(D,[an.id,aq]);if(al){for(var ax in al){var ar=al[ax];if(u[ax]&&ar[Q]){var ao=$.extend({},ar[Q]);delete ao.stateValue;if(!$.isEmptyObject(ao)&&!M[ax]){M[ax]=$.cloneObject(ao);M[ax].easing="linear";M[ax].useCustomExitAnimation=ao.transitionInDuration!==ao.transitionOutDuration}$.objectSet(U,[ay,ax],{value:ar[Q].stateValue});if(!U[ay][StylesManager.DefaultStateName]){U[ay][StylesManager.DefaultStateName]={value:av}}ap=true}}}if(ap){if(!an.elementProperties.styleBindingFields){an.elementProperties.styleBindingFields={}}var am={};$.each(aj,function(aA,aB){if(!U[ay][aB.name]){U[ay][aB.name]={value:undefined,animation:undefined}}});var aw=Y(an,az,U,ay,at,au);$.objectSet(an.elementProperties,["styleBindingFields",aw,"properties",aq],{boundToProperty:true,fields:{}});if(ay===aw){return true}}return false}function v(aD,an,am,ax,aq,au,az,ap,ar,at,ay){ap=ap?ap:$.returnTrue;au=au?au:$.returnTrue;ay=ay?ay:$.returnFalse;if(!aD.elementProperties[ax]){return}var aw=false;var al={};var aC={};var ao=ar!==undefined?ar:1;for(var aB=0;aB<az.length;aB++){if(!aC[az[aB]]){var av=[az[aB]];aC[az[aB]]=true;for(var aA=aB+1;aA<az.length;aA++){if(I(az[aB],az[aA],ax,aD)||ay(az[aB],az[aA],ax,aD)){aC[az[aA]]=true;av.push(az[aA])}}al[am+ao]={fields:av,fieldName:am+ao};ao++}}if(!ap(al)){return false}$.each(al,function(aH,aM){var aE=false;$.each(aM.fields,function(aQ,aP){if(au(aP,aD)){aE=true;return false}});if(!aE){return true}var aJ=aM.fields[0];$.objectSet(U,[aH,StylesManager.DefaultStateName],{value:aD.elementProperties[ax][aJ]});var aF=$.objectGet(D,[aD.id,ax]);if(aF){for(var aO in aF){var aL=aF[aO];if(u[aO]&&aL[Q]){var aI=$.extend({},aL[Q]);delete aI.stateValue;if(!$.isEmptyObject(aI)&&!M[aO]){M[aO]=$.cloneObject(aI);M[aO].easing="linear";M[aO].useCustomExitAnimation=aI.transitionInDuration===aI.transitionOutDuration}$.objectSet(U,[aH,aO],{value:aL[Q].stateValue[aJ]})}}}if(!aD.elementProperties.styleBindingFields){aD.elementProperties.styleBindingFields={}}var aG={};$.each(aj,function(aP,aQ){if(!U[aH][aQ.name]){U[aH][aQ.name]={value:undefined,animation:undefined}}});var aK={};$.each(aM.fields,function(aP,aQ){aK[aQ]=true});var aN=Y(aD,an,U,aH,aq,at);if(aN!==aH){delete al[aH];aH=aN}$.objectSet(aD.elementProperties,["styleBindingFields",aH,"properties",ax],{boundToProperty:false,fields:aK})});return al}function Y(an,aq,ao,ar,am,al){var ap;if(aq&&ak[aq.name]){$.each(ak[aq.name],function(at,au){if($.defaultEqualityComparer(ao[ar],au.fieldToValues)){delete ao[ar];ar=au.fieldName;ap=true}})}$.objectSet(an.elementProperties,["styleBindingFields",ar,"type"],PropertiesBindingTypes.StyleBinding);if(!ap){W[ar]={name:ar,fieldType:am.name,categoryId:al.id,priority:ag};ag++;y[al.id]=al;if(!ak[aq.name]){ak[aq.name]=[]}ak[aq.name].push({fieldName:ar,fieldToValues:ao[ar]})}return ar}function I(ao,an,ar,am){var aq=am.elementProperties;if(!$.defaultEqualityComparer(aq[ar][ao],aq[ar][an])){return false}var at=true;var al=$.objectGet(D,[am.id,ar]);if(al){for(var au in al){var ap=al[au];if(u[au]&&ap[Q]&&ap[Q].stateValue){if(!$.defaultEqualityComparer(ap[Q].stateValue[ao],ap[Q].stateValue[an])){at=false;break}}}}return at}function ab(al,ap,an,am){var ao=am.elementProperties;if(I(al,ap,"borderWidth",am)&&!B(al,am)){return true}return false}function B(al,am){var ar=am.elementProperties;if((al&&ar.borderWidth[al]!==0)||!PropertiesHelper.isUnifiedValue(ar.borderWidth,0)){return true}var aq=false;var an=$.objectGet(D,[am.id,"borderWidth"]);if(an){for(var ap in an){var ao=an[ap];if(u[ap]&&ao[Q]){if((al&&ao[Q].stateValue[al]!==0)||!PropertiesHelper.isUnifiedValue(ao[Q].stateValue,0)){aq=true;break}}}}return aq}function P(al){var an=al.elementProperties;if(an.backgroundColor!=="transparent"){return true}var am=false;return am}function R(am,al){return al.elementProperties.borderWidth[am]!==0}};this.convertTemplateToSkinTemplateWithFields=function(q,t,o,p){p=$.extend({ignoreSizeAndPosition:false},p);var r=p.ignoreSizeAndPosition;var n=q.structures[0];var s=n.type;t=t?t:(ElementsTypes[s].hasFeature(Features.SkinElement)?s:ElementsTypes[s].skinTypeName);q=h.convertTemplateToField(q,t);return{id:$.uniqueID(),structures:[{id:$.uniqueID(),type:t,elementProperties:{sizeAndPosition:r?undefined:n.elementProperties.sizeAndPosition,skinBinding:{type:SkinsBindingsTypes.Inline,skinName:o?o:$.uniqueID(),index:0,hierarchy:q}}}]}}}();var SkinFieldsVisualizers={OpacitySlider:"OpacitySlider",ColorPicker:"ColorPicker",Slider:"Slider",NumericTextBox:"NumericTextBox",FontSelectionComboBox:"FontSelectionComboBox"};var SkinFieldsTypes=$.registerDefinitions({},{BackgroundColor:{options:{}},Color:{options:{}},SolidColor:{options:{}},Number:{fieldVisualizer:SkinFieldsVisualizers.NumericTextBox,options:{min:0,max:Infinity}},Pixels:{fieldVisualizer:SkinFieldsVisualizers.NumericTextBox,options:{min:0,max:Infinity}},Font:{fieldVisualizer:SkinFieldsVisualizers.FontSelectionComboBox,options:{}},BorderColor:{fieldVisualizer:SkinFieldsVisualizers.ColorPicker,options:{}},LineColor:{fieldVisualizer:SkinFieldsVisualizers.ColorPicker,options:{}},Opacity:{fieldVisualizer:SkinFieldsVisualizers.OpacitySlider,options:{}},BorderWidth:{options:{min:0,max:20}},LineWidth:{options:{min:0,max:20}},Padding:{options:{min:0,max:50}},Roundness:{options:{min:0,max:Infinity}},Shadow:{options:{min:0,max:Infinity}},InnerShadow:{options:{min:0,max:Infinity}},Glow:{options:{min:0,max:Infinity}},InnerGlow:{options:{min:0,max:Infinity}}});var SkinDefaultCategories=$.registerDefinitions({},{Colors:{title:"Colors",priority:1},Text:{title:"Text",priority:2},Border:{title:"Border",priority:3},Effects:{title:"Effects",priority:4},MoreOptions:{title:"More",priority:5}},"id");var ApplicationManagerConfig={Brand:Brands.WebsiteBuilder,BrandName:"WebsiteBuilder",BrandFreemiumBannerUrl:"http://track.websitebuilder.com/53ee22a6819cc/click",AddOnsUrl:"https://my.websitebuilder.com/addons"};var ApplicationManager=new function(){this.getTemplatePreviewUrl=function(c,b){return"http://www.{applicationDomain}/website-templates/template/{templateID}/{siteType}".format({templateID:c,siteType:b===SiteType.Mobile?"mobile":"desktop",applicationDomain:Settings.ApplicationDomain})};this.getFreemiumBannerIFrameUrl=function(c,b){return"http://{editorSubDomain}.{applicationDomain}/banner/{bannerType}/{siteId}/".format({siteId:c,bannerType:b?"preview":"freemium",applicationDomain:Settings.ApplicationDomain,editorSubDomain:a()})};this.getTemplateEditingUrl=function(c,b){return"http://{editorSubDomain}.{applicationDomain}/#/template/{templateID}".format({templateID:c,applicationDomain:Settings.ApplicationDomain,editorSubDomain:a()})};this.getSiteEditingUrl=function(b){return"http://{editorSubDomain}.{applicationDomain}/#/site/{siteId}/desktop/".format({siteId:b,applicationDomain:Settings.ApplicationDomain,editorSubDomain:a()})};this.getServiceUrl=function(b){return"http://{editorSubDomain}.{applicationDomain}/services/{service}".format({service:b,applicationDomain:Settings.ApplicationDomain,editorSubDomain:a()})};this.getBrand=function(){return $.valueOrDefault(ApplicationManagerConfig.Brand,Brands.Webzai)};this.getBrandName=function(){return ApplicationManagerConfig.BrandName};this.getBrandFreemiumBannerUrl=function(){return ApplicationManagerConfig.BrandFreemiumBannerUrl};this.getAddOnsUrl=function(){return ApplicationManagerConfig.AddOnsUrl};this.getBrandText=function(){switch(ApplicationManagerConfig.Brand){case 1:return"Webzai";break;case 2:return"Sitelio";break;case 3:return"WebsiteBuilder";break;case 5:return"Sitey";case 6:return"SiteBuilder";default:return"Webzai";break}};this.getBrandUrl=function(){return"http://www.{applicationDomain}".format({applicationDomain:Settings.ApplicationDomain})};this.getDomains=function(){if(this.isNewServer()){return SiteManager.getSiteConfiguration().domains}else{return[]}};this.isNewServer=function(){return $.valueOrDefault(Settings.IsNewServer,false)};this.getHelpCenterUrl=function(){return $.valueOrDefault(Settings.HelpCenterUrl,"http://support.webzai.com/support/solutions")};this.getMyAccountUrl=function(){return $.valueOrDefault(Settings.MyAccountUrl,"http://www.webzai.com/myaccount")};this.getLogoutUrl=function(){return $.valueOrDefault(Settings.LogoutUrl,"http://www.webzai.com/logout")};this.getCreateNewSiteUrl=function(){return $.valueOrDefault(Settings.CreateNewSiteUrl,"http://www.webzai.com/create")};this.getSignupUrl=function(){return $.valueOrDefault(Settings.SignupUrl,"http://www.webzai.com/create")};this.getUpgradeUrl=function(b){if(Settings.UpgradeUrl){return Settings.UpgradeUrl+"site-id="+b}else{return"http://www.webzai.com/pricing"}};function a(){if(ApplicationManager.getBrand()===Brands.Sitelio){return"builder"}else{return"editor"}}}();var PromptingManager=new function(){var a=false;var b;var c;this.initialize=function(){if(!SiteManager.isSavedSite()){b=setTimeout(function(){if(!SiteManager.isSavedSite()){Commands.SaveSite.action()}f.deactivate();d.deactivate();clearTimeout(c);c=undefined},10*60*1000);var d=SimpleEvent.createEventListener([SelectionManager.Events.SelectionCompleted],function(){clearTimeout(c);c=setTimeout(function(){if(!SiteManager.isSavedSite()){Commands.SaveSite.action()}d.deactivate()},5*60*1000)},{deactivationCallback:function(){clearTimeout(b);b=undefined;a=true}});d.activate();var f=SimpleEvent.createEventListener([SiteManager.SiteSavedEvent,SiteManager.SitePublishedEvent],function(){f.deactivate()},{deactivationCallback:function(){clearTimeout(b);b=undefined;a=true;d.deactivate();clearTimeout(c);c=undefined}});f.activate()}ViewManager.Events.SwitchedToViewMode.one(function(){if(b&&!SiteManager.isSavedSite()&&!a){f.deactivate();d.deactivate();Modes.NormalMode.flag.valueChangedEvent.one(function(){if(!SiteManager.isSavedSite()){Commands.SaveSite.action()}})}if(SiteSettingsManager.getValue("isFirstPreview")===undefined){if(!SiteManager.isPremium()){if(WebzaiController.getCurrentUser()){var h=WebzaiController.getCurrentUser().username.split(" ");h=h[0]}else{h=""}var g=setTimeout(function(){Dialogs.LightBoxDialogCentered.usePanel(Panels.LimitationsPanel).withActivationArgs({header:"Hey {0} your site looks great! Upgrade today for these great features....".format(h),featureList:["Add unlimited pages","Free, secure web hosting","Connect a custom domain"],upgradeButtonText:"Upgrade Now",isDiscount:true,imageClass:"image-sprite-limitations-generic"}).withClass("hide-header-splitter").open({closeOnClickOutside:true,layoutClass:"variation-left-orientation",buttons:[]});SiteSettingsManager.setValue("isFirstPreview",true)},180000);Modes.NormalMode.flag.valueChangedEvent.one(function(){clearTimeout(g)})}}})}};var ContentPushingManager=new function(){var o=this;var h=20;var a=80;var c=150;this.Events={ContentPushed:SimpleEvent.create()};var v=ObservableFlag.createConditionalPositive();var l=ObservableFlag.create(true);this.Flags={PushWhenIntersectWithRow:l,EnablePushing:v};var s={};this.initialize=function(){if(Global.IsDesigner){DesignerStateManager.onStatesChange([DesignerStates.Dragging,DesignerStates.Resizing],function(w){v.setFalse(w)},function(w){v.setTrue(w)});SimpleEvent.bind([Global.Events.ElementDraggingStart,Global.Events.ElementResizingStart,SelectionManager.Events.SelectionChangedSimple,ElementsEditingManager.Events.ElementEditingStarted,Modes.NormalMode.flag.valueChangedEvent],function(){s={}})}MobileVersionViewManager.Flags.IsInMobileContext.valueChangedEvent.bind(function(w){v.setValue(!w,"mobile")})};this.handleContentGrowing=function(w,x){x=$.extend({callback:$.noop,diffHeight:undefined},x);var z=x.callback;var y=x.diffHeight;LayoutManager.layoutUpdateBatch.performInstanceOperation(function(){if(v.isTrue()){OperationsManager.beginAtomicBatch();ContentPushingManager.reorderInstancesOnGrowing(w,y);z();OperationsManager.endAtomicBatch()}},w,"handleContentGrowing")};this.recalaculateSiblingsAndParentAreas=function(w){if(v.isFalse()){return}if(!(PositionManager.isElementVisible(w)&&w.canPush.isTrue()&&(ViewManager.isViewMode()||!ModeManager.updateBatch.isActive()))){return}if(!w.parentInstance||w.hasFeature(Features.PageSection)){return}var C=w.parentInstance;var B=C.childInstances;B=b(B);var y=C.getParents(true);for(var A=y.length-1;A>=0;A--){var x=y[A];t(x,ElementsLayoutHelper.getRelativeArea(x,x.parentInstance?p(x.parentInstance):undefined))}k(B);var z=m(C);if(!z){z=PositionManager.getElementsArea(B,false,ElementsLayoutHelper.getRelativeArea);r(C,z)}};this.reorderInstancesOnGrowing=function(N,A){if(v.isFalse()){return}if(!(PositionManager.isElementVisible(N)&&N.canPush.isTrue()&&(ViewManager.isViewMode()||!ModeManager.updateBatch.isActive()))){return}if(!N.parentInstance||N.hasFeature(Features.PageSection)||A===0){return}if(!A){A=0}var H=N.parentInstance;var B=H.childInstances;B=b(B);var x=i(B);ContentPushingManager.recalaculateSiblingsAndParentAreas(N);var Q=p(H);var y=m(H);B=$.sortArray(B,function(S){return p(S).top});x=$.sortArray(x,function(S){return p(S).top});var O=f(x);var M=O.instancesDependenciesMap;var K=O.instancePressureGroups;var F=O.rootsInstances;var C={};var E=0;var R=false;var P=0;var w=-Infinity;var L=false;var J=0;var z=0;$.each(B,function(W,X){var U=K[X.id];C[X.id]=undefined;var ac=p(X);var ab=M[X.id];if(U){$.each(U,function(af,ai){var ag=ai.instance;var ad=p(ag);var ae=d(ag,ag.id===N.id?A:0)+C[ag.id];var ah;if(ai.isSticky(X)){ah=ae}else{if(ac.top<=ad.bottom+ae+h){ah=$.minValue([ad.bottom+ae+h-ac.top,ae])}}if(ah!==undefined&&ah!==0){if(C[X.id]!==undefined){C[X.id]=$.maxValue([C[X.id],ah])}else{C[X.id]=ah}}});if(C[X.id]!==undefined&&C[X.id]<0){$.each(U,function(af,ai){var ag=ai.instance;var ad=p(ag);var ae=d(ag,ag.id===N.id?A:0)+C[ag.id];var ah;if(ae===0){if(ai.isSticky(X)){ah=ae}else{ah=ad.bottom+ae+h-ac.top}if(ah!==undefined){C[X.id]=$.maxValue([C[X.id],ah])}}})}if(C[X.id]===undefined){C[X.id]=0}}C[X.id]=$.valueOrDefault(C[X.id],0);var aa=C[X.id]+d(X,X.id===N.id?A:0);var V;V=ac.bottom+aa;var Y=false;var T=0;var S=Q.height-ac.bottom<=c;var Z=X.hasFeature(Features.HasText)||!X.hasFeature(Features.HasLayout)||!X.isFillVertical()||X.isType(ElementsTypes.userBox)||X.isType(ElementsTypes.TabsPanel);if(ac.top<Q.height&&Z){if(X.hasFeature(Features.HasLayout)&&X.isVerticallyDocked(LayoutManager.Layout.dockBottom)){T=n(X).bottom;S=true;if(T<0){T=-T}V+=T;Y=true;if(J<V||T<P){J=V;R=Y;P=T}}else{if(E<V&&J<V){E=V}}if(S&&(!ab||ab.dependentInstancesArray.length===0)){if(w<aa){w=aa;L=true}}else{if(aa!==0){aa=ac.bottom+aa+h-Q.height;if(w<aa&&aa>0){w=aa;L=false}}}}});if(J>E){E=J}if(w<0&&E+h>Q.height+w){w=E-Q.height+h}var G=0;if(Q.height-y.bottom<=c&&L){G=w;if(E>Q.height&&G<0){G=0}}else{if(E>Q.height-h){G=E-(Q.height-(R?0:h))}}LayoutManager.beginLayoutUpdateBatch();$.each(B,function(S,T){if(C[T.id]!==undefined){if(!T.hasFeature(Features.HasLayout)||!T.hasVerticalLayout()){ElementsLayoutHelper.moveInstances(T,{top:p(T).top+C[T.id]-ElementsLayoutHelper.getRelativeArea(T).top})}}});var D=Q.height+G-H.getSize().height;if(D!==0){var I=0;if(!H.hasFeature(Features.PageSection)&&!H.isType(ElementsTypes.page)){I=ContentPushingManager.reorderInstancesOnGrowing(H,D)}if(!H.isFillVertical()){ElementsLayoutHelper.setInstancesSize(H,{height:Q.height+G},{preserveVerticalMargins:true})}}LayoutManager.endLayoutUpdateBatch();return D};function f(D){var x={};var w={};var E={};$.each(D,function(F,H){E[H.id]=F;if(!H.hasFeature(Features.HasLayout)||(!H.isVerticallyDocked(LayoutManager.Layout.dockBottom)&&!H.isVerticallyDocked(LayoutManager.Layout.centered)&&!H.isFillVertical())){var G={area:p(H),dependentInstances:{},stickyMap:{},descendingDependentInstances:{},instance:H,id:H.id,index:F,isSticky:function(I){return G.stickyMap[I.id]}};x[H.id]=G}});$.each(D,function(F,G){if(!G.hasFeature(Features.HasLayout)||(!G.isVerticallyDocked(LayoutManager.Layout.centered)&&!G.isFillVertical())){$.each(x,function(I,K){var J=p(G);var H=K.area;if(J.top>=H.center.top&&$.areasIntersectsHorizontal(J,H)){K.dependentInstances[G.id]=(G);K.descendingDependentInstances[G.id]=(G);w[G.id]=$.valueOrDefault(w[G.id],{});w[G.id][K.id]=K}})}});for(var A=D.length-1;A>0;A--){var B=D[A];var y=w[B.id];if(y){$.each(y,function(G,H){var F=w[H.id];if(F){$.each(F,function(J,I){if(y[I.id]){delete y[I.id].dependentInstances[B.id];delete y[I.id]}})}})}}$.each(x,function(G,H){var F=$.sortArray($.getValues(H.dependentInstances),function(I){return p(I).top});H.dependentInstancesArray=F});var C=[];$.each(D,function(F,G){if(!w[G.id]||$.getKeys(w[G.id]).length===0){C.push(G);delete w[G.id]}});$.each(x,function(F,G){$.each(G.dependentInstancesArray,function(P,L){if(G.stickyMap[L.id]===undefined){var J=E[L.id];var N=p(L).top;var I=p(D[G.index]);var M=true;var K=I.bottom;var O=[];var H=G;G.stickyMap[L.id]=z(L,G)}})});return{instancesDependenciesMap:x,instancePressureGroups:w,rootsInstances:C};function z(F,L,G){var H=p(F);var K=E[F.id];var J=H.top-L.area.bottom;if((H.top-L.area.bottom<=a&&J>0)){return true}var I=false;if(L.area.center.top<H.top&&(!G||L.area.top-G.area.bottom<=a)){if(G){G.stickyMap[L.instance.id]=true}$.each(L.dependentInstances,function(M,N){if(x[N.id]&&N.id!==F.id){I=I||z(F,x[N.id],L)}return !I})}return I}}function i(w){return $.grep(w,function(x){return(!x.hasFeature(Features.HasLayout)||(!x.isVerticallyDocked(LayoutManager.Layout.centered)))})}function b(w){return $.grep(w,function(x){return x.isLocked.isFalse()&&x.isInstanceVisible()&&(!x.hasFeature(Features.HasLayout)||(!x.isFillVertical()||!x.hasFeature(Features.DataList)))})}function j(x,w){$.objectSetIfUndefined(s,x,function(){return w})}function u(w){return $.objectGet(s,w)}function q(w,x){$.objectSetIfUndefined(s,[w.id,"overlappingInstances"],function(){return x})}function t(w,x){$.objectSetIfUndefined(s,[w.id,"instanceArea"],function(){return x});$.objectSetIfUndefined(s,[w.id,"margin"],function(){return w.getPropertyValue("margin")})}function k(w){$.each(w,function(y,x){t(x,ElementsLayoutHelper.getRelativeArea(x))})}function r(w,x){$.objectSetIfUndefined(s,[w.id,"childInstancesArea"],function(){return x})}function p(w){return $.objectGet(s,[w.id,"instanceArea"])}function n(w){return $.objectGet(s,[w.id,"margin"])}function m(w){return $.objectGet(s,[w.id,"childInstancesArea"])}function g(w){return $.objectGet(s,[w.id,"overlappingInstances"])}function d(w,x){x=$.valueOrDefault(x,0);return w.getSize().height-p(w).height+x}}();var ListTagsManager=new function(){var a=this;a.createForList=function(d,p){var h=d.listId;var b=d.listName;var i={};var c;var g={};var m={};var f=SimpleEvent.createEventListener(p.itemsChangedEvent,function(r){var q=false;if(r.addedItems){$.each(r.addedItems,function(s,t){if(k(t)){var u=g[t.id]={};$.each(t.tags,function(w,v){u[v]=true;$.getOrInit(m,v,n(v)).count++;q=true})}})}if(r.removedItems){$.each(r.removedItems,function(s,t){if(g[t]!==undefined){$.each(g[t],function(u){--m[u].count;q=true});delete g[t]}})}if(r.updatedItems){$.each(r.updatedItems,function(t,u){var v=$.getOrCreateMap(g,u.id);var s=$.mapToDictionary(u.tags);$.each(v,function(w){if(!k(u)||s[w]===undefined){delete v[w];--m[w].count;q=true}});if(k(u)){$.each(s,function(w){if(v[w]===undefined){v[w]=true;$.getOrInit(m,w,n(w)).count++;q=true}})}})}if(q){c=$.getValues(m,function(s){return s.count>0}).orderByDesc(function(s){return s.count});i.tagItemsChanged.fire(i)}});i={tagItemsChanged:SimpleEvent.create(),clear:function(){c=undefined;g={};m={};f.deactivate();i.tagItemsChanged.fire(i)},itemsFetched:function(q){$.each(q,function(r,s){if(k(s)){g[s.id]=$.mapToDictionary(s.tags,function(){return true})}})},getTagFields:function(){return{tag:{type:DataSourceItemsFields.title.type,title:"Tag Name",name:"tag",isDefaultField:true},count:{type:DataSourceItemsFields.index.type,title:"Tag Count",name:"count",isDefaultField:true},link:{type:DataSourceItemsFields.link.type,title:"Tag Link",name:"link",isDefaultField:true}}},fetchTags:function(u,s,r){r=$.extend({instanceId:undefined},r);if(c!==undefined){u(c)}else{var q=l(u);if(r.instanceId&&(typeof DynamicPageElements!=="undefined")){var t=$.objectGet(DynamicPageElements,r.instanceId);if(t){q(t.content);return}}ListsService.fetchListTags(h.getValue(),b,q,s)}}};return i;function l(q){return function(r){c=[];$.each(r.items,function(t,u){var s=o(u);c.push(s);m[u.tag]=s});f.activate();q(c)}}function k(q){return q.status===1}function n(q){return o({tag:q,count:0})}function o(q){return{id:$.uniqueID(),tag:q.tag,count:+q.count,link:j(q.tag)}}function j(q){if(d.fetchType!==FetchType.RemoteCustom){return{url:{masterListPageId:d.connectedListPage,suffix:ListsManager.SupportedListTypes.tag+"/"+encodeURIComponent(q)},type:LinkTypes.Pages}}}}}();var FetchType={Local:"Local",Remote:"Remote",RemoteCustom:"RemoteCustom"};var DataLists={};var DefaultsListNames={LocalBlog:"LocalBlog"};var ListsFlags={};var ListsDefinitions={};var ListsManager=new function(){var c=this;var b={};var a={};c.Fields={Id:"id",Title:"title",Content:"content",UrlAlias:"urlAlias",Status:"status",Tags:"tags",MetaData:"metaData"};c.Events={ListCreated:SimpleEvent.createNamedEvents(),ListRemoved:SimpleEvent.createNamedEvents()};c.CommonFiltersNames={All:"All",Published:"Published",Drafts:"Drafts"};c.CommonFilters={All:[],NotCurrentItem:function(d){return[FilterUtils.Filters.NotFilter({fieldName:c.Fields.Id,value:d})]},Published:[FilterUtils.Filters.EqualFilter({fieldName:c.Fields.Status,value:1})],Drafts:[FilterUtils.Filters.EqualFilter({fieldName:c.Fields.Status,value:0})],ByTag:function(d){return[FilterUtils.Filters.EqualFilter({fieldName:c.Fields.Tags,value:d})]}};c.SupportedListTypes={page:"page",tag:"tag",category:"category"};c.getListByName=function(d){return DataLists[d]};c.createOrGetListFlag=function(f){var d=ListsFlags[f];if(!d){d=ObservableFlag.create(false);ListsFlags[f]=d}return d};c.initialize=function(d){if(d){$.each(d,function(f,g){a[f]=ObservableFlag.create(!SiteManager.isExistingSite()||SiteManager.isResetTemplateMode());c.registerNewListInstance(g)})}SimpleEvent.createEventListener(PageManager.Events.ListPageEntered,function(f){if(UrlManager.Flags.inUrlChange.isFalse()&&ViewManager.isViewMode()){var g=ListsManager.getListByName(f);var h=g.currentDisplayedPage.setValue(1);if(g.currentListType!==""||h){g.currentListType="";g.primaryListChanged.fire()}}}).activate()};c.createSorter=function(f,d){return{sortBy:f,sortType:d?"asc":"desc"}};c.registerListDefinition=function(d){$.each(d,function(g,h){var f={};$.each(h,function(i,j){if($.isFunction(j)){f[i]=$.quickProxy(j,h)}else{f[i]=j}});f.Fields=$.extend(ListsManager.Fields,f.Fields);if(f.CommonFilters){$.each(f.CommonFilters,function(i,j){ListsManager.CommonFilters[i]=j;ListsManager.CommonFiltersNames[i]=i})}ListsDefinitions[g]=f})};c.handleListPageLoading=function(f,d,i){var j=ListsManager.getListByName(f.masterPageListName||f.pageListName);var h=UrlManager.getFragmentParts();if(f.masterPageListName){var k=1;var m="";if(h.length>1){var g=h[1].toLowerCase();$.withObject(ListsManager.SupportedListTypes,function(p){switch(g){case p.page:var o=h[2];if(o&&MathUtils.isPositive(o)){k=+o}break;case p.tag:var q=h[2];if(q!==undefined){j.currentDisplayedTag.setValue(decodeURIComponent(q));if(h[3]===p.page){o=h[4];if(o&&MathUtils.isPositive(o)){k=+o}}m=p.tag}break}})}var l=j.currentListType;j.currentListType=m;var n=j.currentDisplayedPage.setValue(k);if(l!==""||m!==""||n){j.primaryListChanged.fire()}d()}else{if(f.pageListName){j.refreshListItem(h[1],function(){d()},function(){i(j.getListPageId())})}}};c.isListPage=function(d){return d.masterPageListName||d.pageListName};c.getListPageTitle=function(g){var f=ListsManager.getListByName(g.masterPageListName||g.pageListName);if(g.masterPageListName){return f.getPageTitle(g)}else{if(g.pageListName){var d=f.currentDisplayedItem.getValue();return d.title}}};c.getListPageIdByFragment=function(g,i){var d=i?i.split("/"):[];var f=d[1];if(f&&!ListsManager.SupportedListTypes[f.toLocaleLowerCase()]){var h=ListsManager.getListByName(g.masterPageListName);return h.getDynamicPageId(f)}return g.id};c.createNewList=function(g,k,j,d,h){j=$.extend({listName:undefined,isExternal:false,listPageName:"Blog Page",listPageTitle:"",dynamicPageName:"Dynamic Post Page",dynamicPageTitle:""},j);PageManager.PagesUpdatingOperation.start();var f=PageManager.addPageFromHierarchy(TemplatesCache.getTemplateHiererachy(g),undefined,{title:j.dynamicPageName,pageTitle:j.dynamicPageTitle,pageListName:j.listName});var i=PageManager.addPageFromHierarchy(TemplatesCache.getTemplateHiererachy(k),undefined,{title:j.listPageName,pageTitle:j.listPageTitle,masterPageListName:j.listName});var l={listId:PageData.defaultBlog,listName:j.listName,isExternal:false,defaultDynamicPageId:f,connectedListPage:i,connectedDynamicPages:[f]};PageManager.PagesUpdatingOperation.finish();a[l.listName]=ObservableFlag.create(true);c.registerNewListInstance(l);PageManager.switchPage(i,{afterCurrentPageDetached:function(){ListsManager.Events.ListCreated.fire(l.listName)}});d()};c.getListsInformationForSaving=function(){return b};c.getListNamesToCreate=function(){return $.getKeys(a,function(d){return d.isTrue()})};c.isListTemplate=function(d){return a[d]&&a[d].isTrue()};c.deleteList=function(h,f,g){var i=ListsManager.getListByName(h);delete DataLists[h];ListsManager.createOrGetListFlag(h).setFalse();var d=i&&i.getListInfo();if(!d){f()}else{i.dispose();PageManager.PagesUpdatingOperation.start();if(d.connectedDynamicPages){$.each(d.connectedDynamicPages,function(k,j){PageManager.removePage(j)})}if(d.connectedListPage){PageManager.removePage(d.connectedListPage)}delete a[h];delete b[h];PageManager.PagesUpdatingOperation.finish();ListsManager.Events.ListRemoved.fire(h);f()}};c.registerNewListInstance=function(f){var d=f.listName;DataLists[d]=c.createListInstance(f);ListsManager.createOrGetListFlag(d).setTrue();b[d]=f;return DataLists[d]};c.createListInstance=function(h){h=$.extend({listId:undefined,listName:undefined,fetchType:FetchType.Remote},h);var j={};var f=h.listName;h.listId=ObservableObject.createNumerical(h.listId,{valueChangeCallback:function(p){b[f].listId=p;a[h.listName].setFalse();k.clear()}});var l;var m=ListsDefinitions[f];var n=i();if(h.fetchType==FetchType.Remote){l=new RemoteSet({fetchingFunction:function(p,s,r,q){ListsService.fetchItemData(j.currentListId.getValue(),f,p,s,r,q)},insertionFunction:function(p,s,r,q){ListsService.saveListItems(j.currentListId.getValue(),f,p,function(t){j.currentListId.setValue(t.listId);s(t.postIds)},r,$.extend({createNewList:a[h.listName].isTrue()},q))},removingFunction:function(p,s,r,q){ListsService.deleteListItems(j.currentListId.getValue(),f,p,function(t){j.currentListId.setValue(t.listId);s(t.deletedIds)},r,$.extend({createNewList:a[h.listName].isTrue()},q))},converter:n})}var o=CollectionObserver.create(l);var k=ListTagsManager.createForList(h,o);var g=SimpleEvent.createEventListenersGroup();j={currentListType:"",currentListId:h.listId,currentDisplayedItem:ObservableObject.create(undefined,{valueChangeCallback:function(q){DataSources[f].refreshItem(q);var p=PageManager.getCurrentPage();if(p&&PageManager.getPageData(p.id).pageListName===f){p.refreshPageMetaData()}}}),currentDisplayedTag:ObservableObject.create(undefined),currentDisplayedPage:ObservableObject.createNumerical(1),primaryListChanged:SimpleEvent.create(j,{beforeFireEvent:function(){var p=PageManager.getCurrentPage();if(p&&PageManager.getPageData(p.id).masterPageListName===f){p.refreshPageMetaData()}}}),tagItemsChanged:k.tagItemsChanged,getSetObserver:function(){return o},getFieldsConverter:function(){return n},initialize:function(){DataSourcesManager.loadDataSource(DataSourcesDefinitions.ListItemView,f,undefined,"");if(Global.IsDesigner){var p=j.getDefaultItem();SimpleEvent.createEventListener(Modes.PreviewMode.modeFinished,function(){j.currentDisplayedItem.setValue(p);j.currentListType="";j.primaryListChanged.fire()}).addToGroup(g);SimpleEvent.createEventListener(SiteManager.SiteSavedEvent,function(r){var q=$.objectGet(r,["newLists",f]);if(q){j.currentListId.setValue(q)}}).addToGroup(g);SimpleEvent.createEventListener(Modes.PreviewMode.modeStarted,function(){j.currentDisplayedPage.setValue(1)}).addToGroup(g)}g.activateAndExecuteAll()},dispose:function(){g.disposeAll()},getListName:function(){return f},createCollectionView:function(p){$.quickExtend(p,{onItemsFetchedCallback:function(q){k.itemsFetched(q)}});return SetView.create(j,p)},clear:function(){l.clear()},fetchItemById:function(s,r,q,p){l.getItems({id:s},r,q,p)},fetchItemByAlias:function(r,s,q,p){l.getItems({alias:r},s,q,p)},removeItems:function(p,s,r,q){q=$.extend({defaultMode:false},q);q.fireEvents=!q.defaultMode||j.currentListId.getValue()===PageData.defaultBlog;l.removeItems($.makeArray(p),s,r,q)},saveItems:function(q,s,r,p){p=$.extend({defaultMode:false},p);p.fireEvents=!p.defaultMode||j.currentListId.getValue()===PageData.defaultBlog;l.saveItems(q,s,r,p)},fetchTags:function(r,q,p){k.fetchTags(r,q,p)},getListInfo:function(){return h},refreshListItem:function(t,q,s){var r=PageData.dynamicPageInformation;if(r&&r.id===t){p(n.getterMapper(r)[0])}else{j.fetchItemByAlias(t,function(u){p(u.fetchedItems[0])},s)}function p(u){j.currentDisplayedItem.setValue(u);q(u)}},getDefaultItem:function(p){return $.extend({metaData:{}},m.getDefaultItem(p),{isDummy:$.returnTrue})},getDynamicPageId:function(p){return $.valueOrDefault(h.itemsMap&&h.itemsMap[p],h.defaultDynamicPageId)},getListPageId:function(){return h.connectedListPage},getPageLink:function(p){if(h.fetchType!==FetchType.RemoteCustom){var q=j.currentListType;$.withObject(ListsManager.SupportedListTypes,function(r){switch(j.currentListType){case r.tag:q+="/"+encodeURIComponent(j.currentDisplayedTag.getValue())+"/";break;case r.category:q+="/"+j.currentDisplayedTag.getValue()+"/";break}});return{url:{masterListPageId:h.connectedListPage,suffix:q+(p>1?ListsManager.SupportedListTypes.page+"/"+p:"")},type:LinkTypes.Pages}}},getPageTitle:function(q){var p=(q.pageTitle||q.title);$.withObject(ListsManager.SupportedListTypes,function(s){switch(j.currentListType){case s.tag:p+=" | "+j.currentDisplayedTag.getValue();break;default:var r=j.currentDisplayedPage.getValue();p+=(r>1?" | Page "+r:"");break}});return p},getTagFields:function(){return k.getTagFields()},getAvailableFields:function(){return $.extend({order:{type:DataSourceItemsFields.index.type,title:"Index",name:"order",isDefaultField:true},title:{type:DataSourceItemsFields.title.type,title:"Title",name:"title",isDefaultField:true},content:{type:DataSourceItemsFields.description.type,title:"Content",name:"content",isDefaultField:true},itemLink:{type:DataSourceItemsFields.link.type,title:"Post Link",name:"itemLink",isDefaultField:true}},m.getAvailableFields())}};j.initialize();return j;function i(){var p=m.createFieldsConverter();return{setterMapper:function(r){r=$.makeArray(r);var q=[];$.withObject(ListsManager.Fields,function(s){$.each(r,function(t,u){var v={};v[s.Id]=u.id;v[s.Title]=u.title;v[s.Content]=u.content;v[s.UrlAlias]=u.urlAlias;v[s.Status]=u.status;v[s.Tags]=u.tags;v[s.MetaData]=u.metaData;q.push($.extend(v,p.setterMapper(u)))})});return q},getterMapper:function(r){r=$.makeArray(r);var q=[];$.withObject(ListsManager.Fields,function(s){$.each(r,function(t,u){var v={id:u[s.Id],title:u[s.Title],content:u[s.Content],urlAlias:u[s.UrlAlias],status:u[s.Status],tags:u[s.Tags],metaData:u[s.MetaData]};$.extend(v,p.getterMapper(v,u));$.extend(v,{itemLink:d(v),isDummy:$.returnFalse,order:t});q.push(v)})});return q}}}function d(p){if(h.fetchType!==FetchType.RemoteCustom){return{url:{masterListPageId:h.connectedListPage,suffix:p.urlAlias},type:LinkTypes.Pages}}}}}();var FontIconsManager=new function(){this.PublicIcons=new ObservableCollection({idFunction:$.uniqueID});var a={};this.initialize=function(){FontIconsManager.registerIconsCollection(WzPublicIcons)};this.registerIconsCollection=function(d){d=$.extend({name:undefined,fontClass:undefined,icons:{}},d);var b=d.name;a[b]=d;var c=d.icons;FontIconsManager.PublicIcons.put($.map(c,function(f,g){return{collectionName:b,iconName:g}}))};this.applyIcon=function(c,b){var d=FontIconsManager.resolveIcon(b);if(d){c.each(function(){this.innerHTML="&#x{0};".format(d.code)});c.addClass(d.fontClass)}};this.createIconReference=function(b,c){return{collectionName:b,iconName:c}};this.resolveIcon=function(b){if(b){b=$.extend({collectionName:undefined,iconName:undefined},b);var c=b.collectionName;var g=b.iconName;var f=a[c];if(f){var d=f.icons[g];if(d){return{fontClass:f.fontClass,code:d.code}}}}return undefined}}();var SocialLinksManager=new (function(){var c=this;var b={1:{twitter:{link:" https://twitter.com/Webzai",feedAppId:""},facebook:{link:" https://facebook.com/Webzai"},googlePlus:{link:" http://plus.google.com/104217034959046240474"}},2:{twitter:{link:"https://twitter.com/siteliohelp",feedAppId:"568441556601163776"},facebook:{link:"https://facebook.com/sitelio"},googlePlus:{link:"http://plus.google.com/+Sitelio"}},3:{twitter:{link:"https://twitter.com/webbuildhelp",feedAppId:"568441919328751616"},facebook:{link:"http://www.facebook.com/websitebuilderofficial"},googlePlus:{link:"http://plus.google.com/+Websitebuilderofficial"}},5:{twitter:{link:"https://twitter.com/siteyhelp",feedAppId:"568442131019472896"},facebook:{link:"https://www.facebook.com/pages/Sitey/1460815124178150"},googlePlus:{link:"https://plus.google.com/+Sitey"}},6:{twitter:{link:"https://twitter.com/sitebuilderhelp",feedAppId:"580704471723950080"},facebook:{link:"https://www.facebook.com/sitebuilderofficial"},googlePlus:{link:"https://plus.google.com/102807070514589490248/about"}}};this.DefaultLinks=DeferredObject.create(function(){return{facebook:{type:"facebook",title:"Facebook",url:c.getBrandSocialDefaultLink("facebook"),popular:true},googlePlus:{type:"googlePlus",title:"Google+",url:c.getBrandSocialDefaultLink("googlePlus"),popular:true},twitter:{type:"twitter",title:"Twitter",url:c.getBrandSocialDefaultLink("twitter"),popular:true},linkedin:{type:"linkedin",title:"LinkedIn",url:"http://www.linkedin.com",popular:true},pinterest:{type:"pinterest",title:"Pinterest",url:"http://www.pinterest.com",popular:false},reddit:{type:"reddit",title:"Reddit",url:"http://www.reddit.com",popular:false},instagram:{type:"instagram",title:"Instagram",url:"http://www.instagram.com",popular:false},youtube:{type:"youtube",title:"Youtube",url:"http://www.youtube.com",popular:false},flickr:{type:"flickr",title:"Flickr",url:"http://www.flickr.com",popular:false},soundCloud:{type:"soundCloud",title:"SoundCloud",url:"http://www.soundcloud.com",popular:false},tripAdvisor:{type:"tripAdvisor",title:"Trip Advisor",url:"http://www.tripadvisor.com",popular:false},picasa:{type:"picasa",title:"Picasa",url:"http://www.picasa.com",popular:false},behance:{type:"behance",title:"Behance",url:"http://www.behance.com",popular:false},etsy:{type:"etsy",title:"Etsy",url:"http://www.etsy.com",popular:false},tumblr:{type:"tumblr",title:"Tumblr",url:"http://www.tumblr.com",popular:false},dribbble:{type:"dribbble",title:"Dribbble",url:"http://www.dribbble.com",popular:false},vimeo:{type:"vimeo",title:"Vimeo",url:"http://www.vimeo.com",popular:false},vk:{type:"vk",title:"VK",url:"http://www.vk.com",popular:false},renren:{type:"renren",title:"Renren",url:"http://www.renren.com",popular:false},weibo:{type:"weibo",title:"Weibo",url:"http://www.weibo.com",popular:false}}});this.Types={Facebook:"facebook",GooglePlus:"googlePlus",Twitter:"twitter",Linkedin:"linkedin",Pinterest:"pinterest",Youtube:"youtube",Reddit:"reddit",Instagram:"instagram",Tumblr:"tumblr",SoundCloud:"soundCloud",Behance:"behance",TripAdvisor:"tripAdvisor",Dribbble:"dribbble",Flickr:"flickr",Picasa:"picasa",Etsy:"etsy",Vimeo:"vimeo",Vk:"vk",Renren:"renren",Weibo:"weibo"};var a=new ObservableCollection({idFunction:function(){return this.id}});this.SocialLinksCollection=a;this.SocialLinksCollectionObservable=CollectionObserver.create(a);this.initialize=function(){var d=this.getAllLinks();$.each(d,function(h,f){var g={id:f.type,iconType:f.type,title:f.title,link:{url:f.url,type:LinkTypes.Web}};c.SocialLinksCollection.put(g)})};this.getLink=function(d){return SiteSettingsManager.getValue(d+"SocialLinkId",c.DefaultLinks.get()[d])};this.setLink=function(d,f,g){SiteSettingsManager.setValue(d+"SocialLinkId",f,{onSuccess:g,onError:$.noop})};this.getAllLinks=function(){var d={};$.each(SocialLinksManager.Types,function(f,g){d[g]=SocialLinksManager.getLink(g)});return d};this.getBrandSocialDefaultLink=function(g,f){var h=ApplicationManager.getBrand();if(h===undefined){h=1}var d;d=b[h][g].link;if(f){d=d.substr(d.lastIndexOf("/")+1)}return d};this.getBrandTwitterFeedAppId=function(){var d=ApplicationManager.getBrand();if(d===undefined){d=1}return b[d]["twitter"].feedAppId}})();var NavigationManager=new function(){var f=this;var c={};var b={};this.initialize=function(){};this.registerNavigationDefinition=function(k){$.each(k,function(l,m){b[l]=m})};this.getNavigations=function(){return b};function h(m,l){var k=b[m];return $.extend({type:m,initialize:$.noop,open:$.noop,close:$.noop,controller:l},k)}this.createNavigationController=function(m){var l={};var k=h(m,l);$.extend(l,{id:$.uniqueID(),navigation:k,isInitialized:false,data:{},isOpened:ObservableFlag.create(false),open:d,close:j,remove:i,replaceNavigation:a});c[l.id]=l;return l};function a(l){var k=this;var m;if(k.isOpened.isTrue()){m=$.extend({},k.lastOptions,{animate:false});k.close({animate:false})}k.navigation=h(l,k);if(k.isInitialized){k.navigation.initialize()}if(m){k.open(m)}}function d(l){var k=this;if(k.isOpened.isFalse()){g(k);l=$.extend({$element:undefined,animate:true,disableDeactivation:false,disableLink:false,navigationProperties:undefined,pages:PageManager.NavigatablePagesInformation,pagesHierarchy:PageManager.NavigatableHierarchy,animationCompleteCallback:$.noop,selectedPageId:PageManager.getCurrentPageId()},l,{navigationProperties:$.extend(k.navigation.getDefaultProperties(),l.navigationProperties)});k.lastOptions=l;k.navigation.open(l);k.isOpened.setTrue()}}function g(k){if(!k.isInitialized){k.navigation.initialize();k.isInitialized=true}}function j(l){var k=this;if(k.isOpened.isTrue()&&!k.inClosing){k.inClosing=true;l=$.extend({animate:true,animationCompleteCallback:$.noop},l);k.navigation.close(l);k.isOpened.setFalse();delete k.inClosing}}function i(){this.close({animate:false});delete c[this.id]}}();(function(){var a={Date:"date",CoverImage:"coverImage",Blurb:"blurb",Author:"author",Pinned:"pinned",Featured:"featured",CoverImageDescription:"coverImageDescription"};ListsManager.registerListDefinition({LocalBlog:{Fields:a,CommonFilters:{Pinned:[FilterUtils.Filters.EqualFilter({fieldName:a.Pinned,value:true})],Featured:[FilterUtils.Filters.EqualFilter({fieldName:a.Featured,value:true})]},getDefaultItem:function(b){return{title:b?"":"This is the post title",blurb:"This is the post summary",date:moment().format("YYYY/MM/DD"),coverImage:{imageUrl:DesignerManager.getDefaultImage()},author:b?WebzaiController.getCurrentUserName():"This is the post author",content:"This is the post content",tags:[],pinned:false,featured:false,status:1}},getAvailableFields:function(){return{date:{type:DataSourceItemsFields.date.type,title:"Date Created",name:"date"},coverImage:{type:DataSourceItemsFields.image.type,title:"Cover Image",name:"coverImage",isDefaultField:true},blurb:{type:DataSourceItemsFields.description.type,title:"Summary",name:"blurb",isDefaultField:true},author:{type:DataSourceItemsFields.title.type,title:"Author",name:"author"},coverImageDescription:{type:DataSourceItemsFields.description.type,title:"Cover Image Description",name:"coverImageDescription"}}},createFieldsConverter:function(){return{setterMapper:function(b){var c={};c[a.Date]=b.date;c[a.CoverImage]=b.coverImage;c[a.Blurb]=b.blurb;c[a.Author]=b.author;c[a.Pinned]=b.pinned;c[a.Featured]=b.featured;c[a.CoverImageDescription]=b.coverImageDescription;return c},getterMapper:function(c,b){return{date:b[a.Date],coverImage:b[a.CoverImage],blurb:b[a.Blurb],author:b[a.Author],pinned:b[a.Pinned],featured:b[a.Featured],coverImageDescription:b[a.CoverImageDescription]}}}}}})})();var NavigationUtils=new function(){this.createCssRules=function(b){var a={};return{rule:function(c,f){var d=a[c];if(!d){d=a[c]=$.rule("."+b+" "+c+" {}")}d.css(f)}}};this.calculateAdjustBrightnessSign=function(a,c){var b=$.getCoordinateValue(a,ColorCoordinate.Brightness);return $.adjustFraction((b+c),3)>1?-1:1}}();(function(){var b=PanelsManager.createDeferredPanel(function(){return PanelsManager.createPanel(SlideNavigationPanel)});function a(){var c=ElementsManager.getAllPageInstances();return $.map(c,function(d){if(d.isFixed()&&PositionManager.isElementVisible(d)){return d}})}NavigationManager.registerNavigationDefinition({SlideNavigation:{initialize:function(){var c=this;c.panel=PanelsManager.usePanel(b);var d=[];if(Global.IsDesigner){var f=TopHeader.getElement();d.push(f)}c.ignoredOutsideElementsFilters=d},open:function(i){i=$.extend({$element:undefined,animate:true,disableDeactivation:false,disableLink:false,navigationProperties:undefined,pages:undefined,pagesHierarchy:undefined,selectedPageId:undefined,instanceId:undefined,animationCompleteCallback:$.noop,closeAnimationCompleteCallback:$.noop},i);var f=this;var n=f.panel;var g=FreemiumBanners.getFooterHeight();var r=0;var h=g;var x=ViewManager.getBodyElement();var A;if(Global.IsDesigner){h=0;var p=DesignerManager.getDesignerAreaCoordinates();var y=p.top;if(MobileVersionViewManager.Flags.IsInMobileContext.isTrue()){A=function(){var E=DesignerManager.ResponsiveViewPort.getValue();return{width:E,height:ViewMobileWrapperMode.MobileViewHeight}}}else{if(ViewManager.isDesignMode()){A=function(){var E=$.calculateWindowSize();var F=DesignerManager.calculateDesignerArea();return{width:Math.max(E.width-p.left-p.right,F.width),height:E.height-y}}}else{r=y;A=function(){var E=$.calculateWindowSize();return{width:E.width,height:E.height-y-g}}}}}else{A=function(){var E=$.calculateWindowSize();return{width:E.width,height:E.height-g}}}var s=A();var j=$.extend({},i.navigationProperties,{pages:i.pages,pagesHierarchy:i.pagesHierarchy,selectedPageId:i.selectedPageId,disableLink:i.disableLink,maxSize:s,instanceId:i.instanceId});n.$element.appendTo("body");n.activate(j);var c=SimpleEvent.createEventListener($.getWindowSizeEvent(),function(){c.dispose();c=undefined;f.closePanel(false);f.open($.extend({},i,{animate:false,animationCompleteCallback:$.noop}))});var w=ObservableFlag.create(false,{valueChangeCallback:function(){n.refresh();i.animationCompleteCallback();if(c){c.activate()}}});var t=$.getScrollOffset();var v={animate:i.animate,direction:j.direction,pushContent:j.pushContent,duration:j.animationSpeed,scrollingOffset:t,frameTop:r,frameBottom:h,placeHolderSize:s,animationCallback:function(){w.setTrue()}};var u;if(!ViewManager.isDesignMode()){if(j.pushContent){var d=ViewManager.getBodyElementWrapper();var o=a();if(o.length>0){u=[];$.each(o,function(H,E){var F=E.$element;var K=PositionManager.getElementArea(E,true);var G=$("<div></div>").insertAfter(F);u.push({$element:F,$placeHolder:G,style:F.attr("style")});var J=F.css("top");var I=F.css("bottom");if(J!=="auto"&&r!==0){F.css("top",parseInt(J)-r)}if(I!=="auto"&&g!==0){F.css("bottom",parseInt(I)-g)}F.appendTo(d).addClass("animation-fixed")})}}if(i.animate&&j.duration!==0){var k=x.offset();var q=k.top+t.top;var m=q+s.height;var D=ElementsManager.getAllPageInstances()}}var l=$.rememberScrolling();$.getScrollingController().$scrollableForWrite.scrollTop(0);var z=SlideEffect.animate(n.$element,v);var C=SimpleEvent.createEventListenersGroup();function B(){var E=u?false:true;f.controller.close({animate:E,restoreScrolling:false})}if(!i.disableDeactivation){SimpleEvent.createEventListener(n.requestDeactivationEvent,function(E){if(E){B()}else{f.controller.close()}}).addToGroup(C);SimpleEvent.createEventListener(PageManager.Events.PageChanging,B).addToGroup(C);SimpleEvent.createEventListener(ViewManager.Events.ViewModeChanged,function(){f.controller.close({animate:false})}).addToGroup(C);n.deactivateOnClickOutside({ignoredElementsFilters:f.ignoredOutsideElementsFilters})}C.activateAll();f.closePanel=function(F,G,E){C.disposeAll();if(c){c.dispose();c=undefined}z.close({animate:F,closingCallback:function(){if(u){$.each(u,function(H,I){I.$element.removeClass("animation-fixed").setStyleAttr(I.style);I.$element.insertBefore(I.$placeHolder);I.$placeHolder.remove()})}},closeCallback:function(){if(E){l.restore()}n.deactivate();if(G){G()}i.closeAnimationCompleteCallback()}})}},close:function(c){c=$.extend({animate:true,animationCompleteCallback:$.noop,restoreScrolling:true},c);this.closePanel(c.animate,c.animationCompleteCallback,c.restoreScrolling)},getDefaultProperties:function(){return{direction:"left",width:250,height:400,animationSpeed:400,hierarchyOpened:false,useHierarchy:true,pushContent:false,backgroundColor:{mainColor:1,opacity:1,brightness:0},fontColor:{mainColor:3,opacity:1,brightness:0},fontSize:16,font:{themeFont:"heading1"}}}}})})();(function(){var h;var i;var c;var f;var g=Initializer.create(function(){i=DeferredObject.create(function(){return $.createDropPanelWindow(DropDownNavigationDesktopPanel.createPanel(),{appendTo:PageManager.getPageBody(),contextClass:"drop-down-navigation",isDraggable:false,stackWithWindows:false,placeInsideWindow:false,hidingFunctionBeforeShowing:$.noop,closeCallback:function(){f.controller.close()}})});c=DeferredObject.create(function(){return NavigationManager.createNavigationController("SlideNavigation")});h=[".drop-down-navigation"];if(Global.IsDesigner){h.push(TopHeader.getElement())}});NavigationManager.registerNavigationDefinition({DropDownNavigation:{initialize:function(){g.execute()},open:function(l){l=$.extend({$element:undefined,animate:true,disableDeactivation:false,disableLink:false,navigationProperties:undefined,pages:undefined,pagesHierarchy:undefined,selectedPageId:undefined,rootPageId:undefined,instanceId:undefined,animationCompleteCallback:$.noop,closeAnimationCompleteCallback:$.noop,openCallback:$.noop,isVertical:false,mouseEnteredCallback:$.noop,mouseLeaveCallback:$.noop},l);var j=this;if(MobileVersionViewManager.Flags.IsInMobileContext.isTrue()){var y=c.get();var E=l.navigationProperties;var A=$.extend({},l,{navigationProperties:{direction:E.mobileDirection,width:E.mobileWidth,pushContent:false,height:E.mobileHeight,animationSpeed:E.animationSpeed,hierarchyOpened:E.hierarchyOpened,useHierarchy:E.useHierarchy,backgroundColor:E.backgroundColor,fontColor:E.fontColor,fontSize:E.fontSize,font:E.font}});y.open(A);y.isOpened.once(false,function(){j.controller.close()});j.closingFunction=function(F){y.close(F)}}else{var t=i.get();t.close();f=j;var u=l.$element;var p=l.closeAnimationCompleteCallback;var r=ObservableFlag.createConditionalNegative({valueChangeCallback:function(F){if(F){l.mouseEnteredCallback()}else{l.mouseLeaveCallback()}}});var m=$.extend({},l.navigationProperties,{pages:l.pages,pagesHierarchy:l.pagesHierarchy,selectedPageId:l.selectedPageId,disableLink:l.disableLink,instanceId:l.instanceId,rootPageId:l.rootPageId,mouseEnteredFlag:r});var n=h.clone();n.push(u);var w;var v;var s;if(l.isVertical){var q=a();var o=u.getArea();var D=m.orientation==="right"?[{side:Side.Right,alignTo:Side.Left,distance:m.horizontalDistance},{side:Side.Left,alignTo:Side.Right,distance:m.horizontalDistance}]:[{side:Side.Left,alignTo:Side.Right,distance:m.horizontalDistance},{side:Side.Right,alignTo:Side.Left,distance:m.horizontalDistance}];w={horizontals:D,verticals:[{side:Side.Top,alignTo:Side.Top,distance:m.verticalTop}]};v=function x(F){C=d[F]}}else{var k=m.horizontalPosition;var D={side:k,alignTo:k};if(k===Side.Left){D.distance=m.horizontalLeft}else{if(k===Side.Right){D.distance=m.horizontalRight}}w={horizontals:[D],verticals:[{side:Side.Top,alignTo:Side.Bottom,distance:m.verticalDistance},{side:Side.Bottom,alignTo:Side.Top,distance:m.verticalDistance}]};s=function x(F){C=d[F]}}var C;var z=b({positioningAlignments:w,positionHorizontalCallback:v,positionVerticalCallback:s});t.open(u,{positioningFunction:z,activationArgs:m,deactivateOnClickOutside:!l.disableDeactivation,ignoredElementsFilters:n,showingFunction:function(G,F){F.positioned();l.openCallback(G);if(l.animate&&m.animationSpeed!==0){Effects.slideIn(G,{duration:m.animationSpeed,direction:C,easing:"swing",complete:function(){l.animationCompleteCallback()}})}else{l.animationCompleteCallback()}}});var B=SimpleEvent.createEventListenersGroup();if(!l.disableDeactivation){SimpleEvent.createEventListener(PageManager.Events.PageChanging,function(){j.controller.close()}).addToGroup(B);SimpleEvent.createEventListener(ViewManager.Events.ViewModeChanged,function(){j.controller.close({animate:false})}).addToGroup(B)}B.activateAll();j.closingFunction=function(F){B.disposeAll();t.close();F.animationCompleteCallback();p()}}},close:function(j){j=$.extend({animate:true,animationCompleteCallback:$.noop},j);this.closingFunction(j)},getDefaultProperties:function(){return{width:150,spacing:20,mobileHeight:400,mobileDirection:"left",mobileWidth:250,animationSpeed:400,useHierarchy:true,hierarchyOpened:false,backgroundColor:{mainColor:1,opacity:1,brightness:0},fontColor:{mainColor:3,opacity:1,brightness:0},fontSize:15,borderRadius:0,borderWidth:0,borderColor:{mainColor:1,opacity:1,brightness:0},orientation:"center",horizontalPosition:Side.Center,horizontalLeft:0,horizontalRight:0,verticalDistance:0,horizontalDistance:0,verticalTop:0,innerDistance:0,font:{themeFont:"heading1"},useSkinButton:false,showDropDownArrow:true}}}});var a=function(){return PageManager.getCurrentPage().getArea(true)};var d={"1":"down","2":"up","3":"right","4":"left"};function b(l){l=$.extend({positioningAlignments:undefined,positionCallback:undefined,positionHorizontalCallback:undefined,positionVerticalCallback:undefined},l);var k=l.positioningAlignments;var j=$.buildPositioningFunction(a);$.each(k.horizontals,function(o,n){var m={distance:n.distance,usageCallback:function(p){if(l.positionHorizontalCallback){l.positionHorizontalCallback(n.side===Side.Left?Position.Right:Position.Left)}}};j.alignHorizontally(n.side,n.alignTo,m)});$.each(k.verticals,function(o,n){var m={distance:n.distance,usageCallback:function(p){if(!p.isPositioned){if(n.side===Side.Top){if(n.alignTo===Side.Top){p.$element.css("height",p.positioningArea.height-p.relativeArea.top+p.positioningArea.top)}else{p.$element.css("height",p.positioningArea.height-p.relativeArea.top+p.positioningArea.top-p.relativeArea.height)}}else{if(n.alignTo===Side.Top){p.$element.css("height",p.relativeArea.top-p.positioningArea.top)}else{p.$element.css("height",p.relativeArea.top-p.positioningArea.top+p.relativeArea.height)}}}if(l.positionVerticalCallback){l.positionVerticalCallback(n.side===Side.Top?Position.Bottom:Position.Top)}}};j.alignVertically(n.side,n.alignTo,m)});return j}})();var DropDownNavigationDesktopPanel=new function(){var j={Panel:{group:"drop-down-navigation-desktop-panel-templates",name:"drop-down-navigation-desktop-panel-template",isSimple:true},PageItem:{group:"drop-down-navigation-desktop-panel-templates",name:"page-item-template",isSimple:true},PageItemInstance:{group:"drop-down-navigation-desktop-panel-templates",name:"page-item-instance-template",isSimple:true}};this.createPanel=function(){return i(0)};var g=$.browser.msie&&parseInt($.browser.version)<9?"backgroundColor":"rgbaBackground";var c={};var b={collectionName:"public-font-icons",iconName:"angle-left"};var d={collectionName:"public-font-icons",iconName:"angle-right"};function i(l){var k=c[l];if(!k){k=c[l]=PanelsManager.createController(h({level:l}))}return k}var f=NavigationUtils.createCssRules("drop-down-navigation-desktop-panel");var a=NavigationUtils.createCssRules("drop-down-navigation-desktop-panel-1");function h(z){z=$.extend({level:0},z);var p=PanelsManager.createBaseController();var l=[];var y=$.useTemplate(j.Panel,{level:z.level.toString()});var q=$(".pages-list",y);var s=$(".border-box",y);var k=$(".content-container",y);if(z.level===0){y.on("mouseenter",function(){w(p.currentActivationArgs.mouseEnteredFlag,true)}).on("mouseleave",function(){w(p.currentActivationArgs.mouseEnteredFlag,false)})}var v;var u;var x=q.makeItemsList({idFunction:$.defaultIdFunction,itemCreationFunction:function(K,E){var B=p.currentActivationArgs;var C=B.selectedPageId==K.id;var F;if(B.useSkinButton){F=$.useTemplate(j.PageItemInstance);var I=F.find(".instance-content");E.data.$openContext=I;var G=B.createInstanceController(K,B.rootPageId==K.id);G.appendTo(I);var J=G.getInstance();if(!B.pagesHierarchy.hasChildren(K.id)){J.setPropertyValue("urlAddress",{url:K.id,type:LinkTypes.Pages})}J.instanceController.initializeFlag.onceTrue(function(){J.setNeverSelectedInClick(true);J.getSkinInstance().setNeverSelectedInClick(true);if(C&&ViewManager.isViewMode()){ElementsManager.performOnInstancesInitialization(J.id,function(){J.getSkinInstance().userSelect(true)})}if(!u){var L=J.getSkinInstance().getInstancesByField("title")[0];if(L){var M=L.getPropertyValue("fontColor");var O=TextStyleManager.getElementTextStyle(L);if(!M&&O){M=O.color}if(M){M=ThemeColorsManager.evaluateColorBinding(M,true)}var N=L.getPropertyValue("fontSize");if(!N&&O){N=O.fontSize}y.css({color:M,fontSize:N+"px"});u=true}}});J.showElement();if(!v){v=G.getSize()}E.data.instanceController=G}else{F=$.useTemplate(j.PageItem,K);E.data.$openContext=F;if(C){F.addClass("state-selected")}E.data.$pageTitle=F.find(".page-title");if(!B.disableLink&&!B.pagesHierarchy.hasChildren(K.id)){var H=$("<a class='no-decorations item-block'></a>");H.addClass("internal-link");H.click(function(){setTimeout(function(){p.requestDeactivation()},0)});var A=UrlManager.getFullHtmlUrl(PageManager.getPageFragmentValue(K.id));H.attr("href",A);var D=$(".page-content",F);D.wrap(H);E.data.$lingWrapper=D.parent()}}E.data.$iconElement=F.find(".sub-hierarchy-icon");FontIconsManager.applyIcon(E.data.$iconElement,B.orientation==="right"?b:d);return F},itemUpdatedCallback:function(D,A){if(D.data.$pageTitle&&A){var C=D.item;D.data.$pageTitle.text(C.title);if(D.data.$lingWrapper){var B=UrlManager.getFullHtmlUrl(PageManager.getPageFragmentValue(C.id));D.data.$lingWrapper.attr("href",B)}}}}).addOrderingSupport({orderingValueSelector:function(A){return A.item.index}});var r=NavigationUtils.createCssRules("drop-down-navigation-desktop-panel-"+z.level);var n;$.extend(p,{$element:y,visualizers:l,defaultActivationArgs:{backgroundColor:undefined,hoverColor:undefined,width:undefined,spacing:undefined,hierarchyOpened:undefined,useHierarchy:undefined,fontColor:undefined,fontSize:undefined,font:undefined,pages:undefined,pagesHierarchy:undefined,maxSize:undefined,selectedPageId:undefined,instanceId:undefined,mouseEnteredFlag:undefined,borderRadius:undefined,borderWidth:undefined,borderColor:undefined,rootPageId:undefined,innerDistance:undefined,orientation:undefined,useSkinButton:undefined,showDropDownArrow:undefined},onActivated:function(U){var H=ThemeColorsManager.evaluateColorBinding(U.backgroundColor);var Q=ThemeFontsManager.evaluateFontBinding(U.font);var D=U.fontSize;var X=U.borderWidth;var A=ThemeColorsManager.evaluateColorBinding(U.borderColor,true);var S=U.width;var I=U.spacing;var B=ThemeColorsManager.evaluateColorBinding(U.fontColor,true);var C=U.borderRadius;var F=U.orientation;var W=U.innerDistance;var E=U.useSkinButton;var P=U.showDropDownArrow;var N=m(H);o(N,I,S,X,W,E);var K=CollectionUtils.isObservableCollection(U.pages);if(E){OperationsManager.disableBatch();OrderManager.beginReorderingBatch();PositionManager.UpdateBatch.start();LayoutManager.beginLayoutUpdateBatch();PositionManager.VisibilityUpdateBatch.start();PropertiesManager.UpdateBatch.start();ElementsManager.HierarchyChangedUpdateBatch.start()}x.clear();if(U.useHierarchy){var R=K?U.pages.getItems():$.mapToDictionary(U.pages,$.identity,$.defaultIdFunction);var M=U.pagesHierarchy;var O=M.getRootIds();var T=$.map(O,function(Y){return R[Y]});x.setItems(T);if(M.hasHierarchy()){x.$element.on("click.drop-down-panel","> .page-item.has-hierarchy",function(aa){var Y=$(aa.target).closest(".page-item");var Z=x.getListItem(Y);if(Z&&Z.itemsList===x){var ab=Z.dropPanelController;ab.toggle();aa.stopPropagation();aa.preventDefault()}});x.$element.on("mouseenter.drop-down-panel","> .page-item.has-hierarchy",function(aa){var Y=$(aa.currentTarget).closest(".page-item");var Z=x.getListItem(Y);if(Z&&Z.itemsList===x){setTimeout(function(){Z.dropPanelController.open()},0)}});x.$element.on("mouseleave.drop-down-panel","> .page-item.has-hierarchy",function(aa){var Y=$(aa.currentTarget).closest(".page-item");var Z=x.getListItem(Y);if(Z&&Z.itemsList===x){setTimeout(function(){Z.dropPanelController.close()},0)}});n=[];var J=E?X:0;var G=$.buildPositioningFunction(function(){return PageManager.getCurrentPage().getArea(true)}).alignVertically(Side.Top,Side.Top,{distance:-X});if(F==="right"){G.alignHorizontally(Side.Right,Side.Left,{distance:J,usageCallback:function(Y){Y.$element.find(".drop-down-navigation-desktop-panel .content-container").removeClass("right").addClass("left")}}).alignHorizontally(Side.Left,Side.Right,{distance:J})}else{G.alignHorizontally(Side.Left,Side.Right,{distance:J}).alignHorizontally(Side.Right,Side.Left,{distance:J,usageCallback:function(Y){Y.$element.find(".drop-down-navigation-desktop-panel .content-container").removeClass("right").addClass("left")}})}$.each(O,function(ae,Z){if(M.hasChildren(Z)){var ac=M.createSubHierarchy(Z);var ad=Z;ac.addIds(Z);var ag=$.map(ac.getIds(),function(ah,ai){return R[ai]});var Y=x.items[Z];var af=Y.$item;af.addClass("has-hierarchy");var aa=$.createDropPanelWindow(i(z.level+1),{appendTo:af,contextClass:"drop-down-navigation",isDraggable:false,stackWithWindows:false,placeInsideWindow:false,deactivateOnSelectionChanged:false,positioningFunction:G,activationArgs:$.extend({},U,{backgroundColor:E?U.backgroundColor:N.hoverColor,isFixedWidth:true,isFixedHeight:true,pages:ag,pagesHierarchy:ac,rootPageId:ad}),openCallback:function(){af.addClass("opened")},closeCallback:function(){af.removeClass("opened")},hidingFunctionBeforeShowing:$.noop,showingFunction:function(ai,ah){ah.positioned()},deactivateOnClickOutside:true,ignoredElementsFilters:[".drop-down-navigation"]});var ab={open:function(){aa.open(Y.data.$openContext)},close:function(){aa.close()},isOpened:function(){return aa.isOpened()},toggle:function(){if(ab.isOpened()){ab.close()}else{ab.open()}}};Y.dropPanelController=ab;n.push(ab)}})}}else{x.setItems(K?U.pages.getItemsValues():U.pages)}q.css({padding:X+"px 0",width:v?v.width+(X*2):S});s.css({borderColor:A,borderRadius:C+"px",borderWidth:X+"px"});if(!u){y.css({color:B,fontSize:D+"px"})}y.toggleClass("show-arrow",P);y.css({fontFamily:Q!==null?Q:"",borderRadius:C+"px",textAlign:F});y.toggleClass("sub-hierarchy-left",F==="right");var L=x.orderedItems;if(L.length>0){var V=Math.max(C-X-1,0);L[0].$item.find("> .item-block").css({borderTopLeftRadius:V,borderTopRightRadius:V});L[L.length-1].$item.find("> .item-block").css({borderBottomLeftRadius:V,borderBottomRightRadius:V})}},onDeactivated:function(){k.addClass("right").removeClass("left");x.$element.off(".drop-down-panel");if(n){$.each(n,function(F,E){E.close()});n=undefined}var B=p.currentActivationArgs;var C=x.items[B.selectedPageId];if(C){if(C.data.instanceController){var D=C.data.instanceController.getInstance();if(D&&!D.isDeleted){var A=D.getSkinInstance();if(A.isUserSelected()){A.userSelect(false)}}}else{C.$item.removeClass("state-selected")}}PositionManager.VisibilityUpdateBatch.start();$.each(x.items,function(F,E){if(E.data.instanceController){E.data.instanceController.getInstance().hideElement();E.data.instanceController.$element.detach()}});PositionManager.VisibilityUpdateBatch.finish();w(B.mouseEnteredFlag,false);v=undefined;u=undefined},positioned:function(){if(p.currentActivationArgs.useSkinButton){ElementsManager.HierarchyChangedUpdateBatch.finish();PropertiesManager.UpdateBatch.finish();PositionManager.VisibilityUpdateBatch.finish();LayoutManager.endLayoutUpdateBatch();PositionManager.UpdateBatch.finish();OrderManager.endReorderingBatch();OperationsManager.endDisableBatch()}}});return p;function w(A,B){if(A){if(B){A.setTrue("drop-down-navigation-"+z.level)}else{setTimeout(function(){A.setFalse("drop-down-navigation-"+z.level)},0)}}}function m(B){B=$.Color(B);var A=NavigationUtils.calculateAdjustBrightnessSign(B,0.12);var C=ColorsHelper.adjustBrightness(B,function(E){return E+A*(0.06)});var D=ColorsHelper.adjustBrightness(B,function(E){return E+A*(0.12)});return{mainColor:B.toCSS(),hoverColor:C.toCSS(),selectedColor:D.toCSS()}}function t(A){var B={};B[g]=A;return B}function o(B,G,D,C,A,E){r.rule(".page-item > .item-block",t(B.mainColor));if(!E){r.rule(".page-item.simple.state-selected > .item-block",t(B.selectedColor));r.rule(".page-item.simple:hover > .item-block",t(B.hoverColor));r.rule(".page-item.simple.opened > .item-block",t(B.hoverColor))}if(z.level===0){f.rule(".page-item",{paddingLeft:C+"px",paddingRight:C+"px"});var F=(G/2);f.rule(".page-item > .item-block",{paddingTop:F+"px",paddingBottom:F+"px"});if(E){f.rule(".page-item.instance:first-child > .item-block",{paddingTop:0});f.rule(".page-item.instance:last-child > .item-block",{paddingBottom:0});f.rule(".page-item.instance:first-child > .item-block .sub-hierarchy-icon-container",{paddingBottom:F+"px"});f.rule(".page-item.instance:last-child > .item-block .sub-hierarchy-icon-container",{paddingTop:F+"px"})}else{f.rule(".page-item.simple.has-hierarchy .page-title",{maxWidth:D-40-(C*2)})}}if(z.level===1){a.rule("> .content-container.right",{marginLeft:A+"px",marginRight:0});a.rule("> .content-container.left",{marginLeft:0,marginRight:A+"px"})}}}}();(function(){CompatibilityManager.addSiteInformationFix(1.1007,function(b){if(b.templateStructure){$.each(b.templateStructure.structures,function(d,c){a(c)})}if(b.pagesStructure){$.each(b.pagesStructure.pages,function(c,d){$.each(d.structures,function(g,f){a(f)})})}if(b.masterPages){$.each(b.masterPages,function(c,d){if(d.hierarchyInfo.structures){$.each(d.hierarchyInfo.structures,function(g,f){a(f)})}})}function a(c){var d=c.elementProperties.roll;if(d){c.elementProperties.connections={};c.elementProperties.connections[d.name]={};c.elementProperties.connections[d.name][d.targetId]={targetId:d.targetId,name:d.name,options:d.options}}c.elementProperties.roll=null;if(c.childElements){$.each(c.childElements,function(g,f){a(f)})}}})})();(function(){CompatibilityManager.addSiteInformationFix(1.1015,function(b){if(b.templateStructure){$.each(b.templateStructure.structures,function(d,c){a(c)})}if(b.pagesStructure){$.each(b.pagesStructure.pages,function(c,d){$.each(d.structures,function(g,f){a(f)})})}if(b.masterPages){$.each(b.masterPages,function(c,d){if(d.hierarchyInfo.structures){$.each(d.hierarchyInfo.structures,function(g,f){a(f)})}})}function a(d){var c=d.elementProperties.customStates;if(c){var f={};$.each(c,function(g,h){if($.isPlainObject(h.ids)&&$.getKeys(h.ids).length>1){f[g]=h}});d.elementProperties.customStates=f}if(d.childElements){$.each(d.childElements,function(h,g){a(g)})}}})})();(function(){CompatibilityManager.addSiteInformationFix(1.1013,function(i){var k;var h=0;var c=0;var f={};var j={};var b={};var d={};var g;if(i.templateStructure){$.each(i.templateStructure.structures,function(m,l){a(l)})}if(i.pagesStructure){$.each(i.pagesStructure.pages,function(l,m){g=m;$.each(m.structures,function(o,n){a(n)})})}if(i.masterPages){$.each(i.masterPages,function(l,m){if(m.hierarchyInfo.structures){$.each(m.hierarchyInfo.structures,function(o,n){a(n)})}})}function a(l,m){var n=l.type;if(n===ElementsTypes.Menu.name&&l.elementProperties.dataTemplate){l.elementProperties.dataTemplate.structures[0].type=ElementsTypes.MenuButton.name;if(l.elementProperties.itemsTemplates){$.each(l.elementProperties.itemsTemplates,function(p,o){o.structures[0].type=ElementsTypes.MenuButton.name})}}else{if(n===ElementsTypes.Gallery.name&&l.elementProperties.dataTemplate&&!$.isEmptyObject(l.elementProperties.dataTemplate)){l.elementProperties.dataTemplate.structures[0].type=ElementsTypes.ImageBox.name;if(l.elementProperties.itemsTemplates){$.each(l.elementProperties.itemsTemplates,function(p,o){o.structures[0].type=ElementsTypes.ImageBox.name})}}}if(l.childElements){$.each(l.childElements,function(o,p){a(p)})}}})})();(function(){CompatibilityManager.addSiteInformationFix(1.1017,function(i){var k;var h=0;var c=0;var f={};var j={};var b={};var d={};var g;if(i.templateStructure){$.each(i.templateStructure.structures,function(m,l){a(l)})}if(i.pagesStructure){$.each(i.pagesStructure.pages,function(l,m){g=m;$.each(m.structures,function(o,n){a(n)})})}if(i.masterPages){$.each(i.masterPages,function(l,m){if(m.hierarchyInfo.structures){$.each(m.hierarchyInfo.structures,function(o,n){a(n)})}})}function a(l,m){var n=l.type;if(n===ElementsTypes.Menu.name&&l.elementProperties.itemFields){l.elementProperties.itemFields.icon={type:"icon",title:"Icon",name:"icon",isDefaultField:true};delete l.elementProperties.itemFields.image}if(n===ElementsTypes.MenuButton.name&&l.elementProperties.fieldsMap){$.each(l.elementProperties.fieldsMap,function(p,o){$.each(o,function(q,r){if(r.type==="image"){r.type="icon";r.title="Icon";r.name="icon"}})})}if(l.childElements){$.each(l.childElements,function(o,p){a(p)})}}})})();(function(){CompatibilityManager.addSiteInformationFix(1.1016,function(i){var k;var h=0;var c=0;var f={};var j={};var b={};var d={};var g;if(i.templateStructure){$.each(i.templateStructure.structures,function(m,l){a(l)})}if(i.pagesStructure){$.each(i.pagesStructure.pages,function(l,m){g=m;$.each(m.structures,function(o,n){a(n)})})}if(i.masterPages){$.each(i.masterPages,function(l,m){if(m.hierarchyInfo.structures){$.each(m.hierarchyInfo.structures,function(o,n){a(n)})}})}function a(l,m){var n=l.type;if((n===ElementsTypes.Menu.name||n===ElementsTypes.Gallery.name)&&l.elementProperties.dataTemplate&&!$.isEmptyObject(l.elementProperties.dataTemplate)){l.elementProperties.fieldsTemplates={};l.elementProperties.fieldsTemplates.defaultTemplate=l.elementProperties.dataTemplate}if(l.childElements){$.each(l.childElements,function(o,p){a(p)})}}})})();(function(){CompatibilityManager.addSiteInformationFix(1.1024,function(b){if(b.pagesStructure){$.each(b.pagesStructure.pages,function(c,d){$.each(d.structures,function(g,f){a(f)})})}function a(c){var d=c.elementProperties.columnsGrid;c.elementProperties.columnsGrid.isEnabled=true;c.elementProperties.columnsGrid.showAlways=false}})})();(function(){CompatibilityManager.addSiteInformationFix(1.1026,function(i){var m;var h=0;var c=0;var f={};var l={};var b={};var d={};var g;if(i.templateStructure){var j=i.templateStructure.structures;$.each(j,function(o,n){a(n,true)});var k=i.templateStructure.connections;if(k&&j&&ElementsTypes[j[0].type].hasFeature(Features.TemplateItem)){if(k.sourceConnections){$.each(k.sourceConnections,function(o,n){n.options.isTemplateConenction=true})}if(k.targetConnections){$.each(k.targetConnections,function(o,n){n.options.isTemplateConenction=true})}}}if(i.pagesStructure){$.each(i.pagesStructure.pages,function(n,o){g=o;$.each(o.structures,function(q,p){a(p)})})}if(i.masterPages){$.each(i.masterPages,function(n,o){if(o.hierarchyInfo.structures){$.each(o.hierarchyInfo.structures,function(q,p){a(p)})}})}function a(o,n){var q=o.elementProperties;var p=q.behaviours;if(p&&p.isTemplateBehaviour){return}if(n&&ElementsTypes[o.type].hasFeature(Features.TemplateItem)){q.behaviours={isTemplateBehaviour:p?p:{},normalBehaviours:{}};$.each(q.behaviours.isTemplateBehaviour,function(r,s){s.options.isTemplateBehaviour=true})}else{q.behaviours={normalBehaviours:p?p:{},isTemplateBehaviour:{}}}if(o.childElements){$.each(o.childElements,function(r,s){a(s,n)})}}})})();(function(){CompatibilityManager.addSiteInformationFix(1.1027,function(l){var q;var k=0;var d=0;var g={};var p={};var b={};var f={};var i;if(l.templateStructure){var n=l.templateStructure.structures;var o=l.templateStructure.connections;if(o){c(o)}$.each(n,function(s,r){a(r,o)})}if(l.pagesStructure){$.each(l.pagesStructure.pages,function(s,t){i=t;var r=t.connections;c(r);$.each(t.structures,function(v,u){a(u,r)})})}if(l.masterPages){$.each(l.masterPages,function(s,t){if(t.hierarchyInfo.structures){var r=t.hierarchyInfo.connections;c(r);$.each(t.hierarchyInfo.structures,function(v,u){a(u,r)})}})}function c(r){if(r){$.each(r,function(s,t){$.each(t,function(v,u){j(u)})})}}function a(r,s){var w=r.id;var v=r.elementProperties;var t=v.behaviours;var u=v.itemsData;if(u){$.each(u.connections,function(y,x){$.each(x,function(A,z){j(z)})});$.each(u.behaviours,function(z,y){var x=u.connections[z];$.each(y,function(B,C){var A=m(C,w+z);x[A.id]=A})})}if(t){h(t.normalBehaviours,s,w);h(t.isTemplateBehaviour,s,w)}if(r.childElements){$.each(r.childElements,function(x,y){a(y,s)})}}function h(s,r,t){if(s){$.each(s,function(v,x){var u=m(x,t);var w=u.id;if(r.targetConnections){r.targetConnections[w]=u}if(r.sourceConnections){r.sourceConnections[w]=u}})}}function m(t,u){var s=t.name;if(t.options){var r=t.options;if(s==="FlyToScreenBehaviour"){r.triggerType=TriggerType.PageLoad}else{if(r.stateName){r.triggerType=TriggerType.State;r.triggerName=r.stateName}}if(r.transitionData){if(r.transitionData.transitionDuration!==undefined){r.animationDuration=r.transitionData.transitionDuration}if(r.transitionData.transitionDirection){r.animationDirection=r.transitionData.transitionDirection}}if(r.direction){r.animationDirection=r.direction}}return{id:$.uniqueID(),sourceElementID:u,targetElementID:u,behaviourName:s,options:r}}function j(r){var t=r.id;var s=r.options;if(r.behaviourName){return}s.triggerType=TriggerType.Trigger;s.triggerName=r.triggerName;r.behaviourName=r.actionName;delete s.trigger;if(r.actionName==="ShowElement"||r.actionName==="HideElement"){s.animationType=Animations.NoAnimation.name;s.animationDuration=0}if(r.actionName==="FadeIn"){r.behaviourName=Behaviours.ShowElement.name;s.animationType=Animations.Fade.name}if(r.actionName==="FadeOut"){r.behaviourName=Behaviours.HideElement.name;s.animationType=Animations.Fade.name}if(r.actionName==="SlideIn"){r.behaviourName=Behaviours.ShowElement.name}if(r.actionName==="SlideOut"){r.behaviourName=Behaviours.HideElement.name}delete r.actionName;if(s.slideOptions){if(s.slideOptions.name===Global.Directions.Left.name){s.animationType="SlideLeft"}else{if(s.slideOptions.name===Global.Directions.Right.name){s.animationType="SlideRight"}else{if(s.slideOptions.name===Global.Directions.Up.name){s.animationType="SlideUp"}else{if(s.slideOptions.name===Global.Directions.Down.name){s.animationType="SlideDown"}}}}}if(s.transitionData){if(s.transitionData.transitionDuration!==undefined){s.animationDuration=s.transitionData.transitionDuration}if(s.transitionData.transitionDirection){s.animationDirection=s.transitionData.transitionDirection}}if(s.direction){s.animationDirection=s.direction}}})})();(function(){CompatibilityManager.addSiteInformationFix(1.1032,function(k){var o;var j=0;var d=0;var g={};var n={};var b={};var f={};var h;if(k.templateStructure){var l=k.templateStructure.structures;var m=k.templateStructure.connections;if(m){c(m)}$.each(l,function(q,p){a(p,m)})}if(k.pagesStructure){$.each(k.pagesStructure.pages,function(q,r){h=r;var p=r.connections;c(p);$.each(r.structures,function(t,s){a(s,p)})})}if(k.masterPages){$.each(k.masterPages,function(q,r){if(r.hierarchyInfo.structures){var p=r.hierarchyInfo.connections;c(p);$.each(r.hierarchyInfo.structures,function(t,s){a(s,p)})}})}function c(p){if(p){$.each(p,function(q,r){$.each(r,function(t,s){i(s)})})}}function a(p,q){var t=p.id;var s=p.elementProperties;var r=s.itemsData;if(s.entranceAnimation||s.exitAnimation){if(s.entranceAnimation==="SlideLeft"){s.entranceAnimation=Animations.Slide.name;s.entranceAnimationDirection="right"}else{if(s.entranceAnimation==="SlideRight"){s.entranceAnimation=Animations.Slide.name;s.entranceAnimationDirection="left"}else{if(s.entranceAnimation==="SlideUp"){s.entranceAnimation=Animations.Slide.name;s.entranceAnimationDirection="down"}else{if(s.entranceAnimation==="SlideDown"){s.entranceAnimation=Animations.Slide.name;s.entranceAnimationDirection="up"}}}}if(s.exitAnimation==="SlideLeft"){s.exitAnimation=Animations.Slide.name;s.exitAnimationDirection="left"}else{if(s.exitAnimation==="SlideRight"){s.exitAnimation=Animations.Slide.name;s.exitAnimationDirection="right"}else{if(s.exitAnimation==="SlideUp"){s.exitAnimation===Animations.Slide.name;s.exitAnimationDirection="up"}else{if(s.exitAnimation==="SlideDown"){s.exitAnimation=Animations.Slide.name;s.exitAnimationDirection="down"}}}}}if(r){$.each(r.connections,function(v,u){$.each(u,function(x,w){i(w)})})}if(p.childElements){$.each(p.childElements,function(u,v){a(v,q)})}}function i(p){if(!p){return}var r=p.id;var q=p.options;if(p.behaviourName==="ShowElement"){if(q.animationType==="SlideLeft"){q.animationSlideDirection="right";q.animationType="Slide"}else{if(q.animationType==="SlideRight"){q.animationSlideDirection="left";q.animationType="Slide"}else{if(q.animationType==="SlideUp"){q.animationSlideDirection="down";q.animationType="Slide"}else{if(q.animationType==="SlideDown"){q.animationSlideDirection="up";q.animationType="Slide"}}}}if(!q.animationDirection){q.animationDirection={vertical:"top",horizontal:"left"}}}else{if(p.behaviourName==="HideElement"){if(q.animationType==="SlideLeft"){q.animationSlideDirection="left";q.animationType="Slide"}else{if(q.animationType==="SlideRight"){q.animationSlideDirection="right";q.animationType="Slide"}else{if(q.animationType==="SlideUp"){q.animationSlideDirection="up";q.animationType="Slide"}else{if(q.animationType==="SlideDown"){q.animationSlideDirection="down";q.animationType="Slide"}}}}if(!q.animationDirection){q.animationDirection={vertical:"top",horizontal:"left"}}}}if(p.behaviourName==="NavigateNext"||p.behaviourName==="NavigatePrev"){if(q.entranceAnimation==="SlideLeft"){q.entranceAnimation="Slide";q.entranceAnimationDirection="right"}else{if(q.entranceAnimation==="SlideRight"){q.entranceAnimation="Slide";q.entranceAnimationDirection="left"}else{if(q.entranceAnimation==="SlideUp"){q.entranceAnimation="Slide";q.entranceAnimationDirection="down"}else{if(q.entranceAnimation==="SlideDown"){q.entranceAnimation="Slide";q.entranceAnimationDirection="up"}}}}if(q.exitAnimation==="SlideLeft"){q.exitAnimation="Slide";q.exitAnimationDirection="left"}else{if(q.exitAnimation==="SlideRight"){q.exitAnimation="Slide";q.exitAnimationDirection="right"}else{if(q.exitAnimation==="SlideUp"){q.exitAnimation="Slide";q.exitAnimationDirection="up"}else{if(q.exitAnimation==="SlideDown"){q.exitAnimation="Slide";q.exitAnimationDirection="down"}}}}}if(p.behaviourName==="FlyToScreenBehaviour"){p.behaviourName=Behaviours.ShowElement.name;q.animationType=Animations.Fly.name;q.animationSlideDirection="left";q.animationDirection=q.direction;delete q.direction}else{if(p.behaviourName==="FlyOutScreenBehaviour"){p.behaviourName=Behaviours.HideElement.name;q.animationType=Animations.Fly.name;q.animationSlideDirection="left";q.animationDirection=q.direction;delete q.direction}}}})})();(function(){CompatibilityManager.addSiteInformationFix(1.1035,function(k){var n;var j=0;var c=0;var g={};var m={};var b={};var d={};var i;if(k.templateStructure){var l=k.templateStructure.structures;var f=k.templateStructure.customStatesProperties;if(f){a(f)}}if(k.pagesStructure){$.each(k.pagesStructure.pages,function(o,p){i=p;var q=p.customStatesProperties;a(q)})}if(k.masterPages){$.each(k.masterPages,function(o,p){if(p.hierarchyInfo.structures){var q=p.hierarchyInfo.customStatesProperties;a(q)}})}function a(o){if(o){$.each(o,function(q,p){$.each(p,function(v,s){for(var u in s){var t=s[u];for(var w in t){var r=t[w];h(r)}}})})}}function h(o){if(!o){return}if(o.transitionInEffect){if(o.transitionInEffect==="SlideLeft"){o.transitionSlideInDirection="right";o.transitionInEffect="Slide"}else{if(o.transitionInEffect==="SlideRight"){o.transitionSlideInDirection="left";o.transitionInEffect="Slide"}else{if(o.transitionInEffect==="SlideUp"){o.transitionSlideInDirection="down";o.transitionInEffect="Slide"}else{if(o.transitionInEffect==="SlideDown"){o.transitionSlideInDirection="up";o.transitionInEffect="Slide"}}}}if(!o.transitionSlideInDirection){o.transitionSlideInDirection="right"}}if(o.transitionOutEffect){if(o.transitionOutEffect==="SlideLeft"){o.transitionSlideOutDirection="left";o.transitionOutEffect="Slide"}else{if(o.transitionOutEffect==="SlideRight"){o.transitionSlideOutDirection="right";o.transitionOutEffect="Slide"}else{if(o.transitionOutEffect==="SlideUp"){o.transitionSlideOutDirection="up";o.transitionOutEffect="Slide"}else{if(o.transitionOutEffect==="SlideDown"){o.transitionSlideOutDirection="down";o.transitionOutEffect="Slide"}}}}if(!o.transitionSlideOutDirection){o.transitionSlideOutDirection="right"}}}})})();(function(){CompatibilityManager.addSiteInformationFix(1.1037,function(f){var d;if(f.templateStructure){var c=f.templateStructure.structures;var b=f.templateStructure.connections;$.each(c,function(h,g){a(g,b)})}if(f.pagesStructure){$.each(f.pagesStructure.pages,function(h,j){d=j;var g=j.connections;$.each(j.structures,function(l,k){a(k,g)})})}if(f.masterPages){$.each(f.masterPages,function(h,j){if(j.hierarchyInfo.structures){var g=j.hierarchyInfo.connections;$.each(j.hierarchyInfo.structures,function(l,k){a(k,g)})}})}function a(g,h){if(!h){return}var k=g.id;var j=g.elementProperties;var i=j.itemsData;if(i){$.each(i.connections,function(m,l){$.each(l,function(p,o){h.targetConnections[p]=o;var n=g.id+TemplateItemInstanceIdSeperator+m;if(o.sourceElementID===o.targetElementID){o.targetElementID=n}o.sourceElementID=n})});delete j.itemsData}if(g.childElements){$.each(g.childElements,function(l,m){a(m,h)})}}})})();(function(){CompatibilityManager.addSiteInformationFix(1.1038,function(g){var f;if(g.templateStructure){var d=g.templateStructure.structures;var c=g.templateStructure.connections;$.each(d,function(j,h){b(h,c)})}if(g.pagesStructure){$.each(g.pagesStructure.pages,function(j,k){f=k;var h=k.connections;$.each(k.structures,function(m,l){b(l,h)})})}if(g.masterPages){$.each(g.masterPages,function(j,k){if(k.hierarchyInfo.structures){var h=k.hierarchyInfo.connections;$.each(k.hierarchyInfo.structures,function(m,l){b(l,h)})}})}function b(h,i){var j=h.id;if(i){$.each(i,function(l,k){$.each(k,function(p,m){var n=m.targetElementID.toString();var o=m.sourceElementID.toString();m.targetElementID=a(n);m.sourceElementID=a(o)})})}}});function a(d){var c=d.split(TemplateItemInstanceIdSeperator);if(d.length>=26&&c.length===1){var b=13;if(d.slice(0,2)==="id"){b+=2}d=d.slice(0,b)+TemplateItemInstanceIdSeperator+d.slice(b,d.length)}return d}})();(function(){CompatibilityManager.addSiteInformationFix(1.1043,function(f){var d;if(f.templateStructure){var c=f.templateStructure.structures;$.each(c,function(h,g){b(g)})}if(f.pagesStructure){$.each(f.pagesStructure.pages,function(g,h){d=h;$.each(h.structures,function(k,j){b(j);a(j)})})}if(f.masterPages){$.each(f.masterPages,function(g,h){if(h.hierarchyInfo.structures){$.each(h.hierarchyInfo.structures,function(k,j){b(j);a(j)})}})}function a(g){var h=g.id;if(g.type===ElementsTypes.Menu.name&&g.elementProperties.synchronizeWithPages===undefined){g.elementProperties.synchronizeWithPages=true}if(g.childElements){$.each(g.childElements,function(j,k){a(k)})}}function b(g){var i=g.id;var h=g.elementProperties.textType;if(h){if(h==="div"){h=HtmlTags.DIV}g.elementProperties.tagName=h}if(g.childElements){$.each(g.childElements,function(j,k){b(k)})}}})})();(function(){CompatibilityManager.addSiteInformationFix(1.1045,function(c){if(c.templateStructure){$.each(c.templateStructure.structures,function(f,d){a(d)})}if(c.pagesStructure){$.each(c.pagesStructure.pages,function(d,f){$.each(f.structures,function(h,g){})})}if(c.masterPages){$.each(c.masterPages,function(d,f){if(f.hierarchyInfo.structures){$.each(f.hierarchyInfo.structures,function(h,g){})}})}function a(d){var f=d.type;if(ElementsTypes[f].hasFeature(Features.TemplateItem)){var g=d.elementProperties.fieldsMap;if(g){$.each(g,function(i,h){if(h&&h[DataSourceItemsFields.image.getContentType()]){h[DataSourceItemsFields.title.getContentType()]={name:"title",title:"Title",type:"title"}}})}}if(d.childElements){$.each(d.childElements,function(h,j){a(j)})}}function b(d){var f=d.type;if(ElementsTypes[f].hasFeature(Features.DataList)&&f!==ElementsTypes.FormElement.name){var g=d.elementProperties.itemFields;if(g&&g.image){g.alt={type:"title",title:"Alt",name:"alt",isDefaultField:true}}}if(d.childElements){$.each(d.childElements,function(h,j){b(j)})}}})})();(function(){CompatibilityManager.addSiteInformationFix(1.1047,function(b){if(b.pagesStructure){$.each(b.pagesStructure.pages,function(c,d){$.each(d.structures,function(g,f){a(f)})})}if(b.masterPages){$.each(b.masterPages,function(c,d){if(d.hierarchyInfo.structures){$.each(d.hierarchyInfo.structures,function(g,f){a(f)})}})}function a(d,c){var h=d.id;var g=d.elementProperties;var f=d.type;if(f==="page"){g.childrenAnchor=HorizontalAlignment.Centered;if(d.childElements){$.each(d.childElements,function(j,k){a(k)})}}else{g.sizeAndPosition.left-=(Global.IsMobile?150:480)}}})})();(function(){CompatibilityManager.addSiteInformationFix(1.1049,function(b){if(b.pagesStructure){$.each(b.pagesStructure.pages,function(c,d){$.each(d.structures,function(g,f){a(f.childElements)})})}if(b.masterPages){$.each(b.masterPages,function(c,d){if(d.hierarchyInfo.structures){a(d.hierarchyInfo.structures)}})}function a(c){var d=PageManager.getCoordinatorHeirarchy().customStatesProperties;if(c){$.each(c,function(g,f){var h=f.id;if(d&&d[h]){$.each(d[h],function(i,j){if(i==="sizeAndPosition"&&j){$.each(j,function(l,k){if(k){$.each(k,function(n,m){m.stateValue.left-=480})}})}})}})}}})})();(function(){CompatibilityManager.addSiteInformationFix(1.1052,function(a){if(a.pagesStructure){PageManager.Events.PageInitialized.one(function(){OperationsManager.disableUndo("converToSection");var i=PageManager.getCurrentPage();OrderManager.beginReorderingBatch();var l=false;var u=i.getPageContentInstances();if(u.length>0){var p=u[0];if(p.getSectionsByPage(i).length>0){l=true}var t=ElementsManager.addSection()}else{var x=ElementsManager.addPageContent();var p=x.pageContentInstance;var t=x.sectionInstance}if(!l){var n=i.getPropertyValue("sizeAndPosition").height;t.setPropertyFieldValue("sizeAndPosition","height",n);var c=[];var b=[];var v=[];var k=[];var j=[];var f=PositionManager.getElementArea(i);$.each(i.childInstances,function(z,y){if(y.isMasterPageElement.isFalse()){if(!y.hasFeature(Features.PageSection)){c.push(y)}}else{if(!y.isType(ElementsTypes.PageContentElement)&&!y.hasFeature(Features.PageSection)){b.push(y)}}});var m=$.grep(c,function(y){var z=y.getArea();if(z.top<f.top+100&&z.bottom>f.bottom-100){return false}return true});var r=i.getHeaderInstance();var g=i.getFooterInstance();var o=PositionManager.getElementsArea(c);var q=PositionManager.getElementsArea(m);$.each(b,function(z,y){var A=y.getArea();if(A.bottom<=q.top+80&&!r){k.push(y)}else{if(A.top+A.height/2<q.bottom){j.push(y)}else{if(!g){v.push(y)}else{j.push(y)}}}});var w=k.length>0?PositionManager.getElementsArea(k):undefined;var h=v.length>0?PositionManager.getElementsArea(v):undefined;var d=0;if(v.length>0){if(!i.getFooterInstance()&&v.length>0){ElementsManager.addFooterInstance()}d=(f.bottom-h.top);i.getFooterInstance().setPropertyFieldValue("sizeAndPosition","height",d);ElementsStructureHelper.reattachInstances(v,i.getFooterInstance());ElementsLayoutHelper.moveInstances(v,{top:d})}else{if(i.getFooterInstance()){d=i.getFooterInstance().getSize().height}}var s=0;if(k.length>0){if(!i.getHeaderInstance()&&k.length>0){ElementsManager.addHeaderInstance()}s=(w.bottom-f.top);i.getHeaderInstance().setPropertyFieldValue("sizeAndPosition","height",s);ElementsStructureHelper.reattachInstances(k,i.getHeaderInstance());ElementsLayoutHelper.moveInstances(k,{top:-s});ElementsLayoutHelper.moveInstances(c,{top:-s});ElementsLayoutHelper.moveInstances(j,{top:-s})}else{if(i.getHeaderInstance()){s=i.getHeaderInstance().getSize().height;ElementsLayoutHelper.moveInstances(c,{top:-(s)})}}OrderManager.bringToFront(p);ElementsLayoutHelper.withLayoutPreserving($.merge($.makeArray(c),j),function(){t.setPropertyFieldValue("sizeAndPosition","height",n-d-s);i.setPropertyFieldValue("sizeAndPosition","height",0);ElementsStructureHelper.reattachInstances(c,t)})}OrderManager.endReorderingBatch();OperationsManager.enableUndo("converToSection")})}})})();(function(){CompatibilityManager.addSiteInformationFix(1.1065,function(b){if(b.templateStructure){$.each(b.templateStructure.structures,function(d,c){a(c)})}if(b.pagesStructure){$.each(b.pagesStructure.pages,function(c,d){$.each(d.structures,function(g,f){a(f)})})}if(b.masterPages){$.each(b.masterPages,function(c,d){if(d.hierarchyInfo.structures){$.each(d.hierarchyInfo.structures,function(g,f){a(f)})}})}function a(c){var g=c.elementProperties;var d=ElementsTypes[c.type];var f=g.dataLayoutOptions;if(f){g.dataLayoutOptions=$.extend({},d.getPropertyDefaultValues("dataLayoutOptions"),f)}if(c.childElements){$.each(c.childElements,function(h,j){a(j)})}}})})();(function(){CompatibilityManager.addSiteInformationFix(1.1063,function(d){var c;if(d.templateStructure){var b=d.templateStructure.structures;$.each(b,function(g,f){a(f)})}if(d.pagesStructure){$.each(d.pagesStructure.pages,function(f,g){c=g;$.each(g.structures,function(j,h){a(h)})})}if(d.masterPages){$.each(d.masterPages,function(f,g){if(g.hierarchyInfo.structures){$.each(g.hierarchyInfo.structures,function(j,h){a(h)})}})}function a(f,g){var i=f.id;var h=f.elementProperties;if(ElementsTypes[f.type]===ElementsTypes.FormElement){$.each(f.childElements,function(j,k){delete k.elementProperties.fillLayout;delete k.elementProperties.verticalLayout;delete k.elementProperties.horizontalLayout;if(ElementsTypes[k.type]===ElementsTypes.formFields){k.elementProperties.horizontalAlign=HorizontalAlignment.Left;k.elementProperties.sizeAndPosition.width=h.sizeAndPosition.width}else{k.elementProperties.sizeAndPosition=$.extend(k.elementProperties.sizeAndPosition,{top:20,left:0})}});f.elementProperties.horizontalAlign=HorizontalAlignment.Right}else{if(f.childElements){$.each(f.childElements,function(j,k){a(k,g)})}}}})})();(function(){CompatibilityManager.addSiteInformationFix(1.1069,function(d){var c;if(d.templateStructure){var b=d.templateStructure.structures;$.each(b,function(g,f){a(f)})}if(d.pagesStructure){$.each(d.pagesStructure.pages,function(f,g){c=g;$.each(g.structures,function(j,h){a(h)})})}if(d.masterPages){$.each(d.masterPages,function(f,g){if(g.hierarchyInfo.structures){$.each(g.hierarchyInfo.structures,function(j,h){a(h)})}})}function a(g,i){var l=g.id;var k=g.elementProperties;if(ElementsTypes[g.type]===ElementsTypes.FormElement){var h;var j=[];$.each(g.childElements,function(m,n){if(ElementsTypes[n.type]===ElementsTypes.formFields){h=n;n.elementProperties.horizontalAlign=HorizontalAlignment.Right}else{n.elementProperties.sizeAndPosition.top=20;j.push(n)}});var f=h.elementProperties.sizeAndPosition;g.childElements=j;$.each([Features.HasFormData,Features.HasArrangement,Features.DataList,Features.HasTemplates,Features.HasDataSource],function(n,m){$.each(m.properties,function(o,p){g.elementProperties[o]=h.elementProperties[o]})});g.elementProperties.sizeAndPosition.width=f.width;g.elementProperties.horizontalAlign=HorizontalAlignment.Left;g.elementProperties.horizontalContentAlign=HorizontalAlignment.Right}else{if(g.childElements){$.each(g.childElements,function(m,n){a(n,i)})}}}})})();(function(){CompatibilityManager.addSiteInformationFix(1.1071,function(d){var c;if(d.templateStructure){var b=d.templateStructure.structures;$.each(b,function(g,f){a(f)})}if(d.pagesStructure){$.each(d.pagesStructure.pages,function(f,g){c=g;$.each(g.structures,function(j,h){a(h)})})}if(d.masterPages){$.each(d.masterPages,function(f,g){if(g.hierarchyInfo.structures){$.each(g.hierarchyInfo.structures,function(j,h){a(h)})}})}function a(f,h){var k=f.id;var j=f.elementProperties;if(ElementsTypes[f.type]&&ElementsTypes[f.type].hasFeature(Features.HasTemplates)){var g;var i=[];$.each(f.elementProperties.fieldsTemplates,function(n,l){if($.getKeys(l).length>1){var m={};$.each(l,function(p,o){if(o.isDefault){m[p]=o}});f.elementProperties.fieldsTemplates[n]=m}})}else{if(f.childElements){$.each(f.childElements,function(l,m){a(m,h)})}}}})})();(function(){CompatibilityManager.addSiteInformationFix(1.1077,function(d){var c;if(d.templateStructure){var b=d.templateStructure.structures;$.each(b,function(g,f){a(f)})}if(d.pagesStructure){$.each(d.pagesStructure.pages,function(f,g){c=g;$.each(g.structures,function(j,h){a(h)})})}if(d.masterPages){$.each(d.masterPages,function(f,g){if(g.hierarchyInfo.structures){$.each(g.hierarchyInfo.structures,function(j,h){a(h)})}})}function a(f,g){var k=f.id;var j=f.elementProperties;if(ElementsTypes[f.type].hasFeature(Features.HasText)){var h=f.elementProperties.lineHeight;var i=f.elementProperties.fontSize;switch(h.unit){case LineHeightUnit.Percentage:h.percentages=h.unitValue?h.unitValue:120;break;case LineHeightUnit.Pixel:h.percentages=i&&h.unitValue?Math.floor((h.unitValue/i)*100):120;break;case CSSUnits.Pixels:h.percentages=i&&h.pixels?Math.floor((h.pixels/i)*100):120;break;case CSSUnits.Normal:h.percentages=120;break;case CSSUnits.Inherit:h.percentages=120;break}delete h.pixels;delete h.unitValue;if(!h.percentages){h.percentages=120}h.unit=CSSUnits.Percentages}else{if(f.childElements){$.each(f.childElements,function(l,m){a(m,g)})}}}})})();(function(){var a=1.2012;CompatibilityManager.addSiteInformationFix(a,function(g){var c=true;function b(i){var h=PageManager.PagesInformation.getItems();var l=$.count(h);i.type=ElementsTypes.PagesMenu.name;i.elementProperties.name=i.elementProperties.name.replace("Menu",ElementsTypes.PagesMenu.title);var j=l;i.elementProperties.dataLayout.name=i.elementProperties.dataLayout.name+"Menu";var k=ElementsTypes.PagesMenu.defaultProperties&&ElementsTypes.PagesMenu.defaultProperties.dataLayoutOptions?ElementsTypes.PagesMenu.defaultProperties.dataLayoutOptions():undefined;delete i.elementProperties.dataInfo;k.maxItems=j;i.elementProperties.dataLayoutOptions=$.extendMissing(i.elementProperties.dataLayoutOptions,k)}if(g.templateStructure){var f=g.templateStructure.structures;c=f[0].type!==ElementsTypes.Menu.name;$.each(f,function(j,h){d(h)})}else{if(g.pagesStructure){$.each(g.pagesStructure.pages,function(h,j){$.each(j.structures,function(l,k){d(k)})})}if(g.masterPages){$.each(g.masterPages,function(h,j){if(j.hierarchyInfo.structures){$.each(j.hierarchyInfo.structures,function(l,k){d(k)})}})}}function d(h){var i=h.elementProperties;if(ElementsTypes[h.type]===ElementsTypes.Menu&&i.dataInfo&&i.dataInfo&&i.dataInfo.currentData&&i.dataInfo.currentData.type==="MasterPages"&&c){b(h)}else{if(ElementsTypes[h.type]===ElementsTypes.PagesMenu){delete i.dataInfo}else{if(h.childElements){$.each(h.childElements,function(j,k){d(k)})}}}}})})();(function(){CompatibilityManager.addSiteInformationFix(1.209,function(b){var a;if(b.masterPages){$.each(b.masterPages,function(d,g){if(g.hierarchyInfo.structures){var h=$.mapToDictionary(g.hierarchyInfo.structures,$.returnValue,$.defaultIdFunction);function c(i){var j=i.id;delete h[j];if(i.childElements){$.each(i.childElements,function(k,l){c(l)})}}$.each(g.hierarchyInfo.structures,function(k,j){if(j.childElements){$.each(j.childElements,function(l,m){c(m)})}});var f=[];$.each(g.hierarchyInfo.structures,function(k,j){if(h[j.id]){f.push(h[j.id])}});g.hierarchyInfo.structures=f}})}})})();(function(){CompatibilityManager.addSiteInformationFix(1.1092,function(d){var c;if(d.templateStructure){var b=d.templateStructure.structures;$.each(b,function(g,f){a(f)})}if(d.pagesStructure){$.each(d.pagesStructure.pages,function(f,g){c=g;$.each(g.structures,function(j,h){a(h)})})}if(d.masterPages){$.each(d.masterPages,function(f,g){if(g.hierarchyInfo.structures){$.each(g.hierarchyInfo.structures,function(j,h){a(h)})}})}function a(f,g){var i=f.id;var h=f.elementProperties;if(ElementsTypes[f.type]===ElementsTypes.FormElement){f.elementProperties.targetEmail=""}else{if(f.childElements){$.each(f.childElements,function(j,k){a(k,g)})}}}})})();(function(){CompatibilityManager.addSiteInformationFix(1.3,function(c){var b;if(c.pagesStructure){$.each(c.pagesStructure.pages,function(d,f){b=f;$.each(f.structures,function(h,g){a(g)})})}if(c.masterPages){$.each(c.masterPages,function(d,f){if(f.hierarchyInfo.structures){$.each(f.hierarchyInfo.structures,function(h,g){a(g)})}})}function a(f,g){var j=f.id;var i=f.elementProperties;if(ElementsTypes[f.type]===ElementsTypes.label){f.elementProperties.formattedText=f.elementProperties.text;f.type=ElementsTypes.freeText.name;f.elementProperties.verticalAlignment=f.elementProperties.verticalAlign;delete f.elementProperties.text;delete f.elementProperties.verticalAlign;var h=f.elementProperties.formattedText;if(h){h=h.toString()}else{h=""}var d=h.replace(/\n/g,"<br />");if(h.charAt(h.length-1)=="\n"){d+="&nbsp;"}f.elementProperties.formattedText=h}else{if(f.childElements){$.each(f.childElements,function(k,l){a(l,g)})}}}})})();(function(){CompatibilityManager.addSiteInformationFix(1.2004,function(d){var c;if(d.templateStructure){var b=d.templateStructure.structures;$.each(b,function(g,f){a(f)})}if(d.pagesStructure){$.each(d.pagesStructure.pages,function(f,g){c=g;$.each(g.structures,function(j,h){a(h)})})}if(d.masterPages){$.each(d.masterPages,function(f,g){if(g.hierarchyInfo.structures){$.each(g.hierarchyInfo.structures,function(j,h){a(h)})}})}function a(g,h){var k=g.id;var j=g.elementProperties;if(ElementsTypes[g.type]===ElementsTypes.label||ElementsTypes[g.type]===ElementsTypes.freeText){var i;if(ElementsTypes[g.type]===ElementsTypes.label){i=g.elementProperties.text}if(ElementsTypes[g.type]===ElementsTypes.freeText){i=g.elementProperties.formattedText}if(i){i=i.toString()}else{i=""}var f=i.replace(/\n/g,"<br />");if(i.charAt(i.length-1)=="\n"){f+="&nbsp;"}if(ElementsTypes[g.type]===ElementsTypes.label){g.elementProperties.text=i}if(ElementsTypes[g.type]===ElementsTypes.freeText){g.elementProperties.formattedText=i}}else{if(g.childElements){$.each(g.childElements,function(l,m){a(m,h)})}}}})})();(function(){CompatibilityManager.addSiteInformationFix(1.2013,function(d){var c;if(d.templateStructure){var b=d.templateStructure.structures;$.each(b,function(g,f){a(f)})}if(d.pagesStructure){$.each(d.pagesStructure.pages,function(f,g){c=g;$.each(g.structures,function(j,h){a(h)})})}if(d.masterPages){$.each(d.masterPages,function(f,g){if(g.hierarchyInfo.structures){$.each(g.hierarchyInfo.structures,function(j,h){a(h)})}})}function a(f,g){var i=f.id;var h=f.elementProperties;if(ElementsTypes[f.type]===ElementsTypes.PagesMenu){f.elementProperties.dropDownOptions=$.extend({trigger:"click",backgroundColor:"transparent",moreButtonText:"More",spacing:0,isFixedSize:false,width:120,height:50,animation:"NoAnimation",animationSpeed:1000,slideDirection:"up",flyDirection:{vertical:"top",horizontal:"right"},positioningAlignments:"Bottom",positionHorizontalDistance:0,positionVerticalDistance:0},f.elementProperties.dropDownOptions)}else{if(f.childElements){$.each(f.childElements,function(j,k){a(k,g)})}}}})})();(function(){var a=1.202;CompatibilityManager.addSiteInformationFix(a,function(g){var c=true;function b(j){var h=j.elementProperties.dropDownOptions;if(h){var i=ThemeColorsManager.isColorBinding(h.backgroundColor);if(h.backgroundColor==="transparent"||(i&&h.backgroundColor.variation===0&&h.backgroundColor.mainColor===0)){ElementsManager.performOnInstancesInitialization(j.id,function(){LayoutManager.layoutUpdateBatch.performOperation(function(){var k=$instance(j.id);var l=k.getTemplatesArray()[0];l.initializedEvent.one(function(){var m=k.getTemplatesArray()[0].getInstance();m.instanceController.initializedEvent.one(function(){var p;OperationsManager.disableBatch("converToSection");var o=m.getSkinInstance().getInstancesByField("title")[0];if(o){var r=o.getPropertyValue("fontColor");if(!r&&TextStyleManager.getElementTextStyle(o)){r=TextStyleManager.getElementTextStyle(o).color}if(ThemeColorsManager.isColorBinding(r)){var q=0;var n=0;if(r.mainColor<2){q=r.mainColor+2}else{if(r.mainColor<4){q=r.mainColor-2}}if(r.variation===2){n=4}else{n=4-r.variation}k.setPropertyFieldValue("dropDownOptions","backgroundColor",$.extendMissing({mainColor:q,variation:n},r))}}OperationsManager.endDisableBatch("converToSection")})})})})}}}if(g.templateStructure){var f=g.templateStructure.structures;$.each(f,function(j,h){d(h)})}else{if(g.pagesStructure){$.each(g.pagesStructure.pages,function(h,j){$.each(j.structures,function(l,k){d(k)})})}if(g.masterPages){$.each(g.masterPages,function(h,j){if(j.hierarchyInfo.structures){$.each(j.hierarchyInfo.structures,function(l,k){d(k)})}})}}function d(h){var i=h.elementProperties;if(ElementsTypes[h.type]===ElementsTypes.PagesMenu){b(h)}else{if(h.childElements){$.each(h.childElements,function(j,k){d(k)})}}}})})();(function(){CompatibilityManager.addSiteInformationFix(1.2024,function(i){var k;var h=0;var c=0;var f={};var j={};var b={};var d={};var g;if(i.pagesStructure){PageManager.Events.PageInitialized.one(function(){OperationsManager.disableBatch();PropertiesManager.removeStateAffecting(PageManager.getCurrentPage());PropertiesManager.removeStateAffected(PageManager.getCurrentPage());ElementActivationManager.removeInstanceConnections(PageManager.getCurrentPage());OperationsManager.endDisableBatch()})}function a(l){}})})();(function(){CompatibilityManager.addSiteInformationFix(1.2028,function(b){if(b.templateStructure){$.each(b.templateStructure.structures,function(d,c){a(c)})}if(b.pagesStructure){$.each(b.pagesStructure.pages,function(c,d){$.each(d.structures,function(g,f){a(f)})})}if(b.masterPages){$.each(b.masterPages,function(c,d){if(d.hierarchyInfo.structures){$.each(d.hierarchyInfo.structures,function(g,f){a(f)})}})}function a(c){var f=c.elementProperties;var d=ElementsTypes[c.type];if(d.hasFeature(Features.DataList)&&d.hasFeature(Features.TemplatePagesList)&&d!==ElementsTypes.Gallery&&d!==ElementsTypes.VideoGallery&&d!==ElementsTypes.PostsList){c.type=ElementsTypes.DataListElement.name}if(d===ElementsTypes.PagesMenu){if(f.dropDownOptions&&f.dropDownOptions.animation===Animations.NoAnimation.name){f.dropDownOptions.animation=Animations.Slide.name;f.dropDownOptions.animationSpeed=400;f.dropDownOptions.slideDirection="up"}}if(c.childElements){$.each(c.childElements,function(g,h){a(h)})}}})})();(function(){CompatibilityManager.addSiteInformationFix(1.2043,function(b){var d;if(b.isCoordinator){var d=b.customStatesProperties;c(d)}if(b.templateStructure){var d=b.templateStructure.customStatesProperties;$.each(b.templateStructure.structures,function(h,g){a(g)});c(d)}if(b.pagesStructure){$.each(b.pagesStructure.pages,function(g,h){var j=h.customStatesProperties;$.each(h.structures,function(l,k){a(k)});c(j)})}if(b.masterPages){$.each(b.masterPages,function(g,h){if(h.hierarchyInfo.structures){var j=h.hierarchyInfo.customStatesProperties;$.each(h.hierarchyInfo.structures,function(l,k){a(k)});c(j)}})}function c(g){if(g){$.each(g,function(i,k){if(k.dataInfo){for(var j in k.dataInfo){var h=k.dataInfo[j];$.each(h,function(m,l){f(l.stateValue)})}}})}}function a(g){var j=g.elementProperties;var h=ElementsTypes[g.type];if(h.hasFeature(Features.DataList)){var i=j.dataInfo;f(i)}if(g.childElements){$.each(g.childElements,function(k,l){a(l)})}}$.valueOrDefault();function f(g){if(g&&g.currentData){if(g.currentData.items){$.each(g.currentData.items,function(i,h){$.each(h,function(k,j){if(j&&j.imagePath){h[k]={imageUrl:h[k]}}})})}else{$.each(g.currentData,function(i,h){$.each(h,function(k,j){if(j&&j.imagePath){h[k]={imageUrl:h[k]}}})})}}}})})();(function(){CompatibilityManager.addSiteInformationFix(1.2092,function(b){if(b.templateStructure){$.each(b.templateStructure.structures,function(d,c){a(c)})}if(b.pagesStructure){$.each(b.pagesStructure.pages,function(c,d){$.each(d.structures,function(g,f){a(f)})})}if(b.masterPages){$.each(b.masterPages,function(c,d){if(d.hierarchyInfo.structures){$.each(d.hierarchyInfo.structures,function(g,f){a(f)})}})}function a(d,c){var h=d.id;var g=d.elementProperties;var f=d.type;if((ElementsTypes[f].hasFeature(Features.PageSection)&&g.childrenAnchor!==HorizontalAlignment.Centered)||(ElementsTypes[f].isType(ElementsTypes.userBox)&&(g.fillLayout&&g.fillLayout.fillHorizontal)&&g.childrenAnchor!==HorizontalAlignment.Centered)){ElementsManager.performOnInstancesInitialization([h],function(i){LayoutManager.layoutUpdateBatch.performOperation(function(){var j=ElementsManager.getInstanceByID(i[0]);var k=ElementsLayoutHelper.rememberLayout(j.getChildInstances(),{includeDockedElements:false,rememberLeft:true,rememberTop:false,rememberWidth:false,rememberHeight:false});j.setPropertyValue("childrenAnchor",HorizontalAlignment.Centered);LayoutManager.layoutUpdateBatch.performOperation(function(){k.restoreLayout()})})})}else{if(d.childElements){$.each(d.childElements,function(j,k){a(k)})}}}})})();(function(){CompatibilityManager.addSiteInformationFix(1.2036,function(b){if(b.templateStructure){$.each(b.templateStructure.structures,function(d,c){a(c)})}if(b.pagesStructure){$.each(b.pagesStructure.pages,function(c,d){$.each(d.structures,function(g,f){a(f)})})}if(b.masterPages){$.each(b.masterPages,function(c,d){if(d.hierarchyInfo.structures){$.each(d.hierarchyInfo.structures,function(g,f){a(f)})}})}function a(c){var j=c.elementProperties;var d=ElementsTypes[c.type];if(d.hasFeature(Features.DataList)){var i=j.dataLayout;var f=j.dataInfo;var h=j.dataLayoutOptions;var g=DataLayouts[i.name];if(i.name===DataLayouts.PagesGrid.name&&f.currentData){if(h.elementsPerPage<h.cols){h.cols=h.elementsPerPage}if($.getKeys(f.currentData).length<h.cols){h.cols=$.getKeys(f.currentData).length;h.elementsPerPage=h.cols}}}if(c.childElements){$.each(c.childElements,function(k,l){a(l)})}}})})();(function(){CompatibilityManager.addSiteInformationFix(1.2038,function(b){if(b.templateStructure){$.each(b.templateStructure.structures,function(d,c){a(c)})}if(b.pagesStructure){$.each(b.pagesStructure.pages,function(c,d){$.each(d.structures,function(g,f){a(f)})})}if(b.masterPages){$.each(b.masterPages,function(c,d){if(d.hierarchyInfo.structures){$.each(d.hierarchyInfo.structures,function(g,f){a(f)})}})}function a(c){var g=c.elementProperties;var d=ElementsTypes[c.type];if(d.hasFeature(Features.HasTemplates)){var f=g.fieldsTemplates;$.each(f,function(i,h){$.each(h,function(m,k){var j=HierarchyController.create(k.hierarchy).getStructureIds();var l=k.hierarchy.customStatesProperties;if(l){$.each(l,function(o,n){if(!j[o]){delete l[o]}})}})})}if(c.childElements){$.each(c.childElements,function(h,j){a(j)})}}})})();(function(){CompatibilityManager.addSiteInformationFix(1.2072,function(d){var c;if(d.isCoordinator){var f=d.customStatesProperties;if(f){$.each(f,function(h,i){if(i.fieldsTemplates){$.each(i.fieldsTemplates,function(k,j){$.each(j,function(l,n){var m=i.fieldsTemplates[k][l].stateValue;i.fieldsTemplates[k][l].stateValue=g(m)})})}})}}if(d.templateStructure){var b=d.templateStructure.structures;$.each(b,function(j,h){a(h)});var f=d.templateStructure.customStatesProperties;if(f){$.each(f,function(h,i){if(i.fieldsTemplates){$.each(i.fieldsTemplates,function(k,j){$.each(j,function(l,n){var m=i.fieldsTemplates[k][l].stateValue;i.fieldsTemplates[k][l].stateValue=g(m)})})}})}}if(d.pagesStructure){$.each(d.pagesStructure.pages,function(h,j){c=j;$.each(j.structures,function(m,l){a(l)});var k=j.customStatesProperties;if(k){$.each(k,function(i,l){if(l.fieldsTemplates){$.each(l.fieldsTemplates,function(n,m){$.each(m,function(o,q){var p=l.fieldsTemplates[n][o].stateValue;l.fieldsTemplates[n][o].stateValue=g(p)})})}})}})}if(d.masterPages){$.each(d.masterPages,function(h,j){if(j.hierarchyInfo.structures){$.each(j.hierarchyInfo.structures,function(m,l){a(l)});var k=j.hierarchyInfo.customStatesProperties;$.each(k,function(i,l){if(l.fieldsTemplates){$.each(l.fieldsTemplates,function(n,m){$.each(m,function(o,q){var p=l.fieldsTemplates[n][o].stateValue;l.fieldsTemplates[n][o].stateValue=g(p)})})}})}})}function a(h,i){var k=h.id;var j=h.elementProperties;if(ElementsTypes[h.type]&&ElementsTypes[h.type].hasFeature(Features.HasTemplates)){h.elementProperties.fieldsTemplates=g(h.elementProperties.fieldsTemplates)}else{if(h.childElements){$.each(h.childElements,function(l,m){a(m,i)})}}}function g(i){var h=$.uniqueID();$.each(i,function(k,j){$.each(j,function(o,l){if(l.hierarchy){var n=l.hierarchy.structures[0].type;if(!(n===ElementsTypes.InputItem.name||n===ElementsTypes.skinInputElement.name)){h=$.uniqueID()}if(!ElementsTypes[n].hasFeature(Features.SkinElement)){j[o].hierarchy=SkinEditingManager.convertTemplateToSkinTemplateWithFields(l.hierarchy,undefined,h)}else{var m=$.objectGet(l.hierarchy.structures[0],["elementProperties","skinBinding","hierarchy"]);if(m){m=SkinEditingManager.convertFieldsToTemplate(m);j[o].hierarchy=SkinEditingManager.convertTemplateToSkinTemplateWithFields(m,l.hierarchy.structures[0].type,h)}}}})});return i}});CompatibilityManager.addSiteInformationFix(1.2042,function(d){var c;if(d.isCoordinator){var f=d.customStatesProperties;if(f){$.each(f,function(g,h){if(h.fixedBackground){$.each(h.fixedBackground,function(j,i){$.each(i,function(k,l){h.fixedBackground[j][k].stateValue=false})})}})}}if(d.templateStructure){var b=d.templateStructure.structures;$.each(b,function(h,g){a(g)});var f=d.templateStructure.customStatesProperties;if(f){$.each(f,function(g,h){if(h.fixedBackground){$.each(h.fixedBackground,function(j,i){$.each(i,function(k,l){h.fixedBackground[j][k].stateValue=false})})}})}}if(d.pagesStructure){$.each(d.pagesStructure.pages,function(g,h){c=h;$.each(h.structures,function(l,k){a(k)});var j=h.customStatesProperties;if(j){$.each(j,function(i,k){if(k.fixedBackground){$.each(k.fixedBackground,function(m,l){$.each(l,function(n,o){k.fixedBackground[m][n].stateValue=false})})}})}})}if(d.masterPages){$.each(d.masterPages,function(g,h){if(h.pageProperties){h.pageProperties.fixedBackground=false}if(h.mobilePageProperties){h.mobilePageProperties.fixedBackground=false}if(h.hierarchyInfo.structures){$.each(h.hierarchyInfo.structures,function(l,k){a(k)});var j=h.hierarchyInfo.customStatesProperties;$.each(j,function(i,k){if(k.fixedBackground){$.each(k.fixedBackground,function(m,l){$.each(l,function(n,o){k.fixedBackground[m][n].stateValue=false})})}})}})}function a(g,h){var j=g.id;var i=g.elementProperties;if(g.type===ElementsTypes.page.name){g.elementProperties.fixedBackground=false}}})})();(function(){CompatibilityManager.addSiteInformationFix(1.2049,function(d){var c;if(d.templateStructure){var b=d.templateStructure.structures;$.each(b,function(g,f){a(f)})}if(d.pagesStructure){$.each(d.pagesStructure.pages,function(f,g){c=g;$.each(g.structures,function(j,h){a(h)})})}if(d.masterPages){$.each(d.masterPages,function(f,g){if(g.hierarchyInfo.structures){$.each(g.hierarchyInfo.structures,function(j,h){a(h)})}})}function a(f,h){var k=f.id;var j=f.elementProperties;if(ElementsTypes[f.type]&&ElementsTypes[f.type].hasFeature(Features.HasTemplates)){var g;var i=[];$.each(f.elementProperties.fieldsTemplates,function(m,l){$.each(l,function(q,o){var n=o.hierarchy.structures[0].elementProperties.skinBinding;if(n&&n.type===SkinsBindingsTypes.Inline){var p=n.hierarchy.structures[0].elementProperties.fieldsMap;if(p){$.each(p,function(s,r){$.each(r,function(u,t){if(u+""===DataSourceItemsData.Image+""){r[DataSourceItemsData.Alt]={name:"alt",title:"Alt Tag",type:"alt"};j.itemFields.alt={name:"alt",title:"Alt Tag",type:"alt"}}})})}}})})}else{if(f.childElements){$.each(f.childElements,function(l,m){a(m,h)})}}}})})();(function(){CompatibilityManager.addSiteInformationFix(1.2085,function(d){var c;if(d.isCoordinator){var f=d.customStatesProperties;if(f){$.each(f,function(h,i){if(i.fieldsTemplates){$.each(i.fieldsTemplates,function(k,j){$.each(j,function(l,n){var m=i.fieldsTemplates[k][l].stateValue;i.fieldsTemplates[k][l].stateValue=g(m)})})}})}}if(d.templateStructure){var b=d.templateStructure.structures;$.each(b,function(j,h){a(h)});var f=d.templateStructure.customStatesProperties;if(f){$.each(f,function(h,i){if(i.fieldsTemplates){$.each(i.fieldsTemplates,function(k,j){$.each(j,function(l,n){var m=i.fieldsTemplates[k][l].stateValue;i.fieldsTemplates[k][l].stateValue=g(m)})})}})}}if(d.pagesStructure){$.each(d.pagesStructure.pages,function(h,j){c=j;$.each(j.structures,function(m,l){a(l)});var k=j.customStatesProperties;if(k){$.each(k,function(i,l){if(l.fieldsTemplates){$.each(l.fieldsTemplates,function(n,m){$.each(m,function(o,q){var p=l.fieldsTemplates[n][o].stateValue;l.fieldsTemplates[n][o].stateValue=g(p)})})}})}})}if(d.masterPages){$.each(d.masterPages,function(h,j){if(j.hierarchyInfo.structures){$.each(j.hierarchyInfo.structures,function(m,l){a(l)});var k=j.hierarchyInfo.customStatesProperties;if(k){$.each(k,function(i,l){if(l.fieldsTemplates){$.each(l.fieldsTemplates,function(n,m){$.each(m,function(o,q){var p=l.fieldsTemplates[n][o].stateValue;l.fieldsTemplates[n][o].stateValue=g(p)})})}})}}})}function a(h,i){var k=h.id;var j=h.elementProperties;if(h.type==="NavigationButton"){h.type=ElementsTypes.PagesMenu.name;h.elementProperties=$.extend({},MenuStructuresTemplates.ButtonMenu.structures[0].elementProperties)}if(ElementsTypes[h.type]&&ElementsTypes[h.type].hasFeature(Features.HasTemplates)){h.elementProperties.fieldsTemplates=g(h.elementProperties.fieldsTemplates)}else{if(h.childElements){$.each(h.childElements,function(l,m){a(m,i)})}}}function g(j){if(("MenuButton" in j)&&!("SkinNavigationButton" in j)){j.SkinNavigationButton={"1418717701903":{id:"1418717701903",isDefault:true,hierarchy:{id:1418719980168,structures:[{id:1418719980169,type:"SkinNavigationButton",elementProperties:{skinBinding:{type:"Inline",skinName:1418719980162,index:0,hierarchy:{structures:[{type:"skinHierarchyBox",id:"1418669758058",elementProperties:{tagName:"DIV",behaviours:null,isDisplayedInDesigner:true,isLocked:false,isAbsoluteVisible:true,name:"Skin Element 2",baseName:null,connections:{},templateID:"template1418669758062",templateName:null,order:0,customStates:null,isElementWasEditedInMode:false,attributes:null,metaProps:null,metaItemType:null,metaTitle:null,styleBindingId:1418719980162,styleBindingFields:{backgroundColor:{type:1,properties:{backgroundColor:{boundToProperty:true,fields:{}}}},borderColor0:{type:1,properties:{borderColor:{boundToProperty:false,fields:{left:true,top:true,bottom:true,right:true}}}},borderWidth0:{type:1,properties:{borderWidth:{boundToProperty:false,fields:{left:true,top:true,bottom:true,right:true}}}},roundness:{type:1,properties:{roundness:{boundToProperty:true,fields:{}}}},shadow:{type:1,properties:{shadow:{boundToProperty:true,fields:{}}}},glow:{type:1,properties:{glow:{boundToProperty:true,fields:{}}}},innerShadow:{type:1,properties:{innerShadow:{boundToProperty:true,fields:{}}}},innerGlow:{type:1,properties:{innerGlow:{boundToProperty:true,fields:{}}}}},isSupportsMobile:false,isVisibleInMode:true,isFixed:false,topZIndex:0,elementOpacity:1,staticMargin:{horizontalMargin:0,verticalMargin:0},sizeAndPosition:{left:0,width:28,top:0,height:28},lastResizingSize:{width:28,height:28},glow:{spread:0,blur:0,color:"black"},innerGlow:{spread:0,blur:0,color:"black"},shadow:{top:0,left:0,spread:0,blur:0,color:"black"},innerShadow:{top:0,left:0,spread:0,blur:0,color:"black"},isEditableInExpress:true,fieldsMap:{},display:"fixed",cellItem:null,cellHorizontalAlignment:"none",backgroundColor:"transparent",imageUrl:"",imageLayout:"stretchedToFill",imagePosition:{vertical:"center",horizontal:"center"},imageOpacity:1,backgroundOverlay:"transparent",verticalLayout:"normal",horizontalLayout:"normal",fillLayout:{fillVertical:true,fillHorizontal:true},margin:{top:0,left:0,bottom:0,right:0},isGrowable:{bottom:false,right:false},overflow:false,rowsItems:null,startSelected:false,openInNewTab:false,openInTopWindow:false,fitToContent:false,verticalAlign:"center",horizontalAlign:"center",verticalContentAlign:"middle",horizontalContentAlign:"center",padding:{top:0,left:0,bottom:0,right:0},isVisible:true,borderWidth:{top:0,left:0,bottom:0,right:0},roundness:{topLeft:0,bottomLeft:0,topRight:0,bottomRight:0},borderColor:{top:"Black",left:"Black",bottom:"Black",right:"Black"},borderStyle:{top:"solid",left:"solid",bottom:"solid",right:"solid"}},metaData:{position:{left:-50,top:0},size:{width:28,height:28}},childElements:[{type:"Icon",id:"1418669758061",elementProperties:{tagName:"DIV",behaviours:null,isDisplayedInDesigner:true,isLocked:false,isAbsoluteVisible:true,name:"Icon 2",baseName:null,connections:{},templateID:"template1418669758062",templateName:null,order:1,customStates:null,isElementWasEditedInMode:false,attributes:null,metaProps:null,metaItemType:null,metaTitle:null,styleBindingId:1418719980162,styleBindingFields:{iconColor1:{type:1,properties:{iconColor:{boundToProperty:true,fields:{}}}}},isSupportsMobile:false,isVisibleInMode:true,isFixed:false,topZIndex:0,elementOpacity:1,staticMargin:{horizontalMargin:0,verticalMargin:0},sizeAndPosition:{left:0,width:28,top:0,height:28},lastResizingSize:{width:28,height:28},glow:{spread:0,blur:0,color:"black"},innerGlow:{spread:0,blur:0,color:"black"},shadow:{top:0,left:0,spread:0,blur:0,color:"black"},innerShadow:{top:0,left:0,spread:0,blur:0,color:"black"},display:"fixed",cellItem:null,cellHorizontalAlignment:"none",backgroundColor:"transparent",verticalLayout:"normal",horizontalLayout:"normal",fillLayout:{fillVertical:true,fillHorizontal:true},margin:{top:0,left:0,bottom:0,right:0},padding:{top:0,left:0,bottom:0,right:0},startSelected:false,openInNewTab:false,openInTopWindow:false,isVisible:true,borderWidth:{top:0,left:0,bottom:0,right:0},roundness:{topLeft:0,bottomLeft:0,topRight:0,bottomRight:0},borderColor:{top:"Black",left:"Black",bottom:"Black",right:"Black"},borderStyle:{top:"solid",left:"solid",bottom:"solid",right:"solid"},rotationAngle:0,fitToContent:false,verticalAlign:"center",horizontalAlign:"center",verticalContentAlign:"middle",horizontalContentAlign:"center",iconColor:{mainColor:2,variation:3,opacity:1,brightness:0},iconReference:{collectionName:"public-font-icons",iconName:"navigation2"},iconSize:"auto"},metaData:{position:{left:-50,top:0},size:{width:28,height:28}},isForBackground:true,isForBorder:true}],offset:{left:939,top:255},isForBackground:true,hasBackgroundChild:true,isForBorder:true,hasBorderChilds:true}],connections:{targetConnections:{},sourceConnections:{}},customStatesProperties:{},pageId:"1406762854386",version:1.2044,id:"1418669769376",relativePoint:{left:939,top:255},styleVersion:1418719980167,styleId:1418719980162,fieldsToData:{backgroundColor:{name:"backgroundColor",fieldType:"BackgroundColor",categoryId:"Colors",priority:0,title:"Background",options:{}},iconColor1:{name:"iconColor1",fieldType:"SolidColor",categoryId:"Colors",priority:1,title:"Icon Color",options:{}},borderColor0:{name:"borderColor0",fieldType:"SolidColor",categoryId:"Colors",priority:2,title:"Border",options:{}},borderWidth0:{name:"borderWidth0",fieldType:"Pixels",categoryId:"Border",priority:3,title:"Border Width",options:{fieldVisualizer:"Slider",visualizerOptions:{min:0,max:20}}},roundness:{name:"roundness",fieldType:"Roundness",categoryId:"Border",priority:4,title:"Roundness",options:{}},shadow:{name:"shadow",fieldType:"Shadow",categoryId:"Effects",priority:5,title:"Shadow",options:{}},glow:{name:"glow",fieldType:"Glow",categoryId:"Effects",priority:6,title:"Glow",options:{}},innerShadow:{name:"innerShadow",fieldType:"InnerShadow",categoryId:"Effects",priority:7,title:"Inner Shadow",options:{}},innerGlow:{name:"innerGlow",fieldType:"InnerGlow",categoryId:"Effects",priority:8,title:"Inner Glow",options:{}}},categoriesData:{Colors:{title:"Colors",priority:1,id:"Colors"},Border:{title:"Border",priority:3,id:"Border"},Effects:{title:"Effects",priority:4,id:"Effects"}},fieldsToValues:{},statesAnimations:{}}}}}],version:1.2044},detached:false}};var h=j.SkinNavigationButton["1418717701903"];var i=$.objectGet(h.hierarchy.structures[0],["elementProperties","skinBinding","hierarchy"]);if(i){i=SkinEditingManager.convertFieldsToTemplate(i);h.hierarchy=SkinEditingManager.convertTemplateToSkinTemplateWithFields(i,h.hierarchy.structures[0].type)}}return j}})})();(function(){CompatibilityManager.addSiteInformationFix(1.2058,function(d){var c;if(d.isCoordinator){var f=d.customStatesProperties;if(f){$.each(f,function(h,i){if(i.navigationButtonSettings){$.each(i.navigationButtonSettings,function(k,j){$.each(j,function(m,n){var l=i.navigationButtonSettings[k][m].stateValue;i.navigationButtonSettings[k][m].stateValue=g(l)})})}})}}if(d.templateStructure){var b=d.templateStructure.structures;$.each(b,function(j,h){a(h)});var f=d.templateStructure.customStatesProperties;if(f){$.each(f,function(h,i){if(i.navigationButtonSettings){$.each(i.navigationButtonSettings,function(k,j){$.each(j,function(m,n){var l=i.navigationButtonSettings[k][m].stateValue;i.navigationButtonSettings[k][m].stateValue=g(l)})})}})}}if(d.pagesStructure){$.each(d.pagesStructure.pages,function(h,j){c=j;$.each(j.structures,function(m,l){a(l)});var k=j.customStatesProperties;if(k){$.each(k,function(i,l){if(l.navigationButtonSettings){$.each(l.navigationButtonSettings,function(n,m){$.each(m,function(p,q){var o=l.navigationButtonSettings[n][p].stateValue;l.navigationButtonSettings[n][p].stateValue=g(o)})})}})}})}if(d.masterPages){$.each(d.masterPages,function(h,j){if(j.hierarchyInfo.structures){$.each(j.hierarchyInfo.structures,function(m,l){a(l)});var k=j.hierarchyInfo.customStatesProperties;if(k){$.each(k,function(i,l){if(l.navigationButtonSettings){$.each(l.navigationButtonSettings,function(n,m){$.each(m,function(p,q){var o=l.navigationButtonSettings[n][p].stateValue;l.navigationButtonSettings[n][p].stateValue=g(o)})})}})}}})}function a(h,j){var m=h.id;var l=h.elementProperties;if(ElementsTypes[h.type]&&ElementsTypes[h.type]===ElementsTypes.PagesMenu){var i=h.elementProperties.navigationButtonSettings;if(i&&i.navigationProperties&&i.navigationProperties.SlideNavigation){var k=i.navigationProperties.SlideNavigation;if(k.desktopDirection){k.direction=k.desktopDirection;delete k.desktopDirection}if(k.desktopWidth){k.width=k.desktopWidth;delete k.desktopWidth}if(k.mobileHeight){k.height=k.mobileHeight;delete k.mobileHeight}delete k.mobileWidth;delete k.mobileDirection}}else{if(h.childElements){$.each(h.childElements,function(n,o){a(o,j)})}}}function g(h){if(h&&h.navigationProperties&&h.navigationProperties.SlideNavigation){var i=h.navigationProperties.SlideNavigation;if(i.mobileDirection){i.direction=i.mobileDirection;delete i.mobileDirection}if(i.mobileWidth){i.width=i.mobileWidth;delete i.mobileWidth}if(i.mobileHeight){i.height=i.mobileHeight;delete i.mobileHeight}delete i.desktopWidth;delete i.desktopDirection}return h}})})();(function(){CompatibilityManager.addSiteInformationFix(1.2063,function(c){var b;if(c.isCoordinator){var d=c.customStatesProperties;a(d)}if(c.templateStructure){var d=c.templateStructure.customStatesProperties;a(d)}if(c.pagesStructure){$.each(c.pagesStructure.pages,function(f,g){b=g;var h=g.customStatesProperties;a(h)})}if(c.masterPages){$.each(c.masterPages,function(f,g){if(g.hierarchyInfo.structures){var h=g.hierarchyInfo.customStatesProperties;a(h)}})}function a(f){if(f){$.each(f,function(g,j){if(j.isFixed){for(var i in j.isFixed){var h=j.isFixed[i];$.each(h,function(k,l){j.isFixed[i][k].stateValue=false})}}})}}})})();(function(){CompatibilityManager.addSiteInformationFix(1.208,function(d){var c;if(d.templateStructure){var b=d.templateStructure.structures;$.each(b,function(g,f){a(f)})}if(d.pagesStructure){$.each(d.pagesStructure.pages,function(f,g){c=g;$.each(g.structures,function(j,h){a(h)})})}if(d.masterPages){$.each(d.masterPages,function(f,g){if(g.hierarchyInfo.structures){$.each(g.hierarchyInfo.structures,function(j,h){a(h)})}})}function a(f,g){var i=f.id;var h=f.elementProperties;if(ElementsTypes[f.type]&&ElementsTypes[f.type].hasFeature(Features.HasTemplates)){if(f.type!==ElementsTypes.PostsList.name&&f.type!==ElementsTypes.TagCloud.name){delete f.metaData.dataItemSizeMobile;delete f.metaData.dataItemSizePc}}else{if(f.childElements){$.each(f.childElements,function(j,k){a(k,g)})}}}})})();(function(){CompatibilityManager.addSiteInformationFix(1.2087,function(n){var k={};if(n.isCoordinator){j(n.customStatesProperties)}if(n.templateStructure){var m=n.templateStructure.structures;$.each(m,function(p,o){l(o)});j(n.templateStructure.customStatesProperties)}if(n.pagesStructure){$.each(n.pagesStructure.pages,function(o,p){$.each(p.structures,function(r,q){l(q)});j(p.customStatesProperties)})}if(n.masterPages){$.each(n.masterPages,function(o,p){if(p.hierarchyInfo.structures){$.each(p.hierarchyInfo.structures,function(r,q){l(q)});j(p.hierarchyInfo.customStatesProperties)}})}function l(q){var t=q.elementProperties;if(q.type===ElementsTypes.PagesMenu.name){if(t.dataLayout&&t.dataLayout.name!=="NavigationButton"){var r=q.id;var p=t.dropDownOptions;if(p){t.moreButtonText=p.moreButtonText;t.showDropDownArrow=p.showDropDownArrow!==undefined?p.showDropDownArrow:false;var s=i(p);s.backgroundColor=p.backgroundColor;t.dropDownNavigationSettings={navigation:"DropDownNavigation",navigationProperties:{DropDownNavigation:s}};delete t.dropDownOptions;ElementsManager.performOnInstancesInitialization(r,function(){OperationsManager.disableBatch();var u=ElementsManager.getInstanceByID(r);if(!k[r]){c(u,p)}OperationsManager.endDisableBatch()})}else{if(t.dropDownNavigationSettings){var o=t.dropDownNavigationSettings;if(o.navigationProperties&&o.navigationProperties.DropDownNavigation&&o.navigationProperties.DropDownNavigation.useSkinButton===undefined){o.navigationProperties.DropDownNavigation.useSkinButton=true}}}}}else{if(q.childElements){$.each(q.childElements,function(u,v){l(v)})}}}function j(o){if(o){$.each(o,function(r,s){if(s.dropDownOptions){if(s.dropDownOptions[MobileVersionViewManager.MobileStateName]){var q=s.dropDownOptions[MobileVersionViewManager.MobileStateName]["coordinator"];if(q){var p=q.stateValue;k[r]=true;ElementsManager.performOnInstancesInitialization(r,function(){var t=ElementsManager.getInstanceByID(r);c(t,p)})}}}})}}});function c(l,k){if(l.isType(ElementsTypes.PagesMenu)){var m={type:{name:MobileVersionViewManager.MobileStateName},source:"coordinator"};OperationsManager.disableBatch();var n=i(k);var j=$.extend({},l.getPropertyValue("dropDownNavigationSettings"));j.navigationProperties={DropDownNavigation:n};PropertiesManager.setValueInCustomState(l,"dropDownNavigationSettings",m,j);PropertiesManager.setValueInCustomState(l,"moreButtonText",m,k.moreButtonText);PropertiesManager.setValueInCustomState(l,"showDropDownArrow",m,k.showDropDownArrow!==undefined?k.showDropDownArrow:false);OperationsManager.endDisableBatch()}}function i(j){var l=0;if(j.animation!=="NoAnimation"){l=j.animationSpeed;if(l<50){l=0}else{if(l<=200){l=200}else{if(l<=400){l=400}else{l=800}}}}var k={animationSpeed:l,verticalDistance:j.positionVerticalDistance,verticalTop:j.positionVerticalDistance,horizontalDistance:j.positionHorizontalDistance,horizontalLeft:j.positionHorizontalDistance,horizontalRight:j.positionHorizontalDistance,spacing:j.spacing,useSkinButton:true};return k}function b(k){if(k===undefined){return false}var j=ThemeColorsManager.evaluateColorBinding(k);if(!ColorsHelper.isGradient(j)){j=$.Color(j);return j.getAlpha()!==0}return false}function d(k,l,m){OperationsManager.disableBatch();var j=k.getPropertyValue("dropDownNavigationSettings");var n=$.extend({},j.navigationProperties.DropDownNavigation);n[l]=m;k.setPropertyFieldValue("dropDownNavigationSettings","navigationProperties",{DropDownNavigation:n});OperationsManager.endDisableBatch()}function h(j,l,n,k){var m=l[n];if(m&&m.NormalState&&m.NormalState.value){d(j,k,m.NormalState.value);return true}return false}function a(j,l,m,k){if(!h(j,l,m,k)){if(!h(j,l,m+"0",k)){h(j,l,m+"1",k)}}}function g(k,j){if(b(k)){d(j,"backgroundColor",k);return true}return false}function f(j){if(j.dataLayoutController){var k=j.dataLayoutController.getLastArrangementOptions();if(k.fixedSize&&k.fixedSize.width){d(j,"width",Math.max(k.fixedSize.width,80))}}}})();(function(){CompatibilityManager.addSiteInformationFix(1.2089,function(d){var c;if(d.templateStructure){var b=d.templateStructure.structures;$.each(b,function(g,f){a(f)})}if(d.pagesStructure){$.each(d.pagesStructure.pages,function(f,g){c=g;$.each(g.structures,function(j,h){a(h)})})}if(d.masterPages){$.each(d.masterPages,function(f,g){if(g.hierarchyInfo.structures){$.each(g.hierarchyInfo.structures,function(j,h){a(h)})}})}function a(f,h){var k=f.id;var j=f.elementProperties;if(ElementsTypes[f.type]&&(ElementsTypes[f.type]===ElementsTypes.Gallery||ElementsTypes[f.type]===ElementsTypes.DataListElement||ElementsTypes[f.type]===ElementsTypes.VideoGallery)){var g;var i=[];$.each(f.elementProperties.fieldsTemplates,function(m,l){$.each(l,function(r,p){var o=p.hierarchy?p.hierarchy.structures[0].elementProperties.skinBinding:undefined;if(o&&o.type===SkinsBindingsTypes.Inline){var n=o.hierarchy.structures[0];var q=n.elementProperties.fieldsMap;if(q){$.each(q,function(t,s){if(t===n.id&&s&&!s[DataSourceItemsData.Link]){s[DataSourceItemsData.Link]={name:"link",type:"link",title:"Link"}}})}}})})}else{if(f.childElements){$.each(f.childElements,function(l,m){a(m,h)})}}}})})();(function(){WidgetsManager.registerWidgets({SubmitFormButton:{name:"SubmitFormButton",iconClass:"scalable-icon scalable-icon-action-submit-form",title:"Submit Button",noSelectionMessage:"Choose a button to Submit the Form",commitCallback:function(a,b){ElementActivationManager.connectElement(a[0].id,b.id,Behaviours.SubmitForm,{triggerType:TriggerType.Trigger,triggerName:Triggers.MouseClick.name})},getPanel:function(){return Panels.AllButtonsPanelWindow},predicate:function(b){if(b.length===1){var a=b[0];if(a.hasFeature(Features.Clickable)&&!a.hasFeature(Features.DataListItem)&&!(a.isCalculatedProperty("formID")||a.hasFeature(Features.HasFormData))){return true}else{return"The selected element cannot be used as a submit button."}}else{return"Only one element can be used as a submit button."}}},ClearFormButton:{name:"ClearFormButton",iconClass:"scalable-icon scalable-icon-action-clear-form",title:"Clear Button",noSelectionMessage:"Choose a button to Clear the Form",commitCallback:function(a,b){ElementActivationManager.connectElement(a[0].id,b.id,Behaviours.ClearForm,{triggerType:TriggerType.Trigger,triggerName:Triggers.MouseClick.name})},predicate:function(b){if(b.length===1){var a=b[0];if(a.hasFeature(Features.Clickable)&&!a.hasFeature(Features.DataListItem)&&!(a.isCalculatedProperty("formID")||a.hasFeature(Features.HasFormData))){return true}else{return"The selected element cannot be used as a clear button."}}else{return"Only one element can be used as a clear button."}},getPanel:function(){return Panels.AllButtonsPanelWindow}}})})();(function(){WidgetsManager.registerWidgets({NextButton:{name:"NextButton",iconClass:"scalable-icon scalable-icon-action-navigate-next",title:"Move Next",predicate:function a(c){if(c.length===1){var b=c[0];if(b.hasFeature(Features.Clickable)){return true}else{return"The selected element cannot be used as a Next Button"}}else{return"Only one element can be used as a menu"}},commitCallback:function(b,c){Behaviours.NavigateNext.connectElements(b[0].id,[c.id],{triggerType:TriggerType.Trigger,triggerName:Triggers.MouseClick.name})},getPanel:function(){return Panels.AllButtonsPanelWindow}},PrevButton:{name:"PrevButton",iconClass:"scalable-icon scalable-icon-action-navigate-prev",title:"Move Prev",predicate:function a(c){if(c.length===1){var b=c[0];if(b.hasFeature(Features.Clickable)){return true}else{return"The selected element cannot be used as a Prev Button"}}else{return"Only one element can be used as a menu"}},commitCallback:function(b,c){Behaviours.NavigatePrev.connectElements(b[0].id,[c.id],{triggerType:TriggerType.Trigger,triggerName:Triggers.MouseClick.name})},getPanel:function(){return Panels.AllButtonsPanelWindow}},Menu:{name:"Menu",iconClass:"sprite-icon sprite-tool-category-menus",title:"Menu",predicate:function a(c){if(c.length===1){var b=c[0];if(b.elementType===ElementsTypes.Menu){return true}else{return"The selected element cannot be used as a menu."}}else{return"Only one element can be used as a menu"}},noSelectionMessage:"Choose a button to Move Prev the Navigable Element ",commitCallback:function(b,f){var d;var c=ElementsUtil.getHierarchiesUnion(b);$.each(c,function(h,g){if(g.elementType===ElementsTypes.Menu){d=g}});d.getDataSource().connectToNavigatable(f);MasterPagesManager.setAsPageContentElement(b)},getPanel:function(){return Panels.MenusToolsPanel}}})})();(function(){WidgetsManager.registerWidgets({PlayButton:{name:"PlayButton",iconClass:"scalable-icon scalable-icon-action-play-video",title:"Play Button",noSelectionMessage:"Choose a button to Play the video",predicate:function a(c){if(c.length===1){var b=c[0];if(b.hasFeature(Features.Clickable)){return true}else{return"The selected element cannot be used as a Video Button"}}else{return"Only one element can be used as a menu"}},commitCallback:function(b,c){ElementActivationManager.connectElement(b[0].id,c.id,Behaviours.PlayVideo,{triggerType:TriggerType.Trigger,triggerName:Triggers.MouseClick.name})},getPanel:function(){return Panels.AllButtonsPanelWindow}},StopButton:{name:"StopButton",iconClass:"scalable-icon scalable-icon-action-stop-video",title:"Stop Button",noSelectionMessage:"Choose a button to stop the video",predicate:function a(c){if(c.length===1){var b=c[0];if(b.hasFeature(Features.Clickable)){return true}else{return"The selected element cannot be used as a Video Button"}}else{return"Only one element can be used as a menu"}},commitCallback:function(b,c){ElementActivationManager.connectElement(b[0].id,c.id,Behaviours.StopVideo,{triggerType:TriggerType.Trigger,triggerName:Triggers.MouseClick.name})},getPanel:function(){return Panels.AllButtonsPanelWindow}},PauseButton:{name:"PauseButton",iconClass:"scalable-icon scalable-icon-action-pause-video",title:"Pause Button",noSelectionMessage:"Choose a button to Pause the video",predicate:function a(c){if(c.length===1){var b=c[0];if(b.hasFeature(Features.Clickable)){return true}else{return"The selected element cannot be used as a Video Button"}}else{return"Only one element can be used as a menu"}},commitCallback:function(b,c){ElementActivationManager.connectElement(b[0].id,c.id,Behaviours.PauseVideo,{},Triggers.MouseClick)},getPanel:function(){return Panels.AllButtonsPanelWindow}}})})();(function(){FormFieldsManager.registerFormFields({TextArea:{name:"TextArea",title:"Text Area",iconClass:"sprite-icon sprite-element-text-input",items:{isOptional:{name:"isOptional",title:"Is Optional",create:function(){var a=PropertiesVisualizers.CheckBox.createPlain({});return a}}},setField:function(a,b){}}})})();(function(){FormFieldsManager.registerFormFields({TextInputField:{name:"TextInputField",title:"Text Input",iconClass:"sprite-icon sprite-tool-text-input",items:{isOptional:{name:"isOptional",title:"Is Optional",create:function(){var a=PropertiesVisualizers.CheckBox.createPlain({});return a}}},setField:function(a,b){}}})})();var CommonAssets=new function(){this.Images={CircleBall:AssetsManager.createApplicationAsset(AssetsTypes.Image,"circle-ball.gif")};this.loadImages=function(){var a=[];$.each(CommonAssets.Images,function(c,b){a.push(AssetsManager.resolveImageUrl(b))});ImagesLoader.loadImages(a)}}();
/*!
 * jQuery Templates Plugin 1.0.0pre
 * http://github.com/jquery/jquery-tmpl
 * Requires jQuery 1.4.2
 *
 * Copyright Software Freedom Conservancy, Inc.
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 */
(function(j,g){var u=j.fn.domManip,i="_tmplitem",v=/^[^<]*(<[\w\W]+>)[^>]*$|\{\{\! /,q={},f={},z,y={key:0,data:{}},x=0,r=0,h=[];function l(C,B,E,F){var D={data:F||(F===0||F===false)?F:(B?B.data:{}),_wrap:B?B._wrap:null,tmpl:null,parent:B||null,nodes:[],calls:c,nest:b,wrap:o,html:s,update:A};if(C){j.extend(D,C,{nodes:[],parent:B})}if(E){D.tmpl=E;D._ctnt=D._ctnt||D.tmpl(j,D);D.key=++x;(h.length?f:q)[x]=D}return D}j.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(B,C){j.fn[B]=function(D){var G=[],J=j(D),F,H,E,K,I=this.length===1&&this[0].parentNode;z=q||{};if(I&&I.nodeType===11&&I.childNodes.length===1&&J.length===1){J[C](this[0]);G=this}else{for(H=0,E=J.length;H<E;H++){r=H;F=(H>0?this.clone(true):this).get();j(J[H])[C](F);G=G.concat(F)}r=0;G=this.pushStack(G,B,J.selector)}K=z;z=null;j.tmpl.complete(K);return G}});j.fn.extend({tmpl:function(D,C,B){return j.tmpl(this[0],D,C,B)},tmplItem:function(){return j.tmplItem(this[0])},template:function(B){return j.template(B,this[0])},domManip:function(F,I,H,J){if(F[0]&&j.isArray(F[0])){var C=j.makeArray(arguments),B=F[0],G=B.length,D=0,E;while(D<G&&!(E=j.data(B[D++],"tmplItem"))){}if(E&&r){C[2]=function(K){j.tmpl.afterManip(this,K,H)}}u.apply(this,C)}else{u.apply(this,arguments)}r=0;if(!z){j.tmpl.complete(q)}return this}});j.extend({tmpl:function(D,G,F,C){var E,B=!C;if(B){C=y;D=j.template[D]||j.template(null,D);f={}}else{if(!D){D=C.tmpl;q[C.key]=C;C.nodes=[];if(C.wrapped){t(C,C.wrapped)}return j(n(C,null,C.tmpl(j,C)))}}if(!D){return[]}if(typeof G==="function"){G=G.call(C||{})}if(F&&F.wrapped){t(F,F.wrapped)}E=j.isArray(G)?j.map(G,function(H){return H?l(F,C,D,H):null}):[l(F,C,D,G)];return B?j(n(C,null,E)):E},tmplItem:function(C){var B;if(C instanceof j){C=C[0]}while(C&&C.nodeType===1&&!(B=j.data(C,"tmplItem"))&&(C=C.parentNode)){}return B||y},template:function(C,B){if(B){if(typeof B==="string"){B=m(B)}else{if(B instanceof j){B=B[0]||{}}}if(B.nodeType){B=j.data(B,"tmpl")||j.data(B,"tmpl",m(B.innerHTML))}return typeof C==="string"?(j.template[C]=B):B}return C?(typeof C!=="string"?j.template(null,C):(j.template[C]||j.template(null,v.test(C)?C:j(C)))):null},encode:function(B){return(""+B).split("<").join("&lt;").split(">").join("&gt;").split('"').join("&#34;").split("'").join("&#39;")}});j.extend(j.tmpl,{tag:{tmpl:{_default:{$2:"null"},open:"if($notnull_1){__=__.concat($item.nest($1,$2));}"},wrap:{_default:{$2:"null"},open:"$item.calls(__,$1,$2);__=[];",close:"call=$item.calls();__=call._.concat($item.wrap(call,__));"},each:{_default:{$2:"$index, $value"},open:"if($notnull_1){$.each($1a,function($2){with(this){",close:"}});}"},"if":{open:"if(($notnull_1) && $1a){",close:"}"},"else":{_default:{$1:"true"},open:"}else if(($notnull_1) && $1a){"},html:{open:"if($notnull_1){__.push($1a);}"},"=":{_default:{$1:"$data"},open:"if($notnull_1){__.push($.encode($1a));}"},"!":{open:""}},complete:function(B){q={}},afterManip:function w(D,B,E){var C=B.nodeType===11?j.makeArray(B.childNodes):B.nodeType===1?[B]:[];E.call(D,B);p(C);r++}});function n(B,F,D){var E,C=D?j.map(D,function(G){return(typeof G==="string")?(B.key?G.replace(/(<\w+)(?=[\s>])(?![^>]*_tmplitem)([^>]*)/g,"$1 "+i+'="'+B.key+'" $2'):G):n(G,B,G._ctnt)}):B;if(F){return C}C=C.join("");C.replace(/^\s*([^<\s][^<]*)?(<[\w\W]+>)([^>]*[^>\s])?\s*$/,function(H,I,G,J){E=j(G).get();p(E);if(I){E=a(I).concat(E)}if(J){E=E.concat(a(J))}});return E?E:a(C)}function a(C){var B=document.createElement("div");B.innerHTML=C;return j.makeArray(B.childNodes)}function m(B){return new Function("jQuery","$item","var $=jQuery,call,__=[],$data=$item.data;with($data){__.push('"+j.trim(B).replace(/([\\'])/g,"\\$1").replace(/[\r\t\n]/g," ").replace(/\$\{([^\}]*)\}/g,"{{= $1}}").replace(/\{\{(\/?)(\w+|.)(?:\(((?:[^\}]|\}(?!\}))*?)?\))?(?:\s+(.*?)?)?(\(((?:[^\}]|\}(?!\}))*?)\))?\s*\}\}/g,function(J,D,H,E,F,K,G){var M=j.tmpl.tag[H],C,I,L;if(!M){throw"Unknown template tag: "+H}C=M._default||[];if(K&&!/\w$/.test(F)){F+=K;K=""}if(F){F=k(F);G=G?(","+k(G)+")"):(K?")":"");I=K?(F.indexOf(".")>-1?F+k(K):("("+F+").call($item"+G)):F;L=K?I:"(typeof("+F+")==='function'?("+F+").call($item):("+F+"))"}else{L=I=C.$1||"null"}E=k(E);return"');"+M[D?"close":"open"].split("$notnull_1").join(F?"typeof("+F+")!=='undefined' && ("+F+")!=null":"true").split("$1a").join(L).split("$1").join(I).split("$2").join(E||C.$2||"")+"__.push('"})+"');}return __;")}function t(C,B){C._wrap=n(C,true,j.isArray(B)?B:[v.test(B)?B:j(B).html()]).join("")}function k(B){return B?B.replace(/\\'/g,"'").replace(/\\\\/g,"\\"):null}function d(B){var C=document.createElement("div");C.appendChild(B.cloneNode(true));return C.innerHTML}function p(H){var J="_"+r,C,B,F={},G,E,D;for(G=0,E=H.length;G<E;G++){if((C=H[G]).nodeType!==1){continue}B=C.getElementsByTagName("*");for(D=B.length-1;D>=0;D--){I(B[D])}I(C)}function I(P){var M,O=P,N,K,L;if((L=P.getAttribute(i))){while(O.parentNode&&(O=O.parentNode).nodeType===1&&!(M=O.getAttribute(i))){}if(M!==L){O=O.parentNode?(O.nodeType===11?0:(O.getAttribute(i)||0)):0;if(!(K=q[L])){K=f[L];K=l(K,q[O]||f[O]);K.key=++x;q[x]=K}if(r){Q(L)}}P.removeAttribute(i)}else{if(r&&(K=j.data(P,"tmplItem"))){Q(K.key);q[K.key]=K;O=j.data(P.parentNode,"tmplItem");O=O?O.key:0}}if(K){N=K;while(N&&N.key!=O){N.nodes.push(P);N=N.parent}delete K._ctnt;delete K._wrap;j.data(P,"tmplItem",K)}function Q(R){R=R+J;K=F[R]=(F[R]||l(K,q[K.parent.key+J]||K.parent))}}}function c(D,B,E,C){if(!D){return h.pop()}h.push({_:D,tmpl:B,item:this,data:E,options:C})}function b(B,D,C){return j.tmpl(j.template(B),D,C,this)}function o(D,B){var C=D.options||{};C.wrapped=B;return j.tmpl(j.template(D.tmpl),D.data,C,D.item)}function s(C,D){var B=this._wrap;return j.map(j(j.isArray(B)?B.join(""):B).filter(C||"*"),function(E){return D?E.innerText||E.textContent:E.outerHTML||d(E)})}function A(){var B=this.nodes;j.tmpl(null,null,null,this).insertBefore(B[0]);j(B).remove()}})(jQuery);jQuery.cookie=function(b,k,n){if(typeof k!="undefined"){n=n||{};if(k===null){k="";n.expires=-1}var f="";if(n.expires&&(typeof n.expires=="number"||n.expires.toUTCString)){var g;if(typeof n.expires=="number"){g=new Date();g.setTime(g.getTime()+(n.expires*24*60*60*1000))}else{g=n.expires}f="; expires="+g.toUTCString()}var m=n.path?"; path="+(n.path):"";var h=n.domain?"; domain="+(n.domain):"";var a=n.secure?"; secure":"";document.cookie=[b,"=",encodeURIComponent(k),f,m,h,a].join("")}else{var d=null;if(document.cookie&&document.cookie!=""){var l=document.cookie.split(";");for(var j=0;j<l.length;j++){var c=jQuery.trim(l[j]);if(c.substring(0,b.length+1)==(b+"=")){d=decodeURIComponent(c.substring(b.length+1));break}}}return d}};(function(a){a.fn.clearHoverIntent=function(){clearTimeout(a(this).attr("hoverIntent_t"));a(this).unbind(".hover-intent")};a.fn.hoverIntent=function(l,k){var m={sensitivity:7,interval:100,timeout:0,disable:undefined};m=a.extend(m,k?{over:l,out:k}:l);var o,n,i,d;var h=function(f){o=f.pageX;n=f.pageY};var c=function(g,f){f.hoverIntent_t=clearTimeout(f.hoverIntent_t);if((Math.abs(i-o)+Math.abs(d-n))<m.sensitivity){a(f).unbind("mousemove",h);f.hoverIntent_s=1;return m.over.apply(f,[g])}else{i=o;d=n;f.hoverIntent_t=setTimeout(function(){c(g,f)},m.interval)}};var j=function(g,f){f.hoverIntent_t=clearTimeout(f.hoverIntent_t);f.hoverIntent_s=0;return m.out.apply(f,[g])};var b=function(p){var g=jQuery.extend({},p);var f=this;if(f.hoverIntent_t){f.hoverIntent_t=clearTimeout(f.hoverIntent_t)}if(p.type=="mouseenter"&&(!m.disable||!m.disable())){i=g.pageX;d=g.pageY;a(f).bind("mousemove.hover-intent",h);if(f.hoverIntent_s!=1){f.hoverIntent_t=setTimeout(function(){c(g,f)},m.interval)}}else{a(f).unbind("mousemove",h);if(f.hoverIntent_s==1){f.hoverIntent_t=setTimeout(function(){j(g,f)},m.timeout)}}};a(this).data("hoverIntent",b);return this.bind("mouseenter.hover-intent",b).bind("mouseleave.hover-intent",b)}})(jQuery);
/*!
 * jQuery hashchange event - v1.3 - 7/21/2010
 * http://benalman.com/projects/jquery-hashchange-plugin/
 * 
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
(function($,f,b){var c="hashchange",i=document,g,h=$.event.special,j=i.documentMode,d="on"+c in f&&(j===b||j>7);function a(k){k=k||location.href;return"#"+k.replace(/^[^#]*#?(.*)$/,"$1")}$.fn[c]=function(k){return k?this.bind(c,k):this.trigger(c)};$.fn[c].delay=50;h[c]=$.extend(h[c],{setup:function(){if(d){return false}$(g.start)},teardown:function(){if(d){return false}$(g.stop)}});g=(function(){var k={},q,n=a(),l=function(r){return r},m=l,p=l;k.start=function(){q||o()};k.stop=function(){q&&clearTimeout(q);q=b};function o(){var s=a(),r=p(n);if(s!==n){m(n=s,r);$(f).trigger(c)}else{if(r!==n){location.href=location.href.replace(/#.*/,"")+r}}q=setTimeout(o,$.fn[c].delay)}$.browser.msie&&!d&&(function(){var r,s;k.start=function(){if(!r){s=$.fn[c].src;s=s&&s+a();r=$('<iframe tabindex="-1" title="empty"/>').hide().one("load",function(){s||m(a());o()}).attr("src",s||"javascript:0").insertAfter("body")[0].contentWindow;i.onpropertychange=function(){try{if(event.propertyName==="title"){r.document.title=i.title}}catch(t){}}}};k.stop=l;p=function(){return a(r.location.href)};m=function(w,t){var v=r.document,u=$.fn[c].domain;if(w!==t){v.title=i.title;v.open();u&&v.write('<script>document.domain="'+u+'"<\/script>');v.close();r.location.hash=w}}})();return k})()})(jQuery,this);(function(){ElementsModel.registerDefinition(Features,{ElementBase:{getExtensions:function(i){var j=new ObservableCollection({idFunction:function(l){return l.name}});var k=CollectionObserver.create(j);return{canPush:ObservableFlag.createConditionalPositive(),activatedStates:j,activatedStatesCollection:k,childIndex:ObservableObject.create(),zIndex:ObservableObject.create(),customZIndex:ObservableObject.create(),currentPageId:ObservableObject.create(),hasCellWrapper:ObservableFlag.create(false),canResize:ObservableFlag.createConditionalPositive(),canResizeHorizontally:ObservableFlag.createConditionalPositive(),canResizeVertically:ObservableFlag.createConditionalPositive(),currentStates:{},beforeSaving:SimpleEvent.create(),connectionsList:new ObservableCollection(),isMasterPageElement:ObservableFlag.createConditionalNegative({valueChangeCallback:function(l){}}),isDisplayed:ObservableFlag.createConditionalPositive({valueChangeCallback:function(l){if(ViewManager.isDesignMode()&&(i.elementIsSelected.isTrue()||i.isInSelectionContext.isTrue())&&!l){SelectionManager.unselectAll()}}}),isDisplayedInDesigner:ObservableFlag.createConditionalPositive({valueChangeCallback:function(l){LayoutManager.layoutUpdateBatch.performOperation(function(){i.isDisplayed.setValue(ViewManager.isViewMode()||l||ElementsManager.Flags.IsTempDisplayedInDesigner.isTrue()||ElementsManager.Flags.NoHiddenElementsInDesigner.isTrue(),"isDisplayedInDesigner")})}}),hasBehaviours:ObservableFlag.create(false),hasActions:ObservableFlag.create(false),hasStates:ObservableFlag.create(false),isLocked:ObservableFlag.createConditionalNegative({valueChangeCallback:function(l){i.canMove.setValue(!l,"Locked");if(i.hasFeature(Features.Resizable)){i.canResize.setValue(!l,"Locked")}}}),propertiesChanged:SimpleEvent.create(),canEdit:ObservableFlag.createConditionalPositive(),canMove:ObservableFlag.createConditionalPositive(),canBeHidden:ObservableFlag.createConditionalNegative(),hasOrder:ObservableFlag.createConditionalPositive(),hasHorizontalAlignFlag:ObservableFlag.create(false),hasVerticalAlignFlag:ObservableFlag.create(false),hasHorizontalAlignContentFlag:ObservableFlag.create(false),hasVerticalAlignContentFlag:ObservableFlag.create(false),influenceChanged:SimpleEvent.create(),designerEventsListener:SimpleEvent.createEventListenersGroup(),previewEventsListener:SimpleEvent.createEventListenersGroup(),classesManager:ContextValue.createClassesFlags({getTarget:function(){return i.$element}})}},properties:{tagName:{title:"Html Tag",defaultValue:function(){return HtmlTags.DIV},onChange:function(i,j){}},behaviours:{defaultValue:$.returnNull,onChange:function(i,j){if(!j){this.hasBehaviours.setFalse()}else{if($.getKeys(j.normalBehaviours).length>0||$.getKeys(j.isTemplateBehaviours).length>0){this.hasBehaviours.setTrue()}}}},isDisplayedInDesigner:{defaultValue:$.returnTrue,onChange:function(i,j){if(Global.IsDesigner){if(!j){ElementsManager.HiddenElementsInDesigner.put(this)}else{ElementsManager.HiddenElementsInDesigner.remove(this.id)}this.isDisplayedInDesigner.setValue(j,"property")}}},isLocked:{defaultValue:$.returnFalse,onChange:function(i,j){this.isLocked.setValue(j,"property")}},name:{title:" Name",category:PropertiesCategories.Other,defaultValue:$.returnNull,onChange:h},baseName:{defaultValue:$.returnNull},connections:{defaultValue:function(){return{}}},templateID:{defaultValue:$.returnNull},templateName:{defaultValue:$.returnNull},order:{notForUndoProperty:true,isStateProperty:function(){return true},defaultValue:$.returnNull},customStates:{defaultValue:$.returnNull,onChange:function(k,m){var i=this;if(m!==null){var j=i.getPropertyValue("customStates");var l=$.extend(true,{},i.getPropertyValue("customStates"));$.each(l,function(n,p){if(!ElementStates[n]){var o=$.getValues(p.ids);var q=ElementStatesManager.registerComplexState(o);if(Global.IsDesigner&&q){ElementStatesManager.extendDesignerComplexState(q,o)}if(!q){delete j[n]}}})}}},isElementWasEditedInMode:{isStateProperty:true,defaultValue:$.returnFalse,onChange:function(){return true}}},onInstanceInitialized:function(){var i=this;var j=this.getPropertyValue("connections");if(j){$.each(j,function(k,l){$.each(l,function(n,m){a(i,m)})})}},methods:{isUnique:$.returnFalse,isMandatory:$.returnFalse,disableStyleProperties:function(){return false},hasEditingBehaviour:function(){return false},getDisplayName:function(){var i=this;return i.elementType.title},getManageTitle:function(){var i=this;return i.elementType.title},isFillHorizontal:function(){return false},isFillVertical:function(){return false},wasEditedInMode:function(){return this.getPropertyValue("isElementWasEditedInMode")},setAsEditedInMode:function(i){this.setPropertyValue("isElementWasEditedInMode",i)},hasHorizontalLayout:$.returnFalse,hasVerticalLayout:$.returnFalse,addElementToPage:function(l){var k=this;var j=k.$element;var i=PageManager.getContentWidth();j.appendTo(l.data.pageContentContainer);return j},startEditingOnClick:$.returnFalse,refreshCursor:function(){},hasSourceState:function(j){var i=this.getPropertyValue("customStates");if(i&&i[j]){return true}return false},handleEditingTrigger:$.returnFalse,isForTemplateUse:function(){return this.data.isForTemplateUse||(this.parentInstance&&this.parentInstance.isForTemplateUse())},isTemplateLoaded:function(){return this.data.templateLoaded||(this.parentInstance&&this.parentInstance.isTemplateLoaded())},isInDesignMode:function(){return Global.IsDesigner&&!this.isForTemplateUse()},isInMobileMode:function(){return MobileVersionViewManager.Flags.IsInMobileContext.isTrue()},getWidgets:function(){return WidgetsManager.getWidgetFromInstance(this)},isTemplateItemContent:function(){return this.data.templateInstance!==undefined},getTemplateItemContent:function(){return this.data.templateInstance},setTemplateItemContent:function(i){this.data.templateInstance=i},hasWidgets:function(){return WidgetsManager.hasWidgets(this)},isDataListItem:$.returnFalse,getBorderBox:function(){return this.$elementBorderBox},getPaddingBox:function(){if($.browserVersion().browser==Browser.IE&&$.browserVersion().version<8){return this.$elementContentBox}else{return this.$paddingBox}},changeElementSize:function(i){this.$elementSizeBox.css(i)},getPositionBox:function(){return this.$elementPositionBox},getElementSizeBox:function(){return this.$elementSizeBox},getBackgroundTarget:function(){return this.$elementBackgroundTarget},getBorderTarget:function(){return this.$elementBorderTarget},getContentBox:function(){return this.$elementContentBox},getMainBox:function(){return this.$elementMainBox},getVisibilityTargets:function(){return this.getMainBox()},canSelect:function(){return false},canBeSelected:function(){return false},canBeSelectedInAreaSelection:function(){return false},isChildsCanBeSelectedInAreaSelection:function(){return false},isEditableInExpressMode:function(){return false},getDataItemId:function(){return undefined},getSelectableParent:function(){var i=this;if(!i.parentInstance){return null}if(i.parentInstance.canSelect()){return i.parentInstance}else{return i.parentInstance.getSelectableParent()}},isCalculatedProperty:function(i){return this.elementType.isCalculatedProperty(i)},getContextInstances:function(){return ElementsManager.getAllPageInstances()},isArrangeable:function(){if(ElementsManager.getRootInstance()===this){return false}return true},canDuplicate:function(){return true},showControlBox:function(){if(TemplateEditingManager.Flags.IsInEditingContext.isTrue()&&(this.hasFeature(Features.DataListItem)||this.getTemplateItemContent()!==TemplateEditingManager.getCurrentInstance())){return false}else{if(TemplateEditingManager.Flags.IsInEditingMode.isTrue()&&this.hasFeature(Features.TemplateItem)){return false}}return true},getContentLayer:function(){return this.$elementContentContainer},findBackgroundLayersContainer:function(i){return i.find(".background-layers-container")},showParents:function(l,m){var j=this.getParents(true);for(var k=1;k<j.length;k++){if(j[k].hasFeature(Features.Navigatable)){j[k].navigateTo(j[k-1],l,m)}if(PositionManager.isElementVisible(j[k])){return}}},setToCurrentMode:function(){var i=this;if(ViewManager.isViewMode()){i.setToPreview()}else{i.setToDesign()}},setToPreview:function(){var i=this;PageManager.PageChangingOperation.performOperation(function(){var j=i.isInPreview();if(!j){var k=(j===false)||(j===undefined&&Global.IsDesigner);i.data.inPreview=true;i.switchToPreview(k)}})},isInPreview:function(){return this.data.inPreview},shouldInitInstanceOnPageChange:function(){var i=this;var k=PageManager.getCurrentPage();var j=PageManager.getPrevPage();if(j&&i.isInPreview()&&(i.isMasterPageElement.isFalse()||MasterPagesManager.getMasterPageIDByPage(k.id)!==MasterPagesManager.getMasterPageIDByPage(j.id))){return true}return false},setToDesign:function(){var i=this;if(i.data.inPreview){var j=(i.data.inPreview===true);i.data.inPreview=false;i.switchToDesign(j)}},getVisibleArea:function(){return PositionManager.getElementVisibleArea(this)},showElement:f,hideElement:g,shouldBeDisplayed:function(){return(!this.hasFeature(Features.Hideable)||this.getPropertyValue("isVisible")||ViewManager.isDesignMode())&&this.isVisibleInMode()&&this.isDisplayed.isTrue()&&!this.isDeleted},performWhenVisible:function(n,k){var j=this;if(PositionManager.isElementVisible(this)){n.apply(j)}else{var l=this.visibilityChangedEvent.one(function(){n.apply(j)});if(k){var i=j.pendingWhenVisibleOperations;if(i===undefined){i={};j.pendingWhenVisibleOperations=i}var m=i[k];if(m){m.unbind()}i[k]=l}}},stopVisibilityAnimations:function(){var i=this;if(i.duringVisibilityAnimation){var j=i.getVisibilityTargets();j.stopAnimations()}},getContentProperties:function(){var i=this;return i.elementType.contentProperties}},aggregatedMethods:{definitions:{shouldReferToStateValue:function(j,n,l){var i=this;var m=i.properties[j];var k=ElementsManager.getInstanceByID(l);if(ViewManager.isViewMode()&&!PropertiesManager.getEditedState()&&j==="sizeAndPosition"&&n===MobileVersionViewManager.MobileStateName&&((i.hasFeature(Features.DataListItem)&&i.getItemMainParent()&&!i.getItemMainParent().dataLayoutController.hasItemSpecificSize())||m.customValue!==undefined)){return false}if((j==="order")&&n!==MobileVersionViewManager.MobileStateName){return false}if((j==="sizeAndPosition"||j==="margin")&&!i.hasFeature(Features.DataListItem)&&n!==MobileVersionViewManager.MobileStateName&&(i.parentInstance&&i.parentInstance.isType(ElementsTypes.FormElement)||(k.parentInstance&&k.parentInstance.isType(ElementsTypes.FormElement)))){return false}if(n===MobileVersionViewManager.MobileStateName&&ViewManager.isViewMode()&&!PropertiesManager.getEditedState()&&(m.customValue!==undefined||m.descriptor.isBoundToObservableWithValue(i))){return false}if((i.isContent())&&n===MobileVersionViewManager.MobileStateName&&!i.hasFeature(Features.DataListItem)&&((j==="margin"||j==="sizeAndPosition"))&&!m.descriptor.isBoundToObservableWithValue(i)&&!m.descriptor.isBoundToObservableWithValue(i)&&(!i.hasFeature(Features.HasPropertiesBinding)||!i.isPropertyBoundToStyleField(j))){return false}return true},onDetached:function(){},onAttached:function(){},isDroppable:function(){return this.hasFeature(Features.ItemsContainer)},canDelete:function(){return true},canRedropTo:function(){return !ModeManager.inMode(Modes.CustomStateMode)},getCalculatedPropertyValue:function(j,i){return undefined},setCalculatedPropertyValue:function(i,k,j,l){},onBeforePageOpen:function(){},onBeforePageLeave:function(){var i=this;if(i.shouldInitInstanceOnPageChange()){BehavioursManager.initBehaviours(i)}},onSelectedInDesigner:$.noop,updateInstanceToViewPort:$.noop,removeInstanceFromViewPort:$.noop,adjustInstanceToViewPort:$.noop,switchToPreview:function(j){var i=this;BehavioursManager.activateBehaviours(i);if(Global.IsDesigner){ElementsManager.Flags.IsTempDisplayedInDesigner.setValue(true,"InViewer")}},switchToDesign:function(i){this.currentStates={};if(i){this.$element.stop(true,true)}ElementsManager.Flags.IsTempDisplayedInDesigner.setValue(false,"InViewer");BehavioursManager.deactivateBehaviours(this)},initializeForDesigner:function(){},onPropertyChange:function(k,j,i){},onPropertiesChanged:function(i){},getDisabledProperties:function(){return{}},getConnection:function(k,i){var j=this.getPropertyValue("connections");if(j[k]){if(j[k][i]){return j[k][i]}}return undefined},hasClickableConnections:function(){var j=this.getPropertyValue("connections");var i=false;$.each(j,function(k,l){if(Rolls[k]&&Rolls[k].isClickable){i=true;return false}});return i},removeConnection:function(k,i){var j=$.extend({},this.getPropertyValue("connections"));if(j[k]){if(j[k][i]){d(this,j[k][i]);delete j[k][i];this.setPropertyValue("connections",j)}}},onRemove:function(){var i=this;var j=this.getPropertyValue("connections");$.each(i.bindings,function(l,m){m.unbind()});if(j&&j!==null){$.each(j,function(l,m){$.each(m,function(o,n){d(i,n)})})}if(i.connectionsList.getItemsLength()>0){var k=i.connectionsList.getItemsValues();$.each(k,function(l,m){var n=ElementsManager.getInstanceByID(m.id);if(n){n.removeConnection(m.name,m.id)}})}},adjustInstanceToContext:function(i){},getMetaDataForSaving:function(){var i=this;var j=this.data.structureMetaData;return $.extend({},{position:j?j.position:undefined,size:j?j.size:undefined},PositionManager.getInstanceLastPositionAndSize(i.id))}}},initialize:b}});function b(j){var i=this}function h(j,k,l,i){if(i){this.setPropertiesValues({baseName:k})}}function g(l){var i=this;l=$.extend({animation:Animations.NoAnimation,complete:$.noop,animationOptions:undefined},l);var j=l.complete;var m=l.animation;var n=l.animationOptions;var k=i.getVisibilityTargets();k.stopAnimations();i.duringVisibilityAnimation=true;i.isVisible=false;k.animateHide(m,n,function(){i.duringVisibilityAnimation=false;if(!i.isDeleted){c(i,j)}});if(m!==Animations.NoAnimation){return k.promise()}else{return undefined}}function c(i,j){i.$element.addClass("hidden-design-element");PositionManager.visibilityTreeDetach(i);j()}function f(m){var i=this;if(!i.shouldBeDisplayed()){return}m=$.extend({animation:Animations.NoAnimation,complete:$.noop,animationOptions:undefined},m);var j=m.complete;var n=m.animation;var o=m.animationOptions;LayoutManager.beginLayoutUpdateBatch();var l=i.getVisibilityTargets();if(!i.isVisible){l.stopAnimations().quickShow();i.isVisible=true;i.$element.removeClass("hidden-design-element")}PositionManager.visibilityTreeAttach(i);var k=PositionManager.isElementVisible(i);LayoutManager.endLayoutUpdateBatch();if(k){if(n!==Animations.NoAnimation){i.duringVisibilityAnimation=true;return l.quickHide().animateShow(n,o,function(){i.duringVisibilityAnimation=false;j();LayoutManager.requestUpdatePosition(i)}).promise()}else{j();LayoutManager.requestUpdatePosition(i)}}return undefined}function d(i,j){if(j&&j!==null){ElementsManager.performOnInstancesCreated(j.targetId,function(){var k=ElementsManager.getInstanceByID(j.targetId);if(k&&Rolls[j.name]){if(i.data.isActivated){i.data.isActivated[j.targetId+j.name]=false}Rolls[j.name].removeRoll(i,k);k.connectionsList.remove(i.id)}})}}function a(i,j){if(!i.data.isActivated){i.data.isActivated={}}if(j&&j!==null&&!i.data.isActivated[j.targetId+j.name]){ElementsManager.performOnInstancesCreated(j.targetId,function(){if(!i.data.isActivated[j.targetId+j.name]){i.data.isActivated[j.targetId+j.name]=true;var l=ElementsManager.getInstanceByID(j.targetId);if(l&&Rolls[j.name]){Rolls[j.name].setRoll(i,l,j.options);var k={id:i.id,name:j.name};l.connectionsList.put([k])}}})}}})();(function(){ElementsModel.registerDefinition(Features,{HasSkinBinding:{methods:{getSkinBinding:function(){},getStyleObject:function(){var a=this.getSkinBinding();var b=StylesManager.getStyle(a.skinName+a.index);return b},getSkinTitle:function(){return this.elementType.title},getStyleFieldsMetaData:function(){var a=this.getSkinBinding();var c=SkinsManager.getSkinHierarchy(a);var b=StylesManager.getStyle(a.skinName+a.index);return{styleVersion:c.styleVersion,fieldsMetaData:c.fieldsToData,categoriesData:c.categoriesData}},isSupportsMobile:function(){return(this.getStyleObject().isSupportsMobile()&&this.getPropertyValue("isSupportsMobile"))||(this.isMobileOnlyStyle())},getDefaultEditingState:function(){if(MobileVersionViewManager.Flags.IsInMobileContext.isTrue()&&this.getStyleObject().isSupportsMobile()){return ElementStates[MobileVersionViewManager.MobileStateName]}else{return ElementStates.NormalState}},rememberStyle:function(d){var a=this;var c=a.getStyleObject();var b=StylesManager.getStyleInformation(c.id);return{restore:function(){if(d){var f=a.getStyleObject();StylesManager.updateStyleState(f.id,d,b.fields,b.statesAnimations)}}}},getInstanceForStatePreview:function(){},getInstanceForEditTemplate:function(){},updateSkinBindingFromEditingTemplate:function(){},isMobileOnlyStyle:function(){return false}},aggregatedMethods:{aggregations:{changeMobileSupportState:function(a){if(!this.isMobileOnlyStyle()){this.getStyleObject().toggleMobileSupport(a,true)}}}},onInstanceInitialized:function(){var a=this;var b=a.getSkinBinding();var c=b.skinName+b.index;if(!StylesManager.isStyleExist(c)){var f=SkinsManager.getSkinHierarchy(b);if(!f){ElementsManager.removeInstances([a]);return}var d=f.fieldsToValues;var g=f.statesAnimations;StylesManager.addStyle(c,d,g)}}}})})();(function(){ElementsModel.registerDefinition(Features,{HasResponsiveItem:{defaultProperties:{display:function(){return ElementDisplay.Fixed}},properties:{display:{isStateProperty:true,onChange:function(){}},cellItem:{isStateProperty:true,defaultValue:$.returnNull},cellHorizontalAlignment:{isStateProperty:true,defaultValue:function(){return CssHorizontalAlignment.None},onChange:function(a,b){this.refreshCellHorizontalAlignment()}}},methods:{shouldBeBlockElementInMobile:function(){return false},isBlock:function(){return(this.hasCellWrapper.isTrue()&&this.getPropertyValue("display")===ElementDisplay.Block)||this.isFillHorizontal()},addToCellItem:function(){var a=this;this.$element.appendTo(this.getCellItem().getElementContainer());a.classesManager.set({"is-in-cell-item":true});a.sizeElementClassesManager.set({"is-cell-item-size-box":true});a.contentBoxElementClassesManager.set({"is-cell-item":true});this.refreshCellHorizontalAlignment();if(a.hasFeature(Features.HasLayout)){a.propertyChangedEvent.bindAndExecute("display",function(){var b=a.getPropertyValue("display")===ElementDisplay.Fixed;a.canResizeHorizontally.setValue(b,"mobileFillLayout");a.classesManager.set({"design-element-inline-block":b});a.sizeElementClassesManager.set({"is-size-box-inline-block":b});LayoutManager.refreshElementsLayout(a)},"mobileFillLayout")}},removeElementFromCellItem:function(){this.$element.detach();this.classesManager.set({"is-in-cell-item":false,"design-element-inline-block":false});this.sizeElementClassesManager.set({"is-cell-item-size-box":false,"is-size-box-inline-block":false});this.contentBoxElementClassesManager.set({"is-cell-item":false})},reAttachElementToContainer:function(){this.$element.appendTo(this.$container);this.classesManager.set({"is-in-cell-item":false,"design-element-inline-block":false});this.sizeElementClassesManager.set({"is-cell-item-size-box":false,"is-size-box-inline-block":false});this.contentBoxElementClassesManager.set({"is-cell-item":false});this.propertyChangedEvent.unbind("mobileFillLayout");this.canResizeHorizontally.setValue(true,"mobileFillLayout")},getCellItem:function(){return this.data.cellItem},setCellItem:function(a){this.data.cellItem=a;this.hasCellWrapper.setValue(a!==undefined&&a!==null)},refreshCellHorizontalAlignment:function(){if(this.getCellItem()){var a=this.getPropertyValue("cellHorizontalAlignment");if(a!==CssHorizontalAlignment.None){this.getCellItem().$element.css({"text-align":"{0}".format(a)})}else{this.getCellItem().$element.css({"text-align":""})}}},updateCellItemData:function(a){this.setPropertyValue("cellItem",a?a.getDataForSave():null)},getCellItemData:function(){return this.getPropertyValue("cellItem")},removeCellItem:function(){this.updateCellItemData(null);delete this.data.cellItem},shouldInstanceWrapWithCell:function(){return !this.isContent()},getContainmentArea:function(){if(!this.$container){return{left:null,top:null,width:null,height:null}}var a;if(this.isRelativePositioned()){a=this.getCellItem().$element.elementSize()}else{a=this.$container.elementSize()}return $.getArea({left:0,top:0},a)},getMaxSize:function(){var a=this;if(a.hasCellWrapper.isTrue()&&a.getCellItem()&&!a.isDataListItem()&&!a.parentInstance.isType([ElementsTypes.userBox,ElementsTypes.Tab])){var b=PageManager.getCoordinator().getPropertyValue("innerRowPadding");return{height:Infinity,width:a.getCellItem().getCellWidth()-(b*2)}}else{if(MobileVersionViewManager.Flags.IsInMobileContext.isTrue()&&this.parentInstance){return this.parentInstance.getMaxSize()}else{return{height:Infinity,width:Infinity}}}},isRelativePositioned:function(){var a=this;return a.isRelativePositionedFlag.isTrue()||(MobileVersionViewManager.Flags.IsActivated.isTrue()&&this.isConvertedToMobile())}},aggregatedMethods:{aggregations:{getAutoLayoutProperties:function(a){if(this.hasCellWrapper.isTrue()){return $.extend(a,{left:this.isBlock(),width:this.isBlock()})}return a},onPropertiesChanged:function(b){var a=this;if($.containsOneOfKeys(b,"isVisibleInMode")&&MobileVersionViewManager.Flags.IsActivated.isTrue()&&PropertiesManager.inStateEditingMode()){}}}},initialize:function(){var a=this}}})})();(function(){ElementsModel.registerDefinition(Features,{HasDataSource:{properties:{dataInfo:{title:"Data Info",defaultValue:$.returnNull,isNotForCustomProperty:true,priority:-997,shouldStartBatch:true,onChange:function(b,f){var a=this;if(f&&this.elementType===ElementsTypes.Menu&&f.itemsMap===undefined&&f.currentData){if(f.currentData.itemsMap&&$.getKeys(f.currentData.itemsMap).length>0){f.itemsMap=f.currentData.itemsMap}else{f.itemsMap={}}f.currentData.itemsMap=undefined}if(a.isInitialized){a.getDataSource().setDataInfo();var c=a.getDataSource().getAllDataItems();var d={};var g=a.getPropertyValue("itemsStyle");if(g){$.each(g,function(i,h){if(c[i]){d[i]=h}});a.setPropertyValue("itemsStyle",d)}}}},itemFields:{title:"item fields",onChange:function(){}}},methods:{getDataSource:function(){return this.data.dataSource},getAllItemsIds:function(d){var c=this;var a=$.getValues(c.getDataSource().getAllDataItems());var b=[];$.each(a,function(f,g){if(!g.fieldTypeName||g.fieldTypeName===d){b.push(g.id)}});return b},getDataSourceName:function(){var a=this;return a.id},getDataSourceDefinition:function(){return DataSourcesDefinitions.InlineDataSource},initializeDataSource:function(){var a=this;a.data.dataSource=DataSourcesManager.loadDataSource(a.getDataSourceDefinition(),a.getDataSourceName(),undefined,a.id)},getItemFieldsToRequest:function(){var a=this;return $.getKeys(a.getDataSource().getItemFields())}},aggregatedMethods:{definitions:{onItemChanged:function(){},onDataSourceRefresh:function(){}},aggregations:{onRemove:function(){var a=this;var b=a.getDataSource();if(b){b.dataSourceRemoved.fire(b);delete DataSources[this.getDataSourceName()]}},switchToPreview:function(){if(Global.IsDesigner){}},switchToDesign:function(){}}},onInstanceCreated:function(){this.initializeDataSource()},initialize:function(){},onInstanceInitialized:function(){this.getDataSource().setDataInfo()}}})})();var PropertiesBindingTypes={StyleBinding:1,PropertyBinding:2};(function(){ElementsModel.registerDefinition(Features,{HasPropertiesBinding:{getExtensions:function(a){return{styleBindingsGroup:SimpleEvent.createEventListenersGroup()}},properties:{styleBindingId:{defaultValue:$.returnNull},styleBindingFields:{defaultValue:$.returnNull}},methods:{refreshStyleBinding:function(){var a=this;a.styleBindingsGroup.clear();var b=this.getPropertyValue("styleBindingId");var c=this.getPropertyValue("styleBindingFields");if(a.hasBindingToFields()){var d={};a.data.propertiesToStyleFieldsMap=d;$.each(c,function(h,g){var f=SkinsManager.getFieldValueChangedEvent(a,g,h);if(f){SimpleEvent.createEventListener(f,function(){OperationsManager.beginAtomicBatch();$.each(g.properties,function(i,j){PropertiesManager.refreshPrioritisedCustomStates(a,i);PropertiesManager.recomputePropertyValue(a,i,false)});OperationsManager.endAtomicBatch()}).addToGroup(a.styleBindingsGroup)}$.each(g.properties,function(i,j){var k=$.objectGet(d,[i,h]);k=$.extend({},k,j);$.objectSet(d,[i,h],k)})});$.each(d,function(f,g){PropertiesManager.refreshPrioritisedCustomStates(a,a.properties[f])});if(PositionManager.isElementVisible(a)){a.styleBindingsGroup.activateAndExecuteAll()}else{a.styleBindingsGroup.deactivateAll()}}},bindPropertyToField:function(d,b,g,c){c=$.valueOrDefault(c,PropertiesBindingTypes.StyleBinding);var a=$.extend({},this.getPropertyValue("styleBindingFields"));var f=$.objectGet(a,[g,"properties",d]);a[g]=$.extend({},a[g],{type:c});f=f?f:{boundToProperty:b?false:true,fields:{}};if(b){f.fields[b]=true}else{f.boundToProperty=true;f.fields={}}$.objectSet(a,[g,"properties",d],f);this.setPropertyValue("styleBindingFields",a)},unbindPropertyToField:function(c,b,f){var a=$.extend({},this.getPropertyValue("styleBindingFields"));a=$.objectGetAndClone(a,[f,"properties",c,"fields"]);var d=$.objectGet(a,[f,"properties",c]);if(d){if(b&&d&&!d.boundToProperty){delete d.fields[b];if($.getKeys(d.fields).length>0){$.objectSet(a,[f,"properties",c],d)}else{delete a[f].properties[c]}}else{delete a[f].properties[c]}}this.setPropertyValue("styleBindingFields",a)},clearAllBindings:function(b){var a=$.extend({},this.getPropertyValue("styleBindingFields"));var c=$.extend({},a);$.each(a,function(f,d){if(!b||a[f].type===b){delete c[f]}});this.setPropertyValue("styleBindingFields",c)},removeField:function(b){var a=$.extend({},this.getPropertyValue("styleBindingFields"));delete a[b];this.setPropertyValue("styleBindingFields",a)},hasBindingToFields:function(){var a=this.getPropertyValue("styleBindingId");var b=this.getPropertyValue("styleBindingFields");return(a&&b&&$.getKeys(b).length>0)},applyDelegatedPropertiesOnInstance:function(b){var a=this;$.each(b.delegatedProperties,function(d,c){var f={};f[d]={instance:a,propertyName:d};SkinEditingManager.bindPropertiesToField(f,d,PropertiesBindingTypes.PropertyBinding)})},setSkinInstanceBox:function(a){this.data.skinInstanceBox=a},getSkinInstanceBox:function(){if(SkinEditingManager.isDuringEditing()&&SkinEditingManager.getCurrentInstance()){return SkinEditingManager.getCurrentInstance()}return this.data.skinInstanceBox},getMainSkinInstance:function(){var a=this.getSkinInstanceBox();return a?a.getMainSkinInstance():undefined},getStyleFieldData:function(g,p){p=$.extend({stateName:undefined,sourceId:undefined,defaultValue:undefined,customStateData:undefined},p);var m=this;var n=p.stateName;var l=p.sourceId;var i=p.defaultValue;var d=p.customStateData;var b={value:$.extendIfObject(i),animation:undefined};var k=m.properties[g];var o=m.getStyleFieldsNames(g);var h=m.getPropertyValue("styleBindingId");var f=m.getPropertyValue("styleBindingFields");$.each(o,function(u,j){var j=o[u];if(j){var t=f[u];var s=SkinsManager.evaluateSkinFieldStateValue(m,{bindingData:t,fieldName:u,stateName:n,sourceId:l});if(s){var r=$.extendIfObject(s.value);var q=$.extendIfObject(s.animation);if(r!==undefined){if(!j.boundToProperty){$.each(j.fields,function(v,w){$.objectSet(b,["value",v],r)})}else{b.value=r}}b.animation=$.extendValueWithDefaultValue(q,b.animation)}}});if(k.descriptor.valueConverter!==undefined&&b.value!==undefined&&b.value!==null){var a=$.makeArray(k.descriptor.valueConverter);for(var c=0;c<a.length;c++){b.value=a[c](b.value)}}if(b.value===undefined){if(d&&$.isPlainObject(d.stateValue)){b.value=$.extend({},d.stateValue)}}return b},setStyleBindingId:function(a){this.setPropertyValue("styleBindingId",a)},getStyleBindingId:function(){return this.getPropertyValue("styleBindingId")},getPrioritizedStates:function(c){var g=this;var i=this.data.propertiesToStyleFieldsMap;var j=[];if(i){var a=i[c];var f=g.getStyleBindingId();var b=g.getPropertyValue("styleBindingFields");var h=$.getKeys(a);if(b[h[0]].type===PropertiesBindingTypes.StyleBinding){var d=StylesManager.getStatesInformation(f,h,function(k){k.affectingInstanceID=g.getSkinInstanceBox().id;k.styleFieldState=true;return k});j=$.merge(d,j)}}return j},isPropertyBoundToStyleField:function(a){var c=this.data.propertiesToStyleFieldsMap;var b=this.getPropertyValue("styleBindingFields");return c&&c[a]&&(b[$.getKeys(c[a])[0]].type===PropertiesBindingTypes.StyleBinding||!SkinEditingManager.isDuringEditing())},getStyleFieldsNames:function(a){var b=this.data.propertiesToStyleFieldsMap;if(b){return b[a]}return}},aggregatedMethods:{aggregations:{onPropertiesChanged:function(b){var a=this;if(!a.isInitialized){return}if($.containsOneOfKeys(b,"styleBindingId","styleBindingFields")){a.refreshStyleBinding()}},onRemove:function(){var a=this;a.styleBindingsGroup.clear()},switchToPreview:function(){var a=this;var b=this.data.propertiesToStyleFieldsMap;if(b){$.each(b,function(c,d){PropertiesManager.refreshPrioritisedCustomStates(a,a.properties[c])})}}}},onInstanceInitialized:function(){var a=this;this.bindings.push(this.visibilityChangedEvent.bind(function(b){if(PositionManager.isElementVisible(a)){a.styleBindingsGroup.activateAndExecuteAll()}else{a.styleBindingsGroup.deactivateAll()}}));a.refreshStyleBinding()}}})})();(function(){ElementsModel.registerDefinition(Features,{HasPadding:{getExtensions:function(b){return{}},methods:{},aggregatedMethods:{aggregations:{}},properties:{padding:{title:"Padding",isStateProperty:true,isStyleProperty:true,priority:996,defaultValue:function(){return{top:0,left:0,bottom:0,right:0}},valueConverter:[StructureLoadingManager.createRoundPropertyValueConverter(["top","left","bottom","right"])],category:PropertiesCategories.Padding,supportsStatesTransitionAnimation:true,onChange:a,scaleProperty:function(b){return{bottom:b.y,right:b.x,top:b.y,left:b.x}}}}}});function a(d,h,i){var b=this;var c=b.getPaddingBox();if($.browserVersion().browser==Browser.IE&&$.browserVersion().version<8){var f={marginLeft:h.left,marginTop:h.top,marginBottom:h.bottom,marginRight:h.right}}else{var f={paddingLeft:h.left,paddingTop:h.top,paddingBottom:h.bottom,paddingRight:h.right}}c.stop("propertyPadding",true);if(i===undefined){c.css(f);g(b)}else{c.animate(f,{duration:i.transitionDuration,step:function(){g(b)},complete:function(){g(b)},queue:"propertyPadding"});c.dequeue("propertyPadding")}function g(j){j.handleContentSizeChange();LayoutManager.refreshElementsLayout(j)}}})();(function(){ElementsModel.registerDefinition(Features,{RootElement:{}})})();(function(){var a={ResizeGrip:{group:"page-element-templates",name:"resize-grip-template"}};ElementsModel.registerDefinition(Features,{HasResizingGrip:{properties:{resizingGripPosiotion:{defaultValue:function(){return"s"}}},methods:{getHandlePosition:function(){return PositionManager.getElementArea(this).bottom-1},getResizingGrip:function(){return this.data.resizeGrip.$marking}},aggregatedMethods:{aggregations:{switchToPreview:function(){if(this.data.instanceSizeAndPositionListener){this.data.instanceSizeAndPositionListener.deactivate()}},switchToDesign:function(){this.data.instanceSizeAndPositionListener.activateAndExecute()},onRemove:function(){this.data.resizeGrip.remove()}}},initialize:function(){var b=this;if(b.isInDesignMode()){var f=Ruler.addHorizontalGridLine("horizontal-ruler-2");var d=f.$marking.disableSelectionTriggering();var g=$("<span class='resizing-grip-dragging-area'></span>").appendTo(d);var c=b.getPropertyValue("resizingGripPosiotion");if(c==="s"){d.addClass("page-resize-grip-bottom")}else{if(c==="n"){d.addClass("page-resize-grip-top")}}ResizingManagerNew.setAsResizingHandle(g,{contextSelector:function(){return b},direction:c,useGrid:$.returnFalse});var h=SimpleEvent.createEventListener([b.sizeChangedEvent,b.offsetChangedEvent,{name:"borderWidth",event:b.propertyChangedEvent}],function(){if(PositionManager.isElementVisible(b)){f.setCoordinate(b.getHandlePosition())}});MobileVersionViewManager.MobileRefreshingPositionsBatch.bind(function(){f.$marking.toggleDisplayed(false,"mobile-positioning")},function(){f.$marking.toggleDisplayed(true,"mobile-positioning")});h.activateAndExecute();b.data.instanceSizeAndPositionListener=h;b.data.resizeGrip=f;d.bindStateToFlag(TemplateEditingManager.Flags.IsInEditingMode,{stateType:StatesTypes.Displaying,stateToggledValue:false});SimpleEvent.bind([b.visibilityChangedEvent,PageManager.Events.PageChanged,MasterPagesManager.CurrentMasterPageChanged,MasterPagesManager.MasterPageEditingModeChanged],function(){if(b.isInstanceVisible()){d.toggleDisplayed(true,"visibility")}else{d.toggleDisplayed(false,"visibility")}})}}}})})();(function(){ElementsModel.registerDefinition(Features,{HasBackgroundOverlay:{properties:{backgroundOverlay:{title:"Background Overlay",isStyleProperty:true,isStateProperty:true,supportsStatesTransitionAnimation:true,supportsThemeBinding:true,defaultValue:$.returnTransparent,getResetValue:$.returnTransparent,category:PropertiesCategories.Background,onChange:function(d,i,c,h){var j=this;i=ThemeColorsManager.evaluateColorBinding(i,true);var g=j.getBackgroundLayer(BackgroundLayers.BackgroundOverlay);if(i!=="transparent"&&!g){g=j.addBackgroundLayer(BackgroundLayers.BackgroundOverlay,function(){var l=new StringBuilder();l.append('<span class="element-overlay-layer element-border-target" style="background-color: transparent;">');l.conditionalAppend(Global.IsExplorerMode,'<span class="element-background-target-explorer"></span>');l.append("</span>");return $(l.toString())});j.setBorderTarget(g)}if(g){var f=$.getBackgroundType(i);var k=$.getBackgroundType(h);if(f!==BackgroundType.Color||k!==BackgroundType.Color){c=undefined}var a=(k===undefined);var b=g;if(Global.IsExplorerMode){b=g.find(".element-background-target-explorer")}if(!a){b.clearBackground()}if(f===BackgroundType.Gradient){b.setGradient($.valueOrDefault(i.orientation,Orientation.Vertical),i.gradient)}else{j.animatePart(b,{rgbaBackground:i},{"background-color":i},c,{isInitialization:a})}}}}}}})})();(function(){ElementsModel.registerDefinition(Features,{ExpressMode:{properties:{isEditableInExpress:{defaultValue:$.returnTrue}},onInstanceInitialized:function(){var a=this},methods:{isEditableInExpressMode:function(){return this.getPropertyValue("isEditableInExpress")}}}})})();(function(){ElementsModel.registerDefinition(Features,{SeoElement:{properties:{attributes:{defaultValue:$.returnNull,onChange:function(a){}},metaProps:{defaultValue:$.returnNull,onChange:function(a){}},metaItemType:{defaultValue:$.returnNull,onChange:$.noop},metaTitle:{defaultValue:$.returnNull,onChange:$.noop}},aggregatedMethods:{aggregations:{switchToPreview:function(d){var a=this;var b=a.$element;var c=a.getPropertyValue("metaTitle");var f=a.getPropertyValue("metaItemType");if(f){b.attr("itemtype",f)}if(c){b.attr("title",c)}},switchToDesign:function(c){var a=this;var b=a.$element;if(c){b.removeAttr("title");b.removeAttr("itemtype")}}}}}})})();var SeoItemTypes={person:{name:"person",title:"Person",value:"http://schema.org/Person"},event:{name:"event",title:"Event",value:"http://schema.org/Event"},movie:{name:"movie",title:"Movie",value:"http://schema.org/Movie"},song:{name:"song",title:"Song",value:"http://schema.org/Song"},creativeWork:{name:"creativeWork",title:"Creative Work",value:"http://schema.org/CreativeWork"},book:{name:"book",title:"Book",value:"http://schema.org/Book"},musicRecording:{name:"musicRecording",title:"Music Recording",value:"http://schema.org/MusicRecording"},Organization:{name:"Organization",title:"Organization",value:"http://schema.org/Organization"},place:{name:"place",title:"Place",value:"http://schema.org/Place"},localBusiness:{name:"localBusiness",title:"Local Business",value:"http://schema.org/LocalBusiness"},restaurant:{name:"restaurant",title:" Restaurant",value:"http://schema.org/ Restaurant"},product:{name:"product",title:"Product",value:"http://schema.org/Product"},offer:{name:"offer",title:"Offer",value:"http://schema.org/Offer"},review:{name:"review",title:"Review",value:"http://schema.org/Review"},product:{name:"product",title:"Product",value:"http://schema.org/Product"}};(function(){ElementsModel.registerDefinition(Features,{SimpleDataList:{methods:{},aggregatedMethods:{aggregations:{}}}})})();var NavigationDuringTransitionBehaviour={StopTransition:1,IgnoreNavigation:2,EnqueueNavigation:3};(function(){ElementsModel.registerDefinition(Features,{Navigatable:{getExtensions:function(c){return{currentItemChangedEvent:SimpleEvent.create(c),currentItemFinishChanging:SimpleEvent.create(c),itemsRefreshed:SimpleEvent.create(c)}},widgets:[Widgets.NextButton,Widgets.PrevButton,Widgets.Menu],properties:{pagesData:{title:"Pages Data"},pagesFields:{title:"Pages Fields",category:PropertiesCategories.Other,onChange:function(d,h,i){var c=this;var f=c.getFieldsInformation();var g=c.getFieldsCollection();g.postponeUpdates();if(i){$.each(i,function(j,k){if(!h[j]){f.remove(j)}})}$.each(h,function(j,k){if(!i||!i[j]){f.put(k)}});g.unPostponeUpdates()},defaultValue:function(){return{index:{type:"index",title:"Index",name:"index",isDefaultField:true},title:{type:"title",title:"Title",name:"title",isDefaultField:true},icon:{type:"icon",title:"Icon",name:"icon",isDefaultField:true}}},isStateProperty:true},entranceAnimation:{title:"Entrance Animation",category:PropertiesCategories.OwningType,defaultValue:function(){return Animations.Slide.name},isStateProperty:true},entranceAnimationSpeed:{title:"Entrance Animation Speed",category:PropertiesCategories.OwningType,defaultValue:function(){return Speed.Fast},isStateProperty:true},entranceAnimationDirection:{title:"Exit Animation Direction",category:PropertiesCategories.OwningType,defaultValue:function(){return Global.AnimationDirections.Left},isStateProperty:true},exitAnimation:{title:"Exit Animation",category:PropertiesCategories.OwningType,defaultValue:function(){return Animations.Slide.name},isStateProperty:true},exitAnimationSpeed:{title:"Exit Animation Speed",category:PropertiesCategories.OwningType,defaultValue:function(){return Speed.Fast},isStateProperty:true},exitAnimationDirection:{title:"Exit Animation Direction",category:PropertiesCategories.OwningType,defaultValue:function(){return Global.AnimationDirections.Right},isStateProperty:true},transitionOrder:{title:"Tabs Switching Order",defaultValue:function(){return TransitionOrder.Simultaneously},isStateProperty:false},autoNavigationDuration:{title:"Auto Switch Duration",isStateProperty:true,defaultValue:function(){return 0},category:PropertiesCategories.OwningType,onChange:function(){if(!ViewManager.isDesignMode()){this.startAutoNavigation()}}},navigationDuringTransitionBehaviour:{defaultValue:function(){return NavigationDuringTransitionBehaviour.StopTransition},isStateProperty:false}},methods:{navigateTo:function(d,g,c,f){},navigate:function(d,g,c,f){},showItem:$.noop,getUrlAddressForPage:$.returnUndefined,getNavigatableInstances:function(){return this.childInstances},getAutoNavigationDuration:function(){return 0},getItemsCollection:function(){return this.data.itemsCollection},getFieldsCollection:function(){return this.data.fieldsCollection},getItemsInformation:function(){return this.data.itemsInforamtion},getFieldsInformation:function(){return this.data.fieldsInformation},getElementDataContent:function(){return this.getCurrentItem().getElementContent()},startAutoNavigation:a,stopAutoNavigation:b},aggregatedMethods:{definitions:{getCurrentPageIndex:function(){var d=this;var f=d.getCurrentItem();var c=0;if(f){c=f.getChildIndex();if(!c||c<0){c=0}}return c}},aggregations:{switchToPreview:function(){this.currentItemChangedEvent.fire(this,{prevItem:undefined,currentItem:this.getCurrentItem()});this.startAutoNavigation()},switchToDesign:function(){this.stopAutoNavigation()}}},onInstanceCreated:function(){var c=this;c.data.itemsInforamtion=new ObservableCollection();c.data.itemsCollection=CollectionObserver.create(c.data.itemsInforamtion);c.data.fieldsInformation=new ObservableCollection({idFunction:function(d){return d.name}});c.data.fieldsCollection=CollectionObserver.create(c.data.fieldsInformation);c.data.itemsCollection.itemsChangedEvent.bind(function(d){if(c.getNavigatableInstances().length===0){return}OperationsManager.disableBatch();OrderManager.beginReorderingBatch();if(d.updatedItems){$.each(d.updatedItems,function(f,g){var h=ElementsManager.getInstanceByID(g.id);if(h){h.setPropertyValue("name",g.title)}})}$.each(c.data.itemsCollection.getItems(),function(h,f){var g=ElementsManager.getInstanceByID(f.id);if(g){g.setPropertyValue("order",f.index)}});OrderManager.endReorderingBatch();OperationsManager.endDisableBatch()});c.data.fieldsInformation.itemsRemovedEvent.bind(function(d){var f=c.data.itemsInforamtion.getItemsValues();$.each(f,function(h,g){$.each(d,function(k,j){delete g[j.name]})});c.data.itemsInforamtion.put(f)})}}});function a(){var c=this;c.stopAutoNavigation();if(!ViewManager.isDesignMode()){var d=c.getAutoNavigationDuration();if(d>0){c.data.autoNavigationDuration=window.setInterval(function(){if(PositionManager.isElementVisible(c)){c.navigate(1)}if(c.isDeleted){c.stopAutoNavigation()}},d*1000)}}}function b(){var c=this;if(c.data.autoNavigationDuration){window.clearInterval(c.data.autoNavigationDuration);c.data.autoNavigationDuration=undefined}}})();(function(){ElementsModel.registerDefinition(Features,{Selectable:{getExtensions:function(b){return{canSelectFlag:ObservableFlag.createConditionalPositive()}},methods:{markSelection:$.noop,unMarkSelection:$.noop,canSelect:function(){return this.canSelectFlag.isTrue()&&this.canBeSelected()},canBeSelected:function(){return(this.isSelectable&&this.isInstanceVisible()&&!this.isForTemplateUse())&&!this.isDeleted&&(Modes.ExpressMode.flag.isFalse()||(this.hasFeature(Features.ExpressMode)&&this.isEditableInExpressMode()))&&((TemplateEditingManager.Flags.IsInEditingContext.isFalse()&&(this.hasFeature(Features.TemplateItem)||!this.isTemplateItemContent()))||(this.getTemplateItemContent()===TemplateEditingManager.getCurrentInstance()))&&(!this.isContent()||this.hasFeature(Features.SkinElement)||this.hasFeature(Features.DataListItem)||TemplateEditingManager.Flags.IsInEditingTemplate.isTrue())},canBeSelectedInAreaSelection:function(){return !(this.hasFeature(Features.DataListItem)&&this.isTemplateItemContent())},isChildsCanBeSelectedInAreaSelection:function(){return !(this.hasFeature(Features.DataListItem)&&this.isTemplateItemContent())},toggleSelectable:function(b){if(b===undefined){this.isSelectable=this.isSelectable?false:true}else{this.isSelectable=b}}},onInstanceInitialized:a,onInstanceCreated:function(){this.isSelectable=true}}});function a(){if(Global.IsDesigner){var b=this;b.elementIsSelected.valueChangedEvent.bind(function(c){if(c){b.markSelection()}else{b.unMarkSelection()}})}}})();(function(){ElementsModel.registerPropertiesCategories({BackgroundImage:{title:"Background Image",iconClass:"sprite-icon sprite-property-category-image"}});ElementsModel.registerDefinition(Features,{HasImage:{getExtensions:function(i){return{showImageLayer:ObservableFlag.createConditionalPositive({valueChangeCallback:function(j){var k=i.data.imageLayerDisplayController;if(k){k.setValue(j)}}})}},properties:{imageUrl:{title:"Image",isContentProperty:true,isStyleProperty:true,isStateProperty:true,defaultValue:$.returnEmptyString,supportsBinding:true,isBound:function(i){return i.isBound&&(i.isBound(DataSourceItemsFields.image.getContentType())||i.isBound(DataSourceItemsFields.icon.getContentType())||i.isBound(DataSourceItemsFields.video.getContentType()))},isInTemplate:function(i){return !PropertiesTypes.imageUrl.isBound(i)},onChange:h,category:PropertiesCategories["Background Image"]},imageLayout:{title:"Image Layout",isStyleProperty:true,isStateProperty:true,isBound:function(i){return i.isBound&&(i.isBound(DataSourceItemsFields.image.getContentType())||i.isBound(DataSourceItemsFields.icon.getContentType())||i.isBound(DataSourceItemsFields.video.getContentType()))},defaultValue:function(){return ImageBoxLayout.Cover},category:PropertiesCategories["Background Image"]},imagePosition:{title:"Image Position",isStyleProperty:true,isStateProperty:true,defaultValue:function(){return{vertical:"center",horizontal:"center"}},isBound:function(i){return i.isBound&&(i.isBound(DataSourceItemsFields.image.getContentType())||i.isBound(DataSourceItemsFields.icon.getContentType())||i.isBound(DataSourceItemsFields.video.getContentType()))},category:PropertiesCategories["Background Image"]},customLayout:{title:"Custom Layout",isStateProperty:true,defaultValue:$.returnUndefined,category:PropertiesCategories["Background Image"]},imageOpacity:{title:"Image Opacity",isStyleProperty:true,isStateProperty:true,supportsStatesTransitionAnimation:true,getResetValue:$.returnOne,defaultValue:$.returnOne,valueConverter:[function(i){if(i===undefined){i=1}return $.adjustFraction(i,3)}],onChange:b,category:PropertiesCategories["Background Image"]}},methods:{useImageLayer:function(){return g(this)},getImageLayerTemplate:function(){return $('<div class="element-background-image design-element-background-image"></div>')},forceImageBoxCreation:$.returnFalse,getImageBox:function(){return this.data.imageBox},getCurrentImageUrl:function(){return this.data.currentImageUrl},handleImageBoxBorderWidthChange:function(){var i=this;var k=i.data.imageBox;var j=i.getActualPropertyValue("borderWidth");if(!j){j={left:0,top:0,right:0,bottom:0}}k.setBorderWidth(j)},setImageBoxViewport:function(i,k){this.data.imageBoxViewport=i;var j=this.getImageBox();if(j){j.setViewPort(i,k)}}},aggregatedMethods:{definitions:{onImageBoxCreated:$.noop},aggregations:{onPropertiesChanged:function(j){var i=this;var k=i.getImageBox();if(k){if($.containsOneOfKeys(j,"imageLayout","customLayout")){k.setLayout(f(i));a(i)}if($.containsOneOfKeys(j,"imagePosition")){k.setPosition(i.getPropertyValue("imagePosition"))}}}}},initialize:function(){this.data.currentImageUrl=null;this.data.currentBaseImageUrl=null;if(this.forceImageBoxCreation()){d(this)}}}});function h(j,k){var i=this;a(i)}function g(j){var i=j.getBackgroundLayer(BackgroundLayers.BackgroundImage);if(!i){i=j.addBackgroundLayer(BackgroundLayers.BackgroundImage,function(){return j.getImageLayerTemplate()});var k=QuickStates.createDisplayController(i);j.data.imageLayerDisplayController=k;k.setValue(j.showImageLayer.isTrue())}return i}function d(i){var j=i.data.imageBox;if(!j){j=g(i).makeImageBoxNew({autoLoad:false,layout:f(i),viewPort:i.data.imageBoxViewport,position:i.getPropertyValue("imagePosition")});i.data.imageBox=j;i.actualPropertyValueChanged.bindAndExecute("borderRadius",function(){var k=i.getActualPropertyValue("borderRadius");if(!k){k={topLeft:0,topRight:0,bottomLeft:0,bottomRight:0}}j.setBorderRadius(k)});i.actualPropertyValueChanged.bindAndExecute("borderWidth",function(){i.handleImageBoxBorderWidthChange()});i.visibilityChangedEvent.bindAndExecute(function(){c(i)});j.viewportChangedEvent.bind(function(){a(i)});i.onImageBoxCreated(j)}return j}function a(q,n){var p=q.getPropertyValue("imageUrl");var l=null;var k=null;var m=undefined;var j=q.getImageBox();if(p!==""&&p!==null&&p!==undefined){j=d(q);var o=j.getActualViewPort();if(o.width===0||o.height===0){return}if(p.imageWidth!==undefined&&p.imageHeight!==undefined){m={width:p.imageWidth,height:p.imageHeight}}k=AssetsManager.resolveImageUrl(p);l=AssetsManager.resolveImageUrlBasedOnLayout(p,o,j.getLayout(),m)}var i=(q.data.currentBaseImageUrl===k&&q.data.currentImageUrl!==l);if(n){i=true}q.data.currentImageUrl=l;q.data.currentBaseImageUrl=k;if(j){j.setImage({imageUrl:l,imageSize:m});c(q,i)}}function c(i,k){if(PositionManager.isElementVisible(i)){var j=i.getImageBox();if(j){j.loadImage(k)}}}function f(i){var j=i.getPropertyValue("imageLayout");if(j===ImageBoxLayout.Custom){return i.getPropertyValue("customLayout")}else{return j}}function b(k,l,m,j){var i=(j===undefined);if(!i||l!==1){this.animatePart(g(this),{opacity:l},true,m,{isInitialization:i})}}})();var BackgroundType={Color:1,Gradient:2,Image:3};(function(a){a.getBackgroundType=function(b){if(b===undefined){return undefined}if(a.isPlainObject(b)){if(b.color!==undefined){return BackgroundType.Color}else{if(b.gradient!==undefined){return BackgroundType.Gradient}else{if(b.imagePath!==undefined){return BackgroundType.Image}}}}return BackgroundType.Color}})(jQuery);(function(){ElementsModel.registerPropertiesCategories({Background:{title:"Background",iconClass:"sprite-icon sprite-property-category-background",shortTitle:"Background"}});ElementsModel.registerDefinition(Features,{HasBackground:{properties:{backgroundColor:{title:"Background Color",isStyleProperty:true,isStateProperty:true,supportsStatesTransitionAnimation:true,supportsThemeBinding:true,defaultValue:$.returnTransparent,getResetValue:$.returnTransparent,category:PropertiesCategories.Background,onChange:function(d,f,h,g){var b=$.getBackgroundType(f);var c=$.getBackgroundType(g);if(b!==BackgroundType.Color||c!==BackgroundType.Color){h=undefined}if(!this.handleBackgroundUpdate(d,f,h,b,c)){a(this,f,h,b,c)}}}},methods:{handleBackgroundUpdate:function(d,f,g,b,c){return false},getForeGroundPropertyName:function(){return"backgroundColor"}}}});function a(b,g,i,d,f){var c=(f===undefined);var h=b.getBackgroundTarget();if(!c){h.clearBackground()}g=ThemeColorsManager.evaluateColorBinding(g);if(d===BackgroundType.Gradient){h.setGradient($.valueOrDefault(g.orientation,Orientation.Vertical),g.gradient)}else{g=$.Color(g).toCSS();b.animatePart(h,{rgbaBackground:g},{"background-color":g},i,{isInitialization:c})}}})();(function(){ElementsModel.registerDefinition(Features,{HasBackgroundImage:{initialize:a,features:[Features.HasImage,Features.HasBackgroundOverlay],methods:{autoCalculateBackgroundViewPort:$.returnTrue},aggregatedMethods:{aggregations:{getDisabledProperties:function(d){var c=this;var b=this.getPropertiesValues();if(b.backgroundImage===null){d.backgroundImageLayout={disabled:true}}return d}}}}});function a(){var b=this;b.sizeChangedEvent.bind(function(){if(b.autoCalculateBackgroundViewPort()){b.setImageBoxViewport(b.getSize())}})}})();(function(){ElementsModel.registerDefinition(Features,{HasArrangement:{getExtensions:function(f){var g=DataItemsController.create(f);var d=c(f);var h=b(f);return{dataItemsController:g,dataLayoutController:DataLayoutController.create(g,{onArrangementStarted:function(){f.reArrangingStarted.fire();if(f.getItemsCollection){f.getItemsCollection().postponeUpdates()}},onArrangementFinished:function(){if(f.getItemsCollection){f.getItemsCollection().unPostponeUpdates()}f.reArrangingFinished.fire()},startInitializingLayoutCallback:d,finishInitializingLayoutCallback:h,startArrangingCallback:d,finishArrangingCallback:function(){var k=f.dataLayoutController.getLastArrangementOptions();if(k&&k.options){var l=k.options;if(l.shouldPush){var j=f.getSize();ContentPushingManager.recalaculateSiblingsAndParentAreas(f)}var i=DataListHelper.adjustDataListToContent(f);f.alignHorizontal();f.alignVertical();if(l.shouldPush){ContentPushingManager.handleContentGrowing(f)}LayoutManager.refreshElementsLayout(f.getDescendingInstances(true))}f.beforeReArrangingFinished.fire();h()},setParentContent:function(i){f.data.$arrangementContentHolder.empty();f.data.$arrangementContentHolder.append(i)},getContainerSize:function(){var i=f.getContentSize();if(f.isBlock()&&f.hasCellWrapper.isTrue()){i.width-=1}return i}})}},methods:{alignHorizontal:function(){var d=this;if(d.hasHorizontalAlign()){var f=d.getPropertyValue("horizontalAlign");d.data.$arrangementContentHolder.css("text-align",f);PositionManager.updatePosition(d.getDescendingInstances())}},addChildElement:function(f,g){if(f.isContent()){var d=this.data.$arrangementContentHolder.append(f.$element)}else{var d=this.getElementContent().append(f.$element)}f.onAttached();return d},creationFunction:function(d){var g=new StringBuilder();g.append('<div class="content-holder absolute-fill">');g.append('<div class="arrangement-content-holder absolute-fill"></div>');g.append('<div class="relative-child-elements-content-holder positioned"></div>');g.append("</div>");var f=$(g.toString());d.data.$arrangementContentHolder=$(".arrangement-content-holder",f).toggleLayerEventsForwarding(true);d.data.$relativeChildElementContentHolder=$(".relative-child-elements-content-holder",f).toggleLayerEventsForwarding(true);return f},reArrangeTheTemplates:function(g,f){var d=this;g=$.extend({shouldFetch:true},g);if(g.shouldFetch){d.data.shouldFetch=true}if(d.reArrangementDisabled.isTrue()||Global.Flags.DisableDataListArrangements.isTrue()){return}var i=d.dataLayoutController.getArrangement();if(!g.keepItemSize&&i){var l=d.isFillHorizontal()||d.isBlock();var k=i.category===DataArrangements.Vertical;var h=i.category===DataArrangements.Grid;if(l&&!k&&!h){g.keepItemSize=false}}var j=[LayoutManager.layoutUpdateBatch];if(Global.IsDesigner){j.push(ModeManager.updateBatch)}OperationsBatch.whenAllFinished(j,function(){a(d,$.extend(g,{shouldFetch:d.data.shouldFetch}));d.data.shouldFetch=undefined},d.id+"reArrangeTheTemplatesFunction")}},aggregatedMethods:{definitions:{getArrangementOptions:function(){return{instanceContentSize:this.getContentSize(),scale:undefined,keepItemSize:true}}},aggregations:{onRemove:function(){this.reArrangementDisabled.setTrue("removed");this.dataItemsController.clear()},onPropertiesChanged:function(f){var d=this;if($.containsOneOfKeys(f,"dataLayout")){var h=d.getPropertyValue("dataLayout");this.dataLayoutController.setArrangement(h.name)}if($.containsOneOfKeys(f,"dataLayoutOptions")){var g=d.getPropertyValue("dataLayoutOptions");this.dataLayoutController.setLayoutOptions(g)}},getMetaDataForSaving:function(f){var d=this;var h=this.data.structureMetaData;var g=d.dataLayoutController.getLastArrangementOptionsDevice();if($.getKeys(d.getPropertyValue("fieldsTemplates")).length===1&&g){return $.extend(f,{dataItemSizePc:g.pc&&g.pc.fixedSize?g.pc.fixedSize:(h?h.dataItemSizePc:undefined),dataItemSizeMobile:g.mobile&&g.mobile.fixedSize?g.mobile.fixedSize:(h?h.dataItemSizeMobile:undefined)})}else{return f}}}},onInstanceCreated:function(){},initialize:function(){this.dataItemsController.initialize()},onInstanceInitialized:function(){},properties:{dataLayout:{title:"Data Layout",isStateProperty:true,priority:-998,shouldStartBatch:true,defaultValue:$.returnNull},dataLayoutOptions:{title:"Data Layout Options",shouldStartBatch:true,defaultValue:function(){return{elementsPerPage:4,lineSpacing:15,cols:2,rows:5,columnSpacing:15,colsSpacing:15,rowsSpacing:15,rotation:0,R:100}},isStateProperty:true,priority:-998,valueConverter:[StructureLoadingManager.createRoundPropertyValueConverter(["lineSpacing","columnSpacing","colsSpacing","rowsSpacing","R","numberOfRows"])],scaleProperty:function(d){return{lineSpacing:d.x,columnSpacing:d.y,colsSpacing:d.x,rowsSpacing:d.y,R:d.x}}}}}});function a(d,f){f=$.extend({},d.getArrangementOptions(),f);d.dataLayoutController.reArrangeTheLayout(f)}function c(d){return function(){d.reArrangementDisabled.setValue(true,"inRearrange");OperationsManager.disableBatch();OrderManager.beginReorderingBatch();PositionManager.UpdateBatch.start();LayoutManager.beginLayoutUpdateBatch();PositionManager.VisibilityUpdateBatch.start();PropertiesManager.UpdateBatch.start();ElementsManager.HierarchyChangedUpdateBatch.start()}}function b(d){return function(){ElementsManager.HierarchyChangedUpdateBatch.finish();PropertiesManager.UpdateBatch.finish();PositionManager.VisibilityUpdateBatch.finish();LayoutManager.endLayoutUpdateBatch();PositionManager.UpdateBatch.finish();OrderManager.endReorderingBatch();OperationsManager.endDisableBatch();d.reArrangementDisabled.setValue(false,"inRearrange")}}})();(function(){ElementsModel.registerDefinition(Features,{HasFormData:{methods:{showArrangementSettingsPanel:$.returnFalse,getTemplatesFieldsListArray:function(){return[{name:FormFields.TextInputField.name,title:FormFields.TextInputField.title},{name:FormFields.TextArea.name,title:FormFields.TextArea.title}]},getChangeTemplatePanelName:function(c){var a=this;var b;if(a.hasFeature(Features.DataList)){if(c===FormFields.TextInputField.name){b="ChangeTextInputElementPanel"}else{if(c===FormFields.TextArea.name){b="ChangeTextAreaElementPanel"}}}else{if(c===FormFields.TextInputField.name){b="ChangeTextInputPanel"}else{if(c===FormFields.TextArea.name){b="ChangeTextAreaPanel"}}}return b}},aggregatedMethods:{aggregations:{canRedropTo:function(c,b){var a=c.hasAncestor(function(d){return d.hasFeature(Features.HasFormData)},true);if(a){return false}return b&&true}}},widgets:[Widgets.SubmitFormButton,Widgets.ClearFormButton],properties:{targetEmail:{title:"Target Email",defaultValue:$.returnNull},submitAddress:{},submitError:{defaultValue:function(){return"Error"}},submitText:{defaultValue:function(){return"Success"}},formID:{defaultValue:$.returnNull},formOptions:{defaultValue:function(){return{clearOnSubmit:true}}}},initialize:function(){var a=this;if(a.getPropertyValue("formID")===null){OperationsManager.disableBatch();a.setPropertyValue("formID",StructureLoadingManager.generateWebsiteId());OperationsManager.endDisableBatch()}}}})})();(function(){ElementsModel.registerDefinition(Features,{HasContent:{methods:{hasPadding:function(){var a=this.getPropertyValue("padding");return a&&(a.left!==0||a.top!==0||a.bottom!==0||a.right!==0)},hasVerticalAlign:function(){return false},hasHorizontalAlign:function(){return false},alignHorizontal:function(){var a=this;if(a.hasHorizontalAlign()){var b=a.getPropertyValue("horizontalAlign");a.getElementContent().positionHorizontally(b,undefined,{skipPositionCheck:true})}LayoutManager.refreshElementsLayout(a.childInstances)},alignVertical:function(){var a=this;if(a.hasVerticalAlign()){var b=a.getPropertyValue("verticalAlign");a.getElementContent().positionVertically(this.getPropertyValue("verticalAlign"),undefined,{skipPositionCheck:true})}LayoutManager.refreshElementsLayout(a.childInstances)},alignContentHorizontal:function(){if(this.hasContentHorizontalAlign()){var a=this.getPropertyValue("horizontalContentAlign");if(a!==CssHorizontalAlignment.None){this.getElementContent().css({"text-align":"{0}".format(a)})}else{this.getElementContent().css({"text-align":""})}}},alignContentVertical:function(){},hasContentVerticalAlign:function(){return false},hasContentHorizontalAlign:function(){return false},getContentAlignment:function(){},getElementDataContentSize:function(){var b=this.getElementDataContent();var a=b.outerSize();return a},calculateSizeContent:function(b){var a=this;if(a.propertiesInitialized){b=b||this.getElementDataContentSize();var d=a.getNoneContentSize();var c=a.getSize();var g=c.height-d.height;var h=false;var f=b.height-g;if(f!==0){var c=$.extend({},c);c.height=c.height+f;return c}return undefined}},getNewContentSize:function(a){return this.calculateNewContentSize(a)},calculateNewContentSize:function(d){d=$.extend({minWidth:undefined,minHeight:undefined,horizontally:true,vertically:true},d);var b=this;var i;if(b.hasFeature(Features.DataList)){i=b.dataLayoutController.getSize()}else{var h=b.getElementDataContent();if(!h){return}i=h.outerSize()}if(!i){return}var g=b.getNoneContentSize();var f;var a;if(d.horizontally){f=d.minWidth===undefined||(i.width+g.width>d.minWidth)?i.width+g.width:d.minWidth}if(d.vertically){a=d.minHeight===undefined||(i.height+g.height)>d.minHeight?i.height+g.height:d.minHeight}var c={width:f,height:a};return c},adjustSizeToContent:function(c){c=$.extend({minWidth:undefined,minHeight:undefined,horizontally:true,vertically:true},c);var a=this;var b=a.getNewContentSize({minWidth:c.minWidth,minHeight:c.minHeight,});if(!b){return}if(a.hasFeature(Features.DataList)){a.reArrangementDisabled.setValue(true,"adjustingSize")}ElementsLayoutHelper.setInstancesSize(a,{width:c.horizontally?b.width:undefined,height:c.vertically?b.height:undefined},{preserveVerticalMargins:true});if(a.hasFeature(Features.DataList)){a.reArrangementDisabled.setValue(false,"adjustingSize")}return b},getElementDataContent:function(){return this.getElementContent()},whenInstanceContentHeightChanged:function(j,n){n=$.extend({lastElementSizeIsTheMinSize:false,ignoreLastResizingHeight:false,forceUpdate:false,onlyGrow:false},n);var a=n.ignoreLastResizingHeight;var g=n.lastElementSizeIsTheMinSize;var h=n.forceUpdate;var k=this;if(!h&&(k.duringResizing.isTrue()||k.data.disableElementSizeUpdate)){return}var c=k.getLastResizingSize();c=c?c:{};var l=PositionManager.getElementSize(k);var f=k.getPropertyValue("margin");var m=k.getNoneContentSize();var i=$.valueOrDefault(c.height,0);var d=j+m.height;var b;if(a){b=d}else{if(g&&i===0){b=Math.max(l.height,d)}else{b=Math.max(i<=l.height?i:l.height,d)}}if(n.onlyGrow){b=Math.max(l.height,b)}if(b!==l.height){ContentPushingManager.recalaculateSiblingsAndParentAreas(k);if(!k.isFillVertical()){ElementsLayoutHelper.setInstancesSize(k,{height:b,},{preserveVerticalMargins:true})}ContentPushingManager.handleContentGrowing(k,{diffHeight:k.isFillVertical()?b-l.height:undefined})}}},aggregatedMethods:{aggregations:{switchToDesign:function(){}}},properties:{fitToContent:{title:"Fit To Content",isStateProperty:true,defaultValue:$.returnFalse,onChange:function(a,b){}},verticalAlign:{title:"Vertical Align",isStateProperty:true,isStyleProperty:true,shouldStartBatch:true,category:PropertiesCategories.Layout,defaultValue:function(){return VerticalAlignment.Centered},onChange:function(a){this.alignVertical()}},horizontalAlign:{title:"Horizontal Align",isStateProperty:true,isStyleProperty:true,shouldStartBatch:true,category:PropertiesCategories.Layout,defaultValue:function(){return HorizontalAlignment.Centered},onChange:function(a){this.alignHorizontal();PositionManager.updatePosition(this.getDescendingInstances())}},verticalContentAlign:{title:"Vertical Content Align",isStateProperty:true,isStyleProperty:true,shouldStartBatch:true,category:PropertiesCategories.Layout,defaultValue:function(){return VerticalAlignmentToCss.center},onChange:function(a){this.alignContentVertical();PositionManager.updatePosition(this.getDescendingInstances())}},horizontalContentAlign:{title:"Horizontal Content Align",isStateProperty:true,isStyleProperty:true,shouldStartBatch:true,category:PropertiesCategories.Layout,defaultValue:function(){return HorizontalAlignment.Centered},onChange:function(a){this.alignContentHorizontal();PositionManager.updatePosition(this.getDescendingInstances())}}}}})})();(function(){ElementsModel.registerDefinition(Features,{HasTemplates:{getExtensions:function(a){return{shouldRearrange:ObservableFlag.create(false)}},properties:{fieldsTemplates:{title:"Fields Templates",isStateProperty:true,defaultValue:$.returnEmptyObject,preSaveProcessing:function(a){$.each(a,function(c,b){$.each(b,function(j,i){var f=i.hierarchy.structures[0].elementProperties.skinBinding;if(f&&f.hierarchy){var d=f.skinName+f.index;var h=StylesManager.getStyle(d);if(h){f.hierarchy=SkinEditingManager.convertFieldsToTemplate(f.hierarchy,d);var g=StylesManager.getStyleInformation(d);f.hierarchy.fieldsToValues=g.fields;f.hierarchy.statesAnimations=g.statesAnimations}}})});return a},comparer:function(b,c){var a=true;$.each(b,function(f,d){$.each(d,function(h,g){if(!c[f]||!c[f][g.id]){a=false;return false}});if(!a){return false}});return a},shouldStartBatch:true,priority:-998,onChange:function(){this.refreshTemplates()}}},methods:{getSkinBinding:function(){var a=this.getDefaultTemplate();return $.cloneObject(a.hierarchy.structures[0].elementProperties.skinBinding)},getInstanceForEditTemplate:function(){return this},getInstanceForStatePreview:function(){var a=this.getFirstDisplayedListItem();if(a){return a.getSkinInstance()}return undefined},isMobileOnlyStyle:function(){return !!PropertiesManager.getPropertyValueInCustomState(this.properties.fieldsTemplates,MobileVersionViewManager.MobileStateName,PageManager.getCoordinator().id,this)},getFirstDisplayedListItem:function(b){var a=this.dataItemsController.getAllControllers();var c=$.findFirst(a,function(d,f){return f.isInitialized()&&f.getInstance().isInstanceVisible()});if(c){return c.getInstance()}else{return undefined}},updateSkinBindingFromEditingTemplate:function(f,b,d){var a=this;if(a.isType(ElementsTypes.FormElement)){var c=$.extend({},a.getPropertyValue("fieldsTemplates"));delete c.TextArea;a.setPropertyValue("fieldsTemplates",c)}a.replaceTemplate(b,{fieldName:d?d:f.getFieldName()});return a},shouldRefreshTemplates:function(){return true},refreshTemplates:function(){OperationsManager.disableBatch();var a=this;$.each(a.getTemplatesArray(),function(b,g){var f=g.getDataItemId();var d=a.getDataSource().getItem(f);var c=a.getDefaultTemplate(d.fieldTypeName).hierarchy;if(c.id!==g.getTemplateStructure().id){g.setTemplateStructure(c);a.resetItemTemplateSize(g,true)}});OperationsManager.endDisableBatch()},refreshTemplatesSize:function(b){var a=this;var c=a.getPropertyValue("itemsStyle");$.each(a.getTemplatesArray(),function(d,f){a.resetItemTemplateSize(f,b)})},resetItemTemplateSize:function(h,b){var a=this;var g=a.getPropertyValue("itemsStyle");var f=h.getDataItemId();var d=a.getDataSource().getItem(f);var c=a.getDefaultTemplate(d?d.fieldTypeName:undefined).hierarchy;if(b||c.id!==h.getTemplateStructure().id){if(g[f]){h.setSize($.extend({},g[f].sizeAndPosition))}}},getDefaultFieldName:function(){return this.elementType.itemName?this.elementType.itemName:undefined},getDefaultTemplate:function(b){b=b?b:this.elementType.itemName;var a=$.getValues(this.getFieldsTemplates()[b])[0];return a},getFieldsTemplates:function(){var a=this.getPropertyValue("fieldsTemplates");var b=$.extend({},a);$.each(a,function(c,d){b[c]=$.extend({},d)});return b}},aggregatedMethods:{aggregations:{}},features:[Features.HasSkinBinding],initialize:function(){var a=this},onInstanceInitialized:function(){}}})})();var LineHeightUnit={Pixel:1,Percentage:2};(function(){ElementsModel.registerPropertiesCategories({TextStyle:{title:"Text Style",shortTitle:"Text",iconClass:"sprite-icon sprite-property-category-text"}});ElementsModel.registerDefinition(Features,{HasText:{className:"has-text",properties:{namedTextStyle:{defaultValue:$.returnNull,isStateProperty:true,isStyleProperty:true,onChange:function(){LayoutManager.layoutUpdateBatch.start();PropertiesManager.invalidateProperty(this,"font");PropertiesManager.invalidateProperty(this,"fontSize");PropertiesManager.invalidateProperty(this,"fontColor");LayoutManager.layoutUpdateBatch.finish()}},fontColor:{title:"Font Color",category:PropertiesCategories.TextStyle,isStateProperty:true,isStyleProperty:true,isTextStyleProperty:true,defaultValue:function(){return"black"},supportsStatesTransitionAnimation:true,supportsThemeBinding:function(i,h){if(i!==null){return ThemeColorsManager.isColorBinding(i)}else{var j=TextStyleManager.getElementTextStyle(h);if(j){return ThemeColorsManager.isColorBinding(j.color)}return false}},onChange:c},textShadow:{title:"Text Shadow",isStateProperty:true,isStyleProperty:true,supportsThemeBinding:function(h){if(!h){return false}return $.any(h,function(i){return ThemeColorsManager.isColorBinding(i.color)})},supportsStatesTransitionAnimation:false,category:PropertiesCategories.TextStyle,defaultValue:function(){return[]},valueConverter:[function(h){if(h&&h.length>0){return $.quickUnique(h,function(i){return"{0}-{1}-{2}-{3}".format(i.top,i.left,i.blur,i.color)})}return h}],onChange:function(m,r,k,h){var j=(h===undefined);if(!j||r.length>0){var p;if(r.length>0){var q=[];for(var n=0;n<r.length;n++){var l=r[n];var o=ThemeColorsManager.evaluateColorBinding(l.color,true);if(o){o=$.Color(o).toCSS()}else{o="black"}q.push("{0}px {1}px {2}px {3}".format($.valueOrDefault(l.left,0),$.valueOrDefault(l.top,0),$.valueOrDefault(l.blur,0),o))}p=q.join(",")}else{p="none"}this.getTextElements().css({textShadow:p})}}},lineHeight:{title:"Line Height",isStateProperty:true,isStyleProperty:true,category:PropertiesCategories.TextStyle,defaultValue:function(){return{pixels:14,percentages:120,unit:CSSUnits.Percentages}},onChange:g,scaleProperty:function(h){return{pixels:h.y}}},letterSpacing:{title:"Letter Spacing",isStateProperty:true,isStyleProperty:true,category:PropertiesCategories.TextStyle,defaultValue:function(){return 0},supportsStatesTransitionAnimation:true,onChange:function(h,i,j){a(this,"letter-spacing",i,j)},valueConverter:[StructureLoadingManager.createRoundPropertyValueConverter()],scaleProperty:function(h){return h.y}},fontSize:{title:"Text Size",isStateProperty:true,isStyleProperty:true,isTextStyleProperty:true,category:PropertiesCategories.TextStyle,defaultValue:function(){return 30},supportsStatesTransitionAnimation:true,onChange:b,valueConverter:[StructureLoadingManager.createRoundPropertyValueConverter()],scaleProperty:function(h){return h.y}},font:{title:"Font",category:PropertiesCategories.TextStyle,defaultValue:function(){return"Arial"},supportsThemeFontBinding:function(i,h){if(i!==null){return ThemeFontsManager.isFontBinding(i)}else{var j=TextStyleManager.getElementTextStyle(h);if(j){return ThemeFontsManager.isFontBinding(j.fontFamily)}return false}},isStateProperty:true,isStyleProperty:true,isTextStyleProperty:true,onChange:f},textStyle:{title:"Text Style",isStateProperty:true,isStyleProperty:true,category:PropertiesCategories.TextStyle,defaultValue:function(){return{bold:false,underline:false,italic:false}},onChange:d},textDirection:{title:"Text Direction",isStateProperty:false,isStyleProperty:true,category:PropertiesCategories.TextStyle,defaultValue:function(){return TextDirection.LeftToRight},onChange:function(h,i){this.getTextElements().toggleClass("dir-ltr",i===TextDirection.LeftToRight);this.getTextElements().toggleClass("dir-rtl",i===TextDirection.RightToLeft)}}},calculatedProperties:["calculatedFontFamily","calculatedFontSize","calculatedTextColor"],methods:{refreshTextLayout:$.noop,getTextElements:function(){return $([])},alignHorizontal:function(){var h=this;if(h.hasHorizontalAlign()){var i=h.getPropertyValue("horizontalAlign");this.getTextElements().css({"text-align":i!==null?i:""})}},calculateFontSize:function(){var h=this;var i=h.getPropertyValue(PropertiesTypes.fontSize.name);if(i===null){var j=TextStyleManager.getElementTextStyle(h);if(j){i=j.fontSize}}if(i===null){i=0}return i},calculateDecimalLineHeight:function(){var h=this;var j=h.getPropertyValue(PropertiesTypes.lineHeight.name);var i=1.2;switch(j.unit){case CSSUnits.Percentages:i=j.percentages/100;break;default:break}return i}},aggregatedMethods:{aggregations:{getCalculatedPropertyValue:function(i,h,j){switch(i){case"calculatedFontFamily":return TextStyleManager.evaluateElementTextStyle(this,TextStyleProperties.FontFamily,this.getPropertyValue("font"));case"calculatedFontSize":return TextStyleManager.evaluateElementTextStyle(this,TextStyleProperties.FontSize,this.getPropertyValue("fontSize"));case"calculatedTextColor":return TextStyleManager.evaluateElementTextStyle(this,TextStyleProperties.TextColor,this.getPropertyValue("fontColor"));default:return j}},setCalculatedPropertyValue:function(h,j,i,k){switch(h){case"calculatedFontFamily":this.setPropertyValue("font",j);break;case"calculatedFontSize":this.setPropertyValue("fontSize",j);break;case"calculatedTextColor":this.setPropertyValue("fontColor",j);break}}}},initialize:function(){var h=this;var i=h.getPropertyValue("lineHeight");h.data.textStyleClass=ContextValue.createContextClass({getTarget:function(){return h.getTextElements()}})}}});function c(h,i,k){PropertiesManager.notifyCalculatedPropertyChange(this,"calculatedTextColor");if(i===null){var j=TextStyleManager.getElementTextStyle(this);if(j){i=j.color}}if(i===null){this.getTextElements().css("color","")}else{i=ThemeColorsManager.evaluateColorBinding(i,true);this.animatePart(this.getTextElements(),{color:i},true,k)}}function b(i,j,l){var h=this;PropertiesManager.notifyCalculatedPropertyChange(this,"calculatedFontSize");if(j===null){var k=TextStyleManager.getElementTextStyle(this);if(k){j=k.fontSize}}if(j===null){this.getTextElements().css("font-size","")}else{this.animatePart(this.getTextElements(),{"font-size":j},false,l,{step:function(){h.refreshTextLayout()}})}}function a(i,j,k,l){if(k===null){i.getTextElements().css(j,"")}else{var h={};h[j]=k;i.animatePart(i.getTextElements(),h,false,l,{step:function(){i.refreshTextLayout()}})}}function g(i,j){var h=this;switch(j.unit){case CSSUnits.Percentages:this.getTextElements().css("line-height",j.percentages/100);break;default:this.getTextElements().css("line-height",1.2);break}}function f(h,i){PropertiesManager.notifyCalculatedPropertyChange(this,"calculatedFontFamily");if(i===null){var j=TextStyleManager.getElementTextStyle(this);if(j){i=j.fontFamily}}i=ThemeFontsManager.evaluateFontBinding(i);this.getTextElements().css("font-family",i!==null?i:"")}function d(h,i){if(this.elementType!==ElementsTypes.freeText){this.getTextElements().toggleClass("label-text-bold",i.bold===true).toggleClass("label-text-underline",i.underline===true).toggleClass("label-text-italic",i.italic===true)}}})();(function(){ElementsModel.registerDefinition(Features,{HasLayout:{properties:{verticalLayout:{title:"Vertical Alignment",category:PropertiesCategories.Layout,defaultValue:function(){return LayoutManager.Layout.normal},isStateProperty:true,priority:998,onChange:function(d,f,h,g){LayoutManager.beginLayoutUpdateBatch();c.call(this);if(this.isInDesignMode()){b(this,this.getPropertyValue("margin"))}LayoutManager.endLayoutUpdateBatch()}},horizontalLayout:{title:"Horizontal Alignment",category:PropertiesCategories.Layout,isStateProperty:true,priority:998,defaultValue:function(){return LayoutManager.Layout.normal},onChange:function(d,f,h,g){LayoutManager.beginLayoutUpdateBatch();c.call(this);if(this.isInDesignMode()){b(this,this.getPropertyValue("margin"))}LayoutManager.endLayoutUpdateBatch()}},fillLayout:{comparer:function(f,d){return((f&&d)||(f===d))&&f.fillHorizontal===d.fillHorizontal&&f.fillVertical===d.fillVertical},title:"Layout Fill",priority:997,isStateProperty:true,category:PropertiesCategories.Layout,defaultValue:function(){return{fillVertical:false,fillHorizontal:false}},onChange:function(f,g,i,h){var d=this;LayoutManager.beginLayoutUpdateBatch();this.classesManager.set({"block-element":g.fillHorizontal});c.call(this);if(this.isInDesignMode()){b(this,this.getPropertyValue("margin"))}LayoutManager.endLayoutUpdateBatch()}},margin:{title:"Margin",isStateProperty:true,defaultValue:function(){return{top:0,left:0,bottom:0,right:0}},supportsStatesTransitionAnimation:true,priority:997,valueConverter:[StructureLoadingManager.createRoundPropertyValueConverter(["top","left","bottom","right"])],scaleProperty:function(d){return{bottom:d.y,right:d.x,top:d.y,left:d.x}},category:PropertiesCategories.Margin,onChange:a}},calculatedProperties:["horizontalDocking","verticalDocking"],methods:{isFillHorizontal:function(){var d=this;var f=d.getPropertyValue("fillLayout");if(f){return f.fillHorizontal}return false},isFillVertical:function(){var d=this;var f=d.getPropertyValue("fillLayout");if(f){return f.fillVertical}return false},hasHorizontalLayout:function(){return this.getPropertyValue("horizontalLayout")!==LayoutManager.Layout.normal||this.isFillHorizontal()},hasVerticalLayout:function(){return this.getPropertyValue("verticalLayout")!==LayoutManager.Layout.normal||this.isFillVertical()},isVerticallyDocked:function(d){return !d?this.getPropertyValue("verticalLayout")!==LayoutManager.Layout.normal:this.getPropertyValue("verticalLayout")===d},getParentContentSize:function(){if(this.hasCellWrapper.isTrue()){return this.getCellItem().getArea()}else{return PositionManager.getContentSize(this.parentInstance)}}},aggregatedMethods:{aggregations:{updateInstanceToViewPort:function(){if(this.hasFeature(Features.HasResponsiveItem)&&this.shouldInstanceWrapWithCell()){this.setPropertyFieldValue("fillLayout","fillHorizontal",false)}},adjustInstanceToViewPort:function(){var d=this;if(this.hasFeature(Features.HasResponsiveItem)&&this.shouldInstanceWrapWithCell()){var f=this.getPropertyValue("fillLayout").fillHorizontal;this.setPropertyFieldsValues("fillLayout",{fillVertical:false,fillHorizontal:false});this.setPropertyValue("verticalLayout",LayoutManager.Layout.normal);this.setPropertyValue("horizontalLayout",LayoutManager.Layout.normal);this.setPropertyValue("margin",0)}},getCalculatedPropertyValue:function(g,f,i){switch(g){case"horizontalDocking":var j=this.getPropertyValue("fillLayout","fillHorizontal");if(j){return HorizontalDocking.Stretched}else{var d=this.getPropertyValue("horizontalLayout");switch(d){case LayoutManager.Layout.dockLeft:return HorizontalDocking.Left;case LayoutManager.Layout.centered:return HorizontalDocking.Centered;case LayoutManager.Layout.dockRight:return HorizontalDocking.Right;default:return HorizontalDocking.None}}case"verticalDocking":var h=this.getPropertyValue("fillLayout","fillVertical");if(h){return VerticalDocking.Stretched}else{var k=this.getPropertyValue("verticalLayout");switch(k){case LayoutManager.Layout.dockTop:return VerticalDocking.Top;case LayoutManager.Layout.centered:return VerticalDocking.Centered;case LayoutManager.Layout.dockBottom:return VerticalDocking.Bottom;default:return VerticalDocking.None}}default:return i}},setCalculatedPropertyValue:function(d,g,f,h){switch(d){case"horizontalDocking":this.setPropertyFieldValue("fillLayout","fillHorizontal",g===HorizontalDocking.Stretched);switch(g){case HorizontalDocking.Left:this.setPropertyValue("horizontalLayout",LayoutManager.Layout.dockLeft);break;case HorizontalDocking.Right:this.setPropertyValue("horizontalLayout",LayoutManager.Layout.dockRight);break;case HorizontalDocking.Centered:this.setPropertyValue("horizontalLayout",LayoutManager.Layout.centered);break;case HorizontalDocking.None:this.setPropertyValue("horizontalLayout",LayoutManager.Layout.normal);break}break;case"verticalDocking":this.setPropertyFieldValue("fillLayout","fillVertical",g===VerticalDocking.Stretched);switch(g){case VerticalDocking.Top:this.setPropertyValue("verticalLayout",LayoutManager.Layout.dockTop);break;case VerticalDocking.Bottom:this.setPropertyValue("verticalLayout",LayoutManager.Layout.dockBottom);break;case VerticalDocking.Centered:this.setPropertyValue("verticalLayout",LayoutManager.Layout.centered);break;case VerticalDocking.None:this.setPropertyValue("verticalLayout",LayoutManager.Layout.normal);break}break}},getDisabledProperties:function(g){var f=this;var d=this.getPropertiesValues();if(d.fillLayout.fillVertical===true){g.verticalLayout={disabled:true}}if(d.fillLayout.fillHorizontal===true){g.horizontalLayout={disabled:true}}return g}}},onInstanceInitialized:function(){var d=this;if(d.hasFeature(Features.DesignElement)){SimpleEvent.bind([d.duringResizing.valueChangedEvent,d.isInDragging.valueChangedEvent],function(){var f=d.duringResizing.isTrue()||d.isInDragging.isTrue();var h=d.data.marginMarkings;if(h){for(var g in h){h[g].quickToggle(f)}}})}}}});function c(d,f){LayoutManager.refreshElementsLayout(this)}function a(g,h,j,f,i){var d=this;d.animatePart(d.$element,{layoutMargin:h},undefined,j,{complete:i});if(d.isInDesignMode()){b(d,h)}}function b(d,i){var h=d.data.marginMarkings;if(!h){d.data.marginMarkings=h={}}var g=d.getPropertyValue("fillLayout");var j=d.getPropertyValue("verticalLayout");var f=d.getPropertyValue("horizontalLayout");$.each(["left","top","right","bottom"],function(o,n){var l=i[n];if(d.hasCellWrapper.isFalse()&&l!==0&&((n=="left"&&(g.fillHorizontal||f===LayoutManager.Layout.dockLeft||f===LayoutManager.Layout.centered))||(n=="right"&&(g.fillHorizontal||f===LayoutManager.Layout.dockRight))||(n=="top"&&(g.fillVertical||j===LayoutManager.Layout.dockTop||j===LayoutManager.Layout.centered))||(n=="bottom"&&(g.fillVertical||j===LayoutManager.Layout.dockBottom)))){var m=h[n];if(!m){m=$("<span class='margin-marking'><span class='margin-marking-line'></span></span>").addClass(n).prependTo(d.$element);h[n]=m}var p=((n==="left"&&!g.fillHorizontal&&f===LayoutManager.Layout.centered)||(n==="top"&&!g.fillVertical&&j===LayoutManager.Layout.centered));m.removeClass("not-active");var k=d.duringResizing.isTrue()||d.isInDragging.isTrue();m.quickToggle(k).toggleClass("positive",l>=0).toggleClass("negative",l<0).toggleClass("center-margin",p);switch(n){case"left":case"right":m.width(Math.abs(l));break;case"top":case"bottom":m.height(Math.abs(l));break}}else{if(h[n]){h[n].addClass("not-active")}}})}$.cssHooks.layoutMargin={get:function(h,g,f){var d=$instance(h);if(d){return d.currentMargin}return},set:function(f,g){var d=$instance(f);if(d){d.currentMargin=g;LayoutManager.refreshElementsLayout(d)}}};$.fx.step.layoutMargin=function(d){$.cssHooks.layoutMargin.set(d.elem,{left:d.end.left===null?null:Math.floor(d.start.left+d.pos*(d.end.left-d.start.left)),top:d.end.top===null?null:Math.floor(d.start.top+d.pos*(d.end.top-d.start.top)),right:d.end.right===null?null:Math.floor(d.start.right+d.pos*(d.end.right-d.start.right)),bottom:d.end.bottom===null?null:Math.floor(d.start.bottom+d.pos*(d.end.bottom-d.start.bottom))})}})();(function(){ElementsModel.registerDefinition(Features,{Resizable:{methods:{},aggregatedMethods:{definitions:{adjustResizing:$.noop}}}})})();(function(){ElementsModel.registerDefinition(Features,{UserSelectable:{properties:{startSelected:{title:"Start Selected",defaultValue:$.returnFalse,category:PropertiesCategories.Other}},methods:{setNeverSelectedInClick:function(b){this.data.neverSelected=b},isNeverSelectedInClick:function(b){return this.data.neverSelected},isUserSelected:function(){return this.data.isUserSelected},userSelect:function(b){if(b===undefined){b=!this.data.isUserSelected}var c=this.data.isUserSelected;this.data.isUserSelected=b;if(c!==b){if(this.data.isUserSelected){this.activateTrigger(Triggers.Selected)}else{this.activateTrigger(Triggers.Unselected)}}}},aggregatedMethods:{aggregations:{onBeforePageOpen:function(){var b=this;if(this.data.isUserSelected!==undefined&&b.shouldInitInstanceOnPageChange()&&!b.isNeverSelectedInClick()){var c=b.getPropertyNormalValue("startSelected");this.data.isUserSelected=!c;b.userSelect(c)}},switchToPreview:function(){var b=this;var c=this.getPropertyValue("startSelected");if(c){this.userSelect(true)}},switchToDesign:function(){if(this.data.isUserSelected){this.userSelect(false)}}}},triggers:[Triggers.Selected,Triggers.Unselected],supportedStates:[ElementStates.ElementSelectedState],initialize:a}});function a(c){var b=this;b.$element.click(function(){if(!ViewManager.isDesignMode()&&!b.data.neverSelected){b.userSelect()}})}})();(function(){ElementsModel.registerDefinition(Features,{HasSimpleBinding:{getExtensions:function(a){return{isInRefreshingBinding:ObservableFlag.createConditionalNegative()}},properties:{dataFields:{},binding:{defaultValue:$.returnNull,onChange:function(f,h,b,c){var a=this;if(c&&a.data.callbackID&&DataSources[c.dataSourceName]){a.data.callbackID.unbind()}a.isInRefreshingBinding.setTrue("bindingChanged");PropertiesManager.UpdateBatch.start();if(a.data.propertiesBindings){$.each(a.data.propertiesBindings,function(j,i){i.clearBinding()});delete a.data.propertiesBindings}if(h&&h.dataSourceName){var d=a.createBindingFieldsToProperties();a.data.propertiesBindings=d;if(DataSources[h.dataSourceName]){var g=DataSources[h.dataSourceName].itemUpdatedEvent.bind(h.dataItemID,function(i){a.refreshBinding()});a.data.callbackID=g}}a.refreshBinding();PropertiesManager.UpdateBatch.finish();a.isInRefreshingBinding.setFalse("bindingChanged")}}},methods:{isConnectedToField:function(){var a=this;if(TemplateEditingManager.Flags.IsInEditingMode.isTrue()){var c=TemplateEditingManager.getCurrentInstance();var d=c.getPropertyValue("fieldsMap");var b=d[a.id];if(!$.isEmptyObject(b)){return $.findFirst(b,function(g,f){return DataSourceItemsFields[f.type].supportElementContentBinding(a.elementType.name)})!==undefined}}return a.hasBinding()},setBindingValueToProperty:function(c,b){var a=this;if(a.data.propertiesBindings&&a.data.propertiesBindings[b]){a.data.propertiesBindings[b].setValue(c)}else{a.setPropertyValue(b,c)}},setBindingValuesToProperties:function(b){var a=this;$.each(b,function(c,d){a.setBindingValueToProperty(d,c)})},isBoundToProperty:function(a){return PropertiesTypes[a].isBound(this)},setBinding:function(b,c,a){this.setPropertiesValues({binding:{dataSourceName:b,dataFields:a,dataItemID:c}})},refreshBinding:function(){var a=this;a.performWhenVisible(function(){var b=a.getPropertyValue("binding");if(b&&DataSources[b.dataSourceName]){a.isInRefreshingBinding.setTrue("refreshBinding");DataSources[b.dataSourceName].fetchDataItem(b.dataItemID,b.dataFields,a.onDataReady,a.onDataError)}},a.id+"refreshBinding-has-simple-binding")},updateBinding:function(){var a=this;if(ViewManager.isDesignMode()&&Modes.NormalMode.flag.isTrue()&&!a.isInRefreshing()&&a.propertiesInitialized&&a.hasBinding()&&!TemplateEditingManager.isDuringEditing()&&!ModeManager.updateBatch.isActive()){var d=a.getPropertyValue("binding");var c=DataSources[d.dataSourceName];if(d&&c&&c.setDataItems){var b=a.onUpdateBindingReady();DataSources[d.dataSourceName].setDataItems(b)}}},isInRefreshing:function(){var a=this;return a.isInRefreshingBinding.isTrue()},isBound:function(a){var b=this.getPropertyValue("binding");return b!==null&&b.dataFields[a]!==undefined},changeBound:function(a){var b=this.getPropertyValue("binding");this.setPropertyValue("binding",{dataSourceName:b.dataSourceName,dataFields:b.dataFields,dataItemID:a})},getBindingFields:function(a){var c=this.getPropertyValue("binding");var b=["dataFields"];if(a!==undefined){b.push(a)}return $.objectGet(c,b,function(d){return !d})}},aggregatedMethods:{definitions:{createBindingFieldsToProperties:function(){return{}},onContentTypeChanged:function(a,b){},onDataReady:function(c){var a=this;var d=a.getPropertiesValues().binding;var b={};$.each(d.dataFields,function(f,g){b[f]=c[g.name]});this.onBoundValueReady(b,c);a.isInRefreshingBinding.setFalse("refreshBinding")},onUpdateBindingReady:function(){var a=this.getPropertyValue("binding");return $.cloneObject(DataSources[a.dataSourceName].fetchDataItem(a.dataItemID,a.dataFields))},onBoundValueReady:function(a){},onDataError:function(b){var a=this;a.isInRefreshingBinding.setFalse("refreshBinding")}},aggregations:{onRemove:function(){var a=this;var b=this.getPropertiesValues().binding;if(b&&b!==null){if(a.data.callbackID&&DataSources[b.dataSourceName]){DataSources[b.dataSourceName].getCollectionItems().itemUpdatedEvent.unbind(a.data.callbackID)}}}}},onInstanceInitialized:function(){this.refreshBinding()}}})})();(function(){ElementsModel.registerDefinition(Features,{Clickable:{properties:{urlAddress:{title:"Url",defaultValue:$.returnNull,supportsBinding:true,isNotForCustomProperty:true,isBound:function(f){return f.isBound&&f.isBound(DataSourceItemsFields.link.getContentType())},isInTemplate:function(f){return !PropertiesTypes.urlAddress.isBound(f)},onChange:d},openInNewTab:{title:"open In New Tab",defaultValue:$.returnFalse},openInTopWindow:{title:"open In New Tab",defaultValue:$.returnFalse}},methods:{hasBinding:function(){return PropertiesTypes.urlAddress.isBound(this)},refreshCursor:function(){var f=this;var g=this.getPropertyValue("urlAddress");if((g&&g.url)||f.isType([ElementsTypes.skinMenuButtonItem,ElementsTypes.paypalButton,ElementsTypes.checkOutButton])||f.hasFeature(Features.HasNavigation)||(f.hasClickableConnections())||ConnectionManager.hasTargetConnectionsInPagesForTriggers(f,PageManager.getCurrentPage(),Triggers.MouseDown,Triggers.MouseClick,Triggers.MouseUp)||PropertiesManager.isStyleAffectingInPage(f,PageManager.getCurrentPage(),ElementStates.MouseDownState)||PropertiesManager.isStyleAffectingInPage(f,PageManager.getCurrentPage(),ElementStates.ElementSelectedState)||(f.getPropertyValue("customStates")!==null&&$.getKeys(f.getPropertyValue("customStates")).length>0)){f.$element.addClass("webzai-clickable-behaviour")}else{f.$element.removeClass("webzai-clickable-behaviour")}}},aggregatedMethods:{aggregations:{switchToPreview:function(){var f=this;window.setTimeout(function(){c(f,f.getPropertyValue("urlAddress"))},0)},switchToDesign:function(){var f=this;b(f,f.getPropertyValue("urlAddress"))},createBindingFieldsToProperties:function(g){var f=this;var h=DataSourceItemsFields.link.getContentType();if(this.isBound(h)){g[PropertiesTypes.urlAddress.name]=ObservableObject.createPropertyBinding(f,{propertyName:PropertiesTypes.urlAddress.name})}return g},onBoundValueReady:function(f){var g=DataSourceItemsFields.link.getContentType();if(this.isBound(g)){this.setBindingValueToProperty(f[g]===undefined?null:f[g],PropertiesTypes.urlAddress.name)}}}},features:[Features.UserSelectable,Features.HasSimpleBinding],triggers:[Triggers.MouseClick,Triggers.MouseDown,Triggers.MouseUp],supportedStates:[ElementStates.MouseDownState],initialize:a}});function a(){var g=this;f(g);function f(h){if("ontouchstart" in document.documentElement){h.$element[0].addEventListener("touchstart",function(i){h.activateTrigger(Triggers.MouseDown,i)},false);h.$element[0].addEventListener("touchend",function(i){h.activateTrigger(Triggers.MouseUp,i)},false)}h.$element.mousedown(function(i){h.activateTrigger(Triggers.MouseDown,i);$(document).one("mouseup",function(j){window.setTimeout(function(){if($(j.target).closest(h.$element).length>0){h.activateTrigger(Triggers.MouseClick,j)}h.activateTrigger(Triggers.MouseUp,j)},0)})})}}function c(f,i,m){b(f);f.refreshCursor();if(i&&i.url){var g;if(i.type===LinkTypes.Pages){var h=PageManager.getPageData(i.url);if(!h){return}g=PageManager.getPageFragmentValue(i.url)}else{if(i.type===LinkTypes.Email){g="mailto:"+i.url}else{if(i.type===LinkTypes.Cell){g="tel:"+i.url}else{if(i.type===LinkTypes.Asset){g=AssetsManager.resolveAssetUrl(i.url)}else{var j=i.url;if(i.url.indexOf("://")<0){j="http://"+j}g=j}}}}var k=f.getMainBox();if(f.isInDesignMode()&&(i.type!==LinkTypes.Pages||f.getPropertyValue("openInNewTab"))){k.bind("click.link",function(){var o;var n;if(i.type===LinkTypes.Asset){o="Open File";n='The editor is preventing you from opening the file "{0}"<br/> Do you want to open the file anyway?'.format(i.url.title)}else{o="Open Link";n='The editor is preventing you from opening a link to "{0}"<br/> Do you want to open the link in a new window?'.format(g)}ConfirmationDialog.open({buttons:ConfirmationPanel.YesNoButtons,buttonsOptions:[{type:ConfirmationButtonsTypes.Yes,href:g}],header:o,confirmationMessage:n})});f.data.bindToLink=true}else{var l=$("<a class='design-element-link-part no-decorations'></a>").bind("click",function(n){if(i.type!==LinkTypes.Pages){n.stopPropagation()}});if(f.getPropertyValue("openInTopWindow")){l.attr("target","_top")}else{if(f.getPropertyValue("openInNewTab")||(PropertiesTypes.urlAddress.isBound(f)&&i.type!==LinkTypes.Pages)){l.attr("target","_blank")}}if(i.type===LinkTypes.Pages){l.addClass("internal-link");g=UrlManager.getFullHtmlUrl(g)}l.attr("href",g);k.wrap(l);f.data.wrapWithLink=true}}}function d(h,j,k,i){var f=this;if(f.isInPreview()){c(f,j)}if(f.data.pageDeletedForUrlBinding){f.data.pageDeletedForUrlBinding.unbind()}if(j&&j.type===LinkTypes.Pages){var g=PageManager.getPageData(j.url);if(!g){OperationsManager.disableBatch();f.setPropertyValue("urlAddress",null);OperationsManager.endDisableBatch()}else{f.data.pageDeletedForUrlBinding=PageManager.Events.PageDeleted.bind(function(l){if(l===j.url){OperationsManager.disableBatch();f.setPropertyValue("urlAddress",null);OperationsManager.endDisableBatch()}})}}}function b(f){if(f.data.wrapWithLink){var g=f.getMainBox();g.unwrap();f.data.wrapWithLink=false}else{if(f.data.bindToLink){f.getMainBox().unbind("click.link");f.data.bindToLink=false}}}})();(function(){ElementsModel.registerDefinition(Features,{FacebookPlugin:{methods:{getPluginName:function(){console.warn("Missing Plugin Name For Facebook Element");return""},getFacebookProperties:function(){var b=this;if(b.data.facebookProperties===undefined){b.data.facebookProperties=b.computeSupportedFacebookProperties()}return b.data.facebookProperties},getElementDataContentSize:function(){var b=this;var d=b.data.$plugin;if(!d){d=b.getElementContent()}var c=d.outerSize();return c},recreatePlugin:function(){a(this)}},features:[Features.Clickable,Features.ExpressMode],aggregatedMethods:{definitions:{computeSupportedFacebookProperties:function(){return[]},onInstanceParsed:function(){},updatePlugin:function(c){var b=this;if($.browser.msie&&parseInt($.browser.version)<9){var d=b.getSize();c.attr("width",d.width)}else{c.attr("width","100%")}}},aggregations:{updateInstanceToViewPort:function(){a(this)},removeInstanceFromViewPort:function(){a(this)},switchToDesign:function(){a(this)}}},onInstanceInitialized:function(){var b=this;FaceBookManager.initialize();b.propertiesChanged.bind(function(c){if($.containsOneOfKeys(c,b.getFacebookProperties())){a(b)}});a(b)}}});function a(b){var c=[LayoutManager.layoutUpdateBatch,FaceBookManager.FaceBookInitializingBatch];OperationsBatch.whenAllFinished(c,function(){var d=b.getElementContent();d.empty();var f=$("<fb:{0} class='facebook-widget'></fb:{0}>".format(b.getPluginName()));b.updatePlugin(f);b.data.$plugin=f;f.appendTo(d);FB.XFBML.parse(d[0],function(){b.data.$plugin=d.children();b.onInstanceParsed()})},b.id+"recreatePlugin")}})();(function(){ElementsModel.registerDefinition(Features,{Editable:{getExtensions:function(a){return{isInEditingData:ObservableFlag.create(false),duringEditingBatch:OperationsBatch.create()}},methods:{startEditing:function(){this.onStartEditing();this.data.duringEditing=true;this.isInEditingData.setValue(true);this.duringEditingBatch.start()},finishEditing:function(a){if(a===undefined){a=true}this.data.duringEditing=false;this.isInEditingData.setValue(false);this.duringEditingBatch.finish();this.onFinishEditing(a);this.$element.enableSelectionTriggering()},isEditing:function(){return this.data.duringEditing},editingEnabled:function(){return true},onEditingDisable:$.noop},aggregatedMethods:{definitions:{onStartEditing:function(){if(DraggingManager.isEnabled()){DraggingManager.toggleEnable(false)}},onFinishEditing:function(a){NotificationPanel.hideNotification();if(!DraggingManager.isEnabled()){DraggingManager.toggleEnable(true)}}}}}})})();(function(){ElementsModel.registerDefinition(Features,{ItemsContainer:{initialize:a,onInstanceCreated:function(){var d=this;if(Global.IsDesigner){d.data.observableChildren=new ObservableCollection();d.data.childrenCollection=CollectionObserver.create(d.data.observableChildren)}},getExtensions:function(d){return{childElementAdded:SimpleEvent.create(),childElementRemoved:SimpleEvent.create(),isOverflowHidden:ObservableFlag.createConditionalPositive()}},properties:{isGrowable:{title:"Growable",defaultValue:function(){return{bottom:false,right:false}},category:PropertiesCategories.Other},overflow:{title:"Overflow",isStateProperty:true,isStyleProperty:true,defaultValue:$.returnFalse,category:PropertiesCategories.Other,onChange:function(f,g){var d=this;d.isOverflowHidden.setValue(g,"propertyChange")}},rowsItems:{isStateProperty:true,defaultValue:$.returnNull}},methods:{canDuplicate:function(){var d=this;return !c(d)},isUnique:function(){var d=this;return c(d)},isMandatory:function(){var d=this;return b(d)},addRowToContainer:function(f){var d=this.getPropertyValue("rowsItems");if(!d){d={}}d=$.extend(true,{},d);d[f.id]=f.getDataForSave();this.setPropertyValue("rowsItems",d)},removeRowFromContainer:function(f){var d=this.getPropertyValue("rowsItems");if(d){d=$.extend(true,{},d);delete d[f.id];this.setPropertyValue("rowsItems",d)}},getRowsFromContainer:function(){var d=this;var g=this.getPropertyValue("rowsItems");var f={};if(g){$.each(g,function(j,i){var h=RowsManager.getRowById(i.id);if(h&&h.containerInstance===d){f[j]=h}})}return f},selectBeforeChildren:function(){return true},getChildrenViewPort:$.returnNull,getContextChildren:function(){return this.getChildInstances()},hasBoundaries:function(){return MobileVersionViewManager.Flags.IsActivated.isTrue()||this.hasCellWrapper.isTrue()||!$.isEmptyObject(this.getRowsFromContainer())},hasContentVerticalAlign:function(){return MobileVersionViewManager.Flags.IsActivated.isTrue()},adjustSizeAndPositionToChilds:function(){var d=this;var f=ArrangementManager.calculateArrangementSizeAndPositionInfo(d.childInstances);var g=$.extend({},d.getPropertyValue("sizeAndPosition"));LayoutManager.beginLayoutUpdateBatch();var i=f.top;var h=f.left;d.setPropertyFieldsValues("sizeAndPosition",{width:f.right-h,height:f.bottom-i,left:g.left+h,top:g.top+i});if(h!==0||i!==0){$.each(d.childInstances,function(l,k){var j=k.getPropertyValue("sizeAndPosition");k.setPropertyFieldsValues("sizeAndPosition",{top:j.top-i,left:j.left-h})})}LayoutManager.endLayoutUpdateBatch()},append:function(d){},reorderChildElements:function(){if(this.hasOrder.getValue()){var l=$([]);var g=this.getChildInstances();if(g.length>0&&!$.isEmptyObject(this.getRowsFromContainer())&&this.canContainerRows()){var k={};var o=[];var m=$([]);var p;var f;for(var h=0;h<g.length;h++){var j=g[h];if(j.hasFeature(Features.HasResponsiveItem)&&j.shouldInstanceWrapWithCell()&&j.getCellItem()&&j.hasCellWrapper.isTrue()){var d=j.getCellItem();var n=d.getRowParent();if(n){if(m.length===0){f=n}if(!k[n.id]){k[n.id]=$([]);o.push(n);m.pushElements(n.$element);p=n}k[n.id].pushElements(d.getElement())}}}if(o.length>0){$.each(o,function(q,r){r.markChilds()});f.toggleFirstRow(true);p.toggleLastRow(true);m.applyDOMOrder();$.each(k,function(q,i){i.applyDOMOrder()})}}else{for(var h=0;h<g.length;h++){l.pushElements(g[h].$element)}}l.applyDOMOrder()}},addChildElement:function(f,g){var d=this.getContentLayer().append(f.$element);f.onAttached();return d}},aggregatedMethods:{definitions:{canContainerRows:function(){return !this.isContent()},accept:function(d){return true},onChildElementRemoved:function(d){if(Global.IsDesigner){this.data.observableChildren.remove(d.id)}Global.Events.ChildElementRemoved.fire(this,d);this.childElementRemoved.fire(this,d)},onChildElementAdded:function(f,g){ElementsManager.Events.ElementAddedToContainer.fire(f,f);var d=this;if(g&&g.isInDrop){f.setPropertiesValues({verticalLayout:LayoutManager.Layout.normal,horizontalLayout:LayoutManager.Layout.normal,fillLayout:{fillHorizontal:false,fillVertical:false},isFixed:false});if(!g.isOrderChanged){OrderManager.bringToFront(f)}}OrderManager.reassignElementsOrders();PositionManager.visibilityTreeAttach(f);if(Global.IsDesigner){d.data.observableChildren.put(f)}this.childElementAdded.fire(this,f)},getChildrenCollection:function(){return this.data.childrenCollection},getChildrenObservable:function(){return this.data.observableChildren}},aggregations:{canDelete:function(f){var d=this;return f&&!b(d)},isDroppable:function(d){return d&&(this.isSelectable!==false)&&this.isInstanceVisible()&&!this.isForTemplateUse()&&TemplateEditingManager.getCurrentInstance()===this.getTemplateItemContent()}}}}});function b(d){return $.any(d.childInstances,function(f){return f.isMandatory()})}function c(d){return $.any(d.childInstances,function(f){return f.isUnique()})}function a(f){var d=this;if(d.isInSelectionContext){SimpleEvent.bindAndExecute([d.canEdit.valueChangedEvent,d.isInSelectionContext.valueChangedEvent],function(){var g=d.isInSelectionContext.getValue()&&(!d.hasFeature(Features.DataListItem)||d.canEdit.isTrue());d.isOverflowHidden.setValue(!g,"isInContext")})}d.isOverflowHidden.valueChangedEvent.bindAndExecute(function(){var g=d.isOverflowHidden.getValue();if(g){d.getContentLayer().addClass("overflow-hidden")}else{d.getContentLayer().removeClass("overflow-hidden")}})}})();(function(){ElementsModel.registerPropertiesCategories({Visibility:{title:"Visibility",iconClass:"sprite-icon sprite-property-category-visibility"}});ElementsModel.registerDefinition(Features,{Hideable:{getExtensions:function(c){return{isVisibleFlag:ObservableFlag.create(true)}},methods:{toggleVisibility:a},properties:{isVisible:{shouldRefreshIfNotVisible:true,isStateProperty:true,title:"Visibility",defaultValue:$.returnTrue,category:PropertiesCategories.Visibility,supportsStatesTransitionAnimation:true,onChange:b}},aggregatedMethods:{aggregations:{onBeforePageOpen:function(){var d=this;var c=d.getPropertyNormalValue("isVisible");if(d.shouldInitInstanceOnPageChange()&&c!==undefined){PropertiesManager.updateComputedValue(d,d.properties.isVisible,c)}},switchToPreview:function(){var d=this;var c=d.getPropertyValue("isVisible");this.isDisplayed.setValue(true,"editTemplate");if(c===false){this.hideElement()}},switchToDesign:function(){var d=this;var c=d.getPropertyNormalValue("isVisible");if(c!==undefined&&ModeManager.getPrevMode()===Modes.NormalMode){PropertiesManager.updateComputedValue(d,d.properties.isVisible,c)}this.showElement();if(d.isTemplateItemContent()&&!d.hasFeature(Features.TemplateItem)&&c===false&&TemplateEditingManager.Flags.IsInEditingTemplate.isFalse()){d.isDisplayed.setValue(false,"editTemplate")}},onRemove:function(){}}},onInstanceInitialized:function(){}}});function a(d,f){var c={animation:d,animationOptions:{duration:f}};if(!PositionManager.isElementVisible(this)){this.showElement(c)}else{this.hideElement(c)}}function b(f,g,h){var c=this;if(h!==undefined&&$.isPlainObject(h.transitionEffect)){h.transitionEffect=h.transitionEffect.name}if(!ViewManager.isDesignMode()||c.isForTemplateUse()){if(h&&h.transitionDuration){var d={animation:h.transitionEffect,animationOptions:{duration:h.transitionDuration,direction:h.transitionSlideDirection,flyDirection:h.transitionFlyDirection}};if(g){c.showElement(d)}else{c.hideElement(d)}}else{if(g){c.showElement()}else{c.hideElement()}}}}})();(function(){ElementsModel.registerPropertiesCategories({Border:{title:"Border",iconClass:"sprite-icon sprite-property-category-border",shortTitle:"Border"},Roundness:{title:"Roundness",iconClass:"sprite-icon sprite-property-category-roundness"}});ElementsModel.registerDefinition(Features,{HasBorder:{properties:{borderWidth:{title:"Border Width",isStateProperty:true,isStyleProperty:true,scaleProperty:function(f){return{bottom:f.y,right:f.x,top:f.y,left:f.x}},getResetValue:$.returnEmptyBorderObject,defaultValue:$.returnEmptyBorderObject,valueConverter:[StructureLoadingManager.createRoundPropertyValueConverter(["top","left","bottom","right"])],category:PropertiesCategories.Border,supportsStatesTransitionAnimation:true,onChange:d},roundness:{title:"Roundness",isStateProperty:true,isStyleProperty:true,supportsStatesTransitionAnimation:true,getResetValue:$.returnEmptyRoundnessObject,defaultValue:$.returnEmptyRoundnessObject,scaleProperty:function(f){return{bottomRight:f.x,topRight:f.x,topLeft:f.x,bottomLeft:f.x}},valueConverter:[StructureLoadingManager.createRoundPropertyValueConverter(["topLeft","bottomLeft","topRight","bottomRight"])],category:PropertiesCategories.Roundness,onChange:a},borderColor:{title:"Border Color",isStateProperty:true,isStyleProperty:true,getResetValue:$.returnBlackBorderObject,defaultValue:$.returnBlackBorderObject,valueConverter:[StructureLoadingManager.createStringToObjectValueConverter(["top","left","bottom","right"]),StructureLoadingManager.createValueToObjectValueConverter(["top","left","bottom","right"])],supportsStatesTransitionAnimation:true,supportsThemeBinding:["top","left","bottom","right"],category:PropertiesCategories.Border,onChange:b},borderStyle:{title:"Border Style",isStateProperty:true,isStyleProperty:true,getResetValue:function(){return $.convertValueToObject("solid",["top","left","bottom","right"])},defaultValue:function(){return $.convertValueToObject("solid",["top","left","bottom","right"])},category:PropertiesCategories.Border,onChange:c}},calculatedProperties:["lineColor"],aggregatedMethods:{aggregations:{getCalculatedPropertyValue:function(g,f,h){switch(g){case"lineColor":return this.getPropertyValue("borderColor","top",f)}return h},setCalculatedPropertyValue:function(f,h,g,i){switch(f){case"lineColor":this.setPropertyValue("borderColor",h,g,i);break}}}},initialize:function(){var f=this;f.borderTargetAddedEvent.bind(function(i){var h=f.getActualPropertyValue("borderWidth");if(h){i.css({"border-top-width":h.top,"border-left-width":h.left,"border-bottom-width":h.bottom,"border-right-width":h.right})}var g=f.getActualPropertyValue("borderRadius");if(g){i.css({borderRadiusTopLeft:g.topLeft,borderRadiusTopRight:g.topRight,borderRadiusBottomLeft:g.bottomLeft,borderRadiusBottomRight:g.bottomRight})}})}}});function d(g,h,k,i){if(!h){return}var f=(i===undefined);var j=h.top!==0||h.left!==0||h.right!==0||h.bottom!==0;if(!f||j){this.animatePart(this.$element,{instanceBorderWidth:h},false,k,{isInitialization:f})}else{this.setActualPropertyValue("borderWidth",{left:0,top:0,right:0,bottom:0})}}function a(h,i,k,j){if(!i){return undefined}if(!$.support.borderRadius){return}var g=i.topLeft!==0||i.topRight!==0||i.bottomLeft!==0||i.bottomRight!==0;var f=(j===undefined);if(!f||g){this.animatePart(this.$element,{instanceBorderRadius:i},false,k,{isInitialization:f})}else{this.setActualPropertyValue("borderRadius",{topLeft:0,topRight:0,bottomLeft:0,bottomRight:0})}}function b(h,j,m,l){var f=this;if(!j){return}var i={borderTopColor:ThemeColorsManager.evaluateColorBinding(j.top,true),borderBottomColor:ThemeColorsManager.evaluateColorBinding(j.bottom,true),borderLeftColor:ThemeColorsManager.evaluateColorBinding(j.left,true),borderRightColor:ThemeColorsManager.evaluateColorBinding(j.right,true)};var g=(l===undefined);var k=f.getBorderBox();f.animatePart(k,i,true,m,{isInitialization:g});PropertiesManager.notifyCalculatedPropertyChange(f,"lineColor")}function c(f,g){if(!g){return}this.getBorderBox().css({borderTopStyle:g.top,borderBottomStyle:g.bottom,borderLeftStyle:g.left,borderRightStyle:g.right})}$.cssHooks.instanceBorderWidth={get:function(i,h,g){var f=$instance(i);return f&&f.getActualPropertyValue("borderWidth")},set:function(h,i){var f=$instance(h);if(f){f.setActualPropertyValue("borderWidth",i);f.getBorderTarget().css({borderTopWidth:i.top+"px",borderLeftWidth:i.left+"px",borderBottomWidth:i.bottom+"px",borderRightWidth:i.right+"px"});var g=f.getActualPropertyValue("borderRadius");if(f.hasFeature(Features.ItemsContainer)&&g&&!$.borderWidthEqualityComparer(f.data.borderWidth,i)){f.data.borderRadius=g;f.data.borderWidth=i;$.updateInnerBorderRadius(f.getContentLayer(),g,i)}f.handleContentSizeChange();LayoutManager.refreshElementsLayout(f)}}};$.fx.step.instanceBorderWidth=function(f){$.cssHooks.instanceBorderWidth.set(f.elem,{left:f.end.left===null?null:Math.floor(f.start.left+f.pos*(f.end.left-f.start.left)),top:f.end.top===null?null:Math.floor(f.start.top+f.pos*(f.end.top-f.start.top)),right:f.end.right===null?null:Math.floor(f.start.right+f.pos*(f.end.right-f.start.right)),bottom:f.end.bottom===null?null:Math.floor(f.start.bottom+f.pos*(f.end.bottom-f.start.bottom))})};$.cssHooks.instanceBorderRadius={get:function(i,h,g){var f=$instance(i);return f&&f.getActualPropertyValue("borderRadius")},set:function(h,i){var f=$instance(h);if(f){f.setActualPropertyValue("borderRadius",i);f.getBorderTarget().css({borderRadiusTopLeft:i.topLeft,borderRadiusTopRight:i.topRight,borderRadiusBottomLeft:i.bottomLeft,borderRadiusBottomRight:i.bottomRight});if(f.hasFeature(Features.ItemsContainer)&&i&&!$.borderRadiusEqualityComparer(f.data.borderRadius,i)){var g=f.getActualPropertyValue("borderWidth");f.data.borderRadius=i;f.data.borderWidth=g;$.updateInnerBorderRadius(f.getContentLayer(),i,g)}}}};$.fx.step.instanceBorderRadius=function(f){$.cssHooks.instanceBorderRadius.set(f.elem,{topLeft:f.end.topLeft===null?null:Math.floor(f.start.topLeft+f.pos*(f.end.topLeft-f.start.topLeft)),topRight:f.end.topRight===null?null:Math.floor(f.start.topRight+f.pos*(f.end.topRight-f.start.topRight)),bottomLeft:f.end.bottomLeft===null?null:Math.floor(f.start.bottomLeft+f.pos*(f.end.bottomLeft-f.start.bottomLeft)),bottomRight:f.end.bottomRight===null?null:Math.floor(f.start.bottomRight+f.pos*(f.end.bottomRight-f.start.bottomRight))})}})();(function(){ElementsModel.registerDefinition(Features,{HasOutline:{properties:{lineWidth:{title:"Line Width",isStateProperty:true,isStyleProperty:true,getResetValue:$.returnOne,defaultValue:$.returnOne,category:PropertiesCategories.Border,valueConverter:[StructureLoadingManager.createRoundPropertyValueConverter()],scaleProperty:function(a){return a.x}},lineColor:{title:"Line Color",isStateProperty:true,isStyleProperty:true,supportsThemeBinding:true,defaultValue:function(){return"Black"},category:PropertiesCategories.Border},lineStyle:{title:"Line Style",isStateProperty:true,isStyleProperty:true,defaultValue:function(){return"solid"},category:PropertiesCategories.Border}},aggregatedMethods:{aggregations:{}}}})})();(function(){ElementsModel.registerDefinition(Features,{HasEmptyState:{getExtensions:function(b){return{inEmptyStateFlag:ObservableFlag.createConditionalPositive(),emptyStateChangedEvent:SimpleEvent.create(),emptyStateController:undefined}},onInstanceInitialized:function(){if(Global.IsDesigner){var b=this;var c=SimpleEvent.createEventListener($.merge([b.emptyStateChangedEvent],b.getEmptyStateChangedEvents()),function(){var f=b.getEmptyTemplateInfo();if(b.emptyStateController){b.emptyStateController.dispose();delete b.emptyStateController}if(f!==undefined){b.emptyStateController=a(b,f);b.emptyStateController.appendTo(b.getMainBox());if(!ViewManager.isDesignMode()){b.emptyStateController.hideMessage()}}});var d=SimpleEvent.createEventListener(b.inEmptyStateFlag.valueChangedEvent,function(){if(b.emptyStateController){c.deactivate();b.emptyStateController.dispose();delete b.emptyStateController}if(b.inEmptyStateFlag.isTrue()){c.activateAndExecute();b.onEmptyStateStart()}else{b.onEmptyStateFinished()}}).activateAndExecute();b.instanceRemoving.one(function(){c.dispose();d.dispose()})}},methods:{getEmptyStateChangedEvents:$.returnEmptyArray,getEmptyTemplateInfo:$.returnUndefined},aggregatedMethods:{definitions:{onEmptyStateStart:$.noop,onEmptyStateFinished:$.noop},aggregations:{switchToPreview:function(){var b=this;if(b.emptyStateController){b.emptyStateController.hideMessage()}},switchToDesign:function(){var b=this;if(b.emptyStateController){b.emptyStateController.showMessage()}}}}}});function a(o,g){g=$.extend({title:undefined,label:undefined,shortLabel:undefined,iconClass:undefined,className:undefined,actions:{}},g);var l=g.iconClass;var m=g.title;var n=g.label;var b=g.shortLabel;var j=g.className;var c=g.actions;var k=new StringBuilder();$.each(c,function(q,r){n=n.replace(new RegExp("{"+q+"}","g"),"<a class='empty-element-action' data-empty-element-action='{0}'>{1}</a>".format(q,r.title))});k.append("<div class='empty-element stretched-to-fill content-centered ${className}'>");k.append('<span class="height-normalizer"></span>');k.append('<span class="vertically-centered overflow-hidden" style="width: 100%">');if(l!==undefined){k.append('<span class="empty-part icon icon-container"><span class="inline-block ${iconClass}"></span></span>')}if(m!==undefined){k.append('<span class="empty-part empty-title">${title}</span>')}k.append('<span class="empty-part empty-text">${label}</span>');k.append('<span class="empty-part empty-help theme-text-link">[?]</span>');k.append("</span>");k.append("</div>");var p=$.useSimpleTemplate(k.toString(),{label:n,title:m,iconClass:l,className:j});p.on("click",".empty-element-action",function(r){var q=$(this);var s=c[q.attr("data-empty-element-action")];SelectionManager.selectInstances(o,true);s.doAction({args:s.args,$element:q});r.stopPropagation();r.preventDefault()}).on("mousedown",".empty-element-action",function(q){q.stopPropagation();q.preventDefault()});var h=$(".empty-help",p).attachCustomToolTip(CommonToolTips.ButtonDescriptionToolTip.Above,{content:"<div class='empty-element-tooltip-content'>"+n+"</div>"});var i=$(".empty-text",p);var f=SimpleEvent.createEventListener(o.sizeChangedEvent,function(){o.emptyStateController.refresh()}).activate();var d={isSmallSet:ObservableFlag.create(undefined,{valueChangeCallback:function(q){p.toggleClass("big-set",!q);p.toggleClass("small-set",q);h.quickToggle(q);i.html(q?b:n)}}),refresh:function(){d.isSmallSet.setValue(o.getSize().height<105)},appendTo:function(q){p.appendTo(q)},getEmptyElement:function(){return p},hideMessage:function(){p.quickHide()},showMessage:function(){p.quickShow()},dispose:function(){p.remove();f.dispose()}};d.refresh();return d}})();(function(){ElementsModel.registerDefinition(Features,{DataList:{getExtensions:function(a){return{fitToContentFlag:ObservableFlag.createConditionalNegative(false),reArrangementDisabled:ObservableFlag.createConditionalNegative(false),reArrangingStarted:SimpleEvent.create(),beforeReArrangingFinished:SimpleEvent.create(),reArrangingFinished:SimpleEvent.create(),totalCountObservable:ObservableObject.createNumerical(undefined,{valueChangeCallback:function(b){a.inEmptyStateFlag.setValue(b===0)}})}},defaultProperties:{dataLayout:function(){return{name:"Horizontal"}}},properties:{itemsStyle:{isStateProperty:true,shouldRefreshIfNotVisible:true,notForUndoProperty:true,defaultValue:$.returnEmptyObject}},methods:{shouldBeBlockElementInMobile:function(){return true},swapItemsIndex:function(b,a){var c=b.index;b.index=a.index;a.index=c},getDataItemInstanceId:function(a){return this.id+TemplateItemInstanceIdSeperator+a},getAllItemsIds:function(d){var c=this;var a=$.getValues(c.getDataSource().getAllDataItems());var b=[];$.each(a,function(f,g){if(!g.fieldTypeName||g.fieldTypeName===d){b.push(g.id)}});return b},alignHorizontal:function(){var a=this;if(a.hasHorizontalAlign()){var b=a.getPropertyValue("horizontalAlign");a.$elementContentContainer.css("text-align",b);PositionManager.updatePosition(a.getDescendingInstances())}},hasHorizontalAlign:function(){var a=this.getPropertyValue("dataLayout");if(DataLayouts[a.name].category===DataArrangements.Grid||DataLayouts[a.name].category===DataArrangements.Rows||DataLayouts[a.name].category===DataArrangements.Columns){return true}return false},setPropertyDataInfoForSave:function(a){return a},getTemplateInstance:function(b){var a=this;var c=a.getInstanceController(b);if(!c){return undefined}return c.getInstance()},getInstanceController:function(b){var a=this;return a.dataItemsController.getInstanceController(b)},getMinSize:function(){var a=this;var b=a.dataLayoutController.getMinSize();return{height:b.height,width:b.width}},reorderChildElements:function(){if(this.hasOrder.getValue()){var c=$([]);var b=this.getChildInstances();for(var a=0;a<b.length;a++){if(!b[a].hasFeature(Features.DataListItem)&&b[a].isContent()){c.pushElements(b[a].$element)}}c.applyDOMOrder();var c=$([]);for(var a=0;a<b.length;a++){if(!b[a].hasFeature(Features.DataListItem)&&!b[a].isContent()&&b[a].isInstanceVisible()){c.pushElements(b[a].$element)}}c.applyDOMOrder()}},getTemplatesControllers:function(){var b=this;var a=b.dataItemsController.getInstanceControllers();if(!a){return[]}return $.getValues(a)},getItemsInstances:function(){var b=this;var a=b.getTemplatesControllers();var c=[];$.each(a,function(f,d){c.push(d.getInstance())});return c},getSkinTitle:function(){return this.elementType.itemTitle},getTemplatesArray:function(){var a=this;return a.dataItemsController.getAllControllers()},getControllersByIndex:function(c,b){var a=this;return a.dataItemsController.getControllersByIndex(c,b)},getControllersByHierarchy:function(){var a=this;return a.dataItemsController.getControllersHierarchy()},startReArranging:function(){this.data.inReArranging=true},finishReArranging:function(a){this.data.inReArranging=false;LayoutManager.requestUpdatePosition(this)},getManageItemsTitle:function(){var a=this;return"Manage "+a.getManageTitle()},refreshDataListProperties:function(g){var b=false;var p={fromProperties:true};var n=this;var i=true;var k=false;var f=false;var c=false;var h=n.isFillHorizontal()||n.isFillVertical()||n.isBlock();var o=n.isBlock()||n.isFillHorizontal()||n.isInMobileMode();if($.containsOneOfKeys(g,"fieldsTemplates","dataLayout")){b=true;if(h){i=false}else{if("dataLayout" in g){if(n.hasFeature(Features.HasFormData)){i=false}}}}if($.containsOneOfKeys(g,"dataLayoutOptions")){b=true;f=!("dataLayout" in g);var d=n.dataLayoutController.getArrangement();var m=d.category===DataArrangements.Vertical;var j=d.category===DataArrangements.Grid;var a=g.dataLayoutOptions.oldValue;var l=g.dataLayoutOptions.value;if((a.colsSpacing!==l.colsSpacing||a.lineSpacing!==l.lineSpacing)&&(o)){i=false}if((a.rowsSpacing!==l.rowsSpacing||a.columnSpacing!==l.columnSpacing)&&n.isFillVertical()){i=false}if(a.cols!==l.cols||a.rows!==l.rows){i=false}if(a.elementsPerPage!==l.elementsPerPage){k=true;if(o&&!m&&(!j||(a.elementsPerPage<l.cols&&l.elementsPerPage>=l.cols)||(a.elementsPerPage>=l.cols&&l.elementsPerPage<l.cols))){i=false}}if(a.maxItems!==l.maxItems||a.maxItemsCount!==l.maxItemsCount){k=true;if(h){i=false}}}if(b){n.reArrangeTheTemplates({keepItemSize:i,shouldFetch:k,shouldPush:f})}}},features:[Features.HasArrangement,Features.HasDataSource,Features.ItemsContainer,Features.HasPadding,Features.HasContent,Features.HasTemplates,Features.ExpressMode,Features.HasEmptyState],aggregatedMethods:{definitions:{setItem:function(a){}},aggregations:{onEmptyStateStart:function(){var a=this;$.each(a.childInstances,function(c,b){b.isDisplayed.setValue(false,"isEmptyState")});a.dataLayoutController.refreshEmptyState()},onEmptyStateFinished:function(){var a=this;$.each(a.childInstances,function(c,b){b.isDisplayed.setValue(true,"isEmptyState")});a.dataLayoutController.refreshEmptyState()},shouldReferToStateValue:function(a,d,b,c){if(a==="sizeAndPosition"&&ElementsManager.getInstanceByID(b).isContent()){return false}return c},isDroppable:function(){return false},accept:function(){return false},onDataSourceRefresh:function(){var a=this;a.reArrangeTheTemplates({shouldPush:true})},adjustInstanceToViewPort:function(){var a=this;var c=a.getTemplatesArray();var d=false;a.setPropertyValue("margin",0);if(a.isType(ElementsTypes.Menu)||a.isType(ElementsTypes.ButtonsGroup)){this.setPropertyValue("dataLayout",{name:DataLayouts.SquareGrid.name});this.setPropertyFieldsValues("dataLayoutOptions",{cols:3,colsSpacing:10,rowsSpacing:10})}if(a.isType(ElementsTypes.PagesMenu)){this.setPropertyValue("dataLayout",{name:DataLayouts.NavigationButton.name});if(!a.isNavigationButton()){ElementsLayoutHelper.setInstancesSize(a,{width:30,height:30});a.data.disableAdjustWidthToMobile=true}}if(a.hasFeature(Features.TemplatePagesList)&&!a.isType(ElementsTypes.iconsList)){this.setPropertyValue("dataLayout",{name:DataLayouts.PagesColumn.name});this.setPropertyFieldsValues("dataLayoutOptions",{cols:1,columnSpacing:10})}if(a.isType(ElementsTypes.FormElement)){a.setPropertyValue("dataLayout",DataLayouts.OneColumn);this.setPropertyFieldsValues("dataLayoutOptions",{rowsSpacing:10})}if((a.hasFeature(Features.TemplatePagesList)||a.isType(ElementsTypes.PagesMenu)||a.isType(ElementsTypes.Menu)||a.isType(ElementsTypes.ButtonsGroup))&&c.length>0){var b=$.objectGet(a.dataLayoutController.getLastArrangementOptionsDevice(),["pc","fixedSize"]);b=b?b:a.data.structureMetaData.dataItemSizePc;if(!b){b={}}if(b&&!b.height){b.height=50}if(b&&!b.width){b.width=50}MobileVersionViewManager.updateBatch.performInstanceOperation(function(){var f;LayoutManager.layoutUpdateBatch.performOperation(function(){if(a.hasFeature(Features.TemplatePagesList)){a.getDataSource().invalidateAllItems();a.showItem(0,false);var h=function(j,k){var i;if(a.isType(ElementsTypes.PostsList)||a.isType(ElementsTypes.DataListElement)){i=(b.height*b.width)/k.width}else{i=$.maxValue([(k.width/b.width)*b.height,30])}return{width:k.width,height:i}};a.reArrangementDisabled.setValue(false,"MobileVersion");a.reArrangeTheTemplates({keepItemSize:d,fixedSize:h})}else{function g(i){i.getDataSource().invalidateAllItems();i.reArrangementDisabled.setValue(false,"MobileVersion");h=function(j,k){return{width:k.width,height:$.maxValue([(b.height),30])}};i.reArrangeTheTemplates({keepItemSize:d,fixedSize:h})}if(a.elementType===ElementsTypes.Menu&&a.isConnectedToNavigatable()){LayoutManager.Events.LayoutBatchFinished.one(function(){g(a)})}else{LayoutManager.layoutUpdateBatch.performOperation(function(){g(a)})}}})},a,"DataList")}else{MobileVersionViewManager.updateBatch.performInstanceOperation(function(){a.getDataSource().invalidateAllItems();LayoutManager.layoutUpdateBatch.performOperation(function(){a.reArrangementDisabled.setValue(false,"MobileVersion");a.reArrangeTheTemplates({keepItemSize:d})})},a,"DataList")}},updateInstanceToViewPort:function(){var a=this;var c;if(a.isType(ElementsTypes.Menu)&&a.isConnectedToNavigatable()&&a.getNavigableInstance()){a.dataLayoutController.resetLayout();var d=a.getNavigableInstance();a.reArrangementDisabled.setValue(true,"MenuRearrangement");if(d.reArrangementDisabled.isTrue()){a.getNavigableInstance().reArrangingFinished.one(b)}else{b()}}if(!MobileVersionViewManager.updateBatch.hasOperation(a.id+"DataList")){MobileVersionViewManager.updateBatch.performOperation(function(){if(a.hasFeature(Features.TemplatePagesList)){a.showItem(0,false)}c=function(f,g){return{width:g.width,height:$.maxValue([g.height,20])}};if(!(a.isType(ElementsTypes.Menu)&&a.isConnectedToNavigatable()&&a.getNavigableInstance())){a.dataLayoutController.resetLayout();LayoutManager.layoutUpdateBatch.performInstanceOperation(function(){a.refreshTemplatesSize(true);a.dataLayoutController.resetLastArrangementOptions();a.getDataSource().invalidateAllItems();a.reArrangementDisabled.setValue(false,"MobileVersion");a.reArrangeTheTemplates()},a,"reArrangeTheTemplatesFunction")}})}function b(){LayoutManager.layoutUpdateBatch.performOperation(function(){a.refreshTemplatesSize(true);a.dataLayoutController.resetLastArrangementOptions();a.getDataSource().invalidateAllItems();a.reArrangementDisabled.setValue(false,"MenuRearrangement");a.reArrangementDisabled.setValue(false,"MobileVersion");a.reArrangeTheTemplates({keepItemSize:true})})}},removeInstanceFromViewPort:function(){var a=this;if(a.isType(ElementsTypes.Menu)&&a.isConnectedToNavigatable()&&a.getNavigableInstance()){a.reArrangementDisabled.setValue(true,"MenuRearrangement");a.getNavigableInstance().reArrangingFinished.one(function(){a.performWhenVisible(function(){a.getDataSource().invalidateAllItems();LayoutManager.layoutUpdateBatch.performInstanceOperation(function(){a.refreshTemplatesSize(true);a.reArrangementDisabled.setValue(false,"MenuRearrangement");a.reArrangementDisabled.setValue(false,"MobileVersion");a.reArrangeTheTemplates({keepItemSize:true,shouldPush:ViewManager.isViewMode()})},a,"removeInstanceFromViewPortDataList")})})}else{a.reArrangementDisabled.setValue(true,"IsNotVisibleMobileVersion")}MobileVersionViewManager.updateBatch.performOperationWhenBatchStart(function(){PropertiesManager.UpdateBatch.performOperation(function(){a.performWhenVisible(b)})},a.id+"DataList Removing");function b(){OperationsManager.disableBatch();if(a.hasFeature(Features.DataList)){if(a.hasFeature(Features.TemplatePagesList)){a.showItem(0,false)}a.dataLayoutController.resetLayout();a.dataLayoutController.resetLastArrangementOptions();if(!(a.isType(ElementsTypes.Menu)&&a.isConnectedToNavigatable()&&a.getNavigableInstance())){a.getDataSource().invalidateAllItems();LayoutManager.layoutUpdateBatch.performInstanceOperation(function(){a.refreshTemplatesSize(true);a.reArrangementDisabled.setValue(false,"MobileVersion");a.reArrangementDisabled.setValue(false,"IsNotVisibleMobileVersion");a.reArrangeTheTemplates({keepItemSize:true,shouldPush:ViewManager.isViewMode()})},a,"removeInstanceFromViewPortDataList")}}OperationsManager.endDisableBatch()}},canContainerRows:function(a){return false},onPropertiesChanged:function(b){var a=this;if(!a.isInitialized){return}if(!$.containsOneOfKeys(b,"dataInfo")){a.refreshDataListProperties(b)}}}},initialize:function(){var a=this;a.hasHorizontalAlignFlag.setTrue();a.contentSizeChangedEvent.bind(function(){var c=a.getContentSize();var b=a.dataLayoutController.getLastArrangementInstanceSize();if(!$.sizesEqual({width:0,height:0},c)&&(!$.sizesEqual(b,c))){a.reArrangeTheTemplates({keepItemSize:false,shouldFetch:false})}});a.initializeForDesigner()},onInstanceInitialized:function(){}}})})();(function(){ElementsModel.registerDefinition(Features,{Scrollable:{properties:{isScrollable:{title:"Is Scrollable",defaultValue:$.returnFalse},scrollingBehaviour:{title:"Scrolling Behaviour",defaultValue:function(){return Global.ScrollingBehaviour.ScrollOffset},onChange:function(c,d){b(this)}},useDefaultScrollbar:{title:"Use Default Scrollbar",defaultValue:$.returnFalse,onChange:function(c,d){if(d){this.getElementContent().addClass("scrollable-with-scrollbar");this.data.mouseScrolling.enable();this.getElementContent().addClass("scrollable-enabled")}else{this.getElementContent().removeClass("scrollable-with-scrollbar");this.data.mouseScrolling.disable();this.getElementContent().removeClass("scrollable-enabled")}}}},methods:{getScrollable:function(){return undefined},getScrollableElement:function(){return this.$elementContent},scrollsChildren:function(){return false},updateScrollingOrientation:function(){this.getScrollable().scrollable({orientation:this.getScrollingOrientation()})},getScrollingOrientation:function(){return Global.Orientation.Vertical},refreshScrollable:function(){this.data.scrollable.refresh()},scrollNext:function(){},scrollPrev:function(){},scrollTo:function(c){},getMinValue:function(){return 0},getMaxValue:function(){return 0},getUpdateTriggers:function(){return[]}},initialize:a}});function a(){var c=this;c.data.scrollable=c.getScrollableElement().scrollable({useMouseScrolling:false});c.data.mouseScrolling=this.getScrollable().setMouseWheelScrolling(this.data.scrollable);c.contentSizeChangedEvent.bind(function(){c.refreshScrollable()});if(c.scrollsChildren()){c.data.scrollable.$element.bind("scroll",function(){LayoutManager.requestUpdatePosition(c.getChildInstances(),{updateSize:false})})}b(c)}function b(c){switch(c.getPropertyValue("scrollingBehaviour")){case Global.ScrollingBehaviour.ScrollOffset:c.getScrollable().scrollable({scrollItems:false});break;case Global.ScrollingBehaviour.ScrollItems:c.getScrollable().scrollable({scrollItems:true});break}c.refreshScrollable()}})();(function(){ElementsModel.registerDefinition(Features,{Rotatable:{properties:{rotationAngle:{title:"Rotation Angle",isStateProperty:true,isStyleProperty:true,supportsStatesTransitionAnimation:true,defaultValue:function(){return 0},category:PropertiesCategories.Rotation,onChange:function(a,b,c){if(this.data.enableRotation){this.setRotation(b,c)}}}},methods:{canRotate:function(){return !Global.IsExplorerMode&&(!this.canMove||this.canMove.isTrue())},setRotation:function(c,h){var a=this;if(a.canRotate()){var g=a.getMainBox();var f=c;if(h){if(h.transitionDirection==="left"){f=-(360-c)}}var d=f===0?"":"rotate({0}deg)".format(f);var b={};b[$.support.transformCSS]=d;a.animatePart(g,{transform:d},b,h,{complete:function(){if(a.getPropertyNormalValue("rotationAngle")===c){var i=!c?"":"rotate({0}deg)".format(c);g.css({transform:i})}}})}},toggleEnableRotation:function(a){if(this.data.enableRotation!==a){this.data.enableRotation=a;if(a){this.setRotation(this.getPropertyValue("rotationAngle"))}else{this.setRotation(0)}}}},initialize:function(){var a=this;a.data.enableRotation=true}}})})();(function(){ElementsModel.registerDefinition(Features,{HasContentOverlay:{methods:{refreshOverlay:function(){this.$elementContentContainer.append(this.data.contentOverlay)}},aggregatedMethods:{aggregations:{switchToPreview:function(){if(Global.IsDesigner){this.data.contentOverlay.toggleDisplayed(false)}},switchToDesign:function(){this.data.contentOverlay.toggleDisplayed(true)}}},onInstanceInitialized:function(){if(Global.IsDesigner){this.data.contentOverlay=$("<div class='absolute-fill fully-transparent'></div>").addDisplayingStates();this.$elementContentContainer.append(this.data.contentOverlay)}}}})})();(function(){ElementsModel.registerDefinition(Features,{FormInput:{properties:{},methods:{clear:$.noop,getValue:$.noop,canDuplicate:function(){return false}}}})})();(function(){ElementsModel.registerDefinition(Features,{Focusable:{methods:{},triggers:[Triggers.GotFocus,Triggers.LostFocus],supportedStates:[ElementStates.ElementFocusedState],onInstanceInitialized:a}});function a(){var b=this;var c=b.$element;c.focusin(function(d){b.activateTrigger(Triggers.GotFocus,d)});c.focusout(function(d){$.beginInvoke(function(){if(!$(document.activeElement).hasAncestor(c)){b.activateTrigger(Triggers.LostFocus,d)}})})}})();(function(){ElementsModel.registerDefinition(Features,{HasFaceBookButtonLayout:{properties:{facebookButtonLayout:{isStateProperty:true,title:"Button Layout",defaultValue:function(){return"standard"},category:PropertiesCategories.FaceBook}},aggregatedMethods:{aggregations:{computeSupportedFacebookProperties:function(a){return $.merge(a,["facebookButtonLayout"])},updatePlugin:function(a){a.attr("layout",this.getPropertyValue("facebookButtonLayout"))}}}}})})();(function(){ElementsModel.registerPropertiesCategories({FaceBook:{title:"FaceBook",iconClass:"sprite-icon sprite-property-category-misc"}});ElementsModel.registerDefinition(Features,{HasFaceBookFaces:{properties:{facebookFaces:{isStateProperty:true,defaultValue:$.returnTrue}},aggregatedMethods:{aggregations:{computeSupportedFacebookProperties:function(a){return $.merge(a,["facebookFaces"])},updatePlugin:function(a){a.attr("show_faces",this.getPropertyValue("facebookFaces"))}}}}})})();(function(){ElementsModel.registerDefinition(Features,{HasFaceBookFont:{properties:{facebookFont:{isStateProperty:true,defaultValue:function(){return"arial"}}},aggregatedMethods:{aggregations:{computeSupportedFacebookProperties:function(a){return $.merge(a,["facebookFont"])},updatePlugin:function(a){a.attr("font",this.getPropertyValue("facebookFont"))}}}}})})();(function(){ElementsModel.registerDefinition(Features,{HasFaceBookHeader:{properties:{facebookHeader:{isStateProperty:true,defaultValue:$.returnTrue}},aggregatedMethods:{aggregations:{computeSupportedFacebookProperties:function(a){return $.merge(a,["facebookHeader"])},updatePlugin:function(a){a.attr("header",this.getPropertyValue("facebookHeader"))}}}}})})();(function(){ElementsModel.registerDefinition(Features,{HasFaceBookPageNumRows:{properties:{facebookNumRows:{isStateProperty:true,defaultValue:function(){return"5"}}},aggregatedMethods:{aggregations:{computeSupportedFacebookProperties:function(a){return $.merge(a,["facebookNumRows"])},updatePlugin:function(a){a.attr("max_rows",this.getPropertyValue("facebookNumRows"))}}}}})})();(function(){ElementsModel.registerDefinition(Features,{HasFaceBookPageUrl:{properties:{facebookPageUrl:{defaultValue:function(){return"http://www.facebook.com/zuck"}}},aggregatedMethods:{aggregations:{computeSupportedFacebookProperties:function(a){return $.merge(a,["facebookPageUrl"])},updatePlugin:function(a){a.attr("href",this.getPropertyValue("facebookPageUrl"))}}}}})})();(function(){ElementsModel.registerDefinition(Features,{HasFaceBookRecommendations:{properties:{facebookPageRecommendations:{isStateProperty:true,defaultValue:$.returnTrue}},aggregatedMethods:{aggregations:{computeSupportedFacebookProperties:function(a){return $.merge(a,["facebookPageRecommendations"])},updatePlugin:function(a){a.attr("recommendations",this.getPropertyValue("facebookPageRecommendations"))}}}}})})();(function(){ElementsModel.registerDefinition(Features,{HasFaceBookSize:{properties:{facebookSize:{isStateProperty:true,defaultValue:function(){return"small"}}},aggregatedMethods:{aggregations:{computeSupportedFacebookProperties:function(a){return $.merge(a,["facebookSize"])},updatePlugin:function(a){a.attr("size",this.getPropertyValue("facebookSize"))}}}}})})();(function(){ElementsModel.registerDefinition(Features,{HasFaceBookStream:{properties:{facebookStream:{isStateProperty:true,defaultValue:$.returnTrue}},aggregatedMethods:{aggregations:{computeSupportedFacebookProperties:function(a){return $.merge(a,["facebookStream"])},updatePlugin:function(a){a.attr("stream",this.getPropertyValue("facebookStream"))}}}}})})();(function(){ElementsModel.registerDefinition(Features,{Growable:{onInstanceInitialized:function(){var b=this;b.getContentLayer().addClass("overflow-hidden");InstancePoolingManager.stopPooling("initialize");b.data.growableAttached=InstancePoolingManager.attach(b,c,a);InstancePoolingManager.postponeSamples(b,"inDesign");InstancePoolingManager.startPooling("initialize");function c(){return b.calculateSizeContent()}function a(f){if(f){b.whenInstanceContentHeightChanged(f.height,{lastElementSizeIsTheMinSize:MobileVersionViewManager.Flags.IsInMobileContext.isTrue()})}}var d=SimpleEvent.createEventListener([b.visibilityChangedEvent],function(){var f=!PositionManager.isElementVisible(b);if(f){InstancePoolingManager.postponeSamples(b,"isMobileActivateListener")}else{InstancePoolingManager.unPostponeSamples(b,"isMobileActivateListener")}});d.activateAndExecute();b.instanceRemoved.bind(function(){d.deactivate()})},aggregatedMethods:{aggregations:{onRemove:function(){InstancePoolingManager.detach(this.data.growableAttached)},switchToDesign:function(){var a=this;InstancePoolingManager.postponeSamples(a,"inDesign");LayoutManager.refreshElementsLayout(a)},switchToPreview:function(){var a=this;InstancePoolingManager.unPostponeSamples(a,"inDesign")}}}}})})();(function(){ElementsModel.registerDefinition(Features,{Shape:{methods:{getCanvas:function(){return this.data.canvas},getShape:function(){return this.data.shape},createContent:function(){var c=this;var d=c.data.canvas=Canvas.create();c.data.shape=c.createShape(d).toggleLayout(CanvasLayouts.FillHorizontally,true).toggleLayout(CanvasLayouts.FillVertically,true);return d.$element.addClass("absolute-fill")},handleBackgroundUpdate:function(c,d,f){d=ThemeColorsManager.evaluateColorBinding(d);if(this.getShape()){this.animatePart(this.$element,{shapeBackground:d},undefined,f);return true}return false},createShape:function(c){}},aggregatedMethods:{aggregations:{onPropertyChange:function(f,d,c,g){switch(f.name){case"lineWidth":b(this,d);break;case"lineColor":a(this,d);break}}}},onInstanceInitialized:function(){var c=this;var d=c.getCanvas();if(d){c.contentSizeChangedEvent.bind(function(){LayoutManager.layoutUpdateBatch.performOperation(function(){c.getCanvas().refreshSize(PositionManager.getContentSize(c))})})}}}});function b(d,c){var f=d.getShape();if(f){f.setPropertyValue("lineWidth",c)}}function a(c,f){f=$.Color(ThemeColorsManager.evaluateColorBinding(f)).toHEX();var d=c.getShape();if(d){d.setPropertyValue("strokeColor",f)}}$.cssHooks.shapeBackground={get:function(g,f,d){var c=$instance(g);return c&&c.data.currentShapeBackground},set:function(f,g){var c=$instance(f);if(c){var d=c.getShape();if(d!==undefined){c.data.currentShapeBackground=$.Color(g);d.setPropertyValue("backgroundColor",g)}}}};$.fx.step.shapeBackground=function(c){if(!c.colorInit){c.start=$.cssHooks.shapeBackground.get(c.elem);c.end=$.Color(c.end).toRGB();c.colorInit=true}$.cssHooks.shapeBackground.set(c.elem,"rgba("+Math.max(Math.min(parseInt((c.pos*(c.end[0]-c.start[0]))+c.start[0],10),255),0)+","+Math.max(Math.min(parseInt((c.pos*(c.end[1]-c.start[1]))+c.start[1],10),255),0)+","+Math.max(Math.min(parseInt((c.pos*(c.end[2]-c.start[2]))+c.start[2],10),255),0)+","+Math.max(Math.min(parseFloat((c.pos*(c.end[3]-c.start[3]))+c.start[3],10),1),0)+")")}})();(function(){ElementsModel.registerDefinition(Features,{TemplatePagesList:{category:ElementsTypesCategories.General,icon:"/images/icons/elements/container.png",iconClass:"sprite-icon sprite-element-template",description:"No Description",defaultProperties:{dataLayoutOptions:function(){return{lineSpacing:15,cols:3,columnSpacing:15,colsSpacing:15,rowsSpacing:15,elementsPerPage:4,rotation:0,R:100}}},properties:{},features:[Features.Navigatable],methods:{hasContentHorizontalAlign:function(){return false},setPropertyDataInfoForSave:function(d,b){if(!d||d===null){return d}var c={};if(d&&d.currentData){var a=b.itemFields;$.each(d.currentData,function(h,g){var f={};$.each(g,function(j,k){if(a[j]&&DataSourceItemsFields[a[j].type].isText()){try{f[j]=decodeURIComponent(k)}catch(i){f[j]=k}}else{f[j]=k}});c[f.id]=f})}return{currentData:c}},navigateTo:function(b,f,a,d){var c=this.getPropertyValue("dataLayout");return DataLayouts[c.name].navigateTo(this.dataLayoutController,b,f,a,d)},getCurrentItem:function(){var a=this.getPropertyValue("dataLayout");return DataLayouts[a.name].getCurrentItem(this.dataLayoutController)},getElementDataContent:function(){var b=this.getPropertyValue("dataLayout");var a=this.getCurrentItem();if(a){return a.getElementContent()}},navigate:function(c,g,b,f){var d=this.getNavigatableInstances();b=b?b:$.noop;if(d.length>1){var a=(this.getCurrentItem().getChildIndex()+c)%d.length;if(a<0){a+=d.length}this.showItem(a,g,b,f)}else{b()}},showItem:function(c,f,a,d){var b=this.getPropertyValue("dataLayout");return DataLayouts[b.name].showItem(this.dataLayoutController,c,f,a,d)},changeCurrentItem:function(c,f,b,d){var a=this;a.performWhenVisible(function(){a.reArrangementDisabled.setValue(true,"changeCurrentItem");a.showItem(c,f,b,d);a.reArrangementDisabled.setValue(false,"changeCurrentItem")},a.id+"changeCurrentItem")},getNavigatableInstances:function(){var a=this.getPropertyValue("dataLayout");return DataLayouts[a.name].getNavigatableInstances(this.dataLayoutController)}},aggregatedMethods:{aggregations:{onPropertiesChanged:function(b){var a=this;if(a.propertiesInitialized&&a.data.pagesInstance){LayoutManager.beginLayoutUpdateBatch();PropertiesManager.UpdateBatch.start();var g=$.intersectSets(b,Features.Navigatable.properties);for(var d in g){var c=g[d].name;var f=b[c];if(f){a.data.pagesInstance.setPropertyValue(c,f.value)}}PropertiesManager.UpdateBatch.finish();LayoutManager.endLayoutUpdateBatch()}}}},initialize:function(b){var a=this;SimpleEvent.bind([a.resizingStarted],function(){a.getItemsCollection().postponeUpdates()});SimpleEvent.bind([a.resizingStopped],function(){a.getItemsCollection().unPostponeUpdates()})}}})})();(function(){ElementsModel.registerDefinition(Features,{HasChildrenLayoutAnchor:{properties:{childrenAnchor:{isStyleProperty:false,isNotForCustomProperty:true,defaultValue:function(){return HorizontalAlignment.Left},onChange:function(a,b){LayoutManager.refreshElementsLayout(this.getChildInstances())}}},aggregatedMethods:{aggregations:{onPropertiesChanged:function(b){var a=this;if(!a.isInitialized){return}}}}}})})();(function(){ElementsModel.registerDefinition(Features,{TemplateItem:{className:"template-item",getExtensions:function(a){return{IsInEditingContext:ObservableFlag.create(false)}},features:[Features.ExpressMode],methods:{getFieldsMap:function(){return this.getPropertyValue("fieldsMap")},selectBeforeChildren:function(){return true},getInstancesByField:function(c){var a=[];var b=this.getPropertyValue("fieldsMap");$.each(b,function(h,g){var f=ElementsManager.getInstanceByID(h);var d=false;$.each(g,function(i,j){if(j.name===c){a.push(f)}})});return a},getInstanceFields:function(){var a={};var b=this.getPropertyValue("fieldsMap");$.each(b,function(f,d){var c=false;$.each(d,function(g,h){a[h.name]=h})});return a},submitChildToField:function(f,d){var a=this;var b={name:d.name,type:d.type,title:d.title};var c=$.objectSetAndClone(a.getPropertyValue("fieldsMap"),[f,d.getContentType()],b);a.setPropertyValue("fieldsMap",c)},removeChildFromField:function(d,c){var a=this;if(c){var b=$.objectGetAndClone(a.getPropertyValue("fieldsMap"),[d,c.getContentType()]);if(b){delete b[d][c.getContentType()];a.setPropertyValue("fieldsMap",b)}}},applyTemplateOnEndEditing:function(l){l=$.extend({applyToAll:false,title:"New Template",applySize:undefined,detached:false},l);var c=l.applyToAll;var h=this;var f=h.getItemMainParent();var g=h.getFieldName();f.data.disableItemsDataUpdate=true;var j=$.extend({},h.getPropertyValue("sizeAndPosition"));var b=ElementsManager.getHierarchyInfo(h,{forSaving:true,propertiesFilter:TemplatesManager.templateSavingPropertyFilter,allowContent:true,adjustSize:true,adjustPosition:true,idsInHierarchy:true,connectionFilter:function(m){if(m.options.isTemplateConenction){return true}return false}});var i=b.idsInHierarchy;$.each(b.customStatesProperties,function(n,m){if(!i[n]){delete b.customStatesProperties[n]}});var d=b.structures[0].elementProperties.behaviours;var k={};if(d){k.normalBehaviours={};k.isTemplateBehaviour=$.extend({},d.isTemplateBehaviour);b.structures[0].elementProperties.behaviours=k}h.setTemplateStructure(b,true);var a=b.structures[0].elementProperties.sizeAndPosition;f.reArrangementDisabled.setValue(true,"TemplateEditingManager");f.replaceTemplate(b,{fieldName:g});f.reArrangementDisabled.setValue(false,"TemplateEditingManager");f.reArrangeTheTemplates({fixedSize:!f.isFillHorizontal()&&!f.isFillVertical()&&!f.isBlock()?a:undefined});f.data.disableItemsDataUpdate=false}},aggregatedMethods:{aggregations:{accept:function(a,b){if(a.hasFeature(Features.HasTemplates)||TemplateEditingManager.getCurrentInstance()!==this){return false}return b&&true},isDroppable:function(a){return a&&TemplateEditingManager.getCurrentInstance()===this}}},onInstanceInitialized:function(){var c=this;function b(f,d){d.containerChanging.unbind(d.data.containerChangedEvent);if(f.hasFeature(Features.DataListItem)){d.setIsContent(false)}d.data.containerChangedEvent=undefined;d.setTemplateItemContent();if(d.data.inputFormChildElementAdded){d.childElementAdded.unbind(d.data.inputFormChildElementAdded)}d.data.inputFormChildElementAdded=undefined;$.each(d.childInstances,function(h,g){b(c,g)})}function a(f,d){if(d.isTemplateItemContent()){return}if(f.hasFeature(Features.DataListItem)){d.setIsContent(true)}d.setTemplateItemContent(f);if(d.hasFeature(Features.ItemsContainer)){d.data.inputFormChildElementAdded=d.childElementAdded.bind(function(g){$.each(g.getDescendingInstances(),function(j,h){a(f,h)})})}d.data.containerChangedEvent=d.containerChanging.bind(function(){if(!d.isDescendantOf(f)){b(f,d)}})}$.each(this.getDescendingInstances(true),function(f,d){a(c,d);if(ViewManager.isDesignMode()){if(!TemplateEditingManager.Flags.IsInEditingMode.getValue()){if(d.getPropertyValue("isVisible")===false&&!d.hasFeature(Features.TemplateItem)){d.isDisplayed.setValue(false,"editTemplate")}}}})},creationFunction:function(a){},properties:{fieldsMap:{title:"fieldsMap",defaultValue:$.returnEmptyObject,category:PropertiesCategories.Other}}}})})();(function(){ElementsModel.registerDefinition(Features,{DataListItem:{className:"data-list-item",aggregatedMethods:{aggregations:{canDelete:function(a){return a&&this.isDataListItem()&&(TemplateEditingManager.Flags.IsInEditingTemplate.isFalse()||TemplateEditingManager.isTemplateDetahced())},getAutoLayoutProperties:function(a){return $.extend(a,{top:true,left:true})}}},methods:{toggleMobileSupport:function(a){OperationsManager.beginAtomicBatch();this.getItemMainParent().toggleMobileSupport(a);OperationsManager.endAtomicBatch()},isVisibleInMode:function(){return true},hasEditingBehaviour:function(){return true},canDuplicate:function(){return this.isDataListItem()&&(TemplateEditingManager.Flags.IsInEditingTemplate.isFalse())&&MobileVersionViewManager.Flags.IsInMobileContext.isFalse()},isDataListItem:function(){return this.data.dataItemID!==undefined},getDataItemId:function(){return this.data.dataItemID},getDataItem:function(){return this.getItemMainParent().getDataSource().fetchDataItem(this.getDataItemId())},isSupportsMobile:function(){return this.getItemMainParent().isSupportsMobile()},isMobileOnlyStyle:function(){return this.getItemMainParent().isMobileOnlyStyle()},getFieldName:function(){var a=this.getDataItem();return a.fieldTypeName?a.fieldTypeName:this.getItemMainParent().elementType.itemName},setDataItemId:function(a){this.data.dataItemID=a},getItemMainParent:function(){return this.data.dataListParent},getSkinTitle:function(){return this.getItemMainParent().getSkinTitle()},updateSkinBindingFromEditingTemplate:function(c,a,b){return this.getItemMainParent().updateSkinBindingFromEditingTemplate(c,a,b)},getManageItemsTitle:function(){var a=this;return a.getItemMainParent().getManageItemsTitle()},changeElementSize:function(a){this.$elementSizeBox.css(a)},setTemplateStructure:function(c,d,b){OperationsManager.disableBatch();this.data.instanceController.setTemplateStructure(c,d,b);var a=this.data.instanceController.getInstance();OperationsManager.endDisableBatch();return a},getInstanceController:function(){return this.data.instanceController},getItemTemplateStructure:function(){var b=this.getItemMainParent();var c=this.getFieldName();var a=b.getDefaultTemplate(c);return a},applyTemplateOnEndEditing:function(k){k=$.extend({applyToAll:false,title:"New Template",applySize:undefined,detached:false},k);var c=k.applyToAll;var h=this;var f=h.getItemMainParent();var g=h.getFieldName();f.data.disableItemsDataUpdate=true;var i=$.extend({},h.getPropertyValue("sizeAndPosition"));var b=ElementsManager.getHierarchyInfo(h,{forSaving:true,propertiesFilter:TemplatesManager.templateSavingPropertyFilter,allowContent:true,adjustSize:true,adjustPosition:true,connectionFilter:function(l){if(l.options.isTemplateConenction){return true}return false}});var d=b.structures[0].elementProperties.behaviours;var j={};if(d){j.normalBehaviours={};j.isTemplateBehaviour=$.extend({},d.isTemplateBehaviour);b.structures[0].elementProperties.behaviours=j}h.setTemplateStructure(b,true);var a=b.structures[0].elementProperties.sizeAndPosition;f.reArrangementDisabled.setValue(true,"TemplateEditingManager");f.replaceTemplate(b,{fieldName:g});f.reArrangementDisabled.setValue(false,"TemplateEditingManager");f.reArrangeTheTemplates({fixedSize:a});f.data.disableItemsDataUpdate=false}},onInstanceInitialized:function(){var a=this;a.sizeElementClassesManager.set({"data-list-item":true});if(a.isInDesignMode()){this.canMove.setValue(false)}}}})})();(function(){ElementsModel.registerDefinition(Features,{PageSection:{getExtensions:function(a){return{SectionIndex:ObservableObject.createNumerical(-1)}},defaultProperties:{fillLayout:function(){return{fillVertical:false,fillHorizontal:false}},sizeAndPosition:function(){return{height:200,width:0,top:0,left:0}},childrenAnchor:function(){return HorizontalAlignment.Centered}},methods:{creationFunction:function(){return $("<div></div>").addClass("absolute-fill")},isRelativePositioned:$.returnTrue,selectBeforeChildren:$.returnFalse,isArrangeable:function(){return false},hasHeight:function(){return MobileVersionViewManager.Flags.IsInMobileContext.isTrue()&&$.getKeys(this.getRowsFromContainer()).length>0?false:true},isFirstSection:function(){return this.parentInstance.firstSectionInstance.getValue()===this},isLastSection:function(){return this.parentInstance.lastSectionInstance.getValue()===this}},aggregatedMethods:{aggregations:{updateInstanceToViewPort:function(){var a=this;a.canResize.setValue(false,"mobile")},removeInstanceFromViewPort:function(){var a=this;a.canResize.setValue(true,"mobile")},onChildElementRemoved:function(b){var a=this;b.classesManager.set({"is-section-child":false,"positioned-fixed":false})},onChildElementAdded:function(b,c){var a=this;b.classesManager.set({"is-section-child":true,"positioned-fixed":b.isFixed()&&ViewManager.isViewMode()})},canRedropTo:function(){return false},onDetached:function(){var a=PageManager.getCurrentPage();PropertiesManager.invalidateProperty(a,"sizeAndPosition",undefined,a.getPropertyValue("sizeAndPosition"))},getAutoLayoutProperties:function(){return{left:true,top:true,width:true,height:!this.hasHeight()}}}},initialize:function(){var a=this;a.sizeChangedEvent.bind(function(){Global.PageHeightChanged.fire()});a.$element.addClass("section-element");a.getElementSizeBox().addClass("section-element-size-box");a.canMove.setValue(false);if(a.isInDesignMode()){var b=a.getResizingGrip();a.elementIsSelected.valueChangedEvent.bindAndExecute(function(c){if(c){b.addClass("marked")}else{b.removeClass("marked")}})}}}})})();(function(){ElementsModel.registerDefinition(Features,{DesignElement:{getExtensions:function(k){return{sizeChangedPositionUpdateController:SimpleEvent.createEventListener([{event:PropertiesManager.Events.NamedPropertyValueChanged,name:"sizeAndPosition"}],function(){ModeManager.updateBatch.performOperation(function(){if(MobileVersionViewManager.Flags.IsInMobileContext.isFalse()&&ViewManager.isDesignMode()&&!k.isDeleted){PositionManager.updatePosition(k.parentInstance)}},k.parentInstance.id)}),isRelativePositionedFlag:ObservableFlag.create(false,{valueChangeCallback:function(l){k.classesManager.set({"relative-element":l});if(Global.IsDesigner){if(l){k.sizeChangedPositionUpdateController.activate()}else{k.sizeChangedPositionUpdateController.deactivate()}}}}),containerChanged:SimpleEvent.create(),containerChanging:SimpleEvent.create(),duringResizing:ObservableFlag.create(false),isInScalingMode:ObservableFlag.createConditionalNegative(),isInScalingProcess:ObservableFlag.createConditionalNegative(),isInDragging:ObservableFlag.create(false),sizeElementClassesManager:ContextValue.createClassesFlags({getTarget:function(){return k.getElementSizeBox()}}),contentBoxElementClassesManager:ContextValue.createClassesFlags({getTarget:function(){return k.$elementContentBox}})}},features:[Features.SeoElement,Features.HasPropertiesBinding],properties:{isSupportsMobile:{defaultValue:$.returnFalse,isNotForCustomProperty:true,onChange:function(k,l){}},isVisibleInMode:{isStateProperty:true,defaultValue:$.returnTrue,shouldRefreshIfNotVisible:true,onChange:function(l,m){var k=this;if(!k.isContent()&&!k.isForTemplateUse()){if(m){k.showElement()}else{k.hideElement()}if(MobileVersionViewManager.Flags.IsActivated.isTrue()&&PropertiesManager.inStateEditingMode()){LayoutManager.layoutUpdateBatch.performOperation(function(){if(m){MobileVersionViewManager.addInstanceToMobile(k)}else{if(k.hasCellWrapper.isTrue()){var n=k.getCellItem();var o=n.getRowParent();if(o){o.removeCells([n])}}RowsManager.removeInstancesFromContainer(k,{shouldRemoveFromViewPort:true});LayoutManager.refreshElementsLayout(k.parentInstance)}})}}}},growData:{defaultValue:$.returnUndefined},isFixed:{title:"Is Fixed",defaultValue:$.returnFalse,isStateProperty:true,onChange:function(l,m){var k=this}},topZIndex:{title:"Element Z-Index",isStyleProperty:true,isStateProperty:true,supportsStatesTransitionAnimation:true,getResetValue:$.returnZero,defaultValue:$.returnZero},elementOpacity:{title:"Element Opacity",isStyleProperty:true,isStateProperty:true,supportsStatesTransitionAnimation:true,valueConverter:[function(k){return $.adjustFraction(k,3)}],defaultValue:$.returnOne,getResetValue:$.returnOne,onChange:c},staticMargin:{defaultValue:function(){return{horizontalMargin:"",verticalMargin:""}},isStateProperty:true,isStyleProperty:false,disableInDesign:true,supportsStatesTransitionAnimation:true,valueConverter:[StructureLoadingManager.createRoundPropertyValueConverter(["horizontalMargin","verticalMargin"])],priority:999,scaleProperty:function(k){return{horizontalMargin:k.x,verticalMargin:k.x}},onChange:a,comparer:b,title:"Static Margin",category:PropertiesCategories.SizeAndPosition},sizeAndPosition:{defaultValue:function(){return{left:0,width:100,top:0,height:100}},isStateProperty:true,isStyleProperty:false,disableInDesign:true,supportsStatesTransitionAnimation:true,valueConverter:[StructureLoadingManager.createRoundPropertyValueConverter(["left","width","top","height"])],priority:999,scaleProperty:function(k){return{left:k.x,width:k.x,top:k.y,height:k.y}},customStateValueGetter:function(p,m,k,n,l){var o=ElementStates[n];if(o&&o.responsiveState){return m}if(!m){m={left:0,top:0,width:p.width,height:p.height}}return{left:m.left+p.left,top:m.top+p.top,width:m.width+p.width,height:m.height+p.height}},customStateValueSetter:function(o,l,k,m){var n=ElementStates[m];if(n&&n.responsiveState){return l}return{left:l.left-o.left,top:l.top-o.top,width:l.width-o.width,height:l.height-o.height}},onChange:i,comparer:j,title:"Size And Position",category:PropertiesCategories.SizeAndPosition},lastResizingSize:{defaultValue:function(){return{width:0,height:0}},isNotForCustomProperty:true,shouldJoinToUndo:true,isStateProperty:true,priority:999,scaleProperty:function(k){return{width:k.x,height:k.y}},comparer:f,category:PropertiesCategories.SizeAndPosition},glow:{title:"Glow",isStateProperty:true,isStyleProperty:true,supportsStatesTransitionAnimation:true,supportsThemeBinding:["color"],defaultValue:function(){return{spread:0,blur:0,color:"black"}},valueConverter:[StructureLoadingManager.createRoundPropertyValueConverter(["blur","spread"])],scaleProperty:function(k){return{blur:k.x,spread:k.x}},onChange:function(l,m,n,k){if(m){m=$.extend({},m,{color:ThemeColorsManager.evaluateColorBinding(m.color,true)});this.animatePart(this.$element,{glow:m},false,n)}},category:PropertiesCategories.Shadow},innerGlow:{title:"Inner Glow",isStateProperty:true,isStyleProperty:true,supportsStatesTransitionAnimation:true,supportsThemeBinding:["color"],valueConverter:[StructureLoadingManager.createRoundPropertyValueConverter(["blur","spread"])],scaleProperty:function(k){return{blur:k.x,spread:k.x}},defaultValue:function(){return{spread:0,blur:0,color:"black"}},onChange:function(l,m,n,k){if(m){m=$.extend({},m,{color:ThemeColorsManager.evaluateColorBinding(m.color,true)});this.animatePart(this.$element,{innerGlow:m},false,n)}},category:PropertiesCategories.Shadow},shadow:{title:"Shadow",isStateProperty:true,isStyleProperty:true,supportsThemeBinding:["color"],supportsStatesTransitionAnimation:true,valueConverter:[StructureLoadingManager.createRoundPropertyValueConverter(["blur","spread","top","left"])],scaleProperty:function(k){return{blur:k.x,spread:k.y,top:k.y,left:k.x}},defaultValue:function(){return{top:0,left:0,spread:0,blur:0,color:"black"}},category:PropertiesCategories.Shadow,onChange:function(l,m,n,k){if(m){m=$.extend({},m,{color:ThemeColorsManager.evaluateColorBinding(m.color,true)});this.animatePart(this.$element,{dropShadow:m},false,n)}}},innerShadow:{title:"Inner Shadow",isStateProperty:true,isStyleProperty:true,supportsStatesTransitionAnimation:true,supportsThemeBinding:["color"],valueConverter:[StructureLoadingManager.createRoundPropertyValueConverter(["blur","spread","top","left"])],scaleProperty:function(k){return{blur:k.x,spread:k.x,top:k.y,left:k.x}},defaultValue:function(){return{top:0,left:0,spread:0,blur:0,color:"black"}},category:PropertiesCategories.Shadow,onChange:function(l,m,n,k){if(m){m=$.extend({},m,{color:ThemeColorsManager.evaluateColorBinding(m.color,true)});this.animatePart(this.$element,{dropInnerShadow:m},false,n)}}}},methods:{getLastResizingSize:function(){return this.calcualateLastResizingSize()},calcualateLastResizingSize:function(){var k=this.getPropertyValue("lastResizingSize");return this.isFillVertical()?$.extend({},k,this.parentInstance.calcualateLastResizingSize()):k},setLastResizingSize:function(l){var k=this;var m={};if(l){k.setPropertyValue("lastResizingSize",l)}else{k.setPropertyValue("lastResizingSize",k.getPropertyValue("sizeAndPosition"));LayoutManager.layoutUpdateBatch.performOperation(function(){var n=k.getSize();k.setPropertyValue("lastResizingSize",n)})}},hasHeight:function(){return true},hasWidth:function(){return true},isRelativePositioned:function(){return this.isRelativePositionedFlag.isTrue()},toggleRelativePosition:function(k){this.isRelativePositionedFlag.setValue(k)},getRelativePosition:function(){var m=this.getPropertyValue("margin");var l=this.getPropertyValue("sizeAndPosition");var o;var n=l.top;var k;if(this.hasHorizontalLayout()){o=m.left}else{k=this.$element.position();o=k.left}if(this.hasVerticalLayout()){n=m.top}else{n=k?k.top:this.$element.position().top}return{top:n,left:o}},getMinSize:function(){return{height:5,width:5}},getMaxSize:function(){if(this.parentInstance&&MobileVersionViewManager.Flags.IsInMobileContext.isTrue()){return this.parentInstance.getMaxSize()}else{return{height:Infinity,width:Infinity}}},toggleVisibilityInMode:function(k){this.setPropertyValue("isVisibleInMode",k)},isVisibleInMode:function(){var k=this.parentInstance?this.parentInstance.isVisibleInMode():true;return this.getPropertyValue("isVisibleInMode")&&k},getContainmentArea:function(){if(!this.$container){return{left:null,top:null,width:null,height:null}}return $.getArea({left:0,top:0},this.$container.elementSize())},getPadding:function(){var k=this.getPropertyValue("padding");return{horizontal:k.left+k.right,vertical:k.top+k.bottom}},setContentSize:function(m){var l=this.getPropertiesValues();var k=$.extend({},l.sizeAndPosition);if(m.width!==undefined){k.width=m.width+l.borderWidth.left+l.borderWidth.right+l.padding.left+l.padding.right+l.margin.left+l.margin.right}if(m.height!==undefined){k.height=m.height+l.borderWidth.top+l.borderWidth.bottom+l.padding.top+l.padding.bottom+l.margin.top+l.margin.bottom}this.setPropertiesValues({sizeAndPosition:k})},getShadowTarget:function(){return this.getBorderBox()},clearMargin:function(m){var k=this;var n=k.getPropertyValue("margin");var o=n[m];if(o!==0){LayoutManager.beginLayoutUpdateBatch();var l=$.extend({},k.getPropertyValue("sizeAndPosition"));k.setPropertyFieldValue("margin",m,0);switch(m){case"left":l.width-=o;l.left+=o;break;case"right":l.width-=o;break;case"top":l.height-=o;l.top+=o;break;case"bottom":l.height-=o;break}k.setPropertyValue("sizeAndPosition",l);LayoutManager.endLayoutUpdateBatch()}},refreshTracking:function(){g(this)},handleContentSizeChange:function(){var k=this;k.onContentSizeChange();k.contentSizeChangedEvent.fire();LayoutManager.requestUpdatePosition(k.getChildInstances())},isFixed:function(){return this.getPropertyValue("isFixed")&&this.parentInstance===PageManager.getCurrentPage()&&(!Global.IsMobileView&&MobileVersionViewManager.Flags.IsInMobileContext.isFalse())},isRootInstance:function(){return(this.elementType===ElementsTypes.page||this.hasFeature(Features.PageSection))},getStaticMargin:function(m){m=$.extend({vertically:true,horizontally:true},m);var k=this;var o={};var n=this.getPropertyValue("staticMargin");var l=k.getPropertyValue("cellHorizontalAlignment");if(l===CssHorizontalAlignment.None){l=PageManager.getCoordinator().getPropertyValue("cellsHorizontalAlignment")}var p=PageManager.getCoordinator().getPropertyValue("cellsVerticalAlignment");if(m.horizontally){switch(l){case CssHorizontalAlignment.Center:o.marginLeft=n.horizontalMargin;break;case CssHorizontalAlignment.Left:o.marginLeft=n.horizontalMargin;break;case CssHorizontalAlignment.Right:o.marginRight=n.horizontalMargin;break}}if(m.vertically){switch(p){case CssVerticalAlignment.Middle:o.marginTop=n.verticalMargin;break;case CssVerticalAlignment.Top:o.marginTop=n.verticalMargin;break;case CssVerticalAlignment.Bottom:o.marginBottom=n.verticalMargin;break}}return o},resetActualSizeAndPosition:function(){this.actualSizeAndPosition={}},getForeGroundPropertyName:function(){return},getForeGroundColor:function(l){var k=this;var l=l?l:k.parentInstance;var p=l.getPropertyValue("backgroundImage");var m=l.getPropertyValue("backgroundColor");var n=true;var o;if(!p){while(m==="transparent"&&n&&l.parentInstance){l=l.parentInstance;p=l.getPropertyValue("backgroundImage");if(p){n=false}else{m=l.getPropertyValue("backgroundColor")}}if(n&&ThemeColorsManager.isColorBinding(m)){o=k.getOppositeColor(m)}}return o},getOppositeColor:function(l){if(ThemeColorsManager.isColorBinding(l)){var m=0;var k=0;if(l.mainColor<2){m=l.mainColor+2}else{if(l.mainColor<4){m=l.mainColor-2}}k=ThemeColorsManager.getMainColorVariationIndex(m);if(l.variation===k){if(k===4){k=3}else{k++}}return $.extendMissing({mainColor:m,variation:k},l)}return undefined},isSupportsMobile:function(){return this.getPropertyValue("isSupportsMobile")},toggleMobileSupport:function(k){OperationsManager.beginAtomicBatch();this.changeMobileSupportState(k);this.setPropertyValue("isSupportsMobile",k);OperationsManager.endAtomicBatch()}},aggregatedMethods:{definitions:{changeMobileSupportState:function(m){var k=this;var n=PropertiesManager.getEditableStyleProperties();var l={type:ElementStates[MobileVersionViewManager.MobileStateName],source:PageManager.getCoordinator().id};if(m){$.each(n,function(p,o){PropertiesManager.setValueInCustomState(k,k.properties[o],l,k.getPropertyValue(o))});if(k.hasFeature(Features.HasBackgroundImage)){PropertiesManager.setValueInCustomState(k,k.properties.imageUrl,l,k.getPropertyValue("imageUrl"))}}else{$.each(n,function(p,o){PropertiesManager.resetCustomStateProperty(k,l,o)});if(k.hasFeature(Features.HasBackgroundImage)){PropertiesManager.resetCustomStateProperty(k,l,"imageUrl")}}},isConvertedToMobile:function(){return !this.isContent()},shouldBeHiddenInMode:function(){return false},isUpdatedToViewPort:function(){return this.data.isUpdatedToViewPort},getAutoLayoutProperties:function(){if(this.hasFeature(Features.HasLayout)){if((this.isDataListItem()||(ViewManager.isDesignMode()&&TemplateEditingManager.getCurrentInstance()===this&&TemplateEditingManager.Flags.IsInEditingMode.getValue()))&&this.hasFeature(Features.TemplateItem)){return{left:true,top:true}}var l=this.getPropertyValue("fillLayout");var m=this.getPropertyValue("verticalLayout");var k=this.getPropertyValue("horizontalLayout");return{left:l.fillHorizontal||k!==LayoutManager.Layout.normal,top:l.fillVertical||m!==LayoutManager.Layout.normal,width:l.fillHorizontal,height:l.fillVertical}}else{return{}}},onContentSizeChange:function(){},onElementAddedToContainer:function(){}},aggregations:{onPropertiesChanged:function(k){},adjustInstanceToViewPort:function(){var k=this;k.setPropertyValue("isFixed",false)},updateInstanceToViewPort:function(){var k=this;this.data.isUpdatedToViewPort=true;this.canResizeVertically.setValue(this.hasHeight(),"hasHeight");this.childIndex.setValue(-1)},removeInstanceFromViewPort:function(){var k=this;this.canResizeVertically.setValue(true,"hasHeight");this.childIndex.setValue(-1);this.data.isUpdatedToViewPort=false},switchToPreview:function(){var k=this;if(MobileVersionViewManager.Flags.IsInMobileContext.isTrue()){PageManager.PageChangingOperation.performOperation(function(){k.activateState(ElementStates.MobileState,true,false)})}if(this.isFixed()){this.$element.addClass("positioned-fixed");$(window).bind("scroll."+k.id+"isFixed",function(){LayoutManager.requestUpdatePosition(k)});Global.PageHeightChanged.bindAndExecute(function(){LayoutManager.refreshElementsLayout(k)},"isFixedPageHeightChanged"+k.id);k.customZIndex.setValue(Global.MinPropertyZindex)}},switchToDesign:function(){var k=this;if(this.isFixed()){Global.PageHeightChanged.unbind("isFixedPageHeightChanged"+k.id);LayoutManager.refreshElementsLayout(this);k.customZIndex.setValue(undefined)}k.$element.removeClass("positioned-fixed");$(window).unbind("scroll."+k.id+"isFixed")},getDisabledProperties:function(m){var l=this;var k=this.getPropertiesValues();if(k.fillLayout){if(k.fillLayout.fillVertical===true){if(!m.sizeAndPosition){m.sizeAndPosition={}}m.sizeAndPosition["top"]={disabled:true};m.sizeAndPosition["height"]={disabled:true}}if(k.fillLayout.fillHorizontal===true){if(!m.sizeAndPosition){m.sizeAndPosition={}}m.sizeAndPosition["left"]={disabled:true};m.sizeAndPosition["width"]={disabled:true}}}if(k.verticalLayout===LayoutManager.Layout.dockTop){if(!m.sizeAndPosition){m.sizeAndPosition={}}m.sizeAndPosition["top"]={disabled:true}}if(k.horizontalLayout===LayoutManager.Layout.dockLeft){if(!m.sizeAndPosition){m.sizeAndPosition={}}m.sizeAndPosition["left"]={disabled:true}}return m}}},initialize:d,triggers:Global.IsMobile?[]:[Triggers.MouseEnter,Triggers.MouseLeave],supportedStates:Global.IsMobile?[]:[ElementStates.MouseOverState]}});function d(m){var l=this;k(l);l.sizeChangedEvent.bind(function(){l.onContentSizeChange();l.contentSizeChangedEvent.fire(l,{sizeChangedEvent:true})});if(this.isForTemplateUse()){return}MobileVersionViewManager.Flags.IsInMobileContext.once(false,function(){n(l)});function n(p){OperationsManager.disableBatch();var q=p.data.structureMetaData?p.data.structureMetaData.size:undefined;if(!p.isFillVertical()){q=p.getPropertyValue("sizeAndPosition")}p.setLastResizingSize(q);OperationsManager.endDisableBatch();if(p.isFillVertical()){PageManager.PageChangingOperation.performOperation(function(){LayoutManager.layoutUpdateBatch.performOperation(function(){OperationsManager.disableBatch();var r=p.getSize();if(q&&(!r||q.height>r.height)){p.setLastResizingSize(p.getSize())}OperationsManager.endDisableBatch()})})}}SimpleEvent.bind([ViewManager.Events.ViewModeChanged,l.zIndex.valueChangedEvent,l.customZIndex.valueChangedEvent,{event:l.propertyChangedEvent,name:"topZIndex"}],function(){var p=l.getPropertyValue("topZIndex");var q=l.zIndex.getValue();var s=l.customZIndex.getValue();q=q?q:0;var r="";if(s){r=s+(p?p:q)}else{if(p){r=p+Global.MinPropertyZindex}else{if(q){r=q}}}if(l.data.currentZIndexValue!==r){l.data.currentZIndexValue=r;l.$element.css("z-index",r);l.getMainBox().css("z-index",r)}});l.canResize.setValue(l.hasFeature(Features.Resizable),"Resizable");l.isDisplayed.valueChangedEvent.bind(function(){var p=l.isDisplayed.isTrue();if(p){l.showElement()}else{l.hideElement()}});var o=l.isDisplayed.isTrue();if(!o){l.hideElement()}if(l.isInDesignMode()){l.canResizeHorizontally.setValue(l.hasFeature(Features.Resizable),"Resizable");l.canResizeVertically.setValue(l.hasFeature(Features.Resizable),"Resizable")}function k(p){if(p.isForTemplateUse()&&Global.IsMobileView){return}p.elementEnterEvent.bind(function(q){if(!p.isInMobileMode()&&!Global.IsMobileClient){p.activateTrigger(Triggers.MouseEnter,q)}});p.elementLeaveEvent.bind(function(q){if(!p.isInMobileMode()&&!Global.IsMobileClient){p.activateTrigger(Triggers.MouseLeave,q)}});p.influenceChanged.bindAndExecute(function(){g(p)})}}function c(m,n,o,l){var k=(l===undefined);if(!k||n!==1){this.animatePart(this.getVisibilityTargets(),{opacity:n},true,o,{isInitialization:k})}}function g(m){if(!Global.IsMobile){var l=m.getPropertyValue("customStates");var k=false;if(l){$.each(l,function(o,n){if(n.ids[ElementStates.MouseOverState.name]){k=true}})}if(!m.isForTemplateUse()){if(ConnectionManager.hasTargetConnectionsForTriggers(m,Triggers.MouseEnter,Triggers.MouseLeave,ElementStates.MouseOverState)||PropertiesManager.isStyleAffecting(m,ElementStates.MouseOverState)||(m.parentInstance&&m.parentInstance.elementType===ElementsTypes.group&&PositionManager.isTrackOver(m))||k===true){PositionManager.trackMouseOver(m)}else{PositionManager.stopMouseOverTracking(m)}}}}function b(l,k){if(!l||!k){return !l&&!k}return l.verticalMargin==k.verticalMargin&&l.horizontalMargin==k.horizontalMargin}function a(n,o,q,m,p){var k=this;var l=(m===undefined);LayoutManager.refreshElementsLayout(k)}function f(l,k){if(!l||!k){return !l&&!k}return(l.width==k.width&&l.height==k.height)}function j(l,k){if(!l||!k){return !l&&!k}return(l.left==k.left&&l.top==k.top&&l.width==k.width&&l.height==k.height)}function i(n,o,q,m,p){var k=this;var l=(m===undefined);k.animatePart(k.$element,{sizeAndPosition:o},undefined,q,{isInitialization:l,complete:p})}$.cssHooks.sizeAndPosition={get:function(n,m,l){var k=$instance(n);if(k){return k.getActualPropertyValue("sizeAndPosition")}},set:function(l,m){var k=$instance(l);if(k){k.setActualPropertyValue("sizeAndPosition",m);LayoutManager.refreshElementsLayout(k)}}};$.fx.step.sizeAndPosition=function(k){$.cssHooks.sizeAndPosition.set(k.elem,{left:k.end.left===null?null:Math.floor(k.start.left+k.pos*(k.end.left-k.start.left)),top:k.end.top===null?null:Math.floor(k.start.top+k.pos*(k.end.top-k.start.top)),width:k.end.width===null?null:Math.floor(k.start.width+k.pos*(k.end.width-k.start.width)),height:k.end.height===null?null:Math.floor(k.start.height+k.pos*(k.end.height-k.start.height))})};$.each(["glow","innerGlow","dropShadow","dropInnerShadow"],function(k,l){$.cssHooks[l]={get:function(p,o,n){var m=$instance(p);if(m){return m.getActualPropertyValue(l)}},set:function(o,p){var m=$instance(o);if(m){var n=m.getActualPropertyValue(l);m.setActualPropertyValue(l,$.extend({},n,p));h(m)}}};$.fx.step[l]=function(o){if(!o.colorInit){o.startColor=$.getRGBA(o.start.color);o.endColor=$.getRGBA(o.end.color);o.begin=$.extend({},o.start);o.colorInit=true}var m="rgba("+Math.max(Math.min(parseInt((o.pos*(o.endColor[0]-o.startColor[0]))+o.startColor[0],10),255),0)+","+Math.max(Math.min(parseInt((o.pos*(o.endColor[1]-o.startColor[1]))+o.startColor[1],10),255),0)+","+Math.max(Math.min(parseInt((o.pos*(o.endColor[2]-o.startColor[2]))+o.startColor[2],10),255),0)+","+Math.max(Math.min(parseFloat((o.pos*(o.endColor[3]-o.startColor[3]))+o.startColor[3],10),1),0)+")";var n={blur:o.begin.blur+o.pos*(o.end.blur-o.begin.blur),spread:o.begin.spread+o.pos*(o.end.spread-o.begin.spread),color:m};if(l==="dropShadow"||l==="dropInnerShadow"){n.top=o.start.top+o.pos*(o.end.top-o.start.top);n.left=o.start.left+o.pos*(o.end.left-o.start.left)}$.cssHooks[l].set(o.elem,n)}});function h(k){var p=k.getActualPropertyValue("glow");var n=k.getActualPropertyValue("innerGlow");var l=k.getActualPropertyValue("dropShadow");var m=k.getActualPropertyValue("dropInnerShadow");if(p&&n&&l&&m){var o=new StringBuilder(",");if(p.blur>0||p.spread>0){o.append("0 0 {0}px {1}px {2}",p.blur,p.spread,p.color)}if(n.blur>0||n.spread>0){o.append("inset 0 0 {0}px {1}px {2}",n.blur,n.spread,n.color)}if(l.left!=0||l.top!=0||l.blur>0||l.spread>0){o.append("{0}px {1}px {2}px {3}px {4}",l.left,l.top,l.blur,l.spread,l.color)}if(m.left!=0||m.top!=0||m.blur>0||m.spread>0){o.append("inset {0}px {1}px {2}px {3}px {4}",m.left,m.top,m.blur,m.spread,m.color)}k.getShadowTarget().css("boxShadow",o.toString())}}})();(function(){var a={ElementContent:{group:"iframe-content-templates",name:"iframe-content-template",isSimple:true}};ElementsModel.registerDefinition(Features,{IFrameContent:{methods:{getIFrameUrl:$.returnEmptyString,isScrollableIFrame:$.returnFalse,creationFunction:$.noop,reloadIFrame:function(c){var b=this;c=$.valueOrCalculate(c,function(){return b.getIFrameUrl()});b.data.$iframe.attr("src",c)},getIFrameElement:function(){return this.data.$iframe},getIFrameContainerElement:function(){return this.data.$iframeContainer}},aggregatedMethods:{aggregations:{}},onInstanceCreated:function(){var b=this;var d=b.isScrollableIFrame();var c=$.useTemplate(a.ElementContent,{url:b.getIFrameUrl(),scrolling:d?"yes":"no"});b.data.$iframeContainer=c;var f=b.data.$iframe=c.find(".iframe-content-element");f.css("visibility","hidden");f.load(function(){f.css("visibility","visible")});b.setElementContent(c)}}})})();(function(){ElementsModel.registerDefinition(Features,{ConnectableExternalApp:{getExtensions:function(a){return{featureConnections:{}}},aggregatedMethods:{aggregations:{onRemove:function(){}}},methods:{getAppConnectableFeatures:function(){return this.getAppDefinition().connectableFeatures},getAppConnectableFeature:function(a){return this.getAppConnectableFeatures()[a]},callConnectedFeatureFunction:function(b,c,d,f){var a=this.featureConnections[b];if(a){a.instance.callFeatureFunction(b,c,d,this.createCallInfo(),f)}},connectFeatureInstance:function(b,d){var a=this;if(!d.hasFeature(Features.FeatureExternalApp)){throw new Error("Invalid use")}var c=d.getAppFeature(b);if(!c){throw new Error("Instance: {0} doesn't implement feature: {1}".format(d.id,b))}var f=d.appFeaturesEvent.bind(b,function(h,i,g){a.getApiManager().fireConnectedFeatureEvent(b,h,i,g)});a.featureConnections[b]={instance:d,eventBinding:f}},disconnectFeatureInstance:function(c,d){var a=this;var b=a.featureConnections[c];if(b){b.eventBinding.unbind();delete a.featureConnections[c]}}},initialize:function(){}}})})();(function(){ElementsModel.registerDefinition(Features,{ExternalApp:{features:[Features.IFrameContent],getExtensions:function(b){return{isIframeInitialized:ObservableFlag.create(false),isIframeNotLoaded:ObservableFlag.create(false),connectableFeaturesEvent:SimpleEvent.createNamedEvents()}},defaultProperties:{},properties:{appProperties:{}},aggregatedMethods:{aggregations:{onRemove:function(){var b=this;b.data.apiManager.deactivate();delete b.data.apiManager},switchToDesign:function(){this.reloadApp()},switchToPreview:function(b){if(b){this.reloadApp()}},updateInstanceToViewPort:function(){this.reloadApp()},removeInstanceFromViewPort:function(){this.reloadApp()}}},methods:{setDocumentSize:function(b){if(a(this)){OperationsManager.disableBatch();this.data.lastDocumentSize=b;this.whenInstanceContentHeightChanged(b.height,{ignoreLastResizingHeight:true});OperationsManager.endDisableBatch()}},setAppSize:function(c){OperationsManager.disableBatch();var b=this.getNoneContentSize();ElementsLayoutHelper.setInstancesSize(this,{width:c.width+b.width,height:c.height+b.height});OperationsManager.endDisableBatch()},setAppContentSize:function(b){this.getIFrameContainerElement().css({width:b.width,height:b.height})},createCallInfo:function(){var b=this;var d=b.getAppDefinition();var c={instanceId:b.id,app:{id:d.id,version:d.version,name:d.name}};return c},getAppDefinition:function(){return this.elementType.appDefinition},getAppSettingPrefix:function(){return this.getAppDefinition().appSettingPrefix},getAppSettings:function(){return this.getAppDefinition().settings},getAppSettingValue:function(b){var d=this.getAppSettings();var f=this.getPropertyValue(this.getAppDefinition().appSettingPrefix+b);var c=d[b];if(c){if(c.type==="color"){return $.Color(ThemeColorsManager.evaluateColorBinding(f)).toHEX()}}return f},setAppSettingValue:function(b,d){var c=this.getAppSettings();if(c.hasOwnProperty(b)){this.setPropertyValue(this.getAppSettingPrefix()+b,d)}},isQueryParamSetting:function(b){return $.inArray(b,this.elementType.querySettings)!=-1},getApiManager:function(){return this.data.apiManager},reloadApp:function(c){var b=this;var d=Global.IsDesigner?[ModeManager.updateBatch,PageManager.PageChangingOperation]:[PageManager.PageChangingOperation];OperationsBatch.whenAllFinished(d,function(){b.reloadIFrame(b.getIFrameUrl(c))},b.id+"reloadApp")},getIFrameUrl:function(b){var c={wzSize:this.getContentSize()};return IframeManager.createIframeUrl(this,{frameId:this.id,baseUrl:this.getAppDefinition().getUrl(),apiType:"app",additionalParams:b,encodedParams:c})},bindAppSettingProperty:function(b,f,c){var d=this.getAppSettingPrefix();return this.bindPropertyChange(d+b,f,c)},getMinSize:function(){var b=this.getAppDefinition();if(b.resizingSettings&&b.resizingSettings.minSize){return b.resizingSettings.minSize}return{height:5,width:5}}},initialize:function(){var b=this;var d={apiInitialize:function(){b.isIframeInitialized.setTrue()}};b.data.apiManager=new ApiManager({instance:b,$iframe:b.getIFrameElement(),callbacks:d});var c=b.getAppDefinition();if(c.resizingSettings){if(c.resizingSettings.canResizeVertically===false){b.canResizeVertically.setFalse()}if(c.resizingSettings.canResizeHorizontally===false){b.canResizeHorizontally.setFalse()}}b.InstancePropertiesInitialized.one(function(){$.each(b.getAppSettings(),function(f){if(b.isQueryParamSetting(f)){b.bindAppSettingProperty(f,function(){b.reloadApp()})}})});b.resizingStopped.bind(function(){if(b.data.lastDocumentSize&&c.resizingSettings.canResizeVertically===false){b.setDocumentSize(b.data.lastDocumentSize)}});b.visibilityChangedEvent.bind(function(){if(b.isInstanceVisible()){b.reloadApp()}});setTimeout(function(){if(b.isIframeInitialized.isFalse()){b.isIframeNotLoaded.setTrue()}},5000)}}});function a(b){var c=b.getAppDefinition();if(c.growableSettings){if(c.growableSettings.view&&ViewManager.isViewMode()){return true}else{if(c.growableSettings.design&&ViewManager.isDesignMode()){return true}}}else{return true}}})();(function(){ElementsModel.registerDefinition(Features,{FeatureExternalApp:{getExtensions:function(a){return{appFeaturesEvent:SimpleEvent.createNamedEvents()}},aggregatedMethods:{aggregations:{onRemove:function(){}}},methods:{getAppFeatures:function(){return this.getAppDefinition().implementedFeatures},getAppFeature:function(a){return this.getAppFeatures()[a]},getInternalFeatureName:function(a){return $.findFirst(this.getAppFeatures(),function(b,c){return c.isInternal&&c.featureInternalType===a})},fireFeatureEvent:function(b,a,c){this.appFeaturesEvent.fire(b,this,a,c,this.createCallInfo())},callFeatureFunction:function(b,c,d,a,f){this.getApiManager().callFeatureFunction(b,c,d,a,f)},bindFeatureEvent:function(a,b){return this.appFeaturesEvent.bind(a,b)}},initialize:function(){}}})})();(function(){ElementsModel.registerDefinition(Features,{NavigatableExternalApp:{features:[],methods:{navigate:function(b,d,a,c){this.callFeatureFunction(this.data.navigatableFeatureName,"navigate",{navigationDelta:b,useAnimation:d,animationOptions:c},{},a)}},initialize:function(){this.data.navigatableFeatureName=this.getInternalFeatureName("NavigatableExternalApp")}}})})();(function(){ElementsModel.registerDefinition(Features,{HasMenu:{methods:{},aggregatedMethods:{aggregations:{setItem:function(b){var a=this;b.instanceController.initializeFlag.onceTrue(function(){b.setNeverSelectedInClick(true);b.getSkinInstance().setNeverSelectedInClick(true);a.onItemSet(b);if(a.getPageId()===PageManager.getCurrentPageId()){a.onItemChanged(b.getDataItemId())}})},onItemChanged:function(g){var a=this;var f=a.getInstanceController(g);var d=a.data.currentItemSelected;if(d&&!d.isDeleted){var c=d.getSkinInstance();if(c.isUserSelected()){c.userSelect(false)}}if(f&&f.isInitialized()&&ViewManager.isViewMode()){var b=f.getInstance();b.instanceController.initializeFlag.onceTrue(function(){var h=a.isMenuItemSelected(g);if(h){a.data.currentItemSelected=b}ElementsManager.performOnInstancesInitialization(b.id,function(){b.getSkinInstance().userSelect(a.data.currentItemSelected===b)})})}},onRemove:function(){this.data.currentItemChangedEvent.unbind()}}},initialize:function(b){var a=this;a.data.currentItemChangedEvent=a.getDataSource().currentItemChangedEvent.bind(function(c){a.onItemChanged(c)})}}})})();(function(){ElementsModel.registerDefinition(Features,{HasNavigation:{properties:{navigation:{title:"navigation",isStateProperty:true,defaultValue:function(){return"SlideNavigation"},onChange:function(b,c){if(this.isInitialized){var a=this.data.navigationController;if(a){a.replaceNavigation(c)}}}},navigationProperties:{isStateProperty:true,title:"navigationProperties",defaultValue:function(){return{}}}},methods:{getNavigationType:function(){return this.getPropertyValue("navigation")},getNavigationProperties:function(){return this.getPropertyValue("navigationProperties")},getNavigationTypeProperties:function(a){return this.getPropertyValue("navigationProperties",a||this.getNavigationType())},setNavigationTypeProperties:function(a,b){return this.setPropertyFieldValue("navigationProperties",a||this.getNavigationType(),b)}},aggregatedMethods:{aggregations:{switchToPreview:function(){var a=this;a.$element.bind("click.navigation",function(){if(a.data.navigationController.isOpened.isFalse()){a.data.navigationController.open({$element:a.$element,instanceId:a.id,navigationProperties:a.getNavigationTypeProperties()})}else{a.data.navigationController.close()}})},switchToDesign:function(){var a=this;a.$element.unbind("click.navigation");a.data.navigationController.close({animate:false})},onRemove:function(){var a=this.data.navigationController;if(a){a.remove()}}}},initialize:function(){this.data.navigationController=NavigationManager.createNavigationController(this.getNavigationType())}}})})();(function(){ElementsModel.registerDefinition(Features,{SkinElement:{getExtensions:function(a){return{instanceController:undefined,skinUpdateEventBinding:undefined}},className:"skin-element",features:[Features.ItemsContainer,Features.HasSkinBinding],properties:{skinBinding:{defaultValue:$.returnNull,preSaveProcessing:function(a){if(a&&a.type===SkinsBindingsTypes.Inline){var b=StylesManager.getStyleInformation(a.skinName+a.index);if(b){a.hierarchy.fieldsToValues=b.fields;a.hierarchy.statesAnimations=b.statesAnimations}}return a},onChange:function(b,d,f,c){var a=this;if(a.skinUpdateEventBindings){a.skinUpdateEventBindings.unbind()}if(c&&c.type===SkinsBindingsTypes.Inline){StylesManager.removeStyle(c.skinName+c.index)}a.skinUpdateEventBindings=SkinsManager.Events.SkinHierarchyUpdated.bindAndExecute(a.getSkinId(),function(){a.performWhenVisible(function(){a.setSkinInstanceControllerFromBinding()},a.id+"skinBinding")})}}},methods:{getInstancesBindingsByField:function(a){return this.getSkinInstance().getInstancesBindingsByField(a)},setSkinInstanceControllerFromBinding:function(){var a=this;var b=a.getPropertyValue("skinBinding");LayoutManager.layoutUpdateBatch.performInstanceOperation(function(){OperationsManager.disableBatch();if(!StylesManager.isStyleExist(a.getSkinId())){StylesManager.addStyle(a.getSkinId(),a.getSkinFieldsValues(),a.getSkinStatesAnimations())}var c=SkinsManager.getSkinHierarchy(b);a.instanceController.extendDataSourceOptionsWith({styleBindingId:a.getSkinId()});a.instanceController.setTemplateStructure(c);a.instanceController.initialize();a.instanceController.appendTo(a.getElementContent(),a);OperationsManager.endDisableBatch()},a,"setSkinInstanceControllerFromBinding")},getSkinInstance:function(){if(!this.instanceController.getTemplateStructure()){this.setSkinInstanceControllerFromBinding()}return this.instanceController.getInstance()},getSkinSupportedStates:function(){return[ElementStates.MouseOverState,ElementStates.MouseDownState]},getFieldsMap:function(){return this.instanceController.getInstance().getPropertyValue("fieldsMap")},reorderChildElements:function(){},getSkinBinding:function(){return $.cloneObject(this.getPropertyValue("skinBinding"))},getInstanceForEditTemplate:function(){if(this.hasFeature(Features.DataListItem)){return this.getItemMainParent().dataLayoutController.getLastArrangementOptions().controllersToArrange[0].getInstance()}return this},updateSkinBindingFromEditingTemplate:function(c,a,b){SkinsManager.updateSkinHierarchy(a,c.getSkinBinding(),c);return c},getInstanceForStatePreview:function(){return this.getSkinInstance()},getSkinId:function(){var a=this.getSkinBinding();var b=a.index!==undefined?a.index:"";return a.skinName+a.index},getSkinName:function(){var a=this.getSkinBinding();return a.skinName},creationFunction:function(a){return $("<div class='absolute-fill'></div>")},getSkinFieldsMetaData:function(){var a=this.getPropertyValue("skinBinding");var c=SkinsManager.getSkinHierarchy(a);var b=c?c.fieldsToData:undefined;return b},getSkinFieldsValues:function(){var a=this.getPropertyValue("skinBinding");var c=SkinsManager.getSkinHierarchy(a);var b=c?c.fieldsToValues:undefined;return b?b:{}},getSkinStatesAnimations:function(){var a=this.getPropertyValue("skinBinding");var b=SkinsManager.getSkinHierarchy(a);var c=b?b.statesAnimations:undefined;return c?c:{}},accept:function(a){return false},extendDataSourceOptionsWith:function(b,a){this.instanceController.extendDataSourceOptionsWith(b,a)},setStructureProcessor:function(a,b){this.instanceController.setStructureProcessor(a,b)},getDataSourceOptions:function(){var a=this;return{dataItemID:a.id,dataSourceName:a.id,styleBindingId:a.getSkinId()}}},onInstanceCreated:function(){var a=this;a.instanceController=InstanceController.create(undefined,{parentInstanceId:a.id,dataSourceOptions:a.getDataSourceOptions(),templateOptions:{isContent:true,isLoading:true,generateNewID:true}});a.instanceController.$element.addClass("skin-instance-controller");if(!StylesManager.isStyleExist(this.getSkinId())){StylesManager.addStyle(this.getSkinId(),this.getSkinFieldsValues(),this.getSkinStatesAnimations())}},aggregatedMethods:{aggregations:{onPropertiesChanged:function(b){var a=this},isDroppable:function(){return false}}},onInstanceInitialized:function(){}}})})();(function(){ElementsModel.registerDefinition(Features,{category:ElementsTypesCategories.General,CommonDataListSkinItem:{features:[Features.DesignElement,Features.SkinElement,Features.DataListItem,Features.HasResponsiveItem,Features.Resizable,Features.Selectable,Features.HasLayout,Features.Clickable,Features.Hideable,Features.HasContent],methods:{},aggregatedMethods:{aggregations:{}},initialize:function(b){var a=this}}})})();(function(){ElementsModel.registerDefinition(Features,{RemoteDataListSkinItem:{features:[Features.CommonDataListSkinItem],methods:{hasEditingBehaviour:function(){return false},canDuplicate:function(){return false}},aggregatedMethods:{aggregations:{canDelete:function(){return false},canRedropTo:function(){return false}}},onInstanceInitialized:function(){var a=this}}})})();var TemplateThumbConversationsMap={ImageBoxToGrid:changeTemplateToGallery,MenuButtonToLine:changeTemplateToMenu,MenuToMenuButton:changeMenuToMenuButton,ButtonsGroupToButton:changeButtonsGroupToButton,GalleryToImageBox:changeGalleryToImageBox,PostsListsToImageBox:changePostsListToImageBox,VideoItemToGrid:changeTemplateToVideoGallery,FAQItemToFAQ:changeTemplateToFAQ,ServiceItemToServicesList:changeTemplateToServicesList,ProductItemToProductsList:changeTemplateToProducts,LinkItemToLinksList:changeTemplateToLinks,DishItemToRestaurantMenu:changeTemplateToDishList,FeedItemToNewsFeed:changeTemplateToNewsFeed,PersonItemToPeople:changeTemplateToPeople,IconItemToIconsList:changeTemplateToIcons,ImageBoxTemplateToImageBoxItem:changeTemplateToGalleryItem,ImageBoxTemplateToPostsListItem:changeTemplateToPostItem,ButtonGroupTemplateToButtonGroupItem:changeTemplateToButtonGroupItem,VideoTemplateToVideoItem:changeTemplateToVideoGalleryItem};function changeTemplateToGallery(a,b){return changeTemplateTo(a,$.extend({elementTypeName:"Gallery",fieldName:"ImageBox",dataLayout:{name:DataLayouts.PagesGrid.name},dataLayoutOptions:{elementsPerPage:1,cols:1},items:$.makeSet($.getValues(DummyDataSource.getDefaultGalleryItems()).slice(0,1),function(c){return c.id})},b))}function changeTemplateToVideoGallery(a,b){return changeTemplateTo(a,$.extend({elementTypeName:"VideoGallery",fieldName:"DataListItemTemplate",dataLayout:{name:DataLayouts.PagesGrid.name},dataLayoutOptions:{elementsPerPage:1,cols:1},items:$.makeSet($.getValues(DummyDataSource.getDefaultVideoGalleryItems()).slice(0,1),function(c){return c.id})},b))}function changeTemplateToGalleryItem(a,b){return changeTemplateTo(a,$.extend({elementTypeName:"Gallery",fieldName:"ImageBox",dataLayout:{name:DataLayouts.PagesGrid.name},dataLayoutOptions:{elementsPerPage:1,cols:1},items:[$.getValues(DummyDataSource.getDefaultGalleryItems())[0]]},b))}function changeTemplateToPostItem(a,b){return changeTemplateTo(a,$.extend({elementTypeName:"PostsList",fieldName:"ImageBox",dataLayout:{name:DataLayouts.PagesGrid.name},dataLayoutOptions:{elementsPerPage:1,cols:1},items:[$.getValues(DummyDataSource.getDefaultGalleryItems())[0]]},b))}function changeTemplateToButtonGroupItem(a,b){return changeTemplateTo(a,$.extend({elementTypeName:"ButtonsGroup",fieldName:"MenuButton",dataLayout:{name:DataLayouts.Horizontal.name},dataLayoutOptions:{elementsPerPage:1},items:[$.getValues(DummyDataSource.getDefaultGalleryItems())[0]]},b))}function changeTemplateToVideoGalleryItem(a,b){return changeTemplateTo(a,$.extend({elementTypeName:"VideoGallery",fieldName:"DataListItemTemplate",dataLayout:{name:DataLayouts.PagesGrid.name},dataLayoutOptions:{elementsPerPage:1,cols:1},items:[$.getValues(DummyDataSource.getDefaultGalleryItems())[0]]},b))}function changeTemplateToFAQ(a,b){return changeTemplateTo(a,$.extend({elementTypeName:"FAQ",fieldName:"DataListItemTemplate",dataLayout:{name:DataLayouts.PagesGrid.name},dataLayoutOptions:{elementsPerPage:1,cols:1},items:[$.getValues(DummyDataSource.getDefaultFAQItems())[0]]},b))}function changeTemplateToServicesList(a,b){return changeTemplateTo(a,$.extend({elementTypeName:"servicesList",fieldName:"DataListItemTemplate",dataLayout:{name:DataLayouts.PagesGrid.name},dataLayoutOptions:{elementsPerPage:1,cols:1},items:[$.getValues(DummyDataSource.getDefaultServicesListItems())[0]]},b))}function changeTemplateToDishList(a,b){return changeTemplateTo(a,$.extend({elementTypeName:"RestaurantMenu",fieldName:"DataListItemTemplate",dataLayout:{name:DataLayouts.PagesColumn.name},dataLayoutOptions:{elementsPerPage:1,cols:1},items:[$.getValues(DummyDataSource.getDefaultRestaurantMenuListItems())[0]]},b))}function changeTemplateToPeople(a,b){return changeTemplateTo(a,$.extend({elementTypeName:"Persons",fieldName:"DataListItemTemplate",dataLayout:{name:DataLayouts.PagesGrid.name},dataLayoutOptions:{elementsPerPage:1,cols:1},items:[$.getValues(DummyDataSource.getDefaultPersonsItems())[0]]},b))}function changeTemplateToIcons(a,b){return changeTemplateTo(a,$.extend({elementTypeName:"iconsList",fieldName:"DataListItemTemplate",dataLayout:{name:DataLayouts.PagesGrid.name},dataLayoutOptions:{elementsPerPage:1,cols:1},items:[$.getValues(DummyDataSource.getDefaultIconsListItems())[0]]},b))}function changeTemplateToProducts(a,b){return changeTemplateTo(a,$.extend({elementTypeName:"Products",fieldName:"DataListItemTemplate",dataLayout:{name:DataLayouts.PagesGrid.name},dataLayoutOptions:{elementsPerPage:1,cols:1},items:[$.getValues(DummyDataSource.getDefaultProductsItems())[0]]},b))}function changeTemplateToLinks(a,b){return changeTemplateTo(a,$.extend({elementTypeName:"linksList",fieldName:"DataListItemTemplate",dataLayout:{name:DataLayouts.PagesGrid.name},dataLayoutOptions:{elementsPerPage:1,cols:1},items:[$.getValues(DummyDataSource.getDefaultLinksListItems())[0]]},b))}function changeTemplateToNewsFeed(a,b){return changeTemplateTo(a,$.extend({elementTypeName:"NewsFeed",fieldName:"DataListItemTemplate",dataLayout:{name:DataLayouts.PagesGrid.name},dataLayoutOptions:{elementsPerPage:1,cols:1},items:[$.getValues(DummyDataSource.getDefaultNewsFeedsListItems())[0]]},b))}function changeTemplateToMenu(a,f){var b={elementTypeName:"Menu",fieldName:"MenuButton",dataLayout:{name:DataLayouts.Horizontal.name},dataLayoutOptions:{lineSpacing:10},customStatesProperties:f.customStatesProperties};var c=TemplateThumb.getDefaultMenuData();var d={};d[b.fieldName]={};d[b.fieldName][a.id]={id:a.id,name:"sdasd",isDefault:true,hierarchy:{structures:[a],customStatesProperties:b.customStatesProperties}};return{id:$.uniqueID(),type:b.elementTypeName,elementProperties:{sizeAndPosition:{width:100,height:100},backgroundColor:"transparent",dataLayout:b.dataLayout,dataLayoutOptions:b.dataLayoutOptions,dataInfo:$.extend(true,{},c),fieldsTemplates:d}}}function changeMenuToMenuButton(a,b,c){var d;$.each(a.structures[0].elementProperties.fieldsTemplates[ElementsTypes.Menu.itemName],function(g,f){d=f.hierarchy;if(f.isDefault){return false}});return d}function changeButtonsGroupToButton(a,b,c){var d;$.each(a.structures[0].elementProperties.fieldsTemplates[ElementsTypes.ButtonsGroup.itemName],function(g,f){d=f.hierarchy;if(f.isDefault){return false}});return d}function changeGalleryToImageBox(b,c,d){var a;$.each(b.structures[0].elementProperties.fieldsTemplates[ElementsTypes.Gallery.itemName],function(g,f){a=f.hierarchy;if(f.isDefault){return false}});return a}function changePostsListToImageBox(b,c,d){var a;$.each(b.structures[0].elementProperties.fieldsTemplates[ElementsTypes.PostsList.itemName],function(g,f){a=f.hierarchy;if(f.isDefault){return false}});return a}function changeTemplateTo(a,b){b=$.extend({elementTypeName:"Gallery",fieldName:"ImageBox",dataLayout:{name:DataLayouts.PagesGrid.name},dataLayoutOptions:{elementsPerPage:4,cols:2},items:undefined,customStatesProperties:{}},b);var c={};c[b.fieldName]={};c[b.fieldName][a.id]={id:a.id,name:"sdasd",isDefault:true,hierarchy:{structures:[a],customStatesProperties:b.customStatesProperties}};return{id:$.uniqueID(),type:b.elementTypeName,elementProperties:{sizeAndPosition:{width:100,height:100},backgroundColor:"transparent",dataLayout:b.dataLayout,dataLayoutOptions:b.dataLayoutOptions,dataInfo:{currentData:b.items},fieldsTemplates:c}}}(function(){var n={Element:{useTemplate:function(p){var o=p.type;var q=p.editable;var r=new StringBuilder();r.append('<div class="label-element absolute-fill" style="overflow: hidden;">');r.append('<span class="height-normalizer"></span>');r.append('<span class="text-content element-text-container"></span>');if(q){r.append('<textarea class="element-text-input element-text-container"></textarea>')}r.append("</div>");return $(r.toString())}}};ElementsModel.registerDefinition(ElementsTypes,{label:{className:"label-element",icon:"/images/rss.png",iconClass:"sprite-icon sprite-element-text",title:"Label",description:"No description yet.",properties:{text:{title:"Label text",isContentProperty:true,defaultValue:function(){return"Title"},category:PropertiesCategories.TextStyle,isStateProperty:true,supportsBinding:true,isBound:function(o){var p=o.getPropertyValue("connections");return o.isBound(DataSourceItemsFields.title.getContentType())||o.isBound(DataSourceItemsFields.description.getContentType())},isInTemplate:function(o){var p=o.getPropertyValue("connections");return !PropertiesTypes.text.isBound(o)},getBindingType:function(o){var p;if(o.isBound(DataSourceItemsFields.title.getContentType())){p=DataSourceItemsFields.title.getContentType()}else{if(o.isBound(DataSourceItemsFields.description.getContentType())){p=DataSourceItemsFields.description.getContentType()}}return p},onChange:function(o){j(this)}},textType:{title:"Format",isStyleProperty:true,defaultValue:function(){return TextTypes.None.value},onChange:function(o,p){}},trimText:{title:"Trim Text",isStateProperty:true,isStyleProperty:true,defaultValue:$.returnFalse,category:PropertiesCategories.TextStyle}},features:[Features.DesignElement,Features.HasResponsiveItem,Features.Resizable,Features.Clickable,Features.Selectable,Features.HasBackground,Features.HasBackgroundImage,Features.Hideable,Features.HasLayout,Features.HasPadding,Features.HasContent,Features.HasText,Features.Editable,Features.HasBorder,Features.ExpressMode,Features.Rotatable],initialize:f,methods:{creationFunction:i,startEditingOnClick:$.returnTrue,refreshTextLayout:function(){l(this)},hasBinding:function(){return PropertiesTypes.text.isBound(this)},getTextElements:function(){var p=$([]);var o=this.data;if(o.isEditable){p.pushElements(o.$textInput)}p.pushElements(o.$textContent);return p},getElementDataContent:function(){return this.data.$textContent},editingEnabled:function(){var o=this;if(o.isConnectedToField()){return false}return true},onEditingDisable:function(){var o=this;if(o.isConnectedToField()){this.data.labelToolTip.activate()}},hasHorizontalAlign:$.returnTrue,hasVerticalAlign:$.returnTrue,alignVertical:function(){var p=this;if(p.hasVerticalAlign()){var q=p.getPropertyValue("verticalAlign");var o;switch(q){case VerticalAlignment.Centered:o="vertically-centered";break;case VerticalAlignment.Top:o="vertically-top";break;case VerticalAlignment.Bottom:o="vertically-bottom";break}p.data.verticalContextValue.set(o)}},measureTextContent:function(){var p=this;var o=p.data.$textContent;var s=$("<div style='width:100000px; position:absolute; left: 0; top: 0;'></div>");var q=o.clone().css({position:"absolute",width:"auto"}).quickShow().appendTo(s);s.appendTo(o.parent());var r=q.elementSize();s.remove();return r}},aggregatedMethods:{aggregations:{onStartEditing:function(){var o=this;c(this)},onFinishEditing:function(p){var o=this;g(this);o.updateBinding()},onUpdateBindingReady:function(s){var o=this;var p=o.getPropertyValue("text");var t=o.getPropertyValue("binding");var q=t.dataFields;var r={};if(o.isBound(DataSourceItemsFields.title.getContentType())){r[q[DataSourceItemsFields.title.getContentType()].name]=p;r.useDefaultTitle=false}else{if(o.isBound(DataSourceItemsFields.description.getContentType())){r[q[DataSourceItemsFields.description.getContentType()].name]=p}}return $.extend({},s,r)},createBindingFieldsToProperties:function(r){var o=this;var p=DataSourceItemsFields.title.getContentType();var q=DataSourceItemsFields.description.getContentType();if(this.isBound(p)||this.isBound(q)){r[PropertiesTypes.text.name]=ObservableObject.createPropertyBinding(o,{propertyName:PropertiesTypes.text.name})}return r},onContentTypeChanged:function(p,q){var o=this;d(o,q)},onBoundValueReady:function(q){var o=this;var r=PropertiesTypes.text.getBindingType(o);if(r!==undefined){var p=o.getBindingFields(r);d(o,p,q[r])}},onPropertiesChanged:function(p){var o=this;if($.containsOneOfKeys(p,"fontSize","text","textStyle","verticalAlign","lineHeight")){l(o)}if($.containsOneOfKeys(p,"font")){k(o)}if($.browser.msie&&o.isInitialized&&$.containsOneOfKeys(p,"horizontalAlign")){a(o)}}}}}});function d(o,p,q){var r=$.valueOrDefaultArray(q,[p&&p.title,"Default Text"]);o.setBindingValueToProperty(r.toString(),PropertiesTypes.text.name)}var h={ViewMode:"view-mode",EditMode:"edit-mode"};function i(o){var p=o.isInDesignMode();var q=$.useTemplate(n.Element,{tagName:Global.IsDesigner?"div":o.getPropertyValue("tagName"),editable:o.isInDesignMode()});if(Global.IsDesigner){var s=CommonToolTips.ButtonDescriptionToolTip.Above.get();o.data.labelToolTip=q.attachToolTip(s.toolTip,$.extend({content:"<b>Connected to Data</b> <br> This text cannot be changed as it is connected to a data field.<br> To connect/disconnect data fields use the 'Connect To Data' section of the settings panel."},s.contextOptions),[ToolTip.createDeactivateOnMouseDownBehaviour()])}var r=o.data;r.verticalContextValue=ContextValue.createContextClass({getTarget:function(){return o.getTextElements()}});r.$textContent=$(".text-content",q).dotdotdot({height:function(){var t=o.getContentSize();return t&&t.height},ignoredHeight:function(){return Math.ceil(o.calculateDecimalLineHeight()*o.calculateFontSize())}});o.instanceRemoving.one(function(){r.$textContent.trigger("destroy.dot")});r.$label=q;r.isEditable=p;if(p){r.$textInput=$(".element-text-input",q)}return q}function f(){var o=this;var r=o.data;o.hasHorizontalAlignFlag.setTrue();o.hasVerticalAlignFlag.setTrue();o.contentSizeChangedEvent.bind(function(){l(o)});if(r.isEditable){r.$textInput.keypress(p).keydown(p);o.$element.click(function(s){if(r.currentMode==h.EditMode&&s.target!=r.$textInput[0]){r.$textInput.focus()}})}j(o);g(o);var q=o.visibilityChangedEvent.bindAndExecute(function(){var s=PositionManager.isElementVisible(o);if(s){k(o)}});o.instanceRemoving.one(function(){q.unbind()});function p(){window.setTimeout(function(){if(r.currentMode==h.EditMode){if(o.properties.text.descriptor.isBound(o)){o.setBindingValueToProperty(r.$textInput.val(),PropertiesTypes.text.name)}else{o.setPropertiesValues({text:r.$textInput.val()})}}},0)}}function k(o){var p=o.getPropertyValue("font");p=ThemeFontsManager.evaluateFontBinding(p);if(!FontDetect.isFontLoaded(p)){FontDetect.onFontLoaded(p,{successCallback:function(){j(o);m(o)},timeout:15000})}}function g(o){o.$element.removeClass("state-editing");var p=o.data;if(p.currentMode===h.ViewMode){return}p.currentMode=h.ViewMode;if(p.isEditable){p.$textInput.quickHide().unbind("keydown.rtl")}p.$textContent.quickShow();m(o)}function c(p){p.$element.addClass("state-editing");var r=p.data;if(r.currentMode===h.EditMode){return}var q=r.$textInput;var o=r.$textContent;p.data.currentMode=h.EditMode;q.quickShow();o.quickHide();b(p);q.selectRange(0,0);q.scrollTop(0);q.bind("keydown.rtl",function(t){if(t.ctrlKey&&t.which===16){var s=p.getPropertyValue("textDirection");if(s===TextDirection.LeftToRight){p.setPropertyValue("textDirection",TextDirection.RightToLeft);p.setPropertyValue("horizontalAlign",HorizontalAlignment.Right)}else{p.setPropertyValue("textDirection",TextDirection.LeftToRight);p.setPropertyValue("horizontalAlign",HorizontalAlignment.Left)}}});if($.browser.msie){a(p)}}function l(o){if(o.data.currentMode==h.EditMode){b(o)}else{m(o)}}function b(o){var q=o.getPropertyValue("text");if(q!==o.data.$textInput.val()){o.data.$textInput.val(q)}var p;p=o.data.$textInput.measureText(o.data.normalizedText!==""?o.data.normalizedText:"&nbsp;",false);o.data.$textInput.css({height:p.height})}function m(o){LayoutManager.layoutUpdateBatch.performInstanceOperation(function(){o.data.$textContent.html(o.data.normalizedText)},o,"dotdotdot")}function j(o){var q=o.getPropertyValue("text");if(q){var r=q.toString()}else{var r=""}var p=r.replace(/\n/g,"<br />");if(r.charAt(r.length-1)=="\n"){p+="&nbsp;"}o.data.normalizedText=p}function a(o){var p=o.$element;p.width(p.width()+1).width(p.width()-1)}})();(function(){ElementsModel.registerDefinition(ElementsTypes,{coordinator:{className:"coordinator-element",icon:"/images/icons/elements/container.png",title:"Coordinator",description:"Coordinator",features:[],properties:{pageContentWidth:{defaultValue:function(){return 960}},siteStatesGroups:{title:"States Groups",category:PropertiesCategories.Other,defaultValue:$.returnNull},responsiveStates:{defaultValue:$.returnNull},sitePresetPalettes:{defaultValue:function(){return[]}},themeFonts:{defaultValue:function(){return{heading1:"Questrial",heading2:"Questrial",body1:"Arial",body2:"Arial"}}},textStyles:{defaultValue:function(){return{title:{fontSize:23,fontFamily:{themeFont:"heading1"},color:"#000000",isBold:false,isItalic:false},menu:{fontSize:15,fontFamily:{themeFont:"body2"},color:"#000000",isBold:false,isItalic:false},pageTitle:{fontSize:50,fontFamily:{themeFont:"heading1"},color:"#000000",isBold:false,isItalic:false},headingXL:{fontSize:72,fontFamily:{themeFont:"heading1"},color:"#000000",isBold:false,isItalic:false},headingL:{fontSize:25,fontFamily:{themeFont:"heading1"},color:"#000000",isBold:false,isItalic:false},headingM:{fontSize:24,fontFamily:{themeFont:"heading2"},color:"#000000",isBold:false,isItalic:false},headingS:{fontSize:20,fontFamily:{themeFont:"heading2"},color:"#000000",isBold:false,isItalic:false},bodyL:{fontSize:19,fontFamily:{themeFont:"body1"},color:"#000000",isBold:false,isItalic:false},bodyM:{fontSize:15,fontFamily:{themeFont:"body2"},color:"#000000",isBold:false,isItalic:false},bodyS:{fontSize:14,fontFamily:{themeFont:"body2"},color:"#000000",isBold:false,isItalic:false},bodyXS:{fontSize:10,fontFamily:{themeFont:"body2"},color:"#000000",isBold:false,isItalic:false}}}},themeColors:{defaultValue:function(){return ThemeColorsManager.generatePalette(["#69D2E7","#A7DBD8","#E0E4CC","#F38630","#FA6900"])}},skins:{comparer:$.returnFalse,preSaveProcessing:function(b){$.each(b,function(c,d){$.each(d,function(h,j){if(j){var g=c+h;var k=StylesManager.getStyle(g);if(k){var f=StylesManager.getStyleInformation(g);$.each(j,function(l,i){if(i){$.each(i,function(n,m){if(m){m.fieldsToValues=f.fields;m.statesAnimations=f.statesAnimations}})}})}}})});return b},defaultValue:function(){var b={};b[ElementsTypes.skinImageElement.name]=$.createArrayWithValue(null,4);return b}},contentWidth:{isStateProperty:true,defaultValue:function(){return Global.IsMobile?300:960},onChange:function(d,f,g,c){var b=this;if(f!==null){Global.PageContentWidthChanged.fire()}}},columnsGrid:{isStateProperty:true,defaultValue:function(){return{margin:10,gutter:20,columnsNumber:12,color:"#92C348",showAlways:false,isEnabled:false,opacity:20}},onChange:function(b,c){if(c.isEnabled===undefined){this.properties.columnsGrid.value.isEnabled=true;this.properties.columnsGrid.value.showAlways=false}}},innerRowsSpacing:{isStateProperty:true,defaultValue:function(){return 5},onChange:function(c,d){var b=this.data.innerRowsSpacing;if(!b){b=$.rule(".{0} .row-element.desc-row {}".format(EditorManager.MobileDesktopViewClass));this.data.innerRowsSpacing=b}b.css({"margin-bottom":"{0}px".format(d)})}},rowsSpacing:{isStateProperty:true,defaultValue:function(){return 5},onChange:function(b,d){var c=this.data.rowCssRule;if(!c){c=$.rule(".{0} .row-element.root-row {}".format(EditorManager.MobileDesktopViewClass));this.data.rowCssRule=c}c.css({"margin-bottom":"{0}px".format(d)})}},cellsSpacing:{isStateProperty:true,defaultValue:function(){return 2},onChange:function(c,d){var b=this.data.cellCssRule;if(!b){b=$.rule(".{0} .design-element .cell-element {}".format(EditorManager.MobileDesktopViewClass));this.data.cellCssRule=b}b.css({"margin-right":"{0}%".format(d)})}},sectionPadding:{isStateProperty:true,defaultValue:function(){return 0},onChange:a},sectionVerticalPadding:{isStateProperty:true,defaultValue:function(){return 0},onChange:a},pagePadding:{isStateProperty:true,defaultValue:function(){return 20},onChange:function(b,c){var d=this.data.paddingCssRule;if(!d){d=$.rule(".{0} .page-element-border-box {}".format(EditorManager.MobileDesktopViewClass));this.data.paddingCssRule=d}d.css({padding:"0px {0}px".format(c)})}},innerRowPadding:{isStateProperty:true,defaultValue:function(){return 5},onChange:function(b,d){var c=this.data.innerRowPadding;if(!c){c=$.rule(".{0} .row-element .cell-element-container {}".format(EditorManager.MobileDesktopViewClass));this.data.innerRowPadding=c}c.css({padding:"{0}px".format(d)})}},cellsVerticalAlignment:{isStateProperty:true,defaultValue:function(){return CssVerticalAlignment.Middle},onChange:function(b,d){var c=this.data.cellsVerticalAlignment;if(!c){c=$.rule(".{0} .design-element .cell-element {}".format(EditorManager.MobileDesktopViewClass));this.data.cellsVerticalAlignment=c}c.css({"vertical-align":"{0}".format(d)})}},cellsHorizontalAlignment:{isStateProperty:true,defaultValue:function(){return CssHorizontalAlignment.Center},onChange:function(c,d){var b=this.data.cellsHorizontalAlignment;if(!b){b=$.rule(".{0} .design-element .cell-element {}".format(EditorManager.MobileDesktopViewClass));this.data.cellsHorizontalAlignment=b}b.css({"text-align":"{0}".format(d)})}},isSiteWasEditedInMode:{isStateProperty:true,defaultValue:$.returnFalse},listsData:{notForUndoProperty:true,defaultValue:$.returnEmptyObject},freeVideoElements:{notForUndoProperty:true,defaultValue:$.returnUndefined}},methods:{getSkin:function(c){var b=c.skinName;var f=c.index;var g=$.valueOrDefault(c.skinNameVariationType,SkinsBindingsTypesNames.Default);var h=$.valueOrDefault(c.device,SkinsBindingsDevices.Desktop);var d=$.objectGet(this.getPropertyValue("skins"),[b,f,g,h]);if(!d&&h===SkinsBindingsDevices.Mobile){d=$.objectGet(this.getPropertyValue("skins"),[b,f,g,SkinsBindingsDevices.Desktop])}return d},updateSkin:function(h,d){d=$.extend({type:undefined,skinName:undefined,skinNameVariationType:SkinsBindingsTypesNames.Default,device:SkinsBindingsDevices.Desktop,index:0},d);var b=d.skinName;var c=d.index;var f=d.skinNameVariationType;var g=d.device;var i=this.getPropertyValue("skins");i=$.objectSetAndClone(i,[b,c,f,g],h);this.setPropertyValue("skins",i);SkinsManager.Events.SkinHierarchyUpdated.fire(b+c)}},initialize:function(){}}});function a(){var d=this;var f=Math.max(0,d.getPropertyValue("sectionPadding"));var c=Math.max(0,d.getPropertyValue("sectionVerticalPadding"));var b=d.data.sectionPaddingCssRule;if(!b){b=$.rule(".{0} .content-container.content-container-type.element-size-box.section-element-size-box {}".format(EditorManager.MobileDesktopViewClass));d.data.sectionPaddingCssRule=b}b.css({padding:"{0}px {1}px".format(c,f)})}})();(function(){ElementsModel.registerDefinition(ElementsTypes,{EditorCoordinator:{properties:{},methods:{},initialize:function(){}}})})();(function(){var o={Element:{useTemplate:function(){var p=new StringBuilder();p.append('<div class="rich-text-element-content absolute-fill" style="background: none;">');p.append('<div class="rich-text-positioning-wrapper">');p.append('<div class="rich-text-content"></div>');if(Global.IsDesigner){p.append('<div class="rich-text-content-overlay stretched-to-fill fully-transparent"></div>')}p.append("</div>");p.append("</div>");return $(p.toString())}}};var j="Write your text here, you can fully customize it like in your word editor. try to change the font, color, and other properties from the style panel.";ElementsModel.registerDefinition(ElementsTypes,{freeText:{category:ElementsTypesCategories.Content,iconClass:"sprite-icon sprite-element-text",title:"Text",getExtensions:function(p){var q={textContentHeight:ObservableObject.createNumerical(undefined),textContentWidth:ObservableObject.createNumerical(undefined)};if(Global.IsDesigner){q.fontLoadingOverlay=DeferredObject.create(function(){var r=new StringBuilder();r.append('<div class="rich-text-progress-overlay stretched-to-fill">');r.append('<div class="rich-text-progress-overlay-background stretched-to-fill"></div>');r.append('<div class="rich-text-progress-overlay-animation stretched-to-fill"></div>');r.append("</div>");return $(r.toString())})}return q},properties:{formattedText:{isNotForCustomProperty:true,isContentProperty:true,defaultValue:function(){return j},supportsBinding:true,isBound:function(p){var q=this;return q.getBindingType(p)!==undefined},getBindingType:function(p){var q;if(p.isBound(DataSourceItemsFields.title.getContentType())){q=DataSourceItemsFields.title.getContentType()}else{if(p.isBound(DataSourceItemsFields.description.getContentType())){q=DataSourceItemsFields.description.getContentType()}}return q},onChange:m},verticalAlignment:{isStateProperty:true,defaultValue:function(){return VerticalAlignment.Top},onChange:function(p,q){this.data.positioningClass.set(l(q));this.data.isVerticallyCentered=(q===VerticalAlignment.Centered);if(q!==VerticalAlignment.Centered){this.data.$positioningWrapper.css("margin-top","")}else{n(this)}}}},defaultProperties:{backgroundColor:function(){return"transparent"},fontColor:function(){return"Black"},fontSize:function(){return 12},horizontalAlign:function(){return HorizontalAlignment.Left},sizeAndPosition:function(){return{width:200,height:160,top:0,left:0}}},features:[Features.DesignElement,Features.HasResponsiveItem,Features.Resizable,Features.Clickable,Features.Selectable,Features.HasBackground,Features.HasBackgroundImage,Features.Hideable,Features.HasLayout,Features.Editable,Features.HasBorder,Features.HasPadding,Features.HasContent,Features.ExpressMode,Features.HasText,Features.Rotatable],initialize:d,methods:{creationFunction:a,startEditingOnClick:$.returnTrue,editingEnabled:function(){var p=this;return(MobileVersionViewManager.Flags.IsInMobileContext.isFalse()&&!p.isConnectedToField())},hasHorizontalAlign:$.returnTrue,getScrollable:function(){return this.data.$richTextElementContent},getTextElements:function(){return this.data.$richTextElementContent},getRichTextEditor:function(){return this.data.rte},getTextContentElement:function(){return this.data.$richTextContent},getElementDataContent:function(){return this.data.$richTextContent},hasBinding:function(){var p=this;return p.getBindingType()!==undefined},getBindingType:function(){var p=this;return PropertiesTypes.formattedText.getBindingType(p)},calculateNormalizedSize:function(t){var q=this;var p=q.data.$richTextContent;var u=$("<div style='width:100000px; position:absolute; left: 0; top: 0;'></div>");var r=p.clone().css({position:"absolute",width:$.valueOrDefault(t,"auto")}).quickShow().appendTo(u);u.appendTo(p.parent());var s=r.elementSize();u.remove();return s},findUsedTextStyles:function(){var r=this;var q=r.data.$richTextContent;var p=$.makeDictionaryFromKeys($.map(q.findUsedClasses(TextStyleManager.TextStyleClassNames),function(t){return TextStyleManager.getTextStyleFromClass(t)}),true);var s=r.getPropertyValue("namedTextStyle");if(s){p[s]=true}return $.getKeys(p)},findUsedFonts:function(){var r=this;var q=r.data.$richTextContent;var p=$.map(q.findUsedInlineStyles("font-family"),function(w){return $.parseFontFamilyFromStyleValue(w)});var v=r.findUsedTextStyles();var u=$.map(v,function(x){var y=TextStyleManager.getTextStyleInformation(x);if(y){var w=ThemeFontsManager.evaluateFontBinding(y.fontFamily);if(w){return w.toLowerCase()}}return undefined});var t=$.map(q.findUsedClasses(ThemeFontsManager.FontFamilyClassNames.get()),function(x){var w=ThemeFontsManager.evaluateFontBinding(ThemeFontsManager.getFontBindingFromClass(x));if(w){return w.toLowerCase()}return undefined});var s=$.merge(p,$.merge(u,t));s.push(ThemeFontsManager.evaluateFontBinding(r.getPropertyValue("calculatedFontFamily")));return $.getKeys($.makeDictionaryFromKeys(s,true))},normalizeSize:function(p){p=$.extend({widthPadding:0,heightPadding:0,targetWidth:undefined},p);var q=this.calculateNormalizedSize(p.targetWidth);this.data.disableElementSizeUpdate=true;ElementsLayoutHelper.setInstancesSize(this,{width:Math.ceil(q.width)+p.widthPadding,height:Math.ceil(q.height)+p.heightPadding});this.setLastResizingSize();this.data.disableElementSizeUpdate=false},getForeGroundPropertyName:function(){return"fontColor"},updateElementSize:function(q){var p=this;if(p.propertiesRefreshingState&&(ViewManager.isViewMode())&&!MobileVersionViewManager.updateBatch.isActive()){return}LayoutManager.layoutUpdateBatch.performInstanceOperation(function(){var r=p.textContentHeight.getValue();if(r!==undefined){p.whenInstanceContentHeightChanged(r,{lastElementSizeIsTheMinSize:MobileVersionViewManager.Flags.IsInMobileContext.isTrue(),onlyGrow:q})}},p,"updateElementSize")}},aggregatedMethods:{aggregations:{updateInstanceToViewPort:function(){var p=this;LayoutManager.layoutUpdateBatch.performOperation(function(){if(!p.isBoundToProperty("formattedText")){PropertiesManager.invalidateProperty(p,"formattedText")}p.updateElementSize()})},removeInstanceFromViewPort:function(){var p=this;if(!p.isBoundToProperty("formattedText")){LayoutManager.layoutUpdateBatch.performOperation(function(){PropertiesManager.invalidateProperty(p,"formattedText");p.updateElementSize()})}},onStartEditing:function(){b(this)},onFinishEditing:function(p){h(this);$.clearFocus()},switchToPreview:function(){if(Global.IsDesigner){this.data.showContentOverlay.setFalse("Preview")}},switchToDesign:function(){this.data.showContentOverlay.setTrue("Preview")},createBindingFieldsToProperties:function(q){var p=this;if(p.isBound(DataSourceItemsFields.title.getContentType())||p.isBound(DataSourceItemsFields.description.getContentType())){q[PropertiesTypes.formattedText.name]=ObservableObject.createPropertyBinding(p,{propertyName:PropertiesTypes.formattedText.name})}return q},onContentTypeChanged:function(q,r){var p=this;c(p,r)},onBoundValueReady:function(r){var p=this;var s=PropertiesTypes.formattedText.getBindingType(p);if(s!==undefined){var q=p.getBindingFields(s);c(p,q,r[s])}},onPropertiesChanged:function(q){var p=this;var r=["fontSize","textStyle","letterSpacing","lineHeight","formattedText"];var s=["font","namedTextStyle"];if(p.isInitialized){if($.containsOneOfKeys(q,r)){k(p)}if($.containsOneOfKeys(q,s)){FontDetect.onFontLoaded(ThemeFontsManager.evaluateFontBinding(p.getPropertyValue("calculatedFontFamily")),{finishCallback:function(){k(p)},timeout:15000})}}},adjustResizing:function(){var r=this;var s=PositionManager.getElementSize(r);var w=s.height;var v=r.getPropertyValue("padding");var t=r.getPropertyValue("borderWidth");var q=r.textContentHeight.getValue();var p=q+v.top+v.bottom+t.top+t.bottom;var u=Math.max(w,p);if(u!==w){ElementsLayoutHelper.setInstancesSize(r,{height:u},{preserveVerticalMargins:true})}}}},onInstanceInitialized:function(){var s=this;var r=s.textContentHeight.createValueListener(function(){n(s)});var t=s.textContentHeight.createValueListener(function(u,v){});var q=SimpleEvent.createEventListener(s.contentSizeChangedEvent,function(){k(s)});var p=s.visibilityChangedEvent.bindAndExecute(function(){var u=PositionManager.isElementVisible(s);if(u){LayoutManager.layoutUpdateBatch.performInstanceOperation(function(){u=PositionManager.isElementVisible(s);if(u){r.toggleActivation(u,true);t.toggleActivation(u,true);q.activateAndExecute()}},s,"visibilityEventBindingRichTextNew");i(s)}else{q.deactivate()}});if(Global.IsDesigner){s.data.$richTextContent.on("click","a",function(v){if(ViewManager.isViewMode()){if($(this).attr("target")!=="_blank"&&!$(this).is(".internal-link")){var u=$(this).attr("href");ConfirmationDialog.open({buttons:ConfirmationPanel.YesNoButtons,buttonsOptions:[{type:ConfirmationButtonsTypes.Yes,href:u}],header:"Open Link",confirmationMessage:'The editor is preventing you from opening a link to "{0}"<br/> Do you want to open the link in a new window?'.format(u)});v.preventDefault();return true}}})}s.instanceRemoving.one(function(){p.unbind();r.deactivate();t.deactivate();q.deactivate();if(Global.IsDesigner){s.data.$richTextContent.off()}})}}});function c(p,q,r){var s=$.valueOrDefaultArray(r,[q&&q.title,"Default Text"]);p.setBindingValueToProperty(s.toString(),PropertiesTypes.formattedText.name)}function d(){var p=this;p.hasHorizontalAlignFlag.setTrue();if(p.isInDesignMode()){p.data.rte=TextEditorsGroups.Default.addEditableElement(p.data.$richTextContent)}if(Global.IsDesigner){PageManager.AllPagesInformation.itemsUpdatedEvent.bindUntil(p.instanceRemoving,function(){var q=p.getPropertyValue("formattedText");RichTextProcessor.startProcessing(q).processLinks().finish().ifContentChanged(function(r){p.data.$richTextContent.html(r)})})}}function a(q){var s=$.useTemplate(o.Element);q.data.$richTextElementContent=s;q.data.$richTextContent=$(".rich-text-content",s);var r=$(".rich-text-positioning-wrapper",s);q.data.positioningClass=ContextValue.createContextClass(r);q.data.$positioningWrapper=r;if(Global.IsDesigner){var p=$(".rich-text-content-overlay",s);q.data.showContentOverlay=ObservableFlag.createConditionalPositive({valueChangeCallback:function(t){p.quickToggle(t)}})}return s}function n(q){var p=q.textContentHeight.getValue();if(q.data.isVerticallyCentered&&p!==undefined){LayoutManager.DomReadBatch.whenFinished(function(){q.data.$positioningWrapper.css("margin-top",-p/2)})}}function h(p){g(p);var q=p.data.contentChangedBinding;if(q){q.unbind()}p.data.rte.deactivate();Panels.RichTextPanel.requestDeactivation();if(ModeManager.inMode(Modes.ExpressMode)){SelectionManager.unselectAll()}p.data.showContentOverlay.setTrue("Editing")}function b(p){if(p.data.$richTextContent.html()===""){p.data.$richTextContent.html(" ")}p.data.rte.activate({getDefaultStyle:function(q){switch(q){case CKEditorStyleProperties.TextStyle:return p.getPropertyValue("namedTextStyle");case CKEditorStyleProperties.LineHeight:return p.getPropertyValue("lineHeight").percentages;default:return undefined}},ckConfig:{scrollingParent:function(){return DesignerManager.getDesignerFrame()}}});p.data.contentChangedBinding=p.data.rte.useEditorController().contentChangedEvent.bind(function(){k(p)});Panels.RichTextPanel.openWindow({positioningFunction:PositioningFunctions.buildPositioningFunction(EditorPositioningArea.Editor).allRelativeTo(p.$element).alignHorizontally(Side.Center,Side.Center).alignVertically(Side.Bottom,Side.Top,{distance:15,mirrorOnOverflow:true})});p.data.showContentOverlay.setFalse("Editing")}function g(p){p.setPropertyValue("formattedText",p.data.rte.useEditorController().getData())}function m(q,r){var p=this;r=RichTextProcessor.startProcessing(r).processLinks().finish().getProcessedContent();var s=p.data.$richTextContent;s.html(r)}function l(p){switch(p){case VerticalAlignment.Bottom:return"vertical-alignment-bottom";case VerticalAlignment.Centered:return"vertical-alignment-center";default:return"vertical-alignment-top"}}function k(p){if(p.isInitialized&&PositionManager.isElementVisible(p)){MobileVersionViewManager.updateBatch.performInstanceOperation(function(){LayoutManager.layoutUpdateBatch.performInstanceOperation(function(){LayoutManager.DomReadBatch.start();var s=p.data.$richTextContent.outerSize();var r=p.textContentHeight.getValue();var q=p.textContentHeight.getValue();p.textContentHeight.setValue(s.height);p.textContentWidth.setValue(s.width);if(q!==s.height||q>p.getSize().height){p.updateElementSize(q===undefined)}OperationsBatch.whenAllFinished([PropertiesManager.PropertiesChangesNotifyingBatch,LayoutManager.layoutUpdateBatch,ElementInstance.InstancesInitializationBatch],function(){LayoutManager.DomReadBatch.finish()})},p,"refreshTextContentSize")},p,"refreshTextContentSize")}}function f(p,q){if(q){p.fontLoadingOverlay.get().appendTo(p.$element)}else{p.fontLoadingOverlay.get().detach()}}function i(p){$.each(p.findUsedFonts(),function(r,q){if(!FontDetect.isFontLoaded(q)){FontDetect.onFontLoaded(q,{successCallback:function(){k(p)},timeout:15000})}})}})();(function(){ElementsModel.registerDefinition(ElementsTypes,{date:{getExtensions:function(b){return{dateValueObject:ObservableObject.createPropertyBinding(b,{propertyName:PropertiesTypes.formattedText.name})}},category:ElementsTypesCategories.Content,iconClass:"sprite-icon sprite-element-text",title:"Date",properties:{dateFormat:{isStateProperty:true,defaultValue:function(){return DateFormats[0].format},onChange:a},dateSeparator:{isStateProperty:true,defaultValue:function(){return DateSeparators[0].value},onChange:a},dateMillis:{isStateProperty:true,defaultValue:function(){return Date.now()},isBound:function(b){var c=this;return c.getBindingType(b)!==undefined},getBindingType:function(b){var c;if(b.isBound(DataSourceItemsFields.date.getContentType())){c=DataSourceItemsFields.date.getContentType()}return c},onChange:a}},ancestorElementType:ElementsTypes.freeText,methods:{hasBinding:function(){var b=this;return b.getBindingType()!==undefined},getBindingType:function(){var b=this;return PropertiesTypes.dateMillis.getBindingType(b)}},aggregatedMethods:{aggregations:{createBindingFieldsToProperties:function(c){var b=this;var d=DataSourceItemsFields.date.getContentType();if(this.isBound(d)){c[PropertiesTypes.dateMillis.name]=ObservableObject.createPropertyBinding(b,{propertyName:PropertiesTypes.dateMillis.name})}return c},onContentTypeChanged:function(){var b=this;b.setPropertyValue(PropertiesTypes.dateMillis.name,Date.now())},onBoundValueReady:function(c){var b=this;var d=b.getBindingType();if(d!==undefined){b.setBindingValueToProperty(DateUtils.getDateStringMillis(c[d]),PropertiesTypes.dateMillis.name)}}}}}});function a(){var c=this;var d={dateMillis:c.getPropertyValue(PropertiesTypes.dateMillis.name),dateSeparator:c.getPropertyValue(PropertiesTypes.dateSeparator.name),dateFormat:c.getPropertyValue(PropertiesTypes.dateFormat.name)};var b=d.dateFormat.replace(/-/g,d.dateSeparator);c.dateValueObject.setValue(DateUtils.formatDateMillis(d.dateMillis,b))}})();(function(){var d={Element:{group:"page-element-templates",name:"page-element-template"}};Global.PageHeightChanged=SimpleEvent.create();Global.PageContentWidthChanged=SimpleEvent.create();ElementsModel.registerDefinition(ElementsTypes,{page:{className:"page-element",displayInToolbox:false,icon:"/images/icons/elements/container.png",iconClass:"sprite-icon sprite-element-page",title:"Page",description:"Page",features:[Features.Resizable,Features.DesignElement,Features.HasContent,Features.Selectable,Features.ItemsContainer,Features.HasChildrenLayoutAnchor,Features.HasBackground,Features.HasBackgroundImage,Features.RootElement,Features.HasBorder],getExtensions:function(j){return{firstSectionInstance:ObservableObject.create(undefined,{equalityComparer:$.defaultIdComparer}),lastSectionInstance:ObservableObject.create(undefined,{equalityComparer:$.defaultIdComparer}),firstContentSectionInstance:ObservableObject.create(undefined,{equalityComparer:$.defaultIdComparer}),lastContentSectionInstance:ObservableObject.create(undefined,{equalityComparer:$.defaultIdComparer}),firstSectionContextClass:ContextValue.createSingleTargetClass("first-section"),lastSectionContextClass:ContextValue.createSingleTargetClass("last-section"),firstContentSectionContextClass:ContextValue.createSingleTargetClass("first-content-section"),lastContentSectionContextClass:ContextValue.createSingleTargetClass("last-content-section"),contentSectionsCount:ObservableObject.create(),sectionsCount:ObservableObject.create(),pageContentInstancesCount:ObservableObject.create(),pageContentInstances:{},isFixedBackground:ObservableFlag.create(false,{valueChangeCallback:function(l){var k=$.unite(j.useImageLayer(),j.$elementBackgroundLayer);k.toggleClass("fixed-page-background",l);if(!l){k.css({width:"",height:"",top:"",left:"","margin-left":""});k.removeClass("fixed-to-top fixed-to-bottom fixed-to-center")}}})}},defaultProperties:{padding:function(){return $.convertValueToObject(0,["top","left","bottom","right"])},backgroundColor:function(){return"white"},sizeAndPosition:function(){return{width:null,height:Global.IsMobile?480:1068,top:null,left:null}},childrenAnchor:function(){return HorizontalAlignment.Centered}},properties:{gridLines:{defaultValue:function(){return[]}},fixedBackground:{defaultValue:$.returnFalse,isStateProperty:true,title:"Fixed Background",onChange:function(j,k){if((!$.browser.msie||parseInt($.browser.version)>8)){this.isFixedBackground.setValue(k)}}},statesGroups:{title:"States Groups",category:PropertiesCategories.Other,defaultValue:$.returnNull,onChange:function(){var k=this.getPropertyValue("statesGroups");if(k&&k!==null){var m=PageManager.getCoordinator();var j=m.getPropertyValue("siteStatesGroups");var l=$.extend({},k,j);m.setPropertyValue("siteStatesGroups",l)}}}},calculatedProperties:["pageTitle"],methods:{hasHeight:function(){return false},canBeSelected:$.returnFalse,getMaxSize:function(){return{height:Infinity,width:Infinity}},isRelativePositioned:function(){return true},getHandlePosition:function(){return PositionManager.getElementArea(this).bottom-this.getFooterInstanceHeight()-this.getPropertyValue("borderWidth").bottom},forceImageBoxCreation:$.returnTrue,autoCalculateBackgroundViewPort:$.returnFalse,getImageLayerTemplate:function(){return $('<div class="element-background-image"></div>')},refreshPageMetaData:function(){var j=this;h(j);g(j);i(j);b(j)},getPaddingBox:function(){return this.$paddingBox},getContentArea:function(){var k=PageManager.getContentWidth();var m=Global.OffsetAncestor.offset();var j=PageManager.getPageBodyHeight();var n={top:m.top,left:m.left-k/2};var l={width:k,height:j};return $.getArea(n,l)},attachPage:function(){var j=this;if(!j.$container){var k=PageManager.getPagesRoot();j.$element.appendTo(k);j.$container=k;PositionManager.visibilityTreeAttach(j);j.parentInstance=null;j.$parent=null;j.instanceAttachedEvent.fire()}},getContainmentArea:function(){return{left:null,top:null,width:null,height:null}},isArrangeable:function(){return false},canDuplicate:function(){return false},reorderChildElements:function(){var l=this;if(this.hasOrder.getValue()){var r=$([]);var p=$([]);var m=this.getChildInstances();var o=this.getPageContentInstancesMap();var j={};$.each(o,function(t,s){j[s.id]=$([])});for(var n=0;n<m.length;n++){var q=m[n];if(PositionManager.isElementVisible(q)){if(!q.hasFeature(Features.PageSection)){r.pushElements(q.$element)}else{if(q.elementType===ElementsTypes.SectionElement){var k=q.getPageContentInstance();j[k.id].pushElements(q.$element)}}}}r.applyDOMOrder();$.each(o,function(t,s){j[s.id].applyDOMOrder()});PositionManager.updatePosition(m,{updateSize:false})}},selectBeforeChildren:$.returnFalse,handleImageBoxBorderWidthChange:function(){var j=this;var m=j.data.imageBox;var k=j.getActualPropertyValue("borderWidth");var l={left:0,top:0,right:0,bottom:0};if(j.getPropertyValue("fixedBackground")){m.setBorderWidth(l)}else{if(!k){k=l}m.setBorderWidth(k)}},addChildElement:function(l,m){var j=this;var k=l.addElementToPage(j);l.onAttached();return k},markSelection:function(){ViewManager.getBodyElement().addClass("state-selected")},unMarkSelection:function(){ViewManager.getBodyElement().removeClass("state-selected")},editingEnabled:function(){return false},getFooterInstanceHeight:function(){var j=this.getFooterInstance();if(j&&PositionManager.isElementVisible(j)){return j.getActualPropertyValue("sizeAndPosition").height}return 0},getHeaderInstanceHeight:function(){var j=this.getHeaderInstance();if(j&&PositionManager.isElementVisible(j)){return j.getActualPropertyValue("sizeAndPosition").height}return 0},getFooterInstance:function(){return this.data.footerInstance},getHeaderInstance:function(){return this.data.headerInstance},setFooterInstance:function(j){this.data.footerInstance=j},setHeaderInstance:function(j){this.data.headerInstance=j},getPageContentInstancesMap:function(){return this.pageContentInstances},getPageContentInstances:function(){return $.getValues(this.pageContentInstances)},addPageContentInstance:function(j){this.pageContentInstances[j.id]=j},removePageContentInstance:function(j){delete this.pageContentInstances[j.id]},creationFunction:function(j){var k=$.useTemplate(d.Element);j.data.pageContentContainer=k;j.data.$footerSection=$(".footer-section",j.$element);j.data.$headerSection=$(".header-section",j.$element);return k}},aggregatedMethods:{aggregations:{isDroppable:$.returnFalse,getAutoLayoutProperties:function(){return{left:true,top:true,width:true}},getCalculatedPropertyValue:function(k,j,l){switch(k){case"pageTitle":return PageManager.AllPagesInformation.getItem(this.id).pageTitle}return l},setCalculatedPropertyValue:function(j,l,k,m){switch(j){case"pageTitle":PageManager.AllPagesInformation.updateItem(this.id,{pageTitle:l});break}},canDelete:$.returnFalse,onChildElementRemoved:function(k){var j=this;k.classesManager.set({"is-page-child":false,"positioned-fixed":false})},onChildElementAdded:function(k,l){var j=this;k.classesManager.set({"is-page-child":true});if(k.hasFeature(Features.PageSection)){PropertiesManager.invalidateProperty(j,"sizeAndPosition",undefined,j.getPropertyValue("sizeAndPosition"))}},canRedropTo:function(){return false},onPropertyChange:function(l,k,j){switch(l.name){case"backgroundColor":a(this.$element,k);break}},switchToPreview:function(){var j=this;this.data.isLoaded=false},switchToDesign:function(){this.data.isLoaded=false}}},initialize:function(){var j=this;j.isVisible=false;j.canMove.setValue(false);var k=PageManager.getContentWidth();c(j)},supportedStates:[ElementStates.BeforeLoadedState,ElementStates.BeforeOpenedState]}});function c(k){var n=$.unite(k.useImageLayer(),k.$elementBackgroundLayer);var m=!!$.support.backgroundSize;if(m){n.addClass("fixed-attachment-background")}else{n.addClass("sticky-background")}k.data.fixedBackgroundTargetsClass=ContextValue.createContextClass({getTarget:function(){return n}});k.sizeChangedEvent.bind(function(){if(k.isFixedBackground.isTrue()){l()}else{k.setImageBoxViewport(k.getSize())}});var p=SimpleEvent.createEventListener([SiteViewportManager.ViewPortChanged],function(){PropertiesManager.PropertiesChangesNotifyingBatch.performOperation(function(){if(m){k.setImageBoxViewport($.getWindowSize(),true)}else{var q=SiteViewportManager.getViewPort();k.setImageBoxViewport(q,true)}l();o()})});if(Global.IsDesigner&&!Global.IsMobile){PositionManager.Events.PositionRootInvalidated.bind(function(){if(l()){o()}})}k.isFixedBackground.valueChangedEvent.bindAndExecute(function(){if(k.isFixedBackground.isTrue()){p.activateAndExecute()}else{p.deactivate();k.setImageBoxViewport(k.getSize())}});function o(){j()}function j(){if(k.getPropertyValue("fixedBackground")){k.getImageBox().toggleForceBackgroundImage(SiteViewportManager.IsFullScreen.isFalse());var q=SiteViewportManager.getViewPort();if(SiteViewportManager.IsFullScreen.isTrue()){n.css({width:q.width,height:"100%",top:q.top,left:q.left,"margin-left":""})}else{if(m){n.css({width:"",height:"",top:0,left:0,"margin-left":""})}else{var r=k.data.fixedBackgroundTargetsClass.get()==="fixed-to-center";if(MobileVersionViewManager.Flags.IsActivated.isTrue()&&Global.IsDesigner){q.width=DesignerManager.ResponsiveViewPort.getValue()}n.css({width:q.width,height:q.height,top:"",left:"","margin-left":0-q.width/2+(r?(DesignerManager.getDesignerAreaCoordinates().left/2):0)})}}}else{n.css({width:"",height:"",top:"",left:"","margin-left":""})}}function l(){if(SiteViewportManager.IsFullScreen.isTrue()){return false}if(k.isFixedBackground.isFalse()){return false}var u=SiteViewportManager.getViewPort();var s=PositionManager.getElementArea(k,true);if(!s){return}var q=s.top-u.top;var t=u.height-(q+s.height);var r=k.data.fixedBackgroundTargetsClass;if(q>0){return r.set("fixed-to-top")}else{if(t>0){return r.set("fixed-to-bottom")}else{return r.set("fixed-to-center")}}}}function h(j){if(j===PageManager.getCurrentPage()){var k=PageManager.AllPagesInformation.getItem(j.id);if(!ListsManager.isListPage(k)){$.setDocumentTitle(k.pageTitle||k.title)}else{$.setDocumentTitle(ListsManager.getListPageTitle(k))}}}function g(j){if(j===PageManager.getCurrentPage()){var k=PageManager.AllPagesInformation.getItem(j.id).description;$("#meta-description").attr("content",k)}}function i(j){if(j===PageManager.getCurrentPage()){var k=PageManager.AllPagesInformation.getItem(j.id).keyWords;$("#meta-keywords").attr("content",k)}}var f;function b(j){if(j===PageManager.getCurrentPage()){var l=SiteManager.getSiteSettings();var k=PageManager.AllPagesInformation.getItem(j.id).metaTags;if(f){$(f).remove()}f=$.addHtmlCodeToTheHead(k)}}function a(j,k){}})();(function(){ElementsModel.registerDefinition(ElementsTypes,{line:{category:ElementsTypesCategories.Containers,icon:"/images/icons/elements/container.png",iconClass:"sprite-icon sprite-element-vertical-line",title:"Line",description:"No Description",features:[Features.DesignElement,Features.HasResponsiveItem,Features.HasPadding,Features.HasContent,Features.Resizable,Features.Selectable,Features.HasLayout,Features.Hideable,Features.HasOutline,Features.Clickable],properties:{orientation:{title:"Orientation",category:PropertiesCategories.Line,isStateProperty:true,defaultValue:function(){return Orientation.Horizontal},onChange:function(d,f){this.data.$line.toggleClass("vertical",f===Orientation.Vertical).toggleClass("horizontal",f===Orientation.Horizontal);this.data.$line.clearCentering();c(this,this.getPropertyValue("lineWidth"))}}},methods:{getShadowTarget:function(){return this.data.$line},creationFunction:function(f){var d=$("<div class='line-element-line'></div>");f.data.$line=d;return d}},aggregatedMethods:{aggregations:{shouldBeHiddenInMode:function(){if(this.getPropertyValue("orientation")===Orientation.Vertical){return true}return false},onPropertyChange:function(g,f,d){switch(g.name){case"lineWidth":c(this,f);break;case"lineColor":a(this,f);break;case"lineStyle":b(this,f);break}}}}}});function c(f,d){var h=Math.max(1,d);var g=f.getPropertyValue("orientation");f.data.$line.css({"border-bottom-width":g===Orientation.Horizontal?h+"px":"","border-left-width":g===Orientation.Vertical?h+"px":""});f.data.$line.makeCentered({horizontally:g===Orientation.Vertical,vertically:g===Orientation.Horizontal,preComputedSize:{width:h,height:h},skipPositionCheck:true})}function a(d,f){f=ThemeColorsManager.evaluateColorBinding(f,true);d.data.$line.css({"border-bottom-color":f,"border-left-color":f})}function b(f,d){f.data.$line.css({"border-bottom-style":d,"border-left-style":d})}})();(function(){var a;if($.support.borderRadius){var d=document.createElement("div");d.style.cssText="-webkit-border-radius: 50%;-moz-border-radius: 50%;border-radius: 50%;-ms-border-radius:50%;";a=(d.style.cssText!="")}else{a=false}ElementsModel.registerDefinition(ElementsTypes,{Ellipse:{category:ElementsTypesCategories.Shapes,iconClass:"sprite-icon sprite-element-ellipse",title:"Ellipse",description:"No Description",features:[Features.DesignElement,Features.HasResponsiveItem,Features.HasPadding,Features.HasContent,Features.Resizable,Features.Selectable,Features.HasLayout,Features.Hideable,Features.HasOutline,Features.HasBackground,Features.Clickable,Features.Shape],methods:{createShape:function(f){return f.addEllipse()},creationFunction:function(f){if(a){return undefined}return f.createContent()}},aggregatedMethods:{aggregations:{shouldBeHiddenInMode:function(){return true},onPropertyChange:function(h,g,f,i){switch(h.name){case"lineWidth":c(this,g);break;case"lineColor":b(this,g);break}}}},initialize:function(){var f=this;if(a){f.getBorderBox().addClass("border-radius-ellipse");f.getBackgroundTarget().addClass("border-radius-ellipse")}else{f.getBorderBox().addClass("canvas-ellipse")}}}});function c(g,f){var h=Math.max(0,f);if(a){g.getBorderTarget().css({"border-top-width":h+"px","border-left-width":h+"px","border-bottom-width":h+"px","border-right-width":h+"px"})}LayoutManager.refreshElementsLayout(g)}function b(f,g){if(a){g=ThemeColorsManager.evaluateColorBinding(g);f.getBorderBox().css("border-color",g)}}})();(function(){ElementsModel.registerDefinition(ElementsTypes,{Triangle:{category:ElementsTypesCategories.Shapes,iconClass:"sprite-icon sprite-element-triangle",title:"Triangle",description:"No Description",features:[Features.DesignElement,Features.HasResponsiveItem,Features.HasPadding,Features.HasContent,Features.Resizable,Features.Rotatable,Features.Selectable,Features.HasLayout,Features.Hideable,Features.HasOutline,Features.HasBackground,Features.Clickable,Features.Shape],properties:{shapeAngle:{title:"Angle",isStyleProperty:false,isStateProperty:true,supportsStatesTransitionAnimation:false,defaultValue:function(){return 0},onChange:function(a,b,d,c){this.getShape().setPropertyValue("angle",b)}}},methods:{creationFunction:function(a){return a.createContent()},createShape:function(a){return a.addTriangle()}},aggregatedMethods:{aggregations:{shouldBeHiddenInMode:function(){return true}}}}})})();(function(){ElementsModel.registerDefinition(ElementsTypes,{Rectangle:{iconClass:"sprite-icon sprite-element-rectangle",title:"Rectangle",description:"No Description",features:[Features.DesignElement,Features.HasResponsiveItem,Features.Resizable,Features.Selectable,Features.HasBackground,Features.HasBackgroundImage,Features.HasLayout,Features.Clickable,Features.Hideable,Features.HasBorder,Features.Rotatable],methods:{creationFunction:function(){return $("<div></div>").addClass("absolute-fill")}},aggregatedMethods:{aggregations:{shouldBeHiddenInMode:function(){return true}}}}})})();(function(){ElementsModel.registerDefinition(ElementsTypes,{group:{getExtensions:function(b){return{autoAdjustSize:ObservableFlag.createConditionalPositive(),ignoreGroupUpdate:ObservableFlag.createConditionalNegative(),groupDisabled:ObservableFlag.createConditionalNegative(),groupUpdateBatch:OperationsBatch.create({batchFinishCallback:function(){a(b)}})}},category:ElementsTypesCategories.Containers,icon:"/images/icons/elements/container.png",iconClass:"sprite-icon sprite-element-group",title:"Group",description:"No Description",features:[Features.DesignElement,Features.HasResponsiveItem,Features.Selectable,Features.Clickable,Features.HasLayout,Features.ItemsContainer,Features.Hideable],renderElement:function(d){var f=new StringBuilder();var b=Global.IsDesigner;var c=d.getPropertyValue("tagName");f.append('<div class="design-element group-element">');f.conditionalAppend(!b&&c!==HtmlTags.DIV,'<{0} class="tag-container">'.format(c));f.append('<div class="element-content-box design-element-content-box">');f.append('<div class="content-container content-container-type element-size-box"></div>');f.append("</div>");f.conditionalAppend(!b&&c!==HtmlTags.DIV,"</{0}>".format(c));f.append("</div>");return f.toString()},methods:{getMainBox:function(){return this.$elementContentBox},getShadowTarget:function(){return this.$elementContentBox},disableGroup:function(b){this.groupDisabled.setValue(true,b)},enableGroup:function(b){this.groupDisabled.setValue(false,b)},startGroupUpdating:function(){this.groupUpdateBatch.start()},hasHeight:function(){return this.isRelativePositioned()?false:true},hasWidth:function(){return this.isRelativePositioned()?false:true},finishGroupUpdating:function(){this.groupUpdateBatch.finish()},scale:function(b,c){c=$.extend({includeInstance:false,centerRoot:false,includeSize:true,includePosition:true,includeChildren:true},c);this.isInScalingProcess.setValue(true);this.disableGroup("scale");if(c.includeInstance){if(c.includeSize){this.adjustSizeFromScale(b,c.centerRoot)}if(c.includePosition&&(!c.includeSize||!c.centerRoot)){this.adjustPositionFromScale(b)}this.scaleContent(b)}if(c.includeChildren){var d=this.getChildInstances();if(d.length>0){$.each(d,function(f,g){g.scale(b,{includeInstance:true})})}}this.enableGroup("scale");this.isInScalingProcess.setValue(false);this.refreshGroupArea()},refreshGroupArea:function(c){var b=this;ElementsManager.HierarchyChangedUpdateBatch.performInstanceOperation(function(){if(!b.isInstanceDeleted()&&(c||(!b.isGroupDisabled()&&!b.groupUpdateBatch.isActive()&&(ModeManager.inMode(Modes.NormalMode,Modes.CustomStateMode)||(ModeManager.inMode(Modes.ScaleMode)&&b.isInScalingProcess.isTrue()))))&&!OperationsManager.isInUndoRedoState()&&PositionManager.isElementVisible(b)){LayoutManager.layoutUpdateBatch.performOperation(function(){b.disableGroup("refreshGroupArea");b.adjustSizeAndPositionToChilds();b.enableGroup("refreshGroupArea")})}},b,"refreshGroupArea")},isGroupDisabled:function(){return this.groupDisabled.isTrue()},creationFunction:function(){return $("<div></div>").addClass("absolute-fill")}},aggregatedMethods:{aggregations:{isDroppable:function(){return false},accept:function(){return false},updateInstanceToViewPort:function(){var b=this;b.data.groupInstances=b.childInstances;b.startGroupUpdating();ElementsStructureHelper.reattachInstances(b.childInstances,b.parentInstance,{rememberWidth:false,rememberHeight:false});$.each(b.data.groupInstances,function(d,c){c.data.groupInstanceInMobile=c});b.isDisplayed.setValue(false,"group");PositionManager.visibilityTreeDetach(b)},removeInstanceFromViewPort:function(){var b=this;b.isDisplayed.setValue(true,"group");PositionManager.visibilityTreeAttach(b);$.each(b.data.groupInstances,function(d,c){c.data.groupInstanceInMobile=undefined});ElementsManager.addElementToContainerElement(b,b.data.groupInstances);MobileVersionViewManager.updateBatch.performOperationWhenBatchStart(function(){b.finishGroupUpdating()})},onRemove:function(){$.each(this.childInstances,function(c,b){if(b.data.rearrangeGroupId){b.propertyChangedEvent.unbind(b.data.rearrangeGroupId);b.data.rearrangeGroupId=undefined}})},onChildElementAdded:function(c){c.refreshTracking();c.$element.toggleLayerEventsCatching(true);if(this.parentInstance&&this.parentInstance.hasFeature(Features.PageSection)){c.classesManager.set({"is-section-child":true})}if(!Global.IsDesigner){return}var b=this;if(!c.data.rearrangeGroupId){c.data.rearrangeGroupId=c.propertyChangedEvent.bind("sizeAndPosition",function(){if(b.isInstanceDeleted()){c.propertyChangedEvent.unbind(c.data.rearrangeGroupId);c.data.rearrangeGroupId=undefined}else{b.refreshGroupArea()}})}},onChildElementRemoved:function(c){c.$element.toggleLayerEventsCatching(false);if(!Global.IsDesigner){return}if(this.parentInstance.hasFeature(Features.PageSection)){c.classesManager.set({"is-section-child":false})}c.refreshTracking();var b=this;if(c.data.rearrangeGroupId){c.propertyChangedEvent.unbind(c.data.rearrangeGroupId);c.data.rearrangeGroupId=undefined}a(b)},switchToPreview:function(){$.each(this.childInstances,function(c,b){b.propertyChangedEvent.unbind(b.data.rearrangeGroupId);b.data.rearrangeGroupId=undefined})},switchToDesign:function(){var b=this;$.each(this.childInstances,function(d,c){if(!c.data.rearrangeGroupId){c.data.rearrangeGroupId=c.propertyChangedEvent.bind("sizeAndPosition",function(){b.refreshGroupArea()})}})}}},onInstanceInitialized:function(){this.$element.toggleLayerEventsForwarding(true)}}});function a(b){if(b.ignoreGroupUpdate.isTrue()||b.isGroupDisabled()){return}b.groupUpdateBatch.performInstanceOperation(function(){ElementsManager.HierarchyChangedUpdateBatch.performInstanceOperation(function(){var c=b.childInstances;if(c.length>1){b.refreshGroupArea()}else{if(c.length===1){b.ignoreGroupUpdate.setValue(true,"updatingGroup");ElementsStructureHelper.releaseGroup(b);ElementsManager.removeInstances([b]);b.ignoreGroupUpdate.setValue(false,"updatingGroup")}else{if(c.length===0){ElementsManager.removeInstances([b])}}}},b,"updateGroup")},b,"updateGroup")}})();(function(){ElementsModel.registerDefinition(ElementsTypes,{Menu:{className:"menu-element",category:ElementsTypesCategories.General,icon:"/images/icons/elements/container.png",iconClass:"sprite-icon sprite-element-menu",iconClass24:"sprite-icon sprite-tool-category-menus",title:"Menu",itemName:"MenuButton",itemTitle:"Button",description:"No Description",features:[Features.DesignElement,Features.HasResponsiveItem,Features.Resizable,Features.Selectable,Features.HasBackground,Features.HasBackgroundImage,Features.HasLayout,Features.Hideable,Features.HasBorder,Features.DataList,Features.HasMenu],properties:{},defaultProperties:{fitToContent:function(){return false},sizeAndPosition:function(){return{width:400,height:400,top:0,left:0}},tagName:function(){return HtmlTags.NAV},itemFields:function(){return{index:{type:"index",title:"Index",name:"index",isDefaultField:true},title:{type:"title",title:"Title",name:"title",isDefaultField:true}}},dataLayoutOptions:function(){return{lineSpacing:15,columnSpacing:15,colsSpacing:15,rowsSpacing:15,rotation:0,cols:3,R:100}}},methods:{unSelectAll:function(){var b=this;$.each(b.getTemplatesArray(),function(d,f){var c=f.getInstance();ElementsManager.performOnInstancesInitialization(c.id,function(){c.userSelect(false)})})},hasContentHorizontalAlign:function(){return false},getDefaultStructure:function(c){var b={};b[ElementsTypes.Menu.itemName]={};if(c){b[ElementsTypes.Menu.itemName][c.id]={id:c.id,name:"Template",isDefault:true,hierarchy:c}}return{isTemplate:true,chooseTemplatePanelName:"WebzaiMenusWizard",manageItemsPanelName:"MenuItemsPanel",isDefaultStructure:true,structures:[{type:"Menu",elementProperties:{sizeAndPosition:{width:0,height:0},backgroundColor:"transparent",dataLayout:{name:DataLayouts.Horizontal.name},fieldsTemplates:b}}]}},setPropertyDataInfoForSave:function(f,d){if(!f||f===null){return f}var c={};if(f&&f.currentData&&f.currentData.items){var b=d.itemFields;$.each(f.currentData.items,function(i,h){var g={};$.each(h,function(k,l){if(b[k]&&DataSourceItemsFields[b[k].type].isText()){try{g[k]=decodeURIComponent(l)}catch(j){g[k]=l}}else{g[k]=l}});if(g.useDefaultTitle===undefined){g.useDefaultTitle=true}c[g.id]=g});f.currentData.items=c}return f},getDataSourceName:function(){var b=this;return MenuDataViewPreText+b.id},getDataSourceDefinition:function(){return DataSourcesDefinitions.MenuElementView},onItemSet:function(d){var b=this;var g=b.getDataSource().dataSourceInfo.currentData.type;var f;switch(g){case MenuItemTypes.NavigableInstance.name:var h=b.getNavigableInstance();var c=h.getUrlAddressForPage(d.getDataItem().index);if(c){d.setPropertyValue(PropertiesTypes.urlAddress.name,c);d.$element.unbind(".navigable")}else{d.setPropertyValue(PropertiesTypes.urlAddress.name,null);f=function(){var j=d.getDataItemId();var i=ElementsManager.getInstanceByID(j);if(i.getPageId()===PageManager.getCurrentPageId()){ElementsManager.getInstanceByID(j).showParents()}}}break;case MenuItemTypes.MasterPages.name:d.setPropertyValue(PropertiesTypes.urlAddress.name,{url:d.getDataItemId(),type:LinkTypes.Pages});break;case MenuItemTypes.MasterPagesTag.name:d.setPropertyValue(PropertiesTypes.urlAddress.name,{url:d.getDataItemId(),type:LinkTypes.Pages});break}if(f){d.$element.on("mouseup.navigable",function(){if(!ViewManager.isDesignMode()){f()}})}},isMenuItemSelected:function(j){var b=this;var f=false;var c=b.getTemplateInstance(j);var i=b.getDataSource();var d=i.fetchDataItem(j);var g=i.dataSourceInfo.currentData.type;switch(g){case MenuItemTypes.NavigableInstance.name:var h=ElementsManager.getInstanceByID(j);if(h&&h.parentInstance.getCurrentItem()===h){f=true}break;case MenuItemTypes.MasterPages.name:if(PageManager.getCurrentPageId()===j+""){f=true}break}return f},isConnectedToNavigatable:function(){var b=this.getPropertyValue("dataInfo");return b&&b.currentData&&b.currentData.type===MenuItemTypes.NavigableInstance.name},getNavigableInstance:function(){var b=this.getPropertyValue("dataInfo");if(this.isConnectedToNavigatable()){return ElementsManager.getInstanceByID(b.currentData.id)}return null}},aggregatedMethods:{aggregations:{switchToPreview:function(b){var c=this.getTemplatesArray();if(c&&c.length>0){c[0].getInstance().activateState(ElementStates.FirstButton);c[c.length-1].getInstance().activateState(ElementStates.LastButton)}},switchToDesign:function(b){if(b){var c=this.getTemplatesArray();if(c&&c.length>0){c[0].getInstance().deactivateState(ElementStates.FirstButton);c[c.length-1].getInstance().deactivateState(ElementStates.LastButton)}if(this.data.currentItemSelected){if(!this.data.currentItemSelected.isDeleted){OperationsManager.disableBatch();this.data.currentItemSelected.userSelect(false);OperationsManager.endDisableBatch()}}}},onRemove:function(){this.data.refreshMenuDisplaying.unbind()},onPropertiesChanged:function(c){var b=this;if(!b.isInitialized){return}if($.containsOneOfKeys(c,"dataInfo")){a(b)}}}},initialize:function(c){var b=this;b.data.refreshMenuDisplaying=PageManager.Events.PageChanged.bind(function(){a(b)})}}});function a(c){var f=c.getPropertyValue("dataInfo");if(c.isConnectedToNavigatable()&&c.isMasterPageElement.isTrue()){var d=f.currentData;var g=ElementsManager.getInstanceByID(d.id);var b=!!g&&g.getPageId()===PageManager.getCurrentPageId();c.reArrangementDisabled.setValue(true,"refreshMenuDisplaying");c.isDisplayed.setValue(b,"DataNotInitialized");if(b){c.reArrangementDisabled.setValue(false,"refreshMenuDisplaying");c.reArrangeTheTemplates();LayoutManager.refreshElementsLayout(c.getDescendingInstances(true));PositionManager.updatePosition(c.getDescendingInstances(true))}}}})();var MenuDataViewPreText="menu";(function(){ElementsModel.registerDefinition(ElementsTypes,{PagesMenu:{title:"Pages Menu",itemTitle:"Button",itemName:"MenuButton",className:"menu-element",features:[Features.DesignElement,Features.HasResponsiveItem,Features.Resizable,Features.Selectable,Features.HasBackground,Features.HasBackgroundImage,Features.HasLayout,Features.Hideable,Features.HasBorder,Features.DataList,Features.HasMenu],getExtensions:function(h){},methods:{getNavigationButtonController:function(){return this.data.navigationButton},isNavigationButton:function(){var h=this.getPropertyValue("dataLayout","name");return h===DataLayouts.NavigationButton.name},disableStyleProperties:function(){return this.isNavigationButton()},shouldBeBlockElementInMobile:function(){return !this.isNavigationButton()},getManageTitle:function(){return"Pages"},getSkinBinding:function(){var h=this.isNavigationButton()?this.getNavigationButtonTemplate():this.getDefaultTemplate();return $.cloneObject(h.hierarchy.structures[0].elementProperties.skinBinding)},getNavigationButtonTemplate:function(){return $.getValues(this.getFieldsTemplates()["SkinNavigationButton"])[0]},getDefaultFieldName:function(){if(this.isNavigationButton()){return"SkinNavigationButton"}return this.elementType.itemName?this.elementType.itemName:undefined},getFirstDisplayedListItem:function(){if(this.isNavigationButton()){return this.data.navigationButton.instance}return Features.HasTemplates.methods.getFirstDisplayedListItem.apply(this,arguments)},shouldRefreshTemplates:function(){return !this.isNavigationButton()},refreshTemplates:function(){var h=this;OperationsManager.disableBatch();if(h.isInitialized&&h.isNavigationButton()&&h.data.navigationButton){h.data.navigationButton.remove();h.data.navigationButton=b(h)}else{Features.HasTemplates.methods.refreshTemplates.apply(this,arguments)}OperationsManager.endDisableBatch()},addChildElement:function(i,j){var h=this.getContentLayer().append(i.$element);i.onAttached();return h},getDataSourceName:function(){var h=this;return PagesMenuDataViewPreText+h.id},getDataSourceDefinition:function(){return DataSourcesDefinitions.PageMenuElementView},onItemSet:function(i){var h=this;i.setPropertyValue("urlAddress",{url:i.getDataItemId(),type:LinkTypes.Pages});i.canDelete=$.returnFalse},isMenuItemSelected:function(j){var h=this;var i=false;if(PageManager.getCurrentPageId()===j+""){i=true}return i},swapItemsIndex:function(j,h){var i=PageManager.AllPagesInformation.getItems();var k=i[j.id].index;j.index=i[h.id].index;h.index=k}},properties:{navigationButtonSettings:{isStateProperty:true,defaultValue:function(){return{navigation:"SlideNavigation",navigationProperties:{}}},onChange:function(){if(this.isInitialized&&this.data.navigationButton){f(this,this.data.navigationButton)}}},dropDownNavigationSettings:{isStateProperty:true,defaultValue:function(){return{navigation:"DropDownNavigation",navigationProperties:{}}},onChange:function(){if(this.isInitialized&&this.data.navigationButton){f(this,this.data.navigationButton)}}},moreButtonText:{isStateProperty:true,defaultValue:function(){return"More"}},showDropDownArrow:{isStateProperty:true,defaultValue:function(){return false}}},defaultProperties:{sizeAndPosition:function(){return{width:400,height:400,top:0,left:0}},tagName:function(){return HtmlTags.NAV},itemFields:function(){return{index:{type:"index",title:"Index",name:"index",isDefaultField:true},title:{type:"title",title:"Title",name:"title",isDefaultField:true}}},dataLayout:function(){return{name:DataLayouts.HorizontalMenu.name}},dataLayoutOptions:function(){return{lineSpacing:15,columnSpacing:15,colsSpacing:15,rowsSpacing:15,rotation:0,cols:3,R:100,maxItems:6}}},aggregatedMethods:{aggregations:{getArrangementOptions:function(i){var h=this;return $.extend({},i,{dropDownNavigationSettings:h.getPropertyValue("dropDownNavigationSettings"),createSubHierarchyElement:h.data.createSubHierarchyElement,createMoreItemsController:h.data.createMoreItemsController,createItemsController:h.data.createItemsController})},switchToPreview:function(){this.reArrangeTheTemplates()},switchToDesign:function(){this.reArrangeTheTemplates()},updateInstanceToViewPort:function(){var h=this.getNavigationButtonController();if(h){PropertiesManager.invalidateElement(h.instance)}},removeInstanceFromViewPort:function(){var h=this.getNavigationButtonController();if(h){PropertiesManager.invalidateElement(h.instance)}}}},initialize:function(i){var h=this;h.data.createMoreItemsController=$.quickProxy(g,h);h.data.createSubHierarchyElement=$.quickProxy(c,h);h.data.createItemsController=$.quickProxy(a,h);var j=h.propertyChangedEvent.bind("dataLayout",d);h.instanceRemoving.one(function(){j.unbind()})}}});function f(h,i){var j=h.getPropertyValue("navigationButtonSettings");i.navigationBinding.setValue(j.navigation);i.navigationPropertiesBinding.setValue(j.navigationProperties)}function b(i){var m=i.getNavigationButtonTemplate().hierarchy;var n=TemplatesManager.addTemplateInstance({elementForCreation:m},i,{isContent:true,isLoading:true,generateNewID:true});var h=n.instances[0];h.setPropertyFieldValue("fillLayout","fillVertical",true);h.setPropertyFieldValue("fillLayout","fillHorizontal",true);h.canDelete=$.returnFalse;h.canSelectFlag.setFalse("SkinNavigationButton");h.canMove.setFalse("SkinNavigationButton");h.canResize.setFalse("SkinNavigationButton");LayoutManager.refreshElementsLayout(h);var k=ObservableObject.createPropertyBinding(h,{propertyName:PropertiesTypes.navigationProperties.name});var o=ObservableObject.createPropertyBinding(h,{propertyName:PropertiesTypes.navigation.name});var j=ObservableObject.createPropertyBinding(h,{propertyName:PropertiesTypes.skinBinding.name});var l={instance:h,navigationBinding:o,navigationPropertiesBinding:k,skinBinding:j,remove:function(){ElementsManager.removeInstances(h)}};f(i,l);return l}function d(j,m){var h=this;OperationsManager.disableBatch();var i=h.dataLayoutController;var l=m&&m.name===DataLayouts.NavigationButton.name;var k=j&&j.name===DataLayouts.NavigationButton.name;if(k&&!l){h.inEmptyStateFlag.setFalse("SkinNavigationButton");h.reArrangementDisabled.setTrue("SkinNavigationButton");h.data.navigationButton=b(h);i.setArrangement(j.name);i.refreshLayout();if(!l&&h.isInMobileMode()){h.setPropertyValue("display",ElementDisplay.Fixed)}h.getDataSource().refresh();PropertiesManager.resetInstanceStyleProperties(h)}else{if(!k&&l){h.inEmptyStateFlag.setTrue("SkinNavigationButton");PropertiesManager.resetInstanceStyleProperties(h);i.setArrangement(j.name);h.reArrangementDisabled.setFalse("SkinNavigationButton");h.data.navigationButton.remove();delete h.data.navigationButton;h.getDataSource().refresh()}}OperationsManager.endDisableBatch()}function c(i){var o=this;i=$.extend({arrowSide:Side.Bottom,controller:undefined},i);var j=i.controller;var q;var n;var h=SimpleEvent.createBindingsCollection();var k;var l;function p(){q.appendTo(j.$element)}h.add(o.propertyChangedEvent.bindAndExecute("showDropDownArrow",function(){l=o.getPropertyValue("showDropDownArrow");if(l){if(!q){q=$('<div class="right-block sub-hierarchy catchLayerEvents menu-button-cursor-pointer"><span class="height-normalizer"></span><span class="menu-sub-hierarchy-arrow vertically-centered"></span></div>');n=$(".menu-sub-hierarchy-arrow",q);h.add(j.initializeFlag.onceTrue(m))}else{p()}}else{if(q){q.detach()}}}));return{remove:function(){if(q){q.remove()}h.unbindAll()}};function m(){var s=j.getInstance();h.add(s.instanceController.initializeFlag.onceTrue(function(){k=s.getSkinInstance().getInstancesByField("title")[0];if(k){h.add(k.propertiesChanged.bind(function(t){if($.containsOneOfKeys(t,"fontColor","fontSize","namedTextStyle")){r(k)}}))}r();if(l){p()}}))}function r(){var s="#000";var t=k.getPropertyValue("fontColor");var v=TextStyleManager.getElementTextStyle(k);if(!t&&v){t=v.color}if(t){s=t;s=ThemeColorsManager.evaluateColorBinding(s,true)}var u=k.getPropertyValue("fontSize")||14;if(!u&&v){u=v.fontSize}var w;switch(i.arrowSide){case Side.Bottom:w="angle-down";break;case Side.Top:w="angle-up";break;case Side.Right:w="angle-right";break;case Side.Left:w="angle-left";break}n.css("font-size",u);FontIconsManager.applyIcon(n,{collectionName:"public-font-icons",iconName:w})}}function a(h){h=$.quickExtend({instanceCreatedCallback:$.noop},h);var l=this;var i=this.dataLayoutController;var k={};return{createInstanceController:function j(q,m){var n=q.id+(m?"root":"");var r=k[n];if(!r){var p=l.getDefaultTemplate().hierarchy;r=InstanceController.create(p,{fieldName:l.elementType.itemName,dataSourceOptions:{dataItem:q,dataItemID:q.id,dataSourceName:l.getDataSource().name},templateOptions:{isContent:true,isLoading:true,rootsIds:[l.id+TemplateItemInstanceIdSeperator+"temp"+TemplateItemInstanceIdSeperator+n],generateNewID:true},isForTemplateUse:false});var o=l.dataLayoutController.getLastArrangementOptionsByCurrentDevice();r.setSize(o.fixedSize);k[n]=r;h.instanceCreatedCallback(r)}return r},remove:function(){$.each(k,function(n,m){m.removeController()})}}}function g(){var j=this;var h=InstanceController.create(j.getDefaultTemplate().hierarchy,{parentInstanceId:j.id,dataSourceOptions:{dataItemID:$.uniqueID().toString()},templateOptions:{initialProperties:{all:{binding:null}},isContent:true,isLoading:true,generateNewID:true}});var i=j.propertyChangedEvent.bind("fieldsTemplates",function(){var l=j.getDefaultTemplate().hierarchy;if(l.id!==h.getTemplateStructure().id){h.setTemplateStructure(l);k(h)}});h.removedEvent.one(function(){i.unbind()});k(h);return h;function k(l){var m=l.getInstance();m.getItemMainParent=function(){return j};m.setNeverSelectedInClick(true);m.canSelectFlag.setValue(false,"dataListItem");m.canBeSelected=$.returnFalse;m.canDelete=$.returnFalse;m.instanceController.initializeFlag.onceTrue(function(){m.getSkinInstance().setNeverSelectedInClick(true);var o=m.getSkinInstance().getPropertyValue("fieldsMap");var n=j.getPropertyValue("moreButtonText");$.each(o,function(s,r){var q=ElementsManager.getInstanceByID(s);var p=false;$.each(r,function(t,v){if(t==DataSourceItemsData.Text&&v.name==="title"){p=true;PropertiesManager.removeStateAffected(q,function(z,x,y,w){return w==="text"});q.setPropertyValue("binding",null);q.data.textBinding=ObservableObject.createPropertyBinding(q,{propertyName:"text"});q.data.textBinding.setValue(n);var u=j.propertyChangedEvent.bind("moreButtonText",function(x,w){q.data.textBinding.setValue(x)});m.instanceRemoved.one(function(){u.unbind()})}});if(!p){ElementsManager.removeInstances(q)}})})}}})();var PagesMenuDataViewPreText="pagesmenu";var TagCloudTypes={Capitalize:{title:"Abc",value:"capitalize"},Lowercase:{title:"abc",value:"lowercase"},Uppercase:{title:"ABC",value:"uppercase"}};(function(){ElementsModel.registerDefinition(ElementsTypes,{TagCloud:{className:"tag-cloud-element",title:"Tag Cloud",itemName:"SkinTagButton",itemTitle:"Tag Button",features:[Features.DesignElement,Features.HasResponsiveItem,Features.Resizable,Features.Selectable,Features.HasBackground,Features.HasBackgroundImage,Features.HasLayout,Features.Hideable,Features.HasBorder,Features.DataList,Features.HasMenu],properties:{textTransform:{title:"Text Transform",defaultValue:$.returnFixedValue(TagCloudTypes.Capitalize.value),onChange:function(c,d){var b=this;b.getContentLayer().css("text-transform",d)}}},defaultProperties:{dataInfo:function(){return{listName:DefaultsListNames.LocalBlog}},dataLayout:function(){return{name:DataLayouts.Horizontal.name}},dataLayoutOptions:function(){return{lineSpacing:15,columnSpacing:15,colsSpacing:15,rowsSpacing:15,rotation:0,cols:3,R:100,maxItems:6,isHierarchy:true}}},methods:{getManageTitle:function(){return"Posts"},getDataSourceName:function(){var b=this;return a+b.id},getDataSourceDefinition:function(){return DataSourcesDefinitions.TagCloudView},onItemSet:function(b){},isMenuItemSelected:function(){return false},getEmptyStateChangedEvents:function(){var b=this;var c=b.getPropertyValue(PropertiesTypes.dataInfo.name);return[{name:c.listName,event:ListsManager.Events.ListCreated},{name:c.listName,event:ListsManager.Events.ListRemoved}]},getEmptyTemplateInfo:function(){var b=this;var c=ListUtils.getListNameFromInstance(b);var d=ListsManager.createOrGetListFlag(c);return{title:"Tag Cloud",isBlock:false,iconClass:$.getIconClass("tag-cloud",IconLocation.Font),actions:{createBlog:{title:"create a blog",doAction:function(){Commands.CreateList.action({listName:c})}},manageBlog:{title:"Manage your posts",doAction:function(){Commands.ManageList.action({listName:c})}}},label:d.isFalse()?"You must {createBlog} in order to see your tags":"Your published posts don't have any tags.\n{manageBlog} and add tags",shortLabel:"No Tags"}}},aggregatedMethods:{aggregations:{}}}});var a="tag-cloud"})();(function(){var a="posts-list";ElementsModel.registerDefinition(ElementsTypes,{PostsList:{className:"posts-list-element",title:"Posts List",itemName:"ListViewItemTemplate",itemTitle:"Posts List Item",description:"No Description",properties:{primaryPostsList:{title:"Main Posts List",defaultValue:$.returnFalse}},defaultProperties:{dataInfo:function(){return{listName:DefaultsListNames.LocalBlog,showPinned:true,filterType:PostListTypes.RecentPosts.name,specificTag:""}}},features:[Features.DesignElement,Features.HasResponsiveItem,Features.Resizable,Features.Selectable,Features.HasBackground,Features.HasBackgroundImage,Features.HasLayout,Features.Hideable,Features.HasBorder,Features.DataList,Features.TemplatePagesList],methods:{getManageTitle:function(){return"Posts"},getDisplayName:function(){var b=this;if(!b.isPrimary()){return b.elementType.title}else{return"Blog Feed"}},getDataSourceName:function(){var b=this;return a+b.id},getDataSourceDefinition:function(){return DataSourcesDefinitions.ListView},canDuplicate:function(){var b=this;return !b.isPrimary()},isUnique:function(){var b=this;return b.isPrimary()},isMandatory:function(){var b=this;return b.isPrimary()},isPrimary:function(){var b=this;return b.getPropertyValue(PropertiesTypes.primaryPostsList.name)},togglePrimary:function(){var b=this;if(b.isPrimary()){b.setPropertyValue(PropertiesTypes.primaryPostsList.name,false);b.setPropertyFieldValue(PropertiesTypes.dataLayoutOptions.name,"maxItemsCount",20)}else{b.setPropertyValue(PropertiesTypes.primaryPostsList.name,true);b.setPropertyFieldValue(PropertiesTypes.dataLayoutOptions.name,"maxItemsCount",Infinity)}},getUrlAddressForPage:function(c){var b=this;if(b.isPrimary()){var d=ListsManager.getListByName(ListUtils.getListNameFromInstance(b));return d.getPageLink(c)}},getEmptyStateChangedEvents:function(){var b=this;var c=ListUtils.getListNameFromInstance(b);return[{name:c,event:ListsManager.Events.ListCreated},{name:c,event:ListsManager.Events.ListRemoved},{name:PropertiesTypes.dataInfo.name,event:b.propertyChangedEvent}]},getEmptyTemplateInfo:function(){var c=this;var h=c.getPropertyValue(PropertiesTypes.dataInfo.name);var i=ListsManager.createOrGetListFlag(h.listName);var d;var b;var g;var j={};if(i.isFalse()){d="You must {createBlog} in order to see your posts";b="blog-create-thick";g="Create Your Blog";j={createBlog:{title:"create a blog",doAction:function(){Commands.CreateList.action({listName:ListUtils.getListNameFromInstance(c)})}}}}else{if(h.specificTag){d="You have no published posts match your tag: {0}.\n{addTag} to your posts".format(h.specificTag);b="tagged-posts";g="Specific Tag";j={addTag:{title:"Add tags",doAction:function(){Commands.ManageItems.action()}}}}else{var f=PostListTypes[h.filterType];d=f.emptyMessage;b=f.iconClass;g=f.title;j={filterOperation:{title:"Create some",doAction:function(){Commands.ManageItems.action()}}}}}return{title:g,label:d,shortLabel:"No Posts",iconClass:$.getIconClass(b,IconLocation.Font),actions:j}}},aggregatedMethods:{aggregations:{accept:function(){return false},canDelete:function(c){var b=this;return c&&!b.isPrimary()},setItem:function(c){var b=this},getMetaDataForSaving:function(c){var b=this;var d=b.getDataSource().getViewInfo(true);var f;if(d!==null){f={sorts:d.sorts,filters:$.filterKeys(d.filters,"serverFilters")}}return $.extend(c,{viewInfo:f})},getCurrentPageIndex:function(c){var b=this;if(!b.isPrimary()||ViewManager.isDesignMode()){return c}else{var d=ListsManager.getListByName(ListUtils.getListNameFromInstance(b));return d.currentDisplayedPage.getValue()-1}}}},initialize:function(c){var b=this;var d=SimpleEvent.createEventListener(b.currentPageId.valueChangedEvent,function(){if(PageManager.isDynamicPage(b.currentPageId.getValue())){b.getDataSource().inDynamicPage.setTrue()}else{b.getDataSource().inDynamicPage.setFalse()}}).activateAndExecute();b.instanceRemoving.one(function(){d.dispose()})}}})})();var PostListTypes={RecentPosts:{name:"RecentPosts",title:"Recent Posts",commonFilterName:ListsManager.CommonFiltersNames.All,emptyMessage:"You have no published posts.\n{filterOperation} through the Manage Posts Page",iconClass:"blog-recent-posts"},FeaturedPosts:{name:"FeaturedPosts",title:"Featured Posts",commonFilterName:ListsManager.CommonFiltersNames.Featured,emptyMessage:"You have no published featured posts.\n{filterOperation} through the Manage Posts Page",iconClass:"blog-featured-posts"},PinnedPosts:{name:"PinnedPosts",title:"Pinned Posts",commonFilterName:ListsManager.CommonFiltersNames.Pinned,emptyMessage:"You have no published pinned posts.\n{filterOperation} through the Manage Posts Page",iconClass:"pinned-posts"}};(function(){ElementsModel.registerDefinition(ElementsTypes,{VideoGallery:{className:"data-list-element",category:ElementsTypesCategories.General,icon:"/images/icons/elements/container.png",iconClass:"sprite-icon sprite-element-gallery",iconClass24:"sprite-icon sprite-tool-category-video",title:"Video Gallery",itemName:"DataListItemTemplate",itemTitle:"Data List Item",convertFunction:Global.IsDesigner&&TemplateThumbConversationsMap.VideoTemplateToVideoItem,description:"No Description",defaultProperties:{itemFields:function(){return{index:{type:"index",title:"Index",name:"index",isDefaultField:true},video:{type:"video",title:"Video",name:"video",isDefaultField:true},title:{type:"title",title:"Video Title",name:"title",isDefaultField:true},description:{type:"description",title:"Video Description",name:"description",isDefaultField:true}}}},features:[Features.DesignElement,Features.HasResponsiveItem,Features.Resizable,Features.Selectable,Features.HasBackground,Features.HasBackgroundImage,Features.HasLayout,Features.Hideable,Features.HasBorder,Features.DataList,Features.TemplatePagesList,Features.SimpleDataList],methods:{getDataSourceName:function(){var a=this;return VideoGalleryViewPreText+a.id},getDataSourceDefinition:function(){return DataSourcesDefinitions.VideoGalleryElementView},getEmptyTemplateInfo:function(){return{title:"Video Gallery",label:"{add} to your gallery",shortLabel:"No Videos",iconClass:$.getIconClass("element-video-gallery",IconLocation.Font),actions:{add:{title:"Add Videos",doAction:function(){Commands.ManageItems.action()}}}}}},aggregatedMethods:{aggregations:{setItem:function(a){}}},initialize:function(b){var a=this}}})})();var VideoGalleryViewPreText="videogallertListElement";(function(){ElementsModel.registerDefinition(ElementsTypes,{iconsList:{className:"data-list-element",category:ElementsTypesCategories.General,icon:"/images/icons/elements/container.png",iconClass:"sprite-icon sprite-element-list-widget",iconClass24:"sprite-icon sprite-tool-category-icons-list",title:"Icons List",itemName:"DataListItemTemplate",convertFunction:Global.IsDesigner&&TemplateThumbConversationsMap.IconItemToIconsList,itemTitle:"Data List Item",description:"No Description",defaultProperties:{itemFields:function(){return{index:{type:"index",title:"Index",name:"index",isDefaultField:true},icon:{type:"icon",title:"Icon",name:"icon",isDefaultField:true},title:{type:"title",title:"Icon Title",name:"title",isDefaultField:true},link:{type:"link",title:"Link",name:"link",isDefaultField:true}}}},features:[Features.DesignElement,Features.HasResponsiveItem,Features.Resizable,Features.Selectable,Features.HasBackground,Features.HasBackgroundImage,Features.HasLayout,Features.Clickable,Features.Hideable,Features.HasBorder,Features.DataList,Features.TemplatePagesList,Features.SimpleDataList],methods:{getDataSourceName:function(){var a=this;return DataListViewPreText+a.id},getDataSourceDefinition:function(){return DataSourcesDefinitions.IconsListElementView}},aggregatedMethods:{aggregations:{setItem:function(a){}}},initialize:function(b){var a=this}}})})();(function(){ElementsModel.registerDefinition(ElementsTypes,{Gallery:{className:"gallery-element",category:ElementsTypesCategories.General,icon:"/images/icons/elements/container.png",iconClass:"sprite-icon sprite-element-gallery",iconClass24:"sprite-icon sprite-tool-category-galleries",title:"Gallery",itemName:"ImageBox",defaultSkinItemElement:"skinGalleryItem",convertFunction:Global.IsDesigner&&TemplateThumbConversationsMap.ImageBoxTemplateToImageBoxItem,itemTitle:"Image",description:"No Description",defaultProperties:{itemFields:function(){return{index:{type:"index",title:"Index",name:"index",isDefaultField:true},image:{type:"image",title:"Image",name:"image",isDefaultField:true},title:{type:"title",title:"Title",name:"title",isDefaultField:true},description:{type:"description",title:"Description",name:"description",isDefaultField:true},link:{type:"link",title:"Link",name:"link",isDefaultField:true}}}},features:[Features.DesignElement,Features.HasResponsiveItem,Features.Resizable,Features.Selectable,Features.HasBackground,Features.HasBackgroundImage,Features.HasLayout,Features.Hideable,Features.HasBorder,Features.DataList,Features.TemplatePagesList],properties:{templateOpener:{defaultValue:$.returnTrue,isStateProperty:true,onChange:function(a,b){if(b){this.$element.addClass("popupOpener")}else{this.$element.removeClass("popupOpener")}}}},methods:{getDataSourceName:function(){var a=this;return GalleyDataViewPreText+a.id},getDataSourceDefinition:function(){return DataSourcesDefinitions.GalleryElementView},getEmptyTemplateInfo:function(){return{title:"Gallery",label:"{add} to your gallery",shortLabel:"No Images",iconClass:$.getIconClass("tool-category-galleries",IconLocation.Font),actions:{add:{title:"Add Images",doAction:function(){Commands.ManageItems.action()}}}}}},aggregatedMethods:{aggregations:{switchToPreview:function(){if(this.getPropertyValue("templateOpener")){$.each(this.getTemplatesControllers(),function(b,a){a.$element.bind("click.preview",function(){var c=a.getInstance();c.activateAction(Behaviours.showInCenter,{},c)})})}},switchToDesign:function(){if(this.getPropertyValue("templateOpener")){$(this.getTemplatesControllers()).each(function(b,a){a.$element.unbind("click.preview")})}},setItem:function(a){if(ViewManager.isViewMode()&&this.getPropertyValue("templateOpener")){a.data.instanceController.$element.bind("click.preview",function(){a.activateAction(Behaviours.showInCenter,{},a)})}}}},initialize:function(b){var a=this}}})})();var GalleyDataViewPreText="gallery";(function(){ElementsModel.registerDefinition(ElementsTypes,{SocialIconsElement:{className:"social-icons-element",category:ElementsTypesCategories.General,title:"Social Icons",itemName:"SkinSocialIconItem",defaultSkinItemElement:"SkinSocialIconItem",itemTitle:"Social Icon",description:"No Description",defaultProperties:{itemFields:function(){return{index:{type:"index",title:"Index",name:"index",isDefaultField:true},fontIcon:{type:"fontIcon",title:"fontIcon",name:"fontIcon",isDefaultField:true},link:{type:"link",title:"Link",name:"link",isDefaultField:true}}},dataInfo:function(){return{isSynced:false,collectionName:SocialIconsSetCollection.Collection1.name,currentData:{facebook:{id:"facebook",title:"Facebook",iconType:"facebook",index:0,link:{url:"http://www.facebook.com",type:LinkTypes.Web}},googlePlus:{id:"googlePlus",title:"Google+",iconType:"googlePlus",index:1,link:{url:"http://plus.google.com",type:LinkTypes.Web}},twitter:{id:"twitter",title:"Twitter",iconType:"twitter",index:2,link:{url:"http://www.twitter.com",type:LinkTypes.Web}},linkedin:{id:"linkedin",title:"LinkedIn",iconType:"linkedin",index:3,link:{url:"http://www.linkedin.com",type:LinkTypes.Web}}},iconsMap:{facebook:{iconDisplayed:true},googlePlus:{iconDisplayed:true},twitter:{iconDisplayed:true},linkedin:{iconDisplayed:true},pinterest:{iconDisplayed:false},reddit:{iconDisplayed:false},instagram:{iconDisplayed:false},youtube:{iconDisplayed:false},flickr:{iconDisplayed:false},soundCloud:{iconDisplayed:false},tripAdvisor:{iconDisplayed:false},picasa:{iconDisplayed:false},behance:{iconDisplayed:false},etsy:{iconDisplayed:false},tumblr:{iconDisplayed:false},dribbble:{iconDisplayed:false},vimeo:{iconDisplayed:false},vk:{iconDisplayed:false},renren:{iconDisplayed:false},weibo:{iconDisplayed:false}}}}},features:[Features.DesignElement,Features.HasResponsiveItem,Features.Resizable,Features.Selectable,Features.HasBackground,Features.HasBackgroundImage,Features.HasLayout,Features.Hideable,Features.HasBorder,Features.DataList],methods:{getManageItemsTitle:function(){return"Manage Social Icons"},getDataSourceName:function(){var a=this;return SocialIconsViewPreText+a.id},getDataSourceDefinition:function(){return DataSourcesDefinitions.SocialIconsElementView},getEmptyTemplateInfo:function(){return{title:"Social Icons",label:"{add}",shortLabel:"No Icons",iconClass:$.getIconClass("element-social-icons",IconLocation.Font),actions:{add:{title:"Add Icons",doAction:function(){ContextManager.getContextInstances()[0].getDataSource().openItemsDialog({})}}}}}},aggregatedMethods:{aggregations:{switchToPreview:function(){},switchToDesign:function(){},setItem:function(a){}}}}})})();var SocialIconsViewPreText="SocialIconsViewPreText";(function(){var b={Element:{id:"text-input-field-element-template"}};ElementsModel.registerDefinition(ElementsTypes,{TextInputField:{className:"TextInputField",iconClass:"sprite-icon sprite-element-text-input",title:"Text Input",defaultProperties:{sizeAndPosition:function(){return{width:200,height:30,top:0,left:0}},horizontalAlign:function(){return HorizontalAlignment.Left},fontColor:function(){return"#666666"},padding:function(){return $.convertValueToObject(3,["top","left","bottom","right"])},fontSize:function(){return 13}},features:[Features.DesignElement,Features.Resizable,Features.Selectable,Features.HasBackground,Features.HasPadding,Features.HasBackgroundImage,Features.HasContent,Features.Clickable,Features.HasText,Features.Hideable,Features.HasLayout,Features.HasBorder,Features.HasContentOverlay,Features.FormInput,Features.Focusable],methods:{getTextElements:function(){return this.data.textInput},hasHorizontalAlign:function(){return true},clear:function(){this.data.textInput.val("")},getValue:function(){return this.data.textInput.val()},creationFunction:c},aggregatedMethods:{aggregations:{switchToPreview:function(){},switchToDesign:function(){this.data.textInput.val("")},onContentSizeChange:function(){this.data.textInput.css("line-height",this.data.textInput.height()+"px")}}},initialize:a}});function c(f){var d=$.useTemplate(b.Element);f.data.textInput=d.find(".text-input");return d}function a(){var d=this;d.hasHorizontalAlignFlag.setTrue();if(d.isInDesignMode()){d.elementIsSelected.valueChangedEvent.bind(function(f){if(f){d.data.textInput.val("Example Text")}else{d.data.textInput.val("")}})}}})();(function(){var b={Element:{id:"text-area-element-template"}};ElementsModel.registerDefinition(ElementsTypes,{TextArea:{iconClass:"sprite-icon sprite-element-text-input",title:"Text Area",defaultProperties:{sizeAndPosition:function(){return{width:200,height:30,top:0,left:0}},horizontalAlign:function(){return HorizontalAlignment.Left},fontColor:function(){return"#666666"},padding:function(){return $.convertValueToObject(3,["top","left","bottom","right"])},fontSize:function(){return 13}},features:[Features.DesignElement,Features.HasPadding,Features.HasContent,Features.Resizable,Features.Selectable,Features.Clickable,Features.HasBackground,Features.HasBackgroundImage,Features.HasText,Features.Hideable,Features.HasLayout,Features.HasBorder,Features.HasContentOverlay,Features.FormInput,Features.Focusable],methods:{getTextElements:function(){return this.data.textArea},hasHorizontalAlign:function(){return true},clear:function(){this.data.textArea.val("")},getValue:function(){return this.data.textArea.val()},creationFunction:c},aggregatedMethods:{aggregations:{switchToPreview:function(){},switchToDesign:function(){this.data.textArea.val("")}}},initialize:a}});function c(f){var d=$.useTemplate(b.Element);f.data.textArea=d.find(".text-area");return d}function a(){var d=this;d.hasHorizontalAlignFlag.setTrue();if(d.isInDesignMode()){d.elementIsSelected.valueChangedEvent.bind(function(f){if(f){d.data.textArea.val("Example Text")}else{d.data.textArea.val("")}})}}})();(function(){ElementsModel.registerDefinition(ElementsTypes,{FAQ:{className:"data-list-element",category:ElementsTypesCategories.General,icon:"/images/icons/elements/container.png",iconClass:"sprite-icon sprite-element-list-widget",iconClass24:"sprite-icon sprite-tool-category-faq",title:"FAQ",itemName:"DataListItemTemplate",convertFunction:Global.IsDesigner&&TemplateThumbConversationsMap.FAQItemToFAQ,itemTitle:"Question",description:"No Description",defaultProperties:{itemFields:function(){return{index:{type:"index",title:"Index",name:"index",isDefaultField:true},question:{type:"title",title:"Question",name:"question",isDefaultField:true},answer:{type:"description",title:"Answer",name:"answer",isDefaultField:true}}}},features:[Features.DesignElement,Features.HasResponsiveItem,Features.Resizable,Features.Selectable,Features.HasBackground,Features.HasBackgroundImage,Features.HasLayout,Features.Clickable,Features.Hideable,Features.HasBorder,Features.DataList,Features.TemplatePagesList,Features.SimpleDataList],methods:{getDataSourceName:function(){var a=this;return DataListViewPreText+a.id},getDataSourceDefinition:function(){return DataSourcesDefinitions.FAQElementView}},aggregatedMethods:{aggregations:{setItem:function(a){}}},initialize:function(b){var a=this}}})})();(function(){ElementsModel.registerDefinition(ElementsTypes,{Persons:{className:"data-list-element",category:ElementsTypesCategories.General,icon:"/images/icons/elements/container.png",iconClass:"sprite-icon sprite-element-list-widget",iconClass24:"sprite-icon sprite-tool-category-contacts-list",title:"Persons",itemName:"DataListItemTemplate",convertFunction:Global.IsDesigner&&TemplateThumbConversationsMap.PersonItemToPeople,itemTitle:"Person",description:"No Description",defaultProperties:{itemFields:function(){return{index:{type:"index",title:"Index",name:"index",isDefaultField:true},firstName:{type:"title",title:"First Name",name:"firstName",isDefaultField:true},surName:{type:"title",title:"Surname",name:"surName",isDefaultField:true},image:{type:"image",title:"Image",name:"image",isDefaultField:true},title:{type:"title",title:"Title",name:"title",isDefaultField:true},description:{type:"description",title:"Description",name:"description",isDefaultField:true}}}},features:[Features.DesignElement,Features.HasResponsiveItem,Features.Resizable,Features.Selectable,Features.HasBackground,Features.HasBackgroundImage,Features.HasLayout,Features.Clickable,Features.Hideable,Features.HasBorder,Features.DataList,Features.TemplatePagesList,Features.SimpleDataList],methods:{getDataSourceName:function(){var a=this;return DataListViewPreText+a.id},getDataSourceDefinition:function(){return DataSourcesDefinitions.PersonsElementView}},aggregatedMethods:{aggregations:{setItem:function(a){}}},initialize:function(b){var a=this}}})})();(function(){ElementsModel.registerDefinition(ElementsTypes,{Products:{className:"data-list-element",category:ElementsTypesCategories.General,icon:"/images/icons/elements/container.png",iconClass:"sprite-icon sprite-element-list-widget",iconClass24:"sprite-icon sprite-tool-category-products",title:"Products",itemName:"DataListItemTemplate",itemTitle:"Product",convertFunction:Global.IsDesigner&&TemplateThumbConversationsMap.ProductItemToProductsList,description:"No Description",defaultProperties:{itemFields:function(){return{index:{type:"index",title:"Index",name:"index",isDefaultField:true},title:{type:"title",title:"Title",name:"title",isDefaultField:true},description:{type:"description",title:"Description",name:"description",isDefaultField:true},price:{type:"title",title:"Price",name:"price",isDefaultField:true},image:{type:"image",title:"Product Image",name:"image",isDefaultField:true}}}},features:[Features.DesignElement,Features.HasResponsiveItem,Features.Resizable,Features.Selectable,Features.HasBackground,Features.HasBackgroundImage,Features.HasLayout,Features.Clickable,Features.Hideable,Features.HasBorder,Features.DataList,Features.TemplatePagesList,Features.SimpleDataList],methods:{getDataSourceName:function(){var a=this;return DataListViewPreText+a.id},getDataSourceDefinition:function(){return DataSourcesDefinitions.ProductsElementView}},aggregatedMethods:{aggregations:{setItem:function(a){}}},initialize:function(b){var a=this}}})})();(function(){ElementsModel.registerDefinition(ElementsTypes,{RestaurantMenu:{className:"data-list-element",category:ElementsTypesCategories.General,icon:"/images/icons/elements/container.png",iconClass:"sprite-icon sprite-element-list-widget",iconClass24:"sprite-icon sprite-tool-category-restaurant-menu",title:"Restaurant",itemName:"DataListItemTemplate",convertFunction:Global.IsDesigner&&TemplateThumbConversationsMap.DishItemToRestaurantMenu,itemTitle:"Dish Item",description:"No Description",defaultProperties:{itemFields:function(){return{index:{type:"index",title:"Index",name:"index",isDefaultField:true},title:{type:"title",title:"Title",name:"title",isDefaultField:true},description:{type:"description",title:"Description",name:"description",isDefaultField:true},price:{type:"title",title:"Price",name:"price",isDefaultField:true},image:{type:"image",title:"Image",name:"image",isDefaultField:true}}}},features:[Features.DesignElement,Features.HasResponsiveItem,Features.Resizable,Features.Selectable,Features.HasBackground,Features.HasBackgroundImage,Features.HasLayout,Features.Clickable,Features.Hideable,Features.HasBorder,Features.DataList,Features.TemplatePagesList,Features.SimpleDataList],methods:{getDataSourceName:function(){var a=this;return DataListViewPreText+a.id},getDataSourceDefinition:function(){return DataSourcesDefinitions.RestaurantMenuElementView}},aggregatedMethods:{aggregations:{setItem:function(a){}}},initialize:function(b){var a=this}}})})();(function(){ElementsModel.registerDefinition(ElementsTypes,{NewsFeed:{className:"data-list-element",category:ElementsTypesCategories.General,icon:"/images/icons/elements/container.png",iconClass:"sprite-icon sprite-element-list-widget",iconClass24:"sprite-icon sprite-tool-category-news-feed",title:"News Feed",itemName:"DataListItemTemplate",convertFunction:Global.IsDesigner&&TemplateThumbConversationsMap.FeedItemToNewsFeed,itemTitle:"Feed",description:"No Description",defaultProperties:{itemFields:function(){return{index:{type:"index",title:"Index",name:"index",isDefaultField:true},title:{type:"title",title:"Title",name:"title",isDefaultField:true},description:{type:"description",title:"Description",name:"description",isDefaultField:true},image:{type:"image",title:"Image",name:"image",isDefaultField:true}}}},features:[Features.DesignElement,Features.HasResponsiveItem,Features.Resizable,Features.Selectable,Features.HasBackground,Features.HasBackgroundImage,Features.HasLayout,Features.Clickable,Features.Hideable,Features.HasBorder,Features.DataList,Features.TemplatePagesList,Features.SimpleDataList],methods:{getDataSourceName:function(){var a=this;return DataListViewPreText+a.id},getDataSourceDefinition:function(){return DataSourcesDefinitions.NewsFeedElementView}},aggregatedMethods:{aggregations:{setItem:function(a){}}},initialize:function(b){var a=this}}})})();(function(){ElementsModel.registerDefinition(ElementsTypes,{linksList:{className:"data-list-element",category:ElementsTypesCategories.General,icon:"/images/icons/elements/container.png",iconClass:"sprite-icon sprite-element-list-widget",iconClass24:"sprite-icon sprite-tool-category-links-list",title:"Links List",itemName:"DataListItemTemplate",convertFunction:Global.IsDesigner&&TemplateThumbConversationsMap.LinkItemToLinksList,itemTitle:"Data List Item",description:"No Description",defaultProperties:{itemFields:function(){return{index:{type:"index",title:"Index",name:"index",isDefaultField:true},title:{type:"title",title:"Link Title",name:"title",isDefaultField:true},link:{type:"link",title:"Link",name:"link",isDefaultField:true}}}},features:[Features.DesignElement,Features.HasResponsiveItem,Features.Resizable,Features.Selectable,Features.HasBackground,Features.HasBackgroundImage,Features.HasLayout,Features.Clickable,Features.Hideable,Features.HasBorder,Features.DataList,Features.TemplatePagesList],methods:{getDataSourceName:function(){var a=this;return DataListViewPreText+a.id},getDataSourceDefinition:function(){return DataSourcesDefinitions.LinksListElementView}},aggregatedMethods:{aggregations:{setItem:function(a){}}},initialize:function(b){var a=this}}})})();(function(){ElementsModel.registerDefinition(ElementsTypes,{servicesList:{className:"data-list-element",category:ElementsTypesCategories.General,icon:"/images/icons/elements/container.png",iconClass:"sprite-icon sprite-element-list-widget",iconClass24:"sprite-icon sprite-tool-category-services-list",title:"Services List",itemName:"DataListItemTemplate",convertFunction:TemplateThumbConversationsMap.ServiceItemToServicesList,itemTitle:"Data List Item",description:"No Description",defaultProperties:{itemFields:function(){return{index:{type:"index",title:"Index",name:"index",isDefaultField:true},title:{type:"title",title:"Service Title",name:"title",isDefaultField:true},description:{type:"description",title:"Service Description",name:"description",isDefaultField:true},image:{type:"image",title:"Image",name:"image",isDefaultField:true},price:{type:"title",title:"Service Price",name:"price",isDefaultField:true},link:{type:"link",title:"link",name:"link",isDefaultField:true}}}},features:[Features.DesignElement,Features.HasResponsiveItem,Features.Resizable,Features.Selectable,Features.HasBackground,Features.HasBackgroundImage,Features.HasLayout,Features.Clickable,Features.Hideable,Features.HasBorder,Features.DataList,Features.TemplatePagesList,Features.SimpleDataList],methods:{getDataSourceName:function(){var a=this;return DataListViewPreText+a.id},getDataSourceDefinition:function(){return DataSourcesDefinitions.ServicesListElementView}},aggregatedMethods:{aggregations:{setItem:function(a){}}},initialize:function(a){}}})})();(function(){ElementsModel.registerDefinition(ElementsTypes,{facebookSubscribe:{title:"Follow",iconClass:"sprite-icon sprite-element-facebook",defaultProperties:{sizeAndPosition:function(){return{width:450,height:70,top:0,left:0}},facebookPageUrl:function(){return"https://www.facebook.com/zuck"}},features:[Features.DesignElement,Features.HasResponsiveItem,Features.HasPadding,Features.HasContent,Features.Resizable,Features.Hideable,Features.HasBackground,Features.Selectable,Features.HasLayout,Features.HasBorder,Features.HasContentOverlay,Features.FacebookPlugin,Features.HasFaceBookButtonLayout,Features.HasFaceBookFont,Features.HasFaceBookFaces,Features.HasFaceBookPageUrl],methods:{getPluginName:function(){return"subscribe"},creationFunction:function(){return $("<span class='block'></span>")}},aggregatedMethods:{aggregations:{updatePlugin:function(a){a.addClass("no-width-button")}}}}})})();(function(){ElementsModel.registerDefinition(ElementsTypes,{facebookLike:{title:"Like",iconClass:"sprite-icon sprite-element-like",properties:{likeUrl:{defaultValue:$.returnEmptyString},likeCurrentPage:{defaultValue:$.returnTrue}},defaultProperties:{sizeAndPosition:function(){return{width:450,height:70,top:0,left:0}}},features:[Features.DesignElement,Features.HasResponsiveItem,Features.HasPadding,Features.HasContent,Features.Resizable,Features.Hideable,Features.HasBackground,Features.Selectable,Features.HasLayout,Features.HasBorder,Features.HasContentOverlay,Features.FacebookPlugin,Features.HasFaceBookButtonLayout,Features.HasFaceBookFont,Features.HasFaceBookFaces],methods:{getPluginName:function(){return"like"},creationFunction:function(){return $("<span class='block'></span>")}},aggregatedMethods:{aggregations:{computeSupportedFacebookProperties:function(a){return $.merge(a,["likeUrl","likeCurrentPage"])},updatePlugin:function(b){var a;if(this.getPropertyValue("likeCurrentPage")){a=PageManager.getHtmlPageUrl()}else{a=this.getPropertyValue("likeUrl")}b.attr("href",a)}}}}})})();(function(){ElementsModel.registerDefinition(ElementsTypes,{facebookLikeBox:{title:"Like Box",iconClass:"sprite-icon sprite-element-facebook",defaultProperties:{sizeAndPosition:function(){return{width:450,height:70,top:0,left:0}},facebookPageUrl:function(){return"http://www.facebook.com/platform"},facebookStream:$.returnFalse,facebookHeader:$.returnFalse},features:[Features.DesignElement,Features.HasResponsiveItem,Features.HasPadding,Features.HasContent,Features.Resizable,Features.Hideable,Features.HasBackground,Features.Selectable,Features.HasLayout,Features.HasBorder,Features.HasContentOverlay,Features.FacebookPlugin,Features.HasFaceBookStream,Features.HasFaceBookPageUrl,Features.HasFaceBookHeader,Features.HasFaceBookFaces],methods:{getPluginName:function(){return"like-box"},creationFunction:function(){return $("<span class='block'></span>")}}}})})();(function(){var a=DeferredObject.create(function(){return $.uniqueID().toString()});ElementsModel.registerDefinition(ElementsTypes,{facebookComments:{title:"Facebook Comments",iconClass:"sprite-icon sprite-element-facebook",defaultProperties:{sizeAndPosition:function(){return{width:450,height:450,top:0,left:0}}},properties:{numOfPosts:{defaultValue:function(){return 3}},commentsUrl:{defaultValue:$.returnEmptyString},commentCurrentPage:{defaultValue:$.returnTrue}},features:[Features.DesignElement,Features.HasResponsiveItem,Features.HasPadding,Features.HasContent,Features.Resizable,Features.Hideable,Features.HasBackground,Features.Selectable,Features.HasLayout,Features.HasBorder,Features.HasContentOverlay,Features.FacebookPlugin,Features.Growable],methods:{getPluginName:function(){return"comments"},creationFunction:function(){return $("<span class='block overflow-hidden absolute-fill'></span>")}},aggregatedMethods:{aggregations:{computeSupportedFacebookProperties:function(b){return $.merge(b,["numOfPosts","commentsUrl"])},onInstanceParsed:function(){if(!Global.IsDesigner||ViewManager.isViewMode()){var b=this.calculateSizeContent();if(b){this.whenInstanceContentHeightChanged(b.height,{lastElementSizeIsTheMinSize:MobileVersionViewManager.Flags.IsInMobileContext.isTrue()})}}},updatePlugin:function(d){var b=this;d.attr("num_posts",this.getPropertyValue("numOfPosts"));var c=$.getRootWindow().location.href;if(ViewManager.isDesignMode()){c=PathUtils.combinePaths(c,$.uniqueID().toString())}else{if(Global.IsDesigner||SiteManager.isTemplate()){c=PathUtils.combinePaths(c,a.get(),UrlManager.getFragment())}}d.attr("href",c)},switchToPreview:function(){this.data.facebookCommentsUrlChangedListener.activateAndExecute()},switchToDesign:function(){this.data.facebookCommentsUrlChangedListener.deactivate()}}},onInstanceInitialized:function(){var b=this;b.data.facebookCommentsUrlChangedListener=SimpleEvent.createEventListener([UrlManager.Events.UrlChangedEvent],function(){b.performWhenVisible(function(){b.recreatePlugin()},"facebookCommentsUrlChangedListend"+b.id)});if($.browser.msie&&parseInt($.browser.version)<9){b.resizingStopped.bind(function(){b.recreatePlugin()})}if($.browser.msie&&parseInt($.browser.version)<9){if(ViewManager.isViewMode()){window.setTimeout(function(){b.recreatePlugin()},750)}}b.instanceRemoving.one(function(){b.data.facebookCommentsUrlChangedListener.dispose()})}}})})();(function(){ElementsModel.registerDefinition(ElementsTypes,{facebookActivity:{title:"Facebook Activity",iconClass:"sprite-icon sprite-element-facebook",defaultProperties:{sizeAndPosition:function(){return{width:450,height:450,top:0,left:0}}},features:[Features.DesignElement,Features.HasResponsiveItem,Features.HasPadding,Features.HasContent,Features.Resizable,Features.Hideable,Features.HasBackground,Features.Selectable,Features.HasLayout,Features.HasBorder,Features.HasContentOverlay,Features.FacebookPlugin,Features.HasFaceBookHeader,Features.HasFaceBookFont,Features.HasFaceBookRecommendations],properties:{facebookActivityDomain:{defaultValue:function(){return"developers.facebook.com"}}},aggregatedMethods:{aggregations:{computeSupportedFacebookProperties:function(a){return $.merge(a,["facebookActivityDomain"])},updatePlugin:function(a){a.attr("data-site",this.getPropertyValue("facebookActivityDomain"))}}},methods:{getPluginName:function(){return"activity"},creationFunction:function(){return $("<span class='block'></span>")}}}})})();(function(){ElementsModel.registerDefinition(ElementsTypes,{facebookFacePile:{title:"Face Pile",iconClass:"sprite-icon sprite-element-facebook",defaultProperties:{sizeAndPosition:function(){return{width:450,height:70,top:0,left:0}},facebookPageUrl:function(){return SocialLinksManager.getLink("facebook")}},features:[Features.DesignElement,Features.HasResponsiveItem,Features.HasPadding,Features.HasContent,Features.Resizable,Features.Hideable,Features.HasBackground,Features.Selectable,Features.HasLayout,Features.HasBorder,Features.HasContentOverlay,Features.FacebookPlugin,Features.HasFaceBookSize,Features.HasFaceBookPageUrl,Features.HasFaceBookPageNumRows],methods:{getPluginName:function(){return"facepile"},creationFunction:function(){return $("<span class='block'></span>")}}}})})();(function(){var j={ElementContent:{useTemplate:function(){var k=new StringBuilder();k.append('<div class="google-map-element absolute-fill" style="overflow:hidden;">');k.append('<div class="google-map-container gmap3" style="width:100%; height:100%;"></div>');if(Global.IsDesigner){k.append('<div class="map-overlay absolute-fill" ></div>')}k.append("</div>");return $(k.toString())}}};ElementsModel.registerDefinition(ElementsTypes,{googleMap:{title:"Google Map",iconClass:"sprite-icon sprite-element-map",getExtensions:function(k){return{mapStyleObject:ObservableObject.create()}},properties:{zooming:{defaultValue:function(){return 8},isStateProperty:true,title:"Zoom",category:PropertiesCategories.Other,onChange:function(l,m){var k=this;if(this.data.mapController&&!k.data.ignorePropertiesChange){k.data.mapController.setZoom(m)}}},mapPosition:{title:"Map Position",isContentProperty:true,isStateProperty:true,defaultValue:function(){return[41.866236,-87.617094]},onChange:function(l,m){var k=this;if(this.data.mapController&&!k.data.ignorePropertiesChange){setTimeout(function(){k.data.mapController.setCenter(m)})}}},mapType:{title:"Map Type",isStateProperty:true,defaultValue:function(){return GoogleMapTypes.Roadmap},onChange:function(k,l){if(this.data.mapController){this.data.mapController.setOptions({mapTypeId:l})}}},streetView:{title:"Street View",isStateProperty:true,defaultValue:$.returnFalse},streetViewVisible:{title:"Street View Visible",isStateProperty:true,defaultValue:$.returnTrue,onChange:function(k,l){if(this.data.mapController){this.data.mapController.setOptions({streetViewControl:l})}}},positionVisible:{title:"Position Visible",isStateProperty:true,defaultValue:$.returnTrue,onChange:function(k,l){if(this.data.mapController){this.data.mapController.setOptions({panControl:l})}}},mapTypeVisible:{title:"Map Type Visible",isStateProperty:true,defaultValue:$.returnTrue,onChange:function(k,l){if(this.data.mapController){this.data.mapController.setOptions({mapTypeControl:l})}}},mapColor:{title:"Map Color",isStateProperty:true,isStyleProperty:true,supportsThemeBinding:true,getResetValue:$.returnTransparent,defaultValue:$.returnTransparent,onChange:function(l,m){var k=this;f(k,m)}},mapDraggable:{title:"is Map Editable",isStateProperty:true,defaultValue:$.returnFalse},markers:{title:"Markers",isContentProperty:true,defaultValue:$.returnEmptyObject,onChange:function(l,m){var k=this;if(!k.data.ignorePropertiesChange&&k.data.mapController){k.data.mapController.setMarkers($.extend({},m))}}}},features:[Features.DesignElement,Features.HasResponsiveItem,Features.HasPadding,Features.HasContent,Features.Resizable,Features.Hideable,Features.Clickable,Features.Selectable,Features.HasLayout,Features.Editable,Features.ExpressMode,Features.HasBorder],methods:{getMapController:function(){return this.data.mapController},refreshMapPosition:function(){var k=this;PropertiesManager.invalidateProperty(k,"mapPosition")},getMarkersCollection:function(){return this.getMapController().markers},moveToMarker:function(k){this.getMapController().setCenter(k.position);c(this)},updateMarkerPosition:function(l,m){var k=this;k.updateMarker(l.name,{position:m},function(n){n.title=undefined;return n})},setMarkerIcon:function(k,l){this.updateMarker(k.name,{icon:l})},updateMarker:function(o,k,l){l=l?l:$.returnValue;var n=$.extend({},this.getPropertyValue("markers"));var m=$.extend({},n[o],k);m=l(m);n[o]=m;this.setPropertyValue("markers",n)},addMarker:function(m){var k=this;var l=$.uniqueID();var o=$.extend({},this.getPropertyValue("markers"));for(var n in o){if(m.position[0]===o[n].position[0]||m.position[1]===o[n].position[1]){return}}k.updateMarker(l,$.extend({name:l},m))},removeMarker:function(k){var l=$.extend({},this.getPropertyValue("markers"));delete l[k.name];this.setPropertyValue("markers",l)},clearAllMarkers:function(){var l=$.extend({},this.getPropertyValue("markers"));for(var k in l){delete l[k]}this.setPropertyValue("markers",l)},creationFunction:function(k){var l=$.useTemplate(j.ElementContent);k.data.$dataContent=$(".google-map-container",l);k.data.$mapOverlay=$(".map-overlay",l);return l}},aggregatedMethods:{aggregations:{updateInstanceToViewPort:function(){var k=this;k.refreshMapPosition();d(k,false)},removeInstanceFromViewPort:function(){var k=this;PositionManager.activateWhenInstanceVisible(k,function(){k.refreshMapPosition()});d(k,true)},onStartEditing:function(){var k=this;k.data.mapPositionListener.activate();k.data.mapZoomingListener.activate();k.data.mapTypeListener.activate();a(k,false)},onFinishEditing:function(l){var k=this;k.data.mapPositionListener.deactivate();k.data.mapZoomingListener.deactivate();k.data.mapTypeListener.deactivate();a(k,true)},switchToDesign:function(l){var k=this;b(k,true);a(k,true);d(k,true);if(l){k.getMapController().setCenter(k.getPropertyValue("mapPosition"));k.getMapController().setZoom(k.getPropertyValue("zooming"));k.getMapController().setOptions({mapTypeId:k.getPropertyValue("mapType")})}},switchToPreview:function(){var k=this;b(k,k.getPropertyValue("mapDraggable"));a(k,false);d(k,false)}}},initialize:i,onInstanceInitialized:function(){var k=this;var l=k.getMapController();k.sizeChangedEvent.bind(function(){k.getMapController().refreshSize();k.data.mapController.setCenter(k.getPropertyValue("mapPosition"))})}}});function b(k,l){k.getMapController().setOptions({draggable:l,scrollwheel:l})}function i(l){var k=this;var m=GoogleMapHelper.createMap(k.data.$dataContent);k.data.mapController=m;k.data.ignorePropertiesChange=false;k.mapStyleObject.setValue({mapColor:{stylers:[{hue:""},{saturation:""},{lightness:""}]}});if(Global.IsDesigner){k.data.mapPositionListener=SimpleEvent.createEventListener(m.currentCenter.valueChangedEvent,function(){c(k)});k.data.mapZoomingListener=SimpleEvent.createEventListener(m.currentZoom.valueChangedEvent,function(){h(k)});k.data.mapTypeListener=SimpleEvent.createEventListener(m.mapTypeId.valueChangedEvent,function(n){k.setPropertyValue("mapType",n)})}a(k,true)}function c(k){var l=k.getMapController();k.data.ignorePropertiesChange=true;k.setPropertyValue("mapPosition",GoogleMapHelper.latLngToArray(l.currentCenter.getValue()));k.data.ignorePropertiesChange=false}function h(k){var l=k.getMapController();k.data.ignorePropertiesChange=true;k.setPropertyValue("zooming",l.currentZoom.getValue());k.data.ignorePropertiesChange=false}function a(k,l){k.data.$mapOverlay.quickToggle(l)}function g(k){var n=[];var l=k.mapStyleObject.getValue();for(var m in l){n.push(l[m])}return n}function d(k,n){var m=k.getMarkersCollection().getItems();for(var l in m){m[l].setOptions({draggable:n})}}function f(k,m){if(m==="transparent"){k.mapStyleObject.setValue({mapColor:{stylers:[{hue:""},{saturation:""},{lightness:""}]}});var n=g(k);k.data.mapController.setOptions({styles:n})}else{if(m){if(typeof m==="string"){m=$.Color(m)}m=ThemeColorsManager.evaluateColorBinding(m);var l=$.color.RGB.toHEX(m);m=$.color.RGB.toHSL(m);if(k.data.mapController){k.mapStyleObject.setValue({mapColor:{stylers:[{hue:l},{saturation:parseInt((m[1]*200)-100)},{lightness:parseInt((m[2]*200)-100)}]}});var n=g(k);k.data.mapController.setOptions({styles:n})}}}}})();(function(){ElementsModel.registerDefinition(ElementsTypes,{userBox:{className:"userBox",category:ElementsTypesCategories.Containers,icon:"/images/icons/elements/container.png",iconClass:"sprite-icon sprite-element-panel",title:"Box",description:"No Description",features:[Features.DesignElement,Features.HasResponsiveItem,Features.HasPadding,Features.HasContent,Features.Resizable,Features.Selectable,Features.HasBackground,Features.HasBackgroundImage,Features.HasLayout,Features.ItemsContainer,Features.HasChildrenLayoutAnchor,Features.Clickable,Features.Hideable,Features.HasBorder,Features.Rotatable,Features.ExpressMode],onInstanceCreated:function(){var a=this;a.$elementContentContainer.addClass("box-content-container")},methods:{creationFunction:function(){return $("<div></div>").addClass("absolute-fill")},isEditableInExpressMode:function(){return this.getPropertyValue("overflow")&&this.isSelectable},hasHeight:function(){if(this.hasCellWrapper.isTrue()&&this.isRelativePositioned()){var a=$.grep(this.childInstances,function(b){return b.isInstanceVisible()});if(a.length>0){return false}}return true},hasWidth:function(){return true}},aggregatedMethods:{aggregations:{updateInstanceToViewPort:function(){if(this.childInstances.length===0){this.isDisplayed.setValue(false,"noInstancesInContainer")}},removeInstanceFromViewPort:function(){if(this.childInstances.length===0){this.isDisplayed.setValue(true,"noInstancesInContainer")}}}}}})})();(function(){ElementsModel.registerDefinition(ElementsTypes,{templateBox:{className:"template-box",category:ElementsTypesCategories.Containers,icon:"/images/icons/elements/container.png",iconClass:"sprite-icon sprite-element-template",title:"Template Box",description:"No Description",defaultProperties:{backgroundColor:function(){return"white"}},features:[Features.DesignElement,Features.HasPadding,Features.HasContent,Features.Resizable,Features.Selectable,Features.HasBackground,Features.HasBackgroundImage,Features.HasLayout,Features.ItemsContainer,Features.Clickable,Features.Hideable,Features.HasBorder,Features.DataListItem],aggregatedMethods:{aggregations:{canRedropTo:function(){return false}}},methods:{creationFunction:function(){return $("<div></div>").addClass("absolute-fill")},canDuplicate:function(){return false}}}})})();(function(){$.extend(Global.Events,{VideoStateChanged:SimpleEvent.create()});var o={ElementContent:{id:"youtube-element-template"}};ElementsModel.registerDefinition(ElementsTypes,{youtube:{getExtensions:function(p){return{imageValueObject:ObservableObject.createPropertyBinding(p,{propertyName:PropertiesTypes.imageUrl.name})}},className:"youtube-element",category:ElementsTypesCategories.Content,title:"YouTube",description:"No Description",defaultProperties:{backgroundColor:function(){return"Transparent"},opacity:function(){return 1},sizeAndPosition:function(){return{width:150,height:110,top:0,left:0}}},widgets:[Widgets.PlayButton,Widgets.StopButton,Widgets.PauseButton],properties:{videoId:{defaultValue:$.returnNull,isStateProperty:true,isContentProperty:true,title:"Video Id",supportsBinding:true,isBound:function(p){return p.isBound&&p.isBound(DataSourceItemsFields.video.getContentType())},isInTemplate:function(p){return !PropertiesTypes.videoId.isBound(p)},onChange:function(p,s){var q=this.getPropertyValue("imageUrl");var r=AssetsManager.getImageInfoForSaving({imagePath:"http://img.youtube.com/vi/"+s+"/0.jpg",storageServer:0});OperationsManager.disableBatch();this.imageValueObject.setValue(r);OperationsManager.endDisableBatch()}},autoPlay:{title:"Auto play",category:PropertiesCategories.Other,defaultValue:$.returnFalse},useController:{title:"Use Player",isStateProperty:true,category:PropertiesCategories.Other,defaultValue:$.returnTrue},useLoop:{title:"Loop Playing",isStateProperty:true,category:PropertiesCategories.Other,defaultValue:$.returnFalse}},features:[Features.DesignElement,Features.HasResponsiveItem,Features.HasPadding,Features.HasContent,Features.Resizable,Features.Selectable,Features.HasBackground,Features.Clickable,Features.HasBackgroundImage,Features.HasLayout,Features.Hideable,Features.HasBorder,Features.ExpressMode,Features.HasContentOverlay],methods:{creationFunction:g,play:function(){try{c(this)}catch(p){c(this);console.warn("youtube play error - ")}},stop:function(){try{j(this)}catch(p){j(this);console.warn("youtube stop error - ")}},pause:function(){try{n(this)}catch(p){n(this);console.warn("youtube pause error - ")}},hasBinding:function(){return PropertiesTypes.videoId.isBound(this)},isAutoPlay:function(){return this.getPropertyValue("autoPlay")&&!Global.IsMobileView&&MobileVersionViewManager.Flags.IsInMobileContext.isFalse()}},onInstanceInitialized:b,aggregatedMethods:{aggregations:{onUpdateBindingReady:function(u){var p=this;var q=this.getPropertyValue("videoId");var t;if($.isPlainObject(q)){t=$.extend({},q)}else{t=q}var v=this.getPropertyValue("binding");var r=v.dataFields;var s={};if(this.isBound(DataSourceItemsFields.video.getContentType())){s[r[DataSourceItemsFields.video.getContentType()].name]=t}return $.extend({},u,s)},createBindingFieldsToProperties:function(q){var p=this;if(p.isBound(DataSourceItemsFields.video.getContentType())){q[PropertiesTypes.videoId.name]=ObservableObject.createPropertyBinding(p,{propertyName:PropertiesTypes.videoId.name})}return q},onContentTypeChanged:function(){var p=this;p.setPropertyValue(PropertiesTypes.videoId.name,DesignerManager.VideosIds[0])},onBoundValueReady:function(q){var p=this;if(p.isBound(DataSourceItemsFields.video.getContentType())){var r=q[DataSourceItemsFields.video.getContentType()]===undefined?DesignerManager.VideosIds[0]:q[DataSourceItemsFields.video.getContentType()];p.setBindingValueToProperty(r,PropertiesTypes.videoId.name);p.setBindingValueToProperty(r,PropertiesTypes.videoId.name)}},switchToPreview:function(){var p=this;p.data.isEditorPreviewMode.setValue(false);if(PageManager.getCurrentPageId()===p.getPageId()){if(p.isAutoPlay()){p.play()}else{if(!Global.IsMobileClient){k(p)}}}},switchToDesign:function(q){var p=this;p.data.isEditorPreviewMode.setValue(true);if(PageManager.getCurrentPageId()===p.getPageId()){if(q){p.stop()}}k(p)},onRemove:function(){f(this)},onPropertiesChanged:function(q){var p=this;if(p.propertiesInitialized){if(!this.isForTemplateUse()){if($.containsOneOfKeys(q,"useController","videoId","useLoop")){p.data.youtubePlayer.setOptions(h(p),ViewManager.isDesignMode())}}}}}}}});function b(r){var p=this;p.data.isEditorPreviewMode=ObservableFlag.create(ViewManager.isDesignMode());p.data.$videoIconHolder=m();var q=$(".icon-holder",p.data.$videoIconHolder);p.data.$videoIcon=q;p.data.$videoIconHolder.makeButton().buttonClick(function(){p.play();p.data.$videoIconHolder.toggleDisplayed(false)});p.data.$videoIconHolder.prependTo(p.$elementContentContainer);if(Global.IsDesigner){p.refreshOverlay()}if(!Global.IsMobileClient){k(p)}l(p);if(Global.IsMobileClient){i(p)}var s=SimpleEvent.createBindingsCollection();p.data.youtubeBindings=s;p.visibilityChangedEvent.bind(function(t){if(t){if(p.isAutoPlay()&&(ViewManager.isViewMode())){if(!Global.IsDesigner||!ModeManager.isDuringPageSwitching()){p.play()}}}else{p.stop()}})}function m(){var p=new StringBuilder();p.append('<div class="youtube-icon-holder content-centered absolute-fill ">');p.append('<span class="height-normalizer"></span>');p.append('<span class="vertically-centered">');p.append('<span class="icon-holder block">');p.append('<span class="icon image-sprite-youtube-play-button inline-block"></span>');p.append("</span>");p.append("</span>");p.append("</div>");return $.useSimpleTemplate(p.toString())}function d(p){var q=p.getDuration();p.seekTo(q-q,false)}function a(p,q){if(q){p.data.youtubePlayerHolder.toggleDisplayed(false,"showPreviewInfo");p.showImageLayer.setValue(true,"showPreviewInfo")}else{}}function k(p){OperationsManager.disableBatch();p.data.youtubePlayerHolder.toggleDisplayed(false,"showPreviewInfo");p.data.$videoIconHolder.toggleDisplayed(true);p.showImageLayer.setValue(true,"showPreviewInfo");if(p.data.youtubePlayer){p.data.youtubePlayer.detach()}OperationsManager.endDisableBatch()}function i(p){OperationsManager.disableBatch();p.showImageLayer.setValue(false,"showPreviewInfo");p.data.$videoIconHolder.toggleDisplayed(false);p.data.youtubePlayerHolder.toggleDisplayed(true,"showPreviewInfo");p.data.youtubePlayer.toggleInitilized(true);try{p.data.youtubePlayer.appendTo(p.data.youtubePlayerHolder);p.data.youtubePlayer.reload()}catch(q){console.warn("youtube reload error - ")}OperationsManager.endDisableBatch()}function l(p){if(p.isForTemplateUse()){return}var q=YoutubeHelper.createPlayer(p.data.$youtubeIframe,h(p),false);q.call("setLoop",p.getPropertyValue("useLoop"));p.data.youtubePlayer=q}function h(p){var r=p.getPropertyValue("useLoop");var q=p.getPropertyValue("videoId");return{videoID:q,controls:p.getPropertyValue("useController")?1:0,loop:r?1:0,playlist:r?q:"",wmode:"transparent",isHtml5:false}}function g(q){var r=q.getPropertiesValues();var p=$.useTemplate(o.ElementContent);q.data.youtubePlayerHolder=p.addDisplayingStates();q.data.$youtubeIframe=$(".youtube-iframe",p);q.data.$youtubeIframe.detach();return p}function c(p){i(p);p.data.youtubePlayer.whenReady(function(){var q=this.getPlayerState();if(q===YoutubePlayerStates.Paused){this.playVideo()}else{if(q!==YoutubePlayerStates.Playing){d(this);this.playVideo()}}})}function j(p){k(p)}function n(p){p.data.youtubePlayer.whenReady(function(){this.pauseVideo()})}function f(p){p.data.youtubeBindings.unbindAll();p.data.youtubePlayer.whenReady(function(){p.data.youtubePlayer.call("destroy")})}})();(function(){ElementsModel.registerPropertiesCategories({"Image Loading":{title:"Image Loading",iconClass:"sprite-icon sprite-property-category-text"}});ElementsModel.registerDefinition(ElementsTypes,{image:{className:"image-element",category:ElementsTypesCategories.Content,icon:"/images/icons/elements/container.png",iconClass:"sprite-icon sprite-element-image",title:"Image",description:"No Description",defaultProperties:{backgroundColor:function(){return"transparent"},borderColor:function(){return $.convertValueToObject("black",["top","left","bottom","right"])},borderWidth:function(){return $.convertValueToObject(0,["top","left","bottom","right"])},opacity:function(){return 0},sizeAndPosition:function(){return{width:200,height:200,top:0,left:0}},imageUrl:function(){return DesignerManager.getDefaultImage()}},features:[Features.DesignElement,Features.HasResponsiveItem,Features.Resizable,Features.Selectable,Features.Hideable,Features.HasBackground,Features.HasLayout,Features.Clickable,Features.HasImage,Features.HasBorder,Features.ExpressMode,Features.Rotatable,Features.HasBackgroundOverlay],properties:{imageLoadingOverlay:{title:"Loading Overlay",isStateProperty:false,isStyleProperty:true,defaultValue:function(){return{background:"rgba(255,255,255,0.7)",imageInfo:{image:CommonAssets.Images.CircleBall}}},onChange:function(b,c){}},imageLoadingSettings:{title:"Loading Settings",isStateProperty:false,isStyleProperty:true,supportsThemeBinding:true,defaultValue:function(){return{hideImage:false,showOverlay:false,showingAnimation:undefined,overlayBackground:"rgba(255,255,255,0.7)",overlayImage:CommonAssets.Images.CircleBall}}},alt:{defaultValue:$.returnNull,supportsBinding:true,isBound:function(b){return b.isBound&&(b.isBound(DataSourceItemsFields.title.getContentType())||b.isBound(DataSourceItemsFields.description.getContentType())||b.isBound(DataSourceItemsFields.alt.getContentType()))},isInTemplate:function(b){return !PropertiesTypes.alt.isBound(b)},onChange:function(){a(this)}}},methods:{getImageSizeInLayout:function(){return this.getImageBox().getImageSizeInLayout()},hasBinding:function(){return PropertiesTypes.imageUrl.isBound(this)},hideImageLoadingOverlay:function(){var b=this.data.imageLoadingOverlayController;if(b){b.hide()}},showImageLoadingOverlay:function(){var b=this;var f=b.getPropertyValue("imageLoadingSettings");if(!f.showOverlay){return}var c=b.data.imageLoadingOverlayController;if(!c){var i=b.addBackgroundLayer(BackgroundLayers.BackgroundImageOverlay,function(){var k=new StringBuilder();k.append('<div class="image-loading-overlay stretched-to-fill element-border-target">');k.conditionalAppend(Global.IsExplorerMode,'<div class="explorer-background"></div>');k.append('<div class="loading-image stretched-to-fill"></div>');k.append("</div>");return $(k.toString())});var j=i.find(".loading-image").makeImageBoxNew({layout:ImageBoxLayout.Original,autoLoad:true});var d=SimpleEvent.createEventListener(b.sizeChangedEvent,function(){j.setViewPort(b.getSize())});var h=Global.IsExplorerMode?i.find(".explorer-background"):i;b.setBorderTarget(i);var g=QuickStates.createDisplayController(i);g.setValue(false);c={show:function(){d.activateAndExecute();var k=b.getPropertyValue("imageLoadingSettings");j.setImage(AssetsManager.resolveImageUrl(k.overlayImage));var l=ThemeColorsManager.evaluateColorBinding(k.overlayBackground);h.clearBackground();if(ColorsHelper.isGradient(l)){h.applyGradientColor(l)}else{h.css("rgbaBackground",l)}g.setValue(true)},hide:function(){d.deactivate();g.setValue(false)}};b.data.imageLoadingOverlayController=c}c.show()}},aggregatedMethods:{aggregations:{adjustInstanceToViewPort:function(){var c=this.getSize();if(c){var b=c.width<340?c.width:340;ElementsLayoutHelper.setInstancesSize(this,{width:b,height:(b/c.width)*c.height})}},onUpdateBindingReady:function(h){var b=this;var d=this.getPropertyValue("imageUrl");var g=this.getPropertyValue("alt");if($.isPlainObject(d)){d=$.extend({},d)}var i=this.getPropertyValue("binding");var c=i.dataFields;var f={};if(this.isBound(DataSourceItemsFields.image.getContentType())){f[c[DataSourceItemsFields.image.getContentType()].name]={imageUrl:d}}else{if(this.isBound(DataSourceItemsFields.icon.getContentType())){f[c[DataSourceItemsFields.icon.getContentType()].name]={imageUrl:d}}}if(this.isBound(DataSourceItemsFields.title.getContentType())){f[c[DataSourceItemsFields.title.getContentType()].name]=g}else{if(this.isBound(DataSourceItemsFields.description.getContentType())){f[c[DataSourceItemsFields.description.getContentType()].name]=g}else{if(this.isBound(DataSourceItemsFields.alt.getContentType())){f[c[DataSourceItemsFields.alt.getContentType()].name]=g}}}return $.extend({},h,f)},onContentTypeChanged:function(d){var c=this;var g=DataSourceItemsFields.image.getContentType();var f=DataSourceItemsFields.icon.getContentType();var b={};if(d===undefined||d===g){b[PropertiesTypes.imageUrl.name]=DesignerManager.getDefaultImage()}else{if(d===f){b[PropertiesTypes.imageUrl.name]=DesignerManager.getDefaultIcon()}}c.setPropertiesValues(b)},createBindingFieldsToProperties:function(g){var b=this;var h=DataSourceItemsFields.image.getContentType();if(b.isBound(h)){g[PropertiesTypes.imageUrl.name]=ObservableObject.createPropertyBinding(b,{propertyName:PropertiesTypes.imageUrl.name});g[PropertiesTypes.imageLayout.name]=ObservableObject.createPropertyBinding(b,{propertyName:PropertiesTypes.imageLayout.name});g[PropertiesTypes.imagePosition.name]=ObservableObject.createPropertyBinding(b,{propertyName:PropertiesTypes.imagePosition.name})}var c=DataSourceItemsFields.title.getContentType();var f=DataSourceItemsFields.description.getContentType();var d=DataSourceItemsFields.alt.getContentType();if(b.isBound(c)||b.isBound(f)||b.isBound(d)){g[PropertiesTypes.alt.name]=ObservableObject.createPropertyBinding(b,{propertyName:PropertiesTypes.alt.name})}return g},onBoundValueReady:function(j,b){var k=this;var c=DataSourceItemsFields.image.getContentType();var h=DataSourceItemsFields.icon.getContentType();var f=DataSourceItemsFields.title.getContentType();var d=DataSourceItemsFields.description.getContentType();var g=DataSourceItemsFields.alt.getContentType();var l={};var i;if(k.isBound(c)){i=j[c]?j[c]:{};$.extend(l,{imageUrl:j[c]===undefined?DesignerManager.getDefaultImage():i.imageUrl,imageLayout:i.imageLayout,imagePosition:i.imagePosition})}else{if(k.isBound(h)){i=j[h]?j[h]:{};$.extend(l,{imageUrl:j[h]===undefined?DesignerManager.getDefaultIcon():i.imageUrl,imageLayout:i.imageLayout,imagePosition:i.imagePosition})}}if(k.isBound(g)){$.extend(l,{alt:j[g]===undefined?null:j[g]})}if(!k.isBound(g)||!j[g]){if(k.isBound(f)){$.extend(l,{alt:j[f]===undefined?null:j[f]})}else{if(k.isBound(d)){$.extend(l,{alt:j[d]===undefined?null:j[d]})}}}k.setBindingValuesToProperties(l)},onImageBoxCreated:function(c){var b=this;c.trackStates(ImageBoxState.LoadingImage,{setCallback:function(){b.showImageLoadingOverlay()},unsetCallback:function(){b.hideImageLoadingOverlay()}});a(this)}}},onInstanceInitialized:function(){var b=this;b.sizeChangedEvent.bindAndExecute(function(){b.setImageBoxViewport(b.getSize())})}}});function a(b){var d=b.getImageBox();if(d){var c=b.getPropertyValue("alt");if(c){d.setAlt(c)}else{d.setAlt(undefined)}}}})();var TabsPanelTransitions={None:{title:"No Effect",transitionOrder:TransitionOrder.Simultaneously,entranceAnimation:"NoAnimation",exitAnimation:"NoAnimation"},CrossFade:{title:"Cross Fade",transitionOrder:TransitionOrder.Simultaneously,entranceAnimation:"Fade",exitAnimation:"Fade"},Fade:{title:"Fade",transitionOrder:TransitionOrder.ExitBeforeEnter,entranceAnimation:"Fade",exitAnimation:"Fade"},FadeOver:{title:"Fade Over",transitionOrder:TransitionOrder.EnterBeforeExit,entranceAnimation:"Fade",exitAnimation:"NoAnimation"},SlideOver:{title:"Slide Over",transitionOrder:TransitionOrder.EnterBeforeExit,entranceAnimation:"Slide",exitAnimation:"NoAnimation"},SlideRight:{title:"Slide Right",transitionOrder:TransitionOrder.Simultaneously,entranceAnimation:"Slide",exitAnimation:"Slide"}};(function(){ElementsModel.registerDefinition(ElementsTypes,{TabsPanel:{className:"switch-panel-element",category:ElementsTypesCategories.Containers,icon:"/images/icons/elements/container.png",iconClass:"sprite-icon sprite-element-panel",title:"Tabs",description:"No Description",features:[Features.DesignElement,Features.HasResponsiveItem,Features.HasPadding,Features.HasContent,Features.Resizable,Features.Selectable,Features.HasLayout,Features.ItemsContainer,Features.HasChildrenLayoutAnchor,Features.Clickable,Features.Hideable,Features.HasBorder,Features.Navigatable,Features.ExpressMode],calculatedProperties:["backgroundColor","backgroundOverlay","imageUrl","imageLayout","imagePosition","padding","lineColor","roundness","borderWidth","borderStyle","borderColor","shadow","innerShadow","borderColor","glow","innerGlow","childrenAnchor"],methods:{getContextChildren:function(){var b=this.getCurrentItem();if(b){return b.getChildInstances()}return[]},isEditableInExpressMode:function(){return true&&this.isSelectable},navigateTo:function(c,f,b,d){this.showItem(c,f,b,d)},navigate:function(i,h,c,g){if(c===undefined){c=$.noop}var d=this.getNavigatableInstances();var f=d.length;if(f===0){c();return}var b=(this.getCurrentItem().getChildIndex()+i)%f;if(b<0){b+=f}this.showItem(b,h,c,g)},getAutoNavigationDuration:function(){return this.getPropertyValue("autoNavigationDuration")},addItem:function(b){b=$.extend({withCallOut:false,tabName:undefined,id:undefined,initialProperties:{all:{}}},b);Global.Events.ElementsAdding.fire();b.initialProperties.all.name=b.tabName;var f=this.getCurrentItem();if(f){b.initialProperties.all=$.extend(true,b.initialProperties.all,{backgroundColor:f.getPropertyValue("backgroundColor")})}var d=TemplatesManager.addTemplateInstance(DesignTools.Tab.utilizationData,this.$element,b);var c=d.instances[0];return c},addCustomItem:function(b){Global.Events.ElementsAdding.fire();var d=TemplatesManager.addTemplateInstance({elementForCreation:b},this.$element);var c=d.instances[0];return c},showItem:function(v,z,m,c){var y=this;if(!PositionManager.isElementVisible(this)){return}var p=y.getPropertyValue("navigationDuringTransitionBehaviour");if(y.data.duringAnimatedTransition){switch(p){case NavigationDuringTransitionBehaviour.StopTransition:var w=y.data.animatedTabsOrder;if(w){for(var u=0;u<w.length;u++){w[u].stopVisibilityAnimations()}}break;case NavigationDuringTransitionBehaviour.IgnoreNavigation:return;case NavigationDuringTransitionBehaviour.EnqueueNavigation:y.data.pendingTransition={tabSelector:v,performAnimation:z,navigateCallback:m,animationOptions:c};break}}OperationsManager.disableBatch();if(z===undefined){z=true}if(m===undefined){m=$.noop}if(!PositionManager.isElementVisible(this)){z=false}var t=undefined;if(isFinite(v)){var x=this.getChildInstances();t=x[Math.max(0,Math.min(x.length-1,v))]}else{if(typeof v==="string"){t=ElementsManager.getInstanceByID(v)}else{t=v}}var f=this.data.currentTab;if(f!==t){y.stopAutoNavigation();if(f){t.$element.insertAfter(f.$element)}this.data.currentTab=t;y.currentItemChangedEvent.fire(y,{prevItem:f,currentItem:t});Global.Events.NavigableTabChanged.fire();if(z){y.data.duringAnimatedTransition=true;$.each(t.getDescendingInstances(false),function(B,A){if(PositionManager.isTrackOver(A)){A.data.isTrackOverInTransition=true;PositionManager.stopMouseOverTracking(A)}});var d=c&&c.transitionOrder?c.transitionOrder:this.getPropertyValue("transitionOrder");var k=c&&c.entranceAnimation?c.entranceAnimation:this.getPropertyValue("entranceAnimation");var s=c&&c.entranceAnimationSpeed?c.entranceAnimationSpeed:this.getPropertyValue("entranceAnimationSpeed");var j=c&&c.entranceAnimationDirection?c.entranceAnimationDirection:this.getPropertyValue("entranceAnimationDirection");var r=undefined;var b=undefined;var o=undefined;if(f){r=c&&c.exitAnimation?c.exitAnimation:this.getPropertyValue("exitAnimation");b=c&&c.exitAnimationSpeed?c.exitAnimationSpeed:this.getPropertyValue("exitAnimationSpeed");o=c&&c.exitAnimationDirection?c.exitAnimationDirection:this.getPropertyValue("exitAnimationDirection")}if(d===TransitionOrder.Simultaneously||!f){y.data.animatedTabsOrder=[t];if(f){y.data.animatedTabsOrder.push(f)}var h;var n=t.showElement({animation:k,animationOptions:{duration:s,direction:j},complete:q});if(f){h=f.hideElement({animation:r,animationOptions:{duration:b,direction:o},complete:g})}$.when(n,h).done(function(){l()})}else{if(d===TransitionOrder.EnterBeforeExit){y.data.animatedTabsOrder=[t,f];t.showElement({animation:k,animationOptions:{duration:s,direction:j},complete:function(){q();f.hideElement({animation:r,animationOptions:{duration:b,direction:o},complete:function(){g();l()}})}})}else{y.data.animatedTabsOrder=[f,t];f.hideElement({animation:r,animationOptions:{duration:b,direction:o},complete:function(){t.showElement({animation:k,animationOptions:{duration:s,direction:j},complete:function(){q();l()}})}})}}}else{if(f!==undefined){f.hideElement()}t.showElement();q();m()}y.currentItemFinishChanging.fire(y,{prevItem:f,currentItem:t})}else{OperationsManager.endDisableBatch();m();LayoutManager.requestUpdatePosition(y)}function q(){if(z){$.each(t.getDescendingInstances(false),function(B,A){if(A.data.isTrackOverInTransition===true){PositionManager.trackMouseOver(A)}})}y.startAutoNavigation();OperationsManager.endDisableBatch();LayoutManager.requestUpdatePosition(y)}function g(){y.startAutoNavigation()}function l(){y.data.duringAnimatedTransition=false;y.data.animatedTabsOrder=undefined;m();var i=y.data.pendingTransition;if(i){y.data.pendingTransition=undefined;y.showItem(i.tabSelector,i.performAnimation,i.navigateCallback,i.animationOptions)}Global.Events.NavigationFinished.fire()}},removeCurrentItem:a,removeItem:function(b,c){if(!c){c=$.noop}if(b===this.data.currentTab){this.removeCurrentItem(c)}else{ElementsManager.removeInstances(b);c()}},creationFunction:function(b){return $("<div></div>").addClass("absolute-fill")},getCurrentItem:function(){return this.data.currentTab?this.data.currentTab:this.childInstances[0]}},aggregatedMethods:{aggregations:{isDroppable:$.returnFalse,accept:function(){return false},setCalculatedPropertyValue:function(b,d,c,g){var f=this.getCurrentItem();if(f){f.setPropertyValue(b,d,c,g)}},getCalculatedPropertyValue:function(c,b,d){if(d!==undefined){return d}var f=this.getCurrentItem();if(f){return f.getPropertyValue(c,undefined,b)}return d},onChildElementAdded:function(c,f){var b=this;var d={id:c.id,title:c.getPropertyValue("name"),type:MenuItemTypes.NavigableInstance.name,index:b.getNavigatableInstances().length};c.bindPropertyChangeId=c.bindPropertyChange("name",function(){b.getItemsInformation().updateItem(c.id,{title:c.getPropertyValue("name")})},"tabNameChanged");if(b.data.currentTab===undefined){b.data.currentTab=c;b.currentItemChangedEvent.fire(b,{prevItem:undefined,currentItem:c})}else{c.hideElement()}b.getItemsInformation().put(d)},onChildElementRemoved:function(b){this.getItemsInformation().remove(b.id);if(this.data.currentTab===b){this.navigate(-1,false)}b.unbindPropertyChange("name",b.bindPropertyChangeId)},switchToPreview:function(b){this.data.designTimeTab=this.data.currentTab;if(Global.IsDesigner&&this.data.designTimeTab){this.showItem(0,false)}},switchToDesign:function(){if(this.data.designTimeTab){this.showItem(this.data.designTimeTab,false)}},onRemove:function(){this.getItemsInformation().clear()}}},initialize:function(){var b=this;this.sizeChangedEvent.bind(function(){LayoutManager.refreshElementsLayout(b.childInstances)})}},Tab:{className:"tab-element",category:ElementsTypesCategories.Containers,icon:"/images/icons/elements/container.png",iconClass:"sprite-icon sprite-element-panel",title:"Tab",description:"No Description",features:[Features.DesignElement,Features.HasPadding,Features.HasContent,Features.ItemsContainer,Features.HasChildrenLayoutAnchor,Features.HasBorder,Features.HasBackground,Features.HasBackgroundImage],onInstanceCreated:function(){var b=this;b.$elementContentContainer.addClass("box-content-container")},methods:{creationFunction:function(b){return $("<div></div>").addClass("absolute-fill")},hasWidth:$.returnFalse,hasHeight:$.returnFalse,getContextInstances:function(){var b=this;var c=[];$.each(this.parentInstance.getNavigatableInstances(),function(f,d){if(b.id!==d.id){c.push(d)}});return c}},aggregatedMethods:{aggregations:{getAutoLayoutProperties:function(){return{left:true,top:true,width:true,height:true}}}},initialize:function(b){this.canMove.setValue(false)}}});function a(c){if(this.getNavigatableInstances().length>1){var b=this.data.currentTab;this.navigate(1,false,function(){ElementsManager.removeInstances(b);c()})}}})();(function(){ElementsModel.registerDefinition(ElementsTypes,{Button:{className:"button-element",category:ElementsTypesCategories.General,icon:"/images/icons/elements/container.png",iconClass:"sprite-icon sprite-element-button",title:"Button",itemTitle:"Button",description:"No Description",features:[Features.DesignElement,Features.HasPadding,Features.HasContent,Features.Resizable,Features.Selectable,Features.HasBackground,Features.Clickable,Features.HasBackgroundImage,Features.HasLayout,Features.Hideable,Features.HasBorder,Features.HasResponsiveItem,Features.ItemsContainer,Features.HasChildrenLayoutAnchor],properties:{buttonType:{defaultValue:function(){return ButtonTypes.ActionButton},onChange:function(a,b){if(b===ButtonTypes.ActionButton){}}}},methods:{creationFunction:function(a){a.data.$content=$("<div></div>").addClass("absolute-fill");return a.data.$content}}}})})();(function(){ElementsModel.registerDefinition(ElementsTypes,{Flash:{iconClass:"sprite-icon sprite-element-flash",title:"Flash",description:"No Description",features:[Features.DesignElement,Features.HasResponsiveItem,Features.Resizable,Features.Selectable,Features.HasBackground,Features.HasBackgroundImage,Features.HasLayout,Features.Clickable,Features.Hideable,Features.HasBorder,Features.Rotatable,Features.HasPadding,Features.HasContent,Features.HasContentOverlay],properties:{flashAsset:{title:"Flash",defaultValue:$.returnEmptyString,onChange:function(b,c){var a=this;var d={};d.wmode="transparent";swfobject.embedSWF(AssetsManager.resolveAssetUrl(c),this.data.flashID,"100%","100%","9.0.0",false,false,d,false)}}},methods:{creationFunction:function(a){a.data.flashID="f"+$.uniqueID();a.data.$flash=$("<div id='{0}'></div>".format(a.data.flashID)).addClass("absolute-fill").addClass("no-wrap");return a.data.$flash}},aggregatedMethods:{aggregations:{shouldBeHiddenInMode:function(){return true}}}}})})();(function(){var a={ElementContent:{id:"app-element-content-template"}};ElementsModel.registerDefinition(ElementsTypes,{App:{title:"App",features:[Features.DesignElement,Features.Resizable,Features.Selectable,Features.HasBackground,Features.HasBackgroundImage,Features.HasLayout,Features.Clickable,Features.Hideable,Features.HasBorder,Features.Rotatable,Features.HasPadding,Features.HasContent,Features.HasContentOverlay,Features.HasResponsiveItem],defaultProperties:{},properties:{autoScrollbars:{defaultValue:$.returnFalse,onChange:function(c,d){var f=$('<iframe class="app-iframe {1}" frameborder="0" marginheight="0" marginwidth="0" width="100%" height="100%" scrolling="{0}"></iframe>'.format(d?"yes":"no",d?"auto-scrollbars":""));this.data.appIframe=f;this.data.$iframeContainer.empty().append(f);b(this)}},appInfo:{title:"Application",defaultValue:$.returnNull,isStateProperty:false,onChange:function(c,d){b(this)}}},methods:{creationFunction:function(c){var d=$("<div class='absolute-fill'></div>");c.data.$iframeContainer=d;return d}},aggregatedMethods:{aggregations:{switchToDesign:function(){b(this)}}}}});function b(c){if(!c.data.appIframe){return}var f=c.getPropertyValue("appInfo");if(f){var g;if(f.remoteUrl){g=f.remoteUrl;if(g.indexOf("://")<0){g="http://"+g}}else{var d=AssetsManager.getAssetsFolder(f.ownerID,AssetsStorageServers.AzureBlob,AssetsTypes.App);if(f.ownerID!=null){g=d+f.fileName}else{g=d+f.appFolder+f.fileName}}c.data.appIframe.attr("src",g)}else{c.data.appIframe.attr("src","")}}})();(function(){ElementsModel.registerDefinition(ElementsTypes,{DataListElement:{className:"data-list-element",category:ElementsTypesCategories.General,icon:"/images/icons/elements/container.png",iconClass:"sprite-icon sprite-element-list-widget",title:"Data List",itemName:"DataListItemTemplate",itemTitle:"Data List Item",description:"No Description",defaultProperties:{itemFields:function(){return{index:{type:"index",title:"Index",name:"index",isDefaultField:true}}}},features:[Features.DesignElement,Features.HasResponsiveItem,Features.Resizable,Features.Selectable,Features.HasBackground,Features.HasBackgroundImage,Features.HasLayout,Features.Hideable,Features.HasBorder,Features.DataList,Features.TemplatePagesList,Features.SimpleDataList],methods:{getDataSourceName:function(){var a=this;return DataListViewPreText+a.id},getDataSourceDefinition:function(){return DataSourcesDefinitions.DataListElementView}},aggregatedMethods:{aggregations:{setItem:function(a){}}},initialize:function(b){var a=this}}})})();var DataListViewPreText="dataListElement";(function(){var c={ElementContent:{id:"paypal-button-template"}};ElementsModel.registerDefinition(ElementsTypes,{paypalButton:{className:"paypalButton",category:ElementsTypesCategories.Content,icon:"/images/youtube.png",iconClass:"sprite-icon sprite-element-video",title:"PayPal Button",description:"No Description",defaultProperties:{backgroundColor:function(){return"Transparent"},opacity:function(){return 1},sizeAndPosition:function(){return{width:90,height:30,top:0,left:0}}},properties:{paypalData:{defaultValue:function(){return{type:EcommerceManager.ButtonTypes.buynow.value,accountType:AccountsManager.Types.PayPal}},supportsBinding:true,isBound:function(d){return d.isBound&&d.isBound(DataSourceItemsFields.paypal.getContentType())},isInTemplate:function(d){return !PropertiesTypes.paypalData.isBound(d)},onChange:function(f,g){if(this.propertiesInitialized){var d=this.getPropertyValue("paypalOptions");this.data.payPalButtonController.refresh(AccountsManager.Types.PayPal,d,g.type,this.data.payPalHolder)}}},paypalOptions:{defaultValue:function(){return{item_name:"Product Name",currency_code:"USD",shipping:0,tax:0,amount:5,quantity:1}},supportsBinding:true,isBound:function(d){return d.isBound&&d.isBound(DataSourceItemsFields.paypal.getContentType())},isInTemplate:function(d){return !PropertiesTypes.paypalData.isBound(d)},onChange:function(f,d){if(this.propertiesInitialized){var g=this.getPropertyValue("paypalData");this.data.payPalButtonController.refresh(AccountsManager.Types.PayPal,d,g.type,this.data.payPalHolder)}}}},features:[Features.DesignElement,Features.HasResponsiveItem,Features.HasPadding,Features.HasContent,Features.Resizable,Features.Selectable,Features.HasBackground,Features.Clickable,Features.HasBackgroundImage,Features.HasLayout,Features.Hideable,Features.HasBorder,Features.ItemsContainer,Features.ExpressMode],methods:{hasBinding:function(){return PropertiesTypes.paypalData.isBound(this)&&PropertiesTypes.payPal.isBound(this)},creationFunction:b},onInstanceInitialized:a,aggregatedMethods:{aggregations:{switchToPreview:function(){this.data.payPalButtonController.activate(this)},switchToDesign:function(){this.data.payPalButtonController.deactivate(this)},onUpdateBindingReady:function(j){var d=this;var f=this.getPropertyValue("paypalData");var h;if($.isPlainObject(f)){h=$.extend({},f)}else{h=f}var k=this.getPropertyValue("binding");var g=k.dataFields;var i={};if(this.isBound(DataSourceItemsFields.paypal.getContentType())){i[g[DataSourceItemsFields.paypal.getContentType()].name]=h}return $.extend({},j,i)},createBindingFieldsToProperties:function(f){var d=this;if(this.isBound(DataSourceItemsFields.paypal.getContentType())){f[PropertiesTypes.paypalData.name]=ObservableObject.createPropertyBinding(d,{propertyName:PropertiesTypes.paypalData.name});f[PropertiesTypes.paypalOptions.name]=ObservableObject.createPropertyBinding(d,{propertyName:PropertiesTypes.paypalOptions.name})}return f},onContentTypeChanged:function(){},onBoundValueReady:function(f){var d=this;if(d.isBound(DataSourceItemsFields.paypal.getContentType())){d.setBindingValueToProperty({paypalData:f[DataSourceItemsFields.paypal.getContentType()]===undefined?PropertiesTypes.paypalData.defaultValue():f[DataSourceItemsFields.paypal.getContentType()].paypalData,paypalOptions:f[DataSourceItemsFields.paypal.getContentType()]===undefined?PropertiesTypes.paypalOptions.defaultValue():f[DataSourceItemsFields.paypal.getContentType()].paypalOptions})}}}}}});function a(f){var d=this}function b(d){d.data.payPalHolder=$.useTemplate(c.ElementContent);d.data.payPalButtonController=EcommerceManager.createButton();var f=d.getPropertyValue("paypalOptions");var g=d.getPropertyValue("paypalData");d.data.payPalButtonController.refresh(AccountsManager.Types.PayPal,f,g.type,d.data.payPalHolder);return d.data.payPalHolder}})();(function(){var b={ElementContent:{id:"paypal-button-template"}};ElementsModel.registerDefinition(ElementsTypes,{checkOutButton:{className:"checkOutButton",category:ElementsTypesCategories.Content,icon:"/images/youtube.png",iconClass:"sprite-icon sprite-element-video",title:"CheckOut Button",description:"No Description",defaultProperties:{backgroundColor:function(){return"Transparent"},opacity:function(){return 1},sizeAndPosition:function(){return{width:90,height:30,top:0,left:0}}},properties:{paypalAccount:{defaultValue:function(){return AccountsManager.Types.PayPal},onChange:function(f,g){if(this.propertiesInitialized){var d=this.getPropertyValue("checkOutOptions");this.data.payPalButtonController.refresh(AccountsManager.Types.PayPal,d,"view",this.data.payPalHolder)}}},checkOutOptions:{defaultValue:function(){return{notify_url:"http://www.webzai.com"}},onChange:function(f,d){if(this.propertiesInitialized){var g=this.getPropertyValue("paypalAccount");this.data.payPalButtonController.refresh(AccountsManager.Types.PayPal,d,"view",this.data.payPalHolder)}}}},features:[Features.DesignElement,Features.HasPadding,Features.HasContent,Features.Resizable,Features.Selectable,Features.HasBackground,Features.Clickable,Features.HasBackgroundImage,Features.HasResponsiveItem,Features.HasLayout,Features.Hideable,Features.HasBorder,Features.ItemsContainer,Features.HasChildrenLayoutAnchor,Features.ExpressMode],onInstanceInitialized:a,methods:{creationFunction:c},aggregatedMethods:{aggregations:{switchToPreview:function(){this.data.payPalButtonController.activate(this)},switchToDesign:function(){this.data.payPalButtonController.deactivate(this)}}}}});function a(f){var d=this}function c(d){d.data.payPalHolder=$.useTemplate(b.ElementContent);var f=EcommerceManager.createButton();d.data.payPalButtonController=f;var g=d.getPropertyValue("paypalAccount");d.data.payPalButtonController.refresh(AccountsManager.Types.PayPal,{},"view",d.data.payPalHolder);return d.data.payPalHolder}})();(function(){ElementsModel.registerDefinition(ElementsTypes,{HtmlBox:{title:"Html",iconClass:"sprite-icon sprite-element-html",features:[Features.DesignElement,Features.HasResponsiveItem,Features.Resizable,Features.Selectable,Features.HasBackground,Features.HasBackgroundImage,Features.HasLayout,Features.Clickable,Features.Hideable,Features.HasBorder,Features.Rotatable,Features.HasPadding,Features.HasContent,Features.HasContentOverlay],properties:{htmlContent:{title:"Content",defaultValue:function(){return"This is custom <b>HTML</b>. Double click the element to edit it."},isStateProperty:false,onChange:function(a,b){this.getContentLayer().html(b)}}},methods:{creationFunction:function(){return undefined}}}})})();(function(){ElementsModel.registerDefinition(ElementsTypes,{FormElement:{className:"form-element",category:ElementsTypesCategories.General,icon:"/images/icons/elements/container.png",iconClass:"sprite-icon sprite-element-form",iconClass24:"sprite-icon sprite-tool-category-galleries",title:"Form",itemTitle:"Input Field",description:"No Description",defaultSkinItemElement:"skinInputElement",itemName:"TextInputField",structureProcessor:function(a,b){if(a.type==="TextInputField"&&b==="TextArea"){a.type="TextArea"}return a},features:[Features.DesignElement,Features.HasResponsiveItem,Features.Resizable,Features.Selectable,Features.HasBackground,Features.HasBackgroundImage,Features.HasLayout,Features.Focusable,Features.Hideable,Features.HasBorder,Features.DataList,Features.HasFormData],defaultProperties:{dataLayout:function(){return{name:"Rows"}},dataLayoutOptions:function(){return{cols:1,rows:5,colsSpacing:10,rowsSpacing:10,oneColumn:true}},itemFields:function(){return{index:{type:"index",title:"Index",name:"index",isDefaultField:true},labelText:{type:"title",title:"Label Text",name:"labelText",isDefaultField:true}}}},onInstanceCreated:function(){},methods:{mainTypeChange:function(b){OperationsManager.beginAtomicBatch(true);LayoutManager.beginLayoutUpdateBatch();var a=this;a.setPropertyValue("dataLayout",{name:b});if(b===DataLayouts.Rows.name){a.setPropertyFieldValue("dataLayoutOptions","rows",3)}else{if(b===DataLayouts.Columns.name){a.setPropertyFieldValue("dataLayoutOptions","cols",3)}}LayoutManager.endLayoutUpdateBatch();if(Global.IsDesigner){ContextManager.refreshContext()}OperationsManager.endAtomicBatch()},getDefaultTemplate:function(c){var a=this.elementType.itemName;var b=$.getValues(this.getFieldsTemplates()[c])[0];if(!b){b=$.getValues(this.getFieldsTemplates()[a])[0]}return b},getNewContentSize:function(a){a.vertically=false;return this.calculateNewContentSize(a)},alignContentHorizontal:function(){if(this.hasContentHorizontalAlign()){var a=this.getPropertyValue("horizontalContentAlign");if(a!==CssHorizontalAlignment.None){this.data.$relativeChildElementContentHolder.css({"text-align":"{0}".format(a)})}else{this.data.$relativeChildElementContentHolder.css({"text-align":""})}}},hasContentHorizontalAlign:function(){return true},creationFunction:function(a){var c=new StringBuilder();c.append('<div class="content-holder positioned">');c.append('<div class="arrangement-content-holder positioned"></div>');c.append('<div class="relative-child-elements-content-holder positioned"></div>');c.append("</div>");var b=$(c.toString());a.data.$arrangementContentHolder=$(".arrangement-content-holder",b);a.data.$relativeChildElementContentHolder=$(".relative-child-elements-content-holder",b);return b},addChildElement:function(b,c){var a=this.data.$relativeChildElementContentHolder.append(b.$element);b.onAttached();return a},getDataSourceName:function(){var a=this;return FormDataViewPreText+a.id},getDataSourceDefinition:function(){return DataSourcesDefinitions.FormElementView},hasHeight:function(){var a=this;return a.inEmptyStateFlag.isTrue()},canDuplicate:function(){return true},hasVerticalAlign:function(){return false},hasHorizontalAlign:function(){return true},getEmptyTemplateInfo:function(){}},aggregatedMethods:{aggregations:{onChildElementAdded:function(b,c){var a=this;if(!b.isContent()){b.isRelativePositionedFlag.setTrue();b.classesManager.set({"inline-block-element":true});ElementActivationManager.connectElement(b.id,a.id,Behaviours.SubmitForm.name,{triggerName:Triggers.MouseClick.name,triggerType:TriggerType.Trigger});b.canRedropTo=$.returnFalse;b.canDelete=$.returnFalse;b.canDuplicate=$.returnFalse;b.canPush.setValue(false,"formChild")}},onChildElementRemoved:function(a,b){if(!a.isContent()){a.isRelativePositionedFlag.setFalse();a.classesManager.set({"inline-block-element":false})}}}}}})})();var FormDataViewPreText="form";(function(){ElementsModel.registerDefinition(ElementsTypes,{formFields:{category:ElementsTypesCategories.Containers,icon:"/images/icons/elements/container.png",iconClass:"sprite-icon sprite-element-form-fields",title:"Form Fields",itemTitle:"Input Field",description:"No Description",features:[Features.DesignElement,Features.HasResponsiveItem,Features.Selectable,Features.Clickable,Features.DataList,Features.HasFormData,Features.Resizable],defaultProperties:{dataLayout:function(){return{name:"Rows"}},dataLayoutOptions:function(){return{cols:1,rows:5,colsSpacing:10,rowsSpacing:10,oneColumn:true}},itemFields:function(){return{index:{type:"index",title:"Index",name:"index",isDefaultField:true},labelText:{type:"title",title:"Label Text",name:"labelText",isDefaultField:true}}}},onInstanceCreated:function(){},methods:{addChildElement:function(b,c){var a=this.data.$relativeChildElementContentHolder.append(b.$element);b.onAttached();return a},hasHorizontalAlign:function(){return true},getDataSourceName:function(){var a=this;return FormDataViewPreText+a.id},getDataSourceDefinition:function(){return DataSourcesDefinitions.FormElementView},canDuplicate:function(){return true},hasVerticalAlign:function(){return false}}}})})();(function(){ElementsModel.registerDefinition(ElementsTypes,{ButtonsGroup:{className:"buttons-group",category:ElementsTypesCategories.General,icon:"/images/icons/elements/container.png",iconClass:"sprite-icon sprite-element-menu",iconClass24:"sprite-icon sprite-tool-category-menus",title:"Button Group",itemName:"MenuButton",itemTitle:"Button",description:"No Description",features:[Features.DesignElement,Features.Resizable,Features.Selectable,Features.HasBackground,Features.HasBackgroundImage,Features.HasLayout,Features.Hideable,Features.HasResponsiveItem,Features.HasBorder,Features.DataList],defaultProperties:{fitToContent:function(){return false},sizeAndPosition:function(){return{width:400,height:400,top:0,left:0}},itemFields:function(){return{index:{type:"index",title:"Index",name:"index",isDefaultField:true},title:{type:"title",title:"Title",name:"title",isDefaultField:true},icon:{type:"icon",title:"Icon",name:"icon",isDefaultField:true}}},dataLayoutOptions:function(){return{lineSpacing:15,columnSpacing:15,colsSpacing:15,rowsSpacing:15,rotation:0,cols:3,R:100}}},properties:{buttonsType:{name:"buttonsType",defaultValue:function(){return ButtonsGroupTypes.RadioButtons.value}},enableButtonToggling:{name:"enableButtonToggling",defaultValue:function(){return true}}},methods:{hasContentHorizontalAlign:function(){return false},getDefaultStructure:function(b){var a={};a[ElementsTypes.ButtonsGroup.itemName]={};if(b){a[ElementsTypes.ButtonsGroup.itemName][b.id]={id:b.id,name:"Template",isDefault:true,hierarchy:b}}return{isTemplate:true,wizardName:"WebzaiChooseButtonsGroupWizard",isDefaultStructure:true,structures:[{type:"ButtonsGroup",elementProperties:{sizeAndPosition:{width:0,height:0},backgroundColor:"transparent",dataLayout:{name:DataLayouts.Horizontal.name},fieldsTemplates:a}}]}},unSelectAll:function(){var a=this;$.each(a.getTemplatesArray(),function(c,d){var b=d.getInstance();ElementsManager.performOnInstancesInitialization(b.id,function(){b.userSelect(false)})})},setPropertyDataInfoForSave:function(d,c){if(!d||d===null){return d}var b={};if(d&&d.currentData&&d.currentData.items){var a=c.itemFields;$.each(d.currentData.items,function(h,g){var f={};$.each(g,function(j,k){if(a[j]&&DataSourceItemsFields[a[j].type].isText()){try{f[j]=decodeURIComponent(k)}catch(i){f[j]=k}}else{f[j]=k}});b[f.id]=f});d.currentData.items=b}return d},getDataSourceName:function(){var a=this;return ButtonsGroupViewPreText+a.id},getDataSourceDefinition:function(){return DataSourcesDefinitions.ButtonsGroupView}},aggregatedMethods:{aggregations:{switchToPreview:function(){var a=this;a.$element.on("click",".design-element.button-element",function(c){var b=$instance($(this));if(b.elementType===ElementsTypes.MenuButton&&ViewManager.isViewMode()){if(a.getPageId()===PageManager.getCurrentPageId()){a.onItemChanged(b.getDataItemId())}}})},switchToDesign:function(a){if(a){this.unSelectAll();this.$element.off("click",".design-element.button-element")}},setItem:function(b){var a=this;var c;b.setNeverSelectedInClick(true)},onItemChanged:function(h){var a=this;var g=a.getInstanceController(h);if(!g||!g.isInitialized()){return}var b=g.getInstance();if(b&&ViewManager.isViewMode()){var d=a.getDataSource().fetchDataItem(h);var f=a.getPropertyValue("buttonsType");var c=false;switch(f){case ButtonsGroupTypes.RadioButtons.value:$.each(a.getTemplatesArray(),function(k,l){var j=l.getInstance();if(j.id!==b.id){ElementsManager.performOnInstancesInitialization(j.id,function(){j.userSelect(false)})}});ElementsManager.performOnInstancesInitialization(b.id,function(){var i=a.getPropertyValue("enableButtonToggling");if(i){b.userSelect(true)}else{b.userSelect(!b.isUserSelected())}});break;case ButtonsGroupTypes.ToggleGroup.value:ElementsManager.performOnInstancesInitialization(b.id,function(){b.userSelect(!b.isUserSelected())});break}}else{a.unSelectAll()}}}},initialize:function(b){var a=this}}})})();var ButtonsGroupViewPreText="menu";var ButtonsGroupTypes={ToggleGroup:{title:"Multiple Selection",value:1},RadioButtons:{title:"Single Selection",value:2}};(function(){ElementsModel.registerDefinition(ElementsTypes,{PlaceholderElement:{category:ElementsTypesCategories.Containers,icon:"/images/icons/elements/container.png",iconClass:"sprite-icon sprite-element-panel",title:"Placeholder",description:"No Description",features:[Features.DesignElement,Features.HasResponsiveItem,Features.Resizable,Features.Selectable,Features.HasLayout,Features.Hideable],properties:{placeholderTarget:{isStateProperty:false,title:"Target",defaultValue:$.returnEmptyString,supportsStatesTransitionAnimation:false}},methods:{},renderElement:function(){var a=new StringBuilder();a.append('<div class="design-element placeholder-element">');a.append('<div class="placeholder-content"></div>');a.append("</div>");return a.toString()},initialize:function(){if(!Global.IsDesigner){var a=this.getPropertyValue("placeholderTarget");this.$element.find(".placeholder-content").replaceWith($(a))}}}})})();(function(){var a;var b;ElementsModel.registerDefinition(ElementsTypes,{FooterElement:{className:"footer-element",category:ElementsTypesCategories.Containers,icon:"/images/icons/elements/container.png",iconClass:"sprite-icon sprite-element-panel",title:"Footer",features:[Features.DesignElement,Features.HasPadding,Features.HasContent,Features.Resizable,Features.Selectable,Features.HasBackground,Features.HasBackgroundImage,Features.HasLayout,Features.ItemsContainer,Features.HasChildrenLayoutAnchor,Features.HasResizingGrip,Features.PageSection,Features.HasBorder],defaultProperties:{resizingGripPosiotion:function(){return"s"},tagName:function(){return HtmlTags.FOOTER}},methods:{canDuplicate:$.returnFalse,addElementToPage:function(h){var c=this;var d=c.$element;OperationsManager.disableUndo("removeSection");var g=h.getFooterInstance();if(g&&g!==c){ElementsManager.removeInstances(g);console.warn("Adding a footer to a page that already has a footer")}OperationsManager.enableUndo("removeSection");var f=c.data.pageInstance;if(f){f.setFooterInstance(undefined)}h.setFooterInstance(c);c.data.pageInstance=h;h.data.$footerSection.append(d);return h.data.$footerSection}},aggregatedMethods:{aggregations:{switchToPreview:function(){var c=this;if(c.isFixed()){if(!b){b=$.rule(".page-element-border-box {}")}c.data.switchToPreviewFooter=SimpleEvent.bindAndExecute([c.sizeChangedEvent,c.visibilityChangedEvent],function(){var d=PageManager.getCurrentPage();if(PositionManager.isElementVisible(c)){b.css({"padding-bottom":"{0}px".format(c.getSize().height)})}else{b.css({"padding-bottom":"{0}px".format(0)})}PositionManager.updatePosition(d)})}},switchToDesign:function(){var c=this;if(!b){b=$.rule(".page-element-border-box {}")}SimpleEvent.unbind(c.data.switchToPreviewFooter);b.css({"padding-bottom":"{0}px".format(0)});LayoutManager.refreshElementsLayout(c)},onRemove:function(){var c=PageManager.getCurrentPage().getFooterInstance();if(c&&c.id===this.id){PageManager.getCurrentPage().setFooterInstance(undefined)}LayoutManager.refreshElementsLayout(PageManager.getCurrentPage())}}},initialize:function(){MasterPagesManager.setAsMasterPageRoots(this)}},HeaderElement:{className:"header-element",category:ElementsTypesCategories.Containers,icon:"/images/icons/elements/container.png",iconClass:"sprite-icon sprite-element-panel",title:"Header",features:[Features.DesignElement,Features.HasPadding,Features.HasContent,Features.Resizable,Features.Selectable,Features.HasBackground,Features.HasBackgroundImage,Features.HasLayout,Features.ItemsContainer,Features.HasChildrenLayoutAnchor,Features.HasResizingGrip,Features.PageSection,Features.HasBorder],defaultProperties:{resizingGripPosiotion:function(){return"s"},tagName:function(){return HtmlTags.HEADER}},methods:{canDuplicate:$.returnFalse,addElementToPage:function(h){var c=this;var d=c.$element;OperationsManager.disableUndo("removeSection");var g=h.getHeaderInstance();if(g&&g!==c){ElementsManager.removeInstances(g);console.warn("Adding a header to a page that already has a header")}OperationsManager.enableUndo("removeSection");var f=c.data.pageInstance;if(f){f.setHeaderInstance(undefined)}h.setHeaderInstance(c);c.data.pageInstance=h;h.data.$headerSection.append(d);return h.data.$headerSection}},aggregatedMethods:{aggregations:{switchToPreview:function(){var c=this;if(c.isFixed()){if(!a){a=$.rule(".page-element-border-box {}")}c.data.switchToPreviewHeader=SimpleEvent.bindAndExecute([c.sizeChangedEvent,c.visibilityChangedEvent],function(){var d=PageManager.getCurrentPage();if(PositionManager.isElementVisible(c)){a.css({"padding-top":"{0}px".format(c.getSize().height)})}else{a.css({"padding-top":"{0}px".format(0)})}PropertiesManager.invalidateProperty(d,"sizeAndPosition",undefined,d.getPropertyValue("sizeAndPosition"))})}},switchToDesign:function(){var c=this;SimpleEvent.unbind(c.data.switchToPreviewHeader);if(!a){a=$.rule(".page-element-border-box {}")}SimpleEvent.unbind(c.data.switchToPreviewFooter);a.css({"padding-top":"{0}px".format(0)});LayoutManager.refreshElementsLayout(c)},onRemove:function(){var d=PageManager.getCurrentPage();var c=d.getHeaderInstance();if(c&&c.id===this.id){d.setHeaderInstance(undefined)}LayoutManager.refreshElementsLayout(PageManager.getCurrentPage())}}},initialize:function(){MasterPagesManager.setAsMasterPageRoots(this)}},SectionElement:{className:"page-section-element",category:ElementsTypesCategories.Containers,icon:"/images/icons/elements/container.png",iconClass:"sprite-icon sprite-element-panel",title:"Section",features:[Features.DesignElement,Features.HasPadding,Features.HasContent,Features.Resizable,Features.Selectable,Features.HasBackground,Features.HasBackgroundImage,Features.HasLayout,Features.ItemsContainer,Features.HasChildrenLayoutAnchor,Features.HasResizingGrip,Features.PageSection,Features.HasBorder],defaultProperties:{resizingGripPosiotion:function(){return"s"},tagName:function(){return HtmlTags.SECTION},sizeAndPosition:function(){return{height:600}},backgroundColor:function(){return"transparent"}},properties:{pageContentId:{isNotForCustomProperty:true,defaultValue:function(){return null},onChange:function(c,d){if(this.isInitialized&&this.data.pageContentInstance.id!==d){ElementsManager.addElementToContainerElement(PageManager.getCurrentPage(),this)}}}},methods:{getMinSize:function(){return{height:this.data.calculatedMinHeight&&ViewManager.isViewMode()?this.data.calculatedMinHeight:0,width:0}},getPageContentInstance:function(){var c=this.getPageId();var f;if(c){var g=PageManager.getPage(c);var d=this.getPropertyValue("pageContentId");if(d){f=ElementsManager.getInstanceByID(d)}if(!f){$.each(g.getPageContentInstances(),function(h,j){if(j.getSectionsCountByPage(g)>0||h==0){f=j}else{return false}})}}return f},addElementToPage:function(g){var d=this;var c=d.$element;var f=d.getPageContentInstance();d.data.pageContentInstance=f;this.setPropertyValue("pageContentId",f.id);var h=f.addSectionElement(g,d);LayoutManager.requestUpdatePosition(d);return h}},aggregatedMethods:{aggregations:{switchToPreview:function(){var c=this;LayoutManager.refreshElementsLayout(c)},switchToDesign:function(){var c=this;LayoutManager.refreshElementsLayout(c)},onRemove:function(){var c=this;var d=c.getPageContentInstance();var f=PageManager.getPage(c.getPageId());d.removeSectionElement(f,c)}}},initialize:function(){var c=this;c.sizeChangedEvent.bind(function(){var d=PageManager.getCurrentPage();PositionManager.updatePosition(c.getPageContentInstance());PositionManager.updatePosition(d)});c.visibilityChangedEvent.bind(function(){var d=PageManager.getCurrentPage();PositionManager.updatePosition(c.getPageContentInstance());PositionManager.updatePosition(d)})}}})})();var ExternalAppElementBuilder=new (function(){function j(m,l){if(m){var k=l.features;$.each(m,function(o,n){if(Features.hasOwnProperty(n)){k.push(Features[n])}})}}function g(m,l){if(m){var k=l.features;$.each(m,function(o,n){if(Features.hasOwnProperty(n)){k.removeItem(Features[n])}})}}function a(m,l){if(m){var k=l.methods;$.each(m,function(n,o){if(n==="initialize"){l.initialize=o}else{k[n]=o}})}}function i(k){var l={title:k.title,defaultValue:function(){return k.defaultValue}};switch(k.stateType){case"custom":l.isStateProperty=true;break;case"single":l.isNotForCustomProperty=true;break;default:break}return l}function b(q,p,o){var m=p.properties;var k=p.querySettings;for(var l in q){var n=q[l];m[o+l]=i(n);if(n.isQueryParam){k.push(l)}}}function f(k,l){if(!$.isEmptyObject(k)){l.features.push(Features.ConnectableExternalApp)}}function c(m,l){var k=l.features;if(!$.isEmptyObject(m)){k.push(Features.FeatureExternalApp);$.each(m,function(n,o){k.push(Features[o.featureTypeName])})}}function h(k,m){if(k){var l=m.defaultProperties;$.each(k,function(n,o){l[n]=function(){return o}})}}function d(k){var l={};$.extend(l,{title:k.name,features:[Features.DesignElement,Features.Selectable,Features.HasBackground,Features.HasPadding,Features.HasBackgroundImage,Features.HasLayout,Features.Hideable,Features.HasBorder,Features.Rotatable,Features.HasContent,Features.HasContentOverlay,Features.HasResponsiveItem,Features.ExternalApp],defaultProperties:{},properties:{},methods:{},querySettings:[],appDefinition:k,aggregatedMethods:{},initialize:function(){}});return l}this.createElement=function(k){var l=d(k);j(k.features,l);g(k.excludeFeatures,l);h(k.defaultProperties,l);b(k.settings,l,k.appSettingPrefix);a(k.methods,l);c(k.implementedFeatures,l);f(k.connectableFeatures,l);var m={};m[k.elementTypeName]=l;return m}})();(function(){PageContentTypes={Fixed:"fixed",Fluid:"fluid"};ElementsModel.registerDefinition(ElementsTypes,{PageContentElement:{className:"page-content-element",category:ElementsTypesCategories.Containers,icon:"/images/icons/elements/container.png",iconClass:"sprite-icon sprite-element-panel",title:"Page Content",description:"No Description",features:[Features.DesignElement,Features.HasPadding,Features.HasContent,Features.Resizable,Features.Selectable,Features.HasBackground,Features.HasBackgroundImage,Features.HasLayout,Features.ItemsContainer,Features.HasChildrenLayoutAnchor,Features.Hideable,Features.HasBorder,Features.ExpressMode],defaultProperties:{resizingGripPosiotion:function(){return"s"},sizeAndPosition:function(){return{height:200,width:960,top:0,left:0}}},properties:{isContentTypeFluid:{defaultValue:function(){return true},onChange:function(a,b){PositionManager.updatePosition($.getValues(this.data.sectionsByPage[PageManager.getCurrentPageId()]))}}},onInstanceCreated:function(){this.data.pageToContainers={};this.data.sectionsByPage={}},initialize:function(){var a=this;MasterPagesManager.setAsMasterPageRoots([this]);if(Global.IsDesigner){EditorManager.Flags.MobileEditing.valueChangedEvent.bind(function(b){a.canResize.setValue(!b,"MobileDesktopEditing");a.canMove.setValue(!b,"MobileDesktopEditing");a.canEdit.setValue(!b,"MobileDesktopEditing")});a.instanceRemoved.bind(function(){$.each(a.getSectionsByPage(PageManager.getCurrentPage()),function(c,b){b.detach()});MasterPagesManager.MasterPageEditingModeChangedFinished.one(function(){if(MasterPagesManager.EditingMasterPage.isFalse()){OrderManager.beginReorderingBatch();$.each(a.getSectionsByPage(PageManager.getCurrentPage()).orderBy(function(b){return b.getPropertyValue("order")}),function(c,b){b.setPropertyValue("pageContentId",null)});OrderManager.endReorderingBatch();PositionManager.updatePosition(PageManager.getCurrentPage().getPageContentInstances())}})})}PageManager.Events.PageLoaded.bindAndExecute(function(){var b=PageManager.getPrevPage();var c=PageManager.getCurrentPage();if(a.getPageId()===c.id){if(b){a.getPageContentElement(b.id).detach()}a.getPageContentElement(c.id).appendTo(a.getContentLayer())}})},methods:{getMinSize:function(){return{width:0,height:0}},creationFunction:function(){return $("<div></div>").addClass("absolute-fill")},isRelativePositioned:function(){return true},hasHeight:function(){return false},hasWidth:function(){return false},canBeSelected:$.returnFalse,selectBeforeChildren:$.returnFalse,isArrangeable:function(){return false},toggleContentType:function(){var a=this.getPropertyValue("isContentTypeFluid");this.setPropertyValue("contentType",!a)},canDuplicate:function(){return false},changeElementSize:function(a){var b=this.getPropertyValue("isContentTypeFluid");if(!b){this.$element.css(a)}this.$elementSizeBox.css(a)},getPageContentElement:function(b){if(!this.data.pageToContainers[b]){var a=$("<div class='positioned'></div>");this.data.pageToContainers[b]=a}return this.data.pageToContainers[b]},addSectionElement:function(c,b){var a=this.data.sectionsByPage;$.objectSetIfUndefined(a,c.id,function(){var d={};return d});$.objectSet(a,[c.id,b.id],b);return this.getPageContentElement(c.id).append(b.$element)},removeSectionElement:function(c,b){var a=this.data.sectionsByPage;delete a[c.id][b.id]},getSectionsByPage:function(b){var a=this.data.sectionsByPage;var c=$.objectGet(a,[b.id]);if(c){return $.getValues(c)}return[]},getSectionsCountByPage:function(b){var a=this.data.sectionsByPage;var c=$.objectGet(a,[b.id]);if(c){return $.getKeys(c).length}return 0}},aggregatedMethods:{aggregations:{adjustInstanceToViewPort:function(){var a=this;this.setPropertyValue("margin",0)},onDetached:function(){var a=PageManager.getCurrentPage();PropertiesManager.invalidateProperty(a,"sizeAndPosition",undefined,a.getPropertyValue("sizeAndPosition"))},canDelete:function(){return MasterPagesManager.EditingMasterPage.isTrue()&&PageManager.getCurrentPage().getPageContentInstances().length>1},accept:function(a){return false},canRedropTo:function(){return false},isDroppable:function(){return false},onElementAddedToContainer:function(a){a.addPageContentInstance(this)},onRemove:function(){var a=this;this.parentInstance.removePageContentInstance(a)},switchToPreview:function(){LayoutManager.refreshElementsLayout(this)},switchToDesign:function(){LayoutManager.refreshElementsLayout(this)},getAutoLayoutProperties:function(a){return $.extend(a,{top:true,left:true})}}}}})})();(function(){ElementsModel.registerDefinition(ElementsTypes,{skinHierarchyBox:{className:"skin-hierarchy-box",category:ElementsTypesCategories.General,title:"Skin Element",features:[Features.DesignElement,Features.TemplateItem,Features.Focusable,Features.HasResponsiveItem,Features.Resizable,Features.Selectable,Features.HasBackground,Features.HasBackgroundImage,Features.ItemsContainer,Features.Clickable,Features.HasContent,Features.HasPadding,Features.Hideable,Features.HasBorder],methods:{creationFunction:function(){return $("<div></div>").addClass("absolute-fill")},getStyleStateAffectedInstances:function(a){return this.data.skinStyleAffectedInstances?this.data.skinStyleAffectedInstances.clone():[]},refreshSkinMetaData:function(){var a=this;var c={};var b={};var d=[];$.each(a.getDescendingInstances(true),function(h,g){var f=g.getPropertyValue("styleBindingFields");if(f){$.each(f,function(j,i){$.each(i,function(k,l){$.objectSet(c,[g.id,j],k);if(!b[j]){b[j]=[]}b[j].push(g)})});d.push(g);g.setSkinInstanceBox(a)}});a.data.skinStyleAffectedInstances=d;a.data.instanceIdToFieldsToPropertiesMap=c;a.data.boundFieldsToInstances=b;a.influenceChanged.fire(a)},getInstancesBindingsByField:function(b){var a=this;return a.data.boundFieldsToInstances[b]},setMainSkinInstance:function(a){this.data.skinInstance=a},getMainSkinInstance:function(){return this.data.skinInstance},canDuplicate:function(){return false}},aggregatedMethods:{aggregations:{canDelete:function(){return false},canRedropTo:function(){return false},getAutoLayoutProperties:function(){if(!this.parentInstance){return{}}else{return{left:true,top:true,width:true,height:true}}}}},initialize:function(b){var a=this;a.setMainSkinInstance(a.parentInstance);a.refreshSkinMetaData()}}})})();(function(){ElementsModel.registerDefinition(ElementsTypes,{skinInputElement:{className:"skin-input-element",title:"Input",defaultProperties:{skinBinding:function(){return{skinName:"skinInputElement",type:SkinsBindingsTypes.Global}}},features:[Features.CommonDataListSkinItem],methods:{getSkinSupportedStates:function(){return[ElementStates.ElementFocusedState,ElementStates.MouseOverState,ElementStates.MouseDownState]},clear:function(){var a=this.getInputField();return a.clear()},getValue:function(){var a=this.getInputField();return a.getValue()},canDuplicate:function(){return true},getInputField:function(){var a=this.data.formInput;if(!a){a=this.refreshFormInput()}return a},refreshFormInput:function(){var a=this;var b=a.getDescendingInstances(false);$.each(b,function(d,c){if(!a.data.formInput&&c.hasFeature(Features.FormInput)){a.data.formInput=c;c.canRedropTo=canRedropTo;c.canDelete=$.returnFalse}});return a.data.formInput}},aggregatedMethods:{aggregations:{canRedropTo:function(a,b){return false}}},onInstanceInitialized:function(){var a=this;a.instanceController.initializedEvent.bind(function(){a.refreshFormInput()})}}})})();function canRedropTo(b){var a=this;if(b.isDescendantOf(a)){return true}return false}(function(){ElementsModel.registerDefinition(ElementsTypes,{skinListViewItem:{className:"skin-list-view-element",category:ElementsTypesCategories.General,title:"Post Item",defaultProperties:{skinBinding:function(){return{skinName:"skinListViewItem",type:SkinsBindingsTypes.Global}}},features:[Features.RemoteDataListSkinItem]}})})();(function(){ElementsModel.registerDefinition(ElementsTypes,{skinImageElement:{className:"skin-image-element",category:ElementsTypesCategories.General,title:"Image",defaultProperties:{itemFields:function(){return{image:{type:"image",title:"Image",name:"image",isDefaultField:true}}},dataInfo:function(){return{currentData:{image:DesignerManager.getDefaultImage()}}},skinBinding:function(){return{skinName:"skinImageElement",type:SkinsBindingsTypes.Global}}},features:[Features.DesignElement,Features.HasDataSource,Features.SkinElement,Features.HasResponsiveItem,Features.Resizable,Features.Selectable,Features.HasLayout,Features.Clickable,Features.Hideable,Features.HasContent],delegatedDefinitionsProperties:[ElementsTypes.image,Features.HasImage],methods:{},aggregatedMethods:{aggregations:{}},initialize:function(b){var a=this}}})})();(function(){ElementsModel.registerDefinition(ElementsTypes,{SkinButtonElement:{className:"skin-button-element",title:"Button",defaultProperties:{itemFields:function(){return{title:{type:"title",title:"Text",name:"title",isDefaultField:true}}},dataInfo:function(){return{currentData:{image:DesignerManager.getDefaultImage()}}},skinBinding:function(){return{skinName:"SkinButtonElement",index:0,type:SkinsBindingsTypes.Global}}},features:[Features.DesignElement,Features.HasDataSource,Features.SkinElement,Features.HasResponsiveItem,Features.Resizable,Features.Editable,Features.Selectable,Features.HasLayout,Features.Clickable,Features.Hideable,Features.HasContent],delegatedDefinitionsProperties:[ElementsTypes.freeText],methods:{startEditingOnClick:$.returnTrue,editingEnabled:function(){var a=this;return(MobileVersionViewManager.Flags.IsInMobileContext.isFalse())},getSkinSupportedStates:function(){return[ElementStates.MouseOverState,ElementStates.MouseDownState]},getDelegatedTextInstance:function(){return this.getInstancesBindingsByField("formattedText")[0]}},aggregatedMethods:{aggregations:{onStartEditing:function(){switchToEditMode(this)},onFinishEditing:function(a){onTextEditingFinished(this);$.clearFocus()},}}}})})();function onTextEditingFinished(a){var c=a.getInstancesBindingsByField("formattedText")[0];var b=c.data.rte.useEditorController().getData();c.onFinishEditing(false);a.setPropertyValue("formattedText",b)}function switchToEditMode(a){var b=a.getInstancesBindingsByField("formattedText")[0];b.onStartEditing()}(function(){ElementsModel.registerDefinition(ElementsTypes,{skinDataItem:{className:"skin-image-element",title:"Data Item",defaultProperties:{skinBinding:function(){return{skinName:"skinDataItem",type:SkinsBindingsTypes.Global}}},features:[Features.CommonDataListSkinItem],aggregatedMethods:{aggregations:{canRedropTo:function(){return false}}}}})})();(function(){ElementsModel.registerDefinition(ElementsTypes,{skinGalleryItem:{className:"skin-gallery-element",title:"Image",defaultProperties:{skinBinding:function(){return{skinName:"skinGalleryItem",type:SkinsBindingsTypes.Global}}},features:[Features.CommonDataListSkinItem],aggregatedMethods:{aggregations:{canRedropTo:function(){return false}}}}})})();(function(){ElementsModel.registerDefinition(ElementsTypes,{skinMenuButtonItem:{className:"skin-menu-button-element",title:"Button",defaultProperties:{skinBinding:function(){return{skinName:"skinMenuButtonItem",type:SkinsBindingsTypes.Global}}},features:[Features.CommonDataListSkinItem],methods:{getFieldName:function(){return"MenuButton"},getSkinSupportedStates:function(){return[ElementStates.ElementSelectedState,ElementStates.MouseOverState,ElementStates.MouseDownState]},canDuplicate:function(){return false}}}})})();(function(){ElementsModel.registerDefinition(ElementsTypes,{skinVideoItem:{className:"skin-image-element",title:"Video",defaultProperties:{skinBinding:function(){return{skinName:"skinVideoItem",type:SkinsBindingsTypes.Global}}},features:[Features.CommonDataListSkinItem]}})})();(function(){ElementsModel.registerDefinition(ElementsTypes,{SkinSocialIconItem:{className:"skin-social-icon-element",category:ElementsTypesCategories.General,title:"Social Icon",defaultProperties:{skinBinding:function(){return{skinName:"SkinSocialIconItem",type:SkinsBindingsTypes.Global,index:0}}},features:[Features.DesignElement,Features.SkinElement,Features.DataListItem,Features.HasResponsiveItem,Features.Resizable,Features.Selectable,Features.HasLayout,Features.Clickable,Features.Hideable,Features.HasContent],methods:{getSkinSupportedStates:function(){return[ElementStates.MouseOverState,ElementStates.MouseDownState]},canDuplicate:$.returnFalse},aggregatedMethods:{aggregations:{}},initialize:function(b){var a=this}}})})();(function(){ElementsModel.registerDefinition(ElementsTypes,{SkinTagButton:{className:"skin-image-element",category:ElementsTypesCategories.General,title:"Tag Button",defaultProperties:{skinBinding:function(){return{skinName:"SkinTagButton",type:SkinsBindingsTypes.Global}}},features:[Features.RemoteDataListSkinItem],methods:{getSkinSupportedStates:function(){return[ElementStates.ElementSelectedState,ElementStates.MouseOverState,ElementStates.MouseDownState]}}}})})();(function(){ElementsModel.registerDefinition(ElementsTypes,{MenuButton:{className:"button-element",category:ElementsTypesCategories.General,icon:"/images/icons/elements/container.png",iconClass:"sprite-icon sprite-element-button",title:"Button",itemTitle:"Button",description:"No Description",skinTypeName:ElementsTypes.skinMenuButtonItem.name,features:[Features.DesignElement,Features.HasPadding,Features.HasContent,Features.Resizable,Features.Selectable,Features.HasBackground,Features.HasBackgroundImage,Features.ItemsContainer,Features.Clickable,Features.Hideable,Features.HasBorder,Features.DataListItem],methods:{creationFunction:function(a){a.data.$content=$("<div></div>").addClass("absolute-fill");return a.data.$content},canDuplicate:function(){return false}}}})})();(function(){ElementsModel.registerDefinition(ElementsTypes,{ImageBox:{className:"image-item-element",category:ElementsTypesCategories.General,icon:"/images/icons/elements/container.png",iconClass:"sprite-icon sprite-element-template",title:"Gallery Item",itemTitle:"Image Box",description:"No Description",convertFunction:TemplateThumbConversationsMap.ImageBoxTemplateToImageBoxItem,skinTypeName:ElementsTypes.skinGalleryItem.name,features:[Features.DesignElement,Features.HasPadding,Features.HasContent,Features.Resizable,Features.Selectable,Features.HasBackground,Features.HasBackgroundImage,Features.ItemsContainer,Features.Clickable,Features.Hideable,Features.HasBorder,Features.DataListItem],methods:{creationFunction:function(a){a.data.$content=$("<div></div>").addClass("absolute-fill");return a.data.$content}},aggregatedMethods:{aggregations:{canRedropTo:function(){return false}}}}})})();(function(){ElementsModel.registerDefinition(ElementsTypes,{DataListItemTemplate:{className:"data-list-item-element",category:ElementsTypesCategories.General,icon:"/images/icons/elements/container.png",iconClass:"sprite-icon sprite-element-templates",title:"Data List Item",itemTitle:"Data List Item",description:"No Description",skinTypeName:ElementsTypes.skinDataItem.name,features:[Features.DesignElement,Features.HasPadding,Features.HasContent,Features.Resizable,Features.Selectable,Features.HasBackground,Features.HasBackgroundImage,Features.ItemsContainer,Features.Clickable,Features.Hideable,Features.HasBorder,Features.DataListItem],methods:{creationFunction:function(a){a.data.$content=$("<div></div>").addClass("absolute-fill");return a.data.$content}},aggregatedMethods:{aggregations:{canRedropTo:function(){return false}}}}})})();(function(){ElementsModel.registerDefinition(ElementsTypes,{ListViewItemTemplate:{className:"list-view-item-element",category:ElementsTypesCategories.General,icon:"/images/icons/elements/container.png",iconClass:"sprite-icon sprite-element-templates",title:"List View Item",itemTitle:"List View Item",description:"No Description",skinTypeName:ElementsTypes.skinListViewItem.name,features:[Features.DesignElement,Features.HasPadding,Features.HasContent,Features.Resizable,Features.Selectable,Features.HasBackground,Features.HasBackgroundImage,Features.ItemsContainer,Features.Clickable,Features.Hideable,Features.HasBorder,Features.DataListItem],methods:{hasEditingBehaviour:function(){return false},creationFunction:function(a){a.data.$content=$("<div></div>").addClass("absolute-fill");return a.data.$content},canDuplicate:function(){return false}},aggregatedMethods:{aggregations:{canDelete:function(){return false},canRedropTo:function(){return false}}}}})})();(function(){ElementsModel.registerDefinition(ElementsTypes,{InputItem:{className:"input-element",category:ElementsTypesCategories.General,icon:"/images/icons/elements/container.png",iconClass:"sprite-icon sprite-element-button",title:"Input Item",itemTitle:"Input Item",description:"No Description",skinTypeName:ElementsTypes.skinInputElement.name,features:[Features.DesignElement,Features.HasPadding,Features.HasContent,Features.Resizable,Features.Selectable,Features.HasBackground,Features.HasBackgroundImage,Features.ItemsContainer,Features.Clickable,Features.Hideable,Features.HasBorder,Features.Focusable,Features.DataListItem],methods:{creationFunction:function(a){a.data.$content=$("<div></div>").addClass("absolute-fill");return a.data.$content},clear:function(){var a=this.getInputField();return a.clear()},getValue:function(){var a=this.getInputField();return a.getValue()},canDuplicate:function(){return true},getInputField:function(){return this.data.formInput}},aggregatedMethods:{aggregations:{canRedropTo:function(a,b){return false}}},onInstanceInitialized:function(){var a=this;var b=a.getDescendingInstances(false);$.each(b,function(d,c){if(!a.data.formInput&&c.hasFeature(Features.FormInput)){a.data.formInput=c;c.canRedropTo=f;c.canDelete=$.returnFalse}function f(g){if(g.isDescendantOf(a)){return true}return false}})}}})})();(function(){ElementsModel.registerDefinition(ElementsTypes,{Icon:{iconClass:"sprite-icon sprite-element-flash",title:"Icon",features:[Features.DesignElement,Features.HasResponsiveItem,Features.Resizable,Features.Selectable,Features.HasBackground,Features.HasLayout,Features.HasPadding,Features.Clickable,Features.Hideable,Features.HasBorder,Features.Rotatable,Features.HasContent,Features.HasContentOverlay],properties:{iconColor:{title:"Color",isStyleProperty:true,isStateProperty:true,supportsStatesTransitionAnimation:true,supportsThemeBinding:true,defaultValue:function(){return"black"},onChange:function(b,c,d){c=ThemeColorsManager.evaluateColorBinding(c,true);this.animatePart(this.data.$icon,{color:c},true,d)}},iconReference:{title:"Icon",defaultValue:$.returnNull,isStateProperty:true,supportsBinding:true,isBound:function(b){return b.isBound&&b.isBound(DataSourceItemsFields.fontIcon.getContentType())},onChange:function(c,d){var b=this;FontIconsManager.applyIcon(b.data.$icon,d)}},iconSize:{title:"Size",defaultValue:function(){return 24},isStateProperty:true,supportsStatesTransitionAnimation:true,onChange:function(b,c,d){a(this,d)}}},methods:{hasBinding:function(){return PropertiesTypes.iconReference.isBound(this)},creationFunction:function(b){var c=$("<div class='icon-element-content'></div>");b.data.$icon=c;return c}},aggregatedMethods:{aggregations:{adjustInstanceToViewPort:function(){this.setPropertyValue("iconSize","auto")},onUpdateBindingReady:function(g){var b=this;var c=this.getPropertyValue("iconReference");if($.isPlainObject(c)){c=$.extend({},c)}var h=this.getPropertyValue("binding");var d=h.dataFields;var f={};if(this.isBound(DataSourceItemsFields.fontIcon.getContentType())){f[d[DataSourceItemsFields.fontIcon.getContentType()].name]=c}return $.extend({},g,f)},createBindingFieldsToProperties:function(c){var b=this;var d=DataSourceItemsFields.fontIcon.getContentType();if(b.isBound(d)){c[PropertiesTypes.iconReference.name]=ObservableObject.createPropertyBinding(b,{propertyName:PropertiesTypes.iconReference.name})}return c},onContentTypeChanged:function(){var b=this;b.setPropertyValue(PropertiesTypes.iconReference.name,undefined)},onBoundValueReady:function(f,g){var b=this;var d=DataSourceItemsFields.fontIcon.getContentType();if(b.isBound(d)){var c=f[d]===undefined?DesignerManager.getDefaultImage():f[d];this.setBindingValueToProperty(c,PropertiesTypes.iconReference.name)}}}},onInstanceInitialized:function(){var d=this;var c=SimpleEvent.createEventListener(d.contentSizeChangedEvent,function(){var f=d.getPropertyValue("iconSize");if(f==="auto"){a(d)}});var b=d.visibilityChangedEvent.bindAndExecute(function(){var f=PositionManager.isElementVisible(d);if(f){LayoutManager.layoutUpdateBatch.performOperation(function(){var g=PositionManager.isElementVisible(d);if(g){c.activateAndExecute()}})}else{c.deactivate()}});d.instanceRemoving.one(function(){b.unbind();c.dispose()})}}});function a(c,f){var b=c.getPropertyValue("iconSize");if(b==="auto"){var d=PositionManager.getContentSize(c);b=Math.min(d.height,d.width)*(1/Math.sqrt(2))}c.animatePart(c.data.$icon,{"font-size":b,"margin-top":-b/2},false,f)}})();(function(){ElementsModel.registerDefinition(ElementsTypes,{SkinNavigationButton:{title:"Navigation Button",features:[Features.DesignElement,Features.HasDataSource,Features.SkinElement,Features.HasResponsiveItem,Features.Resizable,Features.Selectable,Features.HasLayout,Features.Clickable,Features.Hideable,Features.HasContent,Features.HasNavigation],delegatedDefinitionsProperties:[ElementsTypes.Icon],methods:{getFieldName:function(){return"SkinNavigationButton"}},aggregatedMethods:{aggregations:{}},initialize:function(b){var a=this}}})})();(function(){var b={id:"TwitterFollowApp",version:1,name:"Twitter Follow Button",url:function(){return PathUtils.combinePaths(Settings.ApplicationRoot,"/extern/twitter-app/twitter-app.html")},isCacheDisabled:false,type:"ui",manages:[{title:"Widget Settings",type:"main",showElementSettings:true}],excludeFeatures:["HasBackground","HasPadding","HadBackgroundImage","HasBorder","HasBackgroundOverlay"],defaultProperties:{sizeAndPosition:{width:300,height:24,top:0,left:0}},settingCategories:[{title:"Button Settings",settings:{widgetType:{defaultValue:"twitterFollow",isDisableUserEdit:true,isQueryParam:true},defaultUser:{defaultValue:"twitter",isDisableUserEdit:true,isQueryParam:true},followUser:{title:"Follow User:",type:"text-box",defaultValue:"twitter",isQueryParam:true},showCount:{title:"Show number of followers",type:"check-box",defaultValue:true,isQueryParam:true,stateType:"custom"},showScreenName:{title:"Show user name",type:"check-box",defaultValue:true,isQueryParam:true,stateType:"custom"}}}],features:[]};var a={id:"TwitterFollow",apps:[b]};AppsManager.addAppContainer(a)})();(function(){var a={id:"TwitterTweetApp",version:1,name:"Twitter Tweet Button",url:function(){return PathUtils.combinePaths(Settings.ApplicationRoot,"/extern/twitter-app/twitter-app.html")},isCacheDisabled:false,type:"ui",manages:[{title:"Widget Settings",type:"main",showElementSettings:true}],excludeFeatures:["HasBackground","HasPadding","HadBackgroundImage","HasBorder","HasBackgroundOverlay"],defaultProperties:{sizeAndPosition:{width:107,height:20,top:0,left:0}},settingCategories:[{title:"Button Settings",settings:{widgetType:{defaultValue:"twitterTweet",isDisableUserEdit:true,isQueryParam:true},useCustomUrl:{title:"Tweet custom url",type:"check-box",defaultValue:false,isQueryParam:true},tweetUrl:{title:"Url to tweet:",type:"text-box",defaultValue:"http://www.twitter.com",isQueryParam:true,bindState:{type:"setting",state:"enabling",settingName:"useCustomUrl",value:false,negative:true}},tweetVia:{title:"Tweet via user:",type:"text-box",defaultValue:"",isQueryParam:true},customTweetText:{title:"Add custom tweet text:",type:"text-box",defaultValue:"",isQueryParam:true},countLayout:{title:"Tweet count layout:",type:"combo-box",values:[{title:"Horizontal",value:"horizontal"},{title:"Vertical",value:"vertical"},{title:"None",value:"none"}],defaultValue:"horizontal",isQueryParam:true,stateType:"custom"}}}],features:[]};var b={id:"TwitterTweet",apps:[a]};AppsManager.addAppContainer(b)})();(function(){var a={id:"FacebookShareApp",version:1,name:"Facebook Share Button",url:function(){return PathUtils.combinePaths(Settings.ApplicationRoot,"/extern/facebook-widget-app/facebook-widget-app.html")},isCacheDisabled:false,type:"ui",manages:[{title:"Widget Settings",type:"main",showElementSettings:true}],excludeFeatures:["HasBackground","HasPadding","HadBackgroundImage","HasBorder","HasBackgroundOverlay"],defaultProperties:{sizeAndPosition:{width:84,height:20,top:0,left:0}},settingCategories:[{title:"Button Settings",settings:{widgetType:{defaultValue:"facebookShare",isDisableUserEdit:true,isQueryParam:true},appId:{defaultValue:$.valueOrDefault(Settings.FacebookAppID,Global.FacebookAppID),isDisableUserEdit:true,isQueryParam:true},useCustomUrl:{title:"Share custom url:",type:"check-box",defaultValue:false,isQueryParam:true},url:{title:"Url to share:",type:"text-box",defaultValue:"http://www.facebook.com",isQueryParam:true,bindState:{type:"setting",state:"enabling",settingName:"useCustomUrl",value:false,negative:true}},layout:{title:"Button Layout:",type:"combo-box",values:[{title:"Button with Count",value:"button_count"},{title:"Box with Count",value:"box_count"},{title:"Button Only",value:"button"},{title:"Icon with Link",value:"icon_link"},{title:"Icon Only",value:"icon"},{title:"Link Only",value:"link"}],defaultValue:"button_count",isQueryParam:true,stateType:"custom"}}}],features:[]};var b={id:"FacebookShare",apps:[a]};AppsManager.addAppContainer(b)})();(function(){var b={id:"FacebookLikeApp",version:1,name:"Facebook Like Button",url:function(){return PathUtils.combinePaths(Settings.ApplicationRoot,"/extern/facebook-widget-app/facebook-widget-app.html")},isCacheDisabled:false,type:"ui",manages:[{title:"Widget Settings",type:"main",showElementSettings:true}],excludeFeatures:["HasBackground","HasPadding","HadBackgroundImage","HasBorder","HasBackgroundOverlay"],defaultProperties:{sizeAndPosition:{width:76,height:20,top:0,left:0}},settingCategories:[{title:"Button Settings",settings:{widgetType:{defaultValue:"facebookLike",isDisableUserEdit:true,isQueryParam:true},appId:{defaultValue:$.valueOrDefault(Settings.FacebookAppID,Global.FacebookAppID),isDisableUserEdit:true,isQueryParam:true},useCustomUrl:{title:"Like custom url",type:"check-box",defaultValue:false,isQueryParam:true},url:{title:"Url to like:",type:"text-box",defaultValue:"http://www.facebook.com",isQueryParam:true,bindState:{type:"setting",state:"enabling",settingName:"useCustomUrl",value:false,negative:true}},layout:{title:"Button layout:",type:"combo-box",values:[{title:"Button with Count",value:"button_count"},{title:"Standard",value:"standard"},{title:"Box with Count",value:"box_count"},{title:"Button Only",value:"button"}],defaultValue:"button_count",isQueryParam:true,stateType:"custom"},actionType:{title:"Action:",type:"combo-box",values:[{title:"Like",value:"like"},{title:"Recommend",value:"recommend"}],defaultValue:"like",isQueryParam:true},showFaces:{title:"Show faces",type:"check-box",defaultValue:false,isQueryParam:true,bindState:{type:"setting",state:"displaying",settingName:"layout",value:"standard",stateType:"custom"}}}}],features:[]};var a={id:"FacebookLike",apps:[b]};AppsManager.addAppContainer(a)})();(function(){var b={id:"FacebookFollowApp",version:1,name:"Facebook Follow Button",url:function(){return PathUtils.combinePaths(Settings.ApplicationRoot,"/extern/facebook-widget-app/facebook-widget-app.html")},isCacheDisabled:false,type:"ui",manages:[{title:"Widget Settings",type:"main",showElementSettings:true}],excludeFeatures:["HasBackground","HasPadding","HadBackgroundImage","HasBorder","HasBackgroundOverlay"],defaultProperties:{sizeAndPosition:{width:90,height:20,top:0,left:0}},settingCategories:[{title:"Button Settings",settings:{widgetType:{defaultValue:"facebookFollow",isDisableUserEdit:true,isQueryParam:true},appId:{defaultValue:$.valueOrDefault(Settings.FacebookAppID,Global.FacebookAppID),isDisableUserEdit:true,isQueryParam:true},url:{title:"Profile to follow:",type:"text-box",defaultValue:"http://www.facebook.com",isQueryParam:true},layout:{title:"Button layout:",type:"combo-box",values:[{title:"Button with Count",value:"button_count"},{title:"Standard",value:"standard"},{title:"Box with Count",value:"box_count"},{title:"Button Only",value:"button"}],defaultValue:"button_count",isQueryParam:true,stateType:"custom"},colorScheme:{title:"Color scheme:",type:"combo-box",values:[{title:"Light",value:"light"},{title:"Dark",value:"dark"}],defaultValue:"light",isQueryParam:true,bindState:{type:"setting",state:"enabling",settingName:"layout",value:"standard"},stateType:"custom"},showFaces:{title:"Show faces",type:"check-box",defaultValue:false,isQueryParam:true,bindState:{type:"setting",state:"displaying",settingName:"layout",value:"standard"},stateType:"custom"}}}],features:[]};var a={id:"FacebookFollow",apps:[b]};AppsManager.addAppContainer(a)})();(function(){var b={id:"FacebookCommentsApp",version:1,name:"Facebook Comments",url:function(){return PathUtils.combinePaths(Settings.ApplicationRoot,"/extern/facebook-widget-app/facebook-widget-app.html")},isCacheDisabled:false,type:"ui",resizingSettings:{minSize:{width:50,height:50}},growableSettings:{view:true,design:false},manages:[{title:"Widget Settings",type:"main",showElementSettings:true}],excludeFeatures:["HasBackground","HasPadding","HadBackgroundImage","HasBorder","HasBackgroundOverlay"],defaultProperties:{sizeAndPosition:{width:400,height:140,top:0,left:0}},settingCategories:[{title:"Widget Settings",settings:{widgetType:{defaultValue:"facebookComments",isDisableUserEdit:true,isQueryParam:true},appId:{defaultValue:$.valueOrDefault(Settings.FacebookAppID,Global.FacebookAppID),isDisableUserEdit:true,isQueryParam:true},width:{defaultValue:"100%",isDisableUserEdit:true,isQueryParam:true},postLimit:{title:"No. of posts:",type:"numeric",defaultValue:10,min:1,max:Infinity,isQueryParam:true,stateType:"custom"},colorScheme:{title:"Color scheme:",type:"combo-box",values:[{title:"Light",value:"light"},{title:"Dark",value:"dark"}],defaultValue:"light",isQueryParam:true,stateType:"custom"}}}],features:["Resizable"]};var a={id:"FacebookComments",apps:[b]};AppsManager.addAppContainer(a)})();(function(){var b={id:"FacebookActivityApp",version:1,name:"Facebook Activity Feed ",url:function(){return PathUtils.combinePaths(Settings.ApplicationRoot,"/extern/facebook-widget-app/facebook-widget-app.html")},isCacheDisabled:false,type:"ui",manages:[{title:"Widget Settings",type:"main",showElementSettings:true}],excludeFeatures:["HasBackground","HasPadding","HadBackgroundImage","HasBorder","HasBackgroundOverlay"],resizingSettings:{canResizeVertically:false,minSize:{width:160,height:20}},defaultProperties:{sizeAndPosition:{width:300,height:300,top:0,left:0}},settingCategories:[{title:"Widget Settings",settings:{widgetType:{isDisableUserEdit:true,defaultValue:"facebookActivityFeed",isQueryParam:true},appId:{defaultValue:$.valueOrDefault(Settings.FacebookAppID,Global.FacebookAppID),isDisableUserEdit:true,isQueryParam:true},useCustomUrl:{title:"Use custom domain",type:"check-box",defaultValue:false,isQueryParam:true},url:{title:"Activity for domain:",type:"text-box",defaultValue:"www.facebook.com",isQueryParam:true,bindState:{type:"setting",state:"enabling",settingName:"useCustomUrl",value:false,negative:true}},width:{defaultValue:"100%",isDisableUserEdit:true,isQueryParam:true},limitPostAge:{title:"Limit post age",type:"check-box",defaultValue:false,isQueryParam:true},maxAge:{title:"Post age (days):",type:"numeric",defaultValue:0,min:0,max:180,isQueryParam:true,bindState:{type:"setting",state:"enabling",settingName:"limitPostAge",value:false,negative:true}},colorScheme:{title:"Color scheme:",type:"combo-box",values:[{title:"Light",value:"light"},{title:"Dark",value:"dark"}],defaultValue:"light",isQueryParam:true,stateType:"custom"}}}],features:["Resizable"]};var a={id:"FacebookActivity",apps:[b]};AppsManager.addAppContainer(a)})();(function(){var b={id:"FacebookLikeboxApp",version:1,name:"Facebook Likebox",url:function(){return PathUtils.combinePaths(Settings.ApplicationRoot,"/extern/facebook-widget-app/facebook-widget-app.html")},isCacheDisabled:false,type:"ui",resizingSettings:{canResizeVertically:false,minSize:{width:290,height:20}},manages:[{title:"Widget Settings",type:"main",showElementSettings:true}],excludeFeatures:["HasBackground","HasPadding","HadBackgroundImage","HasBorder","HasBackgroundOverlay"],defaultProperties:{sizeAndPosition:{width:400,height:70,top:0,left:0}},settingCategories:[{title:"Widget Settings",settings:{widgetType:{defaultValue:"facebookLikeBox",isDisableUserEdit:true,isQueryParam:true},appId:{defaultValue:$.valueOrDefault(Settings.FacebookAppID,Global.FacebookAppID),isDisableUserEdit:true,isQueryParam:true},useCustomUrl:{title:"Like custom url",type:"check-box",defaultValue:false,isQueryParam:true},url:{title:"Facebook page to like",type:"text-box",defaultValue:"http://www.facebook.com/facebook",isQueryParam:true,bindState:{type:"setting",state:"enabling",settingName:"useCustomUrl",value:false,negative:true}},colorScheme:{title:"Color scheme",type:"combo-box",values:[{title:"Light",value:"light"},{title:"Dark",value:"dark"}],defaultValue:"light",isQueryParam:true,stateType:"custom"},showFaces:{title:"Show faces",type:"check-box",defaultValue:false,isQueryParam:true,stateType:"custom"},showHeader:{defaultValue:false,isQueryParam:true,isDisableUserEdit:true},showPosts:{title:"Show posts",type:"check-box",defaultValue:false,isQueryParam:true,stateType:"custom"}}}],features:["Resizable"]};var a={id:"FacebookLikebox",apps:[b]};AppsManager.addAppContainer(a)})();(function(){var b={id:"TwitterFeedApp",version:1,name:"Twitter Feed",url:function(){return PathUtils.combinePaths(Settings.ApplicationRoot,"/extern/twitter-app/twitter-app.html")},isCacheDisabled:false,type:"ui",resizingSettings:{canResizeVertically:false,minSize:{width:40,height:0}},manages:[{title:"Widget Settings",type:"main",showElementSettings:true}],excludeFeatures:["HasBackground","HasPadding","HadBackgroundImage","HasBorder","HasBackgroundOverlay"],defaultProperties:{sizeAndPosition:{width:224,height:400,top:0,left:0}},settingCategories:[{title:"WIDGET SETTINGS",settings:{widgetType:{defaultValue:"twitterFeed",isDisableUserEdit:true,isQueryParam:true},user:{title:"User:",type:"text-box",defaultValue:"twitter",isQueryParam:true},theme:{title:"Theme:",type:"combo-box",values:[{title:"Light",value:"light"},{title:"Dark",value:"dark"}],defaultValue:"light",isQueryParam:true,stateType:"custom"},limitTweets:{title:"Limit number of tweets",type:"check-box",defaultValue:false,isQueryParam:true,stateType:"custom"},dataWidgetId:{defaultValue:"",isDisableUserEdit:true,isQueryParam:true},tweetLimit:{title:"Tweet limit:",type:"numeric",defaultValue:5,min:1,max:20,isQueryParam:true,bindState:{type:"setting",state:"enabling",settingName:"limitTweets",value:false,negative:true},stateType:"custom"}}}],features:["Resizable"]};var a={id:"TwitterFeed",apps:[b]};AppsManager.addAppContainer(a)})();(function(){var a={id:"LinkedinShareApp",version:1,name:"LinkedIn Share Button",url:function(){return PathUtils.combinePaths(Settings.ApplicationRoot,"/extern/linkedin-app/linkedin-app.html")},isCacheDisabled:false,type:"ui",manages:[{title:"Widget Settings",type:"main",showElementSettings:true}],excludeFeatures:["HasBackground","HasPadding","HadBackgroundImage","HasBorder","HasBackgroundOverlay"],defaultProperties:{sizeAndPosition:{width:107,height:25,top:0,left:0}},settingCategories:[{title:"Button Settings",settings:{widgetType:{defaultValue:"linkedinShare",isDisableUserEdit:true,isQueryParam:true},useCustomUrl:{title:"Share custom url",type:"check-box",defaultValue:false,isQueryParam:true},shareUrl:{title:"Url to Share:",type:"text-box",defaultValue:"http://www.linkedin.com",isQueryParam:true,bindState:{type:"setting",state:"enabling",settingName:"useCustomUrl",value:false,negative:true}},showCount:{title:"Share count layout:",type:"combo-box",values:[{title:"Horizontal",value:"right"},{title:"Vertical",value:"top"},{title:"None",value:"none"}],defaultValue:"right",isQueryParam:true}}}],features:[]};var b={id:"LinkedinShare",apps:[a]};AppsManager.addAppContainer(b)})();(function(){var b={id:"LinkedinFollowApp",version:1,name:"Linkedin Follow Button",url:function(){return PathUtils.combinePaths(Settings.ApplicationRoot,"/extern/linkedin-app/linkedin-app.html")},isCacheDisabled:false,type:"ui",manages:[],resizingSettings:{minSize:{width:60,height:20}},defaultProperties:{sizeAndPosition:{width:156,height:20,top:0,left:0}},settingCategories:[{title:"Button Settings",settings:{widgetType:{defaultValue:"linkedinFollow",isDisableUserEdit:true,isQueryParam:true},followUser:{title:"ID of company to follow:",type:"text-box",defaultValue:"1337",isQueryParam:true},showCount:{title:"Follower count layout:",type:"combo-box",values:[{title:"Horizontal",value:"right"},{title:"Vertical",value:"top"},{title:"None",value:"none"}],defaultValue:"right",isQueryParam:true}}}],features:[]};var a={id:"LinkedinFollow",apps:[b]};AppsManager.addAppContainer(a)})();(function(){var a={id:"linkedin-company-profile-app",version:1,name:"Linkedin Company Profile",url:function(){return PathUtils.combinePaths(Settings.ApplicationRoot,"/extern/linkedin-app/linkedin-app.html")},isCacheDisabled:false,type:"ui",manages:[],defaultProperties:{sizeAndPosition:{width:160,height:20,top:0,left:0}},settingCategories:[{title:"Widget Settings",settings:{widgetType:{defaultValue:"linkedinCompanyProfile",isDisableUserEdit:true,isQueryParam:true},companyId:{title:"ID of company to follow:",type:"text-box",defaultValue:"1337",isQueryParam:true},widgetText:{title:"Show company name",type:"text-box",defaultValue:"Linkedin",isQueryParam:true},panelBehavior:{title:"Show panel on:",type:"combo-box",values:[{title:"On Hover",value:"hover"},{title:"On Click",value:"click"},],defaultValue:"hover",isQueryParam:true},showConnections:{title:"Show Connections",type:"check-box",defaultValue:true,isQueryParam:true}}}],features:["Resizable"]};var b={id:"linkedin-company-profile",apps:[a]};AppsManager.addAppContainer(b)})();(function(){var b={id:"GooglePlusOneApp",version:1,name:"Google Plus +1 Button",url:function(){return PathUtils.combinePaths(Settings.ApplicationRoot,"/extern/google-app/google-app.html")},isCacheDisabled:false,type:"ui",manages:[{title:"Widget Settings",type:"main",showElementSettings:true}],excludeFeatures:["HasBackground","HasPadding","HadBackgroundImage","HasBorder","HasBackgroundOverlay"],resizingSettings:{canResizeVertically:false,minSize:{width:38,height:24}},defaultProperties:{sizeAndPosition:{width:264,height:24,top:0,left:0}},settingCategories:[{title:"Button Settings",settings:{widgetType:{defaultValue:"googlePlusOne",isDisableUserEdit:true,isQueryParam:true},useCustomUrl:{title:"+1 custom url",type:"check-box",defaultValue:false,isQueryParam:true},url:{title:"Url to +1",type:"text-box",defaultValue:"http://www.google.com",isQueryParam:true,bindState:{type:"setting",state:"enabling",settingName:"useCustomUrl",value:false,negative:true}},width:{defaultValue:264,isDisableUserEdit:true,isQueryParam:true},dataSize:{defaultValue:"standard",isDisableUserEdit:true,isQueryParam:true},dataAnnotation:{title:"Count Layout:",type:"combo-box",values:[{title:"Inline",value:"inline"},{title:"Bubble",value:"bubble"},{title:"None",value:"none"},{title:"Tall",value:"tall"}],defaultValue:"inline",isQueryParam:true,stateType:"custom"}}}],features:["Resizable"]};var a={id:"GooglePlusOne",apps:[b]};AppsManager.addAppContainer(a)})();(function(){var b={id:"GoogleFollowApp",version:1,name:"Google+ Follow Button",url:function(){return PathUtils.combinePaths(Settings.ApplicationRoot,"/extern/google-app/google-app.html")},isCacheDisabled:false,type:"ui",resizingSettings:{minSize:{width:80,height:20}},manages:[{title:"Widget Settings",type:"main",showElementSettings:true}],excludeFeatures:["HasBackground","HasPadding","HadBackgroundImage","HasBorder","HasBackgroundOverlay"],defaultProperties:{sizeAndPosition:{width:118,height:20,top:0,left:0}},settingCategories:[{title:"Button Settings",settings:{widgetType:{defaultValue:"googleFollow",isDisableUserEdit:true,isQueryParam:true},followUser:{title:"User to follow",type:"text-box",defaultValue:"+Google",isQueryParam:true},height:{defaultValue:20,isDisableUserEdit:true,isQueryParam:true},dataAnnotation:{title:"Count Layout:",type:"combo-box",values:[{title:"Bubble",value:"bubble"},{title:"Vertical",value:"vertical-bubble"},{title:"None",value:"none"}],defaultValue:"bubble",isQueryParam:true,stateType:"custom"}}}],features:[]};var a={id:"GoogleFollow",apps:[b]};AppsManager.addAppContainer(a)})();(function(){var b={id:"GoogleShareApp",version:1,name:"Google+ Share Button",url:function(){return PathUtils.combinePaths(Settings.ApplicationRoot,"/extern/google-app/google-app.html")},isCacheDisabled:false,type:"ui",manages:[{title:"Widget Settings",type:"main",showElementSettings:true}],excludeFeatures:["HasBackground","HasPadding","HadBackgroundImage","HasBorder","HasBackgroundOverlay"],resizingSettings:{canResizeVertically:false,minSize:{width:57,height:20}},defaultProperties:{sizeAndPosition:{width:200,height:68,top:0,left:0}},settingCategories:[{title:"Button Settings",settings:{widgetType:{defaultValue:"googleShare",isDisableUserEdit:true,isQueryParam:true},dataAction:{defaultValue:"share",isDisableUserEdit:true,isQueryParam:true},useCustomUrl:{title:"Share custom url",type:"check-box",defaultValue:false,isQueryParam:true},url:{title:"Url to share",type:"text-box",defaultValue:"http://www.google.com",isQueryParam:true,bindState:{type:"setting",state:"enabling",settingName:"useCustomUrl",value:false,negative:true}},width:{defaultValue:200,isDisableUserEdit:true,isQueryParam:true},dataAnnotation:{title:"Count Layout:",type:"combo-box",values:[{title:"Inline",value:"inline"},{title:"Bubble (Horizontal)",value:"bubble"},{title:"Bubble (Vertical)",value:"vertical-bubble"},{title:"None",value:"none"}],defaultValue:"inline",isQueryParam:true,stateType:"custom"}}}],features:["Resizable"]};var a={id:"GoogleShare",apps:[b]};AppsManager.addAppContainer(a)})();(function(){var a={id:"ecwid-app",version:1,name:"Store",url:function(){return PathUtils.combinePaths(Settings.ApplicationRoot,"/extern/ecwid-app/ecwid.html")},isCacheDisabled:false,type:"ui",styleSupport:true,resizingSettings:{canResizeVertically:false},manages:[{title:"Manage Store",type:"main",panel:"EcwidManagePanel"}],defaultProperties:{sizeAndPosition:{width:960,height:400,top:0,left:-480}},settingCategories:[{title:"LAYOUT SETTINGS",settings:{storeId:{defaultValue:5194001,isDisableUserEdit:true,isQueryParam:true},categoriesPerRow:{title:"Categories in row:",type:"numeric",defaultValue:3,min:1,max:Infinity,isQueryParam:true,stateType:"custom"},categoryView:{title:"Default view:",type:"combo-box",values:[{title:"Grid",value:"grid"},{title:"List",value:"list"},{title:"Table",value:"table"}],defaultValue:"grid",isQueryParam:true,stateType:"custom"},tableNumber:{title:"Table - products in page:",type:"numeric",defaultValue:20,min:1,max:Infinity,isQueryParam:true,stateType:"custom"},listNumber:{title:"List - products in page:",type:"numeric",defaultValue:10,min:1,max:Infinity,isQueryParam:true,stateType:"custom"},gridColumnNumber:{title:"Grid - products in column:",type:"numeric",defaultValue:3,min:1,max:Infinity,isQueryParam:true,stateType:"custom"},gridRowNumber:{title:"Grid - products in row:",type:"numeric",defaultValue:3,min:1,max:Infinity,isQueryParam:true,stateType:"custom"}}}],features:["Resizable"]};AppsManager.addAppContainer({id:"ecwid",apps:[a]})})();(function(){function b(c){EmbedHtmlDialog.open({html:c.getAppSettingValue("html")||undefined,headerHtml:c.getAppSettingValue("headerHtml")||undefined,submitCallback:function(f,d){OperationsManager.beginAtomicBatch(true);PropertiesManager.UpdateBatch.begin();c.setAppSettingValue("html",f);c.setAppSettingValue("headerHtml",d);PropertiesManager.UpdateBatch.end();OperationsManager.endAtomicBatch()}})}var a={id:"embed-html-app",version:1,name:"Embed Html",url:function(){return PathUtils.combinePaths(Settings.ApplicationRoot,"/extern/embed-html/embed-html.html")},isCacheDisabled:false,useSessionParams:true,type:"ui",manages:[{title:"Edit HTML",type:"main",manageCallback:b}],styleSupport:true,defaultProperties:{sizeAndPosition:{width:400,height:400,top:0,left:-480}},settingCategories:[{isDisableUserEdit:true,settings:{html:{stateType:"single",defaultValue:""},headerHtml:{stateType:"single",defaultValue:""}}}],methods:{initialize:function(){var c=this;if(Global.IsDesigner){var d=c.getAppSettingValue("html");c.inEmptyStateFlag.setValue(!d);c.InstancePropertiesInitialized.one(function(){c.bindAppSettingProperty("html",function(f){c.inEmptyStateFlag.setValue(!f)})})}},getEmptyTemplateInfo:function(){var c=this;return{title:"Embed HTML",iconClass:$.getIconClass("embedded-html",IconLocation.Font),actions:{editHtml:{title:"Insert HTML",doAction:function(){b(c)}}},label:"{editHtml}",shortLabel:"Empty HTML"}}},features:["Resizable","HasEmptyState"]};AppsManager.addAppContainer({id:"embed-html",apps:[a]})})();(function(){ElementsModel.registerDefinition(ElementsTypes,{EmbedIFrameElement:{title:"Embed IFrame",features:[Features.DesignElement,Features.HasResponsiveItem,Features.Resizable,Features.Selectable,Features.HasBackground,Features.HasLayout,Features.HasPadding,Features.Hideable,Features.HasBorder,Features.Rotatable,Features.HasContent,Features.HasContentOverlay,Features.IFrameContent,Features.HasEmptyState],properties:{iFrameUrl:{title:"IFrame Url",isNotForCustomProperty:true,defaultValue:$.returnEmptyString(),onChange:function(a,b){if(this.isInitialized){this.reloadIFrame(b)}}}},defaultProperties:{sizeAndPosition:function(){return{width:400,height:400,top:0,left:0}}},methods:{getIFrameUrl:function(){return this.getPropertyValue("iFrameUrl")},isScrollableIFrame:$.returnTrue},aggregatedMethods:{aggregations:{}}}})})();(function(){var a={id:"SoundcloudPlayerApp",version:1,name:"SoundCloud Player",url:function(){return PathUtils.combinePaths(Settings.ApplicationRoot,"/extern/soundcloud-app/soundcloud-app.html")},isCacheDisabled:false,type:"ui",resizingSettings:{minSize:{width:60,height:40}},manages:[{title:"Widget Settings",type:"main",showElementSettings:true}],excludeFeatures:["HasBackground","HasPadding","HadBackgroundImage","HasBorder","HasBackgroundOverlay"],defaultProperties:{sizeAndPosition:{width:450,height:300,top:0,left:0}},settingCategories:[{title:"Widget Settings",settings:{trackId:{title:"Track ID",type:"text-box",defaultValue:190574049,isQueryParam:true},height:{defaultValue:300,isDisableUserEdit:true,isQueryParam:true},autoPlay:{title:"Auto-play",type:"check-box",defaultValue:false,isQueryParam:true}}}],features:["Resizable"]};var b={id:"SoundcloudPlayer",apps:[a]};AppsManager.addAppContainer(b)})();(function(){DataSourcesManager.registerDataSourceDefinition({ButtonsGroupView:{fields:{index:{name:"index"},title:{name:"title"},icon:{name:"icon"}},isForSave:true,itemsInformation:undefined,collectionItems:undefined,getChangeTemplatePanelName:function(){return"ChangeButtonsGroupButton"},manageItemsPanelName:"ButtonsGroupPanel",manageItemsPanelTitle:"Manage Buttons",setDataItems:function(i,f){var d=DataSources[i];var b=ElementsManager.getInstanceByID(d.instanceId);f=$.makeArray(f);var a=b.getPropertyValue("dataInfo");var h=$.extend({},a);var g=$.extend({},h.currentData);var c=$.extend({},g.items);$.each(f,function(j,k){c[k.id]=$.extend({},c[k.id],k)});g.items=c;h.currentData=g;OperationsManager.beginAtomicBatch();b.setPropertyValue("dataInfo",h);OperationsManager.endAtomicBatch()},getIndex:function(d,f){var c=DataSources[d];var b=ElementsManager.getInstanceByID(c.instanceId);var a=b.getPropertyValue("dataInfo");return a.currentData.items[f].index},addDataItem:function(i,h){var d=DataSources[i];var b=ElementsManager.getInstanceByID(d.instanceId);var a=b.getPropertyValue("dataInfo");var g=$.extend({},a);var f=$.extend({},g.currentData);var c=$.extend({},f.items);c[h.id]=$.extend({},c[h.id],h);f.items=c;g.currentData=f;OperationsManager.beginAtomicBatch();b.setPropertyValue("dataInfo",g);OperationsManager.endAtomicBatch()},removeDataItem:function(f,j,b,h){var a=DataSources[f];var k=ElementsManager.getInstanceByID(a.instanceId);var g=k.getPropertyValue("dataInfo");var d=$.extend({},g);var c=$.extend({},d.currentData);var i=$.extend({},c.items);delete i[j];c.items=i;d.currentData=c;OperationsManager.beginAtomicBatch();k.setPropertyValue("dataInfo",d);OperationsManager.endAtomicBatch()},getEmptyItem:function(c,a){var b=$.extend({id:StructureLoadingManager.generateWebsiteId(),title:"Title",description:DesignerManager.DefaultTexts.description,icon:{imageUrl:DesignerManager.getDefaultIcon()}},a);return b},duplicateItem:function(b,a){return $.extend({},a,{id:StructureLoadingManager.generateWebsiteId()})},clear:function(b){var a=DataSources[b];a.itemsInformation.clear()},getItemFields:function(c){var b=DataSources[c];var a=ElementsManager.getInstanceByID(b.instanceId);return a.getPropertyValue("itemFields")},updateItemFields:function(c,d){var b=DataSources[c];var a=ElementsManager.getInstanceByID(b.instanceId);a.setPropertyValue("itemFields",d)},setDataInfo:function(d){var c=DataSources[d];var j=ElementsManager.getInstanceByID(c.instanceId);var g=j.getPropertyValue("dataInfo");c.getCollectionItems().postponeUpdates();if(g!==null&&g!==undefined){var h=c.itemsInformation.getItemsValues();var b=[];for(var f=0;f<$.getKeys(h).length;f++){if(!g.currentData.items[h[f].id]){b.push(h[f].id)}}c.itemsInformation.remove(b);var k=$.grep($.getValues(g.currentData.items),function(i){if(g.itemsMap&&g.itemsMap[i.id]===false){return false}return true});k=$(k).sort(function(l,i){if(l.index!==undefined&&i.index!==undefined){return l.index-i.index}else{if(l.index!==undefined){return -1}else{if(i.index!==undefined){return 1}else{return 0}}}});for(var f=0;f<k.length;f++){var a=k[f];a.index=f+1}c.itemsInformation.syncrhonize(k)}else{c.itemsInformation.clear()}c.getCollectionItems().unPostponeUpdates()}}})})();(function(){DataSourcesManager.registerDataSourceDefinition({GalleryElementView:{isForSave:true,itemsInformation:undefined,collectionItems:undefined,getChangeTemplatePanelName:function(){return"ChangeImageBox"},manageItemsPanelName:"GalleryItemsPanel",manageItemsPanelTitle:"Manage Gallery Items",setDataItems:function(g,d){var c=DataSources[g];var b=ElementsManager.getInstanceByID(c.instanceId);var a=b.getPropertyValue("dataInfo");var f=$.extend({},a);f.currentData=$.extend({},f.currentData);d=$.makeArray(d);$.each(d,function(h,j){f.currentData[j.id]=$.extend({},f.currentData[j.id],j)});OperationsManager.beginAtomicBatch();b.setPropertyValue("dataInfo",f);OperationsManager.endAtomicBatch()},getIndex:function(d,f){var c=DataSources[d];var b=ElementsManager.getInstanceByID(c.instanceId);var a=b.getPropertyValue("dataInfo");return a.currentData[f].index},addDataItem:function(h,g){var c=DataSources[h];var b=ElementsManager.getInstanceByID(c.instanceId);var a=b.getPropertyValue("dataInfo");var f=$.extend({},a);var d=$.extend({},f.currentData);d[g.id]=$.extend({},d[g.id],g);f.currentData=d;OperationsManager.beginAtomicBatch();b.setPropertyValue("dataInfo",f);OperationsManager.endAtomicBatch()},removeDataItem:function(f,i,b,h){var a=DataSources[f];var j=ElementsManager.getInstanceByID(a.instanceId);var g=j.getPropertyValue("dataInfo");var d=$.extend({},g);var c=$.extend({},d.currentData);delete c[i];d.currentData=c;OperationsManager.beginAtomicBatch();j.setPropertyValue("dataInfo",d);OperationsManager.endAtomicBatch()},getEmptyItem:function(a){var b=$.extend({id:StructureLoadingManager.generateWebsiteId(),title:"Title",description:DesignerManager.DefaultTexts.description,image:{imageUrl:DesignerManager.getDefaultImage()}},a);return b},duplicateItem:function(b,a){return $.extend({},a,{id:StructureLoadingManager.generateWebsiteId()})},clear:function(b){var a=DataSources[b];a.itemsInformation.clear()},getItemFields:function(c){var b=DataSources[c];var a=ElementsManager.getInstanceByID(b.instanceId);return a.getPropertyValue("itemFields")},updateItemFields:function(c,d){var b=DataSources[c];var a=ElementsManager.getInstanceByID(b.instanceId);a.setPropertyValue("itemFields",d)},setDataInfo:function(d){var c=DataSources[d];var k=ElementsManager.getInstanceByID(c.instanceId);var g=k.getPropertyValue("dataInfo");c.getCollectionItems().postponeUpdates();if(g!==null&&g!==undefined){var j=c.itemsInformation.getItemsValues();var b=[];for(var f=0;f<$.getKeys(j).length;f++){if(!g.currentData[j[f].id]){b.push(j[f].id)}}c.itemsInformation.remove(b);var h=$.grep($.getValues(g.currentData),function(i){if(g.itemsMap&&g.itemsMap[i.id]===false){return false}return true});h=$(h).sort(function(m,i){if(m.index!==undefined&&i.index!==undefined){return m.index-i.index}else{if(m.index!==undefined){return -1}else{if(i.index!==undefined){return 1}else{return 0}}}});var l=[];for(var f=0;f<h.length;f++){var a=$.extend({},h[f]);a.index=f+1;l.push(a)}c.itemsInformation.syncrhonize(l)}else{c.itemsInformation.clear()}c.getCollectionItems().unPostponeUpdates()}}})})();(function(){var a=$.extend(true,{},DataSourcesDefinitions.GalleryElementView,{getChangeTemplatePanelName:function(){return"ChangeDataListTemplate"},manageItemsPanelName:"DataListItemsPanel",manageItemsPanelTitle:"Manage List Items"});DataSourcesManager.registerDataSourceDefinition({DataListElementView:a})})();(function(){ElementsModel.registerMenuItemTypes({NavigableInstance:{name:"NavigableInstance"},MasterPages:{name:"MasterPages"},MasterPagesTag:{name:"MasterPagesTag"},DummyType:{name:"DummyType"}});DataSourcesManager.registerDataSourceDefinition({MenuElementView:{fields:{index:{name:"index"},title:{name:"title"}},isForSave:true,getPageMenuData:function(){var k=PageManager.PagesCollection;var j=k.getItems();var l={items:j,connectedItems:$.getKeys(j).length,id:MenuItemTypes.MasterPages.name,type:MenuItemTypes.MasterPages.name,title:"Website Pages"};return l},getChangeTemplatePanelName:function(){return"ChangeMenuButtonPanel"},manageItemsPanelName:"MenuItemsPanel",manageItemsPanelTitle:"Manage Menu Buttons",setDataItems:function(q,n){var m=DataSources[q];var k=ElementsManager.getInstanceByID(m.instanceId);var j=k.getPropertyValue("dataInfo");var p=$.extend({},j);var o=$.extend({},p.currentData);var l=$.extend({},m.getAllDataItems());n=$.makeArray(n);$.each(n,function(r,s){l[s.id]=$.extend({},l[s.id],s)});o.items=l;p.currentData=o;OperationsManager.beginAtomicBatch();k.setPropertyValue("dataInfo",p);OperationsManager.endAtomicBatch()},removeDataItem:function(m,q,k,o){var j=DataSources[m];var r=ElementsManager.getInstanceByID(j.instanceId);var n=r.getPropertyValue("dataInfo");var l=$.extend({},n);var p=$.extend({},l.itemsMap);p[q]=false;l.itemsMap=p;OperationsManager.beginAtomicBatch();r.setPropertyValue("dataInfo",l);OperationsManager.endAtomicBatch()},getAllDataItems:function(p){var l=DataSources[p];var j=ElementsManager.getInstanceByID(l.instanceId);if(!l.dataSourceInfo){return{}}var o=j.getPropertyValue("dataInfo");var n=$.objectGet(j.getPropertyValue("dataInfo"),["currentData","items"]);var k=l.dataSourceInfo.currentData.observableCollection.getItems();var m={};$.each(k,function(r,q){if(n[q.id]){m[r]=$.extend({},n[q.id])}else{m[r]=$.extend({},q)}});return $.extend({},m,l.collectionItems.getItems())},getItemFields:function(l){var k=DataSources[l];var j=ElementsManager.getInstanceByID(k.instanceId);return $.extend({},k.fieldsInformation.getItems(),j.getPropertyValue("itemFields"))},connectToNavigatable:function(n,j){var k=DataSources[n];var r=ElementsManager.getInstanceByID(k.instanceId);var s=j.elementType===ElementsTypes.page;var m={id:s?MenuItemTypes.MasterPages.name:j.id,type:s?MenuItemTypes.MasterPages.name:MenuItemTypes.NavigableInstance.name,index:1,title:s?"Master Pages":r.getPropertyValue("name")};var l;switch(m.type){case MenuItemTypes.NavigableInstance.name:l=j.getItemsInformation();break;case MenuItemTypes.MasterPages.name:l=PageManager.PagesInformation;break}var q=l.getItems();var p={};$.each(q,function(u,t){p[u]=true});var o=$.extend({},q);$.each(o,function(u,t){o[u]=$.extend({},t)});m.items=o;m.connectedItems=$.getKeys(o).length;r.setPropertyValue("dataInfo",{currentData:m,itemsMap:p})},updateItemFields:function(l,m){var k=DataSources[l];var j=ElementsManager.getInstanceByID(k.instanceId);j.setPropertyValue("itemFields",m);k.fieldsInformation.syncrhonize($.getValues(m))},clear:function(k){var j=DataSources[k];if(j.dataSourceInfo){h(j)}},setDataInfo:function(p){var k=DataSources[p];var j=ElementsManager.getInstanceByID(k.instanceId);var m=j.getPropertyValue("dataInfo");if(!m){window.setTimeout(function(){ElementsManager.removeInstances([j])},0);return}var n=i(m);var l=n.currentData;var o=n.itemsMap;if(l&&l.type===MenuItemTypes.NavigableInstance.name){ElementsManager.performOnInstancesInitialization([l.id],function(){q()})}else{q()}function q(){if(k.dataSourceInfo&&k.dataSourceInfo!==null&&k.dataSourceInfo.currentData){if(!l||l.id!==k.dataSourceInfo.currentData.id){h(k)}}if(l){if(!k.dataSourceInfo||k.dataSourceInfo===null){k.dataSourceInfo={}}g(k,l,o)}else{k.itemsInformation.clear()}}}}});function i(o){var m={};var l;var n;if(o&&o.currentData){m=$.extend({},o);l=$.extend({},o.currentData);n=$.extend({},o.itemsMap);var j=m.currentData.items;var k={};$.each(j,function(q,p){k[q]=$.extend({},p)});l.items=k;m.currentData=l;m.itemsMap=n}return m}function h(l){var m=l.dataSourceInfo.currentData;if(m){var k=$.getKeys(m.collectionItems.getItems());l.itemsInformation.remove(k);l.fieldsInformation.disconnectObservableCollection();l.itemsInformation.disconnectObservableCollection();ViewManager.Events.SwitchedToDesignMode.unbind(m.onSwitchToDesign);ViewManager.Events.SwitchedToViewMode.unbind(m.SwitchedToViewMode);switch(m.type){case MenuItemTypes.MasterPages.name:PageManager.Events.PageChanged.unbind(m.onItemChanged);break;case MenuItemTypes.MasterPagesTag.name:PageManager.Events.PageChanged.unbind(m.onItemChanged);PageManager.PagesTags.itemsRemovedEvent.unbind(m.onRemoved);SimpleEvent.unbind(m.onTagsToPageChanged);break;case MenuItemTypes.NavigableInstance.name:var j=ElementsManager.getInstanceByID(m.id);if(j){j.instanceRemoved.unbind(m.onRemoved)}m.itemsRefreshed.unbind()}delete l.dataSourceInfo.currentData}}function g(l,A,y){var o=ElementsManager.getInstanceByID(l.instanceId);var q=l.dataSourceInfo.currentData;var n=A.type===MenuItemTypes.NavigableInstance.name;if(!q||q.id!==A.id){var k;var j;var w;var z;var u;l.collectionFields.postponeUpdates();l.collectionItems.postponeUpdates();q={};switch(A.type){case MenuItemTypes.NavigableInstance.name:u=ElementsManager.getInstanceByID(A.id);if(!u){return}k=u.getItemsInformation();w=u.getFieldsInformation();j=u.getItemsCollection();z=u.getFieldsCollection();break;case MenuItemTypes.MasterPages.name:k=PageManager.PagesInformation;w=PageManager.FieldsInformation;j=PageManager.PagesCollection;z=PageManager.FieldsCollection;break;case MenuItemTypes.MasterPagesTag.name:if(!PageManager.TagsToPagesMapObservableCollection[A.tagName]){LayoutManager.layoutUpdateBatch.performOperation(function(){var B=o.getDataSource();B.connectToNavigatable(PageManager.getCurrentPage())});return}q.onTagsToPageChanged=SimpleEvent.bindAndExecute([PageManager.TagsToPagesMapObservableCollection[A.tagName].itemsAddedEvent,PageManager.TagsToPagesMapObservableCollection[A.tagName].itemsRemovedEvent],function(){if(k){k.disconnectObservableCollection()}else{k=new ObservableCollection()}k.connectObservableCollection(PageManager.PagesCollection,{filterFunction:function(B){var C=PageManager.TagsToPagesMapObservableCollection[A.tagName];if(!C||C.getItem(B.id)){return true}return false}})});w=PageManager.FieldsInformation;j=CollectionObserver.create(k);z=PageManager.FieldsCollection;break;case MenuItemTypes.DummyType.name:k=DummyDataSource.getItemsInformation();w=DummyDataSource.getFieldsInformation();j=DummyDataSource.getItemsCollection();z=DummyDataSource.getFieldsCollection();break}q=$.extend({id:A.id,type:A.type,itemsMap:y,observableCollection:k,observableFields:w,collectionItems:j,collectionFields:z},q);l.dataSourceInfo.currentData=q;switch(A.type){case MenuItemTypes.NavigableInstance.name:q.onItemChanged=u.currentItemChangedEvent.bind(function(B){if(u.isInstanceVisible()){if(B.currentItem){l.currentItemChangedEvent.fire(l,B.currentItem.id)}}});q.onSwitchToDesign=ViewManager.Events.SwitchedToDesignMode.bind(function(){if(u.isInstanceVisible()){var B=u.getCurrentItem();B&&l.currentItemChangedEvent.fire(l,B.id)}});q.SwitchedToViewMode=ViewManager.Events.SwitchedToViewMode.bind(function(){if(u.isInstanceVisible()){var B=u.getCurrentItem();B&&l.currentItemChangedEvent.fire(l,B.id)}});q.onRemoved=u.instanceRemoved.bind(function(){LayoutManager.layoutUpdateBatch.performOperation(function(){var B=o.getDataSource();if(!o.isInDeleteProcess&&B&&B.dataSourceInfo.currentData.id===A.id){ElementsManager.removeInstances([o])}})});q.itemsRefreshed=u.itemsRefreshed.bind(function(){$.each(o.dataItemsController.getAllControllers(),function(B,C){o.onItemSet(C.getInstance())})});break;case MenuItemTypes.MasterPages.name:q.onItemChanged=PageManager.Events.PageChanged.bind(function(){l.currentItemChangedEvent.fire(l,PageManager.getCurrentPage().id)});q.onSwitchToDesign=ViewManager.Events.SwitchedToDesignMode.bind(function(){l.currentItemChangedEvent.fire(l,PageManager.getCurrentPage().id)});q.SwitchedToViewMode=ViewManager.Events.SwitchedToViewMode.bind(function(){l.currentItemChangedEvent.fire(l,PageManager.getCurrentPage().id)});break;case MenuItemTypes.MasterPagesTag.name:q.onItemChanged=PageManager.Events.PageChanged.bind(function(){l.currentItemChangedEvent.fire(l,PageManager.getCurrentPage().id)});q.onSwitchToDesign=ViewManager.Events.SwitchedToDesignMode.bind(function(){l.currentItemChangedEvent.fire(l,PageManager.getCurrentPage().id)});q.SwitchedToViewMode=ViewManager.Events.SwitchedToViewMode.bind(function(){l.currentItemChangedEvent.fire(l,PageManager.getCurrentPage().id)});q.onRemoved=PageManager.PagesTags.itemsRemovedEvent.bind(function(B){if($.grep(B,function(C){if(A.tagName===C){return true}return false}).length===1){LayoutManager.layoutUpdateBatch.performOperation(function(){var C=o.getDataSource();C.connectToNavigatable(PageManager.getCurrentPage())})}});break}var r=q.collectionItems.postponeUpdates();l.fieldsInformation.clear();l.itemsInformation.clear();var t=l.getItemFields();if($.getKeys(t).length>0){l.fieldsInformation.put($.getValues(t))}var m=$.getValues(A.items);if(n&&u.reArrangingFinished&&!u.reArrangingFinished.wasFired){u.reArrangingFinished.one(function(){p()})}else{if(n){ElementsManager.performOnInstancesInitialization([u.id],p)}else{p()}}if(!r){q.collectionItems.unPostponeUpdates()}}else{l.collectionItems.postponeUpdates();q=l.dataSourceInfo.currentData;q.itemsMap=y;var v=false;if($.getKeys(A.items).length>0){var s=q.observableCollection.getItemsValues();var m;if(s.length!==0){var x=$.grep(s,a(o));m=[];$.each(x,function(B,C){if(A.items[C.id]){m.push($.extend({},A.items[C.id]))}else{m.push($.extend({},C))}})}else{m=$.getValues(A.items)}l.itemsInformation.clear();m=c(m);m=d(m);l.itemsInformation.put(m)}l.collectionItems.unPostponeUpdates()}function p(){var G=a(o);l.itemsInformation.connectObservableCollection(q.collectionItems,{filterFunction:G,updateOnConnect:m.length===0,normalizeItems:b});if(m.length>0){var C=q.observableCollection.getItems();var D=$.mapArray(m,$.returnValue,$.defaultIdFunction);if($.getKeys(C).length!==0){var B=$.duplicateDitionary(C);var F=$.getValues(B);m=$.grep(m,function(H){return G(H)&&C[H.id]});var E=$.grep(F,function(H){return !D[H.id]&&G(H)&&B[H.id]});$.each(E,function(H,I){I.index+=m.length});m=$.merge(m,E)}else{m=[]}m=c(m);m=d(m);m=f(m,C);l.itemsInformation.put(m)}l.collectionFields.unPostponeUpdates();l.collectionItems.unPostponeUpdates()}}function a(j){return function(k){var l=j.getPropertyValue("dataInfo");var m=l.itemsMap;if(m&&(m[k.id]===false&&l.currentData.type!==MenuItemTypes.DummyType.name)){return false}return true}}function b(s){var k=this;var q=k.getItems();var p=[];$.each(q,function(v,u){p.push($.extend({},u))});var n=[];var t={};var r={};var o={};if(s.addedItems&&s.addedItems.length>0){r=$.toDictionary(s.addedItems,function(u){return u.id});var l=p.length;n=$.merge(p,s.addedItems);for(var m=l;m<n.length;m++){var j=n[m];if(n[m]){n[m].index=n[m].index+l}}}else{n=p}if(s.removedItems&&s.removedItems.length>0){for(var m=0;m<s.removedItems.length;m++){o[s.removedItems[m]]=true}n=$.grep(n,function(u){if(o[u.id]){return false}return true})}if(s.updatedItems&&s.updatedItems.length>0){t=$.toDictionary(s.updatedItems,function(u){return u.id})}n=c(n);n=d(n);for(var m=0;m<n.length;m++){var j=$.extend({},n[m]);if(r[j.id]){j.useDefaultTitle=true}else{if(t[j.id]&&j.useDefaultTitle){j.title=t[j.id].title}}r[j.id]=j}s.updatedItems=[];s.addedItems=$.getValues(r);return s}function f(m,l){for(var j=0;j<m.length;j++){var k=m[j];k.index=j+1;if(k.useDefaultTitle===undefined){k.useDefaultTitle=true}if(k.useDefaultTitle&&l[k.id]){k.title=l[k.id].title}}return m}function d(l){for(var j=0;j<l.length;j++){var k=l[j];k.index=j+1}return l}function c(j){j=$(j).sort(function(l,k){if(l.index!==undefined&&k.index!==undefined){return l.index-k.index}else{if(l.index!==undefined){return -1}else{if(k.index!==undefined){return 1}else{return 0}}}});return j}})();(function(){DataSourcesManager.registerDataSourceDefinition({FormElementView:{isForSave:true,itemsInformation:undefined,collectionItems:undefined,manageItemsPanelName:"FormItemsPanel",manageItemsPanelTitle:"Manage Form Fields",getDefaultFields:function(){return{fieldName:{title:"Field Name",type:"title",name:"fieldName",isInFormField:function(){return true},isDefaultField:true},labelText:{title:"Label Text",type:"title",name:"labelText",isInFormField:function(){return true},isDefaultField:true},isOptional:{name:"isOptional",title:"Is Optional",isInFormField:function(a){if(a===FormFields.TextInputField.name||a===FormFields.TextArea.name){return true}return false},create:function(a){var b=PropertiesVisualizers.CheckBox.createPlain({});var c=CommonTemplates.createFormField(FormFieldsLayouts.LabelAfter,{title:a.title,input:b.$element});b.setLabel(c.$labelContainer);return{formField:c,visualizer:b}},updateItem:function(a,b){a.fieldOptions.isOptional=b;return a},getValueFromItem:function(a){return a.fieldOptions.isOptional},isDefaultField:true}}},setDataItems:function(h,d){var c=DataSources[h];var b=ElementsManager.getInstanceByID(c.instanceId);var a=b.getPropertyValue("dataInfo");var g=$.extend({},a);var f=$.extend({},g.currentData);d=$.makeArray(d);$.each(d,function(j,k){f[k.id]=$.extend({},f[k.id],k)});g.currentData=f;OperationsManager.beginAtomicBatch();b.setPropertyValue("dataInfo",g);OperationsManager.endAtomicBatch()},getIndex:function(d,f){var c=DataSources[d];var b=ElementsManager.getInstanceByID(c.instanceId);var a=b.getPropertyValue("dataInfo");return a.currentData[f].index},addDataItem:function(h,g){var c=DataSources[h];var b=ElementsManager.getInstanceByID(c.instanceId);var a=b.getPropertyValue("dataInfo");var f=$.extend({},a);var d=$.extend({},f.currentData);d[g.id]=$.extend({},g);f.currentData=d;OperationsManager.beginAtomicBatch();b.setPropertyValue("dataInfo",f);OperationsManager.endAtomicBatch()},removeDataItem:function(f,i,b,h){var a=DataSources[f];var j=ElementsManager.getInstanceByID(a.instanceId);var g=j.getPropertyValue("dataInfo");var d=$.extend({},g);var c=$.extend({},d.currentData);delete c[i];d.currentData=c;OperationsManager.beginAtomicBatch();j.setPropertyValue("dataInfo",d);OperationsManager.endAtomicBatch()},getEmptyItem:function(c,a){a=$.extend({fieldTypeName:undefined},a);var b=$.extend({id:StructureLoadingManager.generateWebsiteId(),fieldName:a.fieldTypeName?ElementsTypes[a.fieldTypeName].title:undefined,labelText:a.fieldTypeName?ElementsTypes[a.fieldTypeName].title:undefined,fieldOptions:{isOptional:true},fieldTypeName:undefined},a);return b},duplicateItem:function(b,a){return $.extend({},a,{id:StructureLoadingManager.generateWebsiteId()})},clear:function(b){var a=DataSources[b];a.itemsInformation.clear()},getItemFields:function(c){var b=DataSources[c];var a=ElementsManager.getInstanceByID(b.instanceId);return a.getPropertyValue("itemFields")},updateItemFields:function(c,d){var b=DataSources[c];var a=ElementsManager.getInstanceByID(b.instanceId);a.setPropertyValue("itemFields",d)},setDataInfo:function(d){var c=DataSources[d];var j=ElementsManager.getInstanceByID(c.instanceId);var g=j.getPropertyValue("dataInfo");c.getCollectionItems().postponeUpdates();if(g!==null&&g!==undefined){var h=c.itemsInformation.getItemsValues();var b=[];for(var f=0;f<$.getKeys(h).length;f++){if(!g.currentData[h[f].id]){b.push(h[f].id)}}c.itemsInformation.remove(b);var k=$.grep($.getValues(g.currentData),function(i){if(g.itemsMap&&g.itemsMap[i.id]===false){return false}return true});k=$(k).sort(function(l,i){if(l.index!==undefined&&i.index!==undefined){return l.index-i.index}else{if(l.index!==undefined){return -1}else{if(i.index!==undefined){return 1}else{return 0}}}});for(var f=0;f<k.length;f++){var a=k[f];a.index=f+1}c.itemsInformation.syncrhonize(k)}else{c.itemsInformation.clear()}c.getCollectionItems().unPostponeUpdates()}}})})();(function(){var a=$.extend(true,{},DataSourcesDefinitions.GalleryElementView,{onViewInitialized:function(){if(Global.IsDesigner){var c=this;var b={};c.collectionItems.itemUpdatedEvent.bind(function(g){var f=b[g.id];var d=ElementsManager.getInstanceByID(c.instanceId);if(f){if(f.video!==g.video){VideoLimitationManager.changedVideo(d)}}else{VideoLimitationManager.changedVideo(d)}b[g.id]=g});c.collectionItems.itemsAddedEvent.bind(function(f){if(!$.isEmptyObject(b)){var d=ElementsManager.getInstanceByID(c.instanceId);VideoLimitationManager.changedVideo(d)}for(var g=0;g<f.length;g++){var h=f[g];b[h.id]=h}})}},getChangeTemplatePanelName:function(){return"ChangeVideoGalleryItemTemplate"},getEmptyItem:function(b){return $.quickExtend({id:StructureLoadingManager.generateWebsiteId(),title:"Video Title",description:DesignerManager.DefaultTexts.description,video:DesignerManager.VideosIds[0]},b)},manageItemsPanelName:"VideoGalleryItemsPanel",manageItemsPanelTitle:"Manage Video Items"});DataSourcesManager.registerDataSourceDefinition({VideoGalleryElementView:a})})();(function(){var a=$.extend(true,{},DataSourcesDefinitions.GalleryElementView,{getChangeTemplatePanelName:function(){return"ChangeFAQItemTemplate"},getEmptyItem:function(b){return $.extend({id:StructureLoadingManager.generateWebsiteId(),question:"Enter your question here ?",answer:"Enter your answer here."},b)},manageItemsPanelName:"FAQItemsPanel",manageItemsPanelTitle:"Manage FAQ Items"});DataSourcesManager.registerDataSourceDefinition({FAQElementView:a})})();(function(){var a=$.extend(true,{},DataSourcesDefinitions.GalleryElementView,{getChangeTemplatePanelName:function(){return"ChangePersonsItemTemplate"},getEmptyItem:function(b){return $.extend({id:StructureLoadingManager.generateWebsiteId(),firstName:"First Name "+b.index,surName:"Surname "+b.index,title:"Description Title",description:DesignerManager.DefaultTexts.description,image:{imageUrl:DesignerManager.getDefaultPersonImage()}},b)},manageItemsPanelName:"PersonsItemsPanel",manageItemsPanelTitle:"Manage People List"});DataSourcesManager.registerDataSourceDefinition({PersonsElementView:a})})();(function(){var a=$.extend(true,{},DataSourcesDefinitions.GalleryElementView,{getChangeTemplatePanelName:function(){return"ChangeLinksListItemTemplate"},getEmptyItem:function(b){return $.extend({id:StructureLoadingManager.generateWebsiteId(),title:"Link Title "+b.index,link:{type:LinkTypes.Web,url:ApplicationManager.getBrandUrl()}},b)},manageItemsPanelName:"LinksListItemsPanel",manageItemsPanelTitle:"Manage Links Items"});DataSourcesManager.registerDataSourceDefinition({LinksListElementView:a})})();(function(){var a=$.extend(true,{},DataSourcesDefinitions.GalleryElementView,{getChangeTemplatePanelName:function(){return"ChangeServicesListItemTemplate"},getEmptyItem:function(b){return $.extend({id:StructureLoadingManager.generateWebsiteId(),title:"Service Title "+b.index,link:{type:LinkTypes.Web,url:ApplicationManager.getBrandUrl()},price:"100$",description:DesignerManager.DefaultTexts.description,image:{imageUrl:DesignerManager.getDefaultServiceImage()}},b)},manageItemsPanelName:"ServicesListItemsPanel",manageItemsPanelTitle:"Manage Services Items"});DataSourcesManager.registerDataSourceDefinition({ServicesListElementView:a})})();(function(){var a=$.extend(true,{},DataSourcesDefinitions.GalleryElementView,{getChangeTemplatePanelName:function(){return"ChangeProductsItemTemplate"},getEmptyItem:function(b){return $.extend({id:StructureLoadingManager.generateWebsiteId(),title:"Product title "+b.index,price:"100$",description:DesignerManager.DefaultTexts.description,image:{imageUrl:DesignerManager.getDefaultProductImage()}},b)},manageItemsPanelName:"ProductsItemsPanel",manageItemsPanelTitle:"Manage Products Items"});DataSourcesManager.registerDataSourceDefinition({ProductsElementView:a})})();(function(){var a=$.extend(true,{},DataSourcesDefinitions.GalleryElementView,{getChangeTemplatePanelName:function(){return"ChangeRestaurantMenuItemTemplate"},getEmptyItem:function(b){return $.extend({id:StructureLoadingManager.generateWebsiteId(),title:"Dish title "+b.index,price:"10$",description:DesignerManager.DefaultTexts.description,image:{imageUrl:DesignerManager.getDefaultDishImage()}},b)},manageItemsPanelName:"RestaurantMenuItemsPanel",manageItemsPanelTitle:"Manage Restaurant Menu Items"});DataSourcesManager.registerDataSourceDefinition({RestaurantMenuElementView:a})})();(function(){var a=$.extend(true,{},DataSourcesDefinitions.GalleryElementView,{getChangeTemplatePanelName:function(){return"ChangeNewsFeedItemTemplate"},getEmptyItem:function(b){return $.extend({id:StructureLoadingManager.generateWebsiteId(),title:"Feed Title "+b.index,description:DesignerManager.DefaultTexts.description,image:{imageUrl:DesignerManager.getDefaultNewsFeedImage()}},b)},manageItemsPanelName:"NewsFeedItemsPanel",manageItemsPanelTitle:"Manage News Feed Items"});DataSourcesManager.registerDataSourceDefinition({NewsFeedElementView:a})})();(function(){var a=$.extend(true,{},DataSourcesDefinitions.GalleryElementView,{getChangeTemplatePanelName:function(){return"ChangeIconsListItemTemplate"},getEmptyItem:function(b){return $.extend({id:StructureLoadingManager.generateWebsiteId(),title:"Icon Name",link:{type:LinkTypes.Web,url:ApplicationManager.getBrandUrl()},icon:{imageUrl:DesignerManager.getDefaultIcon()}},b)},manageItemsPanelName:"IconsListItemsPanel",manageItemsPanelTitle:"Manage Icons Items"});DataSourcesManager.registerDataSourceDefinition({IconsListElementView:a})})();DummyDataSource=new function(){var r=new ObservableCollection();var c=new ObservableCollection();var n=new ObservableCollection();var b=new ObservableCollection();var i=new ObservableCollection();var o=new ObservableCollection();var p=new ObservableCollection();var m=new ObservableCollection();var f=new ObservableCollection();var d=new ObservableCollection();var q=new ObservableCollection();var l=new ObservableCollection();var k=new ObservableCollection({idFunction:function(s){return s.name}});var h=new ObservableCollection({idFunction:function(s){return s.name}});var g=CollectionObserver.create(l);var j=CollectionObserver.create(k);var a=CollectionObserver.create(h);this.initialize=function(){for(var s=0;s<3;s++){l.put([{id:$.uniqueID(),title:"Page "+(s+1),index:s+1,type:MenuItemTypes.DummyType.name}])}for(var s=1;s<10;s++){var t=DesignerManager.getDefaultImages()["DefaultImage"+s];c.put([DataSourcesDefinitions.GalleryElementView.getEmptyItem({image:t?{imageUrl:t.image}:undefined,title:"Lorem ipsum",index:s})])}for(var s=0;s<4;s++){r.put([DataSourcesDefinitions.DataListElementView.getEmptyItem({index:s+1})])}for(var s=0;s<4;s++){n.put([DataSourcesDefinitions.VideoGalleryElementView.getEmptyItem({index:s+1,video:DesignerManager.VideosIds[s],title:"Video Title "+(s+1)})])}for(var s=0;s<4;s++){b.put([DataSourcesDefinitions.FAQElementView.getEmptyItem({index:s+1})])}for(var s=0;s<4;s++){var t=DesignerManager.getDefaultImages()["DefaultPerson"+s];m.put([DataSourcesDefinitions.PersonsElementView.getEmptyItem({image:t?{imageUrl:t.image}:undefined,index:s+1})])}for(var s=1;s<5;s++){var t=DesignerManager.getDefaultImages()["DefaultProduct"+s];f.put([DataSourcesDefinitions.ProductsElementView.getEmptyItem({image:t?{imageUrl:t.image}:undefined,index:s})])}for(var s=1;s<5;s++){var t=DesignerManager.getDefaultImages()["DefaultDish"+s];d.put([DataSourcesDefinitions.RestaurantMenuElementView.getEmptyItem({image:t?{imageUrl:t.image}:undefined,index:s})])}for(var s=1;s<5;s++){var t=DesignerManager.getDefaultImages()["DefaultNewsFeed"+s];q.put([DataSourcesDefinitions.NewsFeedElementView.getEmptyItem({image:t?{imageUrl:t.image}:undefined,index:s})])}for(var s=0;s<4;s++){i.put([DataSourcesDefinitions.LinksListElementView.getEmptyItem({index:s+1})])}for(var s=0;s<4;s++){var t=DesignerManager.getDefaultImages()["DefaultService"+s];o.put([DataSourcesDefinitions.ServicesListElementView.getEmptyItem({image:t?{imageUrl:t.image}:undefined,index:s+1})])}for(var s=0;s<4;s++){var t=DesignerManager.getDefaultImages()["DefaultIcon"+s];p.put([DataSourcesDefinitions.IconsListElementView.getEmptyItem({icon:t?{imageUrl:t.image}:undefined,title:t?t.title:undefined,index:s+1})])}k.put($.getValues({index:{type:"index",title:"Index",name:"index",isDefaultField:true},title:{type:"title",title:"Title",name:"title",isDefaultField:true},icon:{type:"icon",title:"Icon",name:"icon",isDefaultField:true}}));h.put($.getValues({index:{type:"index",title:"Index",name:"index",isDefaultField:true},video:{type:"video",title:"Video",name:"video",isDefaultField:true},title:{type:"title",title:"Title",name:"title",isDefaultField:true},description:{type:"description",title:"Description",name:"description",isDefaultField:true}}))};this.getDefaultMenuItems=function(){return l.getItems()};this.getDefaultDataListItems=function(){return r.getItems()};this.getDefaultGalleryItems=function(s){return c.getItems()};this.getDefaultVideoGalleryItems=function(){return n.getItems()};this.getDefaultFAQItems=function(){return b.getItems()};this.getDefaultPersonsItems=function(){return m.getItems()};this.getDefaultLinksListItems=function(){return i.getItems()};this.getDefaultIconsListItems=function(){return p.getItems()};this.getDefaultServicesListItems=function(){return o.getItems()};this.getDefaultProductsItems=function(){return f.getItems()};this.getDefaultRestaurantMenuListItems=function(){return d.getItems()};this.getDefaultNewsFeedsListItems=function(){return q.getItems()};this.getItemsInformation=function(){return l};this.getDummyItems=function(u){var s=[];for(var t=0;t<u;t++){s.push({id:$.uniqueID(),title:"Page "+(t+1),index:t+1,type:MenuItemTypes.DummyType.name})}return s};this.getFieldsInformation=function(){return k};this.getItemsCollection=function(){return g};this.getFieldsCollection=function(){return j}}();(function(){DataSourcesManager.registerDataSourceDefinition({ListView:{onViewInitialized:function(){var a=this;a.inDynamicPage=ObservableFlag.create(false)},getItemFields:function(d){var b=DataSources[d];var a=ElementsManager.getInstanceByID(b.instanceId);var c=ListUtils.getListControllerFromInstance(a);return c&&c.getAvailableFields()},openItemsDialog:function(d){var c=DataSources[d];var a=ElementsManager.getInstanceByID(c.instanceId);var b=a.getPropertyValue(PropertiesTypes.dataInfo.name);Commands.ManageList.action({listName:b.listName,selectedFilter:PostListTypes[b.filterType].commonFilterName})},getViewInfo:function(f,c){var a=DataSources[f];var k=ElementsManager.getInstanceByID(a.instanceId);var h=k.getPropertyValue(PropertiesTypes.dataInfo.name);if(h!==null&&h!==undefined){var j=ListsManager.getListByName(h.listName);var g=[];var b=ListsManager.CommonFilters.Published.clone();var i=j&&j.currentListType;if(i&&!c&&k.isPrimary()){switch(i){case ListsManager.SupportedListTypes.tag:b=$.merge(b,ListsManager.CommonFilters.ByTag(j.currentDisplayedTag.getValue()));break}}else{if(h.showPinned){g.push(ListsManager.createSorter(ListsManager.Fields.Pinned))}b=$.merge(b,ListsManager.CommonFilters[PostListTypes[h.filterType].commonFilterName]);if(h.specificTag){b=$.merge(b,ListsManager.CommonFilters.ByTag(h.specificTag))}if(c){$.merge(b,ListsManager.CommonFilters.NotCurrentItem())}else{if(a.inDynamicPage.isTrue()){var d=j.currentDisplayedItem.getValue();if(!d.isDummy()){b=$.merge(b,ListsManager.CommonFilters.NotCurrentItem(d.id))}}}}g.push(ListsManager.createSorter(ListsManager.Fields.Date));return{filters:b,sorts:g}}return null},setDataInfo:function(g){var d=DataSources[g];var b=ElementsManager.getInstanceByID(d.instanceId);var c=ListUtils.getListNameFromInstance(b);if(d.listenersGroup===undefined){d.listenersGroup=SimpleEvent.createEventListenersGroup();SimpleEvent.createEventListener([{name:c,event:ListsManager.Events.ListCreated}],function(){a();f()}).addToGroup(d.listenersGroup);SimpleEvent.createEventListener([{name:c,event:ListsManager.Events.ListRemoved}],function(){d.dataSourceRefreshed.fire()}).addToGroup(d.listenersGroup);f();SimpleEvent.createEventListener([d.inDynamicPage.valueChangedEvent],function(){if(d.inDynamicPage.isTrue()){d.listItemChangedEvent.activateAndExecute()}else{d.listItemChangedEvent.deactivate();a()}}).addToGroup(d.listenersGroup);d.listenersGroup.activateAll()}a();function a(){var i=ListsManager.getListByName(c);if(i!==undefined){if(d.collectionView){d.collectionView.viewChangedEventListener.dispose()}var h=d.getViewInfo();if(h!==null){d.collectionView=i.createCollectionView({filters:h.filters,sorts:h.sorts});d.collectionView.viewChangedEventListener=SimpleEvent.createEventListener([d.collectionView.viewChangedEvent],function(){d.dataSourceRefreshed.fire()}).activateAndExecute()}}}function f(){var h=ListsManager.getListByName(c);if(h!==undefined){d.listItemChangedEvent&&d.listItemChangedEvent.dispose();d.listItemChangedEvent=SimpleEvent.createEventListener([h.currentDisplayedItem.valueChangedEvent],function(){a()});if(d.inDynamicPage.isTrue()){d.listItemChangedEvent.activate()}if(b.isPrimary()){d.primaryPostsListListeners&&d.primaryPostsListListeners.disposeAll();d.primaryPostsListListeners=SimpleEvent.createEventListenersGroup();SimpleEvent.createEventListener([h.primaryListChanged],function(){if(!ViewManager.isDesignMode()){b.changeCurrentItem(h.currentDisplayedPage.getValue()-1)}a();if(b.isPrimary()){b.itemsRefreshed.fire()}}).addToGroup(d.primaryPostsListListeners);d.primaryPostsListListeners.activateAll()}}}},clear:function(b){var a=DataSources[b];a.collectionView&&a.collectionView.viewChangedEventListener.dispose();a.listItemChangedEvent&&a.listItemChangedEvent.dispose();a.listenersGroup.disposeAll();a.primaryPostsListListeners&&a.primaryPostsListListeners.disposeAll();a.itemsInformation.clear()},fetchItems:function(c,g,h,b,f,j){var a=DataSources[c];var i=ElementsManager.getInstanceByID(a.instanceId);var d=ListUtils.getListControllerFromInstance(i);a.itemsInformation.clear();if(d!==undefined){a.collectionView.fetchItems(g,h,i.getItemFieldsToRequest(),function(l){a.getCollectionItems().postponeUpdates();var k=l.fetchedItems;a.itemsInformation.put(k);a.getCollectionItems().unPostponeUpdates();b({fetchedItems:k,totalCount:l.totalCount})},f,$.extend({instanceId:i.id},j))}else{b({fetchedItems:[],totalCount:0})}},fetchAllItems:function(f,b,c){var d=DataSources[f];var a=ElementsManager.getInstanceByID(d.instanceId);d.collectionView.fetchAllItems(a.getItemFieldsToRequest(),b,c)}}})})();(function(){DataSourcesManager.registerDataSourceDefinition({PageMenuElementView:{isForSave:true,getChangeTemplatePanelName:$.noop,removeDataItem:$.noop,getItemFields:function(){return PageManager.FieldsCollection.getItems()},clear:function(d){var c=DataSources[d];a(c)},openItemsDialog:function(d,c){ManagePagesDialog.open(c)},setDataItems:function(f,d,g){var c=DataSources[f];d=$.makeArray(d);if(!g){$.each(d,function(j,h){delete h.index})}OperationsManager.beginAtomicBatch();PageManager.PagesUpdatingOperation.start();$.each(d,function(h,j){var k=PageManager.AllPagesInformation.getItem(j.id);if(k.useNameASUrl){$.extend(j,{urlAlias:UrlUtils.normalizeFriendlyUrl(j.title,"-")})}PageManager.AllPagesInformation.updateItem(j.id,j)});PageManager.PagesUpdatingOperation.finish();OperationsManager.endAtomicBatch()},refresh:function(){var c=this;b(c)},getControllersHierarchy:function(){return PageManager.NavigatableHierarchy},setDataInfo:function(d){var c=DataSources[d];if(!c.isItemsInformationInitialized){b(c);c.isItemsInformationInitialized=true}}}});function a(c){SimpleEvent.unbind(c.currentItemChangedEventBindings);delete c.currentItemChangedEventBindings;SimpleEvent.unbind(c.hierarchyUpdateEventBiniding);delete c.hierarchyUpdateEventBiniding;c.itemsInformation.disconnectObservableCollection()}function b(d){var c=ElementsManager.getInstanceByID(d.instanceId);d.itemsInformation.beginUpdate();a(d);if(!c.isNavigationButton()){d.itemsInformation.connectObservableCollection(PageManager.NavigatablePagesCollection);d.hierarchyUpdateEventBiniding=SimpleEvent.bind([PageManager.NavigatableHierarchy.hierarchyUpdateEvent],function(){d.dataSourceRefreshed.fire()});d.currentItemChangedEventBindings=SimpleEvent.bind([PageManager.Events.PageChanged,ViewManager.Events.SwitchedToDesignMode,ViewManager.Events.SwitchedToViewMode],function(){d.currentItemChangedEvent.fire(d,PageManager.getCurrentPage().id)})}d.itemsInformation.endUpdate()}})();(function(){DataSourcesManager.registerDataSourceDefinition({ListItemView:{refreshItem:function(c,a){var b=DataSources[c];b.getCollectionItems().postponeUpdates();b.itemsInformation.clear();b.itemsInformation.put($.extend({},a,{id:"currentItem"}));b.getCollectionItems().unPostponeUpdates()}}})})();(function(){DataSourcesManager.registerDataSourceDefinition({SocialIconsElementView:{clear:function(b){var a=DataSources[b];a.itemsInformation.clear()},openItemsDialog:function(d,c){var b=DataSources[d];var a=ElementsManager.getInstanceByID(b.instanceId);ManageSocialIConsDialog.open({dataInfo:a.getPropertyValue("dataInfo")})},setDataItems:function(g,d){var c=DataSources[g];var b=ElementsManager.getInstanceByID(c.instanceId);var a=b.getPropertyValue("dataInfo");var f=$.extend({},a);f.currentData=$.extend({},f.currentData);d=$.makeArray(d);$.each(d,function(h,j){f.currentData[j.id]=$.extend({},f.currentData[j.id],j)});OperationsManager.beginAtomicBatch();b.setPropertyValue("dataInfo",f);OperationsManager.endAtomicBatch()},removeDataItem:function(h,i,c,f){var g=DataSources[h];var b=ElementsManager.getInstanceByID(g.instanceId);var a=$.extend({},b.getPropertyValue("dataInfo"));var d=$.extend({},a.iconsMap);d[i]=$.extend({},a.iconsMap[i]);d[i].iconDisplayed=false;a.iconsMap=d;OperationsManager.beginAtomicBatch();b.setPropertyValue("dataInfo",a);OperationsManager.endAtomicBatch()},getItemFields:function(c){var b=DataSources[c];var a=ElementsManager.getInstanceByID(b.instanceId);return a.getPropertyValue("itemFields")},updateItemFields:function(c,d){var b=DataSources[c];var a=ElementsManager.getInstanceByID(b.instanceId);a.setPropertyValue("itemFields",d)},setDataInfo:function(f){var b=DataSources[f];var m=ElementsManager.getInstanceByID(b.instanceId);var h=m.getPropertyValue("dataInfo");b.getCollectionItems().postponeUpdates();b.itemsInformation.disconnectObservableCollection();b.itemsInformation.clear();if(h!==null&&h!==undefined){var c=h.currentData;var k=h.collectionName;var l=b.itemsInformation.getItemsValues();var j=$.grep($.getValues(h.currentData),function(i){if(h.iconsMap&&h.iconsMap[i.id].iconDisplayed===false){return false}return true});j=$(j).sort(function(o,i){if(o.index!==undefined&&i.index!==undefined){return o.index-i.index}else{if(o.index!==undefined){return -1}else{if(i.index!==undefined){return 1}else{return 0}}}});var n=[];for(var g=0;g<j.length;g++){var a=$.extend({},j[g]);a.index=g+1;var d=a.iconType;a.fontIcon=SocialIconsSetCollection[k].icons[d];n.push(a)}b.itemsInformation.syncrhonize(n);if(h.isSynced){b.itemsInformation.connectObservableCollection(SocialLinksManager.SocialLinksCollectionObservable,{filterFunction:function(i){if(h.iconsMap&&(!h.iconsMap[i.id]||h.iconsMap[i.id].iconDisplayed===false)){return false}return true},updateOnConnect:true,normalizeItems:normalizeDataItems})}}b.getCollectionItems().unPostponeUpdates()}}})})();function normalizeDataItems(c){var b=this;var a=b.getItems();var d=[];if(c.updatedItems&&c.updatedItems.length>0){$.each(c.updatedItems,function(h,f){var g=$.extend({},a[f.id],f);d.push(g)})}c.addedItems=[];c.removedItems=[];c.updatedItems=d;return c}(function(){DataSourcesManager.registerDataSourceDefinition({TagCloudView:{getItemFields:function(f){var c=DataSources[f];var a=ElementsManager.getInstanceByID(c.instanceId);var b=a.getPropertyValue("dataInfo");var d=ListsManager.getListByName(b.listName);return d&&d.getTagFields()},openItemsDialog:function(f,d){var c=DataSources[f];var a=ElementsManager.getInstanceByID(c.instanceId);var b=a.getPropertyValue("dataInfo");Commands.ManageList.action({listName:b.listName})},setDataInfo:function(f){var d=DataSources[f];var b=ElementsManager.getInstanceByID(d.instanceId);var c=b.getPropertyValue("dataInfo");if(d.listenersGroup===undefined){d.listenersGroup=SimpleEvent.createEventListenersGroup();SimpleEvent.createEventListener([{name:c.listName,event:ListsManager.Events.ListCreated}],function(){a();d.dataSourceRefreshed.fire()}).addToGroup(d.listenersGroup);SimpleEvent.createEventListener([{name:c.listName,event:ListsManager.Events.ListRemoved}],function(){d.dataSourceRefreshed.fire()}).addToGroup(d.listenersGroup);d.listenersGroup.activateAll()}a();function a(){var g=ListsManager.getListByName(c.listName);if(g!==undefined){d.tagItemsChanged&&d.tagItemsChanged.dispose();d.tagItemsChanged=SimpleEvent.createEventListener([g.tagItemsChanged],function(){d.dataSourceRefreshed.fire()}).activate()}}},clear:function(b){var a=DataSources[b];a.tagItemsChanged&&a.tagItemsChanged.dispose();a.listenersGroup.disposeAll();a.itemsInformation.clear()},fetchAllItems:function(h,b,d){var f=DataSources[h];var a=ElementsManager.getInstanceByID(f.instanceId);var c=a.getPropertyValue("dataInfo");var g=ListsManager.getListByName(c.listName);f.itemsInformation.clear();if(g!==undefined){g.fetchTags(function(i){f.getCollectionItems().postponeUpdates();f.itemsInformation.put(i);f.getCollectionItems().unPostponeUpdates();b({fetchedItems:i,totalCount:i.length})},d,{instanceId:a.id})}else{b({fetchedItems:[],totalCount:0})}}}})})();(function(){DataSourcesManager.registerDataSourceDefinition({InlineDataSource:{isForSave:true,setDataItems:function(f,d){var c=DataSources[f];var b=ElementsManager.getInstanceByID(c.instanceId);var a=$.extend({},b.getPropertyValue("dataInfo"));d=$.makeArray(d);a.currentData=$.extend({},a.currentData,d[0],{id:f});OperationsManager.beginAtomicBatch();b.setPropertyValue("dataInfo",a);OperationsManager.endAtomicBatch()},clear:function(b){var a=DataSources[b];a.itemsInformation.clear()},getItemFields:function(c){var b=DataSources[c];var a=ElementsManager.getInstanceByID(b.instanceId);return a.getPropertyValue("itemFields")},updateItemFields:function(c,d){var b=DataSources[c];var a=ElementsManager.getInstanceByID(b.instanceId);a.setPropertyValue("itemFields",d)},setDataInfo:function(d){var c=DataSources[d];var a=ElementsManager.getInstanceByID(c.instanceId);var b=a.getPropertyValue("dataInfo");if(b&&b.currentData){c.getCollectionItems().postponeUpdates();c.itemsInformation.clear();c.itemsInformation.syncrhonize([$.extend({},b.currentData,{id:d})]);c.getCollectionItems().unPostponeUpdates()}else{c.itemsInformation.clear()}}}})})();var InstanceController=new function(){this.create=function(f,m){m=$.extend({templateOptions:{},dataSourceOptions:{},isForTemplateUse:false,connections:{},parentInstanceId:undefined,structureProcessor:undefined},m);var h=m.dataSourceOptions;var a=m.structureProcessor;var b;if(m.parentInstanceId){b=ElementsManager.getInstanceByID(m.parentInstanceId)}var i=f;var l=$("<span class='inline-block instance-container'></span>");var j=ObservableFlag.create(false);var k;var g;var d={id:$.uniqueID(),$element:l,instance:undefined,pendingClasses:{},removedEvent:SimpleEvent.create(),initializedEvent:SimpleEvent.create(),initializeFlag:j,getInstance:function(){if(!d.isInitialized()){c()}d.instance.data.isForTemplateUse=m.isForTemplateUse;return d.instance},extendDataSourceOptionsWith:function(n,o){h=$.extend({},h,n);if(d.isInitialized()&&o){d.resetInstance();d.initialize()}},setStructureProcessor:function(n,o){a=n;if(d.isInitialized()&&o){d.resetInstance();d.initialize()}},initialize:function(){if(!d.isInitialized()){c();d.instance.data.isForTemplateUse=m.isForTemplateUse}},toggleClass:function(n){if(d.isInitialized()){d.getInstance().classesManager.set(n)}else{$.extend(d.pendingClasses,n)}},setIndex:function(n){d.index=n},getIndex:function(n){return d.index},setTemplateStructure:function(o,n){OperationsManager.disableBatch();if(!n){d.resetInstance();i=o}OperationsManager.endDisableBatch()},resetInstance:function(){OperationsManager.disableBatch();if(d.isInitialized()){d.copiedConnections=d.instance.getTargetConnections();d.copiedProperties={};if(d.instance){ElementsManager.removeInstances([d.instance]);d.$element.empty()}d.instance=undefined;j.setFalse()}OperationsManager.endDisableBatch()},getTemplateStructure:function(){return i},getDataItemId:function(){return h.dataItemID},isInitialized:function(){return j.isTrue()},removeController:function(){InstanceController.removeControllers([this])},updatePropertiesValues:function(n){if(n&&!d.isInitialized()){$.extend(d.copiedProperties,n)}},updatePropertyValue:function(n,o){OperationsManager.disableBatch();if(!d.isInitialized()){if($.isPlainObject(o)){d.copiedProperties[n]=$.extend({},d.copiedProperties[n],o)}else{d.copiedProperties[n]=o}}OperationsManager.endDisableBatch()},getSize:function(){return d.getInstance().getPropertyValue("sizeAndPosition")},setSize:function(n){n.width=n.width;n.height=n.height;k=n;d.$element.css({width:n.width,height:n.height});if(d.isInitialized()){d.getInstance().setPropertyFieldsValues("sizeAndPosition",n);d.refreshLayout()}else{d.copiedProperties.sizeAndPosition=$.extend({},k)}},setMargin:function(n){g=n;d.$element.css($.extend({marginBottom:"",marginLeft:"",marginTop:"",marginRight:""},{marginBottom:n.marginBottom,marginLeft:n.marginLeft,marginTop:n.marginTop,marginRight:n.marginRight}));d.refreshLayout()},getMargin:function(){return g},resetStyle:function(){d.$element.css({top:"",left:"","margin-left":"","margin-top":"","margin-right":"","padding-left":""})},refreshLayout:function(){if(d.isInitialized()){LayoutManager.refreshElementsLayout(d.getInstance())}},updatePosition:function(){if(d.isInitialized()){PositionManager.updatePosition(d.getInstance())}},detach:function(){if(d.isInitialized()){d.getInstance().detach()}l.detach();d.resetStyle();d.hideElement();d.$parent=undefined},isParent:function(n){if(l.parent()!==n){return false}return true},setParent:function(n){if(!d.isParent(n)){l.appendTo(n);d.$parent=n}},appendTo:function(p,o){if(o){b=o}var n=d.getInstance();if(b&&n.parentInstance!==b){ElementsManager.addElementToContainerElement(b,n);n.$element.appendTo(d.$element)}d.setParent(p);d.refreshLayout();return d},hideElement:function(){if(d.isInitialized()){d.getInstance().isDisplayed.setFalse("instanceController");d.getInstance().setToCurrentMode()}},showElement:function(){if(d.isInitialized()){d.getInstance().isDisplayed.setTrue("instanceController");d.getInstance().setToCurrentMode()}}};d.copiedConnections=m.connections;d.copiedProperties={};return d;function c(){OperationsManager.disableBatch();LayoutManager.beginLayoutUpdateBatch();PositionManager.VisibilityUpdateBatch.start();PropertiesManager.UpdateBatch.start();if(d.copiedConnections){var p=d.copiedConnections;ElementActivationManager.applyConnections(p)}var q=$.extend({isForTemplateUse:m.isForTemplateUse,structureProcessor:a},m.templateOptions);q.initialProperties=$.extend({},q.initialProperties);q.initialProperties[i.structures[0].id]=$.extend({},q.initialProperties[i.structures[0].id],d.copiedProperties);var n=TemplatesManager.addTemplateInstance({elementForCreation:i,fieldName:m.fieldName,dataItemID:h.dataItemID,dataSourceName:h.dataSourceName,styleBindingId:h.styleBindingId},null,q).instances[0];if(n.extendDataSourceOptionsWith&&!$.isEmptyObject(h)){n.extendDataSourceOptionsWith(h)}if(n.setStructureProcessor&&a){n.setStructureProcessor(a)}var o=n.getPropertyValue("sizeAndPosition");if(!k){k=o}PropertiesManager.UpdateBatch.finish();PositionManager.VisibilityUpdateBatch.finish();LayoutManager.endLayoutUpdateBatch();n.data.instanceContainer=l;n.$element.appendTo(l);n.$element.toggleLayerEventsCatching(true);d.instance=n;n.data.instanceController=d;j.setTrue();d.initializedEvent.fire(d);if(d.pendingClasses){d.toggleClass(d.pendingClasses)}d.pendingClasses={};OperationsManager.endDisableBatch()}};this.removeControllers=function(b){OperationsManager.disableBatch();var a=[];$.each(b,function(d,c){if(c.isInitialized()){a.push(c.getInstance())}});ElementsManager.removeInstances(a);$.each(b,function(d,c){if(c.isInitialized()){c.$element.remove();c.instance.$element.remove();c.removedEvent.fire(c)}});OperationsManager.endDisableBatch()}}();new function(){DataLayoutsManager.registerDataLayoutTypes({SquareGrid:{name:"SquareGrid",isReArrangeable:true,category:DataArrangements.Grid,arrange:function(h,i,g){return f(h,i,DataArrangements.Grid,g)},fields:{rows:true,colsSpacing:true,rowsSpacing:true,cols:true},startLayout:d,removeLayout:c},Vertical:{name:"Vertical",isReArrangeable:true,category:DataArrangements.Vertical,arrange:function(h,i,g){return f(h,i,DataArrangements.Vertical,g)},fields:{columnSpacing:true},startLayout:d,removeLayout:c},Horizontal:{name:"Horizontal",isReArrangeable:true,category:DataArrangements.Horizontal,arrange:function(h,i,g){return f(h,i,DataArrangements.Horizontal,g)},fields:{lineSpacing:true},startLayout:d,removeLayout:c,reAllocateTemplates:b},OneColumn:{name:"OneColumn",isReArrangeable:true,category:DataArrangements.OneColumn,arrange:function(h,i,g){return f(h,i,DataArrangements.OneColumn,g)},shouldRearrangeWhenItemSizeChanged:true,canItemResize:{vertically:true,horizontally:false},fields:{rowsSpacing:true},canResize:{vertically:false,horizontally:true},startLayout:d,removeLayout:c},Columns:{name:"Columns",isReArrangeable:true,category:DataArrangements.Columns,arrange:function(h,i,g){return f(h,i,DataArrangements.Columns,g)},shouldRearrangeWhenItemSizeChanged:true,canItemResize:{vertically:true,horizontally:false},canResize:{vertically:false,horizontally:true},fields:{rowsSpacing:true,colsSpacing:true,cols:true},startLayout:d,removeLayout:c}},DataLayoutsCategories.Normal);function f(k,g,m,q){q=$.extend({lineSpacing:undefined,columnSpacing:undefined,rowsSpacing:undefined,colsSpacing:undefined,rows:undefined,keepItemSize:true},q);var p=g.totalCount;if(p>0){var h;var l=k.getLastArrangementOptionsByCurrentDevice();var n=m.getFixedSize(p,q);if(q.fixedSize){h=q.fixedSize}else{if(q.keepItemSize&&l.fixedSize){h=l.fixedSize}else{if(m.getFixedSize){h=n}}}q.calculatedFixedSize=n;var j=g.instanceControllers;if(q.keepRatio){var i=$.maxValue([h.width,h.height]);h={height:i,width:i}}q.fixedSize=h;q.length=p;b(k,j);var o=m.arrange(j,q,l);o=$.extend({},q,o);o.controllersToArrange=j;return o}}function b(h,i){var m=$([]);var l=false;for(var g=0;g<i.length;g++){var k=i[g];k.appendTo(h.$contentContainer);k.showElement();l=true;m.pushElements(h.$element);k.reAllocationIndex=g}if(l){m.applyDOMOrder()}}function d(g){var h=g.$contentContainer;if(!h){h=$("<span class='inline-block relative-arrangement wrap'></span>");g.$contentContainer=h}g.getDataItemsController().detach();g.options.setParentContent(h)}function c(g){g.getDataItemsController().detach();var h=g.getDataItemsController().getAllControllers();var i=g.$contentContainer;if(i){i.remove()}}var a="S"}();new function(){var g={PagesRow:{name:"PagesRow",isPages:true,isReArrangeable:true,category:DataArrangements.Horizontal,fields:{lineSpacing:true},arrange:function(q,r,p){return a(q,r,DataArrangements.Horizontal,p)}},PagesColumn:{name:"PagesColumn",isPages:true,isReArrangeable:true,category:DataArrangements.Vertical,fields:{columnSpacing:true},arrange:function(q,r,p){return a(q,r,DataArrangements.Vertical,p)}},PagesGrid:{name:"PagesGrid",isPages:true,isReArrangeable:true,category:DataArrangements.Grid,fields:{rows:true,colsSpacing:true,rowsSpacing:true,cols:true},arrange:function(q,r,p){return a(q,r,DataArrangements.Grid,p)}}};DataLayoutsManager.registerDataLayoutTypes(d(),DataLayoutsCategories.Pages);function a(s,p,u,x){x=$.extend({rowsSpacing:undefined,colsSpacing:undefined,columnSpacing:undefined,lineSpacing:undefined,elementsPerPage:undefined,cols:undefined,keepItemSize:true},x);x.controllersCount=p.totalCount;x.pageIndexToArrange=s.getDataItemsController().getInstance().getCurrentPageIndex();var r=p.instanceControllers;var t=s.getLastArrangementOptionsByCurrentDevice();c(s,p.instanceControllers,x);if(r&&r.length>0){var q;$.each(r,function(z,y){y.toggleClass({"fit-to-size":true})});x.length=x.pageIndexToArrange>0?x.elementsPerPage:r.length;var v=u.getFixedSize(x.length,x);if(x.fixedSize){q=x.fixedSize}else{if(x.keepItemSize&&t.fixedSize){q=t.fixedSize}else{if(u.getFixedSize){q=v}}}x.calculatedFixedSize=v;x.fixedSize=q;var w=u.arrange(r,x);w.controllersToArrange=r;return w}}function c(u,v,s){var r=s.controllersCount;var q=1;if(!s.onePage&&r!==0){q=Math.ceil(r/s.elementsPerPage)}var t=u.pagesInstance;h(u,q,s);if(q===0){return}var p=t.getNavigatableInstances();f(u,p[Math.min(s.pageIndexToArrange,q-1)],v)}function h(u,A,B){var v=u.pagesInstance;var t=v.getNavigatableInstances();var y=t.length;A=A?A:1;var r=v.getItemsCollection().postponeUpdates();if(y>A){var z=y-A;var q=[];for(var x=y-1;x>y-1-z;x--){var w=ElementsManager.getInstanceByID(u.getDataItemsController().getId()+n+x);if(w){q.push(w);if(w.currentControllersMap){$.each(w.currentControllersMap,function(D,C){C.detach()});w.currentControllersMap={}}}}ElementsManager.removeInstances(q)}else{if(y<A){var p=y;var z=A-y;for(var x=0;x<z;x++){var s=v.addItem({tabName:"page"+(p+x+1),rootsIds:{0:u.getDataItemsController().getId()+n+(p+x)},isContent:true,initialProperties:{all:{backgroundColor:"transparent"}}});s.getElementContent().addClass("wrap");s.$element.toggleLayerEventsForwarding(true);s.hasOrder.setValue(false);s.accept=$.returnFalse;s.isDroppable=$.returnFalse;s.canRedropTo=$.returnFalse}}}if(y===0&&A){v.showItem(B.pageIndexToArrange,false)}if(!r){v.getItemsCollection().unPostponeUpdates()}}function f(r,u,s){var q=$.mapArray(s,$.returnValue,$.defaultIdFunction);if(u.currentControllersMap){$.each(u.currentControllersMap,function(x,w){if(!q[w.id]){w.detach()}})}u.currentControllersMap=q;var v=$([]);for(var p=0;p<s.length;p++){var t=s[p];t.appendTo(u.getElementContent(),u);t.showElement();v.pushElements(t.$element)}v.applyDOMOrder()}function i(p){var q=p.getDataItemsController().getInstance();if(q){q.getItemsInformation().disconnectObservableCollection();q.getFieldsInformation().disconnectObservableCollection()}p.getDataItemsController().detach();ElementsManager.removeInstances(p.pagesInstance);p.pagesInstance=undefined}var n="p";function m(r){OperationsManager.disableBatch();if(!r.pagesInstance){var u=r.getDataItemsController().getInstance();var s=TemplatesManager.addTemplateInstance(DesignTools.Tabs.utilizationData,u.$element,{rootsIds:{0:u.id+n},isContent:true,isVisible:true,initialProperties:{all:{fillLayout:{fillVertical:true,fillHorizontal:true},backgroundColor:"transparent",borderWidth:{top:0,left:0,bottom:0,right:0}}}});var q=s.instances[0];q.$element.toggleLayerEventsForwarding(true);$.each(q.getDescendingInstances(true),function(w,v){if(v.hasFeature(Features.Selectable)){v.toggleSelectable(false);v.hasOrder.setValue(false)}});q.accept=$.returnFalse;q.canRedropTo=$.returnFalse;q.isDroppable=$.returnFalse;LayoutManager.beginLayoutUpdateBatch();PropertiesManager.UpdateBatch.start();r.pagesInstance=q;q.$element.addClass("relative-arrangement");for(var p in Features.Navigatable.properties){if(Features.Navigatable.properties[p]){q.setPropertyValue(p,u.getPropertyValue(p))}}var t=u.propertyChangedEventSimple.bind(function(v,w){OperationsManager.disableBatch();if(Features.Navigatable.properties[v]){q.setPropertyValue(v,u.getPropertyValue(v))}OperationsManager.endDisableBatch()});q.bindings.push(t);PropertiesManager.UpdateBatch.finish();LayoutManager.endLayoutUpdateBatch();q.currentItemFinishChanging.bind(function(v){b(u)});q.currentItemChangedEvent.bind(function(v){u.currentItemChangedEvent.fire(u,{prevItem:v.prevItem,currentItem:v.currentItem})});u.getItemsInformation().connectObservableCollection(q.getItemsCollection());u.getFieldsInformation().connectObservableCollection(q.getFieldsCollection())}OperationsManager.endDisableBatch()}function d(){var p={};$.each(g,function(q,r){p[q]=$.extend({removeLayout:i,startLayout:m,getNavigatableInstances:o,navigateTo:j,getCurrentItem:k,showItem:l,fetchControllersToArrange:function(t,B,s,w){B=$.extend({elementsPerPage:undefined,maxItemsCount:Infinity},B);var v=B.maxItemsCount;var A=B.elementsPerPage;var u=$.isNumeric(v);var x=t.getDataItemsController();var z=u?0:x.getInstance().getCurrentPageIndex()*A;var y=u?v:z+A;x.fetchControllersByIndex(z,y,function(E){if(!u){s(E)}else{var D=Math.min(E.totalCount,v);var F=x.getInstance().getCurrentPageIndex()*A;if(F>=D){F=$.divideNoReminder(D-1,A)*A}var C=E.instanceControllers.slice(F,F+A);s({instanceControllers:C,totalCount:D})}},w)}},r)});return p}function l(q,r,t,p,s){if(q.pagesInstance){q.pagesInstance.showItem(r,t,p,s)}}function b(p){p.reArrangeTheTemplates()}function k(q){if(q.pagesInstance){var p=q.pagesInstance.getCurrentItem();if(p){return p}}}function j(r,q,t,p,s){if(r.pagesInstance){r.pagesInstance.navigateTo(q,t,p,s)}}function o(p){return p.pagesInstance?p.pagesInstance.getNavigatableInstances():[]}}();new function(){DataLayoutsManager.registerDataLayoutTypes({NormalForm:{name:"NormalForm",removeLayout:$.noop,startLayout:$.noop,onAddField:function(j,k,l){l=$.extend({colsSpacing:0,columnSpacing:30,fieldSpacing:0,numberOfRows:5},l);var g=$.grep(j.getFieldsInstances(),function(m){return m.id!==k.id});var f;if(g.length===0){f={left:0,top:0}}else{var a=g.length;var d=g[a-1];var h=d.getPropertyValue("sizeAndPosition");var i;var b;var c=Math.floor(a/l.numberOfRows);if(a%l.numberOfRows){c++;i=h.top+h.height+l.colsSpacing;b=h.left}else{i=0;b=$.max(g,function(m){var n=m.getPropertyValue("sizeAndPosition");return n.left+n.width}).value+l.columnSpacing}f={top:i,left:b}}k.setPropertyFieldsValues("sizeAndPosition",f)},orderElements:function(l,p,b){p=$.extend({colsSpacing:0,columnSpacing:30,fieldSpacing:0,numberOfRows:5},p);var h=l.getFieldsInstances();var m=0;if(!b){var a=$.min(h,function(i){var j=i.getPropertyValue("sizeAndPosition");return j.top}).value;var n=$.min(h,function(i){var j=i.getPropertyValue("sizeAndPosition");return j.left}).value}else{a=b.top;n=b.left}var c=n-p.columnSpacing;for(var d=0;d*p.numberOfRows<h.length;d++){var k=a;c+=m+p.columnSpacing;m=0;for(var f=p.numberOfRows*d;f<h.length&&f<p.numberOfRows*(d+1);f++){var o=h[f];o.setPropertyFieldsValues("sizeAndPosition",{top:k,left:c});var g=o.getPropertyValue("sizeAndPosition");k+=p.colsSpacing+g.height;m=m<g.width?g.width:m}}}}},DataLayoutsCategories.FormLayouts)}();new function(){var c={Rows:{name:"Rows",category:DataArrangements.Rows,arrange:function(k,l,j){return i(k,l,DataArrangements.Rows,j)},shouldRearrangeWhenItemSizeChanged:true,canItemResize:{vertically:true,horizontally:false},canResize:{vertically:false,horizontally:true},fields:{rowsSpacing:true,colsSpacing:true,rows:true}}};DataLayoutsManager.registerDataLayoutTypes(b(),DataLayoutsCategories.FormLayouts);function i(m,j,o,s){s=$.extend({rowsSpacing:undefined,colsSpacing:undefined,columnSpacing:undefined,lineSpacing:undefined,elementsPerPage:undefined,cols:undefined,rows:undefined,keepItemSize:true},s);var p=j.totalCount;if(p>0){var k;s.controllersCount=p;var n=m.getLastArrangementOptionsByCurrentDevice();var q=o.getFixedSize(p,s);if(s.fixedSize){k=s.fixedSize}else{if(s.keepItemSize&&n.fixedSize){k=n.fixedSize}else{if(o.getFixedSize){k=q}}}s.calculatedFixedSize=q;var l=j.instanceControllers;g(m,l,o,s);$.each(l,function(u,t){t.toggleClass({"fit-to-size":true})});s.fixedSize=k;s.length=l.length;s.$columns=m.$columns;var r=o.arrange(l,s);r.controllersToArrange=l;return r}}function g(l,m,o,k){var j=k.controllersCount;var n=Math.ceil(j/k.rows);h(l,n);a(l,m,k)}function h(l,q){var j=l.$columns;var m=j.length;if(m>q){var p=m-q;l.getDataItemsController().detach();for(var k=m-1;k>m-1-p;k--){j[k].remove();l.$columns.pop()}}else{if(m<q){var n=m;var p=q-m;for(var k=0;k<p;k++){var o=$("<span class='vertically-top positioned wrap'></span>");l.$columns.push(o);o.appendTo(l.$contentContainer)}}}}function a(l,k,u){var s=$([]);var q=false;var m=k;var t=l.$columns.length;for(var o=0;o<t;o++){for(var n=0;n<u.rows;n++){var r=n+o*u.rows;var p=m[r];if(p){p.appendTo(l.$columns[o]);p.showElement()}}}}function f(j){var k=j.$contentContainer;if(!k){k=$("<span class='inline-block relative-arrangement wrap'></span>");j.$contentContainer=k}j.getDataItemsController().detach();j.options.setParentContent(k);j.$columns=[]}function d(j){j.getDataItemsController().detach();var k=j.getDataItemsController().getAllControllers();var l=j.$contentContainer;if(j.$columns){$.each(j.$columns,function(m,n){n.remove()})}if(l){l.remove()}}function b(){var j={};$.each(c,function(k,l){j[k]=$.extend({removeLayout:d,startLayout:f},l)});return j}}();(function(){DataLayoutsManager.registerDataLayoutTypes({HorizontalMenu:{category:DataArrangements.Horizontal,arrange:function(p,q,o){return a(p,q,DataArrangements.Horizontal,$.extend(o,{isVertical:false}))},isMenuLayout:true,startLayout:j,removeLayout:g},VerticalMenu:{category:DataArrangements.Vertical,arrange:function(p,q,o){return a(p,q,DataArrangements.Vertical,$.extend(o,{isVertical:true}))},isMenuLayout:true,startLayout:j,removeLayout:g},SquareGridMenu:{category:DataArrangements.Grid,arrange:function(p,q,o){return a(p,q,DataArrangements.Grid,$.extend(o,{isVertical:false}))},isMenuLayout:true,startLayout:j,removeLayout:g}},DataLayoutsCategories.Normal);function m(p,o){var q;if(o.fixedSize){q=o.fixedSize}else{if(o.keepItemSize&&p.fixedSize){q=p.fixedSize}else{q=o.calculatedFixedSize}}return q}function a(q,u,v,p){p=$.extend({isVertical:false,lineSpacing:undefined,columnSpacing:undefined,keepItemSize:true,maxItems:4,dropDownNavigationSettings:undefined,createMoreItemsController:undefined,createSubHierarchyElement:undefined,createItemsController:undefined},p);var t=c(q,u,p);p.calculatedFixedSize=v.getFixedSize(t,p);var r=q.getLastArrangementOptionsByCurrentDevice();p.fixedSize=m(r,p);var s=b(q,u,p);p.length=s.length;var o=undefined;if(s.length>0){f(q,s);o=v.arrange(s,p,r)}o=$.extend({},p,o,{controllersToArrange:s});return o}function d(r,q,p,t,o){if(p){var s=r.getDataItemsController().getDataSource().getCollectionItems();$.each(q,function(v,u){if(!t||r.moreItemsController===u){var x=u.getDataItemId();var w=l(x,p,s,r.moreItemsController===u);if(w){i(r,u,w,o)}}})}}var n;var h;function i(v,H,E,t){var A={};var C=t.dropDownNavigationSettings;var B=C.navigation;var x=C.navigationProperties[B];var F=t.createItemsController();x=$.quickExtend({createInstanceController:F.createInstanceController},x);var z=H.$element;var r=t.isVertical?Side.Right:Side.Bottom;var p=t.createSubHierarchyElement({controller:H,arrowSide:r});var y;if(ViewManager.isViewMode()){var D=false;y=z;y.bind("click.menu-drop-down",function(I){A.toggle();I.stopPropagation();I.preventDefault()});if(MobileVersionViewManager.Flags.IsInMobileContext.isFalse()){D=true;z.bind("mouseenter.menu-drop-down",function(I){setTimeout(function(){A.open()},0)});y=$.unite(z,y);if(!h){h=MouseTargetTracker.create(ViewManager.getBodyElement(),{onStoppedBeingTarget:function(){n.close()}})}}var u=NavigationManager.createNavigationController(B);var q=SimpleEvent.createEventListener(PageManager.Events.PageChanging,function(){u.close()});var o=true;var G={$element:z,navigationProperties:x,isVertical:t.isVertical,pages:E.controllersData,pagesHierarchy:E.hierarchyCollection,selectedPageId:undefined,instanceId:$.uniqueID(),closeAnimationCompleteCallback:function(){o=true},rootPageId:H.getDataItemId()};if(D){$.extend(G,{mouseEnteredCallback:function(){w.setTrue("mouseEntered")},mouseLeaveCallback:function(){w.setFalse("mouseEntered")},openCallback:function(J){var I=$.unionAreas([J.getOuterArea(),z.getOuterArea()]);n=A;h.setTrackedAreas([I]);h.setCurrentMouseTarget(I);h.activate()}})}var s=ElementStates.MouseOverState;var w=ObservableFlag.createConditionalNegative({valueChangeCallback:function(J){if(J){u.open(G);o=false;var I=H.getInstance().getSkinInstance();PositionManager.stopMouseOverTracking(I);if(MobileVersionViewManager.Flags.IsInMobileContext.isFalse()){I.activateTrigger(Triggers.MouseEnter)}u.isOpened.once(false,function(){if(D){h.deactivate();n=undefined}q.deactivate();w.resetConditions();PositionManager.trackMouseOver(I);if(MobileVersionViewManager.Flags.IsInMobileContext.isFalse()){I.activateTrigger(Triggers.MouseLeave)}});q.activate()}else{u.close()}}});$.extend(A,{open:function(){if(o){w.setTrue("controller")}},close:function(){w.setFalse("controller")},toggle:function(){if(w.isTrue()){A.close()}else{A.open()}},isOpened:function(){return w.isTrue()}})}$.extend(A,{dropDownData:E,remove:function(){if(u){u.remove()}if(p){p.remove()}if(y){y.unbind(".menu-drop-down")}F.remove()}});H.dropDownController=A;v.dropDownControllers.push(H)}function b(r,o,A){r.getDataItemsController().detach();var y=r.moreItemsController;if(y){y.detach()}k(r);r.dropDownControllers=[];var s=A.maxItems;var x=$.mapToDictionary(o.instanceControllers,$.identity,function(B){return B.getDataItemId()});var t=r.getDataItemsController().getControllersHierarchy();var p=t.getRootIds();var v;var z;if(MobileVersionViewManager.Flags.IsInMobileContext.isFalse()){v=t;z=$.map(p,function(B){return x[B]})}else{z=$.getValues(x)}z.orderBy($.defaultIndexFunction);var w=false;if(z.length>s){if(!y){y=r.moreItemsController=A.createMoreItemsController()}var u=y.getDataItemId();var q=z.slice(s-1);z=z.slice(0,s-1);z.push(y);v=t.clone();if(MobileVersionViewManager.Flags.IsInMobileContext.isFalse()){v.addIds(u);$.each(q,function(C,B){v.setParent(B.getDataItemId(),u)})}else{w=true;v.addIds(u);$.each(p,function(B,C){v.setParent(C,u)})}}else{if(y){y.removeController();delete r.moreItemsController}}d(r,z,v,w,{createSubHierarchyElement:A.createSubHierarchyElement,dropDownNavigationSettings:A.dropDownNavigationSettings,createItemsController:A.createItemsController,fixedSize:A.fixedSize,isVertical:A.isVertical});return z}function f(p,q){var s=p.$contentContainer;var t=$([]);for(var o=0;o<q.length;o++){var r=q[o];r.appendTo(s);r.showElement();t.pushElements(p.$element)}t.applyDOMOrder()}function j(o){var p=o.$contentContainer;if(!p){p=$("<span class='inline-block relative-arrangement wrap'></span>");o.$contentContainer=p}o.getDataItemsController().detach();o.options.setParentContent(p)}function g(o){o.getDataItemsController().detach();k(o);delete o.dropDownControllers;var p=o.moreItemsController;if(p){p.removeController();delete o.moreItemsController}var q=o.$contentContainer;if(q){q.remove()}}function l(r,o,q,p){if(o.hasChildren(r)){var t=o.createSubHierarchy(r);if(MobileVersionViewManager.Flags.IsInMobileContext.isFalse()&&!p){t.addIds(r)}var s=$.map(t.getIds(),function(u,v){return q.getItem(v)});return{controllersData:s,hierarchyCollection:t}}return undefined}function k(o){if(o.dropDownControllers){$.each(o.dropDownControllers,function(q,p){var r=p.dropDownController;r.remove();delete p.dropDownController})}}function c(p,r,o){var q=r.instanceControllers.length;if(MobileVersionViewManager.Flags.IsInMobileContext.isFalse()){q=p.getDataItemsController().getControllersHierarchy().getRootIds().length}return Math.min(o.maxItems,q)}}());DataLayoutsManager.registerDataLayoutTypes({NavigationButton:{arrange:function(b,c,a){},startLayout:function(a){},removeLayout:function(a){}}},DataLayoutsCategories.Normal);var DesignToolsManager=new function(){this.addingToolBatch=OperationsBatch.create();this.isDesignToolDefinition=function(b){return b._objType_=="design-tool-definition"};this.registerDesignTools=function(b){$.each(b,a)};this.getToolsInCategory=function(b){var c=[];$.each(DesignTools,function(d,f){if(f.category===b){c.push(f)}});return c};function a(d,c){var b={_objType_:"design-tool-definition",category:ElementsTypesCategories.Content,name:d,displayInToolbox:true,iconClass:undefined,title:undefined,description:undefined,createHelper:undefined,designToolSize:{width:200,height:200},utilizationData:undefined,utilizeTool:function(g,f){},onElementsCreated:function(f){}};$.extend(b,c);$.extend(c,b);DesignTools[d]=c}}();var DesignTools={};(function(){DesignToolsManager.registerDesignTools({Tabs:{category:ElementsTypesCategories.Containers,designToolSize:{width:750,height:600},utilizationData:{elementForCreation:{_objType_:"Template",structures:{0:{type:ElementsTypes.TabsPanel.name,elementProperties:{sizeAndPosition:{width:750,height:600,top:0,left:0},borderWidth:{top:1,left:1,bottom:1,right:1}}}}}}},Tab:{category:ElementsTypesCategories.General,utilizationData:{elementForCreation:{_objType_:"Template",structures:{0:{type:ElementsTypes.Tab.name,elementProperties:{order:2,backgroundColor:"#333",borderColor:"#000"}}}}}},TransparentBox:{category:ElementsTypesCategories.General,utilizationData:{elementForCreation:{_objType_:"Template",structures:{0:{type:ElementsTypes.userBox.name,elementProperties:{order:1,backgroundColor:"transparent",borderColor:$.convertValueToObject("transparent",["top","left","bottom","right"]),borderWidth:$.convertValueToObject(0,["top","left","bottom","right"]),padding:$.convertValueToObject(0,["top","left","bottom","right"])}}}}}}})})();(function(){DesignToolsManager.registerDesignTools({TextInputField:{fieldType:ElementsTypes.TextInputField,title:"Text Input",formField:FormFields.TextInputField,description:"No Description",category:ElementsTypesCategories.FormFields,iconClass:"sprite-icon sprite-tool-text-input"},TextAreaField:{fieldType:ElementsTypes.TextArea,title:"Text Area",formField:FormFields.TextArea,description:"No Description",category:ElementsTypesCategories.FormFields,iconClass:"sprite-icon sprite-tool-text-area"}})})();var TemplatesTypes={UserTemplates:1,PublicTemplates:2};var RemoteTemplatesCategories={SectionHeader:200,SectionFooter:201,SectionAboutMe:202,SectionGallery:203,SectionSkills:204,SectionSchedules:205,SectionFrontPage:206,SectionContact:207,SectionFeatures:208,SectionMeetTheTeam:209,SectionImages:220,SectionText:221,SectionImagesAndText:222,SectionButtonsAndText:223,SectionVideoAndText:224,SectionVideo:225,SectionMixedContent:226,SectionPost:227,SectionBlog:228};var RemoteTemplatesPagesCategories={PagePost:300,PageBlog:301};var TemplatesManager=new function(){var r=this;var k={};var v={};this.TemplatesSectionsCategoriesMap={};this.TemplatesPagesCategoriesMap={};this.TemplatesCategories={};s();g();this.TemplatesCategoriesObservable=new ObservableCollection();this.TemplatesCategoriesObservable.put($.getValues(r.TemplatesCategories));function g(){var z={PagePost:{id:RemoteTemplatesPagesCategories.PagePost,title:"Post Page",templateSavingPropertyFilter:function(A){return A.descriptor.name!=="urlAddress"&&A.descriptor.name!=="roll"}},PageBlog:{id:RemoteTemplatesPagesCategories.PageBlog,title:"Blog Page"}};$.each(z,function(B,A){r.TemplatesCategories[B]=$.extend(A,{isDataListCategory:false,shouldSelect:$.returnTrue,isDisplayed:function(){return WebzaiController.isAdmin()&&ContextManager.isCommonFeature(Features.PageSection)}});r.TemplatesPagesCategoriesMap[A.id]=A})}function s(){var z={SectionHeader:{id:RemoteTemplatesCategories.SectionHeader,title:"Page Header"},SectionFooter:{id:RemoteTemplatesCategories.SectionFooter,title:"Page Footer"},SectionAboutMe:{id:RemoteTemplatesCategories.SectionAboutMe,title:"About Me Section"},SectionGallery:{id:RemoteTemplatesCategories.SectionGallery,title:"Gallery Section"},SectionSkills:{id:RemoteTemplatesCategories.SectionSkills,title:"Skills Section"},SectionSchedules:{id:RemoteTemplatesCategories.SectionSchedules,title:"Schedules Section"},SectionFrontPage:{id:RemoteTemplatesCategories.SectionFrontPage,title:"Front Page Section"},SectionContact:{id:RemoteTemplatesCategories.SectionContact,title:"Contact Section"},SectionFeatures:{id:RemoteTemplatesCategories.SectionFeatures,title:"Features Section"},SectionMeetTheTeam:{id:RemoteTemplatesCategories.SectionMeetTheTeam,title:"Meet The Team Section"},SectionImages:{id:RemoteTemplatesCategories.SectionImages,title:"Images Section"},SectionText:{id:RemoteTemplatesCategories.SectionText,title:"Text Section"},SectionImagesAndText:{id:RemoteTemplatesCategories.SectionImagesAndText,title:"Images & Text Section"},SectionButtonsAndText:{id:RemoteTemplatesCategories.SectionButtonsAndText,title:"Buttons & Text Section"},SectionVideoAndText:{id:RemoteTemplatesCategories.SectionVideoAndText,title:"Video & Text Section"},SectionVideo:{id:RemoteTemplatesCategories.SectionVideo,title:"Video Section"},SectionMixedContent:{id:RemoteTemplatesCategories.SectionMixedContent,title:"Mixed Content Section"},SectionPost:{id:RemoteTemplatesCategories.SectionPost,title:"Post Section",templateSavingPropertyFilter:function(A){return A.descriptor.name!=="urlAddress"&&A.descriptor.name!=="roll"}},SectionBlog:{id:RemoteTemplatesCategories.SectionBlog,title:"Blog Section"}};$.each(z,function(B,A){r.TemplatesCategories[B]=$.extend(A,{isDataListCategory:false,shouldSelect:$.returnTrue,isDisplayed:function(){var C=SelectionManager.getSelectedInstances();return WebzaiController.isAdmin()&&C&&C.length===1&&C[0].hasFeature(Features.PageSection)}});r.TemplatesSectionsCategoriesMap[A.id]=A})}function f(B,A,z){return B[z.name]&&B[z.name].length===1}function l(A,z){return A[ElementsTypes.FormElement.name]&&A[ElementsTypes.FormElement.name].length===1}function d(A,z){return A[ElementsTypes.Menu.name]&&A[ElementsTypes.Menu.name].length===1}function b(A,z){return A[ElementsTypes.Gallery.name]&&A[ElementsTypes.Gallery.name].length===1}function x(A,z){return A[ElementsTypes.PostsList.name]&&A[ElementsTypes.PostsList.name].length===1}function w(z,B,A){return B[z.name]&&B[z.name].length===1&&A.length===1&&A[0].elementType===z}function y(A,z){return w(ElementsTypes.DataListItemTemplate,A,z)}function m(A,z){return w(ElementsTypes.MenuButton,A,z)}function u(A,z){return w(ElementsTypes.ImageBox,A,z)}function t(A,z){return w(ElementsTypes.InputItem,A,z)}function j(A,z){return z[0].getFieldName()===FormFields.TextInputField.name}function h(A,z){return z[0].getFieldName()===FormFields.TextArea.name}function q(A,z){var B=false;$.each(A,function(C,D){if(ElementsTypes[C].hasFeature(Features.HasTemplates)){B=true;return false}});return B}function c(z){if(z[0].getItemMainParent().elementType===ElementsTypes.DataListElement){return TemplatesManager.TemplatesCategories.DataListItems.id}else{if(z[0].getItemMainParent().elementType===ElementsTypes.FAQ){return TemplatesManager.TemplatesCategories.FAQItems.id}else{if(z[0].getItemMainParent().elementType===ElementsTypes.linksList){return TemplatesManager.TemplatesCategories.LinksListItems.id}else{if(z[0].getItemMainParent().elementType===ElementsTypes.servicesList){return TemplatesManager.TemplatesCategories.ServicesListItems.id}else{if(z[0].getItemMainParent().elementType===ElementsTypes.iconsList){return TemplatesManager.TemplatesCategories.IconsListItems.id}else{if(z[0].getItemMainParent().elementType===ElementsTypes.Products){return TemplatesManager.TemplatesCategories.ProductsItems.id}else{if(z[0].getItemMainParent().elementType===ElementsTypes.RestaurantMenu){return TemplatesManager.TemplatesCategories.RestaurantMenuItems.id}else{if(z[0].getItemMainParent().elementType===ElementsTypes.Persons){return TemplatesManager.TemplatesCategories.PersonsItems.id}else{if(z[0].getItemMainParent().elementType===ElementsTypes.NewsFeed){return TemplatesManager.TemplatesCategories.NewsFeedItems.id}}}}}}}}}}this.getTemplatesCollection=function(z,B){B=$.valueOrDefault(B,TemplatesTypes.PublicTemplates);var A=$.objectGet(v,[z,B]);if(A===undefined){A=new RemoteCollection({fetchingFunction:function(E,C,F,D){TemplatesService.fetchTemplates(z,B,E,C,function(G){$.each(G,function(H,I){I.categoryID=z;I.templateType=B});F(G)},D)},insertionFunction:function(C,E,D){TemplatesService.addTemplates(C,z,B,E,D)},removingFunction:function(C,D,F,E){TemplatesService.deleteTemplates(C,F,E)},getIDFunction:function(){return this.id},setIDFunction:function(C){this.id=C}});$.objectSet(v,[z,B],A)}return A};this.isTemplate=function(z){return z._objType_=="Template"};this.registerTemplate=function(z){$.each(z,p)};function i(B,z){var A={_objType_:"Template",name:z,dataSourceName:undefined,structures:{},connections:{},customStatesProperties:{}};$.extend(A,B);$.extend(B,A);return B}function p(z,A){A=i(A,z);Templates[z]=A}this.getTemplateArea=function(D,A){$.each(D.structures,function(H,I){if(I.offset===undefined){I.offset={left:0,top:0}}});var B=$.min(D.structures,function(H){return z(H,H.offset.left,"left")}).value;var G=$.min(D.structures,function(H){return z(H,H.offset.top,"top")}).value;var C=$.max(D.structures,function(H){return F(H,H.offset.left,"left",function(J,I){return J.elementProperties.sizeAndPosition.width+I})}).value;var E=$.max(D.structures,function(H){return F(H,H.offset.top,"top",function(J,I){return J.elementProperties.sizeAndPosition.height+I})}).value;return $.extendedAreaInfo({left:B,top:G,right:C,bottom:E});function z(I,H,K){if(!I.childElements||I.childElements.length===0||A){return H}else{var J=$.min(I.childElements,function(L){return z(L,H+L.elementProperties.sizeAndPosition[K],K)}).value;return J<H?J:H}}function F(J,I,L,M){var K=M(J,I);if(!J.childElements||J.childElements.length===0||A){return K}else{var H=$.max(J.childElements,function(N){return F(N,I+N.elementProperties.sizeAndPosition[L],L,M)}).value;return H<K?K:H}}};this.normalizeTemplateRootsOffsets=function(B,A){$.each(B.structures,function(D,E){if(E.offset===undefined){E.offset={left:0,top:0}}});var z=$.min(B.structures,function(D){return D.offset.left}).value;var C=$.min(B.structures,function(D){return D.offset.top}).value;$.each(B.structures,function(D,E){if(E.offset===undefined){E.offset=$.translateOffset(E.offset,{left:0-z,top:0-C})}})};this.normalizeTemplateRootsPositions=function(B,A){var z=A.left;var C=A.top;$.each(B.structures,function(D,E){if(E.offset){E.elementProperties.sizeAndPosition=$.extend({},E.elementProperties.sizeAndPosition,{left:E.offset.left-z,top:E.offset.top-C})}else{E.offset={left:0,top:0}}})};this.translateTemplateRootsPosition=function(z,A){$.each(z.structures,function(B,C){if(C.offset===undefined){C.elementProperties.sizeAndPosition=$.translateOffset(C.elementProperties.sizeAndPosition,A)}})};this.addTemplateInstance=function(A,D,H){H=$.extend({centerPosition:undefined,basePosition:undefined,isContent:false,isLoading:false,targetOffset:undefined,initialProperties:{all:{}},rootsIds:undefined,generateNewID:undefined,isForTemplateUse:false,structureProcessor:undefined},H);OrderManager.beginReorderingBatch();LayoutManager.beginLayoutUpdateBatch();PositionManager.VisibilityUpdateBatch.start();CompatibilityManager.fixTemplateInformation({templateStructure:A.elementForCreation,StructureVersion:A.elementForCreation.version!==undefined?A.elementForCreation.version:0});var F=ElementsManager.duplicateHierarchyInfo(A.elementForCreation,H);if(H.targetOffset){r.normalizeTemplateRootsOffsets(F);r.translateTemplateRootsPosition(F,H.targetOffset)}o(F.structures,H.centerPosition,H.basePosition);a(F.structures);H.initialProperties.all=$.extend(H.initialProperties.all,{templateName:A.elementForCreation.name,templateID:"template"+StructureLoadingManager.generateWebsiteId()});var G={dataItemID:A.dataItemID,styleBindingId:A.styleBindingId,initialProperties:$.replaceKeys(H.initialProperties,F.oldToNewIDMapping),parent:D,dataSourceName:A.dataSourceName,isContent:H.isContent,isVisible:H.isVisible,isLoading:H.isLoading,isForTemplateUse:H.isForTemplateUse};if(G.dataSourceName){var C=F.structures[0];var E=C.elementProperties;if(E){var B=E.fieldsMap;n(G,B)}}if(G.styleBindingId){G.initialProperties.all.styleBindingId=G.styleBindingId}var z=ElementsManager.addHierarchyInfo(F,G);if(A.onCreationFinished){A.onCreationFinished(z)}PositionManager.VisibilityUpdateBatch.finish();LayoutManager.endLayoutUpdateBatch();OrderManager.endReorderingBatch();return{instances:z}};this.templateSavingPropertyFilter=function(z){return z.descriptor.name!=="urlAddress"&&z.descriptor.name!=="roll"&&z.descriptor.name!=="binding"};function o(B,z,A){if(z){$(B).each(function(D,C){if(C.elementProperties&&C.elementProperties.sizeAndPosition){C.elementProperties.sizeAndPosition.left=z.left-C.elementProperties.sizeAndPosition.width/2;C.elementProperties.sizeAndPosition.top=z.top-C.elementProperties.sizeAndPosition.height/2}})}else{if(A){$(B).each(function(D,C){if(C.elementProperties&&C.elementProperties.sizeAndPosition){C.elementProperties.sizeAndPosition.left+=A.left;C.elementProperties.sizeAndPosition.top+=A.top}})}}}function a(z){$(z).each(function(B,A){if(!A.elementProperties){A.elementProperties={}}var C=A.elementProperties.order;if(C===undefined||C===null){C=0}A.elementProperties.order=OrderManager.getMaxOrder()+1+C;OrderManager.increaseMaxOrder()})}function n(A,z){if(A.dataSourceName&&z){$.each(z,function(C,B){if(!A.initialProperties[C]){A.initialProperties[C]={}}A.initialProperties[C].binding={dataFields:$.extend({},B),dataSourceName:A.dataSourceName,dataItemID:A.dataItemID}})}}this.synchronizeAddedInstancesPosition=function(z){var A=$.shrinkArea($.getWindowArea(),DesignerManager.getDesignerAreaCoordinates());ElementsLayoutHelper.translateInstancesArea(z,A.center,{horizontalAlignment:HorizontalAlignment.Centered,verticalAlignment:VerticalAlignment.Centered})}}();var Templates={};var DataItemsController=new function(){this.create=function(f){var d={};f.data.dataControllers={};f.data.dataControllersArray=[];f.data.duringFetch=false;return $.extend(d,{controllersCountChanged:SimpleEvent.create(),initialize:function(){var k=f.getDataSource();var m=k.getCollectionItems();var l=k.getCollectionFields();f.data.instanceControllersChangedEventListener=SimpleEvent.createEventListener([m.itemsChangedEvent],function(p){var o=g(p);var n=(p.addedItems&&p.addedItems.length>0)||(p.removedItems&&p.removedItems.length>0);if(!f.data.duringFetch&&(o||n)){f.reArrangeTheTemplates({shouldPush:n})}}).activate()},clear:function(){f.data.instanceControllersChangedEventListener.dispose()},getInstance:function(){return f},getId:function(){return f.id},getInstanceController:function(k){if(!f.data.dataControllers||!f.data.dataControllers[k]){return undefined}return f.data.dataControllers[k]},getInstanceControllers:function(){return f.data.dataControllers},getAllControllers:function(){return f.data.dataControllersArray},getControllersCount:function(){return f.data.dataControllersArray.length},getDataSource:function(){return f.getDataSource()},getControllersByIndex:function(l,k){return f.data.dataControllersArray.slice(l,k)},fetchAllControllers:function(k,l){f.data.duringFetch=true;var m=f.getDataSource();m.fetchAllItems(i(k),a(l))},fetchControllersByIndex:function(p,o,k,l,m){m=$.extend({fetchAlways:true},m);var n=f.getDataSource();f.data.duringFetch=true;n.fetchItems(p,o,i(k),a(l),m)},getControllersHierarchy:function(){var k=f.getDataSource();if(k.getControllersHierarchy){return k.getControllersHierarchy()}return undefined},detach:function(){$.each(d.getAllControllers(),function(k,l){l.detach()})},attach:function(){}});function a(k){return function(l){f.data.duringFetch=false;k(l)}}function i(k){return function(l){var m=l.fetchedItems;var n=[];$.each(m,function(o,p){n[o]=h(p)});f.data.duringFetch=false;k({instanceControllers:n,totalCount:l.totalCount})}}function g(k){if(f.isDeleted){return}f.reArrangementDisabled.setValue(true,"itemsChanged");OperationsManager.disableBatch();OrderManager.beginReorderingBatch();LayoutManager.beginLayoutUpdateBatch();PositionManager.VisibilityUpdateBatch.start();PropertiesManager.UpdateBatch.start();ElementsManager.HierarchyChangedUpdateBatch.start();if(k.removedItems){j(k.removedItems)}if(k.addedItems){c(k.addedItems)}ElementsManager.HierarchyChangedUpdateBatch.finish();PropertiesManager.UpdateBatch.finish();PositionManager.VisibilityUpdateBatch.finish();LayoutManager.endLayoutUpdateBatch();OrderManager.endReorderingBatch();OperationsManager.endDisableBatch();f.reArrangementDisabled.setValue(false,"itemsChanged");if((k.addedItems&&k.addedItems.length>0)||(k.removedItems&&k.removedItems.length>0)||(k.updatedItems&&k.updatedItems.length>0)){return b()}return false}function j(l){if(l.length===0){return}f.data.isInBuild=true;var m=[];for(var k=0;k<l.length;k++){var n=f.data.dataControllers[l[k]];m.push(n);delete f.data.dataControllers[l[k]]}InstanceController.removeControllers(m);f.data.isInBuild=false}function c(k){f.data.isInBuild=true;k=$.makeArray(k);$.each(k,function(l,m){h(m)});f.data.isInBuild=false}function h(o){var p=f.data.dataControllers[o.id];if(p===undefined){var n=f.getDefaultTemplate(o.fieldTypeName).hierarchy;var m=f.elementType.structureProcessor;var l=m?function(q){return m(q,o.fieldTypeName)}:undefined;p=InstanceController.create(n,{parentInstanceId:f.id,fieldName:o.fieldTypeName,structureProcessor:l,dataSourceOptions:{dataItem:o,dataItemID:o.id,dataSourceName:f.getDataSource().name},templateOptions:{isContent:true,isLoading:true,rootsIds:[f.getDataItemInstanceId(o.id)],generateNewID:true},isForTemplateUse:f.isForTemplateUse()});var k=f.getPropertyValue("itemsStyle")[o.id];p.updatePropertiesValues(k);f.data.dataControllers[o.id]=p;p.initializedEvent.bind(function(){var q=p.getInstance();q.setDataItemId(o.id);q.data.dataListParent=f;f.setItem(q);q.setPropertyValue("fieldsData",o);q.propertyChangedEvent.bind("sizeAndPosition",function(){if(Global.IsDesigner&&!ModeManager.updateBatch.isActive()){var r=q.getPropertyValue("sizeAndPosition");var t=$.extend({},f.getPropertyValue("itemsStyle"));var s=$.extend({},t[o.id],{sizeAndPosition:$.extend({},r)});t[o.id]=s;f.setPropertyValue("itemsStyle",t)}if(f.dataLayoutController.shouldRearrangeWhenItemSizeChanged()){f.reArrangeTheTemplates()}})})}return p}function b(){var m=f.getDataSource();var l=m.getAllItems();var k=f.data.dataControllersArray;if(f.data.dataControllers&&!$.isEmptyObject(f.data.dataControllers)){f.data.dataControllersArray=$.getValues(f.data.dataControllers).sort(function(p,n){var r=l[p.getDataItemId()];var s=l[n.getDataItemId()];var q=parseInt(r.index);var o=parseInt(s.index);if(q!==undefined&&o!==undefined){return q-o}else{if(q!==undefined){return -1}else{if(o!==undefined){return 1}else{return 0}}}})}else{f.data.dataControllersArray=[]}$.each(f.data.dataControllersArray,function(o,n){n.setIndex(o)});return !$.defaultArrayEqualityComparer(k,f.data.dataControllersArray)}}}();var DataLayoutController=new function(){this.create=function(v,f){f=$.extend({onArrangementStarted:$.noop,onArrangementFinished:$.noop,startInitializingLayoutCallback:$.noop,finishInitializingLayoutCallback:$.noop,startArrangingCallback:$.noop,finishArrangingCallback:$.noop,setParentContent:$.noop,getContainerSize:$.noop},f);var t=v.getInstance();var l={};var j=f.startInitializingLayoutCallback;var s=f.finishInitializingLayoutCallback;var o=f.startArrangingCallback;var n=f.finishArrangingCallback;var k=f.getContainerSize;var x=f.setParentContent;var r=ObservableFlag.create(false);var h=ObservableFlag.create(false);var m=ObservableFlag.create(false);var a=OperationsBatch.create({batchStartCallback:o,batchFinishCallback:n});var u=OperationsBatch.create({batchStartCallback:j,batchFinishCallback:s});var b=OperationsQueue.createCancelableQueue({startOperationCallback:function(){m.setTrue();f.onArrangementStarted();u.start();l.refreshLayout();u.finish()},finishOperationCallback:function(){f.onArrangementFinished();m.setFalse()}});t.instanceRemoved.one(function(){b.dispose()});var g;var i;var w;var c;var q=v;var d={};var p={pc:{},mobile:{}};l=$.extend(l,{options:f,isInitialized:r,refreshEmptyState:function(){l.getArrangement().refreshEmptyState(l)},isInEmptyState:function(){return t.inEmptyStateFlag.isTrue()},getArrangementBatch:function(){return a},isInArrangement:function(){return m.isTrue()},setDataItemsController:function(y){q=y},getDataItemsController:function(){return q},setArrangement:function(y){if(DataLayouts[y]!==w){c=w;w=DataLayouts[y];h.setTrue()}},getArrangement:function(){return w},setLayoutOptions:function(y){g=y},hasItemSpecificSize:function(){return w.canItemResize.vertically||w.canItemResize.horizontally},shouldRearrangeWhenItemSizeChanged:function(){return w.shouldRearrangeWhenItemSizeChanged},resetLayout:function(){q.detach();h.setTrue()},refreshLayout:function(){if(w){if(r.isFalse()||h.isTrue()){if(h.isTrue()){l.remove()}j();w.startLayout(l);s();r.setTrue();h.setFalse()}}},resetLastArrangementOptions:function(){d={}},getLastArrangementOptions:function(){return d},getLastArrangementOptionsDevice:function(){return p},getLastItemSizeByCurrentDevice:function(){return $.objectGet(p,[MobileVersionViewManager.Flags.IsActivated.isTrue()?"mobile":"pc","fixedSize"])},getLastArrangementOptionsByCurrentDevice:function(){return $.objectGet(p,[MobileVersionViewManager.Flags.IsActivated.isTrue()?"mobile":"pc"])},getLastArrangementInstanceSize:function(){var y=l.getLastArrangementOptions();if(y&&y.contentSize){return y.contentSize}return null},remove:function(){if(r.isTrue()){if(c){c.removeLayout(l);c=undefined}else{w.removeLayout(l)}r.setFalse()}},reArrangeTheLayout:function(y){y=$.extend({size:f.getContainerSize()},g,y);var z=MobileVersionViewManager.Flags.IsInMobileContext.isTrue();y.fixedSize=z?false:y.fixedSize;y.keepItemSize=z&&(w.category!==DataArrangements.Grid&&w.category!==DataArrangements.Vertical)?false:y.keepItemSize;if(w){b.executeOperation(function(B,C){var A=l.lastFetchedData;if(A!==undefined&&!y.shouldFetch){B(A)}else{w.fetchControllersToArrange(l,y,B,C)}},function(C){l.lastFetchedData=C;if(C.instanceControllers.length>0&&!y.fixedSize&&!t.isFillHorizontal()){var B;if(MobileVersionViewManager.Flags.IsInMobileContext.isTrue()&&!t.data.wasFirstArrangedInMobile){t.data.wasFirstArrangedInMobile=ViewManager.isDesignMode();B=t.data.structureMetaData?t.data.structureMetaData.dataItemSizeMobile:undefined;B=t.data.structureMetaData&&$.isPlainObject(t.data.structureMetaData.dataItemSizeMobile)?t.data.structureMetaData.dataItemSizeMobile:undefined}else{if(MobileVersionViewManager.Flags.IsInMobileContext.isFalse()&&!t.data.wasFirstArrangedInPc){t.data.wasFirstArrangedInPc=ViewManager.isDesignMode();B=t.data.structureMetaData&&$.isPlainObject(t.data.structureMetaData.dataItemSizePc)?t.data.structureMetaData.dataItemSizePc:undefined}}if(B){y.fixedSize=B;y.shouldPush=true}}a.start();if(t.isFillVertical()){y.fixedSize=false;y.keepItemSize=false}var A=w.arrange(l,C,y);if(A){if(MobileVersionViewManager.Flags.IsActivated.isTrue()){p.mobile=A}else{p.pc=A}}d=A;t.totalCountObservable.setValue(C.totalCount);a.finish()},ExceptionUtils.handleAjaxException)}},getSize:function(){return d&&d.contentSize?d&&d.contentSize:undefined},getMinSize:function(){return{width:0,height:0}}});return l}}();var PrivacyPolicyBar=new function(){var b;var c=0;var a;this.getPrivacyPolicyHeight=function(){return !PageManager.getCurrentPage().getFooterInstance()?PrivacyPolicyBar.getPrivacyPolicyActualHeight():0};this.getPrivacyPolicyActualHeight=function(){return ViewManager.isViewMode()&&b?(c?c:function(){c=b.height();return c}()):0};this.initialize=function(){var g=SiteSettingsManager.getValue("privacyPolicyActive");if(g){var l=SimpleEvent.createEventListener([$.getWindowSizeEvent()],function(){d();if(Dialog.hasOpenedDialogs()){Dialog.close(i);Dialog.open(i,{showingAnimationFunction:function(){this.show();l.activate()},hidingAnimation:function(){this.hide();l.deactivate()}})}});var j=SiteSettingsManager.getValue("privacyPolicy");b=$('<div id="privacy-policy-bar">Privacy Policy</div>');var k=new StringBuilder();k.append('<div class="privacy-policy-dialog">');k.append('<div class="privacy-policy-dialog-title">Privacy Policy</div>');k.append('<div class="privacy-policy-dialog-content">');k.append('<pre class="privacy-policy-dialog-text dialog-text">');k.append("</pre>");k.append("</div>");k.append('<div class="privacy-policy-dialog-footer">');k.append('<span class="privacy-policy-dialog-button vertically-centered dialog-button-1 variation-medium variation-action">Close</span>');k.append("</div>");k.append("</div>");var i=$(k.toString());var f=$(".dialog-text",i).html(j);var h=$(".privacy-policy-dialog-button",i);a=$(".privacy-policy-dialog-content",i);h.makeButton().buttonClick(function(){var m=Dialog.getDialogOverlay(i);Dialog.close(i);m.removeClass("popup-overlay")});b.makeButton().buttonClick(function(){d();Dialog.open(i,{showingAnimationFunction:function(){this.show();l.activate()},hidingAnimation:function(){this.hide();l.deactivate()}});var m=Dialog.getDialogOverlay(i);m.css({backgroundColor:"black",opacity:0.8})});SimpleEvent.bind([PageManager.Events.AfterPageChanged],function(){if(ViewManager.isViewMode()){if(PageManager.getCurrentPage().getFooterInstance()&&PageManager.getCurrentPage().getFooterInstance().isInstanceVisible()){PageManager.getCurrentPage().getFooterInstance().$element.append(b)}else{if(MobileVersionViewManager.Flags.IsInMobileContext.isTrue()&&Global.IsDesigner){$(".scrolling-view.mobile-wrapper-mode-scrolling-view").append(b)}else{$("body").append(b)}}}})}};function d(){a.css("height",$.getWindowSize().height*0.8-250);a.css("width",$.minValue([$.getWindowSize().width*0.8,900]))}}();var SlideNavigationPanel=new function(){var b={Panel:{group:"slide-navigation-panel-templates",name:"slide-navigation-panel-template",isSimple:true},PageItem:{group:"slide-navigation-panel-templates",name:"page-item-template",isSimple:true}};var c=$.browser.msie&&parseInt($.browser.version)<9?"backgroundColor":"rgbaBackground";this.create=function(g){var p=PanelsManager.createBaseController();var i=[];var n=$.useTemplate(b.Panel);var d=$(".close-icon-content",n);var l=$(".pages-list",n);var x=$(".header",n);var v=$(".footer",n);FontIconsManager.applyIcon(d,{collectionName:"public-font-icons",iconName:"times"});d.click(function(){p.requestDeactivation()});var m=ScrollingView.create(l,{scrollbarClass:"slide-scrollbar"});m.$scrollingPane.setMoveScrolling(m.scrollingController,{enableHorizontalScrolling:false});var t={collectionName:"public-font-icons",iconName:"plus"};var f={collectionName:"public-font-icons",iconName:"minus"};var s=ItemsListLayoutsFactory.createHierarchyLayout();var u=l.makeItemsList({idFunction:$.defaultIdFunction,itemCreationFunction:function(E,G){var z=$.useTemplate(b.PageItem,E);var F=$(".open-icon",z);F.click(function(){var H=G.$wrapper.find(">.hierarchy-item-content >.hierarchy-children-container");H.slideDown({duration:200,progress:k,always:function(){G.$wrapper.addClass("open");k()}})});FontIconsManager.applyIcon(F,t);var D=$(".close-icon",z);D.click(function(){var H=G.$wrapper.find(">.hierarchy-item-content >.hierarchy-children-container");H.slideUp({duration:200,progress:k,always:function(){G.$wrapper.removeClass("open");k()}})});FontIconsManager.applyIcon($(".close-icon",z),f);G.data.$pageTitle=z.find(".page-title");if(!p.currentActivationArgs.disableLink){var C=$("<a class='no-decorations'></a>");C.addClass("internal-link");C.click(function(){setTimeout(function(){p.requestDeactivation(true)},0)});var B=UrlManager.getFullHtmlUrl(PageManager.getPageFragmentValue(E.id));C.attr("href",B);var A=$(".title-container",z);A.wrap(C);G.data.$lingWrapper=A.parent()}return z},itemUpdatedCallback:function(C,z){if(z){var B=C.item;C.data.$pageTitle.text(B.title);if(C.data.$lingWrapper){var A=UrlManager.getFullHtmlUrl(PageManager.getPageFragmentValue(B.id));C.data.$lingWrapper.attr("href",A)}}}}).addOrderingSupport({orderingValueSelector:function(z){return z.item.index}}).addLayoutSupport().postponeLayoutUpdate();u.layoutRecalculated.bind(k);p.associateScrollingView(m);p.associateItemsList(u);var h=NavigationUtils.createCssRules("slide-navigation-panel");var y={};var o;var q;var j;$.extend(p,{$element:n,visualizers:i,defaultActivationArgs:{direction:undefined,backgroundColor:undefined,width:undefined,height:undefined,hierarchyOpened:undefined,useHierarchy:undefined,fontColor:undefined,fontSize:undefined,font:undefined,pages:undefined,pagesHierarchy:undefined,maxSize:undefined,selectedPageId:undefined,instanceId:undefined},initialize:function(){},onActivated:function(A){var J=false;var F=MobileVersionViewManager.Flags.IsInMobileContext.isTrue();if(o!==A.instanceId||F!==j||!$.defaultEqualityComparer(A.maxSize,y.maxSize)){var H=A.direction;var G=(H=="up"||H=="down");var I=A.fontSize;var z=a(ThemeColorsManager.evaluateColorBinding(A.backgroundColor),!A.pushContent);w(z,I);x.css(c,z.backgroundColors[0]);v.css(c,z.backgroundColors[0]);n.toggleClass("vertical",G);if(G){n.css({width:"",height:Math.min(A.height,A.maxSize.height)})}else{n.css({width:Math.min(A.width,A.maxSize.width),height:""})}var B=ThemeFontsManager.evaluateFontBinding(A.font);n.css({color:ThemeColorsManager.evaluateColorBinding(A.fontColor,true),fontSize:"{0}px".format(I),fontFamily:B!==null?B:""});if(y.useHierarchy!==A.useHierarchy||y.pages!==A.pages||y.pagesHierarchy!==A.pagesHierarchy||y.disableLink||A.disableLink){u.releaseBoundCollection();u.clear();u.setLayout(undefined);if(q){q.release();q=undefined}if(CollectionUtils.isObservableCollection(A.pages)){q=CollectionObserver.create(A.pages);u.setItems(q)}else{u.setItems(A.pages)}if(A.useHierarchy){s.setHierarchyCollection(A.pagesHierarchy)}else{var D=new HierarchyCollection({ids:$.getKeys(u.getDataItems())});s.setHierarchyCollection(D)}u.setLayout(s);J=true}if(A.useHierarchy&&A.hierarchyOpened){$.each(u.items,function(L,K){K.$wrapper.addClass("open")});k()}else{if(!J&&y.useHierarchy&&y.hierarchyOpened){$.each(u.items,function(L,K){K.$wrapper.removeClass("open")});k()}}}if(J||y.selectedPageId!==A.selectedPageId){if(!J){var E=u.items[y.selectedPageId];if(E){E.$item.removeClass("state-selected")}}var C=u.items[A.selectedPageId];if(C){C.$item.addClass("state-selected")}y.selectedPageId=A.selectedPageId}if(q){q.unPostponeUpdates()}y=A;o=A.instanceId;j=F},onDeactivated:function(){if(q){q.postponeUpdates()}},refresh:function(){m.refreshScrolling()}});return p;function k(){v.css("top",l.height()+40)}function r(z){var A={};A[c]=z;return A}function w(z,D){var B=z.backgroundColors;var A=z.backgroundHoverColors;D=Math.round(D/1.25);h.rule(".hierarchy-level-0 > .hierarchy-item-content > .hierarchy-item-container .page-item",$.quickExtend({"padding-left":"45px"},r(B[0])));h.rule(".hierarchy-level-0 > .hierarchy-item-content > .hierarchy-item-container .page-item:hover",r(A[0]));for(var C=1;C<=3;C++){h.rule(".hierarchy-level-{0} > .hierarchy-item-content > .hierarchy-item-container .page-item".format(C),$.quickExtend({"font-size":D,"padding-left":"{0}px".format(45+15*C)},r(B[C])));h.rule(".hierarchy-level-{0} > .hierarchy-item-content > .hierarchy-item-container .page-item:hover".format(C),r(A[C]))}h.rule(".page-item.state-selected .page-title",r(z.selectedColor))}};function a(j,g){j=$.Color(j);if(!g){j[3]=1}var h=NavigationUtils.calculateAdjustBrightnessSign(j,0.02*3+0.02);var f=[];var d=[];for(var l=0;l<=3;l++){var k=l===0?j:ColorsHelper.adjustBrightness(j,function(i){return i+h*(0.02*l)});var m=ColorsHelper.adjustBrightness(j,function(i){return i+h*(0.02*l+0.02)});f.push(k.toCSS());d.push(m.toCSS())}return{selectedColor:ColorsHelper.adjustBrightness(j,function(n){var i=n+(-1)*h*(0.03);var o=$.adjustFraction((i),3);if(o>1){return 1}else{if(o<0){return 0}}return i}).toCSS(),backgroundColors:f,backgroundHoverColors:d}}}();var FreemiumBanners=new function(){var b=this;var a;this.isVisible=ObservableFlag.createConditionalPositive({valueChangeCallback:function(c){$("body").css("padding-bottom",c?a:"")}});this.initialize=function(){var c=PageData.IsSitePreview;var h=(!SiteManager.isPremium()&&!PageData.IsTemplate)||c;var d=false;if(!Global.IsDesigner&&!PageData.IsTemplate){d=LimitationsManager.getFreemiumBannerLimitation()}h=!!d;b.isVisible.setValue(h);if(h){var g=d.iframeUrl;var i=parseInt(d.iframeHeight);var f=$('<iframe id="freemium-footer-iframe" scrolling="no"></iframe>').attr("src",PathUtils.combinePaths(d.iframeUrl,""+SiteManager.getSiteID())).css("height",i).css("z-index",100000).appendTo("body");a=i}b.isVisible.valueChangedEvent.bindAndExecute(function(){var j=b.isVisible.getValue();$("body").css("padding-bottom",j?a:"")})};this.getFooterHeight=function(){if(b.isVisible.isTrue()){return a}else{return 0}}}();